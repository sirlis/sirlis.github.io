[
  
  {
    "title": "å¼ºåŒ–å­¦ä¹ ï¼ˆç­–ç•¥æ¢¯åº¦æ³•ï¼‰",
    "url": "/posts/reinforcement-learning-Policy-Gradient/",
    "categories": "Academic, Knowledge",
    "tags": "reinforcement learning",
    "date": "2023-11-27 16:43:19 +0800",
    





    
    "snippet": "æœ¬æ–‡ä»‹ç»äº†å¼ºåŒ–å­¦ä¹ çš„ç­–ç•¥æ¢¯åº¦æ³•ï¼ˆPolicy Gradientï¼‰ã€‚  1. å›é¡¾  2. åŸºäºç­–ç•¥çš„å¼ºåŒ–å­¦ä¹           2.1. ç­–ç•¥å‡½æ•°      2.2. ç­–ç•¥å‡½æ•°çš„åˆ†å¸ƒå½¢å¼      2.3. ç­–ç•¥æ¢¯åº¦çš„æ¦‚å¿µ      2.4. ç­–ç•¥æ¢¯åº¦çš„è®¡ç®—                  2.4.1. åŸºäºç´¯è®¡æ”¶ç›Šçš„ç­–ç•¥æ¢¯åº¦          2.4.2. åŸºäºä»·å€¼å‡½æ•°çš„ç­–ç•¥æ¢¯åº¦    ...",
    "content": "æœ¬æ–‡ä»‹ç»äº†å¼ºåŒ–å­¦ä¹ çš„ç­–ç•¥æ¢¯åº¦æ³•ï¼ˆPolicy Gradientï¼‰ã€‚  1. å›é¡¾  2. åŸºäºç­–ç•¥çš„å¼ºåŒ–å­¦ä¹           2.1. ç­–ç•¥å‡½æ•°      2.2. ç­–ç•¥å‡½æ•°çš„åˆ†å¸ƒå½¢å¼      2.3. ç­–ç•¥æ¢¯åº¦çš„æ¦‚å¿µ      2.4. ç­–ç•¥æ¢¯åº¦çš„è®¡ç®—                  2.4.1. åŸºäºç´¯è®¡æ”¶ç›Šçš„ç­–ç•¥æ¢¯åº¦          2.4.2. åŸºäºä»·å€¼å‡½æ•°çš„ç­–ç•¥æ¢¯åº¦                          2.4.2.1. ç­–ç•¥æ¢¯åº¦å®šç†              2.4.2.2. REINFORCEï¼ˆè’™ç‰¹å¡æ´›ç­–ç•¥æ¢¯åº¦ï¼‰                                2.4.3. ç­–ç•¥æ¢¯åº¦çš„æ”¹è¿›                          2.4.3.1. REINFORCE with baseline              2.4.3.2. Actor-Critic                                            3. å‚è€ƒæ–‡çŒ®1. å›é¡¾åŸºäºä»·å€¼å‡½æ•°çš„å¼ºåŒ–å­¦ä¹ æ–¹æ³•  åŠ¨æ€è§„åˆ’æ–¹æ³•ï¼ˆDynamic Programming, DPï¼‰  è’™ç‰¹å¡æ´›æ–¹æ³•ï¼ˆMonte Carlo, MCï¼‰  æ—¶åºå·®åˆ†æ–¹æ³•ï¼ˆTemporal-Difference, TDï¼‰è¿™ä¸‰ç§æ–¹æ³•å­˜åœ¨å…±åŒç‰¹ç‚¹ï¼š  åœ¨æ±‚è§£å¼ºåŒ–å­¦ä¹ ä»»åŠ¡æ—¶ï¼Œæœ€ç»ˆç›®æ ‡æ˜¯æ±‚è§£æ»¡è¶³è§„åˆ™çš„æœ€ä¼˜ç­–ç•¥ $\\pi$ã€‚ä½†ä»¥ä¸Šä¸‰ç§æ–¹æ³•å¹¶ æ²¡æœ‰ç›´æ¥æ±‚è§£ ç­–ç•¥ $\\pi$ è¿™ä¸ªå˜é‡ï¼Œè€Œæ˜¯å…ˆè®¡ç®—çŠ¶æ€ä»·å€¼å‡½æ•° $V_\\pi(s)$ æˆ–çŠ¶æ€-åŠ¨ä½œä»·å€¼å‡½æ•° $q_\\pi(s,a)$ï¼›ç„¶åå†åŸºäºä»·å€¼å‡½æ•°ç»“æœæ”¹è¿›ç­–ç•¥ $\\pi$ï¼Œæ˜¯ä¸€ç§é—´æ¥æ–¹å¼;  åœ¨ç­–ç•¥æ”¹è¿›è¿‡ç¨‹ä¸­ï¼Œæœ¬è´¨ä¸Šå‡é€‰æ‹©æœ€ä¼˜ä»·å€¼å‡½æ•°å¯¹åº”çš„åŠ¨ä½œä½œä¸ºæ–°çš„ç­–ç•¥ï¼›  å‡ä¸ºè¡¨æ ¼å¼å¼ºåŒ–å­¦ä¹ çš„ä»£è¡¨æ–¹æ³•ã€‚ç‰¹åˆ«åœ°ï¼Œå¯¹äº DQN æ–¹æ³•ï¼Œç¥ç»ç½‘ç»œçš„è¾“å…¥æ˜¯åŸå§‹çš„çŠ¶æ€ä¿¡æ¯ï¼Œå¦‚æ¸¸æˆç”»é¢ï¼Œè¾“å‡ºæ˜¯åœ¨è¿™ç§çŠ¶æ€ä¸‹æ‰§è¡Œå„ç§åŠ¨ä½œçš„å›æŠ¥ï¼Œå³ä»·å€¼å‡½æ•°ï¼ˆQå‡½æ•°ï¼‰ã€‚è®­ç»ƒå®Œæˆä¹‹åï¼Œç¥ç»ç½‘ç»œé€¼è¿‘çš„æ˜¯æœ€ä¼˜ Q å‡½æ•° $Q(s,a)$ã€‚          +----+ ----&gt;Q(s,a1)                       +----+  s  ---&gt; |f(x)| ----&gt;Q(s,a2)       or     s,ai ---&gt;|f(x)| ----&gt;Q(s,ai)          +----+ ----&gt;Q(s,a3)                       +----+ä»¥ DQN ä¸ºä»£è¡¨çš„åŸºäºä»·å€¼çš„å¼ºåŒ–å­¦ä¹ æ–¹æ³•ï¼Œè™½ç„¶åœ¨æŸäº›é—®é¢˜ä¸Šå–å¾—äº†æˆåŠŸï¼Œä½†å­˜åœ¨ä»¥ä¸‹é—®é¢˜ï¼š      æ— æ³•è¡¨ç¤ºéšæœºç­–ç•¥ã€‚æŸäº›é—®é¢˜çš„æœ€ä¼˜ç­–ç•¥æ˜¯éšæœºç­–ç•¥ï¼Œéœ€è¦ä»¥ä¸åŒçš„æ¦‚ç‡é€‰æ‹©ä¸åŒçš„åŠ¨ä½œã€‚è€ŒåŸºäºä»·å€¼çš„å¼ºåŒ–å­¦ä¹ ç®—æ³•åœ¨å®ç°æ—¶é‡‡ç”¨äº†è´ªå¿ƒç­–ç•¥ï¼Œç»™å®šä¸€ä¸ªçŠ¶æ€ ï¼Œé€‰æ‹©çš„ç­–ç•¥æ˜¯ç¡®å®šæ€§çš„ï¼Œæ˜¾ç„¶æ— æ³•å®ç°è¿™ç§æŒ‰ç…§æ¦‚ç‡æ‰§è¡Œå„ç§å€™é€‰åŠ¨ä½œçš„è¦æ±‚ã€‚æ¯”å¦‚çŸ³å¤´å‰ªåˆ€å¸ƒçš„æœ€ä¼˜ç­–ç•¥æ˜¯ä»¥ (1/3, 1/3, 1/3ï¼‰çš„æ¦‚ç‡æ¥é€‰æ‹©çŸ³å¤´/å‰ªåˆ€/å¸ƒï¼ŒåŸºäºä»·å€¼çš„å¼ºåŒ–å­¦ä¹ æ— æ³•å®ç°è¿™ç§ç­–ç•¥ã€‚        æ— æ³•å¤„ç†é«˜ç»´è§‚å¯Ÿç©ºé—´ã€‚DQN è¦æ±‚è§‚å¯Ÿç©ºé—´æ˜¯ç¦»æ•£çš„ï¼Œä¸”åªèƒ½æ˜¯æœ‰é™ä¸ªï¼Œè¿™æ ·æ‰èƒ½å¯»æ‰¾ä½¿åŠ¨ä½œå€¼å‡½æ•°æœ€å¤§åŒ–çš„åŠ¨ä½œçš„æ“ä½œã€‚ä½†åœ¨å¾ˆå¤šé—®é¢˜ç‰¹åˆ«æ˜¯ç‰©ç†æ§åˆ¶ä»»åŠ¡ä¸­ï¼Œå…·æœ‰è¿ç»­å®å€¼å’Œé«˜ç»´çš„è§‚å¯Ÿç©ºé—´ï¼Œä¾‹å¦‚è¦æ§åˆ¶åœ¨ x y z æ–¹å‘çš„é€Ÿåº¦ã€åŠ é€Ÿåº¦ã€‚DQN ä¸èƒ½ç›´æ¥åº”ç”¨ã€‚        éš¾ä»¥æ”¶æ•›ã€‚åŸºäºä»·å€¼çš„å¼ºåŒ–å­¦ä¹ æ–¹æ³•è¾“å‡ºçš„ä»·å€¼ï¼ˆå¦‚å„ä¸ªåŠ¨ä½œçš„æœ€ä¼˜ Q å‡½æ•°å€¼ï¼‰çš„å¾®å°æ”¹å˜ä¼šå¯¼è‡´æŸä¸€åŠ¨ä½œè¢«é€‰ä¸­æˆ–ä¸é€‰ä¸­ï¼Œè¿™ç§ä¸è¿ç»­çš„å˜åŒ–ä¼šå½±å“ç®—æ³•çš„æ”¶æ•›ã€‚è¿™å¾ˆå®¹æ˜“ç†è§£ï¼Œå‡è®¾ä¸€ä¸ªåŠ¨ä½œaçš„Qå‡½æ•°å€¼æœ¬æ¥åœ¨æ‰€æœ‰åŠ¨ä½œä¸­æ˜¯ç¬¬ 2 å¤§çš„ï¼ŒæŠŠå®ƒå¢åŠ  0.0001ï¼Œå°±å˜æˆç¬¬æœ€å¤§çš„ï¼Œé‚£è¿™ç§å¾®å°çš„å˜åŒ–ä¼šå¯¼è‡´ç­–ç•¥å®Œå…¨æ”¹å˜ã€‚å› ä¸ºä¹‹å‰å®ƒä¸æ˜¯æœ€ä¼˜åŠ¨ä½œï¼Œç°åœ¨å˜æˆæœ€ä¼˜åŠ¨ä½œäº†ã€‚        å­˜åœ¨å¾˜å¾Šã€‚åœ¨è§‚å¯Ÿå—é™çš„æƒ…å†µä¸‹ï¼ŒåŸºäºä»·å€¼çš„å¼ºåŒ–å­¦ä¹ æ–¹æ³•ä¼šå‡ºç°å¾˜å¾Šç°è±¡ã€‚å³å‡ºç°ä¸åŒçŠ¶æ€å¯¼è‡´çš„è§‚å¯Ÿç›¸åŒï¼Œä½¿å¾—å¯¹åº”ç›¸åŒçš„ â€œæœ€ä½³â€ ç­–ç•¥ï¼Œä½†æ˜æ˜¾ä¸ç¬¦åˆä»»åŠ¡å®é™…æƒ…å†µçš„ç°è±¡ã€‚  2. åŸºäºç­–ç•¥çš„å¼ºåŒ–å­¦ä¹ 2.1. ç­–ç•¥å‡½æ•°ç›¸æ¯”ä¹‹ä¸‹ï¼Œç­–ç•¥æ¢¯åº¦ç®—æ³•æ˜¯ä¸€ç§æ›´ä¸ºç›´æ¥çš„æ–¹æ³•ï¼Œå®ƒè®©ç¥ç»ç½‘ç»œç›´æ¥è¾“å‡ºç­–ç•¥å‡½æ•° $\\pi(s)$ï¼Œå³åœ¨çŠ¶æ€sä¸‹åº”è¯¥æ‰§è¡Œä½•ç§åŠ¨ä½œã€‚å¯¹äºéç¡®å®šæ€§ç­–ç•¥ï¼Œè¾“å‡ºçš„æ˜¯è¿™ç§çŠ¶æ€ä¸‹æ‰§è¡Œå„ç§åŠ¨ä½œçš„æ¦‚ç‡å€¼ï¼Œå³å¦‚ä¸‹çš„æ¡ä»¶æ¦‚ç‡\\[\\pi(a\\vert s) = p(a\\vert s)\\]æ‰€è°“ç¡®å®šæ€§ç­–ç•¥ï¼Œæ˜¯åªåœ¨æŸç§çŠ¶æ€ä¸‹è¦æ‰§è¡Œçš„åŠ¨ä½œæ˜¯ç¡®å®šå³å”¯ä¸€çš„ï¼Œè€Œéç¡®å®šæ€§åŠ¨ä½œåœ¨æ¯ç§çŠ¶æ€ä¸‹è¦æ‰§è¡Œçš„åŠ¨ä½œæ˜¯éšæœºçš„ï¼Œå¯ä»¥æŒ‰ç…§ä¸€å®šçš„æ¦‚ç‡å€¼è¿›è¡Œé€‰æ‹©ã€‚è¿™ç§åšæ³•çš„åŸç†å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚          +----+ ----&gt;p(a1|s)  s  ---&gt; |f(x)| ----&gt;p(a2|s)          |  Î¸ | ----&gt;...          +----+ ----&gt;p(a3|s)è‹¥åŠ¨ä½œ $a$ æ˜¯è¿ç»­æ€§éšæœºå˜é‡ï¼Œå› æ­¤æ­¤æ—¶çš„ç­–ç•¥ $\\pi$ ä¸å†æ˜¯ä¸Šè¿°æ¦‚ç‡é›†åˆçš„å½¢å¼ï¼Œè€Œæ˜¯å¯å¾®å‡½æ•°çš„å½¢å¼â€”â€”åŠ¨ä½œå‘ç”Ÿçš„æ¦‚ç‡å—åˆ°æŸä¸ªæ¦‚ç‡å¯†åº¦å‡½æ•°çš„æ§åˆ¶ã€‚å‡è®¾åŠ¨ä½œ $a$ æœä»æŸä¸€æ¦‚ç‡å¯†åº¦å‡½æ•° $P(a\\vert s;\\theta)$ (æ¢ç§æ€è·¯ç†è§£â€”â€”å°†åŠ¨ä½œ $a$ ç†è§£æˆä»æ¦‚ç‡æ¨¡å‹ $P(a\\vert s;\\theta)$ äº§ç”Ÿçš„æ ·æœ¬)ã€‚æœ€ç»ˆç›®æ ‡ä»æ±‚è§£ $P(a\\vert s;\\theta)$ è½¬æ¢æˆæ±‚è§£ç­–ç•¥ä¸­çš„å‚æ•° $\\theta$ã€‚å› æ­¤ï¼Œå°†å«å‚æ•° $\\theta$ çš„ç­–ç•¥ç§°ä¸ºç­–ç•¥å‡½æ•°ã€‚è®°ä½œ $\\pi(a \\vert s;\\theta)$ï¼Œé€šå¸¸æƒ…å†µä¸‹å¯ç®€å†™æˆ $\\pi_{\\theta}$ã€‚2.2. ç­–ç•¥å‡½æ•°çš„åˆ†å¸ƒå½¢å¼  å¦‚æœåŠ¨ä½œ $a$ æ˜¯ç¦»æ•£å‹éšæœºå˜é‡ $\\to$ ä½¿ç”¨ $softmax$ å‡½æ•°å°†å…¶æ˜ å°„ä¸º æŒ‡æ•°æ—åˆ†å¸ƒè¿™é‡Œå¹¶ä¸æ˜¯ä¸€å®šè¦ä½¿ç”¨ $softmax$ å‡½æ•°è¿›è¡Œæ˜ å°„ $\\to$ åªè¦èƒ½å¤Ÿæ˜ å°„ä¸º â€˜æŒ‡æ•°æ—åˆ†å¸ƒâ€™ å³å¯ã€‚å°† $h(s,a;\\theta)$ å‡½æ•°å®šä¹‰ä¸º â€˜åŠ¨ä½œåå¥½å€¼â€™ $\\to$ å°†ç¦»æ•£å‹çš„ç­–ç•¥ $\\pi(a \\vert s;\\theta)$ è§†ä¸ºå…³äº $\\theta$ çš„ä¸€ä¸ªå‡½æ•°ï¼Œæœ‰\\(\\pi(a \\vert s;\\theta) \\rightarrow \\frac{e^{h(s,a;\\theta)}}{\\sum_{a'}e^{h(s,a';\\theta)}}\\)  å¦‚æœåŠ¨ä½œ $a$ æ˜¯è¿ç»­å‹éšæœºå˜é‡ $\\to$ $a$ æœä»çš„åˆ†å¸ƒå¯ä»¥æœ‰å¾ˆå¤šç§ï¼Œä¸å¦¨è®¾ $a$ æœä» é«˜æ–¯åˆ†å¸ƒè¿™é‡Œå°†é«˜æ–¯åˆ†å¸ƒä¸­çš„ $\\mu,\\sigma$ çœ‹ä½œå‚æ•° $\\theta$ çš„å‡½æ•°ï¼Œè‹¥ $\\theta$ èƒ½å¤Ÿæ±‚è§£ï¼Œ $\\mu,\\sigma$ åŒæ ·ä¹Ÿå¯ä»¥è¢«æ±‚è§£ï¼Œæœ€ç»ˆæ±‚è§£æ•´ä¸ªåˆ†å¸ƒ\\[\\mu=\\mu(s;\\theta),\\sigma=\\sigma(s;\\theta)\\]è‡³æ­¤ï¼Œå‡è®¾ $a$ æ˜¯æœä» 1 ç»´éšæœºå˜é‡çš„é«˜æ–¯åˆ†å¸ƒï¼Œç­–ç•¥å‡½æ•° $\\pi(a \\vert s;\\theta)$ è¡¨ç¤ºå¦‚ä¸‹\\[\\pi(a \\vert s;\\theta) = \\frac{1}{\\sqrt{2\\pi}\\sigma}e^{-\\frac{(a-\\mu)^2}{2\\sigma^2}}\\]ä¸ºäº†æ”¹è¿›ç­–ç•¥å‡½æ•°ï¼Œéœ€è¦å›´ç»•å‚æ•° $\\theta$ æ„å»ºä¸€ä¸ªç›®æ ‡å‡½æ•° $J(\\theta)$ï¼Œç„¶åé€šè¿‡æ¢¯åº¦ä¸‹é™ï¼ˆä¸Šå‡ï¼‰çš„æ–¹å¼æ›´æ–°å‚æ•°ã€‚2.3. ç­–ç•¥æ¢¯åº¦çš„æ¦‚å¿µ  å›é¡¾ä»·å€¼æ¢¯åº¦é¦–å…ˆå›é¡¾ Q-Learning çš„æ ¸å¿ƒæ€æƒ³ï¼Œå³é€šè¿‡ä¸€æ­¥é‡‡æ ·æ›´æ–° Q å€¼ï¼ˆå³TDæ–¹æ³•çš„æ€æƒ³ï¼‰\\[Q(s_t,a_t)\\leftarrow Q(s_t,a_t)+\\alpha[r_{t+1}+\\gamma\\max_a ğ‘„(s_{t+1},a)âˆ’Q(s_t,a_t)]\\]ä¸Šè¿°æ›´æ–°è¿‡ç¨‹å¯ä»¥æ”¶æ•›ï¼Œæ„å‘³ç€\\[r_{t+1}+\\gamma\\max_a ğ‘„(s_{t+1},a)âˆ’Q(s_t,a_t) \\rightarrow 0\\]é‚£ä¹ˆæˆ‘ä»¬å¯ä»¥æ„é€ ä¸€ä¸ªå‚æ•°ä¸º $\\theta$ çš„æ·±åº¦ç¥ç»ç½‘ç»œï¼Œç”¨æ¥ä¼°è®¡ä»·å€¼å‡½æ•°ï¼Œå³ DQN æ–¹æ³•\\[Q(s,a) = Q(s,a; \\theta)\\]åˆ™è®­ç»ƒç”¨çš„æŸå¤±å‡½æ•°å¯è®¾è®¡ä¸º\\[L(\\theta) = \\mathbb{E} \\{[r_{t+1}+\\gamma\\max_a ğ‘„(s_{t+1},a; \\theta)âˆ’Q(s_t,a_t; \\theta)]^2\\}\\]ç„¶åï¼Œé€šè¿‡æ¢¯åº¦ä¸‹é™æ›´æ–°ç¥ç»ç½‘ç»œçš„å‚æ•°ï¼Œä½¿å¾—æŸå¤±å‡½æ•° $L(\\theta)$ æœ€å°ã€‚\\(\\theta \\leftarrow \\theta - \\alpha \\nabla_{\\theta} L(\\theta)\\)æ³¨æ„åˆ°æŸå¤±å‡½æ•°ä¸­åªæœ‰æœ€åä¸€é¡¹æ˜¯å…³äº $\\theta$ çš„å‡½æ•°ï¼Œå› æ­¤æŸå¤±å‡½æ•°çš„æ¢¯åº¦å¯ä»¥å†™ä¸º\\[\\nabla_{\\theta} L(\\theta) = \\alpha[r_{t+1}+\\gamma\\max_a ğ‘„(s_{t+1},a; \\theta)âˆ’Q(s_t,a_t; \\theta)]\\nabla_{\\theta}  Q(s_t,a_t; \\theta)\\]å…¶ä¸­ï¼Œ$\\alpha$ æ˜¯å­¦ä¹ ç‡ï¼Œ$\\theta$ æ˜¯ç¥ç»ç½‘ç»œçš„å‚æ•°ã€‚å¯ä»¥çœ‹å‡ºï¼Œåœ¨åŸºäºä»·å€¼çš„å¼ºåŒ–å­¦ä¹ ä¸­ï¼Œä»·å€¼å‡½æ•°æ˜¯æˆ‘ä»¬çš„å­¦ä¹ ç›®æ ‡ï¼Œä»è€Œå®šä¹‰å‡ºæŸå¤±å‡½æ•°ã€‚é€šè¿‡æ›´æ–°å¼æ”¶æ•›ä¿è¯ä»·å€¼å‡½æ•°çš„æœ€ä¼˜ã€‚  ç­–ç•¥æ¢¯åº¦ç±»ä¼¼åœ°ï¼Œç­–ç•¥æ¢¯åº¦ç®—æ³•çš„æ ¸å¿ƒæ€æƒ³å°±æ˜¯é€šè¿‡è®¡ç®—ç­–ç•¥å‡½æ•°çš„æ¢¯åº¦ï¼Œæ¥æ›´æ–°ç¥ç»ç½‘ç»œçš„å‚æ•°ã€‚å¯¹äºéç¡®å®šæ€§ç­–ç•¥ï¼Œç¥ç»ç½‘ç»œçš„è¾“å‡ºçš„æ˜¯è¿™ç§çŠ¶æ€ä¸‹æ‰§è¡Œå„ç§åŠ¨ä½œçš„æ¦‚ç‡å€¼ï¼Œå³å¦‚ä¸‹çš„æ¡ä»¶æ¦‚ç‡\\[\\pi(a\\vert s) = p(a\\vert s)\\]é‚£ä¹ˆæŸå¤±å‡½æ•°çš„å®šä¹‰å¿…ç„¶åŒ…å«è¾“å‡ºçš„æ¡ä»¶æ¦‚ç‡ï¼ˆè¿™æ ·æ‰èƒ½è¡¡é‡è¾“å‡ºäºçœŸå€¼ä¹‹é—´çš„è¯¯å·®ï¼‰ï¼Œå¯¹åº”çš„å‚æ•°æ›´æ–°æ¢¯åº¦è®¡ç®—å¼å½¢å¦‚\\[\\theta \\leftarrow \\theta + \\nabla_\\theta J(\\pi(a\\vert s ; \\theta))\\]å…¶ä¸­ $J(\\pi(a\\vert s;\\theta))$ å¯ç®€è®°ä¸º $J(\\theta)$ã€‚ ä¸Šå¼ä¸ºä½•è¦ç”¨æ¢¯åº¦ä¸Šå‡ï¼ˆå³åŠ å·ï¼‰åæ–‡å†æ¥è§£é‡Šã€‚é‚£ä¹ˆé—®é¢˜å°±è½¬åŒ–ä¸ºï¼š  ç›®æ ‡å‡½æ•°ï¼ˆæŸå¤±å‡½æ•°ï¼‰æ˜¯å¦å­˜åœ¨ï¼Ÿ  ç›®æ ‡å‡½æ•°ï¼ˆæŸå¤±å‡½æ•°ï¼‰çš„æ¢¯åº¦ï¼ˆå³ç­–ç•¥æ¢¯åº¦ï¼‰æ˜¯å¦å­˜åœ¨ï¼Ÿ  å¦‚ä½•è®¡ç®—ç­–ç•¥æ¢¯åº¦ï¼Ÿ2.4. ç­–ç•¥æ¢¯åº¦çš„è®¡ç®—2.4.1. åŸºäºç´¯è®¡æ”¶ç›Šçš„ç­–ç•¥æ¢¯åº¦è®¡ç®—ç­–ç•¥æ¢¯åº¦çš„ç›®çš„ï¼Œæ˜¯ä¸ºäº†æ›´æ–°ç¥ç»ç½‘ç»œçš„å‚æ•°ï¼Œä½¿ç¥ç»ç½‘ç»œäº§ç”Ÿçš„èƒ½å¤Ÿå¾—åˆ°å¤§çš„å¥–åŠ±çš„åŠ¨ä½œçš„æ¦‚ç‡å˜å¤§ã€‚å›æƒ³ä»·å€¼å­¦ä¹ çš„ç›®æ ‡æ˜¯ä»€ä¹ˆï¼Ÿå¼ºåŒ–å­¦ä¹ çš„ç›®æ ‡æ˜¯ä½¿å¾—è·å¾—çš„å¥–åŠ±æœ€å¤§åŒ–ã€‚å®šä¹‰ç¥ç»ç½‘ç»œè¾“å‡ºçš„ç­–ç•¥ä¸º $\\pi:=p(a\\vert s;\\theta)$ï¼Œå…¶ä¸­ $\\theta$ æ˜¯ç¥ç»ç½‘ç»œçš„å‚æ•°ã€‚å‡è®¾é‡‡æ ·ä¸€æ¡é©¬å°”ç§‘å¤«è½¨è¿¹å¦‚ä¸‹\\[\\tau = {s_1,a_1,r_1,s_2,a_2,r_2,...,s_T,a_T,r_T}\\]é‚£ä¹ˆè¯¥è½¨è¿¹å‘ç”Ÿçš„æ¦‚ç‡ä¸º\\[p_{\\theta}(\\tau) = p(s_1)\\prod_{t=1}^T p(a_t\\vert s_t;\\theta)p(s_{t+1}\\vert s_t,a_t)\\]å…¶ä¸­ï¼Œ$p(s_1)$ ä¸ºåˆå§‹çŠ¶æ€çš„æ¦‚ç‡ï¼›$p(s_{t+1}\\vert s_t,a_t)$ ä¸ºç¯å¢ƒè½¬ç§»æ¦‚ç‡ï¼Œå³åœ¨çŠ¶æ€ $s_t$ ä¸‹æ‰§è¡ŒåŠ¨ä½œ $a_t$ åï¼Œè¿›å…¥çŠ¶æ€ $s_{t+1}$ çš„æ¦‚ç‡ã€‚æ³¨æ„è¿™ä¸¤ä¸ªæ¦‚ç‡å‡ä¸ç½‘ç»œå‚æ•°æ— å…³ã€‚ä¸è€ƒè™‘æŠ˜æ‰£è¡°å‡ï¼Œè¯¥è½¨è¿¹è·å¾—çš„æ”¶ç›Šä¸ºç´¯è®¡å›æŠ¥\\[R(\\tau) = \\sum_{t=0}^T r_t\\]ç”±äºé©¬å°”ç§‘å¤«é“¾æ˜¯é‡‡æ ·å¾—åˆ°çš„ï¼Œå› æ­¤å½“å‰ç­–ç•¥å¯è·å¾—çš„æœŸæœ›å¥–åŠ±ä¸º\\[\\mathbb{E} [R(\\tau)] = \\sum_{\\tau} p_{\\theta}(\\tau)R(\\tau)\\]å› æ­¤æˆ‘ä»¬å¯ä»¥å®šä¹‰ç›®æ ‡å‡½æ•°ä¸º\\[J(\\theta) = \\mathbb{E} [R(\\tau)]\\]å®šä¹‰ç­–ç•¥æ¢¯åº¦ä¸º\\[\\nabla_{\\theta}J(\\theta) = \\nabla_{\\theta}\\mathbb{E} [R(\\tau)] = \\nabla_{\\theta}\\sum_{\\tau} p_{\\theta}(\\tau) R(\\tau) = \\sum_{\\tau} \\nabla_{\\theta}p_{\\theta}(\\tau) R(\\tau)\\]æ³¨æ„ï¼Œå¼ºåŒ–å­¦ä¹ çš„ç›®çš„æ˜¯æœ€å¤§åŒ–è¿™ä¸ªæœŸæœ›å¥–åŠ±ï¼Œå› æ­¤éœ€è¦ç”¨æ¢¯åº¦ä¸Šå‡æ¥æ›´æ–°ç¥ç»ç½‘ç»œå‚æ•°ã€‚\\[\\theta \\leftarrow \\theta + \\alpha \\nabla_{\\theta} J(\\theta)\\]  é—®é¢˜è½¬åŒ–ä¸ºï¼šå¦‚ä½•è®¡ç®— $\\nabla_{\\theta}p_{\\theta}(\\tau)$æ³¨æ„åˆ° $p_{\\theta}(\\tau)$ æ˜¯è®¸å¤šæ¦‚ç‡è¿ä¹˜çš„å½¢å¼ï¼Œå¦‚æœç›´æ¥è®¡ç®—å…¶æ¢¯åº¦ï¼ŒåŠ¿å¿…å­˜åœ¨æ•°æ®ä¸‹æº¢ï¼ˆæ¦‚ç‡éƒ½æ˜¯å°äºç­‰äº 1 çš„ï¼Œå¤šä¸ªæ¦‚ç‡è¿ä¹˜åæ•°å€¼ä¼šéå¸¸å°ï¼‰ï¼Œéœ€è¦æƒ³åŠæ³•é¿å…ã€‚ä¸€ç§ç›´è§‰æ€è·¯æ˜¯é€šè¿‡å–å¯¹æ•°æŠŠè¿ä¹˜è½¬åŒ–ä¸ºè¿åŠ ã€‚å¯¹ $log(f(x))$ å‡½æ•°æ±‚æ¢¯åº¦å…·å¤‡å¦‚ä¸‹æ€§è´¨\\[\\nabla_{\\theta} \\ln f(x) = \\frac{\\nabla_{\\theta} f(x)}{f(x)}\\]å› æ­¤æœ‰\\[\\nabla_{\\theta} f(x) = f(x)\\nabla_{\\theta} \\ln f(x)\\]å°† $p_{\\theta}(\\tau)$ å¸¦å…¥å³å¯å¾—\\[\\nabla_{\\theta}p_{\\theta}(\\tau) = p_{\\theta}(\\tau)\\nabla_{\\theta} \\ln p_{\\theta}(\\tau)\\]å› æ­¤æœ‰\\[\\begin{aligned}\\nabla_{\\theta}\\mathbb{E} [R(\\tau)] &amp;= \\sum_{\\tau} \\nabla_{\\theta}p_{\\theta}(\\tau) R(\\tau)\\\\&amp;= \\sum_{\\tau} p_{\\theta}(\\tau)\\nabla_{\\theta} \\ln p_{\\theta}(\\tau) R(\\tau) \\\\&amp;=\\mathbb{E}_{\\tau\\sim p_{\\theta(\\tau)}}[\\nabla_{\\theta} \\ln p_{\\theta}(\\tau) R(\\tau)]\\end{aligned}\\]  é—®é¢˜è½¬åŒ–ä¸ºï¼šå¦‚ä½•è®¡ç®— $\\nabla_{\\theta} \\ln p_{\\theta}(\\tau)$é¦–å…ˆé€šè¿‡è’™ç‰¹å¡æ´›æ–¹æ³•è¿›è¡Œ $N$ æ¬¡é‡‡æ ·æ¥è¿‘ä¼¼ä¼°è®¡æœŸæœ›ï¼Œå¯å°†æœŸæœ›å¼æ‰“å¼€å¾—åˆ°\\[\\begin{aligned}\\nabla_{\\theta}\\mathbb{E} [R(\\tau)] &amp;=\\mathbb{E}_{\\tau\\sim p_{\\theta(\\tau)}}[\\nabla_{\\theta} \\ln p_{\\theta}(\\tau) R(\\tau)]\\\\&amp;=\\frac{1}{N} \\sum_{n=1}^N \\nabla_{\\theta} \\ln p_{\\theta}(\\tau_n) R(\\tau_n)\\end{aligned}\\]å…¶ä¸­ï¼Œ$\\tau_n$ æ˜¯ç¬¬ $n$ æ¬¡é‡‡æ ·å¾—åˆ°çš„è½¨è¿¹ã€‚é‚£ä¹ˆå¯¹äºè¿™æ¡å…·ä½“çš„è½¨è¿¹æœ‰\\[\\begin{aligned}\\nabla_{\\theta} \\ln p_{\\theta}(\\tau_n) &amp;= \\nabla_{\\theta} \\left[\\ln p(s_1) + \\sum_{t=1}^T \\ln p_{\\theta}(a_t\\vert s_t) +\\sum_{t=1}^T \\ln p(s_{t+1}\\vert s_t,a_t)\\right]_n\\\\&amp;= \\nabla_{\\theta}\\sum_{t=1}^T\\ln p_{\\theta}(a_t^n\\vert s_t^n)= \\sum_{t=1}^T\\nabla_{\\theta}\\ln p_{\\theta}(a_t^n\\vert s_t^n)\\\\\\end{aligned}\\]ä¸Šå¼å¯ä»¥çœ‹å‡ºï¼Œå……åˆ†åˆ©ç”¨äº†å¯¹æ•°å‡½æ•°æŠŠè¿ä¹˜è½¬ä¸ºè¿åŠ çš„å¥½å¤„ã€‚å…¶ä¸­ç¬¬ä¸€é¡¹å’Œç¬¬ä¸‰é¡¹ä¸ç½‘ç»œå‚æ•° $\\theta$ æ— å…³ï¼Œå› æ­¤å¯¹å…¶æ±‚æ¢¯åº¦ä¸º 0ï¼Œä»…å‰©ç¬¬äºŒé¡¹ã€‚è¿™é‡Œ $p_{\\theta}(a_t^n\\vert s_t^n) = p(a_t^n\\vert s_t^n;\\theta)$ã€‚æœ€åå¯å¾—åˆ°å¦‚ä¸‹æ›´æ–°å¼\\[\\nabla_{\\theta}J(\\theta) = \\frac{1}{N}\\sum_{n=0}^N \\sum_{t=0}^T \\nabla_{\\theta}\\ln p_{\\theta}(a_t^n\\vert s_t^n) R(\\tau_n)\\]\\[\\theta \\leftarrow \\theta + \\alpha \\nabla_{\\theta} J(\\theta)\\]æœ€åï¼Œå¦‚æœæˆ‘ä»¬é‡æ–°æŠŠç­–ç•¥æ¢¯åº¦å†™ä¸ºæœŸæœ›çš„å½¢å¼ï¼Œæ³¨æ„åˆ°ä¹‹å‰å®šä¹‰çš„ $\\pi :=p(a\\vert s)$ï¼Œæœ‰\\[\\nabla_{\\theta}J(\\theta)=\\mathbb{E}_{\\pi(\\theta)} [\\nabla_{\\theta}\\ln \\pi_{\\theta}(a\\vert s) R]\\]åˆ°åé¢æˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œç­–ç•¥æ¢¯åº¦çš„å®šä¹‰ä¸å±€é™äºè¿™ä¸€ç§å½¢å¼ï¼Œä¸»è¦åæ˜ åœ¨æœŸæœ›æ‹¬å·å†…åä¸€é¡¹çš„é€‰æ‹©ä¸Šã€‚2.4.2. åŸºäºä»·å€¼å‡½æ•°çš„ç­–ç•¥æ¢¯åº¦2.4.2.1. ç­–ç•¥æ¢¯åº¦å®šç†ä¹‹å‰åŸºäºç´¯è®¡æ”¶ç›Šçš„ç­–ç•¥æ¢¯åº¦ï¼Œå¹¶æ²¡æœ‰è€ƒè™‘æŠ˜æ‰£å› å­ã€‚å¦‚æœè€ƒè™‘åŒ…å«æŠ˜æ‰£å› å­çš„æƒ…å†µï¼Œç›¸å½“äºåˆ©ç”¨åˆå§‹çŠ¶æ€å›æŠ¥çš„æœŸæœ›ï¼Œå³åˆå§‹çŠ¶æ€çš„çŠ¶æ€ä»·å€¼å‡½æ•°æ¥è¡¡é‡è½¨è¿¹çš„ä¼˜åŠ£ï¼Œå¯¹åº”çš„ç›®æ ‡å‡½æ•°ä¸º\\[J(\\theta) = \\mathbb{E} [R(\\tau)]=  \\mathbb{E}[\\sum_{t=0}^T \\gamma^{t-1} r_t] = V_{\\pi(a\\vert s ; \\theta)}(s_0)\\]ç®€åŒ–èµ·è§ï¼Œå†™ä¸º\\[J(\\theta) = \\mathbb{E} [R(\\tau)]= V_{\\pi}(s)\\]é‚£ä¹ˆæœ‰\\[\\nabla_{\\theta}J(\\theta) = \\nabla_{\\theta}V_{\\pi}(s)\\]ç­–ç•¥æ¢¯åº¦å®šç†æœ¬è´¨å°±æ˜¯æ±‚è§£ç›®æ ‡å‡½æ•° $J(\\theta)$ çš„æ¢¯åº¦ã€‚é¦–å…ˆä½¿ç”¨è´å°”æ›¼æœŸæœ›æ–¹ç¨‹å¯¹ $V(s)$ è¿›è¡Œå±•å¼€\\[\\nabla_{\\theta}V_{\\pi}(s) = \\nabla_{\\theta}\\sum_{a\\in \\mathcal{A(s)}} \\pi(a\\vert s)q_{\\pi}(s,a) = \\sum_{a\\in \\mathcal{A(s)}}\\nabla_{\\theta}[\\pi(a\\vert s)q_{\\pi}(s,a)]\\]æ³¨æ„åˆ°æ±‚æ¢¯åº¦æ˜¯å¯¹ç½‘ç»œå‚æ•° $\\theta$ è¿›è¡Œçš„ï¼Œè€Œæ‰€æœ‰å’Œç­–ç•¥ $\\pi$ æœ‰å…³çš„é¡¹å‡éšå« $\\theta$ï¼Œæ‰€ä»¥ä¸Šè¿°å¼å­éœ€è¦é‡‡ç”¨ä¹˜æ³•æ±‚å¯¼çš„å½¢å¼å±•å¼€\\[\\begin{aligned}\\nabla_{\\theta}V_{\\pi}(s) &amp;= \\sum_{a\\in \\mathcal{A(s)}}\\nabla_{\\theta} [\\pi(a\\vert s)q_{\\pi}(s,a)]\\\\&amp;= \\sum_{a\\in \\mathcal{A(s)}} [\\nabla_{\\theta}\\pi(a\\vert s) q_{\\pi}(s,a) + \\pi(a\\vert s) \\nabla_{\\theta}q_{\\pi}(s,a)]\\\\\\end{aligned}\\]å…¶ä¸­ç¬¬äºŒé¡¹\\[\\begin{aligned}\\nabla q_{\\pi} (s,a) &amp;= \\nabla \\sum_{s^\\prime,r} P(s^\\prime,r\\vert s,a)[r+\\gamma V_{\\pi}(s^\\prime)]\\\\&amp;=\\nabla \\sum_{s^\\prime,r}^{s^\\prime,r}  P(s^\\prime,r|s,a)  r + \\nabla \\sum_{s^\\prime,r} \\gamma P(s^\\prime,r|s,a)V_{\\pi}(s^\\prime)\\\\&amp;=\\nabla \\sum_{s^\\prime,r} \\gamma P(s^\\prime,r|s,a)V_{\\pi}(s^\\prime)\\\\&amp;=\\gamma \\sum_r P(r\\vert s,a)\\sum_{s^\\prime} P(s^\\prime\\vert s,a) \\nabla V_{\\pi}(s^\\prime)\\\\&amp;=\\gamma \\sum_{s^\\prime} P(s^\\prime\\vert s,a) \\nabla V_{\\pi}(s^\\prime)\\end{aligned}\\]å¸¦å›æ¢¯åº¦å¼å­ï¼Œå³\\[\\nabla_{\\theta}V_{\\pi}(s) = \\sum_{a\\in \\mathcal{A(s)}} \\nabla_{\\theta}\\pi(a\\vert s) q_{\\pi}(s,a) + \\sum_{a\\in \\mathcal{A(s)}} \\pi(a\\vert s)\\gamma \\sum_{s^\\prime} P(s^\\prime\\vert s,a) \\nabla_{\\theta} V_{\\pi}(s^\\prime)\\]å¯ä»¥çœ‹å‡ºï¼Œä¸Šå¼å‘ˆç°å‡º $\\nabla_{\\theta}V_{\\pi}(s)$ çš„è¿­ä»£å½¢å¼ã€‚ä¸ºäº†æ›´è¿›ä¸€æ­¥ç¡®å®šè¿­ä»£å…³ç³»ï¼Œå†æ¬¡å¯¹ $\\nabla_{\\theta}V_{\\pi}(s^\\prime)$ å±•å¼€ï¼Œæœ‰\\[\\nabla_{\\theta}V_{\\pi}(s^\\prime) = \\sum_{a^\\prime\\in \\mathcal{A(s^\\prime)}} \\nabla_{\\theta}\\pi(a^\\prime\\vert s^\\prime) q_{\\pi}(s^\\prime,a^\\prime) + \\sum_{a^\\prime\\in \\mathcal{A(s^\\prime)}} \\pi(a^\\prime\\vert s^\\prime)\\gamma \\sum_{s^{\\prime\\prime}} P(s^{\\prime\\prime}\\vert s^\\prime,a^\\prime) \\nabla_{\\theta} V_{\\pi}(s^{\\prime\\prime})\\]å¸¦å›æ¢¯åº¦å¼å­å¹¶ä¸”å®Œå…¨å±•å¼€ï¼Œæœ‰  ç¬¬ä¸€é¡¹\\[\\sum_{a\\in \\mathcal{A(s)}} \\nabla_{\\theta}\\pi(a\\vert s) q_{\\pi}(s,a)\\]      ç¬¬äºŒé¡¹\\[\\begin{aligned}      &amp;\\sum_{a\\in \\mathcal{A(s)}} \\pi(a\\vert s)\\gamma \\sum_{s^\\prime} P(s^\\prime\\vert s,a)\\cdot \\sum_{a^\\prime\\in \\mathcal{A(s^\\prime)}} \\nabla_{\\theta}\\pi(a^\\prime\\vert s^\\prime) q_{\\pi}(s^\\prime,a^\\prime) \\\\      =&amp;\\gamma \\sum_{s^\\prime}\\sum_{a\\in \\mathcal{A(s)}} \\pi(a\\vert s) P(s^\\prime\\vert s,a)\\cdot \\sum_{a^\\prime\\in \\mathcal{A(s^\\prime)}} \\nabla_{\\theta}\\pi(a^\\prime\\vert s^\\prime) q_{\\pi}(s^\\prime,a^\\prime) \\\\      =&amp;\\gamma \\sum_{s^\\prime} \\mathcal{P}(s^\\prime\\vert s)\\cdot \\sum_{a^\\prime\\in \\mathcal{A(s^\\prime)}} \\nabla_{\\theta}\\pi(a^\\prime\\vert s^\\prime) q_{\\pi}(s^\\prime,a^\\prime)\\\\      \\end{aligned}\\]    ä¸Šå¼ä»…åŒ…å«å‰åçŠ¶æ€çš„å˜é‡ $s,s^\\prime$ å’Œè½¬ç§»æ¬¡æ•°å¸¸é‡ $k=1$ï¼ˆ$a$ æœ€ç»ˆä¼šè¢«æ±‚å’Œå¸æ”¶ç§¯åˆ†æ‰ï¼‰ï¼Œå› æ­¤å¯è¿›ä¸€æ­¥å†™ä¸ºé€šé¡¹å¼ï¼š\\[\\gamma \\sum_{x\\in S} \\mathcal{P}(s\\rightarrow x, k, \\pi)\\cdot \\sum_{a\\in \\mathcal{A(s)}} \\nabla_{\\theta}\\pi(a\\vert x) q_{\\pi}(x,a)\\]    åŒæ—¶ï¼Œæ³¨æ„åˆ°ç¬¬ä¸€é¡¹ä¹Ÿç¬¦åˆä¸Šè¿°é€šé¡¹å¼ï¼ˆ$k=0,\\gamma = 1$ï¼‰        ç¬¬ä¸‰é¡¹    \\(\\sum_{a\\in \\mathcal{A(s)}} \\pi(a\\vert s)\\gamma \\sum_{s^\\prime} P(s^\\prime\\vert s,a) \\cdot \\sum_{a^\\prime\\in \\mathcal{A(s^\\prime)}} \\pi(a^\\prime\\vert s^\\prime)\\gamma \\sum_{s^{\\prime\\prime}} P(s^{\\prime\\prime}\\vert s^\\prime,a^\\prime) \\nabla_{\\theta} V_{\\pi}(s^{\\prime\\prime})\\)æ³¨æ„åˆ°ç¬¬ä¸‰é¡¹ä»ç„¶æ˜¯ä¸ªè¿­ä»£å¼ï¼Œå¯ä»¥ç»§ç»­å±•å¼€ï¼Œä¸”å±•å¼€é™¤äº†æœ€åä¸€é¡¹ï¼Œå‰é¢å‡ç¬¦åˆå‰è¿°é€šé¡¹å¼ã€‚  è‡³æ­¤ï¼Œ $\\nabla V_\\pi(s)$ çš„è¿­ä»£å¼è¡¨ç¤ºå¦‚ä¸‹\\[\\nabla_{\\theta}V_{\\pi}(s) = \\sum_{s\\in S} \\sum_{k=0}^{\\infty} \\gamma^{k} \\mathcal{P}(s\\rightarrow x, k, \\pi)\\cdot \\sum_{a\\in \\mathcal{A(s)}} \\nabla_{\\theta}\\pi(a\\vert x) q_{\\pi}(x,a)\\]å°†å…¬å¼ä¸­æ‰€æœ‰ $s$ æ›¿æ¢ä¸ºåˆå§‹çŠ¶æ€ $s_0$ï¼Œå°†æ‰€æœ‰ $x$ æ›¿æ¢ä¸º $s$ï¼Œæˆ‘ä»¬å¾—åˆ°äº†åˆå§‹çŠ¶æ€ä»·å€¼å‡½æ•°çš„æ¢¯åº¦\\[\\nabla_{\\theta}V_{\\pi}(s_0) = \\sum_{s\\in S} \\sum_{k=0}^{\\infty} \\gamma^{k} \\mathcal{P}(s_0\\rightarrow s, k, \\pi)\\cdot \\sum_{a\\in \\mathcal{A(s)}} \\nabla_{\\theta}\\pi(a\\vert s) q_{\\pi}(s,a)\\]å…¶ä¸­ï¼Œ  $\\mathcal{P}(s_0\\rightarrow s, k, \\pi)$ è¡¨ç¤ºåˆå§‹çŠ¶æ€ $s_0$ ç»è¿‡ $k$ æ¬¡çŠ¶æ€è½¬ç§»æœ€ç»ˆåˆ°è¾¾ $s$ çš„æ¦‚ç‡ï¼›  $\\sum_{k=0}^{\\infty} \\mathcal{P}(s_0\\rightarrow s, k, \\pi)$ è¡¨ç¤ºåœ¨æ•´æ¡è½¨è¿¹åºåˆ—ä¸­ï¼ŒçŠ¶æ€ $s$ å‡ºç°çš„å¹³å‡æ¬¡æ•°ï¼Œå°†å…¶è®°ä¸º $\\eta(s)$ï¼›  é‚£ä¹ˆçŠ¶æ€ $s$ å‡ºç°çš„æ¦‚ç‡ $\\mu(s)$ å¯å®šä¹‰ä¸ºå…¶å‡ºç°çš„å¹³å‡æ¬¡æ•°é™¤ä»¥æ‰€æœ‰çŠ¶æ€å‡ºç°çš„å¹³å‡æ¬¡æ•°çš„å’Œï¼Œå³ $\\mu(s) = {\\eta(s)}/{\\sum_{s^\\prime} \\eta(s^\\prime)}$åˆ™\\[\\begin{aligned}\\nabla_{\\theta}V_{\\pi}(s_0) &amp;= \\sum_{s\\in S}  \\gamma^{k} \\eta(s) \\cdot \\sum_{a\\in \\mathcal{A(s)}} \\nabla_{\\theta}\\pi(a\\vert s) q_{\\pi}(s,a)\\\\&amp;= \\sum_{s\\in S}  \\gamma^{k} \\mu(s)\\sum_{s^\\prime} \\eta(s^\\prime)  \\cdot \\sum_{a\\in \\mathcal{A(s)}} \\nabla_{\\theta}\\pi(a\\vert s) q_{\\pi}(s,a)\\\\&amp;= \\sum_{s^\\prime} \\eta(s^\\prime) \\cdot \\sum_{s\\in S} \\gamma^{k} \\mu(s)  \\cdot \\sum_{a\\in \\mathcal{A(s)}} \\nabla_{\\theta}\\pi(a\\vert s) q_{\\pi}(s,a)\\\\\\end{aligned}\\]å…¶ä¸­ï¼Œç¬¬ä¸€é¡¹ä¸ºä¸€ä¸ªå¸¸æ•°ï¼ˆå½’ä¸€åŒ–å› å­ï¼‰ï¼Œ$\\gamma$ æŠ˜æ‰£ç‡ä¹Ÿæ˜¯ä¸€ä¸ªå¸¸æ•°ï¼Œå®ƒä»¬åªå½±å“æ¢¯åº¦çš„å…·ä½“æ•°å€¼ã€‚æˆ‘ä»¬æ›´å…³æ³¨æ¢¯åº¦çš„æ–¹å‘ï¼Œå› æ­¤\\[\\nabla_{\\theta}V_{\\pi}(s_0) \\propto \\sum_{s\\in S} \\mu(s)  \\cdot \\sum_{a\\in \\mathcal{A(s)}} \\nabla_{\\theta}\\pi(a\\vert s) q_{\\pi}(s,a)\\]2.4.2.2. REINFORCEï¼ˆè’™ç‰¹å¡æ´›ç­–ç•¥æ¢¯åº¦ï¼‰è§‚å¯Ÿå‰é¢ç­–ç•¥æ¢¯åº¦æ–¹å‘çš„æ±‚è§£ç»“æœï¼Œå¯ä»¥å‘ç° $\\mu(s)$ æœ¬èº«æ˜¯çŠ¶æ€ $s$ å‡ºç°çš„æ¦‚ç‡ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥å…¶è”é€šå‰é¢çš„æ±‚å’Œç¬¦å·ä¸€èµ·è¡¨ç¤ºä¸ºæŸç§æœŸæœ›çš„å½¢å¼\\[\\nabla_{\\theta}J(\\theta) \\propto \\sum_{s\\in S} \\mu(s)  \\cdot \\sum_{a\\in \\mathcal{A(s)}} \\nabla_{\\theta}\\pi(a\\vert s) q_{\\pi}(s,a)=\\mathbb{E}_{?}\\left[ \\sum_{a\\in \\mathcal{A(s)}} \\nabla_{\\theta}\\pi(a\\vert s) q_{\\pi}(s,a) \\right]\\]é—®é¢˜è½¬åŒ–ä¸ºï¼Œç¡®å®šæœŸæœ›ç¬¦å·ä¸­çš„æ¦‚ç‡åˆ†å¸ƒæ˜¯ä»€ä¹ˆï¼ˆä¹Ÿå³ä¸Šå¼ä¸­çš„ ? éƒ¨åˆ†ï¼‰ã€‚æ—¢ç„¶æ˜¯å…³äºçŠ¶æ€çš„æ¦‚ç‡åˆ†å¸ƒï¼Œæˆ‘ä»¬å®šä¹‰è¿™æ ·ä¸€ä¸ªåˆ†å¸ƒç¬¦å·ï¼š$\\rho^{\\pi_{\\theta}}$ï¼Œä½¿å¾—çŠ¶æ€ $s$ çš„å‡ºç°æ¦‚ç‡æœä»è¯¥åˆ†å¸ƒã€‚è¯¥åˆ†å¸ƒä¸ä»…å’Œç­–ç•¥å‡½æ•° $\\pi(a\\vert s;\\theta)$ ç›¸å…³ï¼Œè¿˜ä¸ç¯å¢ƒï¼ˆçŠ¶æ€è½¬ç§»æ¦‚ç‡ï¼‰ç›¸å…³ã€‚\\[\\forall s\\in S \\rightarrow s\\sim \\rho^{\\pi_{\\theta}}(s)=lim_{t\\rightarrow \\infty} P(S_t=s\\vert S_{t-1}=s\\vert A_{0:t}\\sim \\pi)\\]åˆ™\\[\\nabla_{\\theta}J(\\theta) \\propto \\mathbb{E}_{s\\sim\\rho^{\\pi_{\\theta}}}\\left[ \\sum_{a\\in \\mathcal{A(s)}} \\nabla_{\\theta}\\pi(a\\vert s) q_{\\pi}(s,a) \\right]\\]ä¸ºäº†ä½¿å…¬å¼è§„èŒƒåŒ–  å°†æ‰€æœ‰çŠ¶æ€ $s$ å’ŒåŠ¨ä½œ $a$ åŠ ä¸Šç‰¹å®šæ—¶åˆ» $t$ ä¸‹æ ‡ï¼›  å°†ç­–ç•¥å‡½æ•°çš„å‚æ•°è¡¥å……ä¸Šï¼›\\[\\nabla_{\\theta}J(\\theta) \\propto \\mathbb{E}_{s_t\\sim\\rho^{\\pi_{\\theta}}}\\left[ \\sum_{a_t\\in \\mathcal{A(s_t)}} \\nabla_{\\theta}\\pi(a_t\\vert s_t;\\theta) q_{\\pi}(s_t,a_t) \\right]\\]ç»§ç»­è§‚å¯Ÿï¼Œä¸Šå¼è¿˜å­˜åœ¨ä¸€ä¸ªæ±‚å’Œç¬¦å·ï¼Œå› æ­¤å­˜åœ¨ä¸€ä¸ªæƒ³æ³•æ˜¯å°†è¯¥éƒ¨åˆ†ä¹ŸåŒ–ä¸ºæœŸæœ›çš„å½¢å¼ã€‚ä½† $\\nabla_{\\theta}\\pi(a_t\\vert s_t;\\theta)$ å¹¶ä¸æ˜¯ç­–ç•¥å‡½æ•°ï¼Œå› æ­¤éœ€è¦å¼•å…¥ç­–ç•¥å‡½æ•°ï¼Œå€ŸåŠ©ä¹‹å‰ log å‡½æ•°æ¢¯åº¦çš„æ€§è´¨ï¼Œæœ‰\\[\\begin{aligned}\\nabla_{\\theta}J(\\theta) \\propto&amp; \\mathbb{E}_{s_t\\sim\\rho^{\\pi_{\\theta}}}\\left[ \\sum_{a_t\\in \\mathcal{A(s_t)}} \\nabla_{\\theta}\\pi(a_t\\vert s_t;\\theta) q_{\\pi}(s_t,a_t) \\right]\\\\\\propto&amp; \\mathbb{E}_{s_t\\sim\\rho^{\\pi_{\\theta}}}\\left[ \\sum_{a_t\\in \\mathcal{A(s_t)}} \\pi(a_t\\vert s_t;\\theta)\\nabla_{\\theta}\\ln\\pi(a_t\\vert s_t;\\theta) q_{\\pi}(s_t,a_t) \\right]\\\\\\propto&amp; \\mathbb{E}_{s_t\\sim\\rho^{\\pi_{\\theta}}, a_t\\sim \\pi} \\left[ \\nabla_{\\theta}\\ln\\pi(a_t\\vert s_t;\\theta) q_{\\pi}(s_t,a_t) \\right]\\\\\\end{aligned}\\]ä¹‹æ‰€ä»¥å°† $\\nabla_{\\theta}J(\\theta)$ åŒ–ç®€ä¸ºæœŸæœ›å½¢å¼ï¼Œæ˜¯å› ä¸ºæœŸæœ›å½¢å¼å°±å¯ä»¥é€šè¿‡ è’™ç‰¹å¡æ´›æ–¹æ³• é‡‡æ ·çš„æ–¹å¼æ¥è¿‘ä¼¼æ±‚è§£ã€‚æ ¹æ® Q å‡½æ•°çš„å®šä¹‰æœ‰\\[q_{\\pi_{\\theta}}(s_t, a_t) = \\mathbb{E}_{a_t\\sim\\pi} [G_t\\vert s_t, a_t]\\]å¸¦å…¥ç­–ç•¥æ¢¯åº¦å®šç†æœ‰\\[\\nabla_{\\theta}J(\\theta) \\propto \\mathbb{E}_{s_t\\sim\\rho^{\\pi_{\\theta}}, a_t\\sim \\pi} \\left[ \\nabla_{\\theta}\\ln\\pi(a_t\\vert s_t;\\theta) G_t \\right]\\]è‡³æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡é‡‡æ · $\\nabla_{\\theta}\\ln\\pi(a_t\\vert s_t;\\theta) G_t$ ç¥ç»ç½‘ç»œå‚æ•° $\\theta$ è¿›è¡Œæ›´æ–°ã€‚è¿™å°±æ˜¯ REINFORECE æ–¹æ³•ã€‚REINFORCE çš„æœ¬è´¨å°±æ˜¯ç”¨ $G_t$ ä»£æ›¿ $q_{\\pi}(s_t, a_t)$ã€‚ç”¨äºä¼°è®¡æœ€ä¼˜ç­–ç•¥çš„REINFORCEç®—æ³•è¡¨ç¤ºå¦‚ä¸‹ï¼ˆé‡‡ç”¨å¢é‡æ›´æ–°çš„æ–¹å¼ï¼‰  è¾“å…¥ï¼šå¯å¾®ç­–ç•¥å‡½æ•° $\\pi(a \\vert s;\\theta)$ï¼Œè¡°å‡å› å­ $\\gamma$ï¼Œå­¦ä¹ ç‡ $\\alpha$  åˆå§‹åŒ–ï¼šç­–ç•¥å‡½æ•°çš„å‚æ•° $\\theta$  è®­ç»ƒè¿‡ç¨‹ï¼š          repeat æ ¹æ®ç­–ç•¥å‡½æ•°é‡‡æ ·ä¸€æ¡è½¨è¿¹ï¼š$s_0, a_0, r_1, s_2, a_2, r_3, \\cdots$      loop $t=T-1, T-2, \\cdots, 1,0$      $\\quad G\\leftarrow \\gamma G + R_{t+1}$                                                  $\\quad \\theta \\leftarrow \\theta + \\alpha G \\nabla_{\\theta}\\ln\\pi(a_t\\vert s_t;\\theta)$                                          2.4.3. ç­–ç•¥æ¢¯åº¦çš„æ”¹è¿›æ ¹æ®å®šä¹‰ï¼Œå› ä¸º $G_t$ æ˜¯ $Q(s,a)$ çš„æ— åä¼°è®¡ï¼Œæ‰€ä»¥åŸºäºè’™ç‰¹å¡æ´›é‡‡æ ·çš„æ–¹å¼è¿›è¡Œå‚æ•°æ›´æ–°çš„ REINFORCE ç®—æ³•ï¼Œå¾—åˆ°çš„ç»“æœå°±æ˜¯ç­–ç•¥æ¢¯åº¦çš„æ— åä¼°è®¡ï¼Œé‚£ä¹ˆå…¶æ–¹å·®å‘¢ï¼Ÿç»“è®ºï¼šåŸºäºè’™ç‰¹å¡æ´›é‡‡æ ·çš„æ–¹å¼è¿›è¡Œå‚æ•°æ›´æ–°çš„ REINFORCE ç®—æ³•æ–¹å·®å¾ˆå¤§ã€‚é€šè¿‡è§‚å¯Ÿç­–ç•¥æ¢¯åº¦å¼\\[\\nabla_{\\theta}J(\\theta) \\propto \\mathbb{E}_{s_t\\sim\\rho^{\\pi_{\\theta}}, a_t\\sim \\pi} \\left[ \\nabla_{\\theta}\\ln\\pi(a_t\\vert s_t;\\theta) G_t \\right]\\]æˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼Œ$\\nabla_{\\theta}\\ln\\pi(a_t\\vert s_t;\\theta)$ ç›¸å½“äº $G$ çš„ä¸€ä¸ªç³»æ•°æˆ–è€…è¯´æƒé‡ï¼Œå¯¹äºæ–¹å·®è€Œè¨€åªèµ·åˆ°æ”¾ç¼©ä½œç”¨ï¼ˆæ ¹æ®å…¬å¼ $Var(aX) = a^2Var(X)$ï¼‰ï¼Œå®é™…æ–¹å·®è¿˜æ˜¯å–å†³äº $G$ æœ¬èº«ã€‚è€Œ $G$ çš„æ–¹å·®\\[Var(G_t) = Var(R_{t+1}) + Var(R_{t+2}) + \\cdots\\]ç”±æ­¤å¯ä»¥çœ‹å‡ºï¼Œæ–¹å·®å¤§æ¥æºäºä¸¤ä¸ªåŸå› ï¼š  è‹¥ä¸åŒ $s$ å¯¹åº”çš„ $R$ èŒƒå›´ç›¸å·®è¾ƒå¤§ï¼Œå†åŠ ä¸Š MC çš„éšæœºæ€§ï¼Œé‚£ä¹ˆæ¯ä¸€æ­¥çš„ $R$ éƒ½ä¼šæœ‰è¾ƒå¤§çš„æ–¹å·®;  å› ä¸ºé‡‡æ ·è½¨è¿¹é•¿åº¦çš„åŸå› ï¼Œå‡ºç°æ–¹å·®ç´¯ç§¯ã€‚ç›¸åº”çš„è§£å†³æ–¹æ³•å¦‚ä¸‹ï¼š  é€šè¿‡æ·»åŠ åŸºçº¿ç¼“è§£;  ä½¿ç”¨ TD æ–¹æ³•ä»£æ›¿ MC æ–¹æ³•ï¼Œå³é€šè¿‡Actor-Criticæ–¹æ³•è§£å†³ã€‚2.4.3.1. REINFORCE with baselineé€šè¿‡æ·»åŠ åŸºçº¿ï¼ˆbaselineï¼‰å¯ä»¥å‡å°æ–¹å·®ã€‚å…·ä½“å½¢å¼å¦‚ä¸‹\\[\\nabla_{\\theta}J(\\theta) \\propto \\mathbb{E}_{s_t\\sim\\rho^{\\pi_{\\theta}}, a_t\\sim \\pi} \\left[ \\nabla_{\\theta}\\ln\\pi(a_t\\vert s_t;\\theta) q_{\\pi}(s_t,a_t) \\right]\\]æ·»åŠ åŸºçº¿ $b(s)$ å\\[\\nabla_{\\theta}J(\\theta) \\propto \\mathbb{E}_{s_t\\sim\\rho^{\\pi_{\\theta}}, a_t\\sim \\pi} \\left[ \\nabla_{\\theta}\\ln\\pi(a_t\\vert s_t;\\theta) (q_{\\pi}(s_t,a_t)-b(s_t)) \\right]\\]å‚æ•°æ›´æ–°å¼åˆ™å˜ä¸º\\[\\theta \\leftarrow \\theta + \\alpha (G_t - b(s_t)) \\nabla_{\\theta}\\ln\\pi(a_t\\vert s_t;\\theta)\\]åŸºçº¿ $b(s)$ å¯ä¸ºä»»æ„å˜é‡æˆ–è€…å‡½æ•°ï¼Œå› ä¸ºå®ƒå¹¶ä¸ä¼šæ”¹å˜ç­–ç•¥æ¢¯åº¦çš„æœŸæœ›ï¼ˆæƒ³æƒ³çœ‹ä¸ºä»€ä¹ˆï¼Œå› ä¸ºå®ƒä¸åŠ¨ä½œ $a$ å¹¶ä¸ç›¸å…³ï¼Œæ±‚æ¢¯åº¦åä¸º 0ï¼‰ã€‚2.4.3.2. Actor-Criticè™½ç„¶åŸºçº¿ $b(s)$ å¯ä¸ºä»»æ„å˜é‡æˆ–è€…å‡½æ•°ï¼Œä½†å®é™…æƒ…å†µä¸‹ï¼Œä¸€ç§è‡ªç„¶è€Œç„¶çš„æƒ³æ³•æ˜¯å°†åŸºçº¿è®¾ç½®ä¸ºçŠ¶æ€ä»·å€¼çš„ä¼°è®¡ï¼Œå³\\[b(s) = \\hat{v}(s_t;{w})\\]å…¶ä¸­ $w$ æ˜¯å¦ä¸€å¥—ä¹ å¾—çš„å‚æ•°ã€‚å› ä¸º REINFORCE æœ¬èº«æ˜¯åŸºäºè’™ç‰¹å¡æ´›æ–¹æ³•ï¼Œé‚£ä¹ˆè‡ªç„¶è€Œç„¶å¯ä»¥åŒæ ·ä½¿ç”¨è’™ç‰¹å¡æ´›æ–¹æ³•æ¥å­¦ä¹  $w$ã€‚åˆ°æ­¤ä¸ºæ­¢ï¼Œæˆ‘ä»¬å°±å¯ä»¥å°† REINFORCE ç®—æ³•è½¬åŒ–ä¸º Actor-Critic ç®—æ³•ï¼Œå…¶ä¸­å‚æ•° $\\theta$ å¯¹åº”ç­–ç•¥æ¢¯åº¦éƒ¨åˆ†çš„ç¥ç»ç½‘ç»œï¼Œæ‰®æ¼” Actor çš„è§’è‰²ï¼›è€Œ $w$ å¯¹åº”ä»·å€¼ä¼°è®¡éƒ¨åˆ†çš„ç¥ç»ç½‘ç»œï¼Œæ‰®æ¼” Critic çš„è§’è‰²ã€‚Actor-Critic ç®—æ³•çš„æ›´æ–°å¼ä¸º\\[\\theta \\leftarrow \\theta + \\alpha (G_t - \\hat{v}(s_t;{w})) \\nabla_{\\theta}\\ln\\pi(a_t\\vert s_t;\\theta)\\]æ›´è¿›ä¸€æ­¥ï¼Œç±»ä¼¼äºåŸºäºä»·å€¼çš„å¼ºåŒ–å­¦ä¹ æ–¹æ³•ä¸­ï¼ŒMC åˆ° TD æ–¹æ³•çš„é€»è¾‘æ¼”å˜ï¼Œè¿™é‡Œæˆ‘ä»¬åŒæ ·ä¸éœ€è¦é‡‡æ ·å®Œæ•´çš„ä¸€æ¡è½¨è¿¹ï¼Œè€Œæ˜¯ä»…é‡‡æ ·ä¸€æ­¥ï¼Œåç»­é€šè¿‡è‡ªä¸¾çš„æ–¹å¼é€æ­¥ä¼°è®¡å®Œæ•´çš„è½¨è¿¹ã€‚\\[\\theta \\leftarrow \\theta + \\alpha (R_{t+1} + \\gamma \\hat{v}(s_{t+1};w) - \\hat{v}(s_t;{w})) \\nabla_{\\theta}\\ln\\pi(a_t\\vert s_t;\\theta)\\]Actor-Critic ç®—æ³•çš„è®­ç»ƒè¿‡ç¨‹å¦‚ä¸‹  è¾“å…¥ï¼š          å¯å¾®ç­–ç•¥å‡½æ•° $\\pi(a \\vert s;\\theta)$      å¯å¾®çš„ä»·å€¼å‡½æ•° $\\hat{v}(s;w)$      è¡°å‡å› å­ $\\gamma$ï¼Œå­¦ä¹ ç‡ $\\alpha_\\theta,\\alpha_w$        åˆå§‹åŒ–ï¼š          ç­–ç•¥å‡½æ•°çš„å‚æ•° $\\theta$      ä»·å€¼å‡½æ•°çš„å‚æ•° $w$        è®­ç»ƒè¿‡ç¨‹ï¼š          loop çŠ¶æ€ $s$ æ²¡æœ‰ç»“æŸæ—¶                  æ ¹æ®ç­–ç•¥é‡‡æ ·ï¼š$a\\sim \\pi(\\cdot, s;\\theta)$          æ‰§è¡ŒåŠ¨ä½œ $a$ï¼Œ å¾—åˆ°å¥–åŠ± $R$ï¼Œè½¬ç§»çŠ¶æ€åˆ° $s^\\prime$          $\\delta \\leftarrow R + \\gamma \\hat{v}(s^\\prime;w) - \\hat{v}(s;w)$          $w \\leftarrow w + \\alpha_w \\delta\\nabla_{w}\\hat{v}(s;w)$          $\\beta \\leftarrow \\gamma \\delta$                                                                      $\\theta \\leftarrow \\theta + \\alpha \\beta \\nabla_{\\theta}\\ln\\pi(a_t\\vert s_t;\\theta)$                                                                        3. å‚è€ƒæ–‡çŒ®[1] é™é™çš„å–é…’. CSDN ç­–ç•¥æ¢¯åº¦æ–¹æ³•ä»‹ç»â€”â€”Value-Basedå¼ºåŒ–å­¦ä¹ æ–¹æ³• VS Policy-Basedå¼ºåŒ–å­¦ä¹ æ–¹æ³•[2] é™é™çš„å–é…’. CSDN ç­–ç•¥æ¢¯åº¦æ–¹æ³•ä»‹ç»â€”â€”ç­–ç•¥æ¢¯åº¦å®šç†æ¨å¯¼è¿‡ç¨‹[3] é™é™çš„å–é…’. ç­–ç•¥æ¢¯åº¦æ–¹æ³•ä»‹ç»â€”â€”è’™ç‰¹å¡æ´›ç­–ç•¥æ¢¯åº¦æ–¹æ³•(REINFORCE)[4] Richard S. Sutton and Andrew G. Barto. Reinforcement Learning: An Introduction"
  },
  
  {
    "title": "å¦‚ä½•æ¸…ç† .git æ–‡ä»¶å¤¹æ¥å‡å° github ä»“åº“å¤§å°",
    "url": "/posts/linux-reduce-repo-size-through-git-folder/",
    "categories": "Knowledge",
    "tags": "github, git, linux, windows",
    "date": "2023-09-18 13:58:19 +0800",
    





    
    "snippet": "æœ¬æ–‡ä»‹ç»äº†å¦‚ä½•åœ¨  1. github          1.1. git å‘½ä»¤      1.2. github æ¡Œé¢      1.3. .git æ–‡ä»¶å¤¹        2. .git æ–‡ä»¶å¤¹æ¸…ç†          2.1. Linux ç¯å¢ƒå‘½ä»¤è¡Œæ¸…ç†      2.2. è·¨å¹³å° BFG å·¥å…·æ¸…ç†        3. å‚è€ƒæ–‡çŒ®1. github1.1. git å‘½ä»¤1.2. github...",
    "content": "æœ¬æ–‡ä»‹ç»äº†å¦‚ä½•åœ¨  1. github          1.1. git å‘½ä»¤      1.2. github æ¡Œé¢      1.3. .git æ–‡ä»¶å¤¹        2. .git æ–‡ä»¶å¤¹æ¸…ç†          2.1. Linux ç¯å¢ƒå‘½ä»¤è¡Œæ¸…ç†      2.2. è·¨å¹³å° BFG å·¥å…·æ¸…ç†        3. å‚è€ƒæ–‡çŒ®1. github1.1. git å‘½ä»¤1.2. github æ¡Œé¢1.3. .git æ–‡ä»¶å¤¹git æ˜¯å¢é‡æ›´æ–°æ¨¡å¼ï¼Œæ‰€æœ‰æ”¹åŠ¨éƒ½ä¼šä¿å­˜åœ¨ .git éšè—æ–‡ä»¶å¤¹å†…ã€‚.git æ–‡ä»¶å¤¹æ¸…ç†ä¸ä¼šæŠŠä»“åº“ä¸­å·²æœ‰çš„æ–‡ä»¶å¤¹å’Œé‡Œé¢çš„å†…å®¹åˆ é™¤ï¼Œä¼šä¿ç•™æœ€æ–°çš„ä¸€æ¬¡æäº¤ï¼Œå¹¶ä¸”é»˜è®¤æœ€è¿‘çš„ä¸€æ¬¡æäº¤æ˜¯å¹²å‡€æ— è¯¯çš„æäº¤ã€‚2. .git æ–‡ä»¶å¤¹æ¸…ç†2.1. Linux ç¯å¢ƒå‘½ä»¤è¡Œæ¸…ç†éœ€è¦ Linux ç¯å¢ƒã€‚      æ£€æŸ¥ä»“åº“æ˜¯å¦å­˜åœ¨æœªæäº¤çš„æ›´æ”¹    å¦‚æœä»“åº“å­˜åœ¨æœªæäº¤çš„æ›´æ”¹ï¼Œä¼šåœ¨åç»­æ“ä½œä¸­æç¤ºæç¤º Cannot rewrite branches: You have unstaged changes. è¡¨æ˜å°è¯•é‡å†™åˆ†æ”¯æ—¶ï¼Œæœ‰ä¸€äº›æœªæš‚å­˜çš„æ›´æ”¹ã€‚è¿™æ„å‘³ç€ä½ åœ¨Gitç‰ˆæœ¬æ§åˆ¶ä¸­ï¼Œå·¥ä½œç›®å½•æˆ–è€…æš‚å­˜åŒºæœ‰ä¸€äº›æ›´æ”¹è¿˜æ²¡æœ‰è¢«æ·»åŠ åˆ°æš‚å­˜åŒºã€‚å› æ­¤ï¼ŒGitä¸èƒ½è¿›è¡Œé‡å†™æ“ä½œï¼Œå› ä¸ºè¿™å¯èƒ½ä¼šå¯¼è‡´ä½ ä¸¢å¤±è¿™äº›æœªæäº¤çš„æ›´æ”¹ã€‚    å¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤æ£€æŸ¥æœ¬åœ°ä»“åº“ä¸äº‘ç«¯ä»“åº“çš„å·®å¼‚ï¼Œå®šä½æœªæäº¤çš„æ›´æ”¹      git diff        æ‰§è¡Œå‘½ä»¤åæŒ‰ q é€€å‡ºã€‚    å¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤æäº¤æ›´æ”¹      git add . # å°†æ‰€æœ‰æ–‡ä»¶æ·»åŠ åˆ°æš‚å­˜åŒº  git commit -m \"Your commit message\" # æäº¤ä½ çš„æ›´æ”¹        æˆ–ä¸¢å¼ƒæ›´æ”¹      git checkout -- . # ä¸¢å¼ƒå·¥ä½œç›®å½•ä¸­çš„æ‰€æœ‰æ›´æ”¹            æŸ¥çœ‹å ç”¨ä»“åº“å¤§å°æœ€å¤§çš„æ–‡ä»¶    bash ä¸‹æ‰§è¡Œä»¥ä¸‹å‘½ä»¤      git rev-list --objects --all | grep -f &lt;(git verify-pack -v .git/objects/pack/*.idx| sort -k 3 -n | cut -f 1 -d \" \" | tail -N)        ä¸¾ä¾‹      git rev-list --objects --all | grep -f &lt;(git verify-pack -v .git/objects/pack/pack-3a121311b111a111c11111x1111f111111111111.idx| sort -k 3 -n | cut -f 1 -d \" \" | tail -10)        å°†åœ¨æ§åˆ¶å°è¾“å‡ºç±»ä¼¼å¦‚ä¸‹ï¼š      344ee5dcae1xxxxx3d80daa8714ed7d16b21dxxx src/vehicles/cls_Spacecraft.cpp  98eecfdf58a0c0dc33bbfae46bxxxe5d837d5xxx src/vehicles/cls_Spacecraft_Docker.cpp  a8a5bca95b08084xxxx7160c4c5d98631f1cdxxx config/usrSpacecraft.json  e1cf4bf431f82d788fcaaaaac4ecca05503248xx winDSSimulator.exe  8932ce1bca5ba3c1ae39cxxxx054d14f15ad8xxx winDSSimulator.exe  17965fde8b22564a73addxxx10e77a815ef89xxx src/SimDynamics.cpp  33e7714xxxxaa033326648609f614837f49d2xxx winDSSimulator.exe  f3c41a010b75743fbb111161d84ebcc57ae85xxx winDSSimulator.exe  058da4754e97e910a72xxxxxxxa4d6f6513f5xxx winDSSimulator.exe  351e85631xxxx609d92523a67ca5d1e3e7f47xxx src/class/clsEarthDynamics.cpp            ä»å†å²ä¸­ç§»é™¤å¤§æ–‡ä»¶    ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ£€æŸ¥ä»“åº“ä¸­çš„æ–‡ä»¶ä¸ªæ•°ï¼ˆåœ¨æ‰§è¡Œ filter-branch æ¸…ç†å‘½ä»¤åä¸ªæ•°ä¼šå‡å°‘ï¼‰      git count-objects -v        å¯¹äºæ¯æ¬¡æäº¤æ“ä½œï¼Œfilter-branch å‘½ä»¤éƒ½ä¼šä½¿ç”¨ç»™å®šçš„è¿‡æ»¤å™¨é‡å†™ä»“åº“çš„å†å²ã€‚    ä»¥ä¸‹å‘½ä»¤åˆ é™¤å†å²ä¸­å­˜åœ¨çš„å›¾åƒï¼ˆä¾‹å¦‚ *.exeã€*.jsonã€*.jpgã€*.png å’Œ *.gifï¼‰ï¼Œè¿™äº›æ–‡ä»¶ç±»å‹æ˜¯å¸¸è§çš„æ— éœ€è·Ÿè¸ªå’Œå›é€€ä¿®æ”¹çš„æ–‡ä»¶ã€‚      git filter-branch -f --index-filter 'git rm --cached --ignore-unmatch \"config/**.json\" \"**.exe\" \"**.jpg\" \"**.png\" \"**.gif\"' --prune-empty --tag-name-filter cat -- --all        éœ€è¦æ³¨æ„ä»¥ä¸‹å‡ ç‚¹ï¼š          git rm --cachedï¼šè¿™ä¸ªå‘½ä»¤ä¼šä»Gitçš„ç´¢å¼•ä¸­ç§»é™¤æŒ‡å®šçš„æ–‡ä»¶ï¼Œè€Œä¸æ˜¯ä»å·¥ä½œç›®å½•ä¸­ç§»é™¤ã€‚è¿™æ„å‘³ç€ä½ çš„å·¥ä½œç›®å½•ä¸­ä»ç„¶ä¼šä¿ç•™è¿™äº›æ–‡ä»¶çš„å‰¯æœ¬ã€‚å¦‚æœä½ å¸Œæœ›ä»å·¥ä½œç›®å½•å’Œç´¢å¼•ä¸­éƒ½åˆ é™¤è¿™äº›æ–‡ä»¶ï¼Œä½ åº”è¯¥ä½¿ç”¨git rm â€“cached -r â€“ignore-unmatchâ€¦è¿™æ ·çš„å‘½ä»¤ã€‚      æ–‡ä»¶æ¨¡å¼ï¼šä½ ä½¿ç”¨çš„æ–‡ä»¶æ¨¡å¼ï¼Œä¾‹å¦‚ \"config/**.jpg\" å’Œ \"**.png\" ç­‰ï¼Œæ˜¯ç”¨åŒå¼•å·åŒ…å›´çš„ã€‚è¿™é€šå¸¸æ˜¯å¯ä»¥æ­£å¸¸å·¥ä½œçš„ï¼Œä½†æ˜¯å¦‚æœä½ åœ¨æ–‡ä»¶åä¸­æœ‰ä¸€äº›ç‰¹æ®Šå­—ç¬¦æˆ–è€…ç©ºæ ¼ï¼Œå¯èƒ½ä¼šå¯¼è‡´é—®é¢˜ã€‚ä½ éœ€è¦ç¡®å®šè¿™äº›æ¨¡å¼æ­£ç¡®åŒ¹é…äº†ä½ æƒ³è¦åˆ é™¤çš„æ–‡ä»¶ã€‚      --prune-emptyï¼šè¿™ä¸ªé€‰é¡¹ä¼šå¯¼è‡´Gitä¸¢å¼ƒé‚£äº›æ²¡æœ‰ä»»ä½•ä¿®æ”¹çš„æäº¤ã€‚å› ä¸ºä½ çš„æ“ä½œå¯èƒ½å¯¼è‡´ä¸€äº›æäº¤æ²¡æœ‰ä»»ä½•ä¿®æ”¹ï¼Œæ‰€ä»¥è¿™ä¸ªé€‰é¡¹å¯èƒ½ä¼šè¢«ç”¨åˆ°ã€‚      --tag-name-filter catï¼šè¿™ä¸ªé€‰é¡¹ä¼šé‡å‘½åæ‰€æœ‰çš„æ ‡ç­¾ã€‚catå‘½ä»¤ä¼šç›´æ¥è¾“å‡ºæ ‡ç­¾åï¼Œè¿™æ„å‘³ç€ä½ çš„æ ‡ç­¾åå­—å¯èƒ½ä¼šæ”¹å˜ã€‚ä½ éœ€è¦è€ƒè™‘è¿™æ˜¯å¦æ˜¯ä½ æƒ³è¦çš„è¡Œä¸ºã€‚      --allï¼šè¿™ä¸ªé€‰é¡¹ä¼šè®©Gitå¤„ç†æ‰€æœ‰çš„å¼•ç”¨ï¼ŒåŒ…æ‹¬æ‰€æœ‰åˆ†æ”¯å’Œæ ‡ç­¾ã€‚å¦‚æœä½ åªæƒ³å¤„ç†ç‰¹å®šçš„åˆ†æ”¯æˆ–æ ‡ç­¾ï¼Œä½ å¯ä»¥å»æ‰è¿™ä¸ªé€‰é¡¹ã€‚            æ¸…ç†ä»“åº“    æ¸…æ¥šæ—§æäº¤ä¸­ä¸éœ€è¦çš„æ—¥å¿—å’Œæ–‡ä»¶ã€‚      rm -Rf .git/refs/original  rm -Rf .git/logs/  git gc --aggressive --prune=now        å°†æ¸…ç†åçš„æœ¬åœ°ä»“åº“æ›´æ–°åˆ°äº‘ç«¯ã€‚      git push origin --force --all  git push origin --force --tags      2.2. è·¨å¹³å° BFG å·¥å…·æ¸…ç†  https://rtyley.github.io/bfg-repo-cleaner/BFG Repo-Cleaner æ˜¯ä¸€ä¸ªåŸç”Ÿ git-filter-branch çš„æ›´åŠ ç®€å•å¿«é€Ÿçš„æ›¿ä»£ï¼ŒåŸºäº JDK 8+é¦–å…ˆå‰å¾€å®˜ç½‘å®‰è£… JDKï¼ˆhttps://www.oracle.com/java/technologies/downloads/ï¼‰ã€‚ç„¶åä¸‹è½½ BFGï¼ˆhttps://rtyley.github.io/bfg-repo-cleaner/ï¼‰ã€‚ä¸€åˆ‡å‡†å¤‡å°±ç»ªåï¼Œè¿›å…¥æ¸…ç†ç¯èŠ‚      å…‹éš†ä¸€ä¸ªå…¨æ–°çš„ repo è£¸ä»“åº“åˆ°æœ¬åœ°ï¼ˆé€šè¿‡ --mirror å‚æ•°ï¼‰      git clone --mirror https://github.com/[user_name]/[repo_name].git              ã€æ³¨æ„ã€‘ï¼ŒåŸºäºhttpsçš„å‘½ä»¤è¡Œå…‹éš†éœ€è¦æˆæƒï¼Œè‹¥å®‰è£… Git æ—¶å€™æ²¡æœ‰é€‰æ‹©é™„å¸¦ Git Credential Managerï¼Œéœ€è¦æ‰‹åŠ¨ç‹¬ç«‹å®‰è£…ï¼ˆhttps://github.com/git-ecosystem/git-credential-manager/releasesï¼‰ï¼Œå¦åˆ™ä¼šå¤±è´¥ï¼Œå› ä¸º Github åœ¨ 2021 å¹´ç§»é™¤äº†é€šè¿‡è´¦æˆ·åå’Œå¯†ç æˆæƒçš„æ–¹å¼ã€‚è£¸ä»“åº“ï¼šhttps://git-scm.com/docs/gitglossary.html#def_bare_repositoryï¼Œ è£¸å­˜å‚¨åº“é€šå¸¸æ˜¯ä¸€ä¸ªé€‚å½“å‘½åçš„ç›®å½•ï¼Œåç¼€ä¸º.gitï¼Œæ²¡æœ‰ä»»ä½•å—ä¿®è®¢æ§åˆ¶çš„æ–‡ä»¶çš„æœ¬åœ°ç­¾å‡ºå‰¯æœ¬ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ‰€æœ‰é€šå¸¸ä¼šå‡ºç°åœ¨éšè—çš„.Gitå­ç›®å½•ä¸­çš„Gitç®¡ç†å’Œæ§åˆ¶æ–‡ä»¶éƒ½ç›´æ¥å‡ºç°åœ¨repository.Gitç›®å½•ä¸­ï¼Œè€Œä¸åŒ…å«å…¶ä»–æ–‡ä»¶ã€‚        å°†ä¸‹è½½å¥½çš„ bfg-1.14.0.jar æ”¾ç½®åœ¨å…‹éš†è£¸ä»“åº“ [repo_name].git ç›¸åŒçš„è·¯å¾„ï¼Œå¦‚ï¼š    ./mirror/[repo_name].git./mirror/bfg-1.14.0.jar            æ ¹æ®æ–‡ä»¶å¤§å°æ‰¹é‡æ¸…é™¤å†å²è®°å½•    ä¾‹ï¼šæ¸…ç†å¤§å°è¶…è¿‡ 1M çš„äºŒè¿›åˆ¶æ–‡ä»¶      java -jar bfg-1.14.0.jar --strip-blobs-bigger-than 1M [repo_name].git            æ ¹æ®æŒ‡å®šæ–‡ä»¶åæ¸…é™¤å†å²è®°å½•    ä¾‹ï¼šæ¸…ç†æ‰€æœ‰åç¼€ä¸º .zip çš„æ–‡ä»¶      java -jar bfg-1.14.0.jar --delete-files *.zip [repo_name].git            æ ¹æ®æ–‡ä»¶å¤¹æ¸…é™¤å†å²è®°å½•    ä¾‹ï¼šæ¸…ç†æ–‡ä»¶å¤¹ build      java -jar bfg-1.14.0.jar --delete-folders build [repo_name].git            è¿›å…¥ .git ç›®å½•ï¼Œæ‰§è¡Œåƒåœ¾å›æ”¶      cd [your_repo].git  git reflog expire --expire=now --all &amp;&amp; git gc --prune=now --aggressive            æœ€åï¼Œæ‰§è¡Œæäº¤æ“ä½œ    git push        ã€æ³¨æ„ã€‘ æœ€åçš„æœ€åï¼Œå¿…é¡»ç§»é™¤æ‰€æœ‰è¯¥ä»“åº“çš„æœ¬åœ°åŒæ­¥å†…å®¹é‡æ–°åŒæ­¥ï¼ŒåŒ…æ‹¬è‡ªå·±å’Œä»–äººå·²ç»åŒæ­¥è¿‡çš„è¯¥ä»“åº“ã€‚å› ä¸ºæ—§çš„åŒæ­¥ä»“åº“åŒ…å«æœªè¢«æ¸…ç†è¿‡çš„æ‰€æœ‰è„è®°å½•ï¼Œå¦‚æœæŸä¸ªæœ¬åœ°åŒæ­¥ä»“åº“åœ¨ä½¿ç”¨ BFG æ¸…ç†åè¿›è¡Œæäº¤ï¼Œä¼šå°†é‡æ–°é€ æˆè®°å½•æ±¡æŸ“ã€‚å› æ­¤éœ€è¦åˆ é™¤æœ¬åœ°åŒæ­¥ä»“åº“åé‡æ–°åŒæ­¥æŠ“å–ï¼Œä¿è¯æ¸…ç†è¿‡ç¨‹ä¸ä¼šå› ä¸ºå…¶å®ƒè¯¥ä»“åº“çš„å†å²æœ¬åœ°ä¿¡æ¯å› ä¸‹ä¸€æ¬¡æäº¤è€Œè¢«æ±¡æŸ“ã€‚å½“ç„¶ï¼Œä¸è¦å¿˜è®°ï¼Œé‡æ–°åŒæ­¥åˆ°æœ¬åœ°åï¼Œè¯•è¯• repo èƒ½å¦ç¼–è¯‘é€šè¿‡ 0.0ã€‚æ¸…ç†å®Œæ¯•ï¼Œå¯ä»¥åˆ é™¤ mirror/[your_repo].git æ–‡ä»¶å¤¹ã€‚3. å‚è€ƒæ–‡çŒ®[1] Junyong Lee. How to clean up .git folder for reducing repository size"
  },
  
  {
    "title": "åœ¨ Windows ä¸­éƒ¨ç½²å’Œä½¿ç”¨ WSL å¹¶è¿›è¡Œè·¨å¹³å° C/C++ å¼€å‘",
    "url": "/posts/linux-WSL/",
    "categories": "Knowledge",
    "tags": "c/c++, linux, wsl, windows subsystem for linux, vscode",
    "date": "2023-09-07 15:32:19 +0800",
    





    
    "snippet": "æœ¬æ–‡ä»‹ç»äº†å¦‚ä½•åœ¨  1. ä»€ä¹ˆæ˜¯ WSL          1.1. WSL 1 å’Œ WSL 2      1.2. ä¾‹å¤–æƒ…å†µï¼ˆä½¿ç”¨ WSL 1 è€Œä¸æ˜¯ WSL 2ï¼‰        2. å®‰è£… WSL          2.1. å®‰è£… C/C++ å¼€å‘ç¯å¢ƒä¾èµ–      2.2. å®‰è£… Python å¼€å‘ç¯å¢ƒä¾èµ–                  2.2.1. ä¾é ç¬¬ä¸‰æ–¹å®‰è£…ï¼ˆæ¨èï¼‰    ...",
    "content": "æœ¬æ–‡ä»‹ç»äº†å¦‚ä½•åœ¨  1. ä»€ä¹ˆæ˜¯ WSL          1.1. WSL 1 å’Œ WSL 2      1.2. ä¾‹å¤–æƒ…å†µï¼ˆä½¿ç”¨ WSL 1 è€Œä¸æ˜¯ WSL 2ï¼‰        2. å®‰è£… WSL          2.1. å®‰è£… C/C++ å¼€å‘ç¯å¢ƒä¾èµ–      2.2. å®‰è£… Python å¼€å‘ç¯å¢ƒä¾èµ–                  2.2.1. ä¾é ç¬¬ä¸‰æ–¹å®‰è£…ï¼ˆæ¨èï¼‰          2.2.2. åœ¨ç³»ç»Ÿç¯å¢ƒä¸‹å®‰è£…                    2.3 é…ç½® GUI å¼€å‘ç¯å¢ƒ        3. é…ç½® VSCode  4. è·¨ç³»ç»Ÿæ–‡ä»¶å­˜å‚¨å’Œè®¿é—®  5. å‚è€ƒæ–‡çŒ®1. ä»€ä¹ˆæ˜¯ WSLå®˜æ–¹æ–‡æ¡£ï¼šhttps://learn.microsoft.com/zh-cn/windows/wsl/é€‚ç”¨äº Linux çš„ Windows å­ç³»ç»Ÿ (WSL) å¯è®©å¼€å‘äººå‘˜ç›´æ¥åœ¨ Windows ä¸ŠæŒ‰åŸæ ·è¿è¡Œ GNU/Linux ç¯å¢ƒï¼ˆåŒ…æ‹¬å¤§å¤šæ•°å‘½ä»¤è¡Œå·¥å…·ã€å®ç”¨å·¥å…·å’Œåº”ç”¨ç¨‹åºï¼‰ï¼Œä¸”ä¸ä¼šäº§ç”Ÿä¼ ç»Ÿè™šæ‹Ÿæœºæˆ–åŒå¯åŠ¨è®¾ç½®å¼€é”€ã€‚1.1. WSL 1 å’Œ WSL 2            åŠŸèƒ½      WSL 1      WSL 2                  æ‰˜ç®¡ VM                          å®Œæ•´çš„ Linux å†…æ ¸                          å®Œå…¨çš„ç³»ç»Ÿè°ƒç”¨å…¼å®¹æ€§                          è·¨ OS æ–‡ä»¶ç³»ç»Ÿçš„æ€§èƒ½                  WSL 1 å’Œ WSL 2 ä¹‹é—´çš„ä¸»è¦åŒºåˆ«åœ¨äºï¼Œæ˜¯å¦åœ¨æ‰˜ç®¡ VM å†…ä½¿ç”¨å®é™…çš„ Linux å†…æ ¸ã€æ”¯æŒå®Œæ•´çš„ç³»ç»Ÿè°ƒç”¨å…¼å®¹æ€§ä»¥åŠè·¨ Linux å’Œ Windows æ“ä½œç³»ç»Ÿçš„æ€§èƒ½ã€‚ WSL 2 æ˜¯å®‰è£… Linux å‘è¡Œç‰ˆæ—¶çš„å½“å‰é»˜è®¤ç‰ˆæœ¬ï¼Œå®ƒä½¿ç”¨æœ€æ–°æœ€å¥½çš„è™šæ‹ŸåŒ–æŠ€æœ¯åœ¨è½»é‡çº§å®ç”¨å·¥å…·è™šæ‹Ÿæœº (VM) å†…è¿è¡Œ Linux å†…æ ¸ã€‚ä»ä¸Šé¢çš„æ¯”è¾ƒè¡¨ä¸­å¯ä»¥çœ‹å‡ºï¼ŒWSL 2 æ¶æ„åœ¨å‡ ä¸ªæ–¹é¢ä¼˜äº WSL 1ï¼Œä½†è·¨ OS æ–‡ä»¶ç³»ç»Ÿçš„æ€§èƒ½é™¤å¤–ï¼Œå¯¹äºè¿™ç§æƒ…å†µï¼Œå¯é€šè¿‡å°†é¡¹ç›®æ–‡ä»¶å­˜å‚¨åœ¨ä¸å¤„ç†é¡¹ç›®æ—¶è¿è¡Œçš„å·¥å…·ç›¸åŒçš„æ“ä½œç³»ç»Ÿä¸Šè¿›è¡Œå¤„ç†ã€‚  https://learn.microsoft.com/en-us/windows/wsl/tutorials/gui-appsæ³¨æ„ï¼å¦‚æœéœ€è¦ä½¿ç”¨ Linux çš„ GUI ç¨‹åºï¼Œåªèƒ½ä½¿ç”¨ WSL 2ã€‚1.2. ä¾‹å¤–æƒ…å†µï¼ˆä½¿ç”¨ WSL 1 è€Œä¸æ˜¯ WSL 2ï¼‰æˆ‘ä»¬å»ºè®®ä½¿ç”¨ WSL 2ï¼Œå› ä¸ºå®ƒæä¾›æ›´å¿«çš„æ€§èƒ½å’Œ100% çš„ç³»ç»Ÿè°ƒç”¨å…¼å®¹æ€§ã€‚ ä½†æ˜¯ï¼Œåœ¨æŸäº›ç‰¹å®šæƒ…å†µä¸‹ï¼Œä½ å¯èƒ½ä¼šæ›´å€¾å‘äºä½¿ç”¨ WSL 1ã€‚ åœ¨ä»¥ä¸‹æƒ…å†µä¸‹ï¼Œè¯·è€ƒè™‘ä½¿ç”¨ WSL 1ï¼š  ä½ çš„é¡¹ç›®æ–‡ä»¶å¿…é¡»å­˜å‚¨åœ¨ Windows æ–‡ä»¶ç³»ç»Ÿä¸­ã€‚ WSL 1 å¯ä»¥æ›´å¿«åœ°è®¿é—®ä» Windows è£…è½½çš„æ–‡ä»¶ã€‚å¦‚æœä½ å°†ä½¿ç”¨ WSL Linux åˆ†å‘ç‰ˆæ¥è®¿é—® Windows æ–‡ä»¶ç³»ç»Ÿä¸Šçš„é¡¹ç›®æ–‡ä»¶ï¼Œå¹¶ä¸”è¿™äº›æ–‡ä»¶æ— æ³•å­˜å‚¨åœ¨ Linux æ–‡ä»¶ç³»ç»Ÿä¸Šï¼Œé‚£ä¹ˆï¼Œé€šè¿‡ä½¿ç”¨ WSL 1ï¼Œä½ å°†è·¨ OS æ–‡ä»¶ç³»ç»Ÿå®ç°æ›´å¿«çš„æ€§èƒ½ã€‚  ä¸€ä¸ªé¡¹ç›®è¦æ±‚å¯¹ç›¸åŒçš„æ–‡ä»¶ä½¿ç”¨ Windows å’Œ Linux å·¥å…·è¿›è¡Œäº¤å‰ç¼–è¯‘ã€‚åœ¨ WSL 1 ä¸­ï¼Œè·¨ Windows å’Œ Linux æ“ä½œç³»ç»Ÿçš„æ–‡ä»¶æ€§èƒ½æ¯” WSL 2 ä¸­æ›´å¿«ï¼Œå› æ­¤å¦‚æœè¦ä½¿ç”¨ Windows åº”ç”¨ç¨‹åºæ¥è®¿é—® Linux æ–‡ä»¶ï¼Œåˆ™ç›®å‰é€šè¿‡ WSL 1 å¯å®ç°æ›´å¿«çš„æ€§èƒ½ã€‚  ä½ çš„é¡¹ç›®éœ€è¦è®¿é—®ä¸²è¡Œç«¯å£æˆ– USB è®¾å¤‡ã€‚ ä½†æ˜¯ï¼Œç°åœ¨å¯é€šè¿‡ USBIPD-WIN é¡¹ç›®ä¸º WSL 2 æä¾› USB è®¾å¤‡æ”¯æŒã€‚ æœ‰å…³è®¾ç½®æ­¥éª¤ï¼Œè¯·å‚é˜…è¿æ¥ USB è®¾å¤‡ã€‚  WSL 2 ä¸æ”¯æŒè®¿é—®ä¸²è¡Œç«¯å£ã€‚ æœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…å¸¸è§é—®é¢˜è§£ç­”æˆ– WSL GitHub å­˜å‚¨åº“ä¸­æœ‰å…³ä¸²è¡Œæ”¯æŒçš„é—®é¢˜ã€‚  æœ‰ä¸¥æ ¼çš„å†…å­˜è¦æ±‚WSL 2 çš„å†…å­˜ä½¿ç”¨é‡ä¼šéšä½¿ç”¨è€Œç¼©æ”¾ã€‚ å½“è¿›ç¨‹é‡Šæ”¾å†…å­˜æ—¶ï¼Œè¿™ä¼šè‡ªåŠ¨è¿”å›åˆ° Windowsã€‚ ä½†ä»ç°åœ¨å¼€å§‹ï¼Œåœ¨å…³é—­ WSL å®ä¾‹å‰ï¼ŒWSL 2 è¿˜ä¸ä¼šå°†å†…å­˜ä¸­ç¼“å­˜çš„é¡µé¢é‡Šæ”¾å› Windowsã€‚ å¦‚æœä½ æœ‰é•¿æ—¶é—´è¿è¡Œçš„ WSL ä¼šè¯æˆ–è®¿é—®éå¸¸å¤§é‡çš„æ–‡ä»¶ï¼Œæ­¤ç¼“å­˜å¯èƒ½ä¼šè€—å°½ Windows å†…å­˜ã€‚ æˆ‘ä»¬é€šè¿‡ WSL GitHub å­˜å‚¨åº“é—®é¢˜ 4166 è·Ÿè¸ªå·¥ä½œä»¥æ”¹å–„æ­¤ä½“éªŒã€‚  å¯¹äºä½¿ç”¨ VirtualBox çš„ç”¨æˆ·ï¼Œä½ å¯èƒ½éœ€è¦è€ƒè™‘ä½ æ­£åœ¨è¿è¡Œçš„ç‰ˆæœ¬ä»¥åŠå®ƒæ˜¯å¦ä¸ WSL 2 å…¼å®¹ã€‚ ï¼ˆæœ‰å…³å®Œæ•´è®¨è®ºï¼Œè¯·å‚é˜… WSL GitHub å­˜å‚¨åº“é—®é¢˜ 798ã€‚VirtualBox v6.1.16 ä¼¼ä¹é€‚ç”¨äº WSL 2ï¼Œä½†å…¶ä»–ç‰ˆæœ¬å¯èƒ½é‡åˆ°é—®é¢˜ã€‚ï¼‰  å¦‚æœä¾èµ– Linux å‘è¡Œç‰ˆåœ¨ä¸ä¸»æœºç›¸åŒçš„ç½‘ç»œä¸­æ‹¥æœ‰ IP åœ°å€ï¼Œåˆ™å¯èƒ½éœ€è¦è®¾ç½®ä¸€ç§æ›¿ä»£æ–¹æ³•æ¥è¿è¡Œ WSL 2ã€‚ WSL 2 ä½œä¸º hyper-v è™šæ‹Ÿæœºè¿è¡Œã€‚ è¿™æ˜¯å¯¹ WSL 1 ä¸­ä½¿ç”¨çš„æ¡¥æ¥ç½‘ç»œé€‚é…å™¨çš„æ›´æ”¹ï¼Œè¿™æ„å‘³ç€ WSL 2 ä½¿ç”¨ç½‘ç»œåœ°å€è½¬æ¢ (NAT) æœåŠ¡ä½œä¸ºå…¶è™šæ‹Ÿç½‘ç»œï¼Œè€Œä¸æ˜¯å°†å…¶æ¡¥æ¥åˆ°ä¸»æœºç½‘ç»œæ¥å£å¡ (NIC)ï¼Œä»è€Œç”Ÿæˆå”¯ä¸€çš„å°†åœ¨é‡å¯æ—¶æ›´æ”¹çš„ IP åœ°å€ã€‚ è¦è¯¦ç»†äº†è§£å°† WSL 2 æœåŠ¡çš„ TCP ç«¯å£è½¬å‘åˆ°ä¸»æœº OS çš„é—®é¢˜å’Œç¼“è§£æªæ–½ï¼Œè¯·å‚é˜… WSL GitHub å­˜å‚¨åº“é—®é¢˜ 4150ï¼ŒNIC æ¡¥æ¥æ¨¡å¼ï¼ˆTCP ç¼“è§£æªæ–½ï¼‰ã€‚2. å®‰è£… WSLå¯åŠ¨è¿è¡Œï¼ˆWin+Rï¼‰ä¾æ¬¡è¾“å…¥ä»¥ä¸‹å‘½ä»¤ã€‚  å¼€å¯ WSL æœåŠ¡dism.exe /online /enable-feature /featurename:Microsoft-Windows-Subsystem-Linux /all /norestart  å¼€å¯è™šæ‹ŸåŒ–æœåŠ¡dism.exe /online /enable-feature /featurename:VirtualMachinePlatform /all /norestart  è®¾ç½® WSL çš„é»˜è®¤æ¶æ„ä¸º WSL 2ï¼Œè¿™å°†ä½¿ä½ å®‰è£…çš„ä»»ä½•æ–°å‘è¡Œç‰ˆåˆå§‹åŒ–ä¸º WSL 2 å‘è¡Œç‰ˆï¼ˆWSL 1 ç±»ä¼¼ï¼‰ã€‚wsl set-default-version 2      é€‰ç”¨ä¸‹é¢ä¸¤ç§å‘½ä»¤ä¸­çš„ä¸€ç§ç›´æ¥å®‰è£… WSL                  ç›´æ¥å®‰è£… WSLï¼ˆä¾èµ–ç³»ç»Ÿæ›´æ–°æ¥æ›´æ–° WSLï¼‰        wsl --installwsl --install -d Ubuntu-22.04    //&lt;--å¯èƒ½éœ€è¦æŒ‡å®šdistribution                            æˆ–è€… ç›´æ¥å®‰è£… WSL 2ï¼ˆä¾èµ– Windows Store æ›´æ–°åŒ…æ¥æ›´æ–° WSLï¼‰        wsl.exe --install                            è‹¥æç¤º å®‰å…¨é¢‘é“æ”¯æŒå‡ºé”™ åˆ™å¯åŠ¨è¿è¡Œï¼ˆWin+Rï¼‰è¾“å…¥ inetcpl.cplï¼Œåœ¨å¼¹å‡ºçš„ Internetå±æ€§ çª—å£ï¼Œåˆ‡æ¢è‡³ é«˜çº§ é€‰é¡¹å¡ï¼Œæ‰¾åˆ°è®¾ç½®ä¸­çš„ ä½¿ç”¨TLS 1.2 æœ€åç‚¹ åº”ç”¨ ä¿å­˜ï¼Œç„¶åé‡æ–°å°è¯•ä¸Šè¿°å‘½ä»¤å®‰è£…å³å¯ã€‚                  è®¾ç½®å¯†ç     ä½¿ç”¨ WSL å®‰è£… Linux å‘è¡Œç‰ˆçš„è¿‡ç¨‹å®Œæˆåï¼Œä¼šå¼¹å‡ºä¸€ä¸ªæ–°çš„æ§åˆ¶å°çª—å£ï¼Œåˆ›å»º Linux è´¦æˆ·å’Œå¯†ç ã€‚è‹¥æ²¡æœ‰è‡ªåŠ¨å¼¹å‡ºï¼Œå¯ä»¥ä½¿ç”¨ â€œå¼€å§‹â€ èœå•æ‰“å¼€è¯¥å‘è¡Œç‰ˆï¼ˆé»˜è®¤æƒ…å†µä¸‹ä¸º Ubuntuï¼‰ã€‚ ç³»ç»Ÿå°†è¦æ±‚ä½ ä¸º Linux å‘è¡Œç‰ˆåˆ›å»ºâ€œç”¨æˆ·åâ€å’Œâ€œå¯†ç â€ã€‚          æ­¤ç”¨æˆ·åå’Œå¯†ç ç‰¹å®šäºå®‰è£…çš„æ¯ä¸ªå•ç‹¬çš„ Linux åˆ†å‘ç‰ˆï¼Œä¸ Windows ç”¨æˆ·åæ— å…³ã€‚      è¯·æ³¨æ„ï¼Œè¾“å…¥ å¯†ç æ—¶ï¼Œå±å¹•ä¸Šä¸ä¼šæ˜¾ç¤ºä»»ä½•å†…å®¹ã€‚ è¿™ç§°ä¸ºç›²äººé”®å…¥ã€‚ ä½ ä¸ä¼šçœ‹åˆ°ä½ æ­£åœ¨é”®å…¥çš„å†…å®¹ï¼Œè¿™æ˜¯å®Œå…¨æ­£å¸¸çš„ã€‚      åˆ›å»ºç”¨æˆ·åå’Œå¯†ç åï¼Œè¯¥å¸æˆ·å°†æ˜¯åˆ†å‘ç‰ˆçš„é»˜è®¤ç”¨æˆ·ï¼Œå¹¶å°†åœ¨å¯åŠ¨æ—¶è‡ªåŠ¨ç™»å½•ã€‚      æ­¤å¸æˆ·å°†è¢«è§†ä¸º Linux ç®¡ç†å‘˜ï¼Œèƒ½å¤Ÿè¿è¡Œ sudo (Super User Do) ç®¡ç†å‘½ä»¤ã€‚      åœ¨ WSL ä¸Šè¿è¡Œçš„æ¯ä¸ª Linux å‘è¡Œç‰ˆéƒ½æœ‰å…¶è‡ªå·±çš„ Linux ç”¨æˆ·å¸æˆ·å’Œå¯†ç ã€‚ æ¯å½“æ·»åŠ åˆ†å‘ç‰ˆã€é‡æ–°å®‰è£…æˆ–é‡ç½®æ—¶ï¼Œéƒ½å¿…é¡»é…ç½®å¸æˆ·ã€‚      å¿˜è®°ç”¨æˆ·è´¦æˆ·å¯†ç å¯ä»¥é€šè¿‡åœ¨ Windows ä¸‹è¿›å…¥ root è´¦æˆ·é‡æ–°è®¾ç½®        wsl.exe --user rootpasswd [your_user_name]                          æ›´æ–° WSLï¼ˆè‹¥è¦ä½¿ç”¨GUIç¨‹åºè¯·åŠ¡å¿…æ›´æ–°ï¼‰  åœ¨ Windows ä¸‹wsl --updatewsl --shutdownåœ¨ WSL ä¸­sudo apt update &amp;&amp; sudo apt upgrade2.1. å®‰è£… C/C++ å¼€å‘ç¯å¢ƒä¾èµ–åœ¨ WSL æ§åˆ¶å°ï¼ˆVScodeè¿œç¨‹æ¨¡å¼ä¸‹çš„ç»ˆç«¯ï¼‰å®‰è£…å¦‚ä¸‹ç¨‹åºåŒ…ï¼Œé…ç½® Linux ä¸‹çš„ C/C++ å¼€å‘ç¯å¢ƒï¼šsudo apt-get install build-essentialsudo apt-get install gdbsudo apt-get install cmake2.2. å®‰è£… Python å¼€å‘ç¯å¢ƒä¾èµ–2.2.1. ä¾é ç¬¬ä¸‰æ–¹å®‰è£…ï¼ˆæ¨èï¼‰å‚è€ƒå®˜ç½‘ï¼ˆhttps://docs.conda.io/projects/miniconda/en/latest/ï¼‰ å®‰è£… miniconda ç¯å¢ƒmkdir -p ~/miniconda3wget https://repo.anaconda.com/miniconda/Miniconda3-latest-Linux-x86_64.sh -O ~/miniconda3/miniconda.shbash ~/miniconda3/miniconda.sh -b -u -p ~/miniconda3rm -rf ~/miniconda3/miniconda.shå®‰è£…å®Œæ¯•åè¾“å…¥ä»¥ä¸‹å‘½ä»¤åˆå§‹åŒ–æ§åˆ¶å°~/miniconda3/bin/conda init bashæŸ¥è¯¢ conda ç‰ˆæœ¬ï¼Œç¡®è®¤æ˜¯å¦å®‰è£…æˆåŠŸconda -Væ¢æºnano ~/.condarcç„¶ååœ¨å¼¹å‡ºçš„ç¼–è¾‘ç•Œé¢ç²˜è´´ä»¥ä¸‹ä»£ç channels:  - defaultsshow_channel_urls: truechannel_alias: https://mirrors.tuna.tsinghua.edu.cn/anacondadefault_channels:  - https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/main  - https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/free  - https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/r  - https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/pro  - https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/msys2custom_channels:  conda-forge: https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud  msys2: https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud  bioconda: https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud  menpo: https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud  pytorch: https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud  simpleitk: https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloudæœ€åä½¿ç”¨ CTRL + X ä¿å­˜é€€å‡ºï¼Œç„¶åæ›´æ–°ç¼“å­˜sudo apt-get updateç„¶åä¾æ¬¡æ‰§è¡Œä»¥ä¸‹å¸¸ç”¨å‘½ä»¤# æ›´æ–°condaconda update conda # æŸ¥çœ‹è™šæ‹Ÿç¯å¢ƒåˆ—è¡¨conda env list# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒconda create --name &lt;env_name&gt; [python_version] [package_name]conda create --name li python=3.9 # ä¾‹å­# å¯åŠ¨ç¯å¢ƒï¼ˆæ³¨æ„ä»¥åå®‰è£…åŒ…éƒ½è¦å…ˆå¯åŠ¨ç¯å¢ƒï¼‰conda activate li# æŸ¥çœ‹--å®‰è£…--æ›´æ–°--åˆ é™¤åŒ…conda listconda search &lt;package_name&gt; # æŸ¥è¯¢åŒ…conda install &lt;package_name&gt;conda install package_name=1.5.0conda update package_nameconda remove package_name# pytorch å¯ä»¥ç”¨pipå®‰è£…ï¼Œæ–¹ä¾¿å¿«æ·ï¼Œé»˜è®¤gpuç‰ˆæœ¬pip3 install torch2.2.2. åœ¨ç³»ç»Ÿç¯å¢ƒä¸‹å®‰è£…å¦‚æœè¦ä» Python æºä»£ç å¼€å§‹ç¼–è¯‘ Python è§£é‡Šå™¨ï¼Œåˆ™éœ€è¦å®‰è£…å¦‚ä¸‹ä¾èµ–sudo apt install zlib1g-dev libncurses5-dev libgdbm-dev libnss3-dev libssl-dev libreadline-dev libffi-dev libbz2-dev liblzma-dev sqlite3 libsqlite3-dev tk-dev uuid-dev libgdbm-compat-devå¦‚æœä»ç¬¬ä¸‰æ–¹ PPAï¼ˆPersonal Package Archiveï¼‰å®‰è£… Pythonsudo add-apt-repository ppa:deadsnakes/ppaç„¶åå†æ¬¡æ›´æ–° aptsudo apt updateå¯ä»¥çœ‹åˆ°æ–°å¢çš„ PPA ä¹ŸåŠ å…¥æ›´æ–°æ¥æºåˆ—è¡¨äº†Hit:1 http://security.ubuntu.com/ubuntu jammy-security InReleaseHit:2 http://archive.ubuntu.com/ubuntu jammy InRelease                           Hit:3 http://archive.ubuntu.com/ubuntu jammy-updates InRelease                   Hit:4 http://archive.ubuntu.com/ubuntu jammy-backports InRelease                 Hit:5 https://ppa.launchpadcontent.net/deadsnakes/ppa/ubuntu jammy InReleaseReading package lists... DoneBuilding dependency tree... DoneReading state information... DoneAll packages are up to date.ç„¶åå°±å¯ä»¥å®‰è£… Pythonï¼Œä»¥ 3.9 ç‰ˆæœ¬ä¸ºä¾‹ï¼ˆPYthon 3.10 æ˜¯ Ubuntu 22.04 LTS è‡ªå¸¦çš„é»˜è®¤ Python 3 ç‰ˆæœ¬å› æ­¤ä¸æä¾›ä¸‹è½½ï¼Œä½† WSL2 é»˜è®¤ä¼¼ä¹æ²¡æœ‰ Pythonï¼‰sudo apt install python3.9ç„¶åé€šè¿‡ä»¥ä¸‹å‘½ä»¤ç¡®è®¤å®‰è£…æ˜¯å¦æˆåŠŸï¼ˆæˆåŠŸçš„è¯åº”è¯¥èƒ½çœ‹åˆ° Python ç‰ˆæœ¬å·ï¼‰python3.9 --versionä»¥åå³å¯ç”¨ python3.9 æ¥è¿è¡Œè„šæœ¬ï¼Œè€Œä¸æ˜¯ä½¿ç”¨ python æˆ–è€… python3ã€‚2.3 é…ç½® GUI å¼€å‘ç¯å¢ƒå®‰è£… mesaï¼Œmesa å¯ä»¥æ”¯æŒ glxinfo å‘½ä»¤ï¼Œè¿™ä¸ªå‘½ä»¤å¯ä»¥æŸ¥çœ‹å¾ˆå¤šä¸æ˜¾å¡ã€OpenGL ç›¸å…³çš„ä¿¡æ¯sudo apt-get install mesa-utilsç„¶åæŸ¥çœ‹æ˜¾å¡æ˜¯å¦èƒ½å¤Ÿè¯†åˆ«glxinfo | grep renderingè·å–æ˜¾å¡ OpenGL ç‰ˆæœ¬ä¿¡æ¯glxinfo | grep OpenGLsudo apt-get install libglfw3-dev3. é…ç½® VSCode  https://learn.microsoft.com/zh-cn/windows/wsl/tutorials/wsl-vscodeVisual Studio Codeä»¥åŠ WSL æ‰©å±•ä½¿ä½ èƒ½å¤Ÿç›´æ¥ä» VS Code å°† WSL ç”¨ä½œå…¨èŒå¼€å‘ç¯å¢ƒã€‚é€šè¿‡ä¸‹é¢ä¸¤ç§æ–¹å¼ä¸­çš„ä¸€ç§åœ¨ WSL ä¸‹å¯åŠ¨ VSCodeï¼š  åœ¨å¯åŠ¨è¿è¡Œï¼ˆWin+Eï¼‰ä¸­è¾“å…¥ wsl ç„¶åè¾“å…¥ code . å¯åŠ¨è¿œç¨‹æ¨¡å¼ä¸‹çš„ VScodeã€‚  åœ¨Windows ä¸­æ‰“å¼€ VScode ç„¶åç‚¹å‡»å·¦ä¸‹è§’è“è‰²çš„ æ‰“å¼€è¿œç¨‹çª—å£ æŒ‰é’®ã€‚  æ³¨ï¼šåœ¨ WSL ä¸­æ‰“å¼€ Windows æœ¬åœ°çš„é¡¹ç›®ï¼ŒWindows ä¸­çš„æ‰€æœ‰è·¯å¾„é»˜è®¤åœ¨ /mnt/ ä¸‹ã€‚æŒ‡ä»¤æ£€æŸ¥ç‰ˆæœ¬ç¡®è®¤æ˜¯å¦å®‰è£…æˆåŠŸgcc -vg++ -vcmake --Versiongdb -våœ¨ WSL ä¸­å®‰è£…éœ€è¦çš„æ‰©å±•ï¼ˆä¸ Windows æœ¬åœ°æ‰©å±•ä¸å…±äº«ï¼Œå› æ­¤éœ€è¦é‡æ–°å®‰è£…ï¼‰ã€‚æ ¹æ®é¡¹ç›®éœ€è¦è‡ªè¡Œé€‰æ‹©å®‰è£…ï¼š  Chinese Simplifed  WSL  C/C++  CMake  Cmake Tools  Python4. è·¨ç³»ç»Ÿæ–‡ä»¶å­˜å‚¨å’Œè®¿é—®      è‹¥è¦åœ¨ Windows æ–‡ä»¶èµ„æºç®¡ç†å™¨ä¸­æ‰“å¼€ WSL é¡¹ç›®ï¼Œè¯·è¾“å…¥ï¼šexplorer.exe .è¯·ç¡®ä¿åœ¨å‘½ä»¤çš„æœ«å°¾æ·»åŠ å¥ç‚¹ä»¥æ‰“å¼€å½“å‰ç›®å½•ã€‚        å°†é¡¹ç›®æ–‡ä»¶ä¸è®¡åˆ’ä½¿ç”¨çš„å·¥å…·å­˜å‚¨åœ¨ç›¸åŒçš„æ“ä½œç³»ç»Ÿä¸Šã€‚è‹¥æƒ³è·å¾—æœ€å¿«çš„æ€§èƒ½é€Ÿåº¦ï¼Œè¯·å°†æ–‡ä»¶å­˜å‚¨åœ¨ WSL æ–‡ä»¶ç³»ç»Ÿä¸­ï¼Œå‰ææ˜¯ä½¿ç”¨ Linux å·¥å…·åœ¨ Linux å‘½ä»¤è¡Œï¼ˆUbuntuã€OpenSUSE ç­‰ï¼‰ä¸­å¤„ç†è¿™äº›æ–‡ä»¶ã€‚ å¦‚æœæ˜¯ä½¿ç”¨ Windows å·¥å…·åœ¨ Windows å‘½ä»¤è¡Œï¼ˆPowerShellã€å‘½ä»¤æç¤ºç¬¦ï¼‰ä¸­å·¥ä½œï¼Œè¯·å°†æ–‡ä»¶å­˜å‚¨åœ¨ Windows æ–‡ä»¶ç³»ç»Ÿä¸­ã€‚ å¯ä»¥è·¨æ“ä½œç³»ç»Ÿè®¿é—®æ–‡ä»¶ï¼Œä½†è¿™å¯èƒ½ä¼šæ˜¾è‘—é™ä½æ€§èƒ½ã€‚  ä¾‹å¦‚ï¼Œåœ¨å­˜å‚¨ WSL é¡¹ç›®æ–‡ä»¶æ—¶ï¼š  ä½¿ç”¨ Linux æ–‡ä»¶ç³»ç»Ÿæ ¹ç›®å½•ï¼š\\\\wsl$\\&lt;DistroName&gt;\\home\\&lt;UserName&gt;\\Projectï¼ˆæ¯”å¦‚ \\\\wsl$\\Ubuntu-22.04\\home\\zhangsanï¼‰  è€Œä¸ä½¿ç”¨ Windows æ–‡ä»¶ç³»ç»Ÿæ ¹ç›®å½•ï¼šC:\\Users\\&lt;UserName&gt;\\Project æˆ– /mnt/c/Users/&lt;UserName&gt;/Project$5. å‚è€ƒæ–‡çŒ®[1] Reichtum. ã€çŸ¥ä¹ã€‘vscode wslå­ç³»ç»Ÿ c++ç¯å¢ƒé…ç½®åŸºç¡€ç¯‡[2] ä¸œåº­æ½æœˆ. ã€çŸ¥ä¹ã€‘WSL+VSCodeé£Ÿç”¨æŒ‡å—[3] Ethan Shen. ã€çŸ¥ä¹ã€‘æ­é… VS Code Remote è¿œç¨‹å¼€å‘æ‰©å±•åœ¨ WSL ä¸‹å¼€å‘[4] luckyum. ã€çŸ¥ä¹ã€‘åœ¨Windowsä¸‹é€šè¿‡VSCodeå’ŒWSLç¼–è¯‘C++ç¨‹åº"
  },
  
  {
    "title": "èˆªå¤©ä¸­çš„å››å…ƒæ•°ä»¥åŠå§¿æ€è¿åŠ¨å­¦",
    "url": "/posts/space-quaternion/",
    "categories": "Knowledge",
    "tags": "space, quaternion, attitude kinematics",
    "date": "2023-06-02 18:38:19 +0800",
    





    
    "snippet": "æœ¬æ–‡ä»‹ç»äº†èˆªå¤©å™¨å§¿æ€æè¿°ã€å§¿æ€å˜æ¢å’Œå§¿æ€è¿åŠ¨å­¦ä¸­æ¶‰åŠçš„å››å…ƒæ•°è¡¨ç¤ºæ³•ã€‚  1. åŸºç¡€          1.1. çŸ¢é‡çš„æ­£äº¤åˆ†è§£      1.2. å‰ä¹˜çŸ©é˜µ      1.3. åæ ‡ç³»å®šä¹‰        2. è½´è§’æ—‹è½¬  3. å§¿æ€å››å…ƒæ•°          3.1. å››å…ƒæ•°å®šä¹‰      3.2. å››å…ƒæ•°è¡¨ç¤ºæ—‹è½¬      3.3. å§¿æ€å››å…ƒæ•°        4. å‘é‡çš„åæ ‡å˜æ¢  5. å§¿...",
    "content": "æœ¬æ–‡ä»‹ç»äº†èˆªå¤©å™¨å§¿æ€æè¿°ã€å§¿æ€å˜æ¢å’Œå§¿æ€è¿åŠ¨å­¦ä¸­æ¶‰åŠçš„å››å…ƒæ•°è¡¨ç¤ºæ³•ã€‚  1. åŸºç¡€          1.1. çŸ¢é‡çš„æ­£äº¤åˆ†è§£      1.2. å‰ä¹˜çŸ©é˜µ      1.3. åæ ‡ç³»å®šä¹‰        2. è½´è§’æ—‹è½¬  3. å§¿æ€å››å…ƒæ•°          3.1. å››å…ƒæ•°å®šä¹‰      3.2. å››å…ƒæ•°è¡¨ç¤ºæ—‹è½¬      3.3. å§¿æ€å››å…ƒæ•°        4. å‘é‡çš„åæ ‡å˜æ¢  5. å§¿æ€å˜æ¢ä¸å››å…ƒæ•°ä¹˜æ³•  6. å‚è€ƒæ–‡çŒ®1. åŸºç¡€1.1. çŸ¢é‡çš„æ­£äº¤åˆ†è§£å¯¹ä¸€ä¸ªçŸ¢é‡â€‹ $\\boldsymbol{v}$ è¿›è¡Œæ²¿å•ä½å‚è€ƒè½´ $\\boldsymbol{e}$ â€‹æ­£äº¤åˆ†è§£ä¸ºä¸¤ä¸ªåˆ†é‡ï¼Œåˆ†åˆ«ä¸ºå¹³è¡Œäº $\\boldsymbol{e}$ â€‹çš„è½´å‘åˆ†é‡å’Œå‚ç›´äº $\\boldsymbol{e}$ â€‹çš„å‚ç›´åˆ†é‡ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚æœ‰\\[\\begin{aligned}\\boldsymbol{v}_{\\parallel} &amp;= (\\boldsymbol{e}^\\top\\boldsymbol{v})\\boldsymbol{e} = \\boldsymbol{e}\\boldsymbol{e}^\\top\\boldsymbol{v}\\\\\\boldsymbol{v}_{\\perp} &amp;= \\boldsymbol{v} - \\boldsymbol{v}_{\\parallel} = (\\boldsymbol{I} - \\boldsymbol{e}\\boldsymbol{e}^\\top)\\boldsymbol{v}\\\\\\end{aligned}\\]è‹¥å¹³é¢ $\\boldsymbol{\\pi}$ çš„æ³•å‘é‡ä¸º $\\boldsymbol{e}$ï¼Œé‚£ä¹ˆçŸ¢é‡ $\\boldsymbol{v}$ åœ¨å¹³é¢ä¸Šçš„æŠ•å½±çŸ¢é‡ $\\boldsymbol{v}^\\prime$ å³ä¸º\\[\\boldsymbol{v}^\\prime = \\boldsymbol{v}_{\\perp} = (\\boldsymbol{I} - \\boldsymbol{e}\\boldsymbol{e}^\\top)\\boldsymbol{v}\\]ä»è€Œæ­£äº¤æŠ•å½±å˜åŒ–çŸ©é˜µä¸º\\[\\boldsymbol{R} = \\boldsymbol{I}-\\boldsymbol{e}\\boldsymbol{e}^\\top\\]1.2. å‰ä¹˜çŸ©é˜µè®¾ $\\boldsymbol{a} = [a_1,a_2,a_3]^\\top\\in\\mathbb{R}^3,\\; \\boldsymbol{b} = [b_1,b_2,b_3]^\\top\\in\\mathbb{R}^3$ï¼Œé‚£ä¹ˆå‘é‡ $\\boldsymbol{a}$ å‰ä¹˜å‘é‡ $\\boldsymbol{b}$ å¯è¡¨ç¤ºä¸º\\[\\boldsymbol{a}\\times\\boldsymbol{b} = \\boldsymbol{a}^\\times\\boldsymbol{b}\\]å…¶ä¸­å‰ä¹˜çŸ©é˜µæ»¡è¶³\\[\\boldsymbol{a}^\\times = \\frac{\\partial(\\boldsymbol{a}\\times\\boldsymbol{b})}{\\partial \\boldsymbol{b}} = \\begin{bmatrix}    0 &amp; -a_3 &amp; a_2\\\\    a_3 &amp; 0 &amp; -a_1\\\\    -a_2 &amp; a_1 &amp; 0\\end{bmatrix}\\]  ä¸ƒç»ä¸€é¦–ï¼Œé€Ÿæ±‚æ³•å‘é‡å‘é‡æ¨ªç€å†™ä¸¤éï¼Œæå¤´å»å°¾ç•™ä¸­é—´ï¼Œäº¤å‰ç›¸ä¹˜å†ç›¸å‡ï¼Œæ±‚å¾—å‘é‡å†åŒ–ç®€ã€‚æˆ–è€…å†™æˆè¡Œåˆ—å¼æ–¹ä¾¿è®°å¿†\\(\\left |\\begin{matrix}    i &amp; j &amp; k\\\\    a_1 &amp; a_2 &amp; a_3\\\\    b_1 &amp; b_2 &amp; b_3\\\\\\end{matrix}\\right |\\)1.3. åæ ‡ç³»å®šä¹‰åœ¨èˆªå¤©å™¨ç›¸å¯¹ä½å§¿è·Ÿè¸ªä»»åŠ¡ä¸­ï¼Œéœ€è¦æ˜ç¡®å„ä¸ªåæ ‡ç³»ï¼Œå¹¶ä»¥æ­¤æ¥æè¿°åˆšä½“çš„ä½å§¿å’Œå—åŠ›æƒ…å†µã€‚é€šå¸¸ä¼šæ¶‰åŠåˆ°ä»¥ä¸‹å‡ ä¸ªç›¸å…³åæ ‡ç³»ã€‚  åœ°å¿ƒæƒ¯æ€§åæ ‡ç³» $I$ï¼›  è¿½è¸ªèˆªå¤©å™¨æœ¬ä½“åæ ‡ç³» $B$ï¼›  ç›®æ ‡èˆªå¤©å™¨æœ¬ä½“åæ ‡ç³» $T$ï¼›  æœŸæœ›åæ ‡ç³» $D$ã€‚2. è½´è§’æ—‹è½¬  æ¬§æ‹‰(Euler)è½¬åŠ¨å®šç†ï¼šåˆšä½“ç»•å®šç‚¹çš„æœ‰é™è½¬åŠ¨å¯ä»¥åˆæˆä¸ºç»•ç»è¿‡è¯¥å®šç‚¹çš„æŸä¸€ç›´çº¿çš„ä¸€æ¬¡è½¬åŠ¨ã€‚å› æ­¤ï¼Œåˆšä½“çš„ç®€å•è½¬åŠ¨å¯ä»¥ç”±æ—‹è½¬è½´å’Œæ—‹è½¬è§’å”¯ä¸€ç¡®å®šã€‚æ—‹è½¬çŸ©é˜µâ€‹ $\\boldsymbol{R}$ å¯ä»¥ç”±æ—‹è½¬è½´å’Œæ—‹è½¬è§’å”¯ä¸€ç¡®å®šã€‚å‡è®¾ä½ç½®çŸ¢é‡â€‹ $\\boldsymbol{p}$ ç»•å®šç‚¹æ—‹è½¬åˆ°ä½ç½®çŸ¢é‡ $\\boldsymbol{p}^\\prime$ï¼Œæ—‹è½¬è½´ä¸º $\\boldsymbol{n}$ï¼Œæ—‹è½¬è§’ä¸º $\\theta$ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚å¯ä»¥è¯æ˜ï¼Œ$\\boldsymbol{R}$ å¯ç”± $\\boldsymbol{n},\\theta$ æ˜¾ç¤ºè¡¨ç¤ºã€‚ ä»å›¾ä¸­å¯ä»¥çœ‹å‡º\\[\\boldsymbol{p}^\\prime = \\vec{OQ} + \\vec{QP^\\prime}\\]å…¶ä¸­ $\\vec{OQ}$ æ˜¯ $\\boldsymbol{p}$ å¹³è¡Œäºè½´ $\\boldsymbol{n}$ çš„è½´å‘åˆ†é‡ï¼Œç”±æ­£äº¤åˆ†è§£æœ‰\\[\\begin{aligned}\\vec{OQ} &amp;= \\boldsymbol{n}\\boldsymbol{n}^\\top\\boldsymbol{p}\\\\\\vec{QP^\\prime} &amp;= (\\cos\\theta)\\vec{QP} + (\\sin\\theta)\\vec{QP^{\\prime\\prime}}\\end{aligned}\\]åˆå› ä¸º $\\vec{QP}$ æ˜¯ $\\boldsymbol{p}$ ä¸å‚ç›´äºè½´ $\\boldsymbol{n}$ çš„å‚å‘åˆ†é‡ï¼Œç”±æ­£äº¤åˆ†è§£æœ‰\\[\\vec{QP} = (\\boldsymbol{I} - \\boldsymbol{n}\\boldsymbol{n}^\\top)\\boldsymbol{p}\\]æ ¹æ®çŸ¢é‡å‰ä¹˜è¿ç®—çš„å‡ ä½•æ„ä¹‰ï¼Œæœ‰\\[\\vec{QP^{\\prime\\prime}} = \\boldsymbol{n}\\times\\boldsymbol{p} = \\boldsymbol{n}^\\times\\boldsymbol{p}\\]å¸¦å…¥å¯å¾—\\[\\vec{QP^\\prime} = \\cos{\\theta}(\\boldsymbol{I} - \\boldsymbol{n}\\boldsymbol{n}^\\top)\\boldsymbol{p}+\\sin{\\theta}\\boldsymbol{n}^\\times\\boldsymbol{p}\\]ç»¼ä¸Š\\[\\boldsymbol{p}^\\prime = \\boldsymbol{n}\\boldsymbol{n}^\\top\\boldsymbol{p}+\\cos{\\theta}(\\boldsymbol{I} - \\boldsymbol{n}\\boldsymbol{n}^\\top)\\boldsymbol{p}+\\sin{\\theta}\\boldsymbol{n}^\\times\\boldsymbol{p} = \\boldsymbol{R}\\boldsymbol{p}\\]åˆ™æ—‹è½¬çŸ©é˜µä¸º\\[\\boldsymbol{R} = \\boldsymbol{n}\\boldsymbol{n}^\\top+\\cos{\\theta}(\\boldsymbol{I} - \\boldsymbol{n}\\boldsymbol{n}^\\top)+\\sin{\\theta}\\boldsymbol{n}^\\times\\]3. å§¿æ€å››å…ƒæ•°3.1. å››å…ƒæ•°å®šä¹‰å››å…ƒæ•°ç”±Hamiltonåœ¨1843å¹´æå‡ºï¼Œå®ƒå¯ä»¥çœ‹åšæ˜¯å¤æ•°å‘ $\\mathbb{R}^4$ çš„æ¨å¹¿ã€‚ä¸€ä¸ªå››å…ƒæ•°å®šä¹‰ä¸º\\(\\mathbb{H}=\\{q:q=q_0+q_1i+q_2j+q_3k,\\; q_0,q_1,q_2,q_3\\in\\mathbb{R}\\}\\)å››å…ƒæ•°è¿˜å¯ä»¥è¡¨ç¤ºä¸º $q=(q_0,\\bar{q})$ï¼Œå…¶ä¸­ $q_0\\in\\mathbb{R}$ æ˜¯æ ‡é‡éƒ¨åˆ†ï¼Œ$\\bar{q} = [q_1, q_2, q_3]^\\top\\in\\mathbb{R}^3$ æ˜¯çŸ¢é‡éƒ¨åˆ†ã€‚å››å…ƒæ•°çš„åŸºæœ¬è¿ç®—å®šä¹‰å¦‚ä¸‹ï¼šå…±è½­ï¼š$q^* = (q_0,-\\bar{q})\\in\\mathbb{H}$èŒƒæ•°ï¼ˆçš„å¹³æ–¹ï¼‰ï¼š$\\Vert q\\Vert^2 = qq^* = q^*q=q\\cdot q=(q_0^2+\\bar{q}\\cdot \\bar{q},\\bar{0})$å½“å››å…ƒæ•°çš„èŒƒæ•°é™åˆ¶ä¸º 1 æ—¶ï¼Œå°±å«å•ä½å››å…ƒæ•°ï¼Œå³\\[\\mathbb{H}^u=\\{q\\in \\mathbb{H}: q\\cdot q=(1,0,0,0)\\}\\]3.2. å››å…ƒæ•°è¡¨ç¤ºæ—‹è½¬ä¸‰ç»´ç©ºé—´ä¸­çš„æ—‹è½¬å¯ä»¥è¢«è®¤ä¸ºæ˜¯ä¸€ä¸ªå‡½æ•° $\\phi$ ï¼Œä» $\\mathbb{R}^3$ åˆ°è‡ªèº«çš„æ˜ å°„ã€‚å‡½æ•° $\\phi$ è¦æƒ³è¡¨ç¤ºä¸€ä¸ªæ—‹è½¬ï¼Œå¿…é¡»åœ¨æ—‹è½¬è¿‡ç¨‹ä¸­ä¿æŒå‘é‡é•¿åº¦ï¼ˆlengthsï¼‰ã€å‘é‡å¤¹è§’ï¼ˆanglesï¼‰å’Œ handedness ä¸å˜ã€‚handedness å’Œå·¦å³æ‰‹åæ ‡ç³»æœ‰å…³ï¼Œä¾‹å¦‚å·¦æ‰‹åæ ‡ç³»ä¸­å‘é‡æ—‹è½¬åï¼Œä»è¦ç¬¦åˆå·¦æ‰‹åæ ‡ç³»è§„åˆ™ã€‚3.3. å§¿æ€å››å…ƒæ•°å•ä½å››å…ƒæ•°å¯ä»¥ç”¨æ¥è¡¨ç¤ºä¸¤ä¸ªåæ ‡ç³»ä¹‹é—´çš„ç›¸å¯¹å§¿æ€ï¼Œæ­¤æ—¶åˆå¯ç§°å…¶ä¸ºæ—‹è½¬å››å…ƒæ•°ã€‚è‹¥æœ¬ä½“åæ ‡ç³» $B$ ç›¸å¯¹äºæƒ¯æ€§ç³» $I$ çš„å§¿æ€ç”¨æ¬§æ‹‰æ—‹è½¬è½´è§’è¡¨ç¤ºä¸º $(\\bar{n},\\theta)$ï¼Œå³æœ¬ä½“åæ ‡ç³» $B$ ç»•ç€å•ä½è½´ $\\bar{n}$ æ—‹è½¬è§’åº¦ $\\theta$ åˆ°è¾¾æƒ¯æ€§åæ ‡ç³» $I$ã€‚é‚£ä¹ˆæœ¬ä½“åæ ‡ç³» $B$ ç›¸å¯¹äºæƒ¯æ€§åæ ‡ç³» $I$ çš„å§¿æ€å››å…ƒæ•°ä¸º\\[q_{B/I}=(cos(\\frac{\\theta}{2}),\\ sin(\\frac{\\theta}{2})\\bar{n})\\]å¦‚æœæ—‹è½¬è§’åº¦è¢«é™åˆ¶åœ¨ $-180^{\\circ}&lt; \\theta &lt; 180^{\\circ}$ï¼Œé‚£ä¹ˆå››å…ƒæ•°æ ‡é‡éƒ¨åˆ†å¯ä»¥ç”±ä¸‹å¼è®¡ç®—\\[q_0 = \\sqrt{(1-\\vert\\vert \\bar{q} \\vert\\vert ^2)}\\]æ³¨æ„ï¼Œç›¸å¯¹å§¿æ€è½´è§’è¡¨ç¤ºä¸­ï¼Œ $(-\\bar{n},-\\theta)$ å’Œ $(\\bar{n},\\theta)$ èµ·åˆ°çš„æ—‹è½¬æ•ˆæœç›¸åŒã€‚å¸¦å…¥å§¿æ€å››å…ƒæ•°å®šä¹‰å¼ï¼Œå¯ä»¥å¾—åˆ°æƒ¯æ€§ç³»ç›¸å¯¹äºæœ¬ä½“ç³»çš„å§¿æ€å››å…ƒæ•°\\[q_{I/B} = q_{B/I}^*\\]å³å§¿æ€å››å…ƒæ•°ï¼ˆå•ä½å››å…ƒæ•°ï¼‰æœ¬èº«ä¸å…¶å…±è½­å››å…ƒæ•°äº’ä¸ºé€†å˜æ¢ã€‚4. å‘é‡çš„åæ ‡å˜æ¢ã€å®šç†1ã€‘å‡è®¾åæ ‡ç³» $Y$ ç›¸å¯¹äºåæ ‡ç³» $X$ çš„å§¿æ€å››å…ƒæ•°ä¸º $q_{Y/X}$ï¼ŒçŸ¢é‡ $\\bar{v}$ å†ä¸¤ä¸ªåæ ‡ç³»å†…çš„è¡¨ç¤ºåˆ†åˆ«ä¸º $\\bar{v}^Y$ å’Œ $\\bar{v}^X$ï¼Œåˆ™æœ‰å¦‚ä¸‹è½¬æ¢å…³ç³»æˆç«‹\\[v^Y = q^*_{Y/X}\\cdot v^X \\cdot q_{Y/X},\\quad v^X = q^*_{X/Y}\\cdot v^Y \\cdot q_{X/Y}\\]å…¶ä¸­ $v^Y = [0,\\bar{v}^Y],\\ v^X = [0,\\bar{v}^X]$ã€‚ä¸Šå¼ç­‰ä»·ä¸º\\[v^Y = R_X^Y\\cdot v^X,\\quad v^X = R_Y^X\\cdot v^Y\\]å…¶ä¸­ï¼Œåæ ‡ç³» $Y$ åˆ°åæ ‡ç³» $X$ çš„åæ ‡æ—‹è½¬çŸ©é˜µä¸º\\[R_Y^X = \\bar{n}\\bar{n}^\\top+\\cos\\theta(I_3-\\bar{n}\\bar{n}^\\top)+\\sin\\theta \\bar{n}^{\\times}\\]5. å§¿æ€å˜æ¢ä¸å››å…ƒæ•°ä¹˜æ³•å‡è®¾åæ ‡ç³» $A$ ç›¸å¯¹äºåæ ‡ç³» $B$ çš„å››å…ƒæ•°ä¸º $q_{A/B}$ï¼Œåæ ‡ç³» $B$ ç›¸å¯¹äºåæ ‡ç³» $C$ çš„å››å…ƒæ•°ä¸º $q_{B/C}$ï¼Œé‚£ä¹ˆåæ ‡ç³» $A$ ç›¸å¯¹äºåæ ‡ç³» $C$ çš„å››å…ƒæ•°ä¸º\\[q_{A/C} = q_{A/B} \\otimes q_{B/C}\\]6. å‚è€ƒæ–‡çŒ®[1] çš®çš®å¤. ã€çŸ¥ä¹ã€‘åˆšä½“çš„è½¬åŠ¨å’Œæ—‹è½¬å˜æ¢[2] çš®çš®å¤. ã€çŸ¥ä¹ã€‘å››å…ƒæ•°ä»£æ•°ä»¥åŠå§¿æ€åŠ¨åŠ›å­¦å»ºæ¨¡[3] lxycg. ã€çŸ¥ä¹ã€‘å››å…ƒæ•°å’Œæ—‹è½¬(Quaternion &amp; rotation)"
  },
  
  {
    "title": "ä½¿ç”¨CMakeå¼€å‘C++å·¥ç¨‹",
    "url": "/posts/c-cmake-development/",
    "categories": "Tutorial, Coding",
    "tags": "vscode, c/c++, cmake, cpack, mingw64",
    "date": "2023-05-15 23:59:19 +0800",
    





    
    "snippet": "æœ¬æ–‡ä»‹ç»äº†ä½¿ç”¨ CMakeï¼ˆCPackï¼‰ å’Œ NSIS æ„å»ºå¹¶æ‰“åŒ… C/C++ å·¥ç¨‹é¡¹ç›®çš„åŸºæœ¬æµç¨‹å’Œæ–¹æ³•ï¼Œæ ¸å¿ƒåœ¨äº CMakeLists.txt æ–‡ä»¶çš„ç¼–å†™ã€‚  1. å¼•è¨€          1.1. ä¼ ç»Ÿç¼–è¯‘      1.2. Make ç¼–è¯‘      1.3. CMake ç¼–è¯‘        2. å®‰è£… CMake  3. ç¼–å†™ CMakeLists.txt          3.1....",
    "content": "æœ¬æ–‡ä»‹ç»äº†ä½¿ç”¨ CMakeï¼ˆCPackï¼‰ å’Œ NSIS æ„å»ºå¹¶æ‰“åŒ… C/C++ å·¥ç¨‹é¡¹ç›®çš„åŸºæœ¬æµç¨‹å’Œæ–¹æ³•ï¼Œæ ¸å¿ƒåœ¨äº CMakeLists.txt æ–‡ä»¶çš„ç¼–å†™ã€‚  1. å¼•è¨€          1.1. ä¼ ç»Ÿç¼–è¯‘      1.2. Make ç¼–è¯‘      1.3. CMake ç¼–è¯‘        2. å®‰è£… CMake  3. ç¼–å†™ CMakeLists.txt          3.1. ç‰ˆæœ¬ä¸ç¼–è¯‘é€‰é¡¹é…ç½®      3.2. å¯æ‰§è¡Œç¨‹åºé…ç½®      3.3. å¤´æ–‡ä»¶æœç´¢      3.4. æºæ–‡ä»¶æœç´¢      3.5. å­é¡¹ç›®ï¼ˆWIPï¼‰      3.6. othersï¼ˆWIPï¼‰      3.7. ç”Ÿæˆï¼ˆGenerateï¼‰      3.8. æ„å»ºï¼ˆBuildï¼‰      3.9. è¿è¡Œå’Œè°ƒè¯•ï¼ˆDebugï¼‰        4. åŸºäº CMake çš„æ‰“åŒ…          4.1. CPack      4.2. NSIS      4.3. åŸºäº CPack å’Œ NSIS çš„æ‰“åŒ…        5. å‚è€ƒæ–‡çŒ®1. å¼•è¨€å‡å¦‚æˆ‘ä»¬æœ‰ä¸€ä¸ªå¤§å‹çš„ C++ é¡¹ç›®ï¼Œç”±éå¸¸å¤šçš„äº’ç›¸è°ƒç”¨çš„å·¥ç¨‹å…±åŒç»„æˆï¼Œä¸€äº›ç”¨äºç”Ÿæˆåº“æ–‡ä»¶ï¼Œä¸€äº›ç”¨äºå®ç°é€»è¾‘åŠŸèƒ½ã€‚ä»–ä»¬ä¹‹é—´çš„è°ƒç”¨å…³ç³»å¤æ‚è€Œä¸¥æ ¼ï¼Œå¦‚æœæƒ³åœ¨è¿™æ ·å¤æ‚çš„æ¡†æ¶ä¸‹è¿›è¡ŒäºŒæ¬¡å¼€å‘ï¼Œæ˜¾ç„¶åªæ‹¥æœ‰å®ƒçš„æºç æ˜¯è¿œè¿œä¸å¤Ÿçš„ï¼Œè¿˜éœ€è¦æ¸…æ¥šçš„æ˜ç™½è¿™å‡ åä¸ªé¡¹ç›®ä¹‹é—´çš„å¤æ‚å…³ç³»ã€‚å³ä½¿æ˜¯åŸä½œè€…ç»™å‡ºäº†ç›¸å…³çš„ç»“æ„æ–‡æ¡£ï¼Œå¯¹æ–°æ‰‹æ¥è¯´å»ºç«‹å·¥ç¨‹çš„è¿‡ç¨‹ä¾æ—§æ˜¯æ¼«é•¿è€Œè‰°è¾›çš„ï¼Œå¼€å‘äººå‘˜çš„æ ¸å¿ƒä¸šåŠ¡æ˜¯è½¯ä»¶å¼€å‘ï¼Œè€Œä¸æ˜¯è½¯ä»¶æ„å»ºã€‚Cmakeç›®çš„æ˜¯å®ç°è½¯ä»¶æ„å»ºæµç¨‹çš„è‡ªåŠ¨åŒ–ï¼Œå¹¶ä¸”æ˜¯è·¨å¹³å°çš„ã€‚åŸä½œè€…åªéœ€è¦ç”Ÿæˆä¸€ä»½ CMakeLists.txt æ–‡æ¡£ï¼Œæ¡†æ¶çš„ä½¿ç”¨è€…ä»¬åªéœ€è¦åœ¨ä¸‹è½½æºç çš„åŒæ—¶ä¸‹è½½ä½œè€…æä¾›çš„ CMakeLists.txtï¼Œå°±å¯ä»¥åˆ©ç”¨ CMakeï¼Œåœ¨åŸä½œè€…çš„å¸®åŠ©ä¸‹è¿›è¡Œå·¥ç¨‹çš„æ­å»ºã€‚Cmake ç¼–ç¨‹çš„è¿‡ç¨‹å®é™…ä¸Šæ˜¯ç¼–å†™ CMakeLists.txtçš„è¿‡ç¨‹ï¼Œä½¿ç”¨çš„æ˜¯ â€œCmakeâ€ è¯­è¨€å’Œè¯­æ³•ã€‚1.1. ä¼ ç»Ÿç¼–è¯‘å°†ä¸€ä¸ªC++é¡¹ç›®ä»æºæ–‡ä»¶ç¼–è¯‘å¾—åˆ°å¯æ‰§è¡Œç¨‹åºæ–‡ä»¶ï¼Œéœ€è¦ä½¿ç”¨C/C++ç¼–è¯‘å™¨ã€‚è¾ƒå¹¿æ³›ä½¿ç”¨çš„æ˜¯ GCCï¼ˆGNU Compiler Collectionï¼ŒGNUç¼–è¯‘å™¨å¥—ä»¶ï¼‰ï¼Œå®ƒå¯ä»¥ç¼–è¯‘å¾ˆå¤šç§ç¼–ç¨‹è¯­è¨€(åŒ…æ‹¬Cã€C++ã€Objective-Cã€Fortranã€Javaç­‰ç­‰)ã€‚GCC ç¼–è¯‘çš„æ ¸å¿ƒæ˜¯ gcc å‘½ä»¤ã€‚å¯¹äºæºæ–‡ä»¶æ•°é‡è¾ƒå°‘ä¸”è·¯å¾„å•ä¸€çš„æƒ…å†µï¼Œå¯ä»¥ç›´æ¥åœ¨ç»ˆç«¯è¾“å…¥ç¼–è¯‘å‘½ä»¤è¿›è¡Œç¼–è¯‘ï¼Œç¤ºæ„å¦‚ä¸‹ï¼šg++ -c demo.cpp -I /aaa/bbb/ -o demo.exe1.2. Make ç¼–è¯‘å½“æºæ–‡ä»¶è¶Šæ¥è¶Šå¤šæ—¶ï¼Œè°ƒç”¨ gcc/g++ å‘½ä»¤é€ä¸ªå»ç¼–è¯‘æ—¶ï¼Œå°±å¾ˆå®¹æ˜“æ··ä¹±è€Œä¸”å·¥ä½œé‡å¤§ã€‚ç‰¹åˆ«åœ°ï¼Œå½“åªæ”¹åŠ¨å·¥ç¨‹é¡¹ç›®ä¸­çš„æŸä¸€äº›æºç¨‹åºæ–‡ä»¶æ—¶ï¼Œå•çº¯ä½¿ç”¨å‘½ä»¤ç¼–è¯‘ä¼šæŠŠæ‰€æœ‰æºç¨‹åºæ–‡ä»¶é‡æ–°ç¼–è¯‘ä¸€éï¼Œè€Œé€æ–‡ä»¶ç¼–è¯‘ä¸º .o æ–‡ä»¶å†æ‰‹åŠ¨ç¡®å®šæ˜¯å¦éœ€è¦æ›´æ–°å’Œç¼–è¯‘å·¥ä½œé‡å·¨å¤§ã€‚ä¸ºäº†ç®€åŒ–ç¼–è¯‘æ“ä½œï¼ŒGNU æ¨å‡ºäº† Make å·¥å…·ã€‚å®ƒæ˜¯ä¸€ä¸ªè‡ªåŠ¨åŒ–ç¼–è¯‘å·¥å…·ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸€æ¡å‘½ä»¤å®ç°å®Œå…¨ç¼–è¯‘ï¼Œä½†æ˜¯éœ€è¦ç¼–å†™ä¸€ä¸ªè§„åˆ™æ–‡ä»¶ï¼ŒMake å·¥å…·ä¾æ®å®ƒæ¥æ‰¹é‡å¤„ç†ç¼–è¯‘ï¼Œè¿™ä¸ªæ–‡ä»¶å°±æ˜¯ Makefile æ–‡ä»¶ã€‚ä¸€ä¸ªå…¸å‹çš„ Makefile æ–‡ä»¶å¦‚ä¸‹a.out: hello.o main.o    g++ hello.o main.o -o a.outhello.o: hello.cpp    g++ -c hello.cpp -o hello.omain.o: main.cpp    g++ -c main.cpp -o main.oMakefile æ–‡ä»¶è§„å®šäº†æ¯ä¸ªæ–‡ä»¶çš„ä¾èµ–å…³ç³»å’Œç”Ÿæˆå„æ–‡ä»¶çš„è§„åˆ™ã€‚è¿™æ ·ï¼Œå½“æŸä¸ªæ–‡ä»¶çš„æ‰€æœ‰ä¾èµ–å¹¶æ²¡æœ‰å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå³å¯ä¸ç”¨é‡æ–°ç¼–è¯‘è¯¥æ–‡ä»¶ï¼Œè€Œæ˜¯ç›´æ¥åˆ©ç”¨ä¹‹å‰ç¼–è¯‘å¥½å¾—åˆ°çš„ .o æ–‡ä»¶å³å¯ã€‚Makefile å¸¦æ¥çš„å¥½å¤„å°±æ˜¯â€”â€”â€œè‡ªåŠ¨åŒ–ç¼–è¯‘â€ï¼Œä¸€æ—¦å†™å¥½ï¼Œåªéœ€è¦ä¸€ä¸ª make å‘½ä»¤ï¼Œæ•´ä¸ªå·¥ç¨‹å®Œå…¨è‡ªåŠ¨ç¼–è¯‘ï¼Œæå¤§çš„æé«˜äº†è½¯ä»¶å¼€å‘çš„æ•ˆç‡ã€‚make æ˜¯ä¸€ä¸ªå‘½ä»¤å·¥å…·ï¼Œæ˜¯ä¸€ä¸ªè§£é‡Š Makefile ä¸­æŒ‡ä»¤çš„å‘½ä»¤å·¥å…·ï¼Œä¸€èˆ¬æ¥è¯´ï¼Œå¤§å¤šæ•°çš„ IDE éƒ½æœ‰è¿™ä¸ªå‘½ä»¤ï¼Œæ¯”å¦‚ï¼šDelphi çš„ makeï¼ŒVisual C++ çš„ nmakeï¼ŒLinux ä¸‹ GNU çš„ Makefile éƒ½æˆä¸ºäº†ä¸€ç§åœ¨å·¥ç¨‹æ–¹é¢çš„ç¼–è¯‘æ–¹æ³•ã€‚Makefile åœ¨ä¸€äº›ç®€å•çš„å·¥ç¨‹å®Œå…¨å¯ä»¥äººå·¥æ‰‹å†™ï¼Œä½†æ˜¯å½“å·¥ç¨‹éå¸¸å¤§çš„æ—¶å€™ï¼Œæ‰‹å†™ Makefile ä¹Ÿæ˜¯éå¸¸éº»çƒ¦çš„ï¼Œå¦‚æœæ¢äº†ä¸ªå¹³å° Makefile åˆè¦é‡æ–°ä¿®æ”¹ã€‚å¦ä¸€æ–¹é¢ï¼Œè‹¥æƒ³è¦æ›´æ¢å¼€å‘ç¯å¢ƒï¼Œå¦‚éœ€è¦å°†å·¥ç¨‹è¿ç§»åˆ° Visual Studio IDE è¿›è¡Œå¼€å‘ï¼Œéœ€è¦æ„å»ºåŸºäº VS çš„é¡¹ç›®æ¡†æ¶ï¼Œç”Ÿæˆ .sln å’Œ .vcproj æ–‡ä»¶ï¼Œæ­¤æ—¶ Makefile å°±æ— èƒ½ä¸ºåŠ›äº†ã€‚  .sln æ–‡ä»¶ï¼ˆè§£å†³æ–¹æ¡ˆæ–‡ä»¶ï¼‰ æ˜¯ Visual Studio çš„è§£å†³æ–¹æ¡ˆæ–‡ä»¶ï¼Œç”¨äºç»„ç»‡å’Œç®¡ç†ä¸€ä¸ªæˆ–å¤šä¸ªé¡¹ç›®ã€‚å®ƒå¯ä»¥åŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªé¡¹ç›®ï¼Œä»¥åŠè¿™äº›é¡¹ç›®ä¹‹é—´çš„å…³ç³»å’Œé…ç½®ä¿¡æ¯ã€‚ä¸€ä¸ª .sln æ–‡ä»¶æœ¬èº«å¹¶ä¸åŒ…å«ä»»ä½•ä»£ç æˆ–æ–‡ä»¶ï¼Œå®ƒåªæ˜¯åŒ…å«å¼•ç”¨åˆ°è¯¥è§£å†³æ–¹æ¡ˆä¸­æ‰€æœ‰é¡¹ç›®çš„ä¿¡æ¯å’Œè®¾ç½®ã€‚.sln æ–‡ä»¶å¯ä»¥å­˜å‚¨åœ¨ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿä¸­ï¼Œä»¥ä¾¿å¤šä¸ªå¼€å‘äººå‘˜å…±äº«å’Œåä½œã€‚.vcxproj æ–‡ä»¶ï¼ˆé¡¹ç›®æ–‡ä»¶ï¼‰ æ˜¯ Visual C++ é¡¹ç›®æ–‡ä»¶ï¼ŒåŒ…å«é¡¹ç›®çš„è®¾ç½®å’Œé…ç½®ä¿¡æ¯ï¼Œä¾‹å¦‚ç¼–è¯‘å™¨é€‰é¡¹ã€é¢„å¤„ç†å™¨é€‰é¡¹ã€æ–‡ä»¶åˆ—è¡¨å’Œåº“ä¾èµ–é¡¹ç­‰ã€‚å®ƒé€šå¸¸æ˜¯éšç€æ¯ä¸ªé¡¹ç›®çš„åˆ›å»ºè€Œç”Ÿæˆçš„ï¼Œå¹¶å­˜å‚¨åœ¨é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹ã€‚æ¯ä¸ªé¡¹ç›®éƒ½æœ‰ä¸€ä¸ªå•ç‹¬çš„ .vcxproj æ–‡ä»¶ï¼Œè€Œè§£å†³æ–¹æ¡ˆåªåŒ…å«å¯¹æ¯ä¸ªé¡¹ç›®çš„å¼•ç”¨ã€‚Makefile çš„å±€é™æ€§è¿˜åŒ…æ‹¬ï¼š  make åœ¨ UNIX ç±»ç³»ç»Ÿä¸Šæ˜¯é€šç”¨çš„ï¼Œä½†æ˜¯ Windows ä¸æ”¯æŒï¼›  éœ€è¦å‡†ç¡®æŒ‡å‡ºæ¯ä¸ªé¡¹ç›®ä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼Œæœ‰å¤´æ–‡ä»¶æ—¶ç‰¹åˆ«å¤´ç–¼ï¼›  make è¯­æ³•éå¸¸ç®€å•ï¼Œæ— æ³•å®ç° shell æˆ– python é‚£æ ·åšå¾ˆå¤šåˆ¤æ–­ç­‰ï¼›  ä¸åŒç¼–è¯‘å™¨æœ‰ä¸åŒçš„ flag è§„åˆ™ï¼Œä¸º g++ å‡†å¤‡çš„å‚æ•°å¯èƒ½å¯¹ msvc å¹¶ä¸é€‚ç”¨ã€‚1.3. CMake ç¼–è¯‘ä¸ºäº†è§£å†³ make çš„é—®é¢˜ï¼Œå‡ºç°äº† CMake è¿™ä¸ªè·¨å¹³å°å·¥å…·ã€‚CMake èƒ½å¤Ÿè¾“å‡ºå„ç§å„æ ·çš„ Makefile æˆ–è€… project æ–‡ä»¶ï¼Œä»è€Œå¸®åŠ©ç¨‹åºå‘˜å‡è½»è´Ÿæ‹…ã€‚CMake é€šè¿‡ç¼–å†™ CMakeLists.txt æ–‡ä»¶ï¼Œå®ç°è·¨å¹³å°ç”Ÿæˆå¯¹åº”èƒ½ç”¨çš„ Makefile æˆ–å·¥ç¨‹æ–‡ä»¶ï¼Œæˆ‘ä»¬ä¸éœ€è¦è‡ªå·±å†å»ä¿®æ”¹ã€‚CMakeLists.txt æ˜¯ä¸€ç§å¹³å°æ— å…³çš„æ–‡ä»¶ï¼Œç”¨æ¥å®šåˆ¶æ•´ä¸ªç¼–è¯‘æµç¨‹ï¼Œç„¶åå†æ ¹æ®ç›®æ ‡ç”¨æˆ·çš„å¹³å°è¿›ä¸€æ­¥ç”Ÿæˆæ‰€éœ€çš„æœ¬åœ°åŒ– Makefile å’Œå·¥ç¨‹æ–‡ä»¶ï¼Œå¦‚ Unix çš„ Makefile æˆ– Windows çš„ Visual Studio å·¥ç¨‹ã€‚ä»è€Œåšåˆ° â€œWrite once, run everywhereâ€ã€‚ä¸€äº›ä½¿ç”¨ CMake ä½œä¸ºé¡¹ç›®æ¶æ„ç³»ç»Ÿçš„çŸ¥åå¼€æºé¡¹ç›®æœ‰ VTKã€ITKã€KDEã€OpenCVã€OSG ç­‰ã€‚2. å®‰è£… CMakeå‰æï¼Œå·²ç»å®‰è£…æœ‰è‡³å°‘ä¸€ä¸ªC/C++ç¼–è¯‘å™¨ï¼Œå¦‚ MinGW-W64ã€‚å¯ä»¥é€šè¿‡gcc --version æŸ¥çœ‹ç‰ˆæœ¬æ¥ç¡®è®¤å®‰è£…æ˜¯å¦æˆåŠŸã€‚åœ¨ Windows ç¯å¢ƒä¸‹ï¼ŒCMake å¯ä»¥åœ¨å®˜ç½‘ï¼ˆhttps://cmake.orgï¼‰ä¸‹è½½ï¼Œå®‰è£…ååŒ…æ‹¬ä¸€ä¸ªæ§åˆ¶å°ç¨‹åºå’Œä¸€ä¸ª GUI ç¨‹åºã€‚å¯ä»¥é€šè¿‡ cmake --version æ£€æŸ¥å®‰è£…æƒ…å†µå’Œç‰ˆæœ¬æƒ…å†µã€‚åœ¨ VScode ä¸­ï¼Œéœ€è¦å®‰è£…ä»¥ä¸‹ä¸¤ä¸ªæ’ä»¶ï¼š  CMake  CMake Toolsåœ¨ Cmake Tools æ’ä»¶è®¾ç½®ä¸­å°† Cmake çš„ make.exe å¯æ‰§è¡Œç¨‹åºå®Œæ•´è·¯å¾„è®¾ç½®åˆ° cmake.cmakePathã€‚åŒæ—¶å°† make.exe æ‰€åœ¨çš„è·¯å¾„æ·»åŠ åˆ°ç³»ç»Ÿçš„ç¯å¢ƒå˜é‡ä¸­ï¼ˆå› ä¸ºåç»­ç”¨ cpack.exe æ‰“åŒ…æ—¶å€™ä¹Ÿè¦æ‰¾è·¯å¾„ï¼‰ã€‚ä½¿ç”¨ CMake æ’ä»¶åˆ›å»º CMakeLists.txt æ–‡ä»¶ï¼ˆæ–‡ä»¶åä¸€ä¸ªå­—éƒ½ä¸èƒ½é”™ï¼‰ã€‚ä¸¤ç§åˆ›å»ºæ–¹å¼ï¼š      æ‰‹åŠ¨åˆ›å»ºï¼Œç›´æ¥åœ¨å·¥ç¨‹é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ª CMakeLists.txt æ–‡ä»¶ï¼›        è‡ªåŠ¨åˆ›å»ºï¼Œåœ¨ VSCode ä¸­æ‰“å¼€å·¥ç¨‹é¡¹ç›®æ–‡ä»¶å¤¹ï¼Œè¾“å…¥å¿«æ·é”®ç»„åˆ Ctrl + Shift + P ç„¶åè¾“å…¥ cmake quick start è¿›è¡Œå¿«é€Ÿè®¾ç½®ã€‚é¦–æ¬¡è®¾ç½®ä¼šå¼¹å‡º Select a Kit éœ€è¦é€‰æ‹©ä¸€ä¸ªç¼–è¯‘å™¨ï¼Œè‹¥æ­£ç¡®å®‰è£… MinGW-W64 å¹¶æ·»åŠ äº†ç¯å¢ƒå˜é‡ï¼Œä¸€èˆ¬ä¼šè‡ªåŠ¨æ£€ç´¢åˆ°ç±»ä¼¼ GCC XX.X.X x86-64-w64-mingw32 çš„ç¼–è¯‘å™¨ï¼Œæ³¨æ„æ£€æŸ¥åé¢çš„è·¯å¾„æ˜¯å¦æ­£ç¡®ï¼Œç„¶åé€‰æ‹©å³å¯ã€‚é€‰æ‹©åå³ä¼šåœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹è‡ªåŠ¨åˆ›å»ºCMakeLists.txt æ–‡ä»¶ã€‚  3. ç¼–å†™ CMakeLists.txtä¸€ä¸ª CMakeLists.txt æ–‡ä»¶æœ‰è‡ªå·±çš„æ ¼å¼å’Œå‘½ä»¤ï¼Œä¸‹é¢ä»¥åŸºæœ¬çš„ CMakeLists.txt ä¸ºä¾‹ï¼ŒæŒ‰ç…§æ–‡ä»¶å†…ä»ä¸Šåˆ°ä¸‹çš„é¡ºåºé€ä¸€ä»‹ç»ã€‚3.1. ç‰ˆæœ¬ä¸ç¼–è¯‘é€‰é¡¹é…ç½®# æŒ‡å®š cmake çš„æœ€ä½ç‰ˆæœ¬cmake_minimum_required(VERSION 3.10)# è®¾ç½® cmake çš„ C ç‰ˆæœ¬ä¸º C99set(CMAKE_C_STANDARD 99)# è®¾ç½® cmake çš„ C++ ç‰ˆæœ¬ä¸º C++11set(CMAKE_CXX_STANDARD 11)# è¦æ±‚å¼ºåˆ¶æ‰§è¡ŒC++ç‰ˆæœ¬æ£€æŸ¥ï¼Œè‹¥ä¸ç¬¦åˆåˆ™æŠ¥é”™set(CMAKE_CXX_STANDARD_REQUIRED True)# è®¾ç½® cmake é»˜è®¤ç¼–è¯‘é€‰é¡¹ä¸º Releaseset(CMAKE_BUILD_TYPE \"Release\" CACHE STRING \"\" FORCE)# åœ¨æ§åˆ¶å°æ‰“å°ç¼–è¯‘é€‰é¡¹message(STATUS \"[INFO] Set to ${CMAKE_BUILD_TYPE} build.\")åœ¨ CMakeLists.txt æ–‡ä»¶ä¸­ï¼š  é‡‡ç”¨ set(å˜é‡ æ–‡ä»¶å/è·¯å¾„/...) å‡½æ•°ç»™æ–‡ä»¶å/è·¯å¾„åæˆ–å…¶ä»–å­—ç¬¦ä¸²èµ·åˆ«åï¼Œç”¨ ${å˜é‡} è·å–å˜é‡å†…å®¹ï¼›  é‡‡ç”¨ ${xxx} æ¥å–å˜é‡çš„å€¼ï¼›3.2. å¯æ‰§è¡Œç¨‹åºé…ç½®ä¸€ä¸ªå¤§å‹ C++ é¡¹ç›®ä¸€èˆ¬åŒ…æ‹¬å¤šä¸ªå­é¡¹ç›®è·¯å¾„ï¼Œåˆ†åˆ«å®ç°è¾ƒä¸ºç‹¬ç«‹çš„ä¸åŒåŠŸèƒ½ï¼Œå‡è®¾é¡¹ç›®è·¯å¾„ä¸º//testæ–‡ä»¶å¤¹|--3rdpaty    |--glm        |--rotate.h|--include    |--a.h    |--b.h|--path1    |--add.cpp    |--add.h    |--CMakeLists.txt // path1|--function.h|--function.cpp|--main.cpp|--CMakeLists.txt // mainæ ¹ç›®å½•ä¸‹å­˜åœ¨ main.cpp å’Œ function.cpp/.hï¼Œå‡è®¾ä»–ä»¬å¯ä»¥å®Œæ•´ç¼–è¯‘ä¸ºå¯æ‰§è¡Œç¨‹åºï¼Œä½†éœ€è¦ä¾èµ– include æ–‡ä»¶å¤¹ä¸­çš„å¤´æ–‡ä»¶å’Œ 3rdparty æ–‡ä»¶å¤¹ä¸­çš„å¤´æ–‡ä»¶ï¼Œé‚£ä¹ˆåœ¨ CMakeLists.txt(main) ä¸­å†…å®¹å¯å†™ä¸º# æŒ‡å®šé¡¹ç›®åç§°ä¸º testproject(test)# ç¼–è¯‘å¯æ‰§è¡Œç¨‹åº(test)ï¼Œä»¥åŠç”Ÿæˆè¯¥ç¨‹åºéœ€è¦çš„æºæ–‡ä»¶add_executable(test function.cpp main.cpp    function.h include/a.h include/b.h 3rdparty/glm/rotate.h)æŒ‡å®šäº†é¡¹ç›®ååï¼Œåé¢å¯èƒ½ä¼šæœ‰å¤šä¸ªåœ°æ–¹ç”¨åˆ°è¿™ä¸ªé¡¹ç›®åï¼Œå¦‚æœæ›´æ”¹äº†è¿™ä¸ªåå­—ï¼Œå°±è¦æ”¹å¤šä¸ªåœ°æ–¹ï¼Œæ¯”è¾ƒéº»çƒ¦ï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨ PROJECT_NAME æ¥è¡¨ç¤ºé¡¹ç›®åã€‚å³add_executable(${PROJECT_NAME} function.cpp main.cpp    function.h include/a.h include/b.h 3rdparty/glm/rotate.h)è‡³æ­¤ï¼Œå°±å¯ä»¥æ„å»ºå’Œè¿è¡Œé¡¹ç›®äº†ï¼Œå³å…ˆè¿è¡Œ cmake å‘½ä»¤æ¥æ„å»ºé¡¹ç›®ï¼Œç„¶åä½¿ç”¨ç¼–è¯‘å·¥å…·è¿›è¡Œç¼–è¯‘ã€‚ä»¥ Windows å¹³å°æ§åˆ¶å°ä¸ºä¾‹ï¼Œè¾“å…¥ä»¥ä¸‹å‘½ä»¤å³å¯å®Œæˆæ„å»ºã€‚mkdir buildcd buildcmake -G\"MinGW Makefiles\" ..cmake --build .å…¶ä¸­ï¼Œ  ç¬¬ä¸€è¡Œå‘½ä»¤ï¼šæ‰‹åŠ¨åˆ›å»ºäº† build æ–‡ä»¶å¤¹ï¼›  ç¬¬äºŒè¡Œå‘½ä»¤ï¼šå‰å¾€ build ç›®å½•ä¸‹ï¼›  ç¬¬ä¸‰è¡Œå‘½ä»¤ï¼šè¿›è¡Œå·¥ç¨‹é¡¹ç›®çš„æ„å»ºã€‚          Windows ä¸‹ï¼ŒCMake é»˜è®¤ä½¿ç”¨å¾®è½¯çš„ MSVC ä½œä¸ºç¼–è¯‘å™¨ï¼Œè‹¥æƒ³ä½¿ç”¨ MinGW ç¼–è¯‘å™¨ï¼Œå¯ä»¥é€šè¿‡ -G å‚æ•°æ¥è¿›è¡ŒæŒ‡å®šï¼Œåªæœ‰ç¬¬ä¸€æ¬¡æ„å»ºé¡¹ç›®æ—¶éœ€è¦æŒ‡å®šï¼›      æ„å»ºç³»ç»Ÿéœ€è¦æŒ‡å®šé¡¹ç›® CMakeLists.txtï¼ˆmainï¼‰æ‰€åœ¨è·¯å¾„ï¼Œæ‰€ä»¥ç”¨ .. è¡¨ç¤º CMakeLists.txt åœ¨ä¸Šä¸€çº§ç›®å½•ï¼ˆå› ä¸ºç¬¬äºŒè¡Œå‘½ä»¤å·²ç»è¿›å…¥äº† build ç›®å½•ï¼‰ã€‚        ç¬¬å››è¡Œå‘½ä»¤ï¼šåœ¨ build ç›®å½•ä¸‹ä¼šç”Ÿæˆ Makefile æ–‡ä»¶ï¼Œæœ€åè°ƒç”¨ç¼–è¯‘å™¨æ¥å®é™…ç¼–è¯‘å’Œé“¾æ¥é¡¹ç›®ã€‚          --build æŒ‡å®šç¼–è¯‘ç”Ÿæˆçš„æ–‡ä»¶å­˜æ”¾ç›®å½•ï¼Œå…¶ä¸­å°±åŒ…æ‹¬å¯æ‰§è¡Œæ–‡ä»¶ï¼›      . è¡¨ç¤ºå­˜æ”¾ç›®å½•ä¸ºå½“å‰ç›®å½•ã€‚å¦‚æœä¸€åˆ‡é¡ºåˆ©ï¼Œåœ¨ build ç›®å½•ä¸‹ä¼šç”Ÿæˆ test.exe å¯æ‰§è¡Œæ–‡ä»¶ã€‚      3.3. å¤´æ–‡ä»¶æœç´¢ä¸ºäº†é¿å…ç¹ççš„å¤´æ–‡ä»¶åˆ—å†™è¿‡ç¨‹ï¼Œæˆ‘ä»¬å¯ä»¥ add_executable() åï¼ŒæŒ‡å®šå…¶å¤´æ–‡ä»¶æœç´¢è·¯å¾„add_executable(${PROJECT_NAME} function.cpp main.cpp)# æ·»åŠ å½“å‰æ ¹ç›®å½•ä¸ºå¤´æ–‡ä»¶æœç´¢è·¯å¾„target_include_directories(${PROJECT_NAME} PRIVATE .)# æ·»åŠ  include ç›®å½•ä¸ºå¤´æ–‡ä»¶æœç´¢è·¯å¾„target_include_directories(${PROJECT_NAME} PRIVATE include)# æ·»åŠ  include/glm ç›®å½•ä¸ºå¤´æ–‡ä»¶æœç´¢è·¯å¾„target_include_directories(${PROJECT_NAME} PRIVATE 3rdparty/glm)PRIVATE è¡¨ç¤ºéšå¼åŒ…å«ï¼Œæ­¤æ—¶åé¢ç»™å‡ºçš„å¤´æ–‡ä»¶æœç´¢è·¯å¾„åªèƒ½è¢«å½“å‰ ${PROJECT_NAME} æ‰€ä½¿ç”¨ã€‚å¦‚æœé€‰æ‹© PUBLIC åˆ™åç»­å…¶ä»–å¯æ‰§è¡Œç¨‹åºç­‰ä¹Ÿéƒ½å¯ä»¥ä½¿ç”¨ã€‚ä¸ºäº†ä¿è¯é«˜å†…èšä½è€¦åˆçš„ç‰¹ç‚¹ï¼Œå»ºè®®å°½é‡ä½¿ç”¨ PRIVATEã€‚å¯ä»¥çœ‹å‡ºï¼Œä¸ºäº†åŒ…å«å¤´æ–‡ä»¶æœç´¢è·¯å¾„ï¼Œæˆ‘ä»¬éœ€è¦å†™å¾ˆå¤šæ¬¡é‡å¤è¯­å¥ï¼Œå…¶å®ä¹Ÿå¯ä»¥ä¸€æ¡è¯­å¥é‡Œé¢åŒ…å«è‹¥å¹²ä¸ªè·¯å¾„ã€‚ä¸ºäº†ç®€åŒ–å¤´æ–‡ä»¶æœç´¢è·¯å¾„å®šä¹‰ï¼Œæˆ‘ä»¬å¯ä»¥é‡‡ç”¨å¦‚ä¸‹ä¸¤ç§æ–¹å¼      ï¼ˆ1ï¼‰è‡ªåŠ¨å¯¼å‡ºå¤´æ–‡ä»¶è·¯å¾„åˆ—è¡¨    add_executable(${PROJECT_NAME} function.cpp main.cpp)# ä»æ ¹ç›®å½•ä¸‹å¼€å§‹éå†å¯»æ‰¾æ‰€æœ‰å¤´æ–‡ä»¶ï¼Œå­˜åˆ° all_h åˆ—è¡¨file(GLOB_RECURSE all_h ./*.h)foreach(HEADER ${all_h})# å¯¹äºæ¯ä¸€ä¸ªå¤´æ–‡ä»¶ï¼Œå¾—åˆ°å…¶è·¯å¾„ h_pathget_filename_component(h_path ${HEADER} DIRECTORY)# å°†è·¯å¾„æ·»åŠ åˆ° h_dirs åˆ—è¡¨ list(APPEND h_dirs ${h_path})endforeach()# å¯¹ h_dirs åˆ—è¡¨å»é™¤é‡å¤é¡¹list(REMOVE_DUPLICATES h_dirs)# å°† h_dirs æ·»åŠ é¡¹ç›® test çš„å¤´æ–‡ä»¶æœç´¢è·¯å¾„target_include_directories(${PROJECT_NAME} PRIVATE ${h_dirs})        ä¼˜ç‚¹ï¼šå½“æ–°æ·»åŠ å¤´æ–‡ä»¶æ—¶ï¼Œå¯ä»¥è‡ªåŠ¨æ›´æ–°æœç´¢è·¯å¾„    ç¼ºç‚¹ï¼šè‹¥æºç¨‹åºæ–‡ä»¶ä¸­æ˜¾å¼ç»™å‡ºäº†å¤´æ–‡ä»¶çš„ç›¸å¯¹è·¯å¾„åŒ…å«å…³ç³»ï¼Œå¦‚#include &lt;glm/rotate.h&gt;ï¼Œæ­¤æ—¶éœ€è¦çš„å¤´æ–‡ä»¶æœç´¢è·¯å¾„ä¸º ./3rdpartyã€‚ä½†æ˜¯å› ä¸ºè¯¥è·¯å¾„ä¸‹æ²¡æœ‰å¤´æ–‡ä»¶ï¼Œè‡ªåŠ¨å¯¼å‡ºçš„è·¯å¾„ä¸ä¼šåŒ…å«è¯¥è·¯å¾„ã€‚è¿™ç§æƒ…å†µä¸‹ä¼šå‡ºç°é“¾æ¥é”™è¯¯ï¼Œæç¤ºæ‰¾ä¸åˆ°å¤´æ–‡ä»¶ã€‚        ï¼ˆ2ï¼‰æ‰‹åŠ¨è®¾ç½®å¤´æ–‡ä»¶è·¯å¾„åˆ—è¡¨    add_executable(${PROJECT_NAME} function.cpp main.cpp)# æ˜¾å¼æ·»åŠ å¤´æ–‡ä»¶æœç´¢è·¯å¾„åˆ°åˆ—è¡¨ h_dirslist(APPEND h_dirs  ./  ./include  ./3rdparty)# å°† h_dirs æ·»åŠ é¡¹ç›® test çš„å¤´æ–‡ä»¶æœç´¢è·¯å¾„target_include_directories(${PROJECT_NAME} PRIVATE ${h_dirs})        ä¼˜ç‚¹ï¼šå¯ä»¥æ›´å¥½é…åˆå¤´æ–‡ä»¶å¼•ç”¨å…³ç³»    ç¼ºç‚¹ï¼šéœ€è¦æ‰‹åŠ¨ç»´æŠ¤å¤´æ–‡ä»¶è·¯å¾„åˆ—è¡¨ï¼Œè·¯å¾„å¤šäº†åˆ—è¡¨ä¼šå¾ˆé•¿  ä¸€èˆ¬é¼“åŠ±å¤§å®¶ç¬¬äºŒç§æ–¹æ³•ï¼Œå› ä¸ºé¡¹ç›®çš„å¤´æ–‡ä»¶åˆ—è¡¨å°±æ¨èæ˜¾å¼ç»´æŠ¤ï¼Œä¾¿äºå¼€å‘è€…æŒæ§é¡¹ç›®çš„å¤´æ–‡ä»¶ä¾èµ–å…³ç³»ï¼Œé¿å…å¼•å…¥ä¸éœ€è¦ä½¿ç”¨çš„å¤´æ–‡ä»¶ã€‚ç‰¹åˆ«æ˜¯å½“é¡¹ç›®ä¾èµ–å¤šç§å¤šæ ·çš„ç¬¬ä¸‰æ–¹åº“æ—¶ï¼Œæ¯ä¸ªç¬¬ä¸‰æ–¹åº“å¯¹å…¶å¤´æ–‡ä»¶çš„åŒ…å«å½¢å¼éƒ½ä¸ä¸€æ ·ï¼Œå¦‚#include \"aaa.h\"#include &lt;bb/ccc.h&gt;#include &lt;../cc/ddd.h&gt;è¿™ç§æƒ…å†µä¸‹ï¼Œå°±éœ€è¦ç‰¹åˆ«æ³¨æ„å¤´æ–‡ä»¶æœç´¢è·¯å¾„ï¼Œä¿è¯æ¯ä¸ªå¤´æ–‡ä»¶éƒ½èƒ½æœç´¢åˆ°ã€‚3.4. æºæ–‡ä»¶æœç´¢å¯ä»¥çœ‹åˆ°ï¼Œadd_executable() ä»ç„¶éœ€è¦åˆ—å†™å¾ˆå¤šæºæ–‡ä»¶ï¼Œè¿™åœ¨å¤§å‹å·¥ç¨‹é¡¹ç›®ä¸­ä¹Ÿååˆ†ç¹çï¼Œå¯ä»¥é‡‡ç”¨ä¸å¤´æ–‡ä»¶ç±»ä¼¼çš„æ–¹æ³•å¯¹æºæ–‡ä»¶è¿›è¡Œæœç´¢ï¼ŒåŒæ ·ä¹ŸåŒ…å«ä¸¤ç§æœç´¢æ–¹å¼ï¼Œè¿™é‡Œä»¥ç¬¬ä¸€ç§æ–¹å¼ä¸¾ä¾‹è¯´æ˜ã€‚file(GLOB_RECURSE all_c ./*.c ./*.cpp) # éå†æœç´¢ .c å’Œ .cpp æ–‡ä»¶æ·»åŠ åˆ° all_cadd_executable(${PROJECT_NAME} ${all_c})target_include_directories(${PROJECT_NAME} PRIVATE ${h_dirs})æ³¨æ„ï¼Œæºæ–‡ä»¶ä¸æ˜¯éå†å…¶è·¯å¾„ï¼Œè€Œæ˜¯éœ€è¦ç›´æ¥æ˜¾å¼æŒ‡å®šåˆ°æ–‡ä»¶ï¼Œå› æ­¤ä¸å†éœ€è¦ get_filename_component() æ“ä½œã€‚é’ˆå¯¹æºæ–‡ä»¶è¿˜æœ‰ä¸€ç§æ–°çš„æœç´¢æ–¹å¼å¦‚ä¸‹ã€‚aux_source_directory(./ ./path1 all_c) # å°†ç›®å½• ./ å’Œ ./path ä¸­çš„æ‰€æœ‰æºæ–‡ä»¶æ·»åŠ åˆ° all_cadd_executable(${PROJECT_NAME} ${all_c})target_include_directories(${PROJECT_NAME} PRIVATE ${h_dirs})aux_source_directory å‡½æ•°ä¼šæœç´¢æŒ‡å®šç›®å½•ä¸‹çš„æ‰€æœ‰æºæ–‡ä»¶ï¼Œå¹¶å°†å®ƒä»¬çš„æ–‡ä»¶åï¼ˆåŒ…æ‹¬è·¯å¾„ï¼‰å­˜å‚¨åœ¨å˜é‡variableä¸­ã€‚è¿™ä¸ªå‡½æ•°ä¼šè‡ªåŠ¨å°†æ‰€æœ‰ç¬¦åˆæ¡ä»¶çš„æºæ–‡ä»¶æ·»åŠ åˆ°å˜é‡ä¸­ï¼Œæ‰€ä»¥ä½ ä¸éœ€è¦æ‰‹åŠ¨ä¸€ä¸ªä¸€ä¸ªåœ°åˆ—ä¸¾æ‰€æœ‰çš„æºæ–‡ä»¶ã€‚æœ€åï¼Œè‹¥æŸä¸ªè·¯å¾„ä¸‹å­˜åœ¨é¡¹ç›®ä¸éœ€è¦çš„æºæ–‡ä»¶ï¼Œå¯ä»¥æ‰‹åŠ¨æŒ‡å®šå»é™¤ã€‚ä»¥å»é™¤ add.cpp ä¸ºä¾‹ï¼Œåœ¨ add_executable() ä¹‹å‰æ’å…¥ä»¥ä¸‹å‘½ä»¤list(REMOVE_ITEM all_c ./path1/add.cpp)3.5. å­é¡¹ç›®ï¼ˆWIPï¼‰CMake åŒæ ·å¯ä»¥ç®¡ç†å¤šä¸ªå­é¡¹ç›®è·¯å¾„æ„æˆçš„å¤æ‚ C/C++ å·¥ç¨‹ã€‚é€šè¿‡å­é¡¹ç›®è·¯å¾„ä¸‹çš„ CMakeLists.txtï¼ˆpath1ï¼‰æ–‡ä»¶è”åˆæ ¹ç›®å½•ä¸‹çš„  CMakeLists.txtï¼ˆmainï¼‰è¿›è¡Œé…ç½®####### CMakeLists.txt (main)# æ·»åŠ å­é¡¹ç›®è·¯å¾„ path1add_subdirectory(path1)add_executable(test function.cpp main.cpp function.h ${path1src})####### CMakeLists.txt (path1)set(path1src path1/add.cpp path1/add.h)3.6. othersï¼ˆWIPï¼‰  project(xxx)ï¼Œå¿…é¡»  add_subdirectory(å­æ–‡ä»¶å¤¹åç§°)ï¼Œè‹¥çˆ¶ç›®å½•åŒ…å«å¤šä¸ªå­ç›®å½•åˆ™å¿…é¡»  add_library(åº“æ–‡ä»¶åç§° STATIC æ–‡ä»¶)ï¼Œé€šå¸¸å­ç›®å½•(äºŒé€‰ä¸€)  add_executable(å¯æ‰§è¡Œæ–‡ä»¶åç§° æ–‡ä»¶)ï¼Œé€šå¸¸çˆ¶ç›®å½•(äºŒé€‰ä¸€)  include_directories(è·¯å¾„)ï¼Œå¿…é¡»  link_directories(è·¯å¾„)ï¼Œéå¿…é¡»  target_link_libraries(åº“æ–‡ä»¶åç§°/å¯æ‰§è¡Œæ–‡ä»¶åç§° é“¾æ¥çš„åº“æ–‡ä»¶åç§°)ï¼Œå¿…é¡»ä¸€ä¸ªå…¸å‹çš„ CMakeLists.txt æ–‡ä»¶å¦‚ä¸‹ï¼šcmake_minimum_required(VERSION 3.0.0) # è®¾ç½®æœ€å°çš„cmakeç‰ˆæœ¬å·set(PROJECT_NAME \"myproject\") # è®¾ç½®å·¥ç¨‹åç§°project(${PROJECT_NAME} VERSION 0.2.0) # è®¾ç½®å·¥ç¨‹ç‰ˆæœ¬set(CMAKE_C_STANDARD 99) # è®¾ç½®Cæ ‡å‡†set(CMAKE_CXX_STANDARD 11) # è®¾ç½®C++æ ‡å‡†include(CTest)enable_testing()set(CMAKE_VERBOSE_MAKEFILE \"ON\") # å¯ç”¨è¯¦ç»†æ‰“å°ï¼Œæ–¹ä¾¿æŸ¥çœ‹bug### é€šè¿‡éå†æ¥æœå¯»æ‰€æœ‰ .h æ–‡ä»¶ï¼Œå¹¶ä¿å­˜åˆ° all_h å˜é‡ä¸­# ${PROJECT_SOURCE_DIR} æ˜¯é»˜è®¤çš„å·¥ç¨‹æ ¹ç›®å½•file(GLOB_RECURSE all_h        ${PROJECT_SOURCE_DIR}/src/**.h)### éå†æ¯ä¸ª .h æ–‡ä»¶ï¼ˆè¿™æ®µæŠ„çš„ç½‘ä¸Šçš„ï¼‰foreach(file  ${all_h})    # æ‰¾åˆ°æ–‡ä»¶çš„ä¸Šçº§è·¯å¾„    string(REGEX REPLACE \"/$\" \"\" CURRENT_FOLDER_ABSOLUTE ${file})    string(REGEX REPLACE \"(.*/)(.*)\" \"\\\\1\" CURRENT_FOLDER ${CURRENT_FOLDER_ABSOLUTE})    list(APPEND include_h  ${CURRENT_FOLDER})endforeach()### åˆ é™¤å†—ä½™è·¯å¾„list(REMOVE_DUPLICATES  include_h) # å¾—åˆ°å»å†—çš„æ‰€æœ‰åŒ…å« .h æ–‡ä»¶çš„è·¯å¾„ï¼Œå­˜åˆ° include_h å˜é‡# MESSAGE(\"include_directories\"  ${include_h}) # æ‰“å°æ‰€æœ‰åŒ…å« .h æ–‡ä»¶çš„è·¯å¾„# è§„å®š .h æ–‡ä»¶çš„è·¯å¾„include_directories(${include_h})### éå†æ‰€æœ‰ .c/.cpp æ–‡ä»¶ï¼Œå­˜åˆ° ALL_SRC å˜é‡ä¸­file(GLOB_RECURSE ALL_SRC    ${PROJECT_SOURCE_DIR}/src/**.c    ${PROJECT_SOURCE_DIR}/src/*.cpp    )# MESSAGE(\"add_executable\"  ${ALL_SRC}) # æ‰“å°# æŠŠæ‰€æœ‰.c/.cpp æ–‡ä»¶æ·»åŠ åˆ°åå­—ä¸º ${PROJECT_NAME} çš„å¯æ‰§è¡Œç¨‹åºä¸­if(WIN32)    set(RESOURCE_FILES res.rc) # add iconendif()add_executable(${PROJECT_NAME} ${ALL_SRC} ${RESOURCE_FILES})### å®šä¹‰å®å®šä¹‰æ¥æ§åˆ¶å·¥ç¨‹ä¸­çš„ä¸€äº›åŠŸèƒ½# æ¯”å¦‚ä»£ç é‡Œé€šè¿‡ #ifdef AASSAA aaa #else bbb# é‚£ä¹ˆå°±å¯ä»¥é€šè¿‡ `-DAASSAA` ä¼ ç»™ç¼–è¯‘å™¨è¿›è¡Œå®å®šä¹‰# ç­‰ä»·äºä»£ç ä¸­å†™ `#define DAASSAA`add_definitions(-D__INFO__)add_definitions(-D__CLEAN__)### å¦‚æœæ˜¯Windowsç¯å¢ƒif(WIN32)    # å¯¹ add_library æˆ– add_executable ç”Ÿæˆçš„æ–‡ä»¶è¿›è¡Œé“¾æ¥æ“ä½œ    # è¿™é‡Œé¢å¤–é“¾æ¥ TCP é€šè®¯æ‰€éœ€çš„ winsock2.h ä¾èµ–çš„ ws2_32.lib    target_link_libraries(${PROJECT_NAME} ws2_32)    ### å®‰è£…ï¼ˆlinuxä¸­çš„sudo apt install çš„æ¦‚å¿µï¼Œwinä¸­ä¸çŸ¥é“æ˜¯å•¥ï¼‰    if(MINGW) # æ ¹æ®Windowsçš„ç¯å¢ƒå˜é‡å¾—åˆ°mingw64çš„å®‰è£…ä½ç½®ï¼Œç„¶åå¾—åˆ°binæ–‡ä»¶å¤¹        find_program(MINGW_EXECUTABLE mingw32-make.exe PATH $ENV{PATH} REQUIRED)        get_filename_component(MINGW_BIN ${MINGW_EXECUTABLE} DIRECTORY)        set(EXTRA_DLL # æ³¨æ„ï¼Œè¿™é‡Œæœ€å¥½ä½¿ç”¨Dependså·¥å…·æ¥æŸ¥çœ‹exeç¨‹åºä¾èµ–å“ªäº›ç¬¬ä¸‰æ–¹dllï¼Œç„¶åé€ä¸€æ·»åŠ             \"${MINGW_BIN}/libstdc++-6.dll\"            \"${MINGW_BIN}/libgcc_s_seh-1.dll\"            \"${MINGW_BIN}/libwinpthread-1.dll\"        )        # å°†ä¾èµ–çš„dllæ–‡ä»¶æ‹·è´åˆ°å®‰è£…è·¯å¾„ï¼ˆç›®å‰æ”¯æŒsehå¼‚å¸¸æ¨¡å‹ç‰ˆæœ¬çš„mingw64ï¼‰        install(FILES ${EXTRA_DLL} DESTINATION .)    endif()    # å°†å¯æ‰§è¡Œç¨‹åºæ‰“åŒ…åˆ°ï¼ˆå°†æ¥å®‰è£…ä½ç½®çš„ï¼‰æ ¹ç›®å½•    install(TARGETS ${PROJECT_NAME} DESTINATION .)    # å°†ä¸€äº›é¢å¤–çš„èµ„æºæ–‡ä»¶å¤¹ï¼Œé…ç½®æ–‡ä»¶ï¼ˆå¤¹ï¼‰ç­‰æ‹·è´åˆ°ç›®æ ‡ç›®å½•    # æ–‡ä»¶å¤¹ç”¨ 'DIRECTORY' ï¼Œ æ–‡ä»¶ç”¨ 'FILES'    install(DIRECTORY ${PROJECT_SOURCE_DIR}/data/ DESTINATION data)    install(DIRECTORY ${PROJECT_SOURCE_DIR}/config/ DESTINATION config)    install(DIRECTORY ${PROJECT_SOURCE_DIR}/res/ DESTINATION res)    set(CMAKE_INSTALL_SYSTEM_RUNTIME_DESTINATION \".\") # ä¸çŸ¥é“æœ‰æ²¡æœ‰ç”¨ï¼Œå…ˆæ”¾ç€äº†    include(InstallRequiredSystemLibraries) # ä¸çŸ¥é“æœ‰æ²¡æœ‰ç”¨ï¼Œåº”è¯¥æœ‰ç”¨ï¼ŒæŠŠç³»ç»Ÿdllæ‰“åŒ…åˆ°exe    ### æ‰“åŒ…    # set(CPACK_INSTALL_PREFIX \"/home/DSS\") # ç»™linuxç”¨çš„ï¼Œå¤§æ¦‚æŠŠï¼Ÿ    # è®¾ç½®ä¸€äº›åå­—    set(CPACK_PACKAGE_NAME ${PROJECT_NAME})    set(CPACK_PROJECT_NAME ${PROJECT_NAME})    set(CPACK_PROJECT_VERSION ${PROJECT_VERSION})    set(CPACK_CMAKE_GENERATOR \"MinGW Makefiles\") # å¦‚æœå‰é¢ç”¨äº†è‡ªåŠ¨ç”ŸæˆCMakeLists.txtï¼Œè¿™é‡Œä¹Ÿå¯ä»¥ä¸å†™    set (CPACK_RESOURCE_FILE_LICENSE          \"${CMAKE_CURRENT_SOURCE_DIR}/LICENSE\") # å¦‚æœå·¥ç¨‹æ²¡æœ‰Licenseæ–‡ä»¶ä¹Ÿå¯ä»¥ä¸å†™    set(CPACK_PACKAGE_VERSION_MAJOR \"${${PROJECT_NAME}_VERSION_MAJOR}\") # å¤§ç‰ˆæœ¬å·    set(CPACK_PACKAGE_VERSION_MINOR \"${${PROJECT_NAME}_VERSION_MINOR}\") # å°ç‰ˆæœ¬å·    set(CPACK_SOURCE_GENERATOR \"TGZ\") # å‹ç¼©æ–¹å¼ï¼Œæˆ‘éšä¾¿å†™äº†ä¸€ä¸ªï¼Œæ”¯æŒå¾ˆå¤šç§    ### åœ¨ Windows ç¯å¢ƒç§ï¼Œé‡‡ç”¨å¼€æºçš„ NSIS æ¥æ„å»ºå®‰è£…ç¨‹åº    set(CPACK_GENERATOR NSIS)    set(CPACK_NSIS_PACKAGE_NAME \"${PROJECT_NAME}\")    set(CPACK_NSIS_DISPLAY_NAME \"${PROJECT_NAME}\")    # æ·»åŠ icoæ–‡ä»¶ç»™æ‰“åŒ…çš„å®‰è£…ç¨‹åº    set(CPACK_PACKAGE_ICON \"${CMAKE_CURRENT_SOURCE_DIR}\\\\\\\\DSSimulator.ico\")    set(CPACK_NSIS_MUI_ICON \"${CMAKE_CURRENT_SOURCE_DIR}\\\\\\\\DSSimulator.ico\")    ### ç”¨æ¥å‘Šè¯‰å®‰è£…ç¨‹åºï¼Œå¸è½½çš„æ—¶å€™éœ€è¦é¢å¤–åˆ æ‰å‰é¢ install æ—¶é¢å¤–åŠ å…¥çš„ èµ„æºæ–‡ä»¶ï¼ˆå¤¹ï¼‰å’Œ dll ç­‰    # è¿™é‡Œé‡‡ç”¨å‡½æ•°çš„å½¢å¼ï¼ˆç™¾åº¦æŠ„çš„ï¼‰ï¼Œä¹Ÿå¯ä»¥åœ¨å¤–éƒ¨ç¼–å†™ '.nsi'æ–‡ä»¶ç„¶åå¼•ç”¨è¿›æ¥ï¼ˆå¬ç€å°±éº»çƒ¦ï¼‰    function(uninstall_extra)        foreach(file IN LISTS ARGN)            if(IS_DIRECTORY \"${file}\")                set(command \"rmdir /s /q \\\"$INSTDIR\\\\\\\\${file}\\\"\")            else()                set(command \"del /f /q \\\"$INSTDIR\\\\\\\\${file}\\\"\")            endif()            set(CPACK_NSIS_EXTRA_UNINSTALL_COMMANDS \"${CPACK_NSIS_EXTRA_UNINSTALL_COMMANDS}\\n !system '${command}'\")        endforeach()    endfunction()    if(MINGW) # delete all things in install directory        uninstall_extra(\"$INSTDIR\")    endif()endif()# è¿™å¥è¯å¿…é¡»è¦æœ‰å“¦include(CPack)### è¿™æ˜¯ç”¨æ¥æç¤ºè‡ªå·±çš„å‘½ä»¤è¡Œçš„å‘½ä»¤ï¼Œä¸ç„¶è€å¹´ç—´å‘†è®°ä¸ä½# cmake --build . --target install --verbose# cpack.exe .\\CPackConfig.cmake  é‡‡ç”¨ aux_source_directory(è·¯å¾„ å˜é‡) å¯è·å–è·¯å¾„ä¸‹æ‰€æœ‰çš„.cpp/.c/.ccæ–‡ä»¶ï¼ˆä¸åŒ…æ‹¬å­ç›®å½•ï¼‰ï¼Œå¹¶èµ‹å€¼ç»™å˜é‡;  é‡‡ç”¨ add_compile_definitions(xxx=1) å¯ä»¥ç»™å®å…·ä½“å€¼ï¼Œä½†æ˜¯åªæœ‰é«˜ç‰ˆæœ¬çš„cmakeæ”¯æŒï¼Œç­‰ä»·äº #define xxx 1ï¼›  é‡‡ç”¨ add_subdirectory(å­æ–‡ä»¶å¤¹åç§°) ç¼–è¯‘å­æ–‡ä»¶å¤¹çš„ CMakeLists.txtï¼›  å¦‚æœéœ€è¦å°†å·¥ç¨‹ç¼–è¯‘ä¸ºé™æ€åº“ï¼Œé‚£ä¹ˆä½¿ç”¨ add_library(åº“æ–‡ä»¶åç§° STATIC æ–‡ä»¶)ã€‚æ³¨æ„ï¼Œåº“æ–‡ä»¶åç§°é€šå¸¸ä¸º libxxx.soï¼Œåœ¨è¿™é‡Œè¦å»æ‰å‰åç¼€å†™ xxx å³å¯ï¼›  è§„å®š .so/.a åº“æ–‡ä»¶è·¯å¾„ä½¿ç”¨ link_directories(è·¯å¾„)ï¼›3.7. ç”Ÿæˆï¼ˆGenerateï¼‰æˆ‘ä»¬ä¸€èˆ¬ä¼šåœ¨ CMakeLists.txt æ‰€åœ¨çš„ç›®å½•ä¸‹ï¼ˆä¸€èˆ¬ä¹Ÿå°±æ˜¯å·¥ç¨‹é¡¹ç›®çš„æ ¹ç›®å½•ï¼‰æ‰‹åŠ¨æ–°å»ºä¸€ä¸ª build æ–‡ä»¶å¤¹ï¼Œè¿™å°†ç”¨äºå­˜å‚¨ CMake æ„å»ºçš„ä¸­é—´æ–‡ä»¶å’Œç”Ÿæˆçš„ç›®æ ‡æ–‡ä»¶ã€‚è¿™ç§æ–¹å¼å®é™…ä¸Šæ˜¯ cmake çš„ out-of-source æ„å»ºæ–¹å¼ã€‚è¿™ç§æ–¹æ³•å¯ä»¥ä¿è¯ç”Ÿæˆä¸­é—´äº§ç‰©ä¸æºä»£ç åˆ†ç¦»ï¼ˆå³ç”Ÿæˆçš„æ‰€æœ‰ç›®æ ‡æ–‡ä»¶éƒ½å­˜å‚¨åœ¨ build æ–‡ä»¶å¤¹ä¸­ï¼Œå› æ­¤ä¸ä¼šå¹²æ‰°æºä»£ç ä¸­çš„ä»»ä½•æ–‡ä»¶ï¼‰ã€‚é‡‡ç”¨å‘½ä»¤è¡Œçš„æ–¹å¼å¯æ“ä½œå¦‚ä¸‹mkdir buildcd buildcmake ..makeè‹¥ä½¿ç”¨ VSCode å¹¶å®‰è£…äº†åˆé€‚çš„æ’ä»¶ï¼Œé‚£ä¹ˆåœ¨ä½¿ç”¨å¿«æ·é”® Ctrl+S ä¿å­˜ CMakeLists.txt æ—¶ï¼Œä¼šè‡ªåŠ¨ç”Ÿæˆç”Ÿæˆé¡¹ç›®æ„å»ºæ‰€éœ€çš„ä¸­é—´æ–‡ä»¶ã€‚é…ç½®å’Œç”Ÿæˆè¿‡ç¨‹å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚ç”Ÿæˆå®Œæ¯•å¾—åˆ°çš„ä¸­é—´æ–‡ä»¶å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚3.8. æ„å»ºï¼ˆBuildï¼‰é‡‡ç”¨ CMake æ„å»ºé¡¹ç›®æœ‰ä¸‰ç§æ–¹å¼ï¼š  æ–¹å¼1ï¼šæ‰“å¼€å‘½ä»¤æ¿ï¼ˆCtrl+Shift+Pï¼‰å¹¶è¿è¡Œ CMakeï¼šBuildï¼›  æ–¹å¼2ï¼šæˆ–ä»åº•éƒ¨çŠ¶æ€æ ä¸­ç‚¹å‡»â€buildâ€æŒ‰é’®ï¼›  æ–¹å¼3ï¼šæ‰“å¼€å‘½ä»¤è¡Œçª—å£ï¼ˆå¿«æ·é”® Ctrl + ~ ï¼‰è¾“å…¥ cmake --build buildï¼›ä¸‹å›¾æ˜¯é‡‡ç”¨æ–¹å¼2è¿›è¡Œæ„å»ºçš„ç¤ºæ„å›¾ã€‚3.9. è¿è¡Œå’Œè°ƒè¯•ï¼ˆDebugï¼‰è¿è¡Œå’Œè°ƒè¯•é¡¹ç›®ï¼Œæ‰“å¼€æŸä¸ªæºä»£ç æ–‡ä»¶ï¼Œå¹¶è®¾ç½®ä¸€ä¸ªæ–­ç‚¹ã€‚ç„¶åæ‰“å¼€å‘½ä»¤æ¿ï¼ˆCtrl+Shift+Pï¼‰ï¼Œå¹¶è¿è¡Œ CMakeï¼š debugï¼Œç„¶åæŒ‰ F5 ç»§ç»­è°ƒè¯•ã€‚æˆ–è€…ç‚¹å‡» VSCode ä¸‹æ–¹çš„ ã€è™«å­ã€‘ å›¾æ ‡è¿›è¡Œ DEBUG è°ƒè¯•ã€‚4. åŸºäº CMake çš„æ‰“åŒ…4.1. CPackCPack æ˜¯ CMake 2.4.2 ä¹‹åçš„ä¸€ä¸ªå†…ç½®å·¥å…·ï¼Œç”¨äºåˆ›å»ºè½¯ä»¶çš„äºŒè¿›åˆ¶åŒ…å’Œæºä»£ç åŒ…ã€‚CPack åœ¨æ•´ä¸ª CMake å·¥å…·é“¾çš„ä½ç½®å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚CPack æ”¯æŒæ‰“åŒ…çš„åŒ…æ ¼å¼æœ‰ä»¥ä¸‹ç§ç±»ï¼š  7Z (7-Zip file format)  DEB (Debian packages)  External (CPack External packages)  IFW (Qt Installer Framework)  NSIS (Null Soft Installer)  NSIS64 (Null Soft Installer (64-bit))  NuGet (NuGet packages)  RPM (RPM packages)  STGZ (Self extracting Tar GZip compression  TBZ2 (Tar GZip compression)  TXZ (Tar XZ compression)  TZ (Tar Compress compression)  ZIP (ZIP file format)ä¸ºä»€ä¹ˆè¦ç”¨æ‰“åŒ…å·¥å…·ï¼šè½¯ä»¶ç¨‹åºæƒ³è¦åœ¨ç”Ÿäº§ç¯å¢ƒå¿«é€Ÿè¢«ä½¿ç”¨ï¼Œå°±éœ€è¦ä¸€ä¸ªä¸€é”®å®‰è£…çš„å®‰è£…åŒ…ï¼Œè¿™æ ·ç”Ÿäº§ç¯å¢ƒå°±å¯ä»¥å¾ˆæ–¹ä¾¿çš„éƒ¨ç½²å’Œä½¿ç”¨ã€‚ç”Ÿæˆä¸€é”®å®‰è£…çš„å®‰è£…åŒ…çš„å·¥å…·å°±æ˜¯æ‰“åŒ…å·¥å…·ã€‚å…¶ä¸­ NSIS æ˜¯ Windows ç¯å¢ƒä¸‹ä½¿ç”¨çš„æ‰“åŒ…å·¥å…·ã€‚é€‰æ‹© CPack çš„åŸå› ï¼šC++ å·¥ç¨‹å¤§éƒ¨åˆ†éƒ½æ˜¯ç”¨ CMake é…ç½®ç¼–è¯‘ï¼Œ è€Œ CPack æ˜¯ CMake å†…ç½®çš„å·¥å…·ï¼Œæ”¯æŒæ‰“åŒ…æˆå¤šç§æ ¼å¼çš„å®‰è£…åŒ…ã€‚å› ä¸ºæ˜¯ CMake çš„å†…ç½®å·¥å…·ï¼Œæ‰€ä»¥ä½¿ç”¨çš„æ–¹å¼ä¹Ÿæ˜¯é€šè¿‡åœ¨ CMakeLists.txt é…ç½®å‚æ•°ï¼Œå°±èƒ½è¾¾åˆ°æˆ‘ä»¬çš„éœ€æ±‚ã€‚ä½¿ç”¨èµ·æ¥å¾ˆæ–¹ä¾¿ï¼Œå®¹æ˜“ä¸Šæ‰‹ã€‚å¦‚ä½•å®‰è£… CPackï¼šå®‰è£… CMake çš„æ—¶å€™ä¼šæŠŠ CPack ä¸€èµ·å®‰è£…äº†ã€‚4.2. NSISå®˜ç½‘ä¸‹è½½æœ€æ–°ç‰ˆæœ¬å¹¶å®‰è£…ï¼šhttps://nsis.sourceforge.io/Downloadã€‚NSISæ˜¯å¼€å‘äººå‘˜åˆ›å»º Windows ä¸‹å®‰è£…ç¨‹åºçš„å·¥å…·ã€‚å®ƒå¯ä»¥åˆ›å»ºèƒ½å¤Ÿå®‰è£…ã€å¸è½½ã€è®¾ç½®ç³»ç»Ÿè®¾ç½®ã€æå–æ–‡ä»¶ç­‰çš„å®‰è£…ç¨‹åºã€‚NSISå…è®¸æ‚¨åˆ›å»ºä»åªå¤åˆ¶æ–‡ä»¶çš„åŸºæœ¬å®‰è£…ç¨‹åºåˆ°å¤„ç†è®¸å¤šé«˜çº§ä»»åŠ¡ï¼ˆå¦‚ç¼–å†™æ³¨å†Œè¡¨é¡¹ã€è®¾ç½®ç¯å¢ƒå˜é‡ã€ä»internetä¸‹è½½æœ€æ–°æ–‡ä»¶ã€è‡ªå®šä¹‰é…ç½®æ–‡ä»¶ç­‰ï¼‰çš„éå¸¸å¤æ‚çš„å®‰è£…ç¨‹åºçš„æ‰€æœ‰å†…å®¹ã€‚NSISåŸºäºè„šæœ¬æ–‡ä»¶ï¼Œæ”¯æŒå˜é‡ã€å‡½æ•°å’Œå­—ç¬¦ä¸²æ“ä½œï¼Œå°±åƒä¸€ç§æ™®é€šçš„ç¼–ç¨‹è¯­è¨€ä¸€æ ·ï¼Œä½†å®ƒæ˜¯ä¸ºåˆ›å»ºå®‰è£…ç¨‹åºè€Œè®¾è®¡çš„ã€‚åœ¨é»˜è®¤é€‰é¡¹ä¸‹ï¼Œå®ƒçš„å¼€é”€åªæœ‰34kbã€‚åŒæ—¶ç”±äºå…¶å¼ºå¤§çš„è„šæœ¬è¯­è¨€å’Œå¯¹å¤–éƒ¨æ’ä»¶çš„æ”¯æŒï¼Œä»ç„¶æä¾›äº†è®¸å¤šé€‰é¡¹ã€‚å®‰è£…å®Œæˆåï¼ŒNSIS å…·å¤‡ä¸€ä¸ª GUIï¼Œä½†æ˜¯æˆ‘ä¸€èˆ¬ä¸ç”¨ï¼Œè€Œæ˜¯ç›´æ¥é€šè¿‡ CMakeLists.txt æ–‡ä»¶è°ƒç”¨ NSIS è¿›è¡Œæ‰“åŒ…ã€‚å¦‚æœéœ€è¦ä½¿ç”¨ GUI æ¥è¾…åŠ©ç”Ÿæˆæ‰“åŒ…è„šæœ¬ï¼Œå‚è€ƒ æ­¤å¤„ã€‚4.3. åŸºäº CPack å’Œ NSIS çš„æ‰“åŒ…å®Œæˆé¡¹ç›®æ„å»ºå, ä½ ä¼šå‘ç° build ç›®å½•ä¸‹é¢å¤šäº†ä¸¤ä¸ªæ–‡ä»¶ CPackConfig.cmake å’Œ CPackSourceConfig.cmakeã€‚åœ¨ç»ˆç«¯æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å®Œæˆæ‰“åŒ…ï¼Œå¾—åˆ°å¯æ‰§è¡Œå®‰è£…ç¨‹åºã€‚cpack.exe .\\CPackConfig.cmakeå°†å®‰è£…ç¨‹åºåˆ†å‘åˆ°å…¶å®ƒ Windows å¹³å°å³å¯å®Œæˆå®‰è£…ã€‚æ³¨æ„ï¼Œè‹¥å‘å¸ƒçš„å®‰è£…ç¨‹åºåœ¨å®Œæˆå®‰è£…åï¼Œæç¤ºç¼ºå°‘æŸä¸ª dll æ–‡ä»¶ï¼Œé‚£ä¹ˆéœ€è¦é‡æ–°æ›´æ”¹ CMakeLists.txt æ–‡ä»¶ï¼Œå°†ç›¸åº”çš„ dll æ–‡ä»¶è¿›è¡Œå®‰è£…ã€‚æœ€å¥½ä½¿ç”¨dllä¾èµ–æŸ¥è¯¢å·¥å…·æ¥æŸ¥çœ‹ç¼–è¯‘å¾—åˆ°çš„å¯æ‰§è¡Œç¨‹åºï¼ˆ.exeï¼‰ä¾èµ–å“ªäº›ç¬¬ä¸‰æ–¹dllï¼Œç„¶åé€ä¸€æ·»åŠ ã€‚å¯é€‰çš„å·¥å…·åŒ…æ‹¬ Dependenciesã€‚5. å‚è€ƒæ–‡çŒ®[1] maskerII. ã€ç®€ä¹¦ã€‘CMakeLists å…¥é—¨[2] TomKing-tm. vsCode+CMakeå¼€å‘ç¯å¢ƒæ­å»º[3] åŒç¬™å­ä½¯è°¬. ç°ä»£C++ä¸­çš„é«˜æ€§èƒ½å¹¶è¡Œç¼–ç¨‹ä¸ä¼˜åŒ–[4] é­”è±†çš„BLOG. ä½¿ç”¨NSISåˆ¶ä½œå®‰è£…åŒ…"
  },
  
  {
    "title": "å¼ºåŒ–å­¦ä¹ ï¼ˆæ—¶åºå·®åˆ†æ³•ï¼‰",
    "url": "/posts/reinforcement-learning-Temporal-Differences/",
    "categories": "Academic, Knowledge",
    "tags": "python, reinforcement learning",
    "date": "2022-12-18 14:59:19 +0800",
    





    
    "snippet": "æœ¬æ–‡ä»‹ç»äº†å¼ºåŒ–å­¦ä¹ çš„æ—¶åºå·®åˆ†æ³•ï¼ˆTemporal-Difference, TDï¼‰ã€‚  1. å¼•è¨€  2. æ—¶åºå·®åˆ†æ³•          2.1. åŒè½¨ç­–ç•¥ä¸‹çš„æ—¶åºå·®åˆ†æ§åˆ¶ï¼ˆSARSAï¼‰      2.2. ç¦»è½¨ç­–ç•¥ä¸‹çš„æ—¶åºå·®åˆ†æ§åˆ¶ï¼ˆQ-Learningï¼‰      2.3. æœŸæœ›SARSA        3. Deep Q-Networkï¼ˆDQNï¼‰          3.1. ç»éªŒå›æ”¾ï¼ˆRe...",
    "content": "æœ¬æ–‡ä»‹ç»äº†å¼ºåŒ–å­¦ä¹ çš„æ—¶åºå·®åˆ†æ³•ï¼ˆTemporal-Difference, TDï¼‰ã€‚  1. å¼•è¨€  2. æ—¶åºå·®åˆ†æ³•          2.1. åŒè½¨ç­–ç•¥ä¸‹çš„æ—¶åºå·®åˆ†æ§åˆ¶ï¼ˆSARSAï¼‰      2.2. ç¦»è½¨ç­–ç•¥ä¸‹çš„æ—¶åºå·®åˆ†æ§åˆ¶ï¼ˆQ-Learningï¼‰      2.3. æœŸæœ›SARSA        3. Deep Q-Networkï¼ˆDQNï¼‰          3.1. ç»éªŒå›æ”¾ï¼ˆReplay Bufferï¼‰      3.2. åˆ†ç¦»æ‹·è´      3.3. è¿‡é«˜ä¼°è®¡ï¼ˆDouble DQNï¼‰        4. å‚è€ƒæ–‡çŒ®1. å¼•è¨€å›é¡¾å¼ºåŒ–å­¦ä¹ çš„ç›®æ ‡ï¼šä»·å€¼ä¼°è®¡ï¼ˆé¢„æµ‹é—®é¢˜ï¼‰å’Œç­–ç•¥å¯»ä¼˜ï¼ˆæ§åˆ¶é—®é¢˜ï¼‰ã€‚åœ¨å‰é¢çš„çš„ä»‹ç»ä¸­ï¼Œæˆ‘ä»¬åˆ†åˆ«ä»‹ç»äº†ä¸¤ç§åŸºäºä»·å€¼çš„æ–¹æ³•ï¼ŒåŠ¨æ€è§„åˆ’æ³•å’Œè’™ç‰¹å¡æ´›æ³•ï¼š  åŠ¨æ€è§„åˆ’æ³•ï¼ˆDPï¼‰ï¼šæ˜¯ model-based æ–¹æ³•ï¼ŒåŒ…å«ç­–ç•¥è¯„ä¼°å’Œç­–ç•¥æ”¹è¿›ä¸¤æ­¥ï¼Œç­–ç•¥è¯„ä¼°ç”¨æ¥è¿›è¡Œä»·å€¼ä¼°è®¡ï¼ˆå³é¢„æµ‹é—®é¢˜ï¼‰ï¼Œç­–ç•¥æ”¹è¿›ç”¨æ¥è¿›è¡Œç­–ç•¥å¯»ä¼˜ï¼ˆæ§åˆ¶é—®é¢˜ï¼‰ã€‚  è’™ç‰¹å¡æ´›æ³•ï¼ˆMCï¼‰ï¼šæ˜¯ model-free æ–¹æ³•ï¼Œå› ä¸ºä¸€èˆ¬æƒ…å†µä¸‹æˆ‘ä»¬æ— æ³•å¾—åˆ°å…·ä½“æ¨¡å‹ï¼ˆçŠ¶æ€è½¬ç§»æ¦‚ç‡ï¼‰ï¼Œå› æ­¤é€šè¿‡é‡‡æ ·å®Œæ•´åºåˆ—åï¼Œé€šè¿‡ $G_t$ æ¥è¿›è¡Œç­–ç•¥è¯„ä¼°ï¼ˆä»·å€¼ä¼°è®¡ï¼‰ã€‚æœ¬èŠ‚ä»‹ç»ç¬¬ä¸‰ç§åŸºäºä»·å€¼çš„æ–¹æ³•ï¼šæ—¶åºå·®åˆ†æ³•ï¼ˆTDï¼‰ã€‚é¦–å…ˆå›é¡¾ä¸€ä¸‹ä»·å€¼å‡½æ•°çš„ç­‰å¼ï¼š\\[\\begin{aligned}v_\\pi(s) &amp;= \\mathbb{E}_\\pi[G_t\\vert S_t=s] &amp; {MC}\\\\&amp;= \\mathbb{E}_\\pi[R_{t+1}+\\gamma v_\\pi(S_{t+1})\\vert S_t=s] &amp; {TD}\\\\&amp;= \\sum_a\\pi(a\\vert s) \\sum_{s^\\prime,r}p(r^\\prime,r \\vert s,a)(r+\\gamma v_\\pi(s^\\prime)) &amp; {DP}\\\\end{aligned}\\]å¯ä»¥çœ‹å‡ºï¼ŒåŸºäºä»·å€¼çš„æ–¹æ³•å¯ä»¥æ ¹æ®ä»·å€¼å‡½æ•°çš„ç­‰å¼ä¸åŒæ¥åˆ’åˆ†ï¼Œå…¶ä¸­ï¼š  åŠ¨æ€è§„åˆ’ï¼ˆDPï¼‰ï¼šæ˜¯ä¸€ç§è‡ªä¸¾çš„æ–¹æ³•ã€‚æ›´æ–° $v_{k+1}$ æ—¶é‡‡ç”¨ä¸Šä¸€æ­¥çš„ $v_k$ è¿›è¡Œç»„è£…ï¼Œç¼ºç‚¹ï¼šç¯å¢ƒåŠ¨æ€ç‰¹æ€§å¿…é¡»å·²çŸ¥ï¼›  è’™ç‰¹å¡æ´›ï¼ˆMCï¼‰ï¼šæ˜¯ä¸€ç§é‡‡æ ·çš„æ–¹æ³•ã€‚ä¾æ®å¤§æ•°å®šå¾‹ï¼Œè®©æ ·æœ¬å‡å€¼é€¼è¿‘æœŸæœ›ï¼Œç¼ºç‚¹ï¼šå¿…é¡»å®Œæ•´é‡‡é›†ä¸€å¹•ï¼›  æ—¶åºå·®åˆ†ï¼ˆTDï¼‰ï¼šæœ¬ç« èŠ‚ä»‹ç»çš„æ–¹æ³•ã€‚è’™ç‰¹å¡æ´›æ–¹æ³•å¿…é¡»è¦ç­‰æ•´ä¸ªåºåˆ—ç»“æŸä¹‹åæ‰èƒ½è®¡ç®—å¾—åˆ°è¿™ä¸€æ¬¡çš„å›æŠ¥ $G_{t}$ï¼Œè€Œæ—¶åºå·®åˆ†ï¼ˆTemporal Difference, TDï¼‰åªéœ€è¦å½“å‰æ­¥ç»“æŸå³å¯è¿›è¡Œè®¡ç®—ã€‚å…·ä½“è€Œè¨€ï¼Œæ˜¯å°† $G_t$ æ ¹æ®å…¶å®šä¹‰è¿›è¡Œä¸€æ­¥å±•å¼€\\[\\begin{aligned}G_t \\doteq \\sum_{k=0}^{\\infty} \\gamma^k R_{t+k+1} &amp;= R_{t+1}+\\sum_{k=0}^{\\infty} \\gamma^{k} R_{t+k+2}\\\\&amp;= R_{t+1}+\\gamma V_{t+1}    \\end{aligned}\\]ç„¶åå¸¦å…¥è’™ç‰¹å¡æ´›çš„ä»·å€¼å‡½æ•°å¢é‡æ›´æ–°ç­–ç•¥ï¼Œå³\\[\\begin{aligned}MC:\\quad &amp; v(S_t) \\leftarrow v(S_t)+\\alpha({\\color{red}G_t}-v(S_t)) \\\\TD:\\quad &amp; v(S_t) \\leftarrow v(S_t)+\\alpha({\\color{red}R_{t+1}+\\gamma v(S_{t+1})}-v(S_t))\\end{aligned}\\]ä¹Ÿå°±æ˜¯è¯´ï¼Œæ—¶åºå·®åˆ†ç®—æ³•ç”¨å½“å‰è·å¾—çš„å¥–åŠ±åŠ ä¸Šä¸‹ä¸€ä¸ªçŠ¶æ€çš„ä»·å€¼ä¼°è®¡æ¥ä½œä¸ºåœ¨å½“å‰çŠ¶æ€ä¼šè·å¾—çš„å›æŠ¥ã€‚è¿™é‡Œæˆ‘ä»¬å°†åŠ¨æ€è·¯å¾„è§„åˆ’èŠ‚çš„$\\frac{1}{N(s)}$æ›¿æ¢æˆäº† $\\alpha$ ï¼Œè¡¨ç¤ºå¯¹ä»·å€¼ä¼°è®¡æ›´æ–°çš„æ­¥é•¿ã€‚å¯ä»¥å°† $\\alpha$ å–ä¸ºä¸€ä¸ªå¸¸æ•°ï¼Œæ­¤æ—¶æ›´æ–°æ–¹å¼ä¸å†åƒè’™ç‰¹å¡æ´›æ–¹æ³•é‚£æ ·ä¸¥æ ¼åœ°å–æœŸæœ›ã€‚æ—¶åºå·®åˆ†ç®—æ³•ç”¨åˆ°äº† $V(s_{t+1})$ çš„ä¼°è®¡å€¼ï¼Œå¯ä»¥è¯æ˜å®ƒæœ€ç»ˆæ”¶æ•›åˆ°ç­–ç•¥ $\\pi$ çš„ä»·å€¼å‡½æ•°ï¼Œæˆ‘ä»¬åœ¨æ­¤ä¸å¯¹æ­¤è¿›è¡Œå±•å¼€è¯´æ˜ã€‚2. æ—¶åºå·®åˆ†æ³•2.1. åŒè½¨ç­–ç•¥ä¸‹çš„æ—¶åºå·®åˆ†æ§åˆ¶ï¼ˆSARSAï¼‰\\[\\begin{aligned}V(S_t) &amp; \\leftarrow V(S_t)+\\alpha(\\underbrace{R_{t+1}}_{é‡‡æ ·}+\\gamma \\underbrace{V(S_{t+1})}_{è‡ªä¸¾}-V(S_t))\\\\Q(S_t,A_t) &amp; \\leftarrow Q(S_t,A_t)+\\alpha(\\underbrace{R_{t+1}}_{é‡‡æ ·}+\\gamma \\underbrace{Q(S_{t+1},A_{t+1})}_{è‡ªä¸¾}-Q(S_t,A_t))\\\\\\end{aligned}\\]ä¸Šè¿°æ›´æ–°æ–¹å¼å³ä¸º SARSAã€‚ä¼ªä»£ç å¦‚ä¸‹ï¼š  Initialize $Q(s,a)$ arbitrarily  Repeat (for each episode):          Initialize $s$      Repeat (for each step of episode):                  Choose $a$ from $s$ using policy derived from $Q$ (e.g., $\\epsilon$-greedy)          Take action $a$, observe $r$, $s^\\prime$                      Choose $a^\\prime$ from $s^\\prime$ using policy derived from $Q$ (e.g., $\\epsilon$-greedy)                    $\\color{red}{Q(s,a)\\leftarrow Q(s,a)+\\alpha[r+\\gamma Q(s^\\prime,a^\\prime)-Q(s,a)]}$          $\\color{red}{s\\leftarrow}s^\\prime; a\\leftarrow a^\\prime$                    until $s$ is terminal      ä¸Šè¿°æ›´æ–°æ–¹å¼åˆè¢«ç§°ä¸ºåŒè½¨ç­–ç•¥ï¼ˆon-policyï¼‰ï¼Œå› ä¸ºå…¶é‡‡æ ·å’Œæ›´æ–°çš„å‡ä¸ºåŒä¸€ä¸ªç­–ç•¥ã€‚è¿™ä¸ªç­–ç•¥å¯ä»¥æ˜¯ä»»ä½•ç­–ç•¥ï¼Œå¦‚ $greedy$ è´ªå©ªç­–ç•¥ã€$\\epsilon-greedy$ è´ªå©ªç­–ç•¥ï¼Œéšæœºç­–ç•¥ç­‰ã€‚ä»ä¸Šé¢çš„ä¼ªä»£ç å¯ä»¥çœ‹å‡ºï¼Œæ¯æ¬¡æ‰§è¡ŒåŠ¨ä½œæ—¶ï¼Œéƒ½æ˜¯ä»ä¸€ä¸ªç­–ç•¥ä¸­å¾—åˆ°çš„ã€‚è€Œæ›´æ–° $Q(s,a)$ çš„å€¼æ—¶ï¼Œä¹Ÿæ˜¯ä½¿ç”¨çš„åŒä¸€ä¸ªç­–ç•¥å¾—åˆ°çš„åŠ¨ä½œè®¡ç®—å‡ºçš„ $Q(s^\\prime,a^\\prime)$ ã€‚æ­¤æ—¶ï¼Œç”±äºè¿™ä¸ªç­–ç•¥ä¸ä¸€å®šæ˜¯æœ€ä¼˜ç­–ç•¥ï¼ˆä¸€èˆ¬è‚¯å®šä¸æ˜¯æœ€ä¼˜ç­–ç•¥ï¼‰ï¼Œé‚£ä¹ˆå¯¹åº”çš„ $a^\\prime$ æœªå¿…æ˜¯$s^\\prime$ çŠ¶æ€ä¸‹çš„æœ€ä¼˜é€‰æ‹©ã€‚å¦‚æœç­–ç•¥é‡‡ç”¨ $\\epsilon-greedy$ è´ªå©ªç­–ç•¥ï¼Œå®ƒéœ€è¦å…¼é¡¾æ¢ç´¢å’Œåˆ©ç”¨ï¼Œå› æ­¤è®­ç»ƒçš„æ—¶å€™ä¼šæ˜¾å¾—æœ‰ç‚¹â€œèƒ†å°â€ã€‚æ‰€ä»¥è¯´ SARSA æ˜¯ä¸€ä¸ªåå‘ä¿å®ˆçš„æ–¹æ³•ï¼Œè®­ç»ƒè¿‡ç¨‹æ…¢æ…¢æ‘¸ç´¢ä¼šæ¯”è¾ƒæ…¢ã€‚2.2. ç¦»è½¨ç­–ç•¥ä¸‹çš„æ—¶åºå·®åˆ†æ§åˆ¶ï¼ˆQ-Learningï¼‰å®é™…ä¸Šï¼Œåœ¨ $s^\\prime$ çŠ¶æ€ä¸‹ï¼Œå­˜åœ¨ä¸€ä¸ªç¡®å®šæ€§ç­–ç•¥ï¼ˆä¹Ÿå³ $greedy$ è´ªå©ªç­–ç•¥ï¼‰\\[a^*=\\pi(s^\\prime) = argmax_a\\; Q(s^\\prime, a)\\]æ­¤æ—¶æœ‰\\[max_{a^\\prime}\\; Q(s^\\prime,a^\\prime) = Q(s^\\prime, a^*)\\]æ›´æ–° $Q(s,a)$ æ—¶ï¼Œä¸å†æ ¹æ®å½“å‰ç­–ç•¥è¿›è¡Œé‡‡æ ·ï¼Œè€Œæ˜¯ç›´æ¥æŸ¥é˜…å·²æœ‰çš„ Q table æ‰¾åˆ°å½“å‰çŠ¶æ€ä¸‹å·²çŸ¥çš„æœ€å¤§ $Q(s^\\prime, a)$ï¼Œå°±ä½¿ç”¨è¿™ä¸ªå€¼å¯¹åº”çš„ $a$ æ¥æ›´æ–° $Q(s,a)$ã€‚è¿™ç§æ›´æ–°æ–¹å¼å³ä¸º Q-Learningã€‚ä¼ªä»£ç å¦‚ä¸‹ï¼š  Initialize $Q(s,a)$ arbitrarily  Repeat (for each episode):          Initialize $s$      Repeat (for each step of episode):                  Choose $a$ from $s$ using policy derived from $Q$ (e.g., $\\epsilon$-greedy)          Take action $a$, observe $r$, $s^\\prime$          $\\color{red}{Q(s,a)\\leftarrow Q(s,a)+\\alpha[r+\\gamma \\mathop{\\text{max}}\\limits_{a^\\prime}  Q(s^\\prime,a^\\prime)-Q(s,a)]}$          $\\color{red}{s\\leftarrow}s^\\prime$                    until $s$ is terminal      Q-Learning åˆ†ç¦»äº†ç›®æ ‡ç­–ç•¥ä¸è¡Œä¸ºç­–ç•¥ã€‚ä¸€æ–¹é¢ï¼Œåœ¨æ›´æ–° $Q(s,a)$ æ—¶ï¼ŒQ-Learning é‡‡ç”¨ $greedy$ æ›´æ–°ç­–ç•¥ä½œä¸ºè¡Œä¸ºç­–ç•¥æ¢ç´¢å¾—åˆ°çš„ç»éªŒè½¨è¿¹æ¥ä¼˜åŒ–ç›®æ ‡ç­–ç•¥ï¼Œä»è€Œæ›´æœ‰å¯èƒ½æ¢ç´¢åˆ°æœ€ä½³ç­–ç•¥ã€‚è€Œåœ¨å®é™…æ‰§è¡Œæ—¶ï¼Œé‡‡ç”¨ $\\epsilon-greedy$ è¡Œä¸ºç­–ç•¥æ¥é€‰å–åŠ¨ä½œã€‚å› æ­¤ï¼ŒQ-Learning åˆè¢«è¢«ç§°ä¸ºç¦»è½¨ç­–ç•¥ï¼ˆoff-policyï¼‰ã€‚2.3. æœŸæœ›SARSAæˆ‘ä»¬å¯ä»¥å¯¹ SARSA è¿›è¡Œæ”¹è¿›ï¼Œä¸å†è¿›è¡Œé‡‡æ ·å¾—åˆ°åŠ¨ä½œ $a^\\prime$ï¼Œè€Œæ˜¯å¯¹ $Q$ è¿›è¡ŒåŠ æƒå¹³å‡ï¼Œæ­¤æ—¶\\[Q(s,a)\\leftarrow Q(s,a)+\\alpha[r+\\gamma \\mathbb{E}_\\pi[Q(s^\\prime,a^\\prime)\\vert s^\\prime]-Q(s,a)]\\]å¢åŠ é‡‡æ ·æ“ä½œçš„å¥½å¤„åœ¨äºå¯ä»¥æé«˜è®¡ç®—çš„ç¨³å®šæ€§ï¼ˆå› ä¸ºæœŸæœ›æ›´èƒ½ååº”å½“å‰çŠ¶æ€çš„ä»·å€¼ï¼‰ï¼Œä½†æ˜¯ä»£ä»·æ˜¯è®¡ç®—é‡å¢å¤§ï¼ˆå› ä¸ºéœ€è¦è®¡ç®—å¤šä¸ªQå€¼åå–å¹³å‡ï¼‰ã€‚3. Deep Q-Networkï¼ˆDQNï¼‰å‰é¢ä»‹ç»çš„ Q-Learning åªèƒ½ç”¨äºçŠ¶æ€å’ŒåŠ¨ä½œçš„é›†åˆæ˜¯æœ‰é™çš„ç¦»æ•£åŸºä¸”çŠ¶æ€å’ŒåŠ¨ä½œæ•°é‡è¾ƒå°‘çš„æƒ…å†µï¼ŒçŠ¶æ€å’ŒåŠ¨ä½œéœ€è¦äººå·¥é¢„å…ˆè®¾è®¡ï¼ŒQå‡½æ•°å€¼éœ€è¦å­˜å‚¨åœ¨ä¸€ä¸ªäºŒç»´è¡¨æ ¼ä¸­ã€‚å®é™…åº”ç”¨ä¸­çš„åœºæ™¯å¯èƒ½ä¼šå¾ˆå¤æ‚ï¼Œå¾ˆéš¾å®šä¹‰å‡ºç¦»æ•£çš„çŠ¶æ€ï¼›å³ä½¿èƒ½å¤Ÿå®šä¹‰ï¼Œæ•°é‡ä¹Ÿéå¸¸å¤§ï¼Œæ— æ³•ç”¨æ•°ç»„å­˜å‚¨ã€‚å¯¹äºå¼ºåŒ–å­¦ä¹ æ¥è¯´ï¼Œå¾ˆå¤šå®é™…åº”ç”¨é—®é¢˜çš„è¾“å…¥æ•°æ®æ˜¯é«˜ç»´çš„ï¼Œå¦‚å›¾åƒï¼Œå£°éŸ³ï¼Œç®—æ³•è¦æ ¹æ®å®ƒä»¬æ¥é€‰æ‹©ä¸€ä¸ªåŠ¨ä½œæ‰§è¡Œä»¥è¾¾åˆ°æŸä¸€é¢„æœŸçš„ç›®æ ‡ã€‚æ¯”å¦‚ï¼Œå¯¹äºè‡ªåŠ¨é©¾é©¶ç®—æ³•ï¼Œè¦æ ¹æ®å½“å‰çš„ç”»é¢å†³å®šæ±½è½¦çš„è¡Œé©¶æ–¹å‘å’Œé€Ÿåº¦ã€‚ç»å…¸çš„å¼ºåŒ–å­¦ä¹ ç®—æ³•å¦‚ Q-Learning éœ€è¦åˆ—ä¸¾å‡ºæ‰€æœ‰å¯èƒ½çš„æƒ…å†µï¼ˆç§°ä¸ºçŠ¶æ€ï¼Œè¿™æ˜¯å¯¹å½“å‰æ‰€å¤„ç¯å¢ƒçš„æŠ½è±¡ï¼‰ï¼Œç„¶åè¿›è¡Œè¿­ä»£ã€‚ Q-Learning çš„ç»å…¸å®ç°æ˜¯åˆ—ä¸¾å‡ºæ‰€æœ‰çš„çŠ¶æ€å’ŒåŠ¨ä½œï¼Œæ„å»º Q-Tableï¼Œè¿™æ˜¯ä¸€ä¸ªäºŒç»´çš„è¡¨ï¼Œç„¶åè¿­ä»£è®¡ç®—å„ç§çŠ¶æ€ä¸‹æ‰§è¡Œå„ç§åŠ¨ä½œçš„é¢„æœŸå›æŠ¥çš„æœ€å¤§å€¼ã€‚å¯¹äºé«˜ç»´çš„è¾“å…¥æ•°æ®ï¼Œæ˜¾ç„¶æ˜¯ä¸ç°å®çš„ï¼Œå› ä¸ºå¦‚æœç›´æ¥ä»¥åŸå§‹æ•°æ®ä½œä¸ºçŠ¶æ€ï¼Œç»´æ•°å¤ªé«˜ï¼Œè€Œä¸”çŠ¶æ€æ•°é‡å¤ªå¤šã€‚ä¸€ç§è§£å†³æ–¹æ¡ˆæ˜¯ä»é«˜ç»´æ•°æ®ä¸­æŠ½è±¡å‡ºç‰¹å¾ï¼Œä½œä¸ºçŠ¶æ€ï¼Œç„¶åç”¨å¼ºåŒ–å­¦ä¹ å»ºæ¨¡ï¼Œä½†è¿™ç§åšæ³•å¾ˆå¤§ç¨‹åº¦ä¸Šä¾èµ–äºäººå·¥ç‰¹å¾çš„è®¾è®¡ã€‚å¦‚ä»ç”»é¢ä¸­æå–å‡ºç›®æ ‡çš„ä½ç½®ã€é€Ÿåº¦ç­‰ä¿¡æ¯ï¼Œä¹Ÿéå¸¸å›°éš¾ï¼Œè¿™ä¹Ÿæ˜¯ä¸€ä¸ªéš¾é¢˜ã€‚å¦ä¸€ç§æ–¹æ¡ˆæ˜¯ç”¨ä¸€ä¸ªå‡½æ•°æ¥é€¼è¿‘ä»·å€¼å‡½æ•°ï¼Œå‡½æ•°çš„è¾“å…¥æ˜¯åŸå§‹çš„çŠ¶æ€æ•°æ®ï¼Œå‡½æ•°çš„è¾“å‡ºæ˜¯ä»·å€¼å‡½æ•°å€¼ã€‚åœ¨æœ‰ç›‘ç£å­¦ä¹ ä¸­ï¼Œæˆ‘ä»¬ç”¨ç¥ç»ç½‘ç»œæ¥æ‹Ÿåˆåˆ†ç±»æˆ–å›å½’å‡½æ•°ï¼ŒåŒæ ·çš„ï¼Œä¹Ÿå¯ä»¥ç”¨ç¥ç»ç½‘ç»œå¯æ¥æ‹Ÿåˆå¼ºåŒ–å­¦ä¹ ä¸­çš„ä»·å€¼å‡½æ•°ï¼Œè¿™å°±æ˜¯ DQN çš„åŸºæœ¬æ€æƒ³ã€‚          +----+ ----&gt;Q(s,a1)                       +----+  s  ---&gt; |f(x)| ----&gt;Q(s,a2)       or     s,ai ---&gt;|f(x)| ----&gt;Q(s,ai)          +----+ ----&gt;Q(s,a3)                       +----+åŸºäºä»·å€¼å‡½æ•°çš„æ·±åº¦å¼ºåŒ–å­¦ä¹ çš„å…¸å‹ä»£è¡¨æ˜¯DQNï¼ˆæ·±åº¦Qç½‘ç»œï¼‰ï¼Œç”±DeepMindå…¬å¸åœ¨2013å¹´æå‡ºï¼Œ2015å¹´å…¶æ”¹è¿›å‹å‘è¡¨åœ¨Natureä¸Šã€‚è¿™ç§æ–¹æ³•ç”¨å·ç§¯ç¥ç»ç½‘ç»œæ‹Ÿåˆä»·å€¼å‡½æ•°ï¼Œä¸€èˆ¬æ˜¯Qå‡½æ•°ã€‚ç½‘ç»œçš„è¾“å…¥ä¸ºåŸå§‹åœºæ™¯æ•°æ®ï¼Œå¦‚æ¸¸æˆçš„ç”»é¢å›¾åƒï¼Œè¾“å‡ºä¸ºåœ¨è¿™ç§åœºæ™¯ä¸‹æ‰§è¡Œå„ç§åŠ¨ä½œæ—¶æ‰€èƒ½å¾—åˆ°çš„Qå‡½æ•°çš„æå¤§å€¼ã€‚æŸå¤±å‡½æ•°ç”¨ç¥ç»ç½‘ç»œçš„è¾“å‡ºå€¼ä¸Qå­¦ä¹ æ¯æ¬¡è¿­ä»£æ—¶çš„æ›´æ–°å€¼æ„é€ ï¼Œæ˜¯ç¥ç»ç½‘ç»œçš„è¾“å‡ºå€¼ä¸Qå‡½æ•°ä¼°è®¡å€¼ä¹‹é—´çš„è¯¯å·®ï¼Œä¸Qå­¦ä¹ ä¸­çš„æ›´æ–°é¡¹ç›¸åŒ\\[L(\\theta) = \\mathbb{E}[(r+\\gamma \\mathop{\\text{max}}\\limits_{a^\\prime} Q(s^\\prime,a^\\prime;\\theta)-Q(s,a,\\theta))^2]\\]3.1. ç»éªŒå›æ”¾ï¼ˆReplay Bufferï¼‰å’Œ Q-Learning ç±»ä¼¼ï¼ŒDQN å¯ä»¥é€šè¿‡æ‰§è¡ŒåŠ¨ä½œæ¥ç”Ÿæˆæ ·æœ¬ã€‚å…·ä½“è€Œè¨€ï¼Œç»™å®šä¸€ä¸ªçŠ¶æ€ï¼Œç”¨å½“å‰çš„ç¥ç»ç½‘ç»œè¿›è¡Œé¢„æµ‹ï¼Œå¾—åˆ°æ‰€æœ‰åŠ¨ä½œçš„ Q å‡½æ•°ï¼Œç„¶åæŒ‰ç…§ç­–ç•¥é€‰æ‹©ä¸€ä¸ªåŠ¨ä½œæ‰§è¡Œï¼Œå¾—åˆ°ä¸‹ä¸€ä¸ªçŠ¶æ€ä»¥åŠå›æŠ¥å€¼ï¼Œä»¥æ­¤æ„é€ è®­ç»ƒæ ·æœ¬ã€‚ä½†ä¸æ™®é€šçš„æœ‰ç›‘ç£å­¦ä¹ ä¸åŒï¼Œè¿™é‡Œçš„è®­ç»ƒæ ·æœ¬æ˜¯é€šè¿‡ä¸åœçš„æ‰§è¡ŒåŠ¨ä½œè€ŒåŠ¨æ€ç”Ÿæˆçš„ã€‚ç›‘ç£å­¦ä¹ ä¸€èˆ¬è¦æ±‚è®­ç»ƒæ ·æœ¬ä¹‹é—´æ˜¯ç›¸äº’ç‹¬ç«‹çš„ï¼Œåœ¨å¼ºåŒ–å­¦ä¹ ä¸­ï¼Œç»å¸¸é‡åˆ°çš„æ˜¯å‰åé«˜åº¦ç›¸å…³çš„çŠ¶æ€åºåˆ—ã€‚åœ¨æŸä¸ªçŠ¶æ€ä¸‹æ‰§è¡Œä¸€ä¸ªåŠ¨ä½œä¹‹åè¿›å…¥ä¸‹ä¸€ä¸ªçŠ¶æ€ï¼Œå‰åä¸¤ä¸ªçŠ¶æ€ä¹‹é—´å­˜åœ¨ç€æ˜æ˜¾çš„æ¦‚ç‡å…³ç³»ã€‚ä¸ºäº†è§£å†³è®­ç»ƒæ ·æœ¬ä¹‹é—´å­˜åœ¨ç›¸å…³æ€§ï¼Œä»¥åŠæ ·æœ¬çš„æ¦‚ç‡åˆ†å¸ƒä¸å›ºå®šçš„é—®é¢˜ï¼Œé‡‡ç”¨äº†ç»éªŒå›æ”¾æœºåˆ¶ï¼Œå…·ä½“åšæ³•æ˜¯ï¼Œå…ˆæŠŠæ‰§è¡ŒåŠ¨ä½œæ„é€ çš„è®­ç»ƒæ ·æœ¬å­˜å‚¨åˆ°ä¸€ä¸ªå¤§çš„é›†åˆï¼ˆreplay-bufferï¼Œå›æ”¾ç¼“å†²ï¼‰ä¸­ï¼Œåœ¨è®­ç»ƒQç½‘ç»œæ—¶æ¯æ¬¡ä»è¿™ä¸ªé›†åˆï¼ˆreplay-bufferï¼Œå›æ”¾ç¼“å†²ï¼‰ä¸­éšæœºæŠ½å–å‡ºéƒ¨åˆ†æ ·æœ¬ä½œä¸ºè®­ç»ƒæ ·æœ¬ï¼Œä»¥æ­¤æ‰“ç ´æ ·æœ¬ä¹‹é—´çš„ç›¸å…³æ€§ã€‚éšä¹‹è€Œæ¥çš„é—®é¢˜æ˜¯ï¼Œæ¯ä¸ªæ ·æœ¬éƒ½æ˜¯ç”±ä¸åŒçš„Qå‡½æ•°å€¼å¯¹åº”çš„ç­–ç•¥äº§ç”Ÿçš„ã€‚åœ¨å›æ”¾ç¼“å†²ä¸­æ—©æœŸçš„æ ·æœ¬ä¸­ï¼Œç”±äºQå€¼ä¼°è®¡ä¸å‡†ï¼Œå¯¹åº”çš„ç­–ç•¥è¿˜æ¯”è¾ƒå¹¼ç¨šï¼›åä¹‹ï¼Œæ ·æœ¬è¶Šæ–°å¯¹åº”çš„ç­–ç•¥è¶Šä¼˜ã€‚å› æ­¤ï¼Œè¿˜éœ€è¦é¢å¤–è®¾è®¡æ ·æœ¬é€‰å–çš„æƒé‡ã€‚3.2. åˆ†ç¦»æ‹·è´DQN åœ¨éšæœºå°è¯•æ‰§è¡ŒåŠ¨ä½œï¼Œç”Ÿæˆè®­ç»ƒæ ·æœ¬çš„è¿‡ç¨‹ä¸­ï¼Œéœ€è¦ç”¨å½“å‰çš„ Q å‡½æ•°æ¥è®¡ç®—è®­ç»ƒæ ·æœ¬çš„æ ‡ç­¾å€¼ï¼Œè¿™å­˜åœ¨ç€è‡ªèº«ä¾èµ–ã€‚ä¹Ÿå³æŸå¤±å‡½æ•°çš„å‰åŠéƒ¨åˆ†\\[Y^Q = r+\\gamma \\mathop{\\text{max}}\\limits_{a^\\prime} Q(s^\\prime,a^\\prime;\\theta)\\]ä¸å½“å‰çš„ $Q(s,a,\\theta)$ æœ‰å…³ç³»çš„ã€‚ä¸ºäº†é™ä½è¿™ç§ä¾èµ–å…³ç³»ï¼Œå¯ä»¥é‡‡ç”¨ä¸¤ä¸ª DQN ä»£æ›¿åŸå…ˆçš„ä¸€ä¸ª DQNã€‚å¯¹åº”çš„æŸå¤±å‡½æ•°ä¸º\\[L(\\theta) = \\mathbb{E}[(r+\\gamma \\mathop{\\text{max}}\\limits_{a^\\prime} Q(s^\\prime,a^\\prime;\\theta_i^{-})-Q(s,a,\\theta_i))^2]\\]å…¶ä¸­ï¼Œ$\\theta_i^{-}$ ä¸ºç¬¬ $i$ æ¬¡è¿­ä»£æ—¶ç”¨äºè®¡ç®—ç›®æ ‡ Q å‡½æ•°å€¼çš„ DQN å‚æ•°å€¼ï¼Œè¿™ä¸ªç¥ç»ç½‘ç»œå› æ­¤ä¹Ÿç§°ä¸ºç›®æ ‡ç½‘ç»œï¼›$\\theta_i$ åˆ™ä¸ºå½“å‰ç½‘ç»œçš„å‚æ•°å€¼ã€‚å°†ç›®æ ‡ç½‘ç»œä¸å½“å‰ç½‘ç»œåˆ†ç¦»å¼€æ¥ï¼Œå½“å‰ç½‘ç»œçš„å€¼åœ¨è®­ç»ƒæ—¶æ¯æ¬¡éƒ½è¿­ä»£æ›´æ–°ï¼Œè€Œç›®æ ‡ç½‘ç»œåˆ™å‘¨æœŸæ€§çš„ä»å½“å‰Qç½‘ç»œåŒæ­¥è¿‡æ¥ï¼Œæ¯å¤šæ¬¡è¿­ä»£æ‰§è¡Œä¸€æ¬¡æ‹·è´ã€‚      Q-Network                              Target Q-Network        +----+ ----&gt;Q(s,a1)                       +----+ ----&gt;Q(s',a1)s  ---&gt; |f(x)| ----&gt;Q(s,a2)               s' ---&gt; |f(x)| ----&gt;Q(s',a2)        |  Î¸ | ----&gt;...                           | Î¸- | ----&gt;...        +----+ ----&gt;Q(s,an)                       +----+ ----&gt;Q(s',an)   3.3. è¿‡é«˜ä¼°è®¡ï¼ˆDouble DQNï¼‰DQNä¸­å‡ä½¿ç”¨äº† max æ“ä½œï¼Œä½¿å¾—é€‰æ‹©å’Œè¯„ä¼°ä¸€ä¸ªåŠ¨ä½œå€¼éƒ½ä¼šè¿‡é«˜ä¼°è®¡ï¼Œä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒDouble Q-learning ç‡å…ˆä½¿ç”¨äº†ä¸¤ä¸ªå€¼å‡½æ•°è¿›è¡Œè§£è€¦ï¼Œå…¶äº’ç›¸éšæœºçš„æ›´æ–°ä¸¤ä¸ªå€¼å‡½æ•°ï¼Œå¹¶åˆ©ç”¨å½¼æ­¤çš„ç»éªŒå»æ›´æ–°ç½‘ç»œæƒé‡ $\\theta$ å’Œ $\\theta^{-}$ã€‚å¯¹åº”çš„æŸå¤±å‡½æ•°ä¸º\\[L(\\theta) = \\mathbb{E}[(r+\\gamma Q(s^\\prime,\\mathop{\\text{argmax}}\\limits_{a^\\prime}Q(s^\\prime,a^\\prime,\\theta);\\theta_i^{-})-Q(s,a,\\theta_i))^2]\\]4. å‚è€ƒæ–‡çŒ®[1] shuhuai008. bilibiliã€å¼ºåŒ–å­¦ä¹ ã€‘(SARSA) æ—¶åºå·®åˆ†-åŒè½¨ç­–ç•¥TDæ§åˆ¶[2] è«çƒ¦. ä»€ä¹ˆæ˜¯ Sarsa (å¼ºåŒ–å­¦ä¹ )"
  },
  
  {
    "title": "å¼ºåŒ–å­¦ä¹ ï¼ˆè’™ç‰¹å¡æ´›æ³•ï¼‰",
    "url": "/posts/reinforcement-learning-Monte-Carlo/",
    "categories": "Academic, Knowledge",
    "tags": "python, reinforcement learning",
    "date": "2022-11-29 17:07:19 +0800",
    





    
    "snippet": "æœ¬æ–‡ä»‹ç»äº†å¼ºåŒ–å­¦ä¹ çš„ model-free æ–¹æ³•â€”â€”è’™ç‰¹å¡æ´›æ³•ã€‚  1. å¼•è¨€  2. è’™ç‰¹å¡æ´›æ³•          2.1. å¤§æ•°å®šå¾‹      2.2. è’™ç‰¹å¡æ´›æ³•      2.3. è’™ç‰¹å¡æ´›ä»·å€¼ä¼°è®¡      2.4. å¢é‡æ›´æ–°æ–¹æ³•        3. å‚è€ƒæ–‡çŒ®1. å¼•è¨€åœ¨å‰é¢çš„ model-based åŠ¨æ€è§„åˆ’æ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬å‡è®¾å·²çŸ¥æ¨¡å‹çš„åŠ¨æ€ç‰¹æ€§ $p(s^\\prime,r \\ver...",
    "content": "æœ¬æ–‡ä»‹ç»äº†å¼ºåŒ–å­¦ä¹ çš„ model-free æ–¹æ³•â€”â€”è’™ç‰¹å¡æ´›æ³•ã€‚  1. å¼•è¨€  2. è’™ç‰¹å¡æ´›æ³•          2.1. å¤§æ•°å®šå¾‹      2.2. è’™ç‰¹å¡æ´›æ³•      2.3. è’™ç‰¹å¡æ´›ä»·å€¼ä¼°è®¡      2.4. å¢é‡æ›´æ–°æ–¹æ³•        3. å‚è€ƒæ–‡çŒ®1. å¼•è¨€åœ¨å‰é¢çš„ model-based åŠ¨æ€è§„åˆ’æ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬å‡è®¾å·²çŸ¥æ¨¡å‹çš„åŠ¨æ€ç‰¹æ€§ $p(s^\\prime,r \\vert s,a)$ï¼Œæ­¤æ—¶å¯ä»¥å¯¹ä¸‹ä¸€æ­¥çš„çŠ¶æ€å’Œå›æŠ¥åšå‡ºé¢„æµ‹ã€‚è€Œåœ¨å¾ˆå¤šå®é™…æ¡ˆä¾‹ä¸­ï¼Œæˆ‘ä»¬æ— æ³•å¾—çŸ¥æ¨¡å‹çš„åŠ¨æ€ç‰¹æ€§ï¼Œæ­¤æ—¶åŠ¨æ€è§„åˆ’æ–¹æ³•å°±ä¸é€‚ç”¨äº†ã€‚2. è’™ç‰¹å¡æ´›æ³•2.1. å¤§æ•°å®šå¾‹å¤§æ•°å®šå¾‹çš„å®šä¹‰æ˜¯ï¼Œå½“éšæœºäº‹ä»¶å‘ç”Ÿçš„æ¬¡æ•°è¶³å¤Ÿå¤šæ—¶ï¼Œéšæœºäº‹ä»¶å‘ç”Ÿçš„é¢‘ç‡è¶‹è¿‘äºé¢„æœŸçš„æ¦‚ç‡ã€‚å¯ä»¥ç®€å•ç†è§£ä¸ºæ ·æœ¬æ•°é‡è¶Šå¤šï¼Œå…¶å¹³æ¦‚ç‡è¶Šæ¥è¿‘äºæœŸæœ›å€¼ã€‚å¤§æ•°å®šå¾‹çš„æ¡ä»¶ï¼š1ã€ç‹¬ç«‹é‡å¤äº‹ä»¶ï¼›2ã€é‡å¤æ¬¡æ•°è¶³å¤Ÿå¤šã€‚2.2. è’™ç‰¹å¡æ´›æ³•è’™ç‰¹å¡æ´›æ–¹æ³•çš„ä¸»è¦æ€æƒ³æ˜¯â€œå½“æ‰€æ±‚è§£é—®é¢˜æ˜¯æŸç§éšæœºäº‹ä»¶å‡ºç°çš„æ¦‚ç‡ï¼Œæˆ–è€…æ˜¯æŸä¸ªéšæœºå˜é‡çš„æœŸæœ›å€¼æ—¶ï¼Œé€šè¿‡æŸç§â€œå®éªŒâ€çš„æ–¹æ³•ï¼Œä»¥è¿™ç§äº‹ä»¶å‡ºç°çš„é¢‘ç‡ä¼°è®¡è¿™ä¸€éšæœºäº‹ä»¶çš„æ¦‚ç‡ï¼Œæˆ–è€…å¾—åˆ°è¿™ä¸ªéšæœºå˜é‡çš„æŸäº›æ•°å­—ç‰¹å¾ï¼Œå¹¶å°†å…¶ä½œä¸ºé—®é¢˜çš„è§£ã€‚æ˜¯ä¸€ç§åŸºäºå¤§æ•°å®šå¾‹çš„ç»Ÿè®¡æ–¹æ³•ã€‚è’™ç‰¹å¡æ´›æ–¹æ³•è§£å†³å¼ºåŒ–é—®é¢˜çš„æœ¬è´¨ï¼Œæ˜¯åŸºäºé€šè¿‡é‡‡æ ·å¤§é‡æ•°æ®æ¥è¿›è¡Œå­¦ä¹ çš„ç»éªŒæ–¹æ³•å®ç°çš„ï¼Œå› æ­¤ï¼Œå³ä¾¿æ˜¯åœ¨ç¯å¢ƒæ¨¡å‹ $p(s^\\prime,r \\vert s,a)$ æœªçŸ¥/æœªå®Œå…¨å¯çŸ¥çš„æƒ…å†µä¸‹ï¼Œé‡‡ç”¨æ—¶é—´æ­¥éª¤æœ‰é™çš„ã€å®Œæ•´åºåˆ—(episode)ä¸­è¿›è¡Œé‡‡æ ·ï¼Œå¹¶é€šè¿‡å¹³å‡é‡‡æ ·å›æŠ¥æ¥è§£å†³å¼ºåŒ–å­¦ä¹ é—®é¢˜ã€‚2.3. è’™ç‰¹å¡æ´›ä»·å€¼ä¼°è®¡åœ¨ä¸€æ¬¡äº¤äº’è¿‡ç¨‹ä¸­ï¼Œå¯é‡‡æ ·å¾—åˆ°ä¸€æ¡åºåˆ—\\[s_0, a_0, r_1, s_1, a_1, r_2, s_2,\\cdots\\]é‡‡é›† $N$ æ¡åºåˆ—ï¼Œå¯¹äºå…¶ä¸­æ¯æ¡åºåˆ—ï¼Œæ‰¾å¯»æœŸæœ›çš„çŠ¶æ€èµ·ç‚¹ $s$ å¹¶è®¡ç®—å¯¹åº”çš„ $G_t$\\[G_t = \\sum_{k=0} \\gamma^k R^{t+k+1}\\]ç”±äºåºåˆ—ä¸­æœŸæœ›çŠ¶æ€èµ·ç‚¹å¯èƒ½ä¸å­˜åœ¨ï¼Œä¹Ÿå¯èƒ½å‡ºç°1æ¬¡ï¼Œä¹Ÿå¯èƒ½å‡ºç°å¤šæ¬¡ï¼Œå› æ­¤æœŸæœ›çš„çŠ¶æ€èµ·ç‚¹ $s$ çš„æ‰¾å¯»æ–¹å¼åˆ†ä¸ºä¸¤ç§ï¼š  é¦–æ¬¡è®¿é—®å‹ï¼ˆfirst visitï¼‰ï¼šåªé‡‡é›†ç¬¬ä¸€ä¸ªå‡ºç° $s$ æ—¶å¯¹åº”çš„ $G_t$  æ¯æ¬¡è®¿é—®å‹ï¼ˆevery visitï¼‰ï¼šé‡‡é›†æ¯æ¬¡å‡ºç° $s$ æ—¶å¯¹åº”çš„ $G_t$é¦–æ¬¡è®¿é—®å‹å’Œæ¯æ¬¡è®¿é—®å‹ç›¸æ¯”ä¹‹ä¸‹å„æœ‰åˆ©å¼Šã€‚é¦–æ¬¡è®¿é—®å‹çš„ä¼˜åŠ¿ä¸æ¯æ¬¡è®¿é—®å‹çš„åŠ£åŠ¿ï¼š  ç”±äºåºåˆ—ä¸åºåˆ—ä¹‹é—´ç›¸äº’ç‹¬ç«‹ï¼Œè‹¥ä»æ¯ä¸ªç›¸äº’ç‹¬ç«‹çš„åºåˆ—ä¸­å–å‡ºå”¯ä¸€ä¸€ä¸ªçŠ¶æ€ $s$ çš„å›æŠ¥ï¼Œé‚£ä¹ˆé¦–æ¬¡è®¿é—®å‹äº§ç”Ÿçš„å›æŠ¥æ ·æœ¬åŒæ ·ä¹Ÿæ˜¯ç»è¿‡ç‹¬ç«‹è¯•éªŒäº§ç”Ÿçš„ç›¸äº’ç‹¬ç«‹çš„æ ·æœ¬ï¼›  ç›¸æ¯”ä¹‹ä¸‹ï¼Œè‹¥å°†ç›¸åŒåºåˆ—ä¸‹çš„çŠ¶æ€ $s$ çš„å›æŠ¥å‡ä½œä¸ºæ ·æœ¬ï¼Œæ ¹æ®å›æŠ¥çš„è®¡ç®—è¿‡ç¨‹ï¼Œå›æŠ¥ä¹‹é—´å¯èƒ½å­˜åœ¨å…³è”å…³ç³»ï¼›é¦–æ¬¡è®¿é—®å‹çš„åŠ£åŠ¿ä¸æ¯æ¬¡è®¿é—®å‹çš„ä¼˜åŠ¿ï¼š  ç”±äºé¦–æ¬¡è®¿é—®å‹åªä»ä¸€ä¸ªåºåˆ—ä¸­è·å–ä¸€ä¸ªæ ·æœ¬(åœ¨åºåˆ—ä¸­å­˜åœ¨çŠ¶æ€ $s$ çš„æ¡ä»¶ä¸‹)ï¼Œå› æ­¤è·å–æ ·æœ¬é›†éœ€è¦çš„åºåˆ—æ•°é‡å¤§äºæ ·æœ¬é›†æ•°é‡ï¼ˆå› ä¸ºå¯èƒ½å­˜åœ¨æŸä¸ªåºåˆ—ä¸­ä¸å«çŠ¶æ€ $s$ï¼‰ã€‚  ç›¸æ¯”ä¹‹ä¸‹ï¼Œæ¯æ¬¡è®¿é—®å‹å¯èƒ½ä»…éœ€è¦æ›´å°‘çš„åºåˆ—æ•°é‡å°±å¯ä»¥å¾—åˆ°è¶³å¤Ÿå¤šçš„æ ·æœ¬ã€‚å› æ­¤ï¼Œä»æ”¶é›†æ ·æœ¬èŠ±è´¹ä»£ä»·çš„è§’åº¦è§‚å¯Ÿï¼Œæ¯æ¬¡è®¿é—®å‹ä¼˜äºé¦–æ¬¡è®¿é—®å‹ã€‚æœ€åï¼Œæ ¹æ®å¤§æ•°å®šå¾‹\\[\\begin{aligned}v_\\pi(s) &amp;\\doteq \\mathbb{E}_\\pi[G_t \\vert S_t = s] = \\sum_a\\pi(a\\vert s)\\sum_{s^\\prime,r}p(s^\\prime, r \\vert s,a)(r+\\gamma v_\\pi(s^\\prime))\\\\&amp;=\\frac{1}{N}\\sum_{i=1}^N G_t^{(i)}\\end{aligned}\\]åŒç†å¯è®¡ç®— $q_\\pi(s,a)$ï¼Œä¸”å®é™…è®¡ç®—åŠ¨ä½œä»·å€¼å‡½æ•°çš„æ„ä¹‰æ›´å¤§ï¼Œæ–¹ä¾¿ç­–ç•¥æ”¹è¿›ã€‚ä½†æ³¨æ„ï¼ŒçŠ¶æ€åºåˆ—é‡‡æ ·æ—¶éœ€è¦åŒæ—¶å‘½ä¸­ $S_t=s,A_t = a$ æ¡ä»¶æ—¶æ‰èƒ½é‡‡é›†å¯¹åº”çš„ $G_t$ï¼Œè¿™å¯¹æ ·æœ¬é‡éœ€æ±‚æ›´å¤§ï¼Œæ“ä½œéš¾åº¦æ›´é«˜ã€‚å±€é™æ€§ï¼š      å¯¹ $G_t$ é‡‡æ ·çš„è¿‡ç¨‹ä¸­ï¼Œæ ·æœ¬å¿…é¡»åœ¨ä¸€å¹•ï¼ˆä» $t$ æ—¶åˆ»å¼€å§‹ï¼Œ$T$ æ—¶åˆ»ç»“æŸï¼‰å…¨éƒ¨æ‰§è¡Œç»“æŸçš„çŠ¶æ€ä¸‹ï¼Œæ‰èƒ½è·å– $R_{t+1},R_{t+2},â€¦,R_{t+T}$ çš„å…·ä½“ç»“æœï¼Œå¹¶æœ€ç»ˆè·å¾—1ä¸ª $G_t$ ç»“æœã€‚        æœ€ç»ˆéœ€è¦è·å–è¶³å¤Ÿé‡çš„ï¼ˆ$N$ ä¸ªï¼‰ $G_t$ ç»“æœæ‰èƒ½å¤Ÿæ‰§è¡Œå‡å€¼æ“ä½œï¼Œæ•´ä¸ªè¿‡ç¨‹ç»å¤§éƒ¨åˆ†æ—¶é—´æµªè´¹åœ¨äº†é‡‡æ ·è¿‡ç¨‹ï¼Œæ—¶é—´åˆ©ç”¨ç‡æä½ã€‚  2.4. å¢é‡æ›´æ–°æ–¹æ³•ä¸ºäº†å®¢æœä¸Šè¿°ç¼ºç‚¹ï¼Œè®¡ç®—å‡å€¼æ—¶ï¼Œå¯é‡‡ç”¨å¢é‡æ›´æ–°æ–¹æ³•ï¼Œæ›´æ–°æ—¶é—´æ›´çŸ­ï¼Œæ›´å®¹æ˜“è§‚å¯Ÿåˆ°æ”¶æ•›ç»“æœï¼Œæœ‰æ•ˆæé«˜äº†æ—¶é—´çš„åˆ©ç”¨ç‡ã€‚ä»¥å–å‡å€¼ä¸ºä¾‹ï¼Œå·²çŸ¥ä¸€ä¸ªæ•°åˆ—ä¸­åŒ…å«3ä¸ªæ•°å€¼ $[3,4,5]$ï¼Œå¢é‡æ›´æ–°æ–¹æ³•å¦‚ä¸‹ï¼š\\[\\begin{aligned}u_1 &amp;= \\frac{1}{1}\\sum_{i=1}^1 x_i = 3\\\\u_2 &amp;= \\frac{1}{2}\\sum_{i=1}^2 x_i = \\frac{3+4}{2} = 3.5\\\\\\Rightarrow u_2 &amp;= u_1+\\frac{1}{2}(x_2-u_1) = 3+\\frac{1}{2} = 3.5\\\\\\Rightarrow u_3 &amp;= u_2+\\frac{1}{3}(x_3-u_2) = 3.5+\\frac{1}{2} = 4\\end{aligned}\\]åˆ™è’™ç‰¹å¡æ´›å¢é‡æ›´æ–°æ–¹æ³•å¦‚ä¸‹\\[\\left\\{\\begin{aligned}N(S_t) &amp;\\leftarrow N(S_t)+1\\\\v(S_t) &amp;\\leftarrow v(S_t) + \\frac{1}{N(S_t)} (G_t - v(S_t))\\end{aligned}\\right.\\]è¿™æ ·åªéœ€è¦æ¯æ¬¡å¾—åˆ° 1ä¸ª æ–°çš„ $G_t$ å³å¯æ›´æ–°ä¸€æ¬¡ä»·å€¼å‡½æ•°ï¼Œå³ä¾¿å’ŒçœŸæ­£çš„å‡å€¼å­˜åœ¨å·®å¼‚ï¼Œä½†æ›´æ–°æ—¶é—´æ›´çŸ­ï¼Œæ›´å®¹æ˜“è§‚å¯Ÿåˆ°æ”¶æ•›ç»“æœï¼Œä¸”å¯ä»¥éšç€æ—¶é—´çš„æ¨ç§»é€æ­¥æ¥è¿‘å‡å€¼ã€‚å±€é™æ€§ï¼šç„¶è€Œï¼Œä»ç„¶è¦æ±‚é‡‡æ ·ä¸€æ¡å®Œæ•´çš„åºåˆ—ç›´åˆ°ç»“æŸæ—¶åˆ» $T$ æ‰èƒ½è®¡ç®—å‡º 1ä¸ª $G_t$ã€‚å› ä¸º\\[G_t = \\sum_{k=0} \\gamma^k R^{t+k+1}\\]åé¢ä»‹ç»æ—¶åºå·®åˆ†æ³•å…‹æœè¯¥å±€é™ã€‚3. å‚è€ƒæ–‡çŒ®[1] shuhuai008. bilibiliè’™ç‰¹å¡æ´›æ–¹æ³•-å¼ºåŒ–å­¦ä¹ -åˆé›†[2] éŸµå°˜. çŸ¥ä¹ï¼š5.1 â€”â€” è’™ç‰¹å¡æ´›é¢„æµ‹ï¼ˆMonte Carlo Predictionï¼‰[3] é™é™çš„å–é…’. å¼ºåŒ–å­¦ä¹ ä¹‹SARSA"
  },
  
  {
    "title": "å¼ºåŒ–å­¦ä¹ ï¼ˆåŠ¨æ€è§„åˆ’ï¼‰",
    "url": "/posts/reinforcement-learning-Dynamic-Programming/",
    "categories": "Academic, Knowledge",
    "tags": "python, reinforcement learning",
    "date": "2022-11-26 11:24:19 +0800",
    





    
    "snippet": "æœ¬æ–‡ä»‹ç»äº†å¼ºåŒ–å­¦ä¹ çš„åŠ¨æ€è§„åˆ’æ³•ï¼ˆDynamic Programmingï¼ŒDPï¼‰ï¼Œé‡‡ç”¨åŠ¨æ€è§„åˆ’çš„æ€æƒ³ï¼Œåˆ†åˆ«ä»‹ç»ç­–ç•¥è¿­ä»£å’Œä»·å€¼è¿­ä»£æ–¹æ³•ã€‚  1. å¼ºåŒ–å­¦ä¹ é—®é¢˜çš„æ±‚è§£  2. åŠ¨æ€è§„åˆ’          2.1. ç­–ç•¥è¿­ä»£                  2.1.1. ç­–ç•¥è¯„ä¼°          2.1.2. ç­–ç•¥æ”¹è¿›          2.1.3. ç­–ç•¥è¿­ä»£                  ...",
    "content": "æœ¬æ–‡ä»‹ç»äº†å¼ºåŒ–å­¦ä¹ çš„åŠ¨æ€è§„åˆ’æ³•ï¼ˆDynamic Programmingï¼ŒDPï¼‰ï¼Œé‡‡ç”¨åŠ¨æ€è§„åˆ’çš„æ€æƒ³ï¼Œåˆ†åˆ«ä»‹ç»ç­–ç•¥è¿­ä»£å’Œä»·å€¼è¿­ä»£æ–¹æ³•ã€‚  1. å¼ºåŒ–å­¦ä¹ é—®é¢˜çš„æ±‚è§£  2. åŠ¨æ€è§„åˆ’          2.1. ç­–ç•¥è¿­ä»£                  2.1.1. ç­–ç•¥è¯„ä¼°          2.1.2. ç­–ç•¥æ”¹è¿›          2.1.3. ç­–ç•¥è¿­ä»£                    2.2. ä»·å€¼è¿­ä»£      2.3. å¼‚æ­¥åŠ¨æ€è§„åˆ’        3. å‚è€ƒæ–‡çŒ®1. å¼ºåŒ–å­¦ä¹ é—®é¢˜çš„æ±‚è§£å¼ºåŒ–å­¦ä¹ çš„æœ€ç»ˆç›®æ ‡æ˜¯ä¸ºäº†æ±‚è§£æœ€ä¼˜ç­–ç•¥ï¼Œè€Œæœ€ä¼˜ç­–ç•¥ä¸€å®šå¯¹åº”ç€æœ€ä¼˜çš„ä»·å€¼å‡½æ•°ï¼ˆåªè¦çŸ¥é“äº†æœ€ä¼˜ä»·å€¼å‡½æ•°å°±èƒ½å¾ˆè½»æ¾çš„å¾—åˆ°æœ€ä¼˜ç­–ç•¥ï¼‰ï¼Œå› æ­¤å¯å°†å¼ºåŒ–å­¦ä¹ çš„ç›®æ ‡åˆ†è§£ä¸ºä»¥ä¸‹ä¸¤ä¸ªåŸºæœ¬é—®é¢˜ï¼š  é¢„æµ‹é—®é¢˜ï¼Œä¹Ÿå³é¢„æµ‹ç»™å®šç­–ç•¥çš„çŠ¶æ€ä»·å€¼å‡½æ•°ã€‚ç»™å®šå¼ºåŒ–å­¦ä¹ çš„6ä¸ªè¦ç´ ï¼šçŠ¶æ€é›†$S$, åŠ¨ä½œé›†$A$, æ¨¡å‹çŠ¶æ€è½¬ç§»æ¦‚ç‡çŸ©é˜µ$P$, å³æ—¶å¥–åŠ±$R$ï¼Œè¡°å‡å› å­$\\gamma$,  ç»™å®šç­–ç•¥$\\pi$ï¼Œ æ±‚è§£è¯¥ç­–ç•¥çš„çŠ¶æ€ä»·å€¼å‡½æ•°$v_\\pi(s)$ æˆ–åŠ¨ä½œä»·å€¼å‡½æ•° $q_\\pi(s,a)$ï¼›  æ§åˆ¶é—®é¢˜ï¼Œä¹Ÿå³æ±‚è§£æœ€ä¼˜çš„ä»·å€¼å‡½æ•°å’Œç­–ç•¥ã€‚ç»™å®šå¼ºåŒ–å­¦ä¹ çš„5ä¸ªè¦ç´ ï¼šçŠ¶æ€é›†$S$, åŠ¨ä½œé›†$A$, æ¨¡å‹çŠ¶æ€è½¬ç§»æ¦‚ç‡çŸ©é˜µ$P$, å³æ—¶å¥–åŠ±$R$ï¼Œè¡°å‡å› å­$\\gamma$, æ±‚è§£æœ€ä¼˜çš„çŠ¶æ€ä»·å€¼å‡½æ•°$v_{\\star}$ å’Œæœ€ä¼˜ç­–ç•¥ $\\pi_{\\star}$ã€‚ã€€2. åŠ¨æ€è§„åˆ’åŠ¨æ€è§„åˆ’ï¼ˆDynamic Programmingï¼ŒDPï¼‰æ˜¯ä¸€ç§å°†å¤æ‚é—®é¢˜ç®€å•åŒ–çš„æ€æƒ³ï¼Œè€Œä¸æ˜¯æŒ‡æŸç§å…·ä½“çš„ç®—æ³•ã€‚DPç®—æ³•é€šè¿‡æŠŠå¤æ‚é—®é¢˜åˆ†è§£ä¸ºå­é—®é¢˜ï¼Œé€šè¿‡æ±‚è§£å­é—®é¢˜è¿›è€Œå¾—åˆ°æ•´ä¸ªé—®é¢˜çš„è§£ã€‚åœ¨è§£å†³å­é—®é¢˜çš„æ—¶å€™ï¼Œå…¶ç»“æœé€šå¸¸éœ€è¦å­˜å‚¨èµ·æ¥è¢«ç”¨æ¥è§£å†³åç»­å¤æ‚é—®é¢˜ã€‚ä¸€ä¸ªå¤æ‚é—®é¢˜å¯ä»¥ä½¿ç”¨DPæ€æƒ³æ¥æ±‚è§£ï¼Œåªè¦æ»¡è¶³ä¸¤ä¸ªæ€§è´¨å°±å¯ä»¥ï¼š(1)ä¸€ä¸ªå¤æ‚é—®é¢˜çš„æœ€ä¼˜è§£ç”±æ•°ä¸ªå°é—®é¢˜çš„æœ€ä¼˜è§£æ„æˆï¼Œå¯ä»¥é€šè¿‡å¯»æ‰¾å­é—®é¢˜çš„æœ€ä¼˜è§£æ¥å¾—åˆ°å¤æ‚é—®é¢˜çš„æœ€ä¼˜è§£ï¼›(2)å­é—®é¢˜åœ¨å¤æ‚é—®é¢˜å†…é‡å¤å‡ºç°ï¼Œä½¿å¾—å­é—®é¢˜çš„è§£å¯ä»¥è¢«å­˜å‚¨èµ·æ¥é‡å¤åˆ©ç”¨ã€‚å·§äº†ï¼Œå¼ºåŒ–å­¦ä¹ è¦è§£å†³çš„é—®é¢˜åˆšå¥½æ»¡è¶³è¿™ä¸¤ä¸ªæ¡ä»¶ã€‚è¿˜è®°å¾—è´å°”æ›¼æ–¹ç¨‹å—ï¼Ÿ\\[\\begin{aligned}v(s)&amp; \\leftarrow\\mathbb{E}_\\pi[R_{t+1}+\\gamma v(s^\\prime)]\\\\\\Rightarrow v(s) &amp; = \\sum_{a\\in A}\\pi(a\\vert s)[R_s^a+\\gamma \\sum_{s^\\prime \\in S}P_{ss^\\prime}^a v(s^\\prime)]\\\\\\end{aligned}\\]ä¸éš¾å‘ç°ï¼Œå½“æ¨¡å‹å·²çŸ¥æ—¶ï¼ˆå³ $A,P_{ss^\\prime}^a, R_s^a$ å·²çŸ¥ï¼‰ï¼Œæˆ‘ä»¬å¯ä»¥å®šä¹‰å‡ºå­é—®é¢˜æ±‚è§£æ¯ä¸ªçŠ¶æ€çš„çŠ¶æ€ä»·å€¼å‡½æ•°ï¼ŒåŒæ—¶è¿™ä¸ªå¼å­åˆæ˜¯ä¸€ä¸ªé€’æ¨çš„å¼å­, æ„å‘³ç€åˆ©ç”¨å®ƒï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸Šä¸€ä¸ªè¿­ä»£å‘¨æœŸå†…çš„çŠ¶æ€ä»·å€¼æ¥è®¡ç®—æ›´æ–°å½“å‰è¿­ä»£å‘¨æœŸæŸçŠ¶æ€ $s$ çš„çŠ¶æ€ä»·å€¼ï¼ˆè¯¦è§ç­–ç•¥è¿­ä»£ï¼‰ã€‚å¯è§ï¼Œä½¿ç”¨åŠ¨æ€è§„åˆ’æ¥æ±‚è§£å¼ºåŒ–å­¦ä¹ é—®é¢˜æ˜¯æ¯”è¾ƒè‡ªç„¶çš„ã€‚  æ­¤å¤„æœ‰ä¸€ä¸ªæ¦‚å¿µï¼šå€¼å‡½æ•°çš„è®¡ç®—ç”¨åˆ°äº†bootstappingçš„æ–¹æ³•ã€‚æ‰€è°“bootstrppingæœ¬æ„æ˜¯æŒ‡è‡ªä¸¾ï¼Œæ­¤å¤„æ˜¯æŒ‡å½“å‰å€¼å‡½æ•°çš„è®¡ç®—ç”¨åˆ°äº†åç»§çŠ¶æ€çš„å€¼å‡½æ•°ï¼Œä¹Ÿå³ç”¨åç»§çŠ¶æ€çš„å€¼å‡½æ•°è®¡ç®—å½“å‰å€¼å‡½æ•°ã€‚åŠ¨æ€è§„åˆ’è¦æ±‚é©¬å°”å¯å¤«å†³ç­–è¿‡ç¨‹äº”å…ƒç»„å®Œå…¨å·²çŸ¥ï¼Œå³ $&lt;S,A,P,R,\\gamma&gt;$ æ˜¯å®Œå…¨ç¡®å®šçš„ã€‚åœ¨æ±‚è§£å¼ºåŒ–å­¦ä¹ é—®é¢˜æ—¶ï¼ŒåŠ¨æ€è§„åˆ’æ–¹æ³•å°±æ˜¯ä¸€ç§åŸºäºæ¨¡å‹çš„æ–¹æ³•ï¼ˆmodel-basedï¼‰ã€‚2.1. ç­–ç•¥è¿­ä»£çŸ¥é“äº†åŠ¨æ€è§„åˆ’ä¸å¼ºåŒ–å­¦ä¹ çš„è”ç³»ï¼Œæˆ‘ä»¬å°±èƒ½ç”¨DPçš„æ€æƒ³å»æ±‚è§£å¼ºåŒ–å­¦ä¹ é—®é¢˜ã€‚ç­–ç•¥è¿­ä»£åŒ…æ‹¬ç­–ç•¥è¯„ä¼°ï¼ˆPolicy Evaluationï¼‰å’Œç­–ç•¥æ”¹è¿›ï¼ˆPolicy Improvementï¼‰ï¼Œå…¶åŸºæœ¬è¿‡ç¨‹æ˜¯ä»ä¸€ä¸ªåˆå§‹åŒ–çš„ç­–ç•¥å‡ºå‘ï¼Œå…ˆè¿›è¡Œç­–ç•¥è¯„ä¼°ï¼Œç„¶åç­–ç•¥æ”¹è¿›ï¼Œè¯„ä¼°æ”¹è¿›çš„ç­–ç•¥ï¼Œå†è¿›ä¸€æ­¥æ”¹è¿›ç­–ç•¥ï¼Œç»è¿‡ä¸æ–­è¿­ä»£æ›´æ–°ï¼Œç›´åˆ°ç­–ç•¥æ”¶æ•›ã€‚ä¸‹é¢å…·ä½“ä»‹ç»ç­–ç•¥è¯„ä¼°å’Œç­–ç•¥æ”¹è¿›ã€‚2.1.1. ç­–ç•¥è¯„ä¼°  è§£ææ±‚è§£è®°\\[\\begin{aligned}v_\\pi &amp;\\doteq [v_\\pi(s_1)\\; v_\\pi(s_2)\\; \\cdots]^T_{n\\times 1}\\\\r_\\pi &amp;\\doteq [r_\\pi(s_1)\\; r_\\pi(s_2)\\; \\cdots]^T_{n\\times 1}\\\\P_\\pi &amp;\\doteq [P_\\pi(s,s^\\prime)]_{n\\times n}\\end{aligned}\\]æ ¹æ®è´å°”æ›¼æœŸæœ›æ–¹ç¨‹ï¼Œå¯ä»¥çœ‹å‡ºå…¶æ˜¯ä¸€ä¸ªå…³äº $v_\\pi(s)$ çš„çº¿æ€§æ–¹ç¨‹\\[\\begin{aligned}v_\\pi(s) =&amp; \\sum_a \\pi(a\\vert s) \\sum_{s^\\prime}\\sum_r p(s^\\prime,r \\vert s,a) [  r+\\gamma v_\\pi(s^\\prime)  ]\\\\=&amp;\\sum_a \\pi(a\\vert s) \\sum_{s^\\prime}\\sum_r p(s^\\prime,r \\vert s,a)r\\\\&amp;+\\gamma \\sum_a \\pi(a\\vert s) \\sum_{s^\\prime}\\sum_r p(s^\\prime,r \\vert s,a)v_\\pi(s^\\prime)\\\\\\end{aligned}\\]å…¶ä¸­ç¬¬ä¸€é¡¹ï¼ˆç§¯æ‰ $s^\\prime$ï¼‰\\[\\begin{aligned}&amp;=\\sum_a \\pi(a\\vert s) \\sum_r p(r \\vert s,a) r\\\\&amp;= \\sum_a \\pi(a\\vert s) \\mathbb{E}_\\pi[R_{t+1}\\vert s,a]\\\\&amp;\\doteq \\sum_a \\pi(a\\vert s) r(s,a)\\quad ï¼ˆå®šä¹‰r(s,a)ï¼‰\\\\ &amp;\\doteq r_\\pi(s)\\quad \\quad \\quad \\quad \\quad \\quad ï¼ˆå®šä¹‰r_\\pi(s)ï¼‰\\end{aligned}\\]å…¶ä¸­ç¬¬äºŒé¡¹ï¼ˆç§¯æ‰ $r$ï¼‰\\[\\begin{aligned}&amp;=\\gamma \\sum_a \\pi(a\\vert s) \\sum_{s^\\prime} p(s^\\prime \\vert s,a)v_\\pi(s^\\prime)\\\\&amp;=\\gamma \\sum_{s^\\prime} \\sum_a \\pi(a\\vert s) p(s^\\prime \\vert s,a)v_\\pi(s^\\prime)\\\\&amp;\\doteq\\gamma \\sum_{s^\\prime} P_\\pi(s,s^\\prime)v_\\pi(s^\\prime)\\quad ï¼ˆç§¯æ‰aï¼Œå®šä¹‰P_\\pi(s,s^\\prime)ï¼‰\\\\\\end{aligned}\\]äºæ˜¯æœ‰\\[\\begin{aligned}v_\\pi(s) =&amp; r_\\pi(s) + \\gamma \\sum_{s^\\prime} P_\\pi(s,s^\\prime) v_\\pi(s^\\prime)\\end{aligned}\\]ä»¤ $s_i = s, s_j = s^\\prime$ æœ‰\\[\\begin{aligned}v_\\pi(s_i) =&amp; r_\\pi(s_i) + \\gamma \\sum_{j=1}^n P_\\pi(s_i,s_j) v_\\pi(s_j)\\\\\\Rightarrow V_\\pi &amp;= R_\\pi + \\gamma P_\\pi V_\\pi \\quad ï¼ˆä¸Šå¼å³ä¸ºè¯¥å¼ç¬¬iè¡Œï¼‰\\\\\\Rightarrow V_\\pi &amp;= (I-\\gamma P_\\pi)^{-1}R_\\pi\\end{aligned}\\]ä¸Šè¿°è®¡ç®—å¤æ‚åº¦ä¸º $O(n^3)$ï¼ˆ$n$ é˜¶çŸ©é˜µæ±‚é€†æ—¶é—´å¤æ‚åº¦ä¸º$O(n^3)$ï¼Œç›¸ä¹˜æ—¶é—´å¤æ‚åº¦ä¸º$O(n^3)$ï¼ŒäºŒè€…é¡ºåºæ‰§è¡Œæ—¶é—´å¤æ‚åº¦ä¸º$2O(n^3)$ï¼Œä½†è€ƒè™‘è®¡ç®—å¤æ‚åº¦æ—¶ä¸ç”¨è€ƒè™‘ç³»æ•°ï¼‰ã€‚å½“çŠ¶æ€ç»´åº¦è¾ƒé«˜æ—¶ï¼Œä¸Šè¿°è®¡ç®—è¿‡äºå¤æ‚ï¼Œå› æ­¤ç”¨åé¢çš„è¿­ä»£æ±‚è§£æ–¹æ³•ã€‚  è¿­ä»£æ±‚è§£ç­–ç•¥è¯„ä¼°è¿­ä»£æ±‚è§£çš„åŸºæœ¬æ€è·¯æ˜¯ä»ä»»æ„åˆå§‹çš„ç­–ç•¥å’Œåˆå§‹çš„çŠ¶æ€ä»·å€¼å‡½æ•°å¼€å§‹ï¼Œç»“åˆè´å°”æ›¼æ–¹ç¨‹ã€çŠ¶æ€è½¬ç§»æ¦‚ç‡å’Œå¥–åŠ±ï¼ŒåŒæ­¥è¿­ä»£æ›´æ–°çŠ¶æ€ä»·å€¼å‡½æ•°ï¼Œç›´è‡³å…¶æ”¶æ•›ï¼Œå¾—åˆ°è¯¥ç­–ç•¥ä¸‹æœ€ç»ˆçš„çŠ¶æ€ä»·å€¼å‡½æ•°ã€‚ç­–ç•¥è¯„ä¼°æ—¨åœ¨æ±‚è§£é¢„æµ‹é—®é¢˜ã€‚å‡è®¾ç»™å®šä¸€ä¸ªç­–ç•¥ $\\pi$ï¼Œå’Œåˆå§‹æ—¶åˆ»æ‰€æœ‰çŠ¶æ€çš„çŠ¶æ€ä»·å€¼ $v_0(s)$ã€‚ç¬¬ $k$ è½®è¿­ä»£ï¼Œå·²ç»è®¡ç®—å‡ºæ‰€æœ‰çŠ¶æ€ä»·å€¼ï¼Œåˆ™ç¬¬ $k+1$ è½®è¿­ä»£å¦‚ä½•è®¡ç®—ï¼Ÿå¯ä»¥ç»“åˆè´å°”æ›¼æ–¹ç¨‹æ„é€ ç¬¬ $k+1$ è½®è¿­ä»£çš„çŠ¶æ€ä»·å€¼å‡½æ•°å¦‚ä¸‹\\[\\begin{aligned}v_{\\color{red}{k+1}}(s)  \\doteq &amp; \\sum_{a\\in A}\\pi(a\\vert s)[R_s^a+\\gamma \\sum_{s^\\prime \\in S}P_{ss^\\prime}^a v_{\\color{red}k}(s^\\prime)]\\\\&amp; = \\sum_{a\\in A}\\pi(a\\vert s)\\sum_{s\\prime, r}p(s^\\prime,r \\vert s, a)[r+\\gamma v_{\\color{red}k}(s^\\prime)]    \\end{aligned}\\]é—®é¢˜è½¬åŒ–ä¸ºä¸Šå¼æ˜¯å¦æ”¶æ•›ï¼Ÿæ˜¯å¦æ”¶æ•›åˆ° $v_\\pi$ï¼Ÿï¼ˆæ­¤å¤„ç•¥ï¼‰ä¸ºäº†ä½¿ç”¨é¡ºåºæ‰§è¡Œçš„è®¡ç®—æœºç¨‹åºå®ç°ç­–ç•¥è¯„ä¼°ï¼Œæˆ‘ä»¬éœ€è¦æ„é€ ä¸¤ä¸ªæ•°ç»„ï¼šä¸€ä¸ªç”¨äºå­˜å‚¨æ—§çš„ä»·å€¼å‡½æ•° $v_k(s)$ï¼Œä¸€ä¸ªç”¨äºå­˜å‚¨æ–°çš„ä»·å€¼å‡½æ•° $v_{k+1}(s)$ã€‚è¿™æ ·ï¼Œåœ¨æ—§çš„ä»·å€¼å‡½æ•°ä¸å˜çš„æƒ…å†µä¸‹ï¼Œæ–°çš„ä»·å€¼å‡½æ•°å¯ä»¥ä¸€ä¸ªä¸ªè¢«è®¡ç®—å‡ºæ¥ã€‚åŒæ ·ï¼Œä¹Ÿå¯ä»¥ç®€å•ä½¿ç”¨ä¸€ä¸ªæ•°ç»„æ¥è¿›è¡Œå°±åœ°æ›´æ–°ï¼ˆin-placeï¼‰ï¼Œå³æ¯æ¬¡ç›´æ¥ä½¿ç”¨æ–°çš„ä»·å€¼å‡½æ•°æ›¿æ¢æ—§çš„ä»·å€¼å‡½æ•°ã€‚è¿™ç§å°±åœ°æ›´æ–°çš„æ–¹å¼ä¾ç„¶å¯ä»¥ä¿è¯æ”¶æ•›åˆ°$v_\\pi$ï¼Œå¹¶ä¸”æ”¶æ•›é€Ÿåº¦æ›´å¿«ã€‚å°±åœ°æ›´æ–°æ—¶çš„ä»·å€¼å‡½æ•°è¿­ä»£å¼å­å¦‚ä¸‹ï¼š\\[{\\color{red}v(s)} \\leftarrow \\sum_a \\pi(a\\vert s) \\sum_{s^\\prime,r}p(s^\\prime,r\\vert s,a)[r+\\gamma {\\color{red}v(s^\\prime)}]\\]ä¸‹é¢ç»™å‡ºä¸€ä¸ªç»å…¸çš„ Grid World ä¾‹å­ã€‚å‡è®¾æœ‰ä¸€ä¸ª4x4çš„16å®«æ ¼ã€‚åªæœ‰å·¦ä¸Šå’Œå³ä¸‹çš„æ ¼å­æ˜¯ç»ˆæ­¢æ ¼å­ã€‚è¯¥ä½ç½®çš„ä»·å€¼å›ºå®šä¸º0ï¼Œä¸ªä½“å¦‚æœåˆ°è¾¾äº†è¯¥ä¸¤ä¸ªæ ¼å­ï¼Œåˆ™åœæ­¢ç§»åŠ¨ï¼Œæ­¤åæ¯è½®å¥–åŠ±éƒ½æ˜¯0ã€‚æ³¨æ„ä¸ªä½“æ¯æ¬¡åªèƒ½ç§»åŠ¨ä¸€ä¸ªæ ¼å­ï¼Œä¸”åªèƒ½ä¸Šä¸‹å·¦å³4ç§ç§»åŠ¨é€‰æ‹©ï¼Œä¸èƒ½æ–œç€èµ°, å¦‚æœåœ¨è¾¹ç•Œæ ¼å¾€å¤–èµ°ï¼Œåˆ™ä¼šç›´æ¥ç§»åŠ¨å›åˆ°ä¹‹å‰çš„è¾¹ç•Œæ ¼ã€‚ä¸‹é¢å¯¹é—®é¢˜è¿›è¡Œå®šä¹‰ï¼š  $R_s^a=-1$ï¼Œå³ä¸ªä½“åœ¨16å®«æ ¼å…¶ä»–æ ¼çš„æ¯æ¬¡ç§»åŠ¨ï¼Œå¾—åˆ°çš„å³æ—¶å¥–åŠ±éƒ½ä¸º-1ã€‚  $\\gamma=1$ï¼Œå³å¥–åŠ±çš„ç´¯è®¡ä¸è¡°å‡ã€‚  $P_{ss^\\prime}^a=1$ï¼Œå³æ¯æ¬¡ç§»åŠ¨åˆ°çš„ä¸‹ä¸€æ ¼éƒ½æ˜¯å›ºå®šçš„ï¼ˆå¦‚å¾€ä¸Šèµ°ä¸€å®šåˆ°ä¸Šé¢çš„æ ¼å­ï¼‰ï¼Œä¸è€ƒè™‘è½¬ç§»ä¸ç¡®å®šçš„æƒ…å†µï¼›  $\\pi(a\\vert s) = 0.25, \\forall a\\in A$ï¼Œå³ç»™å®šéšæœºç­–ç•¥ï¼Œæ¯ä¸ªæ ¼å­é‡Œæœ‰25%çš„æ¦‚ç‡å‘å‘¨å›´çš„4ä¸ªæ ¼å­ç§»åŠ¨ã€‚è‡³æ­¤ï¼Œé©¬å°”å¯å¤«å†³ç­–è¿‡ç¨‹çš„æ‰€æœ‰å‚æ•°å‡å·²çŸ¥ï¼Œä¸‹é¢è¿›è¡ŒçŠ¶æ€ä»·å€¼å‡½æ•°é¢„æµ‹ã€‚$k=1$ æ—¶ï¼Œå¸¦å…¥è´å°”æ›¼æ–¹ç¨‹ï¼Œè®¡ç®—ç¬¬äºŒè¡Œç¬¬ä¸€ä¸ªæ ¼å­çš„ä»·å€¼ï¼ˆå…¶ä»–çš„æ ¼å­ç±»ä¼¼ï¼‰\\[v_1^{21}=0.25[(-1+0(up))+(-1+0(down))+(-1+0(left))+(-1+0(right))]=-1\\]$k=2$ æ—¶ï¼Œç»§ç»­è®¡ç®—ç¬¬äºŒè¡Œç¬¬ä¸€ä¸ªæ ¼å­çš„ä»·å€¼ï¼ˆå…¶ä»–çš„æ ¼å­ç±»ä¼¼ï¼‰\\[v_2^{21}=0.25[(-1+0(up))+(-1-1(down))+(-1-1(left))+(-1-1(right))]=-1.75\\]å¦‚æ­¤è¿­ä»£ç›´è‡³æ¯ä¸ªæ ¼å­çš„çŠ¶æ€ä»·å€¼æ”¹å˜å¾ˆå°ä¸ºæ­¢ã€‚è¿™æ—¶æˆ‘ä»¬å°±å¾—åˆ°äº†æ‰€æœ‰æ ¼å­çš„åŸºäºéšæœºç­–ç•¥çš„çŠ¶æ€ä»·å€¼ã€‚å¯ä»¥çœ‹åˆ°ï¼ŒåŠ¨æ€è§„åˆ’çš„ç­–ç•¥è¯„ä¼°è®¡ç®—è¿‡ç¨‹å¹¶ä¸å¤æ‚ï¼Œä½†æ˜¯å¦‚æœæˆ‘ä»¬çš„é—®é¢˜æ˜¯ä¸€ä¸ªéå¸¸å¤æ‚çš„æ¨¡å‹çš„è¯ï¼Œè¿™ä¸ªè®¡ç®—é‡è¿˜æ˜¯éå¸¸å¤§çš„ã€‚2.1.2. ç­–ç•¥æ”¹è¿›åœ¨ç»™å®šç­–ç•¥ $\\pi$ çš„æ¡ä»¶ä¸‹ï¼Œé€šè¿‡ä¸Šé¢çš„ç­–ç•¥è¯„ä¼°å¯ä»¥è¿­ä»£è®¡ç®—å¾—åˆ°ä»·å€¼å‡½æ•°ï¼Œä½†ä»ç„¶æ²¡æœ‰å¾—åˆ°æœ€ä¼˜ç­–ç•¥ã€‚å› ä¸ºå¦‚æœä»çŠ¶æ€ $s$ å¼€å§‹æ‰§è¡Œç°æœ‰ç­–ç•¥ï¼Œæœ€ç»ˆç»“æœå°±æ˜¯ $v_\\pi(s)$ï¼Œä½†æˆ‘ä»¬ä¸çŸ¥é“æ˜¯å¦æœ‰æ›´å¥½çš„ç­–ç•¥ã€‚é‚£ä¹ˆå¦‚ä½•è¿›è¡Œç­–ç•¥æ”¹è¿›å‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥åˆ©ç”¨ â€œç­–ç•¥æ”¹è¿›å®šç†â€ æ¥å®ç°ã€‚  ç­–ç•¥æ”¹è¿›å®šç†  ç­–ç•¥æ”¹è¿›å®šç†ç»™å®š $\\pi,\\pi^\\prime$ï¼Œå¦‚æœ $\\forall s\\in S, q_\\pi(s,\\pi^\\prime(s))\\geq v_\\pi(s)$ï¼Œé‚£ä¹ˆæœ‰ $\\forall s\\in S, v_{\\pi^\\prime}(s)\\geq v_\\pi(s)$ï¼Œå³ $\\pi^\\prime \\geq \\pi$ã€‚è¯æ˜å¦‚ä¸‹ï¼š\\[\\begin{aligned}v_\\pi(s) &amp;\\leq q_\\pi(s,\\pi^\\prime(s))\\\\ &amp;=\\mathbb{E}[R_{t+1}+\\gamma v_\\pi(S_{t+1})\\vert S_t=s,A_t = \\pi^\\prime(s)]\\\\&amp;=\\mathbb{E}_{\\pi^\\prime}[R_{t+1}+\\gamma v_\\pi(S_{t+1})\\vert S_t=s]\\quad (èµ°1æ­¥ï¼šR_{t+1}ç”±\\pi^\\prime æ§åˆ¶ï¼Œåé¢ç”±\\piæ§åˆ¶)\\\\&amp;\\leq \\mathbb{E}_{\\pi^\\prime}[R_{t+1}+\\gamma q_\\pi(S_{t+1},\\pi^\\prime(S_{t+1}))\\vert S_t=s]\\\\&amp;=\\mathbb{E}_{\\pi^\\prime}[R_{t+1}+\\gamma \\mathbb{E}_{\\pi^{\\prime}}[R_{t+2}+\\gamma v_\\pi(S_{t+2})\\vert S_{t+1}]   \\vert S_t=s]\\quad ï¼ˆå‰å¼å¸¦å…¥ï¼‰\\\\&amp;=\\mathbb{E}_{\\pi^\\prime}[R_{t+1}+\\gamma \\mathbb{E}_{\\pi^{\\prime}}[R_{t+2}\\vert S_{t+1}]+\\gamma^2 \\mathbb{E}_{\\pi^{\\prime}} [v_\\pi(S_{t+2}) \\vert S_{t+1} ]  \\vert S_t=s]\\\\&amp;=\\mathbb{E}_{\\pi^\\prime}[R_{t+1}+R_{t+2}+\\gamma^2 v_\\pi(S_{t+2})\\vert S_t=s] \\quad ï¼ˆèµ°2æ­¥ï¼‰\\\\&amp;=\\cdots\\\\&amp;=\\mathbb{E}_\\pi^\\prime[R_{t+1}+\\gamma R_{t+2}+\\cdots \\vert S_t=s] \\\\&amp;= v_{\\pi^\\prime}(s)\\end{aligned}\\]  å‚è€ƒæ¨å¯¼è§ï¼šç­–ç•¥æ”¹è¿›å®šç†åŠè¯æ˜ä¸­éšå¼æœŸæœ›çš„å¤„ç†åŸºäºä»¥ä¸Šè¯æ˜ï¼Œæˆ‘ä»¬çŸ¥é“ç­–ç•¥æ”¹è¿›æ˜¯åˆ‡å®å¯è¡Œçš„ï¼Œé‚£ä¹ˆç©¶ç«Ÿæ€ä¹ˆåšæ‰èƒ½æ›´æ–°ç­–ç•¥å‘¢ï¼Ÿ  è´ªå¿ƒæ–¹æ³•æˆ‘ä»¬çŸ¥é“ï¼š\\[v_{\\pi}(s) = \\mathbb{E}_{a}[q_{\\pi}(s,a)]\\]è€Œæ ¹æ®æœŸæœ›çš„å®šä¹‰ï¼Œæœ€å¤§çš„ $q$ å‡½æ•°è‚¯å®šæ˜¯å¤§äºç­‰äºå…¶æœŸæœ›çš„ï¼Œå³\\[q_\\pi(s,a)_{max} \\geq v_\\pi(s)\\]é‚£ä¹ˆæˆ‘ä»¬æ¯æ¬¡éƒ½é€‰æ‹©ä½¿å¾— $q_\\pi(s,a)$ æœ€å¤§çš„é‚£ä¸ªåŠ¨ä½œï¼Œæ„æˆç­–ç•¥ï¼Œå°±å¯ä»¥ä¿è¯æ»¡è¶³ç­–ç•¥æ”¹è¿›å®šç†ï¼Œæ„æˆçš„ç­–ç•¥å°±æ˜¯æ›´å¥½çš„ç­–ç•¥äº†ï¼è¿™å°±æ˜¯è´ªå¿ƒæ–¹æ³•ã€‚å…·ä½“è€Œè¨€ï¼Œåœ¨å½“å‰ç­–ç•¥å¯¹åº”çš„çŠ¶æ€ä»·å€¼å‡½æ•°ä¸‹ï¼Œæ™ºèƒ½ä½“åœ¨æ¯ä¸ªçŠ¶æ€éƒ½è®¡ç®—ä¸€ä¸‹æ‰€æœ‰åŠ¨ä½œå„è‡ªçš„çŠ¶æ€-åŠ¨ä½œä»·å€¼å‡½æ•°ï¼Œé€‰å‡ºå€¼æœ€å¤§çš„æ‰§è¡Œå°±å¯ä»¥ã€‚è´ªå¿ƒæ–¹æ³•å¦‚ä¸‹ï¼š\\[\\forall s\\in S,\\;  \\pi^\\prime(s) =\\left\\{\\begin{aligned}1, \\quad &amp; a=\\mathop{argmax}\\limits_a\\; q_\\pi(s,a) \\\\0, \\quad &amp; otherwise\\end{aligned}\\right.\\]è¯æ˜ï¼š\\[\\forall s\\in S,\\; v_\\pi(s) = \\mathbb{E}_a[q_\\pi(s,a)] \\leq max_a q_\\pi(s,a) = max_a q_\\pi(s,\\pi^\\prime(s))\\]æ»¡è¶³ç­–ç•¥æ”¹è¿›å®šç†æ¡ä»¶ï¼Œå› æ­¤æœ‰\\[\\forall s\\in S,\\;v_{\\pi^\\prime}(s) \\geq v_\\pi(s)\\]å¾—è¯ã€‚å› æ­¤ï¼Œç­–ç•¥æ”¹è¿›å®šç†æä¾›äº†ä¸€ç§æ›´æ–°ç­–ç•¥çš„æ–¹å¼ï¼šå¯¹æ¯ä¸ªçŠ¶æ€ $s$ ï¼Œå¯»æ‰¾è´ªå©ªåŠ¨ä½œ $\\mathop{argmax}\\limits_a q_\\pi(s,a)$ ï¼Œä»¥è´ªå©ªåŠ¨ä½œä½œä¸ºæ–°çš„ç­–ç•¥ $\\pi^\\prime$ ï¼Œæ ¹æ®ç­–ç•¥æ”¹è¿›å®šç†å¿…ç„¶æœ‰ $\\pi^\\prime \\geq \\pi$ ã€‚ä¾ç„¶æ˜¯ Grid World ä¾‹å­ï¼Œå‰é¢æˆ‘ä»¬ç»™å®šä¸€ä¸ªéšæœºç­–ç•¥ $\\pi(a\\vert s) = 0.25, \\forall a\\in A$ï¼Œå¹¶å¾—åˆ°äº†å…¶å¯¹åº”çš„çŠ¶æ€ä»·å€¼å‡½æ•°ã€‚æ ¹æ®å‰é¢çš„ç­–ç•¥æ”¹è¿›å®šç†ï¼Œå¯ä»¥é‡‡ç”¨è´ªå©ªæ³•æ¥æ”¹è¿›æˆ‘ä»¬çš„è¿™ä¸ªç­–ç•¥ã€‚å…·ä½“è€Œè¨€ï¼Œä¸ªä½“åœ¨æŸä¸ªçŠ¶æ€ä¸‹é€‰æ‹©çš„è¡Œä¸ºæ˜¯å…¶èƒ½å¤Ÿåˆ°è¾¾åç»­æ‰€æœ‰å¯èƒ½çš„çŠ¶æ€ä¸­çŠ¶æ€ä»·å€¼æœ€å¤§çš„é‚£ä¸ªçŠ¶æ€ï¼Œå¦‚ä¸Šå›¾å³ä¾§æ‰€ç¤ºï¼Œæœ€ç»ˆæ±‚è§£æ§åˆ¶é—®é¢˜ã€‚å½“æˆ‘ä»¬è®¡ç®—å‡ºæœ€ç»ˆçš„çŠ¶æ€ä»·å€¼åï¼Œæˆ‘ä»¬å‘ç°ï¼š  ç¬¬äºŒè¡Œç¬¬ä¸€ä¸ªæ ¼å­å‘¨å›´çš„ä»·å€¼åˆ†åˆ«æ˜¯0,-18,-20ï¼Œæ­¤æ—¶æˆ‘ä»¬ç”¨è´ªå©ªæ³•ï¼Œåˆ™æˆ‘ä»¬è°ƒæ•´è¡ŒåŠ¨ç­–ç•¥ä¸ºå‘çŠ¶æ€ä»·å€¼ä¸º0çš„æ–¹å‘ï¼ˆä¸Šæ–¹ï¼‰ç§»åŠ¨ï¼Œè€Œä¸æ˜¯éšæœºç§»åŠ¨ã€‚è€Œæ­¤æ—¶  ç¬¬äºŒè¡Œç¬¬äºŒä¸ªæ ¼å­å‘¨å›´çš„ä»·å€¼åˆ†åˆ«æ˜¯-14,-14,-20, -20ã€‚é‚£ä¹ˆæˆ‘ä»¬æ•´è¡ŒåŠ¨ç­–ç•¥ä¸ºå‘çŠ¶æ€ä»·å€¼ä¸º-14çš„æ–¹å‘ï¼ˆå·¦æˆ–è€…ä¸Šï¼‰ç§»åŠ¨ã€‚  â€¦â€¦ä»¥æ­¤ç±»æ¨ã€‚  æ³¨æ„åˆ°ï¼šä¸Šè¿°è¿‡ç¨‹çš„ç­–ç•¥æ˜¯åŸºäºæœ€å¤§çš„ $v_\\pi(s)$ï¼Œä½†å®é™…ä¸Šåº”è¯¥æ ¹æ® $q_\\pi(s,a)$ æ¥è°ƒæ•´ç­–ç•¥ $q_\\pi(s,a) = \\mathbb{E}[R_{t+1}+\\gamma v_\\pi(s^\\prime) ]$ä½†ç”±äºæœ¬ä¾‹ä¸­ï¼Œæ‰€æœ‰å¯è¡Œçš„çš„çŠ¶æ€è½¬åŒ–æ¦‚ç‡P=1ï¼Œç¬æ—¶å¥–åŠ±éƒ½æ˜¯-1ï¼Œè¡°å‡å› å­å®šä¹‰ä¸º1ï¼Œæ‰€ä»¥å…¶å® $q$ å‡½æ•°çš„å€¼å°±æ˜¯ä¸‹ä¸€ä¸ªçŠ¶æ€çš„çŠ¶æ€ä»·å€¼ $v$ï¼Œè¿™ä¹Ÿå°±æ˜¯ä¸ºä»€ä¹ˆç›´æ¥å¾€çŠ¶æ€ä»·å€¼æœ€å¤§çš„é‚£ä¸ªçŠ¶æ€ç§»åŠ¨å°±å¯ä»¥çš„åŸå› ã€‚æ€»ç»“ï¼Œç­–ç•¥è¿­ä»£å°±æ˜¯åœ¨å¾ªç¯è¿›è¡Œä¸¤éƒ¨åˆ†å·¥ä½œï¼Œç¬¬ä¸€æ­¥æ˜¯ä½¿ç”¨å½“å‰ç­–ç•¥ $\\pi$ è¯„ä¼°è®¡ç®—å½“å‰ç­–ç•¥çš„æœ€ç»ˆçŠ¶æ€ä»·å€¼ $v$ï¼Œç¬¬äºŒæ­¥æ˜¯æ ¹æ®çŠ¶æ€ä»·å€¼ $v$ æ ¹æ®ä¸€å®šçš„æ–¹æ³•ï¼ˆæ¯”å¦‚è´ªå©ªæ³•ï¼‰æ›´æ–°ç­–ç•¥ $\\pi$ï¼Œæ¥ç€å›åˆ°ç¬¬ä¸€æ­¥ï¼Œä¸€ç›´è¿­ä»£ä¸‹å»ï¼Œæœ€ç»ˆå¾—åˆ°æ”¶æ•›çš„ç­–ç•¥ $\\pi_{\\star}$ å’ŒçŠ¶æ€ä»·å€¼ $v_âˆ—$ã€‚2.1.3. ç­–ç•¥è¿­ä»£æœ€ç»ˆçš„ç­–ç•¥è¿­ä»£çš„ç®—æ³•è¡¨è¿°å¦‚ä¸‹ï¼š  åˆå§‹åŒ–          å¯¹äºæ‰€æœ‰ $s\\in S$ï¼Œä»»æ„åˆå§‹åŒ–$V(s)$ å’Œ $\\pi(s)$      ç»™å®š $p(s^\\prime,r\\vert s,a)$ å’Œ $r$ å’Œ $\\gamma$      ç»™å®šä¸€ä¸ªå¾ˆå°çš„æ­£æ•´æ•° $\\theta$        ç­–ç•¥è¯„ä¼°          å¾ªç¯($k$)ï¼š                  $\\Delta = 0$          å¯¹äºæ¯ä¸ª $s\\in S$ï¼š                          $v \\leftarrow v_k(s)$              $v_{k+1}(s) =\\sum_a \\pi(a\\vert s) \\sum_{s^\\prime,r}p(s^\\prime,r\\vert s,a)[r+\\gamma v_{k}(s^\\prime)]$              $\\Delta = max(\\Delta, v-v_{k+1}(s))$                                          ç›´è‡³ $\\Delta &lt; \\theta$  ï¼ˆ$v(s)$æ”¶æ•›ï¼‰        ç­–ç•¥æ”¹è¿›          $policy\\;stable \\leftarrow true$      å¯¹äºæ¯ä¸ª $s\\in S$ï¼š                  $a_{old} = \\pi(s)$          $q_\\pi(s,a) = \\sum_{s^\\prime,r}p(s^\\prime,r\\vert s,a)[r+\\gamma v(s^\\prime)]$          $\\pi(s)\\leftarrow \\mathop{argmax}\\limits_a\\; q_\\pi(s,a) $ ï¼ˆè´ªå©ªæ³•ï¼‰          å¦‚æœ $a_{old} \\neq \\pi(s)$ é‚£ä¹ˆ $policy\\;stable \\leftarrow false$                    å¦‚æœ $policy\\;stable \\leftarrow true$ï¼Œåœæ­¢è¿­ä»£ï¼Œå¾—åˆ° $v_\\star\\approx v, \\pi_\\star\\approx \\pi$ï¼›å¦åˆ™è¿”å›æ­¥éª¤ 2      çº¿æ€§åŒ–ç¤ºæ„å›¾å¦‚ä¸‹ï¼ˆå«æœ‰ $v$ è¿­ä»£å’Œ $\\pi$ è¿­ä»£ä¸¤å±‚è¿­ä»£ï¼‰ï¼š\\[v_1 \\rightarrow \\cdots \\rightarrow v_{\\star} \\rightarrow \\pi_1 \\rightarrow v_2 \\rightarrow \\cdots \\rightarrow \\pi_2 \\rightarrow\\]2.2. ä»·å€¼è¿­ä»£åœ¨ç­–ç•¥è¿­ä»£ä¸­ï¼ŒçŠ¶æ€ä»·å€¼å‡½æ•°åœ¨ç­–ç•¥è¯„ä¼°è¿‡ç¨‹ä¸­æ—¶é€šè¿‡è¿­ä»£çš„å½¢å¼è®¡ç®—çš„ï¼Œè¿™éå¸¸è€—æ—¶ã€‚è€Œä¸”æˆ‘ä»¬åœ¨è¿­ä»£è®¡ç®—çŠ¶æ€ä»·å€¼å‡½æ•°çš„æ—¶å€™ç­–ç•¥å¹¶ä¸æ˜¯æœ€ä¼˜çš„ï¼Œç”¨ä¸€ä¸ªéæœ€ä¼˜çš„ç­–ç•¥æ¥è®¡ç®—å®Œå…¨å‡†ç¡®çš„çŠ¶æ€ä»·å€¼å‡½æ•°å¹¶æ²¡æœ‰å¤ªå¤§æ„ä¹‰ã€‚ç”±äºç­–ç•¥è¿­ä»£é€šå¸¸åœ¨è¿­ä»£å‡ æ¬¡åå°±å¯ä»¥æ”¶æ•›ï¼ˆä¸Šæ–‡ä¸­çš„ Grid World ä¾‹å­ï¼Œç¬¬ä¸‰æ¬¡è¿­ä»£åï¼Œç­–ç•¥å°±å·²ç»è¾¾åˆ°æœ€ä¼˜ï¼‰ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥æå‰æˆªæ–­ç­–ç•¥è¯„ä¼°è¿‡ç¨‹ã€‚ä¸€ç§é‡è¦çš„ç‰¹æ®Šçš„æƒ…å†µæ˜¯ï¼Œåœ¨ä¸€æ¬¡éå†åå³åˆ»åœæ­¢ç­–ç•¥è¯„ä¼°ï¼ˆå¯¹æ¯ä¸€ä¸ªçŠ¶æ€è¿›è¡Œä¸€æ¬¡æ›´æ–°ï¼‰ï¼Œè¯¥ç®—æ³•è¢«ç§°ä¸ºä»·å€¼è¿­ä»£ã€‚ä»·å€¼è¿­ä»£ç®—æ³•æ˜¯ç­–ç•¥è¯„ä¼°è¿‡ç¨‹åªè¿›è¡Œä¸€æ¬¡è¿­ä»£çš„ç­–ç•¥è¿­ä»£ç®—æ³•ï¼Œå…¶è¿‡ç¨‹ä¸º ï¼šå¯¹æ¯ä¸€ä¸ªå½“å‰çŠ¶æ€ $s$ ï¼Œå¯¹æ¯ä¸ªå¯èƒ½çš„åŠ¨ä½œ $a$ éƒ½è®¡ç®—ä¸€ä¸‹é‡‡å–è¿™ä¸ªåŠ¨ä½œååˆ°è¾¾çš„ä¸‹ä¸€ä¸ªçŠ¶æ€çš„æœŸæœ›ä»·å€¼ã€‚é€‰æ‹©æœ€å¤§çš„æœŸæœ›ä»·å€¼å‡½æ•°ä½œä¸ºå½“å‰çŠ¶æ€çš„ä»·å€¼å‡½æ•° $v(s)$ ï¼Œå¾ªç¯æ‰§è¡Œè¿™ä¸ªæ­¥éª¤ï¼Œç›´åˆ°ä»·å€¼å‡½æ•°æ”¶æ•›ã€‚ä»·å€¼è¿­ä»£çš„ç®—æ³•è¡¨è¿°å¦‚ä¸‹ï¼š  åˆå§‹åŒ–          å¯¹äºæ‰€æœ‰ $s\\in S$ï¼Œä»»æ„åˆå§‹åŒ–$V(s)$ å’Œ $\\pi(s)$      ç»™å®š $p(s^\\prime,r\\vert s,a)$ å’Œ $r$ å’Œ $\\gamma$      ç»™å®šä¸€ä¸ªå¾ˆå°çš„æ­£æ•´æ•° $\\theta$        ç­–ç•¥è¯„ä¼°          å¾ªç¯($k$)ï¼š                  $\\Delta = 0$          å¯¹äºæ¯ä¸ª $s\\in S$ï¼š                          $v \\leftarrow v_k(s)$              $v_{k+1}(s) \\leftarrow {\\color{red}max_a} \\sum_{s^\\prime,r}p(s^\\prime,r\\vert s,a)[r+\\gamma v_{k}(s^\\prime)]\\qquad$  è´å°”æ›¼æœ€ä¼˜æ–¹ç¨‹              $\\Delta = max(\\Delta, v-v_{k+1}(s))$                                          ç›´è‡³ $\\Delta &lt; \\theta$  ï¼ˆ$v(s)$æ”¶æ•›ï¼‰        ç­–ç•¥æ”¹è¿›          $q_\\pi(s,a) = \\sum_{s^\\prime,r}p(s^\\prime,r\\vert s,a)[r+\\gamma v(s^\\prime)]$      $\\pi(s)\\leftarrow \\mathop{argmax}\\limits_a\\; q_\\pi(s,a) $      å¯ä»¥çœ‹å‡ºï¼š  æ›´æ–°ç›®æ ‡ï¼šæ ¹æ® max æ“ä½œç¬¦æˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œä»·å€¼è¿­ä»£çš„æ›´æ–°ç›®æ ‡ä¸å†æ˜¯ $v_\\pi$ ï¼Œå…¬å¼ä¸­æ²¡æœ‰ä»»ä½•æ˜¾ç¤ºçš„ç­–ç•¥ $\\pi$ çš„å½±å­ï¼Œåä¹‹ï¼Œå…¶æ›´æ–°ç›®æ ‡æ­£æ˜¯æœ€ä¼˜ä»·å€¼å‡½æ•°ï¼ˆä¹Ÿå³æœ€ä¼˜ç­–ç•¥ï¼‰ï¼Œä¸€æ—¦ä»·å€¼è¿­ä»£æ”¶æ•›ï¼ŒåŸºäºå…¶äº§ç”Ÿçš„è´ªå©ªç­–ç•¥å°±æ˜¯æœ€ä¼˜ç­–ç•¥ï¼›  æ›´æ–°æ–¹å¼ï¼š ä» $\\sum_{s^\\prime,r}p(s^\\prime,r\\vert s,a)$ é¡¹æˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼Œä¾ç„¶æ˜¯æœŸæœ›æ›´æ–°çš„æ–¹å¼ï¼Œè¿™ä¸€ç‚¹å’Œç­–ç•¥è¯„ä¼°æ˜¯ä¸€è‡´çš„ã€‚ä¸åŒä¹‹å¤„åœ¨äºç­–ç•¥è¯„ä¼°ä¸­çš„ $\\pi(s)$ è¢«æ›´æ¢ä¸ºäº†å…·æœ‰æœ€å¤§ä»·å€¼çš„ $a$ ï¼Œå³ç­–ç•¥è¿­ä»£ä¸­ç­–ç•¥è¯„ä¼°ä¼°è®¡çŠ¶æ€ä»·å€¼é‡‡ç”¨äº†å…³äºç­–ç•¥åˆ†å¸ƒçš„æœŸæœ›ï¼Œè€Œä»·å€¼è¿­ä»£ä¸­çš„ç­–ç•¥è¯„ä¼°é‡‡ç”¨äº†æœ€å¤§å€¼ï¼›çº¿æ€§åŒ–ç¤ºæ„å›¾å¦‚ä¸‹ï¼ˆåªå«æœ‰ $v$ è¿­ä»£ï¼‰ï¼š\\[v_1 \\rightarrow \\cdots \\rightarrow v_2 \\rightarrow \\cdots \\rightarrow v_{\\star} \\rightarrow \\pi_{\\star}\\]å¯ä»¥çœ‹å‡ºï¼Œä»·å€¼è¿­ä»£æ˜¯æç«¯æƒ…å†µä¸‹çš„ç­–ç•¥è¿­ä»£ã€‚ä»·å€¼è¿­ä»£ä¸­åŒæ ·éœ€è¦å­˜å‚¨ä¸¤ä»½çŠ¶æ€ä»·å€¼å‡½æ•° $v_{k+1}(s),\\; v_k(s)$ï¼Œå®é™…ä¸Šä¹Ÿå¯ä»¥åªä¿å­˜ä¸€ä»½ï¼Œå³é‡‡ç”¨å°±åœ°æ›´æ–°æ–¹æ³•ï¼Œæ­¤æ—¶è¿­ä»£å¼å˜ä¸º\\[{\\color{red}v(s)} \\leftarrow max_a \\sum_{s^\\prime,r}p(s^\\prime,r\\vert s,a)[r+\\gamma {\\color{red}v(s^\\prime)}]\\]2.3. å¼‚æ­¥åŠ¨æ€è§„åˆ’æ¯æ¬¡è¿›è¡Œä»·å€¼ä¼°è®¡å’Œæ›´æ–°æ—¶éƒ½è¦å¯¹å…¨éƒ¨çš„çŠ¶æ€è¿›è¡Œä¸€æ¬¡éå†ï¼Œè¿™æœªå…å¤ªè¿‡ç¹çï¼Œå°¤å…¶æ˜¯å½“çŠ¶æ€ç©ºé—´è¶³å¤Ÿå¤§æ—¶ï¼Œæ¶ˆè€—åœ¨éå†ä¸Šçš„èµ„æºå°±ä¸å°½äººæ„äº†ã€‚é‚£èƒ½ä¸èƒ½ä¸€æ¬¡æ›´æ–°åªé’ˆå¯¹éƒ¨åˆ†çŠ¶æ€è¿›è¡Œå‘¢ï¼Ÿåªæ›´æ–°éƒ¨åˆ†çŠ¶æ€è¿˜èƒ½ä¿è¯ä»·å€¼æ›´æ–°çš„æ”¶æ•›å—ï¼Ÿå¯ä»¥çš„ã€‚åœ¨å¼‚æ­¥åŠ¨æ€è§„åˆ’ç®—æ³•ä¸­ï¼Œæ¯ä¸€æ¬¡è¿­ä»£å¹¶ä¸å¯¹æ‰€æœ‰çŠ¶æ€çš„ä»·å€¼è¿›è¡Œæ›´æ–°ï¼Œè€Œæ˜¯ä¾æ®ä¸€å®šçš„åŸåˆ™æœ‰é€‰æ‹©æ€§åœ°æ›´æ–°éƒ¨åˆ†çŠ¶æ€çš„ä»·å€¼ï¼Œè¿™ç§ç®—æ³•èƒ½æ˜¾è‘—èŠ‚çº¦è®¡ç®—èµ„æºï¼Œå¹¶ä¸”åªè¦æ‰€æœ‰çŠ¶æ€èƒ½å¤Ÿå¾—åˆ°æŒç»­çš„è®¿é—®æ›´æ–°ï¼Œé‚£ä¹ˆä¹Ÿèƒ½ç¡®ä¿ç®—æ³•æ”¶æ•›è‡³æœ€ä¼˜è§£ã€‚ä¸‹é¢åˆ†åˆ«ä»‹ç»æ¯”è¾ƒå¸¸ç”¨çš„å¼‚æ­¥åŠ¨æ€è§„åˆ’æ€æƒ³ï¼š  åŸä½åŠ¨æ€è§„åˆ’ (in-place dynamic programming)ï¼šç›´æ¥åˆ©ç”¨å½“å‰çŠ¶æ€çš„åç»­çŠ¶æ€çš„ä»·å€¼æ¥æ›´æ–°å½“å‰çŠ¶æ€çš„ä»·å€¼ã€‚  ä¼˜å…ˆçº§åŠ¨æ€è§„åˆ’ (prioritised sweeping)ï¼šå¯¹æ¯ä¸€ä¸ªçŠ¶æ€è¿›è¡Œä¼˜å…ˆçº§åˆ†çº§ï¼Œä¼˜å…ˆçº§è¶Šé«˜çš„çŠ¶æ€å…¶çŠ¶æ€ä»·å€¼ä¼˜å…ˆå¾—åˆ°æ›´æ–°ã€‚  å®æ—¶åŠ¨æ€è§„åˆ’ (real-time dynamic programming)ï¼šç›´æ¥ä½¿ç”¨ä¸ªä½“ä¸ç¯å¢ƒäº¤äº’äº§ç”Ÿçš„å®é™…ç»å†æ¥æ›´æ–°çŠ¶æ€ä»·å€¼ï¼Œå¯¹äºé‚£äº›ä¸ªä½“å®é™…ç»å†è¿‡çš„çŠ¶æ€è¿›è¡Œä»·å€¼æ›´æ–°ã€‚3. å‚è€ƒæ–‡çŒ®[1] åˆ˜å»ºå¹³Pinard. å¼ºåŒ–å­¦ä¹ ï¼ˆä¸‰ï¼‰ç”¨åŠ¨æ€è§„åˆ’ï¼ˆDPï¼‰æ±‚è§£.[2] Zeal. çŸ¥ä¹ï¼šå¼ºåŒ–å­¦ä¹ äºŒï¼šç­–ç•¥è¿­ä»£æ³•[3] shuhuai008. bilibiliã€å¼ºåŒ–å­¦ä¹ ã€‘åŠ¨æ€è§„åˆ’ã€ç™½æ¿æ¨å¯¼ç³»åˆ—ã€‘[4] éŸµå°˜. çŸ¥ä¹ï¼š4.2 â€”â€” ç­–ç•¥æ”¹è¿›ï¼ˆPolicy Improvementï¼‰ï¼ˆå«æ”¶æ•›æ€§è¯æ˜ï¼‰[5] éŸµå°˜. çŸ¥ä¹ï¼š4.5 â€”â€” å¼‚æ­¥åŠ¨æ€è§„åˆ’ï¼ˆAsynchronous Dynamic Programmingï¼‰"
  },
  
  {
    "title": "å¼ºåŒ–å­¦ä¹ ï¼ˆé©¬å°”å¯å¤«å†³ç­–è¿‡ç¨‹ï¼‰",
    "url": "/posts/reinforcement-learning-markov-process/",
    "categories": "Academic, Knowledge",
    "tags": "python, reinforcement learning",
    "date": "2022-11-09 12:36:19 +0800",
    





    
    "snippet": "æœ¬æ–‡ä»‹ç»äº†å¼ºåŒ–å­¦ä¹ çš„åŸºæœ¬æ¦‚å¿µå’Œæ¨¡å‹ï¼Œä¸»è¦åŒ…æ‹¬é©¬å°”å¯å¤«è¿‡ç¨‹ã€é©¬å°”å¯å¤«å¥–åŠ±è¿‡ç¨‹å’Œé©¬å°”å¯å¤«å†³ç­–è¿‡ç¨‹ã€‚  1. å¼ºåŒ–å­¦ä¹           1.1. çŠ¶æ€å’Œè§‚æµ‹      1.2. åŠ¨ä½œç©ºé—´      1.3. ç­–ç•¥        2. é©¬å°”å¯å¤«è¿‡ç¨‹ï¼ˆMPï¼‰  3. é©¬å°”å¯å¤«å¥–åŠ±è¿‡ç¨‹ï¼ˆMRPï¼‰          3.1. å¥–åŠ±ï¼ˆRewardï¼‰      3.2. å›æŠ¥ï¼ˆReturnï¼‰      3....",
    "content": "æœ¬æ–‡ä»‹ç»äº†å¼ºåŒ–å­¦ä¹ çš„åŸºæœ¬æ¦‚å¿µå’Œæ¨¡å‹ï¼Œä¸»è¦åŒ…æ‹¬é©¬å°”å¯å¤«è¿‡ç¨‹ã€é©¬å°”å¯å¤«å¥–åŠ±è¿‡ç¨‹å’Œé©¬å°”å¯å¤«å†³ç­–è¿‡ç¨‹ã€‚  1. å¼ºåŒ–å­¦ä¹           1.1. çŠ¶æ€å’Œè§‚æµ‹      1.2. åŠ¨ä½œç©ºé—´      1.3. ç­–ç•¥        2. é©¬å°”å¯å¤«è¿‡ç¨‹ï¼ˆMPï¼‰  3. é©¬å°”å¯å¤«å¥–åŠ±è¿‡ç¨‹ï¼ˆMRPï¼‰          3.1. å¥–åŠ±ï¼ˆRewardï¼‰      3.2. å›æŠ¥ï¼ˆReturnï¼‰      3.3. ä»·å€¼å‡½æ•°      3.4. è´å°”æ›¼æ–¹ç¨‹        4. é©¬å°”å¯å¤«å†³ç­–è¿‡ç¨‹ï¼ˆMDPï¼‰          4.1. åŠ¨ä½œï¼ˆActionï¼‰      4.2. ç­–ç•¥ï¼ˆPolicyï¼‰      4.3. åŠ¨æ€ç‰¹æ€§      4.4. ä»·å€¼å‡½æ•°                  4.4.1. çŠ¶æ€ä»·å€¼å‡½æ•°          4.4.2. åŠ¨ä½œä»·å€¼å‡½æ•°          4.4.3. äºŒè€…çš„æ„ä¹‰          4.4.4. å›æº¯å›¾ä¸å›æº¯æ“ä½œ                    4.5. è´å°”æ›¼æœŸæœ›æ–¹ç¨‹      4.6. æœ€ä¼˜ä»·å€¼å‡½æ•°      4.7. è´å°”æ›¼æœ€ä¼˜æ–¹ç¨‹      4.8. æœ€ä¼˜ç­–ç•¥        5. å‚è€ƒæ–‡çŒ®1. å¼ºåŒ–å­¦ä¹ å¼ºåŒ–å­¦ä¹ æ˜¯æœºå™¨å­¦ä¹ é¢†åŸŸä¹‹ä¸€ï¼Œå—åˆ°è¡Œä¸ºå¿ƒç†å­¦çš„å¯å‘ï¼Œä¸»è¦å…³æ³¨æ™ºèƒ½ä½“å¦‚ä½•åœ¨ç¯å¢ƒä¸­é‡‡å–ä¸åŒçš„è¡ŒåŠ¨ï¼Œä»¥æœ€å¤§é™åº¦åœ°æé«˜ç´¯ç§¯å¥–åŠ±ã€‚å¼ºåŒ–å­¦ä¹ æ˜¯é™¤äº†ç›‘ç£å­¦ä¹ å’Œéç›‘ç£å­¦ä¹ ä¹‹å¤–çš„ç¬¬ä¸‰ç§åŸºæœ¬çš„æœºå™¨å­¦ä¹ æ–¹æ³•ã€‚ä¸ç›‘ç£å­¦ä¹ ä¸åŒçš„æ˜¯ï¼Œå¼ºåŒ–å­¦ä¹ ä¸éœ€è¦å¸¦æ ‡ç­¾çš„è¾“å…¥è¾“å‡ºå¯¹ï¼ŒåŒæ—¶ä¹Ÿæ— éœ€å¯¹éæœ€ä¼˜è§£çš„ç²¾ç¡®åœ°çº æ­£ã€‚å¼ºåŒ–å­¦ä¹ ä¸»è¦ç”±æ™ºèƒ½ä½“ï¼ˆAgentï¼‰ã€ç¯å¢ƒï¼ˆEnvironmentï¼‰ã€çŠ¶æ€ï¼ˆStateï¼‰ã€åŠ¨ä½œï¼ˆActionï¼‰ã€å¥–åŠ±ï¼ˆRewardï¼‰ç»„æˆã€‚æ™ºèƒ½ä½“æ‰§è¡Œäº†æŸä¸ªåŠ¨ä½œåï¼Œç¯å¢ƒå°†ä¼šè½¬æ¢åˆ°ä¸€ä¸ªæ–°çš„çŠ¶æ€ï¼Œå¯¹äºè¯¥æ–°çš„çŠ¶æ€ç¯å¢ƒä¼šç»™å‡ºå¥–åŠ±ä¿¡å·ï¼ˆæ­£å¥–åŠ±æˆ–è€…è´Ÿå¥–åŠ±ï¼‰ã€‚éšåï¼Œæ™ºèƒ½ä½“æ ¹æ®æ–°çš„çŠ¶æ€å’Œç¯å¢ƒåé¦ˆçš„å¥–åŠ±ï¼ŒæŒ‰ç…§ä¸€å®šçš„ç­–ç•¥æ‰§è¡Œæ–°çš„åŠ¨ä½œã€‚ä¸Šè¿°è¿‡ç¨‹ä¸ºæ™ºèƒ½ä½“å’Œç¯å¢ƒé€šè¿‡çŠ¶æ€ã€åŠ¨ä½œã€å¥–åŠ±è¿›è¡Œäº¤äº’çš„æ–¹å¼ã€‚åœ¨æ¯ä¸ªæ—¶åˆ» $t$ï¼Œæ™ºèƒ½ä½“è§‚å¯Ÿåˆ°æ‰€åœ¨çš„ç¯å¢ƒçŠ¶æ€è®°ä¸º $s_t$ï¼Œï¼Œå¹¶å†æ¬¡åŸºç¡€ä¸Šé€‰æ‹©ä¸€ä¸ªåŠ¨ä½œ $a_t$ã€‚ä½œä¸ºåŠ¨ä½œçš„ç»“æœï¼Œæ™ºèƒ½ä½“æ¥æ”¶åˆ°ä¸€ä¸ªæ•°å€¼åŒ–çš„å¥–åŠ± $r_{t+1}$ï¼Œå¹¶è½¬ç§»åˆ°ä¸€ä¸ªæ–°çš„çŠ¶æ€ $s_{t+1}$ ã€‚å¦‚æ­¤åå¤è¿­ä»£äº¤äº’ï¼Œå¯ä»¥å¾—åˆ°ä¸€ä¸ªåºåˆ—æˆ–è½¨è¿¹ï¼ˆtrajectoryï¼‰ã€‚å¼ºåŒ–å­¦ä¹ çš„ç›®æ ‡ï¼šæœ€å¤§åŒ–æ™ºèƒ½ä½“æ¥æ”¶åˆ°çš„æ ‡é‡ä¿¡å·ï¼ˆå¥–åŠ±ï¼‰ç´¯ç§¯å’Œçš„æ¦‚ç‡æœŸæœ›å€¼ $G$\\[G = r_1+r_2+...+r_n\\]1.1. çŠ¶æ€å’Œè§‚æµ‹ã€ŒçŠ¶æ€ã€$s$ æ˜¯å¯¹ç¯å¢ƒå½“å‰æ‰€å¤„ç¯å¢ƒçš„å®Œæ•´æè¿°ï¼Œå¯¹äºçŠ¶æ€æ¥è¯´ç¯å¢ƒçš„æ‰€æœ‰ä¿¡æ¯éƒ½æ˜¯å¯çŸ¥çš„ã€‚è€Œã€Œè§‚æµ‹ã€$o$ åˆ™æ˜¯ä¸€ä¸ªçŠ¶æ€çš„éƒ¨åˆ†æè¿°ï¼Œå¯èƒ½ä¼šå¿½ç•¥ä¸€äº›ä¿¡æ¯ã€‚åœ¨æ·±åº¦å¼ºåŒ–å­¦ä¹ ä¸­ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šä½¿ç”¨å®å€¼å‘é‡vectorã€çŸ©é˜µ matrix æˆ–è€…é«˜ç»´å¼ é‡ tensor æ¥è¡¨ç¤ºçŠ¶æ€å’Œè§‚æµ‹ã€‚æ¯”å¦‚ï¼Œè§†è§‰çš„è§‚æµ‹å¯ä»¥è¡¨ç¤ºä¸ºåƒç´ å€¼æ„æˆçš„ RGB çŸ©é˜µï¼Œæœºå™¨äººçš„çŠ¶æ€åˆ™å¯ä»¥è¡¨ç¤ºä¸ºå…¶å…³èŠ‚è§’åº¦å’Œé€Ÿåº¦ã€‚å½“æ™ºèƒ½ä½“èƒ½å¤Ÿè§‚æµ‹åˆ°ç¯å¢ƒçš„å…¨éƒ¨çŠ¶æ€æ—¶ï¼Œè¿™æ ·çš„ç¯å¢ƒæ˜¯å¯å®Œå…¨è§‚æµ‹çš„ fully observedï¼›å½“æ™ºèƒ½ä½“åªèƒ½è§‚æµ‹åˆ°éƒ¨åˆ†çŠ¶æ€æ—¶ï¼Œè¿™æ ·çš„ç¯å¢ƒç§°ä¸ºå¯éƒ¨åˆ†è§‚æµ‹ partially observedã€‚  ã€Œæ³¨ã€ï¼šåœ¨å¼ºåŒ–å­¦ä¹ çš„å…¬å¼ä¸­æˆ‘ä»¬ç»å¸¸ä¼šçœ‹åˆ°è¡¨ç¤ºçŠ¶æ€çš„ç¬¦å· $s$ï¼Œä½†æ˜¯å®é™…ä¸Šæ›´å‡†ç¡®çš„ç”¨æ³•åº”è¯¥æ˜¯ä½¿ç”¨è¡¨ç¤ºè§‚æµ‹çš„ç¬¦å· $o$ã€‚æ¯”å¦‚ï¼Œå½“æˆ‘ä»¬æ¢è®¨æ™ºèƒ½ä½“å¦‚æœè¿›è¡ŒåŠ¨ä½œå†³ç­–æ—¶ï¼Œå…¬å¼ä¸­é€šå¸¸ä¼šè¯´åŠ¨ä½œæ˜¯åŸºäºçŠ¶æ€çš„ï¼Œä½†æ˜¯ã€Œå®é™…ä¸ŠåŠ¨ä½œæ˜¯åŸºäºè§‚æµ‹çš„ã€ï¼Œå› ä¸ºæ™ºèƒ½ä½“æ˜¯æ— æ³•ç›´æ¥æ„ŸçŸ¥åˆ°çŠ¶æ€çš„ã€‚ä¸ºäº†éµå¾ªæƒ¯ä¾‹ï¼Œä¹‹åçš„å…¬å¼ä»ç„¶ä¼šä½¿ç”¨ç¬¦å· $s$ã€‚1.2. åŠ¨ä½œç©ºé—´ã€Œç»™å®šçš„ç¯å¢ƒä¸­æœ‰æ•ˆçš„åŠ¨ä½œé›†åˆç§°ä¸ºåŠ¨ä½œç©ºé—´ã€ã€‚æœ‰äº›ç¯å¢ƒä¸­ï¼ˆæ¯”å¦‚ Atari å’Œ Goï¼‰ï¼Œã€ŒåŠ¨ä½œç©ºé—´æ˜¯ç¦»æ•£çš„ã€discreteï¼Œä¹Ÿå°±æ˜¯è¯´æ™ºèƒ½ä½“çš„åŠ¨ä½œæ•°é‡æ˜¯æœ‰é™çš„ï¼›è€Œæœ‰äº›ç¯å¢ƒä¸­ï¼ˆæ¯”å¦‚æœºå™¨äººæ§åˆ¶ï¼‰ï¼Œã€ŒåŠ¨ä½œç©ºé—´æ˜¯è¿ç»­çš„ã€continuousï¼Œè¿™äº›ç©ºé—´ä¸­åŠ¨ä½œé€šå¸¸ç”¨å®å€¼å‘é‡è¡¨ç¤ºã€‚ã€ŒåŠ¨ä½œç©ºé—´æ˜¯ç¦»æ•£çš„è¿˜æ˜¯è¿ç»­çš„ã€åœ¨å¼ºåŒ–å­¦ä¹ é—®é¢˜ä¸­éå¸¸é‡è¦ï¼Œæœ‰äº›æ–¹æ³•åªé€‚åˆç”¨äºå…¶ä¸­ä¸€ä¸ªåœºæ™¯ï¼Œæ‰€ä»¥è¿™ç‚¹éœ€è¦ç‰¹åˆ«å…³æ³¨ã€‚1.3. ç­–ç•¥å¼ºåŒ–å­¦ä¹ æ˜¯ä»ç¯å¢ƒçŠ¶æ€åˆ°åŠ¨ä½œçš„æ˜ å°„å­¦ä¹ ï¼Œç§°è¯¥æ˜ å°„å…³ç³»ä¸ºç­–ç•¥ã€‚é€šä¿—çš„ç†è§£ï¼Œå³æ™ºèƒ½ä½“å¦‚ä½•é€‰æ‹©åŠ¨ä½œçš„æ€è€ƒè¿‡ç¨‹ç§°ä¸ºç­–ç•¥ã€‚æœ€ç®€å•çš„ç­–ç•¥å¯ä»¥æ˜¯å›ºå®šç­–ç•¥ï¼Œå¦‚ä¸ç®¡ä»€ä¹ˆæƒ…å†µéƒ½æ‰§è¡Œç‰¹å®šåŠ¨ä½œã€‚ä¹Ÿå¯ä»¥é‡‡ç”¨è§„åˆ™ç­–ç•¥ï¼Œå³æ»¡è¶³ä»€ä¹ˆæ¡ä»¶ä¸‹æ‰§è¡Œä»€ä¹ˆåŠ¨ä½œã€‚ä¹Ÿå¯ä»¥é‡‡ç”¨éšæœºç­–ç•¥ï¼Œå³æŒ‰ç…§æŸä¸ªæ¦‚ç‡é‡‡æ ·æ¥é€‰å–åŠ¨ä½œã€‚2. é©¬å°”å¯å¤«è¿‡ç¨‹ï¼ˆMPï¼‰é©¬å°”å¯å¤«è¿‡ç¨‹ï¼ˆMarkov Processï¼‰ï¼š      åœ¨ä¸€ä¸ªæ—¶åºè¿‡ç¨‹ä¸­ï¼Œå¦‚æœ $tï¼‹1$ æ—¶åˆ»çš„çŠ¶æ€ä»…å–å†³äº $t$ æ—¶åˆ»çš„çŠ¶æ€ $s_t$ è€Œä¸ $t$ æ—¶åˆ»ä¹‹å‰çš„ä»»ä½•çŠ¶æ€éƒ½æ— å…³æ—¶ï¼Œåˆ™è®¤ä¸º $t$ æ—¶åˆ»çš„çŠ¶æ€ $s_t$ å…·æœ‰é©¬å°”å¯å¤«æ€§(Markov property)ï¼›        è‹¥è¿‡ç¨‹ä¸­çš„æ¯ä¸€ä¸ªçŠ¶æ€éƒ½å…·æœ‰é©¬å°”ç§‘å¤«æ€§ï¼Œåˆ™è¿™ä¸ªè¿‡ç¨‹å…·å¤‡é©¬å°”ç§‘å¤«æ€§ã€‚å…·å¤‡äº†é©¬å°”ç§‘å¤«æ€§çš„éšæœºè¿‡ç¨‹ç§°ä¸ºé©¬å°”ç§‘å¤«è¿‡ç¨‹ï¼Œåˆç§°é©¬å°”ç§‘å¤«é“¾ï¼ˆMarkov chainï¼‰ã€‚  è¡¨è¿°ä¸€ä¸ªé©¬å°”å¯å¤«è¿‡ç¨‹ï¼Œåªéœ€è¦äºŒå…ƒç»„ $&lt;S,P&gt;$ å³å¯ã€‚å…¶ä¸­ï¼Œ$S$ ä¸ºçŠ¶æ€ï¼Œ$P$ ä¸ºä¸åŒçŠ¶æ€é—´çš„è½¬ç§»æ¦‚ç‡ï¼Œå¦‚çŠ¶æ€ $s$ åˆ° $s^\\prime$ çš„çŠ¶æ€è½¬ç§»æ¦‚ç‡\\[P_{s s^\\prime}=\\mathbb{P}[S_{t+1}=s^\\prime \\vert s_{t}=s]\\]ä»ä¸Šå¼ä¹Ÿå¯ä»¥çœ‹åˆ°ï¼Œä¸‹ä¸€æ—¶åˆ»çš„çŠ¶æ€$S_{t+1}$ ä»…ä¸å½“å‰æ—¶åˆ»çš„çŠ¶æ€ $S_t$ æœ‰å…³ï¼Œè€Œä¸ $S_1,\\cdots,S_{t-1}$ æ— å…³ã€‚æ³¨æ„ï¼šè¿™é‡Œçš„è®°å·éå¸¸ä¸¥è°¨ï¼Œ $S_{t}, S_{t+1}$ ä»£è¡¨æŸä¸€æ—¶åˆ»çš„çŠ¶æ€ï¼Œè€Œ $s,s^\\prime$ ä»£è¡¨æŸä¸€ç§å…·ä½“çš„çŠ¶æ€ç±»å‹ã€‚ä¸ºäº†æè¿°æ•´ä¸ªçŠ¶æ€ç©ºé—´ä¸­ä¸åŒç±»å‹çŠ¶æ€ä¹‹é—´çš„å…³ç³»ï¼Œç”¨çŸ©é˜µè¡¨ç¤ºï¼Œå³ä¸ºï¼š\\[P=\\begin{bmatrix}P(s_1\\vert s_1) &amp; P(s_2\\vert s_1) &amp;\\dots &amp; P(s_n\\vert s_1)\\\\P(s_1\\vert s_2) &amp; P(s_2\\vert s_2) &amp;\\dots &amp; P(s_n\\vert s_2)\\\\\\vdots &amp; \\vdots &amp; \\ddots &amp;\\vdots\\\\P(s_1\\vert s_n) &amp; P(s_2\\vert s_n)&amp;\\dots &amp; P(s_n\\vert s_n)\\\\\\end{bmatrix}\\]å…¶ä¸­ï¼Œ$P(s_j\\vert s_i)$ è¡¨ç¤ºçŠ¶æ€ä» $s_i$ è½¬ç§»åˆ° $s_j$ çš„çŠ¶æ€è½¬ç§»æ¦‚ç‡ï¼Œæ˜¾ç„¶çŠ¶æ€è½¬ç§»æ¦‚ç‡çŸ©é˜µ $P$ çš„è§„æ¨¡æ˜¯æ‰€æœ‰çŠ¶æ€ç±»å‹æ•° $n$ çš„å¹³æ–¹ã€‚ä»¥ä¸‹å›¾ä¸ºä¾‹ï¼šä¸éš¾å†™å‡ºçŠ¶æ€è½¬ç§»æ¦‚ç‡çŸ©é˜µï¼š\\[\\begin{aligned}&amp;\\quad C1\\;\\;\\;C2\\;\\;\\;C3\\;\\;\\;Pass\\;Pub\\;FB\\;\\;Sleep\\\\P=\\begin{array}{r}    C1\\\\    C2\\\\    C3\\\\    Pass\\\\    Pub \\\\    FB\\\\    Sleep\\end{array}&amp;\\begin{bmatrix}    0&amp; 0.5 &amp;0&amp;0&amp;0&amp;0.5&amp;0\\\\    0&amp;0&amp;0.8&amp;0&amp;0&amp;0&amp;0.2\\\\    0&amp;0&amp;0&amp;0.6&amp;0.4&amp;0&amp;0\\\\    0&amp;0&amp;0&amp;0&amp;0&amp;0&amp;1\\\\    0.2&amp;0.4&amp;0.4&amp;0&amp;0&amp;0&amp;0\\\\    0.1&amp;0&amp;0&amp;0&amp;0&amp;0.9&amp;0\\\\    0&amp;0&amp;0&amp;0&amp;0&amp;0&amp;1\\\\\\end{bmatrix}\\end{aligned}\\]é©¬å°”å¯å¤«è¿‡ç¨‹ä¸­çš„ä¸‰ä¸ªæ¦‚å¿µï¼š  çŠ¶æ€åºåˆ—ï¼ˆepisodeï¼‰ï¼šä¸€ä¸ªçŠ¶æ€è½¬æ¢è¿‡ç¨‹ï¼ŒåŒ…å«å¾ˆå¤šçŠ¶æ€ã€‚å¦‚ï¼š$s_1$-$s_2$-$s_3-â€¦$ï¼›  å®Œæ•´çš„çŠ¶æ€åºåˆ—ï¼ˆcomplete episodeï¼‰ï¼šçŠ¶æ€åºåˆ—çš„æœ€åä¸€ä¸ªçŠ¶æ€æ˜¯ç»ˆæ­¢çŠ¶æ€ï¼›  é‡‡æ ·ï¼ˆsampleï¼‰ï¼šä»ç¬¦åˆé©¬å°”ç§‘å¤«è¿‡ç¨‹ç»™å®šçš„çŠ¶æ€è½¬ç§»æ¦‚ç‡çŸ©é˜µç”Ÿæˆä¸€ä¸ªçŠ¶æ€åºåˆ—çš„è¿‡ç¨‹ã€‚3. é©¬å°”å¯å¤«å¥–åŠ±è¿‡ç¨‹ï¼ˆMRPï¼‰é©¬å°”å¯å¤«å¥–åŠ±è¿‡ç¨‹ï¼ˆMarkov Reward Processï¼ŒMRPï¼‰å°±æ˜¯åœ¨é©¬å°”å¯å¤«è¿‡ç¨‹ä¸­å¢åŠ äº†å¥–åŠ±ï¼ˆæ”¶ç›Šï¼‰ $R$ é¡¹å’Œå¥–åŠ±å› å­ $\\gamma$ã€‚è¡¨è¿°ä¸€ä¸ªé©¬å°”å¯å¤«å¥–åŠ±è¿‡ç¨‹éœ€è¦å››å…ƒç»„ $&lt;S,P,R,\\gamma&gt;$ï¼Œå…¶ä¸­ï¼š  $S$ æ˜¯ä¸€ä¸ªæœ‰é™çŠ¶æ€é›†ï¼›  $P$ æ˜¯é›†åˆä¸­çŠ¶æ€è½¬ç§»æ¦‚ç‡çŸ©é˜µï¼š$P_{s s^\\prime}=\\mathbb{P}[S_{t+1}=s^\\prime \\vert S_t = s]$ï¼›  $R$ æ˜¯å¥–åŠ±ï¼ˆæ”¶ç›Šï¼‰å‡½æ•°ï¼š$R_t = \\mathbb{E}[R_{t+1}\\vert S_t=s]$  $\\gamma$ æ˜¯æŠ˜æ‰£å› å­ï¼š$\\gamma \\in [0,1]$ã€‚å¦‚ä¸‹å›¾æ‰€ç¤º3.1. å¥–åŠ±ï¼ˆRewardï¼‰æŸæ—¶åˆ» $t$ çš„å¥–åŠ± $R_t$ å®šä¹‰ä¸ºä»è¯¥çŠ¶æ€è½¬ç§»åˆ°æ‰€æœ‰å¯èƒ½çŠ¶æ€çš„å¥–åŠ±çš„æœŸæœ›ã€‚é€šå¸¸çº¦å®šï¼ŒæŸä¸€æ—¶åˆ» $t$ å¤„åœ¨çŠ¶æ€ $s_t$ ä¸‹å¥–åŠ±ï¼Œæ˜¯åœ¨ä¸‹ä¸€ä¸ªæ—¶åˆ» $t+1$ è·å¾—çš„ï¼Œå³ç¦»å¼€å½“å‰çŠ¶æ€æ—¶è·å¾—å¥–åŠ±\\[R_t = \\mathbb{E}[R_{t+1}\\vert S_t=s_t]\\]  ä¸ºä»€ä¹ˆæ˜¯ $R_{t+1}$ è€Œä¸æ˜¯ $R_t$ï¼Ÿå› ä¸ºçº¦å®šç¦»å¼€è¿™ä¸ªçŠ¶æ€æ‰èƒ½è·å¾—å¥–åŠ±è€Œä¸æ˜¯è¿›å…¥è¿™ä¸ªçŠ¶æ€å³è·å¾—å¥–åŠ±ã€‚å› ä¸ºå¥–åŠ±æ˜¯æ™ºèƒ½ä½“é‡‡å–åŠ¨ä½œä¹‹åç¦»å¼€ $S_t$ æ—¶è·å¾—çš„ï¼ŒåŒæ—¶è¿›å…¥ä¸‹ä¸€æ—¶åˆ»çŠ¶æ€ $S_{t+1}$ã€‚åœ¨åé¢çš„é©¬å°”å¯å¤«å†³ç­–è¿‡ç¨‹ä¸­ï¼Œä½¿ç”¨ $R_{t+1}$ æ¥è¡¨ç¤º $A_t$ å¯¼è‡´çš„å¥–åŠ±ï¼Œå³å¼ºè°ƒä¸‹ä¸€æ—¶åˆ»çš„æ”¶ç›Šå’Œä¸‹ä¸€æ—¶åˆ»çš„çŠ¶æ€æ˜¯è¢«ç¯å¢ƒä¸€èµ·å†³å®šçš„ã€‚ä¸¾ä¾‹è¯´æ˜ï¼šå½“å­¦ç”Ÿå¤„åœ¨ç¬¬ä¸€èŠ‚è¯¾ï¼ˆClass 1ï¼‰æ—¶ï¼Œä¹‹åå‚åŠ ç¬¬2èŠ‚è¯¾ï¼ˆClass 2ï¼‰è·å¾—çš„ Reward æ˜¯ $-2$ï¼Œè‹¥ä¹‹åä¸Šç½‘æµè§ˆ Facebook è·å¾—çš„ Reward ä¹Ÿæ˜¯ $-2$ã€‚æ­¤æ—¶ï¼Œå¼ºåŒ–å­¦ä¹ çš„ç›®æ ‡ï¼šä½¿å¾—æ™ºèƒ½ä½“æ”¶åˆ°çš„ç´¯è®¡å¥–åŠ±æœ€å¤§åŒ–ã€‚å¥–åŠ±æ˜¯å³æ—¶çš„ï¼Œæ˜¯ $t$ æ—¶åˆ»çŠ¶æ€è½¬ç§»åˆ° $t+1$ æ—¶åˆ»çŠ¶æ€æ—¶çš„ç¬æ—¶åé¦ˆä¿¡æ¯ã€‚ä½†åœ¨å®é™…è¿‡ç¨‹ä¸­ï¼Œ$t$ æ—¶åˆ»çŠ¶æ€ $s_t$ å¯èƒ½å¯¹åç»­æ‰€æœ‰çŠ¶æ€äº§ç”Ÿæ·±è¿œå½±å“ï¼Œè€Œä¸æ˜¯å•ç‹¬å¯¹ $t+1$ æ—¶åˆ»çŠ¶æ€äº§ç”Ÿå½±å“ã€‚å› æ­¤éœ€è¦å¼•å…¥åé¢çš„æ–°æ¦‚å¿µï¼šå›æŠ¥ã€‚3.2. å›æŠ¥ï¼ˆReturnï¼‰æŸæ—¶åˆ» $t$ çš„å›æŠ¥ï¼ˆæ”¶ç›Šï¼‰å®šä¹‰ä¸ºä»æ—¶åˆ» $t$ å¼€å§‹çš„ é‡‡æ ·ä¸€æ¡ çŠ¶æ€åºåˆ—å¾—åˆ°çš„æ‰€æœ‰å¥–åŠ±çš„æŠ˜æ‰£å’Œï¼š\\[G_t\\doteq R_{t+1}+\\gamma R_{t+2}+...=\\sum_{k=0}^\\infty \\gamma^k R_{t+k+1}\\]è¶Šå¾€åå¾—åˆ°çš„å¥–åŠ±ï¼ŒæŠ˜æ‰£å¾—è¶Šå¤šã€‚è®¾ç½®æŠ˜æ‰£å› å­çš„åŸå› å¦‚ä¸‹ï¼š  æ•°å­¦è¡¨è¾¾çš„æ–¹ä¾¿ï¼Œè¿™ä¹Ÿæ˜¯æœ€é‡è¦çš„  é¿å…é™·å…¥æ— é™å¾ªç¯  è¿œæœŸåˆ©ç›Šå…·æœ‰ä¸€å®šçš„ä¸ç¡®å®šæ€§  ç¬¦åˆäººç±»æ›´çœ‹é‡çœ¼å‰åˆ©ç›Šçš„æ€§æ ¼æŠ˜æ‰£å› å­å¯ä»¥ä½œä¸ºå¼ºåŒ–å­¦ä¹ çš„ä¸€ä¸ªè¶…å‚æ•°æ¥è¿›è¡Œè°ƒæ•´ï¼ŒæŠ˜æ‰£å› å­ä¸åŒå°±ä¼šå¾—åˆ°ä¸åŒè¡Œä¸ºçš„æ™ºèƒ½ä½“ã€‚æŠ˜æ‰£å› å­æ¥è¿‘ $0$ åˆ™è¡¨æ˜è¶‹å‘äºâ€œè¿‘è§†â€æ€§è¯„ä¼°ï¼›æ¥è¿‘ $1$ åˆ™è¡¨æ˜åé‡è€ƒè™‘è¿œæœŸçš„åˆ©ç›Šã€‚å‡è®¾ä» $Class 1$ çŠ¶æ€å¼€å§‹åˆ° $Sleep$ çŠ¶æ€ç»ˆæ­¢ï¼ŒæŠ˜æ‰£å› å­ $\\gamma = 0.5$ï¼Œé‡‡æ ·ä¸¤æ¡åºåˆ—è®¡ç®—å›æŠ¥å¦‚ä¸‹ï¼šC1 - C2 - C3 - Pass - SleepG_class1 = -2 + 1/2 Ã— (-2) + 1/4 Ã— (-2) + 1/8 Ã— (+10) = -2.25C1 - FB - FB - C1 - C2 - SleepG_class1 = -2 + 1/2 Ã— (-1) + 1/4 Ã— (-1) + 1/8 Ã— (-2) + 1/16 Ã—(-2) = -3.125æ­¤æ—¶ï¼Œå¼ºåŒ–å­¦ä¹ çš„ç›®æ ‡ï¼šä½¿å¾—æ™ºèƒ½ä½“æ”¶åˆ°çš„å›æŠ¥æœ€å¤§åŒ–ã€‚ç›¸é‚»æ—¶åˆ»çš„å›æŠ¥å¯ç”¨å¦‚ä¸‹é€’å½’å½¢å¼è”ç³»èµ·æ¥ï¼Œè¿™å¯¹äºå¼ºåŒ–å­¦ä¹ çš„ç†è®ºå’Œç®—æ³•è‡³å…³é‡è¦\\[G_t=R_{t+1}+\\gamma R_{t+2}+...\\]å›æŠ¥å€¼æ˜¯é’ˆå¯¹ä¸€æ¬¡å®Œæ•´çš„é‡‡æ ·åºåˆ—çš„ç»“æœï¼Œå­˜åœ¨å¾ˆå¤§çš„æ ·æœ¬åå·®ã€‚å³ $G(s)$ æ˜¯ä» $t$ æ—¶åˆ»çš„çŠ¶æ€åˆ°ç»ˆæ­¢çŠ¶æ€çš„ä¸€æ¡çŠ¶æ€è½¬ç§»åºåˆ—çš„å›æŠ¥å€¼ï¼Œä½†ä» $t$ æ—¶åˆ»çš„çŠ¶æ€åˆ°ç»ˆæ­¢çŠ¶æ€çš„é©¬å°”å¯å¤«é“¾ä¸æ­¢ä¸€æ¡ï¼Œæ¯ä¸€æ¡éƒ½æœ‰å¯¹åº”çš„é‡‡æ ·æ¦‚ç‡å’Œå›æŠ¥ã€‚å¯¹äºå¤æ‚é—®é¢˜è€Œè¨€ï¼Œè¦æƒ³ç²¾ç¡®çš„è®¡ç®—å‡º $G(s)$ æ˜¯å‡ ä¹ä¸å¯èƒ½çš„ï¼Œå› ä¸ºæ— æ³•ç©·ä¸¾æ‰€æœ‰åºåˆ—ã€‚ä¸ºäº†èƒ½å¤Ÿè¯„ä¼°çŠ¶æ€çš„å¥½åï¼Œå¼•å…¥æ–°æ¦‚å¿µï¼šä»·å€¼å‡½æ•°ã€‚3.3. ä»·å€¼å‡½æ•°ä»·å€¼å‡½æ•°ï¼ˆValue Functionï¼‰ï¼šä»æŸä¸ªçŠ¶æ€ $s_t$ å¼€å§‹çš„å›æŠ¥çš„æœŸæœ›ï¼Œä¹Ÿå³ä»æŸä¸ªçŠ¶æ€ $s_t$ å¼€å§‹é‡‡æ ·æ— æ•°æ¡å®Œæ•´çŠ¶æ€åºåˆ—çš„å›æŠ¥çš„å¹³å‡å€¼ï¼Œå³\\[V(s_t) = \\mathbb{E}[G_t \\vert S_t=s_t]\\]å¯¹äºé©¬å°”å¯å¤«å¥–åŠ±è¿‡ç¨‹ï¼Œä»·å€¼å‡½æ•°å³ä¸ºçŠ¶æ€ä»·å€¼å‡½æ•°ã€‚ä»¥å‰é¢çš„ä¾‹å­ï¼Œå¦‚æœä»…è§‚æµ‹åˆ°ä¸¤ä¸ªåºåˆ—ï¼Œé‚£ä¹ˆåœ¨çŠ¶æ€ Class 1 å¤„çš„å­¦ç”Ÿçš„å€¼å‡½æ•°å°±æ˜¯ 2 ä¸ªå›æŠ¥å€¼é™¤ä»¥ 2 å³å¯ã€‚v(Class1) = ( (-2.25) + (-3.125))  Ã· 2 = -2.6875çŠ¶æ€å€¼å‡½æ•°çš„å¼•å…¥è§£å†³äº†å›æŠ¥ $G(s)$ è·¯å¾„æœ‰å¾ˆå¤šæ¡ï¼Œä¸å®¹æ˜“ä¼˜åŒ–çš„é—®é¢˜ï¼Œå°†å…¶è½¬åŒ–ä¸ºæœŸæœ›ï¼Œå˜æˆå›ºå®šæ ‡é‡äº†ã€‚ä½†çŠ¶æ€ä»·å€¼å‡½æ•°ä¹Ÿä¸å¥½ç®—ï¼Œå› ä¸ºåœ¨è®¡ç®—æŸä¸ªçŠ¶æ€æ—¶å€™éœ€è¦ä½¿ç”¨åˆ°å°†æ¥æ‰€æœ‰çŠ¶æ€çš„ $G(s)$ã€‚ä¸ºäº†ä¾¿äºè®¡ç®—ï¼Œå¯¹ä»·å€¼å‡½æ•°è¿›è¡Œå±•å¼€\\[\\begin{aligned}V(s_t) &amp;= \\mathbb{E}[G_t \\vert S_t=s_t]\\\\&amp;=\\mathbb{E}[R_{t+1}+\\gamma R_{t+2}+\\gamma^2 R_{t+3}+...\\vert S_t=s_t]\\\\&amp;=\\mathbb{E}[R_{t+1}+\\gamma (R_{t+2}+\\gamma R_{t+3}+...)\\vert S_t=s_t]\\\\&amp;=\\mathbb{E}[R_{t+1}+\\gamma G_{t+1}\\vert S_t=s_t]\\\\&amp;=\\mathbb{E}[R_{t+1}\\vert S_t=s]+\\gamma \\mathbb{E}[G_{t+1}\\vert S_t=s_t]\\\\&amp;=R_{s}+\\gamma \\mathbb{E}[G_{t+1}\\vert S_t=s_t]\\end{aligned}\\]ä¸Šå¼ä¸­ï¼Œç¬¬ä¸€é¡¹ $R_s$ å¯¹åº”å³æ—¶å¥–åŠ±ï¼Œç¬¬äºŒé¡¹åˆ™ä»£è¡¨äº†é•¿æœŸçš„æ½œåœ¨å¥–åŠ±ã€‚å¯ä»¥çœ‹å‡ºï¼Œé•¿æœŸæ½œåœ¨å¥–åŠ±çš„è®¡ç®—éœ€è¦è·å–ä¸‹ä¸€æ—¶åˆ»çŠ¶æ€å¯¹åº”å›æŠ¥çš„æœŸæœ›ã€‚ç„¶è€Œï¼Œæœªæ¥æ—¶åˆ»çš„çŠ¶æ€åŠå…¶å›æŠ¥æ˜¯ä¸ç¡®å®šçš„ï¼Œå³\\[\\mathbb{E}[G_{t+1}\\vert S_t=s_t]\\]å¾ˆéš¾æ±‚è§£ã€‚å› æ­¤ç›´æ¥è®¡ç®—ä»·å€¼å‡½æ•°æ˜¯ä¸ç°å®çš„ã€‚ä¸‹é¢ä»‹ç»è´å°”æ›¼æ–¹ç¨‹æ¥è®¡ç®—ä»·å€¼å‡½æ•°ã€‚3.4. è´å°”æ›¼æ–¹ç¨‹[ æ¨å¯¼ 1 ]ï¼š      å®šä¹‰ï¼šå¦‚æœ $X$ å’Œ $Y$ éƒ½æ˜¯ç¦»æ•£å‹éšæœºå˜é‡ï¼Œåˆ™æ¡ä»¶æœŸæœ›ï¼ˆConditional Expectationï¼‰å®šä¹‰ä¸º$\\mathbb{E}[Y\\vert X=x]=\\sum_y yP(Y=y\\vert X=x)$    å®šä¹‰ï¼šå¦‚æœ $X$ æ˜¯éšæœºå˜é‡ï¼Œå…¶æœŸæœ›ä¸º $\\mathbb{E}[X]$ï¼Œ$Y$ ä¸ºç›¸åŒæ¦‚ç‡ç©ºé—´ä¸Šçš„ä»»æ„éšæœºå˜é‡ï¼Œåˆ™æœ‰å…¨æœŸæœ›ï¼ˆTotal Expectationï¼‰å…¬å¼$\\mathbb{E}[X] = \\mathbb{E}[\\mathbb{E}[X\\vert Y]]$  ç°è¯æ˜ï¼ˆä¸»è¦è¯æ˜ç¬¬ä¸€ä¸ªç­‰å¼ï¼‰\\[\\mathbb{E}[G_{t+1}\\vert S_t=s_t] = \\mathbb{E}[\\mathbb{E}[G_{t+1}\\vert S_{t+1}]\\vert S_t=s_t] = \\mathbb{E}[V(s_{t+1})\\vert S_t=s_t]\\]ä¸ºäº†æ¨å¯¼ç®€ä¾¿ï¼Œå¦ $s_{t+1} = s^\\prime$ï¼Œ$s_t=s$ï¼Œæœ‰\\[\\begin{aligned}\\mathbb{E}[\\mathbb{E}[G_{t+1}\\vert S_{t+1}]\\vert S_t=s] &amp;= \\mathbb{E}\\left[\\sum_{g^\\prime}g^{\\prime}P(G(s^\\prime)=g^{\\prime}\\vert S_{t+1})\\vert s\\right]\\quad (æ¡ä»¶æœŸæœ›)\\\\&amp;=\\sum_{s^\\prime} \\sum_{g^\\prime}g^{\\prime}P(G(s^\\prime)=g^{\\prime}\\vert S_{t+1}=s^\\prime, s)P(S_{t+1}=s^\\prime\\vert s)\\\\&amp;=\\sum_{s^\\prime} \\sum_{g^\\prime}g^{\\prime} \\frac{P(G(s^\\prime)=g^{\\prime}\\vert S_{t+1}=s^\\prime, s)P(S_{t+1}=s^\\prime\\vert s)\\cdot P(s)}{P(s)} \\\\&amp;=\\sum_{s^\\prime} \\sum_{g^\\prime}g^{\\prime} \\frac{P(G(s^\\prime)=g^{\\prime}\\vert S_{t+1}=s^\\prime, s)P(S_{t+1}=s^\\prime, s)}{P(s)} \\\\&amp;=\\sum_{s^\\prime} \\sum_{g^\\prime}g^{\\prime} \\frac{P(G(s^\\prime)=g^{\\prime}, S_{t+1}=s^\\prime, s)}{P(s)} \\\\&amp;=\\sum_{s^\\prime} \\sum_{g^\\prime}g^{\\prime} P(G(s^\\prime)=g^{\\prime}, S_{t+1}=s^\\prime \\vert s) \\\\&amp;=\\sum_{g^\\prime} \\sum_{s^\\prime}g^{\\prime} P(G(s^\\prime)=g^{\\prime}, S_{t+1}=s^\\prime \\vert s) \\\\&amp;=\\sum_{g^\\prime}g^{\\prime} P(G(s^\\prime)=g^{\\prime} \\vert s) \\\\&amp;=\\mathbb{E}[G(s^\\prime)\\vert s]=\\mathbb{E}[G_{t+1}\\vert s_t]\\end{aligned}\\]å¾—è¯ã€‚åˆ™å½“å‰æ—¶åˆ»çš„çŠ¶æ€ä»·å€¼å‡½æ•°\\[\\begin{aligned}V(s_t)&amp;=R_{s}+\\gamma \\mathbb{E}[G_{t+1}\\vert S_t=s_t]\\\\&amp;=R_{s}+\\gamma \\mathbb{E}[V(s_{t+1})\\vert S_t=s_t]\\\\&amp;=R_{s}+\\gamma \\sum_{s_{t+1}\\in S} V(s_{t+1})P(s_{t+1}\\vert s_t)\\end{aligned}\\]ä¸Šå¼å³ä¸ºé©¬å°”å¯å¤«å¥–åŠ±è¿‡ç¨‹çš„è´å°”æ›¼æ–¹ç¨‹ã€‚[ æ¨å¯¼ 2 ]ï¼š ï¼ˆå¯èƒ½ä¸å¯¹ï¼Ÿï¼‰å¯¹åé¡¹è¿›è¡Œå…¨æ¦‚ç‡å±•å¼€\\[\\begin{aligned}\\gamma \\mathbb{E}[G_{t+1}\\vert S_t=s_t] &amp;= \\gamma \\sum_{s_{t+1}\\in S}\\mathbb{E}[G_{t+1}\\vert S_{t+1}=s_{t+1}]P(s_{t+1}\\vert s_t)\\\\&amp;= \\gamma \\sum_{s_{t+1}\\in S} V(s_{t+1})P(s_{t+1}\\vert s_t)\\end{aligned}\\]ä¸Šé¢ç¬¬äºŒæ­¥æ˜¯å› ä¸ºï¼ˆæ ¹æ®ä»·å€¼çš„å®šä¹‰ï¼‰\\[V(s_{t+1}) = \\mathbb{E}[G_{t+1}  \\vert S_{t+1} = s_{t+1}]\\]æœ€ç»ˆå¾—åˆ°\\[V(s_t) = R_{s}+\\gamma \\sum_{s_{t+1}\\in S} V(s_{t+1})P(s_{t+1}\\vert s_t)\\]å³ä¸ºé©¬å°”å¯å¤«å¥–åŠ±è¿‡ç¨‹çš„è´å°”æ›¼æ–¹ç¨‹ã€‚è´å°”æ›¼æ–¹ç¨‹åˆ»ç”»äº†å½“å‰çŠ¶æ€ $s_t$ å’Œä¸‹ä¸€ä¸ªçŠ¶æ€ $s_{t+1}$ ä¹‹é—´çš„å…³ç³»ã€‚å¯ä»¥çœ‹å‡ºï¼Œå½“å‰çŠ¶æ€çš„ä»·å€¼å‡½æ•°å¯ä»¥é€šè¿‡ä¸‹ä¸€ä¸ªçŠ¶æ€çš„ä»·å€¼å‡½æ•°æ¥è¿­ä»£è®¡ç®—ã€‚è‹¥å°†é©¬å°”å¯å¤«å¥–åŠ±è¿‡ç¨‹çš„çŠ¶æ€æ„æˆ $n$ ç»´çŠ¶æ€ç©ºé—´ï¼Œè´å°”æ›¼æ–¹ç¨‹å¯ä»¥å†™æˆçŸ©é˜µå½¢å¼\\[\\begin{aligned}\\boldsymbol{V} &amp;= \\boldsymbol{R}+\\gamma \\boldsymbol{P} \\boldsymbol{V}\\\\\\begin{bmatrix}    V(s_1)\\\\    V(s_2)\\\\    \\vdots\\\\    V(s_n)\\end{bmatrix} &amp;=\\begin{bmatrix}    R(s_1)\\\\    R(s_2)\\\\    \\vdots\\\\    R(s_n)\\end{bmatrix}+\\gamma\\begin{bmatrix}P(s_1\\vert s_1) &amp; P(s_2\\vert s_1)&amp; \\cdots &amp; P(s_n\\vert s_1)\\\\    P(s_1\\vert s_2) &amp; P(s_2\\vert s_2)&amp; \\cdots &amp; P(s_n\\vert s_2)\\\\    \\vdots &amp; \\vdots &amp; \\ddots &amp; \\vdots\\\\    P(s_1\\vert s_n) &amp; P(s_2\\vert s_n)&amp; \\cdots &amp; P(s_n\\vert s_n)\\\\    \\end{bmatrix}\\begin{bmatrix}    V(s_1)\\\\    V(s_2)\\\\    \\vdots\\\\    V(s_n)\\end{bmatrix}\\end{aligned}\\]ä¸Šè¿°æ˜¯ä¸ªçº¿æ€§æ–¹ç¨‹ç»„ï¼Œå¯ç›´æ¥å¾—åˆ°è§£æè§£\\[\\boldsymbol{V} = (\\boldsymbol{I}-\\gamma\\boldsymbol{P})^{-1}\\boldsymbol{R}\\]éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒçŸ©é˜µæ±‚é€†çš„å¤æ‚åº¦ä¸º $O(n^3)$ï¼Œå› æ­¤ç›´æ¥æ±‚è§£ä»…é€‚ç”¨äºçŠ¶æ€ç©ºé—´è§„æ¨¡å°çš„é—®é¢˜ã€‚çŠ¶æ€ç©ºé—´è§„æ¨¡å¤§çš„é—®é¢˜çš„æ±‚è§£é€šå¸¸ä½¿ç”¨è¿­ä»£æ³•ã€‚å¸¸ç”¨çš„è¿­ä»£æ–¹æ³•æœ‰ï¼šåŠ¨æ€è§„åˆ’(Dynamic Programming)ã€è’™ç‰¹å¡æ´›è¯„ä¼°(Monte-Carlo evaluation)ã€æ—¶åºå·®åˆ†(Temporal-Difference)ç­‰ã€‚  æ³¨æ„åˆ°ï¼Œåªæœ‰å½“ $P$ å·²çŸ¥çš„æƒ…å†µä¸‹ï¼Œä¹Ÿå°±æ˜¯æ¨¡å‹å·²çŸ¥æ—¶ï¼Œæ‰å¯ä»¥å¾—åˆ°è§£æè§£ã€‚4. é©¬å°”å¯å¤«å†³ç­–è¿‡ç¨‹ï¼ˆMDPï¼‰é©¬å°”å¯å¤«å†³ç­–è¿‡ç¨‹æ˜¯åœ¨é©¬å°”å¯å¤«å¥–åŠ±è¿‡ç¨‹çš„åŸºç¡€ä¸ŠåŠ å…¥äº†å†³ç­–ï¼Œå³å¢åŠ äº†åŠ¨ä½œã€‚å…¶å®šä¹‰ä¸ºï¼šé©¬å°”ç§‘å¤«å†³ç­–è¿‡ç¨‹æ˜¯ä¸€ä¸ªäº”å…ƒç»„ $&lt;S,A,P,R,\\gamma&gt;$ï¼Œå…¶ä¸­  $S$ æ˜¯æœ‰é™æ•°é‡çš„çŠ¶æ€é›†  $A$ æ˜¯æœ‰é™æ•°é‡çš„åŠ¨ä½œé›†  $P$ æ˜¯çŠ¶æ€è½¬ç§»æ¦‚ç‡ï¼Œ$P_{ss^\\prime}^a=\\mathbb{P}[S_{t+1} = s^\\prime \\vert S_t = s, A_t=a]$  $R$ æ˜¯ä¸€ä¸ªå¥–åŠ±å‡½æ•°ï¼Œ$R_{s}^a=\\mathbb{E}[R_{t+1} \\vert S_t = s, A_t=a]$  $\\gamma$ æ˜¯ä¸€ä¸ªæŠ˜æ‰£å› å­ï¼Œ$\\gamma \\in [0, 1]$ä»ä¸Šé¢å®šä¹‰å¯ä»¥çœ‹å‡ºï¼Œé©¬å°”å¯å¤«å†³ç­–è¿‡ç¨‹çš„çŠ¶æ€è½¬ç§»æ¦‚ç‡å’Œå¥–åŠ±å‡½æ•°ä¸ä»…å–å†³äºæ™ºèƒ½ä½“å½“å‰çŠ¶ä½“ï¼Œè¿˜å–å†³äºæ™ºèƒ½ä½“é€‰å–çš„åŠ¨ä½œã€‚è€Œé©¬å°”å¯å¤«å¥–åŠ±è¿‡ç¨‹ä»…å–å†³äºå½“å‰çŠ¶æ€ã€‚4.1. åŠ¨ä½œï¼ˆActionï¼‰ä»¥ä¸‹å›¾ä¸ºä¾‹ï¼šå›¾ä¸­çº¢è‰²çš„æ–‡å­—è¡¨ç¤ºå­¦ç”Ÿé‡‡å–çš„åŠ¨ä½œï¼Œè€Œä¸æ˜¯ MRP æ—¶çš„çŠ¶æ€åã€‚å¯¹æ¯”ä¹‹å‰çš„å­¦ç”Ÿ MRP ç¤ºä¾‹å¯ä»¥å‘ç°ï¼Œå³æ—¶å¥–åŠ±ä¸åŠ¨ä½œæœ‰å…³äº†ï¼ŒåŒä¸€ä¸ªçŠ¶æ€ä¸‹é‡‡å–ä¸åŒçš„åŠ¨ä½œå¾—åˆ°çš„å³æ—¶å¥–åŠ±æ˜¯ä¸ä¸€æ ·çš„ã€‚ç”±äºå¼•å…¥äº†åŠ¨ä½œï¼Œå®¹æ˜“ä¸çŠ¶æ€åç§°æ··æ·†ï¼Œå› æ­¤æ­¤å›¾æ²¡æœ‰ç»™å‡ºå„çŠ¶æ€çš„åç§°ï¼›æ­¤å›¾è¿˜æŠŠ Pass å’Œ Sleep çŠ¶æ€åˆå¹¶æˆä¸€ä¸ªç»ˆæ­¢çŠ¶æ€ï¼›å¦å¤–å½“é€‰æ‹©â€å»æŸ¥é˜…æ–‡çŒ®ï¼ˆPubï¼‰â€è¿™ä¸ªåŠ¨ä½œæ—¶ï¼Œä¸»åŠ¨è¿›å…¥äº†ä¸€ä¸ªä¸´æ—¶çŠ¶æ€ï¼ˆå›¾ä¸­ç”¨é»‘è‰²å°å®ç‚¹è¡¨ç¤ºï¼‰ï¼Œéšåè¢«åŠ¨çš„è¢«ç¯å¢ƒæŒ‰ç…§å…¶åŠ¨åŠ›å­¦åˆ†é…åˆ°å¦å¤–ä¸‰ä¸ªçŠ¶æ€ï¼Œä¹Ÿå°±æ˜¯è¯´æ­¤æ—¶æ™ºèƒ½ä½“æ²¡æœ‰é€‰æ‹©æƒå†³å®šå»å“ªä¸€ä¸ªçŠ¶æ€ã€‚å¯ä»¥çœ‹å‡ºï¼ŒçŠ¶æ€è½¬ç§»æ¦‚ç‡ $P_{ss^\\prime}^a$ å’Œå¥–åŠ±å‡½æ•° $R_{s}^a$ å‡ä¸å½“å‰çŠ¶æ€ $s$ ä¸‹é‡‡å–çš„åŠ¨ä½œ $a$ æœ‰å…³ã€‚ç”±äºåŠ¨ä½œçš„é€‰å–ä¸æ˜¯å›ºå®šçš„ï¼Œå› æ­¤å¼•å…¥æ–°æ¦‚å¿µï¼šç­–ç•¥ã€‚4.2. ç­–ç•¥ï¼ˆPolicyï¼‰ç­–ç•¥ $\\pi(a\\vert s)$ æ˜¯ä»çŠ¶æ€ $s$ åˆ°æ¯ä¸ªåŠ¨ä½œ $a$ çš„é€‰æ‹©æ¦‚ç‡ä¹‹é—´çš„æ˜ å°„ ï¼Œå³\\[\\pi(a\\vert s) = \\mathbb{P}[A_t=a\\vert S_t=s]\\]ä¸€ä¸ªç­–ç•¥å®Œæ•´åœ°å®šä¹‰äº†æ™ºèƒ½ä½“çš„è¡Œä¸ºæ–¹å¼ï¼Œå³ç­–ç•¥å®šä¹‰äº†æ™ºèƒ½ä½“åœ¨å„ç§çŠ¶æ€ä¸‹å¯èƒ½é‡‡å–çš„åŠ¨ä½œï¼Œä»¥åŠåœ¨å„ç§çŠ¶æ€ä¸‹é‡‡å–å„ç§åŠ¨ä½œçš„æ¦‚ç‡ã€‚MDPçš„ç­–ç•¥ä»…ä¸å½“å‰çš„çŠ¶æ€æœ‰å…³ï¼Œä¸å†å²ä¿¡æ¯æ— å…³ï¼›åŒæ—¶æŸä¸€ç¡®å®šçš„ç­–ç•¥æ˜¯é™æ€çš„ï¼Œä¸æ—¶é—´æ— å…³ï¼›ä½†æ˜¯ä¸ªä½“å¯ä»¥éšç€æ—¶é—´æ›´æ–°ç­–ç•¥ã€‚ç»™å®šä¸€ä¸ªé©¬å°”å¯å¤«å†³ç­–è¿‡ç¨‹ $&lt;S,A,P,R,\\gamma&gt;$ å’Œä¸€ä¸ªç­–ç•¥ $\\pi$ åï¼Œç›¸åº”çš„çŠ¶æ€è½¬ç§»æ¦‚ç‡ $P_{ss^\\prime}^\\pi$ å’Œå¥–åŠ±å‡½æ•° $R_{s}^\\pi$ å¯æ›´æ–°æè¿°å¦‚ä¸‹\\[\\begin{aligned}    P_{ss^\\prime}^\\pi &amp;= \\sum_{a\\in A}\\pi(a\\vert s)P_{ss^\\prime}^a\\\\    R_{s}^\\pi &amp;= \\sum_{a\\in A}\\pi(a\\vert s)R_{s}^a\\end{aligned}\\]å¯¹åº”çš„ $&lt;S,P^\\pi,R^\\pi,\\gamma&gt;$ æ˜¯ä¸€ä¸ªé©¬å°”å¯å¤«å¥–åŠ±è¿‡ç¨‹ï¼Œ $&lt;S,P^\\pi&gt;$ æ˜¯ä¸€ä¸ªé©¬å°”å¯å¤«è¿‡ç¨‹ã€‚4.3. åŠ¨æ€ç‰¹æ€§åœ¨æœ‰é™ MDP ä¸­ï¼ŒçŠ¶æ€ã€åŠ¨ä½œå’Œå¥–åŠ±çš„é›†åˆï¼ˆ$S, A, R$ï¼‰éƒ½åªæœ‰æœ‰é™ä¸ªå…ƒç´ ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œéšæœºå˜é‡ $R_t$ å’Œ $S_t$ å…·æœ‰å®šä¹‰æ˜ç¡®çš„ç¦»æ•£æ¦‚ç‡åˆ†å¸ƒï¼Œå¹¶ä¸”ä¹‹ä¾èµ–äºå‰ä¸€æ—¶åˆ»çš„çŠ¶æ€å’ŒåŠ¨ä½œã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œç»™å®šå‰ä¸€æ—¶åˆ»çš„çŠ¶æ€å’ŒåŠ¨ä½œçš„å€¼æ—¶ï¼Œè¿™äº›éšæœºå˜é‡çš„ç‰¹å®šå€¼ $s^\\prime \\in S, r^\\prime \\in R$ åœ¨ $t$ æ—¶åˆ»å‡ºç°çš„æ¦‚ç‡ä¸º\\[p(s^\\prime,r \\vert s,a) \\doteq \\mathbb{P}\\{S_t=s^\\prime, R_t=r \\vert S_{t-1}=s, A_{t-1}=a\\}\\]å‡½æ•° $p$ å®šä¹‰äº† MDP çš„åŠ¨æ€ç‰¹æ€§ã€‚åŠ¨æ€ç‰¹æ€§å‡½æ•°æ˜¯ä¸€ä¸ªæè¿° $t-1$ å’Œ $t$ å‰åä¸¤ä¸ªç›¸é‚»æ—¶åˆ»çš„éšæœºå˜é‡é—´åŠ¨æ€å…³ç³»çš„æ¡ä»¶æ¦‚ç‡ã€‚åœ¨ MDP ä¸­ï¼Œç”± $p$ ç»™å‡ºçš„æ¦‚ç‡å®Œå…¨åˆ»ç”»äº†ç¯å¢ƒçš„åŠ¨æ€ç‰¹æ€§ï¼Œå³$S_t,R_t$ çš„æ¯ä¸ªå¯èƒ½çš„å€¼å‡ºç°çš„æ¦‚ç‡åªå–å†³äºå‰ä¸€ä¸ªçŠ¶æ€ $S_{t-1}$ å’ŒåŠ¨ä½œ $A_{t-1}$ï¼Œä¸”ä¸æ›´æ—©æ—¶åˆ»çš„çŠ¶æ€å’ŒåŠ¨ä½œæ— å…³ï¼ˆé©¬å°”å¯å¤«æ€§ï¼‰ã€‚ä»å››å‚æ•°åŠ¨æ€å‡½æ•° $p$ ä¸­ï¼Œå¯ä»¥è®¡ç®—å‡ºå…³äºç¯å¢ƒçš„ä»»ä½•å…¶å®ƒä¿¡æ¯ã€‚æ¯”å¦‚ï¼Œæƒ³è¡¨è¾¾MDPçš„çŠ¶æ€è½¬ç§»è¿‡ç¨‹ï¼Œå¯ä»¥å°†éšæœºå˜é‡ $R$ æ±‚ç§¯åˆ†å¾—åˆ° çŠ¶æ€è½¬ç§»æ¦‚ç‡\\[P_{ss^\\prime}^a = p(s^\\prime \\vert s,a) \\doteq \\mathbb{P}\\{ S_t=s^\\prime \\vert S_{t-1}=s, A_{t-1}=a \\} = \\sum_{r\\in R}p(s^\\prime,r \\vert s,a)\\]æ‰€ä»¥ï¼Œæ•´ä¸ªé©¬å°”å¯å¤«å†³ç­–è¿‡ç¨‹çš„å…¨éƒ¨ä¿¡æ¯åŒ…å«åœ¨çŠ¶æ€å˜é‡é›†åˆ $A$ï¼Œ$S$ï¼Œ$R$ å’Œå‡½æ•°ç©ºé—´ $P$ ä¸­ï¼Œæ¯ä¸ªæ—¶åˆ»éƒ½æœ‰ä¸€ä¸ª $A_t$ï¼Œ$S_t$ï¼Œ$R_t$ï¼Œæ¯ä¸¤ä¸ªç›¸é‚»æ—¶åˆ»ä¹‹é—´éƒ½æœ‰ä¸€ä¸ª $p_t$ã€‚ç±»ä¼¼åœ°ï¼ŒçŠ¶æ€åŠ¨ä½œ $s,a$ å¯¹çš„æœŸæœ›å¥–åŠ±å¯ä»¥å†™ä½œä¸¤ä¸ªå‚æ•°çš„å‡½æ•°\\[r(s,a) = \\mathbb{E}_\\pi [R_{t+1} \\vert S_t = s] = \\sum_{r\\in R} r \\sum_{s^\\prime \\in S} p(s^\\prime, r \\vert s,a)\\]4.4. ä»·å€¼å‡½æ•°é©¬å°”å¯å¤«å†³ç­–è¿‡ç¨‹ä¸­ï¼Œä»·å€¼å‡½æ•°åˆ†ä¸ºçŠ¶æ€ä»·å€¼å‡½æ•°å’ŒåŠ¨ä½œä»·å€¼å‡½æ•°ã€‚4.4.1. çŠ¶æ€ä»·å€¼å‡½æ•°çŠ¶æ€ä»·å€¼å‡½æ•°ï¼ˆstate-value Functionï¼‰æ˜¯ä»æŸä¸ªçŠ¶æ€ $s$ å¼€å§‹ï¼Œæ‰§è¡Œç­–ç•¥ $\\pi$ æ‰€è·å¾—çš„å›æŠ¥çš„æœŸæœ›ï¼›ä¹Ÿå³åœ¨æ‰§è¡Œå½“å‰ç­–ç•¥æ—¶ï¼Œè¡¡é‡æ™ºèƒ½ä½“å¤„åœ¨çŠ¶æ€ $s$ æ—¶çš„ä»·å€¼å¤§å°ã€‚å³\\[v_\\pi(s) \\doteq \\mathbb{E}_\\pi[G_t \\vert S_t=s]\\]å…¶ä¸­ï¼Œ$\\mathbb{E}\\pi[\\cdot]$ æŒ‡åœ¨ç»™å®šç­–ç•¥ $\\pi$ æ—¶ä¸€ä¸ªéšæœºå˜é‡çš„æœŸæœ›å€¼ï¼Œ$t$ å¯ä»¥æ˜¯ä»»æ„æ—¶åˆ»ã€‚æ³¨æ„ï¼Œç»ˆæ­¢çŠ¶æ€çš„ä»·å€¼å§‹ç»ˆä¸ºé›¶ã€‚æˆ‘ä»¬æŠŠå‡½æ•° $v\\pi(s)$ ç§°ä¸ºç­–ç•¥ $\\pi$ çš„çŠ¶æ€ä»·å€¼å‡½æ•°ã€‚4.4.2. åŠ¨ä½œä»·å€¼å‡½æ•°ç±»ä¼¼åœ°ï¼Œæˆ‘ä»¬æŠŠç­–ç•¥ $\\pi$ ä¸‹åœ¨çŠ¶æ€ $s$ æ—¶é‡‡å–åŠ¨ä½œ $a$ çš„ä»·å€¼å³ä¸º $q_\\pi(s,a)$ã€‚å³æ ¹æ®ç­–ç•¥ $\\pi$ï¼Œä»çŠ¶æ€ $s$ å¼€å§‹ï¼Œæ‰§è¡ŒåŠ¨ä½œ $a$ ä¹‹åï¼Œæ‰€æœ‰å¯èƒ½çš„å†³ç­–åºåˆ—çš„æœŸæœ›å›æŠ¥\\[q_\\pi(s,a) \\doteq \\mathbb{E}_\\pi[G_t \\vert S_t=s, A_t=a]\\]4.4.3. äºŒè€…çš„æ„ä¹‰  å¦‚ä½•ç†è§£å¼ºåŒ–å­¦ä¹ ä¸­çš„Qå€¼å’ŒVå€¼ï¼Ÿ https://zhuanlan.zhihu.com/p/109498587å¼ºåŒ–å­¦ä¹ -1-Q_Table based Method  https://zhuanlan.zhihu.com/p/138291295çŠ¶æ€ä»·å€¼å‡½æ•°æ˜¯å¯¹çŠ¶æ€çš„ä»·å€¼çš„è¡¡é‡ã€‚ä»æŸä¸ªçŠ¶æ€å‡ºå‘ï¼Œä¾æ®ç‰¹å®šç­–ç•¥ $\\pi$ é‡‡ç”¨ä¸åŒåŠ¨ä½œï¼Œåœ¨ç¯å¢ƒçš„å½±å“ä¸‹è¿›è¡ŒçŠ¶æ€è½¬ç§»ã€‚åŠ¨ä½œä»·å€¼å‡½æ•°æ˜¯å¯¹æŸçŠ¶æ€ä¸‹ç‰¹å®šåŠ¨ä½œçš„ä»·å€¼çš„è¡¡é‡ã€‚ä»æŸä¸ªçŠ¶æ€å‡ºå‘ï¼Œé‡‡å–ç‰¹å®šçš„åŠ¨ä½œ $a$ï¼Œåœ¨ç¯å¢ƒçš„å½±å“ä¸‹è¿›è¡ŒçŠ¶æ€è½¬ç§»ï¼›åç»­ä¾æ®ç‰¹å®šç­–ç•¥ $\\pi$ é‡‡ç”¨ä¸åŒåŠ¨ä½œï¼Œåœ¨ç¯å¢ƒçš„å½±å“ä¸‹è¿›è¡ŒçŠ¶æ€è½¬ç§»ã€‚å¼ºåŒ–å­¦ä¹ æ¨¡å‹çš„å¥½åï¼Œä¸»è¦å–å†³äºåœ¨å½“å‰çŠ¶æ€ä¸‹ï¼Œæ˜¯å¦èƒ½é€‰æ‹©å‡ºæ”¶ç›Šæœ€å¤§çš„åŠ¨ä½œï¼Œå› æ­¤ $q(s,a)$ çš„ç²¾å‡†é¢„ä¼°æ˜¾å¾—ååˆ†é‡è¦ã€‚4.4.4. å›æº¯å›¾ä¸å›æº¯æ“ä½œå›æº¯æ“ä½œå°±æ˜¯å°†åç»§çŠ¶æ€ï¼ˆæˆ–â€œçŠ¶æ€-åŠ¨ä½œâ€äºŒå…ƒç»„ï¼‰çš„ä»·å€¼ä¿¡æ¯ å›ä¼  ç»™å½“å‰æ—¶åˆ»çš„çŠ¶æ€ï¼ˆæˆ–â€çŠ¶æ€-åŠ¨ä½œâ€œäºŒå…ƒç»„ï¼‰ï¼Œå¯ä»¥ç”¨å›æº¯å›¾æ¥è¡¨ç¤ºï¼Œè¿™æ˜¯å¼ºåŒ–å­¦ä¹ çš„æ ¸å¿ƒå†…å®¹ã€‚å…¸å‹çš„å›æº¯å›¾å¦‚ä¸‹ä¸¥è°¨åœ°è¯´ï¼Œ$q_\\pi$ å’Œ $v_\\pi$ çš„ä½œç”¨æ˜¯è¯„ä¼°ç»™å®šç­–ç•¥ $\\pi$ çš„ä»·å€¼ï¼Œä¹Ÿå°±æ˜¯ä¸€ç›´ä½¿ç”¨è¿™ä¸ªç­–ç•¥æ¥é€‰å–åŠ¨ä½œèƒ½å¾—åˆ°çš„æœŸæœ›å›æŠ¥ã€‚ä¸åŒä¹‹å¤„æ˜¯ï¼Œ$v_\\pi$ è¯„ä¼°çš„å¯¹è±¡æ˜¯çŠ¶æ€ï¼Œè€ƒè™‘ä»çŠ¶æ€ $s$ å‡ºå‘ï¼Œéµå¾ªç­–ç•¥ $\\pi$ å¾—åˆ°çš„æœŸæœ›å›æŠ¥ï¼›$q_\\pi$ è¯„ä¼°çš„å¯¹è±¡æ˜¯ä¸€ä¸ªçŠ¶æ€-åŠ¨ä½œå¯¹ï¼Œè€ƒè™‘ä»çŠ¶æ€ $s$ å‡ºå‘ï¼Œæ‰§è¡ŒåŠ¨ä½œ $a$ ä¹‹åï¼Œéµå¾ªç­–ç•¥ $\\pi$ å¾—åˆ°çš„æœŸæœ›å›æŠ¥ã€‚å› æ­¤ï¼Œ$v_\\pi$ å¯ä»¥å†™æˆ $q_\\pi$ å…³äºç­–ç•¥ $\\pi$ï¼ˆæ‰§è¡Œä¸åŒåŠ¨ä½œï¼‰çš„æœŸæœ›ï¼Œ$q_\\pi$ å¯ä»¥å†™æˆ $v_\\pi$ å…³äºçŠ¶æ€è½¬ç§» $P_{ss^\\prime}^a=p(s^\\prime \\vert s,a)$ï¼ˆæ‰§è¡ŒåŠ¨ä½œ $a$ åè½¬ç§»åˆ°ä¸åŒçŠ¶æ€ï¼‰çš„æœŸæœ›ã€‚ç„¶åå®ƒä»¬ç›¸äº’å¥—å¨ƒï¼Œå°±å¾—åˆ°äº†ä¸‹é¢çš„ä¸¤æ¡ç­‰å¼ï¼Œè¿™ä¸¤ä¸ªç­‰å¼ä¹Ÿå¯ä»¥é€šè¿‡å›æº¯å›¾æ¥ç›´è§‚ç†è§£ã€‚[ ç­‰å¼1 ]ï¼š\\[v_\\pi(s) = \\mathbb{E}_aq_\\pi(s,a) = \\sum_{a\\in A}\\pi(a\\vert s)q_\\pi(s,a)\\]ä¸Šé¢å›æº¯å›¾çš„ä¸ŠåŠéƒ¨åˆ†å¯¹åº”ä¸Šè¿°ç­‰å¼ï¼Œæè¿°äº†å¤„äºç‰¹å®šçŠ¶æ€ $s$ çš„ä»·å€¼ã€‚å³åœ¨çŠ¶æ€ $s$ æ—¶ï¼Œéµå¾ªç­–ç•¥ $\\pi$ åï¼ŒçŠ¶æ€ $s$ çš„ä»·å€¼ä½“è¡¨ç¤ºä¸ºåœ¨è¯¥çŠ¶æ€ä¸‹é‡‡å–æ‰€æœ‰å¯èƒ½åŠ¨ä½œçš„åŠ¨ä½œä»·å€¼ï¼ˆ$q$ å€¼ï¼‰æŒ‰è¯¥çŠ¶æ€ä¸‹åŠ¨ä½œå‘ç”Ÿæ¦‚ç‡ï¼ˆç­–ç•¥ $\\pi$ï¼‰çš„ä¹˜ç§¯æ±‚å’Œã€‚ä»çŠ¶æ€ $s$ æ¥çœ‹ï¼Œæˆ‘ä»¬æœ‰å¯èƒ½é‡‡å–ä¸¤ç§è¡ŒåŠ¨ï¼ˆå›¾ä¸­é»‘ç‚¹ï¼‰ï¼Œæ¯ä¸ªåŠ¨ä½œéƒ½æœ‰ä¸€ä¸ª $q$ å€¼ï¼ˆçŠ¶æ€-åŠ¨ä½œå€¼å‡½æ•°ï¼‰ã€‚å¯¹ $q$ å€¼è¿›è¡Œå¹³å‡ï¼Œè¿™ä¸ªå‡å€¼å‘Šè¯‰æˆ‘ä»¬åœ¨ç‰¹å®šçŠ¶æ€ä¸‹æœ‰å¤šå¥½ï¼Œä¹Ÿå³ $v_\\pi(s)$ã€‚ä¸Šè¿°ç­‰å¼å¯ä»¥é€šè¿‡ $v_\\pi(s)$ çš„è´å°”æ›¼æ–¹ç¨‹æ¨å¯¼å¾—åˆ°ï¼Œå³\\[\\begin{aligned}v_\\pi(s) &amp;= \\sum_{a, s^\\prime, r}\\pi(a\\vert s)p(s^\\prime,r \\vert s,a)\\cdot [  r+\\gamma v_\\pi(s^\\prime)  ]\\\\&amp;= \\sum_{a}\\pi(a\\vert s)\\cdot \\sum_{s^\\prime, r}p(s^\\prime,r \\vert s,a)\\cdot [  r+\\gamma v_\\pi(s^\\prime)  ]\\\\&amp;=\\sum_{a}\\pi(a\\vert s)\\cdot \\sum_{s^\\prime, r}p(s^\\prime,r \\vert s,a)\\cdot [r+\\gamma r+\\gamma^2 r+...\\vert s,a]\\\\&amp;=\\sum_{a}\\pi(a\\vert s)\\cdot \\mathbb{E}_\\pi[G_t\\vert s,a]\\\\&amp;=\\sum_{a}\\pi(a\\vert s)\\cdot q_\\pi(s,a)\\end{aligned}\\][ ç­‰å¼2 ]ï¼š\\[q_\\pi(s,a) = \\sum_{s^\\prime,r}p(s^\\prime,r \\vert s,a) \\left[r+\\gamma v_\\pi(s^\\prime) \\right]\\]è¯æ˜å¦‚ä¸‹\\[\\begin{aligned}q_\\pi(s,a) &amp;= \\mathbb{E}_\\pi\\left[ G_t \\vert S_t=s, A_t=a \\right]\\\\&amp;=\\mathbb{E}_\\pi\\left[R_{t+1}+\\gamma G_{t+1}\\vert S_t=s, A_t=a \\right]\\\\&amp;=\\sum_{s^\\prime,r}p(s^\\prime,r \\vert s,a) \\left[r+\\gamma \\sum_{a^\\prime}   \\pi(a^\\prime \\vert s^\\prime) \\mathbb{E}_\\pi [G_{t+1} \\vert S_{t+1}=s^\\prime, A_{t+1}=a^\\prime]  \\right]\\\\&amp;=\\sum_{s^\\prime,r}p(s^\\prime,r \\vert s,a) \\left[r+\\gamma \\sum_{a^\\prime}   \\pi(a^\\prime \\vert s^\\prime) q_\\pi(s^\\prime, a^\\prime)  \\right]\\\\&amp;=\\sum_{s^\\prime,r}p(s^\\prime,r \\vert s,a) \\left[r+\\gamma v_\\pi(s^\\prime) \\right]\\end{aligned}\\]ä¸Šå¼ä¹Ÿå¯ä»¥ä»å›æº¯å›¾ä¸­æ¨å¯¼å¾—å‡ºã€‚4.5. è´å°”æ›¼æœŸæœ›æ–¹ç¨‹ä¸ MRP ä¸­çš„ä»·å€¼å‡½æ•°ç±»ä¼¼ï¼ŒçŠ¶æ€ä»·å€¼å‡½æ•°ä¹Ÿæœ‰å¦‚ä¸‹è´å°”æ›¼æ–¹ç¨‹æˆç«‹[ ç­‰å¼3 ]ï¼š\\[\\begin{aligned}v_\\pi(s) &amp;= \\mathbb{E}_\\pi[R_{t+1} + \\gamma v_\\pi(s^\\prime) \\vert S_t = s]\\\\&amp;=\\sum_a \\pi(a\\vert s) \\sum_{s^\\prime}\\sum_r p(s^\\prime,r \\vert s,a) [  r+\\gamma v_\\pi(s^\\prime)  ]\\end{aligned}\\]æ–¹ç¨‹æ¨å¯¼è¿‡ç¨‹å¦‚ä¸‹ï¼Œé¦–å…ˆæ˜“çŸ¥\\[\\mathbb{E}_\\pi[R_{t+1}\\vert S_t=s] = \\sum_a\\pi(a\\vert s)\\sum_{s^\\prime}\\sum_r p(s^\\prime, r \\vert s,a) r\\]è€Œ\\[\\begin{aligned}\\mathbb{E}_\\pi[G_{t+1}\\vert S_{t}=s] &amp;= \\sum_a \\pi(a\\vert s) \\sum_{s^\\prime}\\sum_r  p(s^\\prime,r \\vert s,a) \\mathbb{E}_\\pi[G_{t+1}\\vert S_{t+1}=s^\\prime]\\\\&amp;= \\sum_a \\pi(a\\vert s) \\sum_{s^\\prime}\\sum_r  p(s^\\prime,r \\vert s,a) v_\\pi(s^\\prime)\\end{aligned}\\]åˆ™æœ‰è´å°”æ›¼æ–¹ç¨‹æ¨å¯¼å¦‚ä¸‹\\[\\begin{aligned}v_\\pi(s) &amp;= \\mathbb{E}_\\pi[G_t \\vert S_t=s]\\\\&amp;=\\mathbb{E}_\\pi[R_{t+1}+ \\gamma G_{t+1}\\vert S_t=s]\\\\&amp;=\\sum_a \\pi(a\\vert s) \\sum_{s^\\prime}\\sum_r p(s^\\prime,r \\vert s,a) [  r+\\gamma v_\\pi(s^\\prime)  ] \\\\&amp;=\\sum_{a, s^\\prime, r}\\pi(a\\vert s)p(s^\\prime,r \\vert s,a)\\cdot [  r+\\gamma v_\\pi(s^\\prime)  ]\\end{aligned}\\]æœ€åä¸€è¡Œï¼Œé€šè¿‡å°†æ±‚å’Œç¬¦å·åˆå¹¶åï¼Œæˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼Œä¸Šè¿°çŠ¶ç­‰å¼æè¿°äº†ä¸€ä¸ªå…³äºä¸‰å‚æ•° $a\\in A, s^\\prime \\in S, r\\in R$ åœ¨æ‰€æœ‰å¯èƒ½æ€§ä¸Šçš„æ±‚å’Œã€‚å¯¹äºæ¯ä¸€ä¸ªä¸‰å…ƒç»„ï¼Œæˆ‘ä»¬è®¡ç®—å‡ºå…¶æ¦‚ç‡ $\\pi(a\\vert s)p(s^\\prime,r \\vert s,a)$ ç„¶åä¹˜ä»¥æ–¹æ‹¬å·å†…çš„å€¼ä½œä¸ºæƒå€¼ï¼Œæœ€ååŠ æƒæ±‚å’Œå¾—åˆ°çŠ¶æ€ä»·å€¼å‡½æ•°çš„æœŸæœ›ã€‚å‚è€ƒå›æº¯å›¾å¯ä»¥æ›´å¥½ç†è§£ã€‚ç±»ä¼¼åœ°ï¼ŒåŠ¨ä½œä»·å€¼å‡½æ•°ä¹Ÿæœ‰å¦‚ä¸‹è´å°”æ›¼æ–¹ç¨‹æˆç«‹[ ç­‰å¼4 ]ï¼š\\[\\begin{aligned}q_\\pi(s,a) &amp;= \\mathbb{E}_\\pi[R_{t+1} + \\gamma q_\\pi(s^\\prime,a^\\prime) \\vert S_t = s, A_t = a]\\\\&amp;=\\sum_{s^\\prime,r}p(s^\\prime,r \\vert s,a) \\left[r+\\gamma \\sum_{a^\\prime}   \\pi(a^\\prime \\vert s^\\prime) q_\\pi(s^\\prime, a^\\prime)  \\right]\\\\end{aligned}\\]4.6. æœ€ä¼˜ä»·å€¼å‡½æ•°å¼ºåŒ–å­¦ä¹ ä¸­ï¼Œå”¯ä¸€èƒ½å˜åŠ¨çš„éƒ¨åˆ†å°±æ˜¯ç­–ç•¥ $\\pi$ã€‚å› æ­¤æˆ‘ä»¬å¸Œæœ›èƒ½æ‰¾åˆ°ä¸€ä¸ªæœ€ä¼˜çš„ç­–ç•¥\\[\\pi_\\star = \\mathop{argmax}\\limits_\\pi \\;v_\\pi(s) = \\mathop{argmax}\\limits_\\pi \\;q_\\pi(s,a)\\]ä½¿å¾—ä»·å€¼å‡½æ•°æœ€å¤§\\[\\begin{aligned}v_\\star(s) &amp;\\doteq \\mathop{max}\\limits_\\pi \\;v_\\pi(s) = v_{\\pi_\\star}(s)\\\\q_\\star(s,a) &amp;\\doteq \\mathop{max}\\limits_\\pi \\;q_\\pi(s,a) = q_{\\pi_\\star}(s,a)\\\\\\end{aligned}\\]å·²çŸ¥çŠ¶æ€ä»·å€¼å‡½æ•°æ˜¯åŠ¨ä½œä»·å€¼å‡½æ•°çš„æœŸæœ›ï¼ˆåŠ æƒå¹³å‡ï¼‰\\[v_\\pi(s) = \\mathbb{E}_aq_\\pi(s,a)\\]é‚£ä¹ˆå½“å–æœ€ä¼˜ç­–ç•¥æ—¶ï¼Œå…¶å¿…ç„¶å–åˆ°æœ€å¤§å€¼ï¼Œå³[ ç­‰å¼5 ]ï¼š\\[v_\\star(s) = \\mathop{max}\\limits_a \\; q_\\star(s,a)\\]ä½†ç»™å®šåŠ¨ä½œ $a$ åçš„çŠ¶æ€è½¬ç§» $s-s^\\prime$ å¹¶ä¸æ˜¯æœ€ä¼˜ç­–ç•¥èƒ½å¤Ÿå†³å®šçš„ï¼Œè€Œæ˜¯ç”±ç¯å¢ƒå†³å®šï¼Œå› æ­¤æœ€ä¼˜åŠ¨ä½œä»·å€¼å‡½æ•°å¹¶ä¸èƒ½å°†æ±‚å’Œç¬¦å·æ”¹ä¸º max ç¬¦å·ï¼Œå³[ ç­‰å¼6 ]ï¼š\\[q_\\star(s,a) = \\sum_{s^\\prime,r}p(s^\\prime,r \\vert s,a) \\left[r+\\gamma v_\\star(s^\\prime) \\right]\\]4.7. è´å°”æ›¼æœ€ä¼˜æ–¹ç¨‹æ”¹å†™ [ ç­‰å¼3 ] ï¼Œæœ€ä¼˜çŠ¶æ€ä»·å€¼å‡½æ•°å¯¹åº”çš„è´å°”æ›¼æœ€ä¼˜æ–¹ç¨‹ä¸º\\[v_\\star(s) = \\mathop{max}\\limits_a \\sum_{s^\\prime}\\sum_r p(s^\\prime,r \\vert s,a) [  r+\\gamma v_\\star(s^\\prime)  ]\\]å°† [ ç­‰å¼5 ] å¸¦å…¥ [ ç­‰å¼6 ] ï¼Œæœ€ä¼˜åŠ¨ä½œä»·å€¼å‡½æ•°å¯¹åº”çš„è´å°”æ›¼æœ€ä¼˜æ–¹ç¨‹ä¸º\\[q_\\star(s,a) = \\sum_{s^\\prime,r}p(s^\\prime,r \\vert s,a) \\left[r+\\gamma \\mathop{max}\\limits_a \\; q_\\star(s^\\prime,a^\\prime) \\right]\\]4.8. æœ€ä¼˜ç­–ç•¥è§£å†³å¼ºåŒ–å­¦ä¹ é—®é¢˜æ„å‘³ç€è¦å¯»æ‰¾ä¸€ä¸ªæœ€ä¼˜çš„ç­–ç•¥è®©ä¸ªä½“åœ¨ä¸ç¯å¢ƒäº¤äº’è¿‡ç¨‹ä¸­è·å¾—å§‹ç»ˆæ¯”å…¶å®ƒç­–ç•¥éƒ½è¦å¤šçš„æ”¶è·ï¼Œè¿™ä¸ªæœ€ä¼˜ç­–ç•¥æˆ‘ä»¬å¯ä»¥ç”¨ $\\pi_\\star$ è¡¨ç¤ºã€‚ä¸€æ—¦æ‰¾åˆ°è¿™ä¸ªæœ€ä¼˜ç­–ç•¥ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±è§£å†³äº†è¿™ä¸ªå¼ºåŒ–å­¦ä¹ é—®é¢˜ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œæ¯”è¾ƒéš¾å»æ‰¾åˆ°ä¸€ä¸ªæœ€ä¼˜ç­–ç•¥ï¼Œä½†æ˜¯å¯ä»¥é€šè¿‡æ¯”è¾ƒè‹¥å¹²ä¸åŒç­–ç•¥çš„ä¼˜åŠ£æ¥ç¡®å®šä¸€ä¸ªè¾ƒå¥½çš„ç­–ç•¥ï¼Œä¹Ÿå°±æ˜¯å±€éƒ¨æœ€ä¼˜è§£ã€‚å¦‚ä½•æ¯”è¾ƒç­–ç•¥çš„ä¼˜åŠ£å‘¢ï¼Ÿä¸€èˆ¬æ˜¯é€šè¿‡å¯¹åº”çš„ä»·å€¼å‡½æ•°æ¥æ¯”è¾ƒçš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¯»æ‰¾è¾ƒä¼˜ç­–ç•¥å¯ä»¥é€šè¿‡å¯»æ‰¾æœ€ä¼˜ä»·å€¼å‡½æ•° $v_{}(s)$ æˆ– $q_{}(s,a)$ æ¥å®Œæˆã€‚  å·²çŸ¥ $v_{*}$ä¸ºäº†æ±‚è§£æœ€ä¼˜ç­–ç•¥ï¼Œåªéœ€è¦åšä¸€æ­¥æœç´¢å°±è¡Œã€‚ä¹Ÿå°±æ˜¯å¯¹äºä¸åŒçš„ $a\\in A$ï¼Œè®¡ç®—\\[\\pi_\\star(a\\vert s) \\leftarrow \\mathop{argmax}\\limits_a \\sum_{s^\\prime,r}p(s^\\prime,r\\vert s,a)[r+\\gamma v_\\star(s^\\prime)]\\]å°±æ˜¯æˆ‘ä»¬çš„æœ€ä¼˜ç­–ç•¥ã€‚ä¸ºä»€ä¹ˆåªéœ€è¦ä¸€æ­¥æœç´¢å°±è¡Œå‘¢ï¼Ÿå› ä¸º $v_\\star$ å·²ç»è€ƒè™‘æœªæ¥å¯èƒ½è¡Œä¸ºçš„å›æŠ¥ã€‚  å·²çŸ¥ $q_{*}$å·²çŸ¥ $q_{\\star}$ å°±æ›´ç›´æ¥äº†ï¼Œåªè¦ $q_\\star$ ä¸­æœ€å¤§å€¼å¯¹åº”çš„åŠ¨ä½œå°±æ˜¯æœ€ä¼˜åŠ¨ä½œï¼ˆç­–ç•¥ï¼‰\\[\\pi_\\star(a\\vert s) \\leftarrow \\mathop{argmax}\\limits_a\\; q_\\star(s,a)\\]æˆ‘ä»¬å¯ä»¥çœ‹åˆ°æˆ‘ä»¬ç”šè‡³ä¸ç”¨çŸ¥é“ç¯å¢ƒæ¨¡å‹ $p$ã€‚ä½†ä»£ä»·æ˜¯æˆ‘ä»¬éœ€è¦è®¡ç®—æ‰€æœ‰çŠ¶æ€-åŠ¨ä½œå¯¹çš„ä»·å€¼å‡½æ•°ã€‚å¦‚æœä¸çŸ¥é“æœ€ä¼˜ä»·å€¼å‡½æ•°ï¼Œé‚£ä¹ˆå°±éœ€è¦é€šè¿‡ ç­–ç•¥è¿­ä»£ï¼ˆpolicy iterationï¼‰ æˆ–è€… å€¼è¿­ä»£ï¼ˆvalue iterationï¼‰ çš„æ–¹å¼æ¥å…ˆè¿›è¡Œä»·å€¼é¢„æµ‹ï¼Œå†æ±‚è§£æœ€ä¼˜ç­–ç•¥ã€‚è¿™å°†åœ¨ä¸‹ä¸€ä¸ª post æ¥ä»‹ç»ã€‚5. å‚è€ƒæ–‡çŒ®[1] çŸ¥ä¹. å¼ºåŒ–å­¦ä¹ ï¼ˆReinforcement Learningï¼‰.[2] ReEchooo. å¼ºåŒ–å­¦ä¹ çŸ¥è¯†è¦ç‚¹ä¸ç¼–ç¨‹å®è·µï¼ˆ1ï¼‰â€”â€”é©¬å°”å¯å¤«å†³ç­–è¿‡ç¨‹[3] ReEchooo. å¼ºåŒ–å­¦ä¹ ç¬”è®°ï¼ˆ2ï¼‰â€”â€”é©¬å°”å¯å¤«å†³ç­–è¿‡ç¨‹[4] Ping2021. ç¬¬äºŒè®² é©¬å°”å¯å¤«å†³ç­–è¿‡ç¨‹[5] æœ¨å¤´äººpuppet. å¼ºåŒ–å­¦ä¹ ï¼šè´å°”æ›¼æ–¹ç¨‹å’Œæœ€ä¼˜æ€§[6] koch. å¼ºåŒ–å­¦ä¹ -è´å°”æ›¼æ–¹ç¨‹å’Œè´å°”æ›¼æœ€ä¼˜æ–¹ç¨‹çš„æ¨å¯¼[7] Alvin. çŸ¥ä¹ï¼š3.6 æœ€ä¼˜ç­–ç•¥å’Œæœ€ä¼˜å€¼å‡½æ•°"
  },
  
  {
    "title": "Windowsç¯å¢ƒä¸‹ä½¿ç”¨CMake+MinGW-w64ç¼–è¯‘æ¨¡å‹åŠ è½½åº“assimp",
    "url": "/posts/windows-mingw64-assimp/",
    "categories": "Tutorial, Coding",
    "tags": "c/c++, vscode",
    "date": "2022-10-26 16:23:19 +0800",
    





    
    "snippet": "æœ¬æ–‡ä»‹ç»äº†åœ¨Windowsç¯å¢ƒä¸‹ä½¿ç”¨MinGW-w64ç¼–è¯‘æ¨¡å‹åŠ è½½åº“assimpçš„æ–¹æ³•å’Œå‘ã€‚  1. åŸºæœ¬çŸ¥è¯†          1.1. MinGW-w64      1.2. assimp        2. éƒ¨ç½²æ–¹å¼          2.1. CMake      2.2. make        3. å‚è€ƒæ–‡çŒ®1. åŸºæœ¬çŸ¥è¯†1.1. MinGW-w64MinGW çš„å…¨ç§°æ˜¯ Mini...",
    "content": "æœ¬æ–‡ä»‹ç»äº†åœ¨Windowsç¯å¢ƒä¸‹ä½¿ç”¨MinGW-w64ç¼–è¯‘æ¨¡å‹åŠ è½½åº“assimpçš„æ–¹æ³•å’Œå‘ã€‚  1. åŸºæœ¬çŸ¥è¯†          1.1. MinGW-w64      1.2. assimp        2. éƒ¨ç½²æ–¹å¼          2.1. CMake      2.2. make        3. å‚è€ƒæ–‡çŒ®1. åŸºæœ¬çŸ¥è¯†1.1. MinGW-w64MinGW çš„å…¨ç§°æ˜¯ Minimalist GNU on Windows ã€‚æ˜¯å°†ç»å…¸çš„å¼€æº C è¯­è¨€ç¼–è¯‘å™¨ GCC ç§»æ¤åˆ°äº† Windows å¹³å°ä¸‹ï¼Œå¹¶ä¸”åŒ…å«äº† Win32API ï¼Œå› æ­¤å¯ä»¥å°†æºä»£ç ç¼–è¯‘ä¸ºå¯åœ¨ Windows ä¸­è¿è¡Œçš„å¯æ‰§è¡Œç¨‹åºã€‚è€Œä¸”è¿˜å¯ä»¥ä½¿ç”¨ä¸€äº› Windows ä¸å…·å¤‡çš„ï¼ŒLinuxå¹³å°ä¸‹çš„å¼€å‘å·¥å…·ã€‚ä¸€å¥è¯æ¥æ¦‚æ‹¬ï¼šMinGW å°±æ˜¯ GCC çš„ Windows ç‰ˆæœ¬ ã€‚MinGW-w64 ä¸ MinGW çš„åŒºåˆ«åœ¨äº MinGW åªèƒ½ç¼–è¯‘ç”Ÿæˆ32ä½å¯æ‰§è¡Œç¨‹åºï¼Œè€Œ MinGW-w64 åˆ™å¯ä»¥ç¼–è¯‘ç”Ÿæˆ 64ä½ æˆ– 32ä½ å¯æ‰§è¡Œç¨‹åºã€‚æ­£å› ä¸ºå¦‚æ­¤ï¼ŒMinGW ç°å·²è¢« MinGW-w64 æ‰€å–ä»£ï¼Œä¸” MinGW ä¹Ÿæ—©å·²åœæ­¢äº†æ›´æ–°ï¼Œå†…ç½®çš„ GCC åœæ»åœ¨äº† 4.8.1 ç‰ˆæœ¬ï¼Œè€Œ MinGW-w64 å†…ç½®çš„ GCC åˆ™ä¸€ç›´ä¿æŒæ›´æ–°ã€‚å¯åœ¨æ­¤å¤„ä¸‹è½½æœ€æ–°ç‰ˆæœ¬ã€‚(https://github.com/niXman/mingw-builds-binaries/releases)ã€‚æ›´å¤šä»‹ç»å¯å‚è€ƒï¼šVSCodeéƒ¨ç½²C/C++å¼€å‘ç¯å¢ƒã€‚1.2. assimpAssimp å…¨ç§°ä¸º Open Asset Import Libraryï¼Œè¿™æ˜¯ä¸€ä¸ªæ¨¡å‹åŠ è½½åº“ï¼Œå¯ä»¥å¯¼å…¥å‡ åç§ä¸åŒæ ¼å¼çš„æ¨¡å‹æ–‡ä»¶ï¼ˆåŒæ ·ä¹Ÿå¯ä»¥å¯¼å‡ºéƒ¨åˆ†æ¨¡å‹æ ¼å¼ï¼‰ã€‚åªè¦ Assimp åŠ è½½å®Œäº†æ¨¡å‹æ–‡ä»¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä» Assimp ä¸Šè·å–æ‰€æœ‰æˆ‘ä»¬éœ€è¦çš„æ¨¡å‹æ•°æ®ã€‚Assimp æŠŠä¸åŒçš„æ¨¡å‹æ–‡ä»¶éƒ½è½¬æ¢ä¸ºä¸€ä¸ªç»Ÿä¸€çš„æ•°æ®ç»“æ„ï¼Œæ‰€æœ‰æ— è®ºæˆ‘ä»¬å¯¼å…¥ä½•ç§æ ¼å¼çš„æ¨¡å‹æ–‡ä»¶ï¼Œéƒ½å¯ä»¥ç”¨åŒä¸€ä¸ªæ–¹å¼å»è®¿é—®æˆ‘ä»¬éœ€è¦çš„æ¨¡å‹æ•°æ®ã€‚å®˜æ–¹æ‰‹å†Œåœ°å€ï¼šhttps://assimp-docs.readthedocs.io/en/v5.1.0/å®˜æ–¹ä»“åº“åœ°å€ï¼šhttps://github.com/assimp/assimpAssimp åŸºæœ¬ä¸Šæ²¡æœ‰é¢„ç¼–è¯‘çš„æ–‡ä»¶ï¼Œè€Œä¸”ä¸ºäº†é€‚é…æœ¬æœºç¯å¢ƒï¼Œæœ€å¥½è¿˜æ˜¯è‡ªå·±ç¼–è¯‘ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦ä¸‹è½½ Assimp çš„æºç ã€‚2. éƒ¨ç½²æ–¹å¼éƒ¨ç½²è¿‡ç¨‹åœ¨å¦‚ä¸‹ç‰ˆæœ¬éƒ¨ç½²æˆåŠŸï¼š  assimp 5.2.5  OS: Windows 11  CMake 3.25.0-rc2  gcc version 12.2.0 (x86_64-win32-sjlj-rev0, Built by MinGW-W64 project)  MinGW-w64: https://github.com/niXman/mingw-builds-binaries/releases ä¸‹è½½çš„ 2022 Aug 23 ç‰ˆæœ¬2.1. CMakeé¦–å…ˆéœ€è¦ä¸‹è½½ CMakeï¼Œå®˜ç½‘ï¼šhttps://cmake.org/ä¸‹è½½å®Œæˆåè¿è¡Œ CMake(cmake-gui)ï¼Œè®¾ç½®æºä»£ç è·¯å¾„ï¼ˆwhere is the source codeï¼‰å’ŒäºŒè¿›åˆ¶æ–‡ä»¶è·¯å¾„ï¼ˆwhere to build the binariesï¼‰ç‚¹å‡» Configure æŒ‰é’®è¿›è¡Œé…ç½®ã€‚é…ç½®ç”Ÿæˆæ‰€éœ€çš„ Makefilesé…ç½®ç¼–è¯‘å™¨æ³¨æ„ï¼š å®Œæˆé…ç½®åï¼Œå–æ¶ˆå‹¾é€‰ ASSIMP_WARNINGS_AS_ERRORSï¼Œå¦åˆ™ä¼šå°† Warning çœ‹ä½œ Error æŠ¥é”™ã€‚æœ€åç‚¹å‡» Generate æŒ‰é’®ç”Ÿæˆæ–‡ä»¶å’Œ makefileã€‚2.2. makeç®¡ç†å‘˜æ‰“å¼€ PowerShell æˆ–è€…å‘½ä»¤æç¤ºç¬¦ï¼Œcd åˆ°è®¾ç½®çš„äºŒè¿›åˆ¶æ–‡ä»¶è·¯å¾„ï¼Œè¿è¡Œä¸‹é¢çš„å‘½ä»¤mingw32-make.exe -j8æ³¨æ„ï¼šå‰ææ˜¯ MinGW-w64 å®‰è£…è·¯å¾„ä¸‹çš„ bin æ–‡ä»¶å¤¹å·²ç»æ·»åŠ åˆ°ç³»ç»Ÿçš„ç¯å¢ƒå˜é‡ï¼ˆPATHï¼‰ä¸­ã€‚æ³¨æ„ï¼š-j8 è¡¨ç¤ºä½¿ç”¨ CPU çš„å…«æ ¸è¿›è¡Œç¼–è¯‘ï¼Œæ ¹æ®è‡ªå·±çš„ç¡¬ä»¶æƒ…å†µè®¾ç½®ã€‚ç¼–è¯‘å®Œæˆåï¼Œå¾—åˆ°  include/assimp/config.hï¼ˆå°†æœ¬æ–‡ä»¶æ‹·è´è‡³å·¥ç¨‹çš„ include æ–‡ä»¶å¤¹æˆ– assimp æ–‡ä»¶å¤¹ä¹‹ç±» ï¼‰  bin/libassimp-5.dllï¼ˆWindowsä¸‹å°†æœ¬æ–‡ä»¶æ‹·è´è‡³ .exe ï¼‰  bin/unit.exe  lib/libassimp.dll.aå°† include/assimp ä¸­çš„æ‰€æœ‰å¤´æ–‡ä»¶ï¼ˆé™¤äº† config.hï¼‰æ‹·è´è‡³å‰é¢ä¸€æ ·çš„æ–‡ä»¶å¤¹ï¼ˆå·¥ç¨‹çš„ include æ–‡ä»¶å¤¹æˆ– assimp æ–‡ä»¶å¤¹ä¹‹ç±»ï¼‰3. å‚è€ƒæ–‡çŒ®æ— ã€‚"
  },
  
  {
    "title": "å¤©æ–‡å­¦åŸºç¡€ï¼ˆåæ ‡ç³»ç»Ÿï¼‰",
    "url": "/posts/astronomy-basic-coordinate/",
    "categories": "Academic, Knowledge",
    "tags": "astronomy",
    "date": "2022-03-23 16:23:19 +0800",
    





    
    "snippet": "æœ¬æ–‡ä»‹ç»äº†å¤©æ–‡å­¦ä¸­åŸºæœ¬çš„åº§æ ‡ç³»ç»Ÿã€‚  1. èƒŒæ™¯          1.1. å›½é™…åœ°çƒè‡ªè½¬å’Œå‚è€ƒæ¡†æ¶æœåŠ¡      1.2. å›½é™…å¤©æ–‡å­¦è”åˆä¼š        2. åæ ‡ç³»          2.1. å‚è€ƒç³»ç»Ÿä¸å‚è€ƒæ¡†æ¶      2.2. åæ ‡ç³»çš„åˆ†ç±»      2.3. å›½é™…å¤©çƒå‚è€ƒç³»ç»Ÿå’Œå‚è€ƒæ¡†æ¶ï¼ˆICRS/ICRFï¼‰                  2.3.1. å¤ªé˜³ç³»è´¨å¿ƒå¤©çƒå‚è€ƒç³»ç»Ÿ...",
    "content": "æœ¬æ–‡ä»‹ç»äº†å¤©æ–‡å­¦ä¸­åŸºæœ¬çš„åº§æ ‡ç³»ç»Ÿã€‚  1. èƒŒæ™¯          1.1. å›½é™…åœ°çƒè‡ªè½¬å’Œå‚è€ƒæ¡†æ¶æœåŠ¡      1.2. å›½é™…å¤©æ–‡å­¦è”åˆä¼š        2. åæ ‡ç³»          2.1. å‚è€ƒç³»ç»Ÿä¸å‚è€ƒæ¡†æ¶      2.2. åæ ‡ç³»çš„åˆ†ç±»      2.3. å›½é™…å¤©çƒå‚è€ƒç³»ç»Ÿå’Œå‚è€ƒæ¡†æ¶ï¼ˆICRS/ICRFï¼‰                  2.3.1. å¤ªé˜³ç³»è´¨å¿ƒå¤©çƒå‚è€ƒç³»ç»Ÿå’Œå‚è€ƒæ¡†æ¶ï¼ˆBCRS/BCRFï¼‰          2.3.2. åœ°å¿ƒå¤©çƒå‚è€ƒç³»ç»Ÿå’Œå‚è€ƒæ¡†æ¶ï¼ˆGCRS/GCRFï¼‰                    2.4. J2000.0å¹³èµ¤é“å¹³æ˜¥åˆ†ç‚¹åæ ‡ç³»      2.5. å›½é™…åœ°çƒå‚è€ƒç³»ç»Ÿå’Œå‚è€ƒæ¡†æ¶ï¼ˆITRS/ITRFï¼‰      2.6. åœ°ç†åæ ‡ç³»      2.7. å½“åœ°æ°´å¹³åæ ‡ç³»      2.8. é£è¡Œåæ ‡ç³»      2.9. æœ¬ä½“åæ ‡ç³»        3. åæ ‡å˜æ¢          3.1. å²å·®ã€ç« åŠ¨å’Œæç§»      3.2. åœ°å¿ƒå¤©çƒå‚è€ƒç³»ç»Ÿä¸å›½é™…åœ°çƒå‚è€ƒç³»ç»Ÿçš„å˜æ¢      3.3. åœ°å¿ƒå¤©çƒå‚è€ƒç³»åˆ°åœ°çƒå›ºè¿åæ ‡ç³»çš„å˜æ¢        4. å‚è€ƒæ–‡çŒ®1. èƒŒæ™¯1.1. å›½é™…åœ°çƒè‡ªè½¬å’Œå‚è€ƒæ¡†æ¶æœåŠ¡å›½é™…åœ°çƒè‡ªè½¬å’Œå‚è€ƒæ¡†æ¶æœåŠ¡ï¼ˆInternational Earth Rotation and Reference System, IERSï¼‰ï¼ˆå®˜ç½‘ï¼šhttps://www.iers.org/IERS/EN/Home/home_node.html ï¼‰çš„ä¸»è¦ç›®æ ‡æ˜¯é€šè¿‡æä¾›å›½é™…é™†ç©ºå‚è€ƒç³»ç»Ÿçš„å…¥å£æ¥ä¸ºå¤©æ–‡å­¦ã€æµ‹åœ°å­¦å’Œåœ°çƒç‰©ç†å­¦çš„ç ”ç©¶å›¢ä½“æœåŠ¡ã€‚è¯¥ç½‘ç«™æä¾›äº†æœ‰å…³å›½é™…åœ°çƒè‡ªè½¬æœåŠ¡ä¸­å¿ƒçš„ä»»åŠ¡ã€æœºæ„è®¾ç½®ã€æˆå‘˜ä»¥åŠç›¸å…³äº§å“çš„è¯¦ç»†ä¿¡æ¯ï¼ŒåŒæ—¶è¿˜æä¾›äº†é€šå‘å…¶æ•°æ®åº“å’Œå…¬å‘Šä¸­çš„è§‚æµ‹æ•°æ®ä¸ç ”ç©¶ç»“æœçš„å…¥å£ã€‚å›½é™…åœ°çƒè‡ªè½¬æœåŠ¡(International Earth Rotation Service-ç®€ç§°IERS)ç”±å›½é™…å¤§åœ°æµ‹é‡å­¦å’Œåœ°çƒç‰©ç†å­¦è”åˆä¼šåŠä¸å›½é™…å¤©æ–‡å­¦è”åˆä¼šè”åˆåˆ›åŠï¼Œç”¨ä»¥å–ä»£å›½é™…æ—¶é—´å±€(BIH)çš„åœ°çƒè‡ªè½¬éƒ¨åˆ†å’ŒåŸæœ‰çš„å›½é™…æç§»æœåŠ¡(IPMS)ã€‚1.2. å›½é™…å¤©æ–‡å­¦è”åˆä¼šå›½é™…å¤©æ–‡å­¦è”åˆä¼šï¼ˆInternational Astronomical Union, IAUï¼‰ï¼ˆå®˜ç½‘ï¼šhttps://www.iau.org/ ï¼‰æ˜¯ä¸–ç•Œå„å›½å¤©æ–‡å­¦æœ¯å›¢ä½“è”åˆç»„æˆçš„éæ”¿åºœæ€§å­¦æœ¯ç»„ç»‡ï¼Œå…¶å®—æ—¨æ˜¯ç»„ç»‡å›½é™…å­¦æœ¯äº¤æµï¼Œæ¨åŠ¨å›½é™…åä½œï¼Œä¿ƒè¿›å¤©æ–‡å­¦çš„å‘å±•ã€‚å›½é™…å¤©æ–‡å­¦è”åˆä¼šäº1919å¹´7æœˆåœ¨å¸ƒé²å¡å°”æˆç«‹ã€‚å¤©æ–‡å­¦è”ç›Ÿæœ‰73ä¸ªæˆå‘˜å›½ï¼Œå…¶ä¸­åŒ…æ‹¬ä¸“ä¸šå¤©æ–‡å­¦ç ”ç©¶è¾¾åˆ°è¾ƒé«˜ç¨‹åº¦çš„å¤§å¤šæ•°å›½å®¶ã€‚å¤©æ–‡å­¦è”ç›Ÿçš„ä¸€ä¸ªä¸»è¦ä»äº‹åœ°é¢å’Œç©ºé—´å¤©æ–‡å­¦å„å­¦ç§‘çš„ 10528 å¤šåæˆå‘˜çš„ç›´æ¥å‚ä¸ã€‚2. åæ ‡ç³»2.1. å‚è€ƒç³»ç»Ÿä¸å‚è€ƒæ¡†æ¶å‚è€ƒç³»ç»Ÿï¼ˆreference systemï¼‰æ˜¯å…³äºåæ ‡ç³»çš„â€œç†è®ºå®šä¹‰â€ï¼ŒåŒ…æ‹¬åŸç‚¹ã€åæ ‡è½´ã€åæ ‡å¹³é¢ï¼Œä»¥åŠåŸºæœ¬çš„æ•°å­¦æˆ–ç‰©ç†æ¨¡å‹ã€‚å…¶åŒ…å«è‡ªèº«éƒ¨ç½²åº”ç”¨æ‰€éœ€çš„æ¨¡å‹å’Œæ ‡å‡†ï¼Œç”¨ä»¥è§„å®šåæ ‡ç³»ä¸‰ä¸ªè½´å‘å’Œåæ ‡åŸç‚¹çš„å»ºæ¨¡æ–¹æ³•ï¼Œå¯ä»¥ç†è§£ä¸ºä¸€ç»„å¤„æ–¹ï¼ˆprescriptionsï¼‰å’Œå…¬çº¦ï¼ˆconventionsï¼‰ã€‚å‚è€ƒç³»ç»Ÿä¹Ÿæœ‰è¢«ç¿»è¯‘ä¸ºå‚è€ƒæ¡†æ¶æˆ–å‚è€ƒæ¶ã€‚å‚è€ƒæ¡†æ¶ï¼ˆreference frameï¼‰æ˜¯å¯¹å‚è€ƒç³»ç»Ÿçš„â€œå…·ä½“å®ç°â€ï¼Œä¸€èˆ¬æ˜¯é€šè¿‡å¯¹ä¸€ç»„å‚è€ƒåæ ‡ï¼ˆå¤©ä½“å‚è€ƒæ¡†æ¶æ˜¯ä¸€ç»„åŸºæœ¬æ’æ˜Ÿï¼Œåœ°çƒå‚è€ƒæ¡†æ¶æ˜¯ä¸€ç»„åŸºå‡†ç«™ï¼‰è¿›è¡Œè§‚æµ‹æ¥å…·ä½“å®ç°æŸä¸€å‚è€ƒç³»ç»Ÿã€‚å»ºç«‹å‚è€ƒæ¡†æ¶å¿…é¡»éµå¾ªä¸€å®šçš„åŸåˆ™ï¼Œè¿™äº›åŸåˆ™åŒ…æ‹¬ï¼šå¦‚ä½•é€šè¿‡è§‚æµ‹å»ºç«‹æŸäº›äº‹ä»¶çš„æ—¶ç©ºåæ ‡ï¼Œå¦‚ä½•å®ç°ç›¸åº”ç³»ç»Ÿï¼ˆæ¡†æ¶ï¼‰ã€‚ä¾‹å¦‚ï¼Œé€šè¿‡è§‚æµ‹ä»¥ä¸€äº›å¤©ä½“ç›¸å¯¹äºæŸå‚è€ƒæ¡†æ¶çš„ä½ç½®çš„å†ä¹¦æˆ–æ˜Ÿè¡¨çš„å½¢å¼æ¥å®ç°ã€‚å»ºç«‹å¤©æ–‡å‚è€ƒæ¡†æ¶å¯ä¾æ®ä¸‰ç§åŸç†ï¼šæ˜Ÿå†ç½—ç›˜ã€æ’æ˜Ÿç½—ç›˜ã€æƒ¯æ€§ç½—ç›˜ã€‚      æ˜Ÿå†ç½—ç›˜æ˜¯ä»¥ç›¸äº’ä½œç”¨çš„å¤©ä½“å¹³åŠ¨åŠ¨åŠ›å­¦ä¸ºåŸºç¡€çš„ã€‚åœ¨åŸºæœ¬çš„å‚è€ƒæ¡†æ¶ä¸­ï¼Œå¯ç»™å‡ºç›¸åº”çš„è¿åŠ¨åŠ¨åŠ›å­¦æ–¹ç¨‹ï¼Œå¹¶å°†è¿™äº›å¤©ä½“ä½ç½®çš„è§‚æµ‹ç»“æœä½œä¸ºäº‹ä»¶çš„å‡½æ•°æ¥å®ç°ç›¸åº”çš„æ¡†æ¶æ„å»ºã€‚åŸºäºæ˜Ÿå†ç½—ç»å»ºç«‹çš„å‚è€ƒæ¡†æ¶ç§°ä¸ºåŠ¨åŠ›å­¦å‚è€ƒæ¡†æ¶ï¼ˆDRSï¼‰ã€‚å›½é™…åœ°çƒåæ ‡ç³»ï¼ˆITRSï¼‰çš„å»ºç«‹ä¸»è¦æ˜¯åŸºäºæ˜Ÿå†ç½—ç»ï¼Œå³äººé€ å«æ˜Ÿçš„è§‚æµ‹ç»“æœï¼›å¤ªé˜³è´¨å¿ƒåŠ¨åŠ›å­¦å‚è€ƒæ¡†æ¶ï¼ˆBDRSï¼‰æ˜¯é€šè¿‡æè¿°å¤ªé˜³ç³»å¤©ä½“è¿åŠ¨çš„å†è¡¨æ¥å®ç°çš„ã€‚å†è¡¨ï¼ˆephemerisï¼‰è¿™ä¸ªè¯æ¥æºäºå¸Œè…Šè¯­ï¼ˆephemerosè¡¨ç¤ºä¸€å¤©ï¼‰ï¼Œæ„æ€ä¸ºç”¨äºç¡®å®šå¤ªé˜³ç³»å¤§å‹å¤©ä½“ä½ç½®å’Œé€Ÿåº¦çš„åˆ—è¡¨ã€è¡¨æ ¼æˆ–è®¡ç®—æœºç¨‹åºã€‚å†è¡¨å¯åˆ†ä¸ºæ•°å€¼å†è¡¨ï¼ˆDEã€EPMï¼‰å’ŒåŠè§£æå†è¡¨ï¼ˆVSOP2010Aå’ŒVSOP2010Bï¼‰ã€‚        æ’æ˜Ÿæ˜Ÿè¡¨æ˜¯åˆ©ç”¨é¥è¿œçš„å¤©ä½“ï¼Œå¦‚ç±»æ˜Ÿä½“çš„å…‰ä¿¡æ¯æ„å»ºçš„å‡†æƒ¯æ€§å‚è€ƒæ¡†æ¶ï¼Œå¦‚ä¾å·´è°·å‚è€ƒæ¡†æ¶ï¼ˆHCRSï¼‰ã€‚        ä¸åŒäºå¤©ä½“çš„å¹³ç§»è¿åŠ¨ï¼Œå¦‚æ¿€å…‰é™€èºç­‰çš„æƒ¯æ€§ç³»ç»Ÿå¯å®šä¹‰ä¸€ä¸ªå‚è€ƒæ¡†æ¶ï¼Œå®ƒç›´æ¥æ„å»ºä¸€ä¸ªåŠ¨åŠ›å­¦éæ—‹è½¬å‚è€ƒæ¡†æ¶ã€‚  2.2. åæ ‡ç³»çš„åˆ†ç±»  i ç³»ï¼šåœ°å¿ƒæƒ¯æ€§åæ ‡ç³»ï¼ˆinertialï¼‰æ˜¯åœ¨æƒ¯æ€§ç©ºé—´ä¸­é™æ­¢æˆ–ä½œåŒ€é€Ÿè¿åŠ¨çš„å‚è€ƒç³»ï¼Œæ˜¯ä¸€ä¸ªç†æƒ³åæ ‡ç³»ã€‚å®è·µä¸­å°†è¯¥åæ ‡ç³»çš„åŸç‚¹å›ºå®šåœ¨åœ°çƒè´¨å¿ƒï¼Œ z è½´å¹³è¡Œäºåœ°çƒå¹³å‡è‡ªè½¬è½´ä¸”æŒ‡å‘åŒ—æç‚¹ï¼ˆåè®®åŒ—æï¼‰ï¼Œ x è½´æŒ‡å‘å¹³æ˜¥åˆ†ç‚¹ï¼Œ z è½´åœ¨èµ¤é“é¢å†…ä¸”ä¸ x è½´å’Œ z è½´å‚ç›´æ„æˆå³æ‰‹åæ ‡ç³»ï¼Œä¸‰ä¸ªè½´åœ¨æƒ¯æ€§ç©ºé—´ä¸­å›ºå®šä¸åŠ¨ã€‚  e ç³»ï¼šåœ°å¿ƒåœ°å›ºåæ ‡ç³»(Earth Center Earth Fixed Frame, ECEF)æ˜¯æŒ‡åŸç‚¹åœ¨åœ°å¿ƒï¼Œä¸åœ°çƒå›ºè¿ï¼Œå¹¶éšç€åœ°çƒä¸€èµ·è½¬åŠ¨çš„åæ ‡ç³»ã€‚x è½´æŒ‡å‘èµ¤é“ä¸æœ¬åˆå­åˆçº¿çš„äº¤ç‚¹ï¼Œz è½´æŒ‡å‘åœ°çƒå¹³å‡è‡ªè½¬è½´æ–¹å‘ï¼Œy è½´ä¸ xã€z è½´å‚ç›´å¹¶æ»¡è¶³å³æ‰‹å®šåˆ™ï¼Œå¸¸ç”¨ç¬¦å· e æ¥è¡¨ç¤ºã€‚  n ç³»ï¼šå¯¼èˆªåæ ‡ç³»ï¼ˆNavigationï¼‰ ä¸€èˆ¬é€‰å½“åœ°åœ°ç†æ°´å¹³åæ ‡ç³»ï¼ˆ Local-Level-Frame, LLFï¼‰ï¼Œè¯¥åæ ‡ç³»å¯ä»¥æä¾›ç›´è§‚çš„å¯¼èˆªå‚æ•°ã€‚è¯¥åæ ‡ç³»çš„åŸç‚¹ä¸ºè½½ä½“ä¸­å¿ƒï¼Œ x è½´æ²¿å‚è€ƒæ¤­çƒå­åˆçº¿çš„åˆ‡çº¿æ–¹å‘æŒ‡åŒ—ï¼Œ y è½´æ²¿å‚è€ƒæ¤­çƒæ³•çº¿å‚ç›´å‘ä¸‹ï¼Œ z è½´åœ¨å½“åœ°æ°´å¹³é¢å†…ä¸ x è½´å’Œ y è½´æ„æˆå³æ‰‹åæ ‡ç³»ï¼Œåˆç§°ä¸ºåŒ—-ä¸œ-åœ°ï¼ˆ North-East-Down, NEDï¼‰åæ ‡ç³»ã€‚  b ç³»ï¼šåŒè½½ä½“å›ºè¿çš„ä¸€ç§æ­£äº¤åæ ‡ç³»ï¼Œx è½´ä¸è½½ä½“è§’è¿åŠ¨çš„æ¨ªæ»šè½´æ–¹å‘ç›¸åŒä¸”æŒ‡å‘è½½ä½“å‰æ–¹ï¼Œ y è½´ä¸è½½ä½“è§’è¿åŠ¨çš„ä¿¯ä»°è½´æ–¹å‘ç›¸åŒä¸”æŒ‡å‘è½½ä½“å³ä¾§ï¼Œ z è½´ä¸è½½ä½“è§’è¿åŠ¨çš„èˆªå‘è½´æ–¹å‘ç›¸åŒä¸”ä¸ x è½´å’Œ y è½´æ„æˆå³æ‰‹åæ ‡ç³»ï¼Œç§°ä¸ºå‰-å³-ä¸‹ï¼ˆ Forward-RightDownï¼Œ FRDï¼‰åæ ‡ç³»ã€‚  c ç³»ï¼šç›¸æœºåæ ‡ç³»ï¼ŒåŸç‚¹ä¸ºå…‰å­¦é€é•œä¸­å¿ƒï¼Œ Üºx è½´æ²¿ç›¸æœºé•œå¤´æ–¹å‘ä¸”å‘å³ä¸ºæ­£ï¼Œz è½´æ²¿ç›¸æœºé•œå¤´æ–¹å‘ä¸”å‘å‰ä¸ºæ­£ï¼Œy è½´ä¸Üºx è½´å’ŒÜ¼ z è½´æ„æˆå³æ‰‹åæ ‡ç³»ã€‚2.3. å›½é™…å¤©çƒå‚è€ƒç³»ç»Ÿå’Œå‚è€ƒæ¡†æ¶ï¼ˆICRS/ICRFï¼‰å›½é™…å¤©çƒå‚è€ƒç³»ç»Ÿï¼ˆCelestial Reference Systemï¼ŒICRSï¼‰æ˜¯ä¸€ä¸ªå‡†æƒ¯æ€§æ— æ—‹è½¬å‚è€ƒç³»ç»Ÿï¼Œå…¶åŸç‚¹æ˜¯å¹¿ä¹‰ç›¸å¯¹è®ºæ¡†æ¶ä¸‹çš„VLBIæµ‹å®šçš„å¤ªé˜³ç³»è´¨å¿ƒï¼ŒåŸºæœ¬å¹³é¢å°½å¯èƒ½æ¥è¿‘J2000.0å¹³èµ¤é“é¢ï¼ŒXè½´æŒ‡å‘J2000.0å†å…ƒçš„å¹³æ˜¥åˆ†ç‚¹æ–¹å‘ï¼ˆè¢«éšå«å®šä¹‰åœ¨ä¸€ç»„æ˜Ÿè¡¨çš„23ä¸ªå°„ç”µæºçš„å¹³èµ¤ç»ä¸­ï¼‰ï¼ŒZè½´å‚ç›´äºJ2000.0å¹³èµ¤é“é¢ï¼ŒYè½´é€šè¿‡å³æ‰‹å®šåˆ™ç¡®å®šã€‚ICRSæ˜¯ç›´æ¥ç”±é¥è¿œã€é™æ­¢çš„å°„ç”µæºè¡¨æ¥å®šä¹‰çš„ã€‚å°„ç”µæºå¯è¢«åˆ†ä¸ºä¸‰ç±»ï¼šå®šä¹‰æºã€å€™é€‰æºã€å…¶å®ƒæºã€‚å®šä¹‰æºåº”æœ‰å¤§é‡çš„è§‚æµ‹å’Œè¶³å¤Ÿé•¿çš„æ•°æ®å¯ä»¥è¯„å®šä½ç½®çš„ç¨³å®šæ€§ï¼Œå®ƒä»¬ç»´æŒç€ICRSçš„è½´æ–¹å‘ï¼›å€™é€‰æºæ²¡æœ‰è¶³å¤Ÿçš„è§‚æµ‹æ•°æ®æˆ–è§‚æµ‹æ—¶é—´å¤ªçŸ­ï¼Œä¸èƒ½ç”¨æ¥ä½œä¸ºå®šä¹‰æºï¼Œä½†å®ƒä»¬å¯èƒ½æ˜¯æœªæ¥æ½œåœ¨çš„å®šä¹‰æºï¼›å…¶å®ƒæºåŒ…æ‹¬ä½ç½®ç¡®å®šè¾ƒå·®çš„æºï¼Œä½†åœ¨å¯¼å‡ºå„ç§æ¡†æ¶æ—¶ä¼šç”¨åˆ°ã€‚å›½é™…å¤©çƒå‚è€ƒæ¡†æ¶ï¼ˆCelestial Reference Frame, ICRFï¼‰æ˜¯ICRSçš„ä¸€ä¸ªå…·ä½“å®ç°ï¼Œå®ƒæ˜¯é€šè¿‡è¶…é•¿åŸºçº¿å¹²æ¶‰æµ‹é‡ï¼ˆVery Long Baseline Interferometry, VLBIï¼‰ä¼°è®¡ä¸€ç»„é“¶æ²³ç³»å¤–å°„ç”µæºçš„ç²¾ç¡®åæ ‡ç¡®å®šçš„ï¼ˆå³å®ƒç›¸å¯¹äºé¥è¿œçš„å®‡å®™ç‰©ä½“æ˜¯å›ºå®šçš„ï¼‰ã€‚å…¶é‡‡ç”¨çš„J2000.0å¹³èµ¤é“å’Œå¹³æ˜¥åˆ†ç‚¹ç”±IAUåœ¨1976å¹´å‘å¸ƒçš„åè®®å®šä¹‰ã€‚ç›®å‰ç”¨æ¥å®ç°ICRSçš„å°„ç”µæºè¡¨åŒ…å«ICRF1å’ŒICRF2ä¸¤ä¸ªç‰ˆæœ¬ï¼ŒICRF1å°„ç”µæºè¡¨åŒ…å«äº†608ä¸ªå°„ç”µæºçš„ä½ç½®ï¼Œå…¶ä¸­å®šä¹‰æº212ä¸ªï¼Œå€™é€‰æº294ä¸ªï¼Œå…¶ä»–æº102ä¸ªï¼›ICRF2å°„ç”µæºè¡¨åŒ…å«äº†3414ä¸ªè‡´å¯†å¤©æ–‡å°„ç”µæºçš„ç²¾ç¡®åæ ‡ï¼Œæœ‰292ä¸ªå®šä¹‰æºã€‚ç”±äºICRFï¼ˆåŒ…æ‹¬ICRF1å’ŒICRF2ï¼‰æ˜¯åœ¨å°„ç”µæ³¢æ®µå»ºç«‹çš„ï¼Œè€ŒåŸºå‡†å°„ç”µæºåœ¨å…‰å­¦æ³¢æ®µéå¸¸æš—ï¼Œå¯¹å…‰å­¦è§‚æµ‹å¾ˆä¸æ–¹ä¾¿ï¼Œæ‰€ä»¥IAU12000å†³è®®B1.2æ¨èä½¿ç”¨ä¾å·´è°·æ˜Ÿè¡¨ï¼ˆHipparcos Catalogueï¼‰ä½œä¸ºICRSåœ¨å…‰å­¦æ³¢æ®µçš„ä¸»è¦å®ç°ï¼Œå¹¶å‘½åä¸ºä¾å·´è°·å‚è€ƒç³»ç»Ÿï¼ˆHCRFï¼‰ï¼Œå…¶å¹³å‡è§‚æµ‹å†å…ƒä¸ºJ1991.25ã€‚ä¾å·´è°·æ˜Ÿè¡¨æ¯”ä¹‹å‰çš„ä»»ä½•å…‰å­¦å¤©ä½“æµ‹é‡æ˜Ÿè¡¨éƒ½ç²¾ç¡®ï¼Œè€Œä¸”æ²¡æœ‰æ˜æ˜¾çš„æ˜Ÿç­‰å·®å’ŒåŒºåŸŸå·®ã€‚ä¸æ²³å¤–å°„ç”µæºç›¸æ¯”ï¼Œæœ€å¤§åŒºåˆ«åœ¨äºæœ‰å¾ˆæ˜æ˜¾çš„è‡ªè¡Œï¼Œå› æ­¤ä¾å·´è°·æ˜Ÿè¡¨çš„ä½ç½®ç²¾åº¦ä¾èµ–æ—¶é—´ï¼Œéšç€æ—¶é—´åç¦»å…¶å¹³å‡è§‚æµ‹å†å…ƒè€Œé€æ¸é™ä½ã€‚2.3.1. å¤ªé˜³ç³»è´¨å¿ƒå¤©çƒå‚è€ƒç³»ç»Ÿå’Œå‚è€ƒæ¡†æ¶ï¼ˆBCRS/BCRFï¼‰å¤ªé˜³ç³»è´¨å¿ƒå¤©çƒå‚è€ƒç³»ç»Ÿï¼ˆBarycentric Celestial Reference Systemï¼ŒBCRSï¼‰æ˜¯ICRSä¸‹å±çš„ä¸€ç§å‚è€ƒç³»ç»Ÿã€‚BCRSå’ŒICRSçš„åŒºåˆ«ä½“ç°åœ¨ä¸åŒçš„æŠ½è±¡å±‚æ¬¡ä¸Šã€‚åŸåˆ™ä¸Šï¼ŒBCRSè½´å¯ä»¥é€šè¿‡ä¸åŒçš„æŠ€æœ¯æ¥å›ºå®šã€‚ä½†ç›®å‰å®ƒä»¬æ˜¯ç”±ICRSç¡®å®šçš„ã€‚ä¸¥æ ¼è€Œè¨€ï¼ŒBCRSçš„å®šä¹‰åº”è¯¥ä¸å‚è€ƒICRSã€‚å¤ªé˜³ç³»è´¨å¿ƒå¤©çƒå‚è€ƒæ¡†æ¶ï¼ˆBarycentric Celestial Reference Frameï¼ŒBCRFï¼‰æ˜¯BCRSçš„ä¸€ä¸ªå®ç°ã€‚ç›®å‰ICRSå’ŒBCRSï¼ŒICRFå’ŒBCRFä¹‹é—´å­˜åœ¨æ··ç”¨çš„æƒ…å†µã€‚2.3.2. åœ°å¿ƒå¤©çƒå‚è€ƒç³»ç»Ÿå’Œå‚è€ƒæ¡†æ¶ï¼ˆGCRS/GCRFï¼‰åœ°å¿ƒå¤©çƒå‚è€ƒç³»ç»Ÿï¼ˆGeocentric Celestial Reference Systemï¼ŒGCRSï¼‰ä¹Ÿæ˜¯ICRSä¸‹å±çš„ä¸€ç§å‚è€ƒç³»ç»Ÿï¼Œå…¶åŸç‚¹åœ¨åœ°çƒè´¨å¿ƒï¼Œæ˜¯ä¸€ä¸ªå±€éƒ¨å‚è€ƒç³»ç»Ÿã€‚GCRSä¸BCRSä¹‹é—´çš„ç©ºé—´åæ ‡è½¬æ¢æ²¡æœ‰æ—‹è½¬ï¼Œåªæœ‰å¹³ç§»ã€‚åœ°å¿ƒå¤©çƒå‚è€ƒæ¡†æ¶ï¼ˆGeocentric Celestial Reference Frameï¼ŒGCRFï¼‰æ˜¯GCRSçš„ä¸€ä¸ªå®ç°ã€‚2.4. J2000.0å¹³èµ¤é“å¹³æ˜¥åˆ†ç‚¹åæ ‡ç³»J2000.0å¹³èµ¤é“å¹³æ˜¥åˆ†ç‚¹åæ ‡ç³»ï¼ˆThe mean equator and equinox J2000.0ï¼‰ï¼Œå¸¸è¢«ç§°ä¸ºJ2000å¹³èµ¤é“åœ°å¿ƒåæ ‡ç³»ï¼ŒåŸç‚¹åœ¨åœ°çƒè´¨å¿ƒï¼Œ$xy$å¹³é¢ä¸ºJ2000.0æ—¶åˆ»çš„åœ°çƒå¹³èµ¤é“é¢ï¼Œ$x$è½´æŒ‡å‘J2000.0æ—¶åˆ»çš„å¹³æ˜¥åˆ†ç‚¹ï¼ˆJ2000.0æ—¶åˆ»å¹³èµ¤é“é¢ä¸å¹³é»„é“é¢çš„ä¸€ä¸ªäº¤ç‚¹ï¼‰ã€‚æ­¤åæ ‡ç³»å¸¸è¢«ä½œä¸ºåœ°çƒå«æ˜Ÿçš„æƒ¯æ€§åæ ‡ç³»ï¼Œå«æ˜Ÿè¿åŠ¨ç§¯åˆ†ç­‰éƒ½åœ¨æ­¤åæ ‡ç³»è®¡ç®—ã€‚J2000å¹³èµ¤é“åœ°å¿ƒåæ ‡ç³»ä¸GCRSä¹‹é—´ä»…æœ‰ä¸€ä¸ªå¸¸å€¼åå·®çŸ©é˜µ$B$ã€‚ç›®å‰IAUæ¨èç”¨GCRSåæ ‡ç³»é€æ¸å–ä»£J2000å¹³èµ¤é“åœ°å¿ƒåæ ‡ç³»ã€‚2.5. å›½é™…åœ°çƒå‚è€ƒç³»ç»Ÿå’Œå‚è€ƒæ¡†æ¶ï¼ˆITRS/ITRFï¼‰åœ¨ç ”ç©¶ä¸åœ°çƒæœ‰å…³çš„ç§‘æŠ€é—®é¢˜æ—¶ï¼Œéƒ½éœ€è¦ä»¥åœ°çƒä¸ºå‚è€ƒçš„åæ ‡ç³»ï¼Œç§°ä¸ºåœ°çƒåæ ‡ç³»ï¼Œå®ƒæ˜¯å¤§åœ°æµ‹é‡å­¦å’Œåœ°çƒåŠ¨åŠ›å­¦ç ”ç©¶çš„ä¸€ç§åŸºæœ¬åæ ‡ç³»ã€‚å¦‚æœæŠŠåœ°çƒæ½®æ±å’Œåœ°å£³è¿åŠ¨å¿½ç•¥ä¸è®¡ï¼Œåœ°çƒé‡åŠ›åœºå’Œåœ°é¢ç‚¹çš„ä½ç½®åœ¨è¿™ä¸ªåæ ‡ç³»ä¸­æ˜¯å›ºå®šä¸å˜çš„ã€‚ä¹Ÿå°±æ˜¯è¯´è¿™ä¸ªåæ ‡ç³»ä»…éšåœ°çƒè‡ªè½¬è€Œè½¬åŠ¨ï¼Œå›ºå®šåœ¨åœ°çƒä¸Šä¸å˜ï¼Œå› è€Œä¹Ÿè¢«ç§°ä¸ºåœ°å›ºåæ ‡ç³»ï¼ˆECEFï¼‰ã€‚åœ°çƒåæ ‡ç³»çš„å»ºç«‹å·²æœ‰ä¸€ç™¾å¤šå¹´çš„å†å²ï¼Œ1980å¹´ä»¥å‰ä¸»è¦é‡‡ç”¨çš„æ˜¯å…‰å­¦è§‚æµ‹ã€‚éšç€ç©ºé—´å¤§åœ°æµ‹é‡çš„å¼€å±•ï¼Œè§‚æµ‹äººé€ çš„æˆ–è‡ªç„¶çš„å¤©ä½“æ‰“ç ´äº†é›†å›¢æˆ–å›½å®¶ç‹¬æœ‰çš„è§‚æµ‹ä¼ ç»Ÿï¼Œè¿«åˆ‡è¦æ±‚ç¡®ç«‹ä¸ä½¿ç”¨å…¬ç”¨çš„åœ°çƒåæ ‡ç³»ã€‚ä½†å®‡å®™é—´ä¸å¯èƒ½å­˜åœ¨ç»å¯¹å›ºå®šä¸åŠ¨çš„ä¸œè¥¿ï¼Œæ‰€ä»¥å»ºç«‹è¿™ç§åæ ‡ç³»åªèƒ½é€šè¿‡ä¸€ç§åè®®ç»“æœæ¥ä½“ç°ï¼Œå› è€Œè¿™ç§åæ ‡ç³»ä¹Ÿè¢«ç§°åè®®åœ°çƒå‚è€ƒç³»ç»Ÿï¼ˆCTRSï¼‰ã€‚å›½é™…ä¸Šçº¦å®šç»Ÿä¸€é‡‡ç”¨çš„åè®®åœ°çƒå‚è€ƒç³»ç»Ÿä¸ºå›½é™…åœ°çƒå‚è€ƒç³»ç»Ÿï¼ˆInternational Terrestrial Reference Systemï¼ŒITRSï¼‰ã€‚IERSä¸»è¦ä»»åŠ¡æ˜¯å‡†ç¡®åŠæ—¶æä¾›è‡ªè½¬å‚æ•°ï¼ŒåŒæ—¶å»ºç«‹ä¸ä¿æŒè¿™ä¸ªåœ°çƒå‚è€ƒç³»ç»Ÿã€‚ITRSæ˜¯ä¸€ç§åœ°å¿ƒå‚è€ƒç³»ç»Ÿï¼Œç”±ç©ºé—´å¤§åœ°æµ‹é‡è§‚æµ‹ç«™çš„åæ ‡å’Œè¿åŠ¨é€Ÿåº¦æ¥å®šä¹‰ï¼Œæ˜¯å›½é™…åœ°çƒè‡ªè½¬æœåŠ¡çš„åœ°é¢å‚è€ƒç³»ç»Ÿã€‚è¯¥ç³»ç»Ÿæ˜¯å›½é™…å¤§åœ°æµ‹é‡å­¦å’Œåœ°çƒç‰©ç†å­¦è”åˆä¼šï¼ˆIUGGï¼‰ã€å›½é™…å¤§åœ°æµ‹é‡å­¦åä¼šï¼ˆIAGï¼‰ã€å›½é™…å¤©æ–‡å­¦ä¼šï¼ˆIAUï¼‰ä¸“é—¨å†³å®šå»ºç«‹çš„ï¼Œæœ‰å…³å·¥ä½œç”±IERSä¸‹å±åœ°çƒå‚è€ƒç³»ç»Ÿéƒ¨é—¨è´Ÿè´£æ‰§è¡Œã€‚ITRSçš„åŸç‚¹åœ¨åœ°çƒè´¨å¿ƒï¼ˆåŒ…å«å¤§æ°”æµ·æ´‹ç­‰è´¨é‡ï¼‰ï¼Œé•¿åº¦ä¸ºå¹¿ä¹‰ç›¸å¯¹è®ºæ¡†æ¶ä¸‹å®šä¹‰çš„ç±³ï¼ˆSIï¼‰ï¼Œåæ ‡è½´æ–¹å‘ä¸å›½é™…æ—¶é—´å±€1984.0å†å…ƒçš„å®šä¹‰ä¸€è‡´ï¼Œæ—¶é—´æ¼”å˜åŸºå‡†æ˜¯ä½¿ç”¨æ»¡è¶³æ— æ•´ä½“æ—‹è½¬NNRï¼ˆNo-Net Rotationï¼‰æ¡ä»¶çš„æ¿å—è¿åŠ¨æ¨¡å‹æè¿°åœ°çƒå„å—ä½“éšæ—¶é—´çš„å˜åŒ–ã€‚å›½é™…åœ°çƒå‚è€ƒæ¡†æ¶ï¼ˆInternational Terrestrial Reference Frameï¼ŒITRFï¼‰æ˜¯ITRSçš„ä¸€ä¸ªå®ç°ï¼Œä¹Ÿå°±æ˜¯äººä»¬å¸¸è¯´çš„åœ°çƒå›ºè¿åæ ‡ç³»ï¼ˆECEFï¼‰ã€‚ITRFç”±IERSæ¯å¹´å°†å…¨çƒå„åœ°æµ‹é‡ç«™çš„è§‚æµ‹æ•°æ®è¿›è¡Œç»¼åˆå¤„ç†åˆ†æï¼Œå°±åŸç‚¹å·®ã€å°ºåº¦å·®å’Œå®šå‘å·®è¿›è¡Œå¹³å·®è€Œç¡®å®šï¼Œå¹¶ä»¥IERSå¹´æŠ¥å’ŒIERSæŠ€æœ¯å¤‡å¿˜å½•çš„å½¢å¼å‘å¸ƒã€‚ITRFæ˜¯å›½é™…ä¸Šç›®å‰å…¬è®¤çš„ç²¾åº¦æœ€é«˜ã€ç¨³å®šæ€§æœ€å¥½çš„åœ°çƒå‚è€ƒæ¶ã€‚ITRF ä» 1988 å»ºç«‹èµ·å·²æœ‰13ä¸ªç‰ˆæœ¬ï¼Œå®ƒä»¬æ˜¯ ITRF88, ITRF89, ITRF90, ITRF91, ITRF92, ITRF93, ITRF94, ITRF96, ITRF97, ITRF2000, ITRF2005, ITRF2008ï¼ŒITRF2014ã€‚  WGS84å‚è€ƒç³»ï¼š20ä¸–çºª30å¹´ä»£ä»¥æ¥ï¼Œç¾å›½å’Œå‰è‹è”ç­‰å›½å®¶åˆ©ç”¨å«æ˜Ÿè§‚æµ‹ç­‰èµ„æ–™ï¼Œå¼€å±•äº†å»ºç«‹åœ°å¿ƒåæ ‡ç³»çš„å·¥ä½œã€‚ç¾å›½å›½é˜²éƒ¨æ›¾å…ˆåå»ºç«‹è¿‡ä¸–ç•Œå¤§åœ°åæ ‡ç³»ï¼ˆWorld Geodetic Systemï¼ŒWGSï¼‰WGS 30ã€WGS 33å’ŒWGS72ï¼Œå¹¶äº1984å¹´å¼€å§‹ï¼Œç»è¿‡å¤šå¹´ä¿®æ­£å’Œå®Œå–„ï¼Œå»ºç«‹èµ·æ›´ä¸ºç²¾ç¡®çš„åœ°å¿ƒåæ ‡ç³»ç»Ÿï¼Œç§°ä¸ºWGS84ã€‚WGS84åæ ‡ç³»æ˜¯ç›®å‰GPSæµ‹é‡æ‰€é‡‡ç”¨çš„åæ ‡ç³»ç»Ÿã€‚  CGCS2000å‚è€ƒç³»ï¼šæˆ‘å›½å½“å‰æœ€æ–°çš„å›½å®¶å¤§åœ°åæ ‡ç³»ï¼ˆChina Geodetic Coordinate System 2000ï¼‰ï¼ŒåŸç‚¹ä¸ºåŒ…æ‹¬æµ·æ´‹å’Œå¤§æ°”çš„æ•´ä¸ªåœ°çƒçš„è´¨é‡ä¸­å¿ƒï¼ŒZè½´ç”±åŸç‚¹æŒ‡å‘J2000.0å†å…ƒæ—¶åˆ»çš„åœ°çƒå‚è€ƒæçš„æ–¹å‘ï¼ŒXè½´ç”±åŸç‚¹æŒ‡å‘æ ¼æ—å°¼æ²»å‚è€ƒå­åˆçº¿ä¸åœ°çƒèµ¤é“é¢ï¼ˆJ2000.0å†å…ƒæ—¶åˆ»ï¼‰çš„äº¤ç‚¹ï¼ŒYè½´ä¸Zè½´ã€Xè½´æ„æˆå³æ‰‹æ­£äº¤åæ ‡ç³»ã€‚é‡‡ç”¨å¹¿ä¹‰ç›¸å¯¹è®ºæ„ä¹‰ä¸‹çš„å°ºåº¦ã€‚GCGS 2000 æ˜¯å®šä¹‰åœ¨ ITRF97 åœ°å¿ƒåæ ‡ç³»ç»Ÿä¸­çš„åŒºåŸŸæ€§åœ°å¿ƒåæ ‡æ¡†æ¶ã€‚CGCS2000ä¸ºæˆ‘å›½åŒ—æ–—å¯¼èˆªç³»ç»Ÿæ‰€é‡‡ç”¨çš„åæ ‡ç³»ç»Ÿã€‚2.6. åœ°ç†åæ ‡ç³»åœ°ç†åæ ‡ç³»ï¼ˆLength-Breadth-Height, LBH æˆ– Latitude-Longitude-Height, LLAï¼‰å’Œåœ°çƒå›ºè¿åæ ‡ç³»åœ¨ç†è®ºä¸Šæ˜¯ç­‰ä»·çš„ï¼Œåªä¸è¿‡åœ°çƒå›ºè¿åæ ‡ç³»ä½¿ç”¨ç›´è§’åæ ‡æè¿°æ–¹ä½ï¼Œè€Œåœ°ç†åæ ‡ç³»ä½¿ç”¨ç»çº¿å’Œçº¬çº¿çš„çƒé¢æµ‹é‡å€¼æ¥æè¿°æ–¹ä½ã€‚åœ¨çƒé¢ç³»ç»Ÿä¸­ï¼Œæ°´å¹³çº¿ï¼ˆæˆ–ä¸œè¥¿çº¿ï¼‰æ˜¯ç­‰çº¬åº¦çº¿æˆ–çº¬çº¿ã€‚å‚ç›´çº¿ï¼ˆæˆ–å—åŒ—çº¿ï¼‰æ˜¯ç­‰ç»åº¦çº¿æˆ–ç»çº¿ã€‚è¿™äº›çº¿åŒ…ç»œç€åœ°çƒï¼Œæ„æˆäº†ä¸€ä¸ªç§°ä¸ºç»çº¬ç½‘çš„æ ¼ç½‘åŒ–ç½‘ç»œã€‚å½“åœ°çƒä½œä¸ºçƒä½“å»ºæ¨¡æ—¶ï¼Œå®ƒä»¬æ˜¯ä»åœ°å¿ƒåˆ°åœ°çƒè¡¨é¢ä¸Šçš„ç‚¹çš„è§’åº¦æµ‹é‡å€¼ï¼ˆä»¥åº¦ä¸ºå•ä½ï¼‰ã€‚å½“ä½¿ç”¨æ—‹è½¬æ¤­çƒä½“ï¼ˆæ¤­çƒä½“ï¼‰æ—¶ï¼Œå¯é€šè¿‡å°†ä¸åœ°çƒè¡¨é¢å‚ç›´çš„çº¿å»¶ä¼¸åˆ°èµ¤é“å¹³é¢æ¥æµ‹é‡çº¬åº¦ã€‚åœ°ç†åæ ‡ç³»çš„ä½¿ç”¨éœ€è¦åŸºäºåœ°å›ºåæ ‡ç³»çš„é€‰å–ï¼ˆå¤§æ¦‚ï¼Ÿï¼‰ã€‚2.7. å½“åœ°æ°´å¹³åæ ‡ç³»å½“åœ°æ°´å¹³åæ ‡ç³»ï¼ˆLocal Level System/Frameï¼ŒLLSæˆ–LLFï¼‰çš„Zè½´æ²¿ç€å½“åœ°å‚çº¿ç«–ç›´å‘ä¸Šï¼ŒXè½´æŒ‡å‘å½“åœ°ä¸œæ–¹ï¼ŒYè½´æŒ‡å‘å½“åœ°åŒ—æ–¹ï¼ŒXè½´ä¸Yè½´ã€Zè½´æ„æˆå³æ‰‹æ­£äº¤åæ ‡ç³»ã€‚2.8. é£è¡Œåæ ‡ç³»é£è¡Œåæ ‡ç³»æ˜¯ä¸€ç§å›ºè¿åœ¨é£è¡Œå™¨æœ¬ä½“çš„åæ ‡ç³»ç»Ÿï¼Œåæ ‡ç³»åŸç‚¹å®šä¹‰åœ¨é£è¡Œå™¨è´¨å¿ƒï¼ŒXè½´æŒ‡å‘é£è¡Œæ–¹å‘ï¼ŒZè½´æŒ‡å‘åœ°çƒè´¨å¿ƒï¼ŒYè½´ä¸Xè½´ã€Zè½´æ„æˆå³æ‰‹æ­£äº¤åæ ‡ç³»ï¼Œå‚ç›´äºé£è¡Œè½¨é“å¹³é¢ã€‚å¯¹äºèˆªå¤©å™¨ï¼Œé£è¡Œåæ ‡ç³»åˆå¯ç§°ä¸ºè½¨é“åæ ‡ç³»ã€‚2.9. æœ¬ä½“åæ ‡ç³»æœ¬ä½“ï¼ˆè½½ä½“ï¼‰åæ ‡ç³»æ˜¯ä¸€ç§å›ºè¿åœ¨è½½ä½“æœ¬ä½“çš„åæ ‡ç³»ç»Ÿï¼Œåæ ‡ç³»åŸç‚¹å®šä¹‰åœ¨è½½ä½“è´¨å¿ƒï¼ŒXè½´æŒ‡å‘è½½ä½“å‰å‘ä¸­å¿ƒçº¿æ–¹å‘ï¼ŒYè½´æŒ‡å‘å‚ç›´äºXè½´æŒ‡å‘è½½ä½“å³ä¾§ï¼ŒZè½´ä¸Xè½´ã€Yè½´æ„æˆå³æ‰‹æ­£äº¤åæ ‡ç³»ã€‚3. åæ ‡å˜æ¢3.1. å²å·®ã€ç« åŠ¨å’Œæç§»åœ°çƒçš„è‡ªè½¬è½´åœ¨æƒ¯æ€§ç©ºé—´ä¸­å¹¶ä¸å›ºå®šï¼Œè€Œæ˜¯ä¸æ–­æ‘†åŠ¨çš„ã€‚æ­¤æ‘†åŠ¨é€ æˆåœ°è½´ç»•åŒ—é»„çº§é¡ºæ—¶é’ˆè¿åŠ¨ï¼Œå¤¹è§’çº¦ä¸º23.5åº¦ï¼Œè¯¥è¿åŠ¨ï¼ˆè¿›åŠ¨ï¼‰åœ¨å¤©æ–‡å­¦ä¸Šè¢«ç§°ä¸ºå²å·®ï¼ˆPrecessionï¼‰ã€‚åœ¨å²å·®è¿åŠ¨çš„åŒæ—¶ï¼Œåœ°è½´è¿˜åœ¨åšå¾®å°çš„æŠ–åŠ¨ï¼Œç§°ä¸ºç« åŠ¨ï¼ˆNutationï¼‰ã€‚å²å·®ç« åŠ¨çš„åŸå› ä¸»è¦æœ‰ä¸¤ä¸ªæ–¹é¢ã€‚å…¶ä¸€æ˜¯å¤ªé˜³ç³»è¡Œæ˜Ÿå¯¹åœ°çƒç»•æ—¥è½¨é“æ‰€äº§ç”Ÿçš„æ‘„åŠ¨å½±å“ï¼›å…¶äºŒæ˜¯å¤ªé˜³å’Œæœˆçƒå¯¹åœ°çƒèµ¤é“éš†èµ·éƒ¨åˆ†çš„æ‘„åŠ¨å½±å“ã€‚æ—©æœŸå²å·®ç« åŠ¨è®¡ç®—ä¾æ®IAU 1976å²å·®æ¨¡å‹å’ŒIAU 1980ç« åŠ¨æ¨¡å‹ã€‚éšç€æ—¶é—´çš„æ¨ç§»ï¼Œä¸Šè¿°æ¨¡å‹çš„ç²¾åº¦é€æ¸æ— æ³•æ»¡è¶³éœ€è¦ã€‚å› æ­¤ï¼ŒIAUè§„å®šä»2003å¹´1æœˆ1æ—¥èµ·ï¼Œé‡‡ç”¨æ–°çš„å²å·®ç« åŠ¨æ¨¡å‹ï¼Œå³IAU 2000Aæ¨¡å‹ï¼ˆç²¾åº¦è¾¾åˆ°0.2masï¼‰æˆ–IAU 2000Bæ¨¡å‹ï¼ˆç²¾åº¦è¾¾åˆ°1masï¼‰ã€‚åœ°çƒè‡ªè½¬è½´ç›¸å¯¹äºåœ°çƒåŒ—æè€Œè¨€ä¹Ÿä¸æ˜¯å›ºå®šä¸åŠ¨çš„ï¼Œåœ°è¡¨æµ·æ´‹ã€å¤§æ°”è¿åŠ¨ä»¥åŠåœ°æ ¸å†…éƒ¨æ¶²ä½“è¿åŠ¨ä¼šé€ æˆåœ°çƒè‡ªè½¬è½´ç›¸å¯¹äºåœ°çƒåŒ—æCIOç‚¹å­˜åœ¨å°èŒƒå›´è¿åŠ¨ï¼Œè¢«ç§°ä¸ºæç§»ã€‚3.2. åœ°å¿ƒå¤©çƒå‚è€ƒç³»ç»Ÿä¸å›½é™…åœ°çƒå‚è€ƒç³»ç»Ÿçš„å˜æ¢GCRSä¸ITRSä¹‹é—´æœ‰ä¸¤ç§åæ ‡å˜æ¢æ¨¡å‹ï¼šåŸºäºæ˜¥åˆ†ç‚¹çš„å²å·®ç« åŠ¨è½¬æ¢å’ŒåŸºäºCIOçš„æ— æ—‹è½¬åŸç‚¹è½¬æ¢ã€‚IERS 2003 å’Œ 2010 è§„èŒƒé’ˆå¯¹è¿™ä¸¤ç§è½¬æ¢æ¨¡å‹åˆ†åˆ«æ¨èäº†ç›¸åº”çš„è½¬æ¢å‚æ•°ã€‚ä¸¤ç§è½¬æ¢æ¨¡å‹ç›¸åº”çš„è½¬æ¢è¿‡ç¨‹å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚3.3. åœ°å¿ƒå¤©çƒå‚è€ƒç³»åˆ°åœ°çƒå›ºè¿åæ ‡ç³»çš„å˜æ¢4. å‚è€ƒæ–‡çŒ®æ— ã€‚"
  },
  
  {
    "title": "CDDISç½‘ç«™ä¸‹GNSSç›¸å…³æ•°æ®è§£æï¼ˆå«æ˜Ÿæ˜Ÿå†éƒ¨åˆ†ï¼‰",
    "url": "/posts/astronomy-CDDIS/",
    "categories": "Academic, Knowledge",
    "tags": "astronomy",
    "date": "2021-11-18 17:05:49 +0800",
    





    
    "snippet": "æœ¬æ–‡ä»‹ç»äº†CDDISç½‘ç«™ä¸‹ GNSS ç›¸å…³çš„æ•°æ®äº§å“ä¸‹è½½ã€å‘½åæ–¹å¼è§£è¯»ã€æ–‡ä»¶æ ¼å¼è¯´æ˜å’Œæ–‡ä»¶ä¸‹è½½åœ°å€ã€‚  1. æ•°æ®ï¼ˆdataç›®å½•ï¼‰  2. å¹¿æ’­æ˜Ÿå†ï¼ˆBroadcast ephemeris dataï¼‰          2.1. Daily GPS Broadcast Ephemeris Files      2.2. Hourly GPS Broadcast Ephemeris Files...",
    "content": "æœ¬æ–‡ä»‹ç»äº†CDDISç½‘ç«™ä¸‹ GNSS ç›¸å…³çš„æ•°æ®äº§å“ä¸‹è½½ã€å‘½åæ–¹å¼è§£è¯»ã€æ–‡ä»¶æ ¼å¼è¯´æ˜å’Œæ–‡ä»¶ä¸‹è½½åœ°å€ã€‚  1. æ•°æ®ï¼ˆdataç›®å½•ï¼‰  2. å¹¿æ’­æ˜Ÿå†ï¼ˆBroadcast ephemeris dataï¼‰          2.1. Daily GPS Broadcast Ephemeris Files      2.2. Hourly GPS Broadcast Ephemeris Files      2.3. Daily GLONASS Broadcast Ephemeris Files        3. äº§å“ï¼ˆproductç›®å½•ï¼‰  4. ç²¾å¯†æ˜Ÿå†          4.1. GPS å‘¨        5. ç²¾å¯†æ˜Ÿå†æ–‡ä»¶æ ¸å¿ƒå‚è€ƒæ–‡çŒ®ï¼šGNSS. CDDISç½‘ç«™ä¸‹ GNSS ç›¸å…³çš„æ•°æ®äº§å“ä¸‹è½½+å‘½åæ–¹å¼è§£è¯»+æ–‡ä»¶æ ¼å¼è¯´æ˜æ–‡ä»¶ä¸‹è½½åœ°å€1. æ•°æ®ï¼ˆdataç›®å½•ï¼‰CDDISå­˜æ¡£åŒ…å«æ¥è‡ªæ°¸ä¹…GNSSæ¥æ”¶å™¨å…¨çƒç½‘ç»œçš„GNSSæ•°æ®ï¼Œè¿™äº›ç½‘ç»œæ”¯æŒä»¥30ç§’çš„é‡‡æ ·ç‡è¿è¡Œçš„IGSï¼Œå¹¶åŒ…å«24å°æ—¶çš„æ•°æ®ï¼ˆUTCæ—¶é—´00ï¼š00-23ï¼š59ï¼‰ã€‚ IGSåˆ†æä¸­å¿ƒæ¯å¤©éƒ½ä¼šæ£€ç´¢è¿™äº›æ•°æ®ä»¥ç”Ÿäº§IGSäº§å“ã€‚ è¿™äº›äº§å“ï¼Œä¾‹å¦‚æ¯æ—¥å’Œæ¯å‘¨çš„å«æ˜Ÿæ˜Ÿå†ï¼Œç«™çš„ä½ç½®å’Œé€Ÿåº¦ï¼Œå«æ˜Ÿå’Œç«™çš„æ—¶é’Ÿä¿¡æ¯ä»¥åŠåœ°çƒè‡ªè½¬å‚æ•°ï¼Œéƒ½å°†æäº¤ç»™CDDISã€‚æ•°æ®ç›®å½•ä¸€è§ˆï¼š **********************************************************************                   Welcome to the CDDIS GPS ArchiveThe main directories are:archive/gnss/data/ /campaign                   GPS data from selected campaigns /daily/YYYY/DDD/YYd         Observation files for year YYYY and day DDD                             (Hatanaka format)                 /YYm        Met files for year YYYY and day DDD                 /YYn        Navigation files for year YYYY and day DDD                 /YYo        Observation files for year YYYY and day DDD                 /YYs        Summary files for year YYYY and day DDD                             (teqc output) /hourly/YYYY/DDD/HH         Hourly RINEX GPS files for year YYYY, day DDD,                             and hour HH; observation (Hatanaka format),                             navigation and met data /high-rate/YYYY/DDD/YYd/HH  Observation files for day YYDDD and hour HH                             (Hatanaka format)                    /YYm/HH  Met files for day YYDDD and hour HH                    /YYn/HH  Navigation files for day YYDDD and hour HH /satellite/SATNAME/YYYY/DDD GPS data from on-board GPS receivers for                             satellite SATNAME for year YYYY and day DDD  /gnss/products/ionex/YYYY/DDD    Daily IONEX products for year YYYY and                                  day DDD               /trop/WWWW         Weekly GPS troposphere products for GPS                                  week WWWW                    /YYYY         Yearly GPS troposphere products for year                                  YYYY                     /nrt/WWWW     Near real-time GPS troposphere products                                  for GPS week WWWW               /trop_cmp/YYYY/DDD Troposphere comparison results for year                                  YYYY and day DDD               /trop_new/YYYY/DDD New IGS troposphere product for year                                  YYYY and day DDD               /WWWW              Weekly GPS precise orbits, etc. for GPS                                  week WWWW  All files are archived in UNIX compressed format. Contact Carey Noll (Carey.E.Noll@nasa.gov) for further information. ********************************************************************** The local date and time is: %Tæ•°æ®åˆ†ä¸ºä¸¤ç§æ ¼å¼ï¼š  RINEX V2 formatï¼š YYYY/DDD/YYt/mmmmDDD#.YYt.Z  RINEX V3 formatï¼š YYYY/DDD/YYt/XXXXMRCCC_K_YYYYDDDHHMM_01D_30S_tt.FFF.gRINEX V2 æ ¼å¼çš„æ¯æ—¥ GNSS æ•°æ®ä½¿ç”¨ mmmmDDDï¼ƒ.YYt.Z æ–‡ä»¶åçº¦å®šï¼Œå¹¶ä¸”ä¸ºUNIXå‹ç¼©æ ¼å¼ã€‚ ä»2016å¹´çš„æ•°æ®å¼€å§‹ï¼Œæ‰€æœ‰ä½¿ç”¨RINEX V3æ–‡ä»¶å‘½åçº¦å®šå’Œgzipå‹ç¼©æ ¼å¼çš„RINEX V3æ ¼å¼çš„æ¯æ—¥GNSSæ•°æ®å‡ä»¥RINEX V2æ ¼å¼çš„æ•°æ®å½’æ¡£åœ¨/gnss/data/daily åŒºåŸŸçš„å­ç›®å½•ä¸­ã€‚RINEX V2 æ ¼å¼æ–‡ä»¶åä¸­å­—æ¯çš„å«ä¹‰è¯´æ˜ï¼šYYYY/DDD/YYt/mmmmDDD#.YYt.Z            code      meaning                  YYYY      4ä½ï¼Œä»£è¡¨å¹´              DDD      3ä½ï¼Œå¹´ç§¯æ—¥              YYt      YYä¸ºå¹´ä»½çš„åä¸¤ä½æ•°å­—ï¼Œtè¡¨ç¤ºä¸åŒæ•°æ®ç±»å‹ï¼Œå…·ä½“å«ä¹‰å¦‚ä¸‹              Â       b = ç»„åˆå¹¿æ’­æ˜Ÿå†æ•°æ®              Â       n = GPSå¹¿æ’­æ˜Ÿå†æ•°æ®              Â       f = åŒ—æ–—å¹¿æ’­æ˜Ÿå†æ•°æ®              Â       g = GLONASSå¹¿æ’­æ˜Ÿå†æ•°æ®              Â       l = Galileoå¹¿æ’­æ˜Ÿå†æ•°æ®              Â       i = IRNSSå¹¿æ’­æ˜Ÿå†æ•°æ®              Â       h = SBASå¹¿æ’­æ˜Ÿå†æ•°æ®              Â       q = QZSSå¹¿æ’­æ˜Ÿå†æ•°æ®ï¼ŒåŒd              Â       m = æ°”è±¡æ•°æ®              Â       d = é«˜å‹ç¼©çš„è§‚æµ‹æ•°æ®ï¼Œåç»­ç”¨ crx2rnx.exe è½¬æ¢ä¸ºoæ–‡ä»¶              Â       o = è§‚æµ‹æ•°æ®ï¼ŒåŒd              Â       s = è§‚æµ‹æ‘˜è¦æ–‡ä»¶ï¼ˆTEQCçš„è¾“å‡ºï¼‰              Â       x = æ··åˆå¹¿æ’­æ˜Ÿå†æ•°æ®              mmmm      4ä½ï¼ŒIGSæµ‹ç«™çš„åå­—              #      1ä½ï¼Œå½“ä¸€å¤©ä¸­æœ‰å¤šä¸ªæ–‡ä»¶çš„æƒ…å†µä¸‹ï¼Œè¡¨ç¤ºä¸€å¤©å½“ä¸­çš„ç¬¬å‡ ä¸ªæ–‡ä»¶ã€‚é€šå¸¸ä¸º0è¡¨ç¤ºä¸€å¤©å½“ä¸­çš„æ‰€æœ‰æ•°æ®ï¼ˆä¸€ä¸ªæ–‡ä»¶ï¼‰              .Z      UNIXå‹ç¼©æ–‡ä»¶      RINEX V3 æ ¼å¼æ–‡ä»¶åä¸­å­—æ¯çš„å«ä¹‰è¯´æ˜ï¼šYYYY/DDD/YYt/XXXXMRCCC_K_YYYYDDDHHMM_01D_30S_tt.FFF.g            code      meaning                  YYYY      4ä½ï¼Œä»£è¡¨å¹´              DDD      3ä½ï¼Œå¹´ç§¯æ—¥              YYt      YYä¸ºå¹´ä»½çš„åä¸¤ä½æ•°å­—ï¼Œtè¡¨ç¤ºä¸åŒæ•°æ®ç±»å‹ï¼Œå…·ä½“å«ä¹‰å¦‚ä¸‹              Â       b = ç»„åˆå¹¿æ’­æ˜Ÿå†æ•°æ®              Â       d = é«˜å‹ç¼©çš„è§‚æµ‹æ•°æ®ï¼Œåç»­ç”¨crx2rnx.exeè½¬æ¢ä¸ºoæ–‡ä»¶              Â       f = åŒ—æ–—å¹¿æ’­æ˜Ÿå†æ•°æ®              Â       g = GLONASSå¹¿æ’­æ˜Ÿå†æ•°æ®              Â       h = SBASå¹¿æ’­æ˜Ÿå†æ•°æ®              Â       i = IRNSSå¹¿æ’­æ˜Ÿå†æ•°æ®              Â       l = Galileoå¹¿æ’­æ˜Ÿå†æ•°æ®              Â       m = æ°”è±¡æ•°æ®              Â       n = GPSå¹¿æ’­æ˜Ÿå†æ•°æ®              Â       o = è§‚æµ‹æ•°æ®ï¼ŒåŒd              Â       q = QZSSå¹¿æ’­æ˜Ÿå†æ•°æ®              Â       s = è§‚æµ‹æ‘˜è¦æ–‡ä»¶ï¼ˆTEQCçš„è¾“å‡ºï¼‰              Â       x = æ··åˆå¹¿æ’­æ˜Ÿå†æ•°æ®              XXXX      4ä½ï¼ŒIGSæµ‹ç«™çš„åå­—              M      æ ‡è®°ç¼–å·(0-9)              R      æ¥æ”¶æœºç¼–å·(0 - 9)              CCC      ISOå›½å®¶ä»£ç               K      æ•°æ®æ¥æºï¼Œå…¶ä¸­ï¼š              Â       R =ä»ä½¿ç”¨ä¾›åº”å•†æˆ–å…¶ä»–è½¯ä»¶çš„æ¥æ”¶æ•°æ®              Â       S =ä»æ•°æ®æµ(RTCMæˆ–å…¶ä»–)              Â       U =æœªçŸ¥              HH      2ä½ï¼Œå°æ—¶              MM      2ä½ï¼Œåˆ†é’Ÿ              tt      æ•°æ®ç±»å‹ï¼Œå…¶ä¸­ï¼š              Â       GO = GPSè§‚æµ‹æ•°æ®              Â       RO = GLONASSè§‚æµ‹æ•°æ®              Â       EO = Galileoè§‚æµ‹æ•°æ®              Â       JO = QZSSè§‚æµ‹æ•°æ®              Â       CO = BDSè§‚æµ‹æ•°æ®              Â       IO = IRNSSè§‚æµ‹æ•°æ®              Â       SO = SBASè§‚æµ‹æ•°æ®              Â       MO = æ··åˆè§‚æµ‹æ•°æ®              Â       GN = GPSå¯¼èˆªæ•°æ®              Â       RN = GLONASSå¯¼èˆªæ•°æ®              Â       EN = Galileoå¯¼èˆªæ•°æ®              Â       JN = QZSSå¯¼èˆªæ•°æ®              Â       CN = BDSå¯¼èˆªæ•°æ®              Â       IN = IRNSSå¯¼èˆªæ•°æ®              Â       SN = SBASå¯¼èˆªæ•°æ®              Â       MN = å¯¼èˆªæ•°æ®(æ‰€æœ‰GNSSæ˜Ÿåº§)              Â       MM = æ°”è±¡è§‚æµ‹æ•°æ®              FFF      rnx = RINEX              Â       crx = é«˜å‹ç¼©çš„ RINEX              01D_30S      ä¸€èˆ¬æ¥è¯´ï¼Œè¿™ä¸ªå­—æ®µæœ‰ä¸‰ç±»ï¼š              Â       01D_30S Daily å…¨å¤© é‡‡æ ·30s              Â       01H_30S hourly æ•´ä¸ªå°æ—¶ é‡‡æ ·30s              Â       15M_01S minutely 15åˆ† é‡‡æ ·1s      2. å¹¿æ’­æ˜Ÿå†ï¼ˆBroadcast ephemeris dataï¼‰å¹¿æ’­æ˜Ÿå†æ˜¯æ¥æ”¶æœºç›´æ¥ä»å¤©çº¿æ¥æ”¶åˆ°çš„å«æ˜Ÿæ‰€å‘å°„çš„ä¿¡å·ä¸­åˆ†ç¦»å‡ºæ¥çš„ã€‚é™¤äº†è§‚æµ‹æ•°æ®å¤–ï¼Œå¾ˆå¤§ä¸€éƒ¨åˆ†çš„GNSSç«™ç‚¹è¿˜æä¾›å¹¿æ’­å¯¼èˆªæ•°æ®ã€‚CDDISä»è¿™äº›ç«™ç‚¹å‘é€çš„è¿™äº›ç‰¹å®šäºç«™ç‚¹çš„æ–‡ä»¶ä¸­åˆ›å»ºæ¯æ—¥å¹¿æ’­æ˜Ÿå†æ–‡ä»¶ï¼›è¿™äº›æ–‡ä»¶ï¼ˆä¸€ä¸ªç”¨äºGPSï¼Œå¦ä¸€ä¸ªç”¨äºGLONASSï¼‰åŒ…å«æ¯å¤©çš„å”¯ä¸€GPSæˆ–GLONASSå«æ˜Ÿæ˜Ÿå†æ¶ˆæ¯ã€‚åœ¨UTCä¸€å¤©å¼€å§‹æ—¶ä¼šåˆ›å»ºä¸€ä¸ªç±»ä¼¼çš„æ–‡ä»¶ï¼Œå¹¶ä»æ¯å°æ—¶å¹¿æ’­çš„å¯¼èˆªæ–‡ä»¶ä¸­æ¯å°æ—¶æ›´æ–°ä¸€æ¬¡ã€‚å› æ­¤ï¼Œç”¨æˆ·å¯ä»¥æ¯å¤©æˆ–æ¯å°æ—¶ä¸‹è½½ä¸€ä¸ªæ–‡ä»¶ï¼Œå…¶ä¸­åŒ…å«åå¤„ç†æ‰€éœ€çš„æ‰€æœ‰å¹¿æ’­æ˜Ÿå†æ¶ˆæ¯ã€‚2.1. Daily GPS Broadcast Ephemeris Filesæ¯æ—¥GPSå¹¿æ’­æ˜Ÿå†æ–‡ä»¶æ˜¯å°†å•ä¸ªç«™ç‚¹çš„å¯¼èˆªæ–‡ä»¶åˆå¹¶æˆä¸€ä¸ªå¯ä¾›ç”¨æˆ·ä½¿ç”¨çš„éå†—ä½™æ–‡ä»¶ï¼Œè€Œä¸æ˜¯å¤šä¸ªå•ç‹¬çš„å¯¼èˆªæ–‡ä»¶ã€‚æ¯å¤©åœ¨BKGåˆ›å»ºçš„æ–‡ä»¶åŒ…å«æ¥è‡ªæ¬§æ´²ç«™ç‚¹çš„ç‹¬ç‰¹å¯¼èˆªæ¶ˆæ¯ã€‚æ—¥å¸¸æ–‡ä»¶çš„èµ·å§‹ç›®å½•ä¸ºï¼šhttps://cddis.nasa.gov/archive/gnss/data/daily/å°†ä»¥ä¸‹ç›®å½•å’Œæ–‡ä»¶åé™„åŠ åˆ°èµ·å§‹ç›®å½•:YYYY/DDD/YYn/brdcDDD0.YYn.Z (åˆå¹¶GPSå¹¿æ’­æ˜Ÿå†æ–‡ä»¶)ORYYYY/brdc/brdcDDD0.YYn.Z (åˆå¹¶GPSå¹¿æ’­æ˜Ÿå†æ–‡ä»¶)YYYY/DDD/YYn/ifagDDD0.YYn.Z (ä»¥å¾€åœ¨BKGåˆ›å»ºçš„æ¯æ—¥æ–‡ä»¶)2.2. Hourly GPS Broadcast Ephemeris Filesç»„åˆçš„å¹¿æ’­æ˜Ÿå†æ–‡ä»¶æ˜¯æ¯å°æ—¶ä»CDDISä¸Šå­˜æ¡£çš„æ‰€æœ‰æ¯å°æ—¶å¯¼èˆªæ–‡ä»¶ä¸­ç”Ÿæˆçš„ã€‚ æ¯å°æ—¶å¯¼èˆªæ–‡ä»¶åŒ…å«å…·æœ‰å½“å¤©TOEçš„æ‰€æœ‰å¹¿æ’­æ¶ˆæ¯ï¼Œè¯¥æ¶ˆæ¯åœ¨å°æ—¶çš„é¡¶éƒ¨åˆ›å»ºæ—¶å¯ç”¨ã€‚ æ¯å°æ—¶ä½¿ç”¨æ–°çš„å¯¼èˆªæ¶ˆæ¯æ›´æ–°æ–‡ä»¶ã€‚åœ¨UTCä¸€å¤©ç»“æŸæ—¶ï¼Œå½“ç”Ÿæˆæ–‡ä»¶çš„æœ€ç»ˆç‰ˆæœ¬æ—¶ï¼Œè¯¥æ–‡ä»¶å°†å¤åˆ¶åˆ°æ¯æ—¥ç›®å½•ä¸­ï¼Œå¹¶æˆä¸ºâ€œæ¯æ—¥â€å¹¿æ’­æ˜Ÿå†è¡¨æ–‡ä»¶ã€‚æ¯å°æ—¶æ–‡ä»¶çš„èµ·å§‹ç›®å½•æ˜¯https://cddis.nasa.gov/archive/gnss/data/hourly/å°†ä»¥ä¸‹ç›®å½•å’Œæ–‡ä»¶åé™„åŠ åˆ°èµ·å§‹ç›®å½•:YYYY/DDD/hourDDDm.YYn.Z2.3. Daily GLONASS Broadcast Ephemeris Filesç±»ä¼¼åœ°ï¼Œå¯ä»¥åœ¨GLONASSå¯¼èˆªæ–‡ä»¶å­ç›®å½•ä¸­æ‰¾åˆ°æ¯æ—¥ä»…ä½¿ç”¨GLONASSçš„å¹¿æ’­æ˜Ÿå†æ–‡ä»¶ã€‚æ¯æ—¥ä»…ä½¿ç”¨glonassæ–‡ä»¶çš„èµ·å§‹ç›®å½•ä¸ºhttps://cddis.nasa.gov/archive/gnss/data/daily/å°†ä»¥ä¸‹ç›®å½•å’Œæ–‡ä»¶åé™„åŠ åˆ°èµ·å§‹ç›®å½•:YYYY/DDD/YYg/brdcDDD0.YYg.ZORYYYY/brdc/brdcDDD0.YYg.Z3. äº§å“ï¼ˆproductç›®å½•ï¼‰äº§å“ç›®å½•ä¸€è§ˆï¼šhttps://cddis.nasa.gov/archive/gnss/products/æ–‡ä»¶ä¸ºï¼šWWWW/AAAWWWWD_TYP.YYt.Zï¼Œå…¶ä¸­ï¼š            code      meaning                  AAA      International GNSS Service(IGS) åˆ†æä¸­å¿ƒåç§°              WWWW      GPS å‘¨              D      æ˜ŸæœŸï¼ˆ0-6ï¼Œ7è¡¨ç¤ºæ¯å‘¨ï¼‰              TYP      è§£çš„ç±»å‹ï¼Œå…·ä½“å¦‚ä¸‹ï¼š              Â       eph Satellite orbit solution å«æ˜Ÿè½¨é“è§£              Â       erp Earth orientation parameter solution åœ°çƒå®šå‘å‚æ•°è§£              Â       sp3 Satellite orbit solution å«æ˜Ÿè½¨é“è§£              Â       sum Orbit solution analysis summary è½¨é“è§£åˆ†ææ€»ç»“              .Z      UNIX å‹ç¼©æ–‡ä»¶      åˆ†æä¸­å¿ƒåç§°ç¼©å†™å¯¹åº”å¦‚ä¸‹ï¼š|code|meaning|| â€” | â€” || cod | CODEï¼ˆ3 day long arc solutionï¼‰ || cof | CODEï¼ˆ1 day solutionï¼‰ || cox | CODE GLONASS only || emr | NRCan || emx | NRCan GLONASS only || jpl | JPL || mit | MIT || ncl | University of Newcastle || sio | SIO |ç­‰ç­‰ä¸å†è¯¦è¿°ã€‚4. ç²¾å¯†æ˜Ÿå†ç²¾å¯†æ˜Ÿå†ç”±è‡ªå»ºè·Ÿè¸ªç«™æä¾›ï¼ˆä¸€èˆ¬ä¸ºå½“åœ°ã€ç¬¦åˆæ°”è±¡ã€å¤§æ°”å±‚çš„å®é™…ï¼‰ï¼›å¯ä»¥è¾ƒå‡†ç¡®åœ°æä¾›è½¨é“ä¿¡æ¯ï¼›äº‹åè®¡ç®—ï¼›æœ‰å¿æœåŠ¡ï¼›åœ°é¢é€šè®¯è·å–ã€‚ç²¾å¯†æ˜Ÿå†çš„è·å–éœ€è¦æ ¹æ®GPSå‘¨æ¥ç¡®å®šã€‚4.1. GPS å‘¨GPSå‘¨çš„è®¡ç®—æ–¹æ³•å‚è€ƒï¼šæµæµªçŒªå¤´æ‹¯æ•‘åœ°çƒ. GPSå‘¨è®¡ç®—ã€‚GPSå‘¨ï¼ˆGPS Weekï¼‰æ˜¯GPSç³»ç»Ÿå†…éƒ¨æ‰€é‡‡ç”¨çš„æ—¶é—´ç³»ç»Ÿã€‚ æ—¶é—´é›¶ç‚¹å®šä¹‰çš„ä¸ºï¼š1980å¹´1æœˆ5æ—¥å¤œæ™šä¸1980å¹´1æœˆ6æ—¥å‡Œæ™¨ä¹‹é—´0ç‚¹ã€‚æœ€å¤§æ—¶é—´å•ä½æ˜¯å‘¨ï¼ˆä¸€å‘¨ï¼š604800ç§’ï¼‰ã€‚ç”±äºåœ¨å‚¨å­˜å‘¨æ•°çš„æ—¶å€™ï¼Œç”¨äº†10ä¸ªæ¯”ç‰¹ï¼Œ2çš„10æ¬¡æ–¹æ˜¯1024ï¼Œæ‰€ä»¥æ¯1024å‘¨ï¼ˆå³7168å¤©ï¼‰ä¸ºä¸€å¾ªç¯å‘¨æœŸã€‚æˆ‘ä»¬å›½å®¶çš„åŒ—æ–—è€ƒè™‘åˆ°æ¯1024å‘¨ç¿»è½¬ä¸€æ¬¡è¿‡äºé¢‘ç¹ï¼Œæ‰€ä»¥å°±å¼€äº†13ä¸ªæ¯”ç‰¹æ¥å­˜æ”¾å‘¨æ•°ï¼Œ2çš„13æ¬¡æ–¹ä¸º8192ï¼Œå¤§æ¦‚æ˜¯150å¤šå¹´ç¿»è½¬ä¸€æ¬¡ï¼Œæˆ‘ä»¬è¿™è¾ˆå­ææ€•æ²¡æœºä¼šè§åˆ°äº†ï¼Œå“ˆå“ˆå“ˆã€‚ç¬¬ä¸€ä¸ªGPSå‘¨å¾ªç¯ç‚¹ä¸º1999å¹´8æœˆ22æ—¥0æ—¶0åˆ†0ç§’ã€‚å³ä»è¿™ä¸€åˆ»èµ·ï¼Œå‘¨æ•°é‡æ–°ä»0å¼€å§‹ç®—èµ·ã€‚æ˜ŸæœŸè®°æ•°è§„åˆ™æ˜¯ï¼šSundayä¸º0ï¼ŒMondayä¸º1ï¼Œä»¥æ­¤ç±»æ¨ï¼Œä¾æ¬¡è®°ä½œ0~6ï¼ŒGPSå‘¨è®°æ•°ä¸ºâ€œGPSå‘¨ æ˜ŸæœŸè®°æ•°â€ã€‚GPSå‘¨ä¸å„’ç•¥æ—¥è½¬æ¢ä»£ç ï¼ˆhttps://github.com/fernandoferreiratbe/gpsweek-converterï¼‰ï¼š# _*_ encoding: utf-8 _*_class Converter:    # noinspection PyMethodMayBeStatic    def convert_julian_date_to_gps_week(self, julian_date: float):        gps_week = ((julian_date - 2444245) // 7)        return int(gps_week)    # noinspection PyMethodMayBeStatic    def convert_gps_week_to_julian_date(self, gps_week: int, day_of_week: int = 0):        if gps_week is None:            raise ValueError('GPS Week can not be None.')        if day_of_week not in range(0, 7):            raise ValueError('Day of week out of range 0-6.')        julian_day = (7.0 * gps_week + 2444245.0 + day_of_week)        return julian_dayæˆ–è€…é‡‡ç”¨åœ¨çº¿è®¡ç®—çš„æ–¹å¼ï¼ˆhttps://www.labsat.co.uk/index.php/en/gps-time-calculatorï¼‰ã€‚æ¯”å¦‚æƒ³æ‰¾2020å¹´å…ƒæ—¦çš„ç²¾å¯†æ˜Ÿå†æ•°æ®ï¼Œç»è¿‡è®¡ç®—çŸ¥é“é‚£ä¸€å¤©æ˜¯GPSå‘¨ç¬¬2086å‘¨ï¼Œæ‰€ä»¥è¿›å…¥2086ç›®å½•ä¸‹å»ä¸‹è½½ç›¸åº”æ•°æ®ã€‚5. ç²¾å¯†æ˜Ÿå†æ–‡ä»¶ç›®å‰IGSç²¾å¯†æ˜Ÿå†ä¸»è¦åˆ†ä¸ºä¸‰ç§ï¼šæœ€ç»ˆç²¾å¯†æ˜Ÿå†ï¼ˆIGS Finalï¼Œæ ‡è¯†ä¸º IGSï¼‰ã€å¿«é€Ÿç²¾å¯†æ˜Ÿå†ï¼ˆIGS Rapidï¼Œæ ‡è¯†ä¸º IGRï¼‰ã€ä»¥åŠè¶…å¿«é€Ÿç²¾å¯†æ˜Ÿå†ï¼ˆIGS Ultra-Rapidï¼Œæ ‡è¯†ä¸º IGUï¼‰ã€‚å¯¹åº”çš„ç²¾å¯†é’Ÿå·®ä¹Ÿæœ‰è¿™ä¸‰ç§ã€‚å…¶ä¸­è¶…å¿«é€Ÿç²¾å¯†æ˜Ÿå†åˆåˆ†ä¸ºè§‚æµ‹çš„éƒ¨åˆ†å’Œé¢„æµ‹çš„éƒ¨åˆ†ã€‚IGS ä¼šç»¼åˆæ‰€æœ‰åˆ†æä¸­å¿ƒçš„äº§å“ï¼ˆæ¯”å¦‚SIOï¼ŒMITç­‰ï¼‰åŠ æƒå¹³å‡å¾—åˆ°æœ€ç»ˆçš„äº§å“ï¼ˆæ ‡è¯†ä¸ºIGSã€IGRã€IGUï¼‰ã€‚ä»–ä»¬çš„å»¶æ—¶ã€ç²¾åº¦ç­‰æŒ‡æ ‡å¦‚ä¸‹è¡¨æ‰€ç¤ºã€‚åœ¨å®é™…å·¥ä½œä¸­ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®é¡¹ç›®å¯¹æ—¶é—´åŠç²¾åº¦çš„è¦æ±‚ï¼Œé€‰å–ä¸åŒç±»å‹çš„æ–‡ä»¶æ¥ä½¿ç”¨ã€‚            åç§°      å»¶æ—¶      æ›´æ–°ç‡      æ›´æ–°æ—¶é—´      é‡‡æ ·ç‡      ç²¾åº¦                  æœ€ç»ˆç²¾å¯†æ˜Ÿå† IGS      12-18å¤©      æ¯å‘¨      æ¯å‘¨å››      15min      ~2.5cm              å¿«é€Ÿç²¾å¯†æ˜Ÿå† IGR      17-41å°æ—¶      æ¯å¤©      17:00 UTC      15min      ~2.5cm              è¶…å¿«é€Ÿç²¾å¯†æ˜Ÿå†ï¼ˆè§‚æµ‹ï¼‰ IGU      3-9å°æ—¶      6å°æ—¶      03, 09, 15, 21 UTC      15min      ~3cm              è¶…å¿«é€Ÿç²¾å¯†æ˜Ÿå†ï¼ˆé¢„æµ‹ï¼‰ IGU      å®æ—¶      6å°æ—¶      03, 09, 15, 21 UTC      15min      ~5cm      IGS ç²¾å¯†æ˜Ÿå†é‡‡ç”¨sp3æ ¼å¼ï¼Œsp3æ–‡ä»¶çš„å­˜å‚¨æ–¹å¼ä¸º ASCII æ–‡æœ¬æ–‡ä»¶ï¼Œå†…å®¹åŒ…æ‹¬è¡¨å¤´ä¿¡æ¯ä»¥åŠæ–‡ä»¶ä½“ï¼Œæ–‡ä»¶ä½“ä¸­æ¯éš”15åˆ†é’Ÿç»™å‡ºå«æ˜Ÿçš„ä½ç½®ï¼Œæœ‰æ—¶è¿˜ç»™å‡ºå«æ˜Ÿçš„é€Ÿåº¦ã€‚å¦‚æœéœ€è¦å…¶ä»–æ—¶åˆ»çš„å«æ˜Ÿä½ç½®ï¼Œå¯ä»¥ç”±ç»™å‡ºçš„å«æ˜Ÿä½ç½®è¿›è¡Œæ’å€¼å¾—åˆ°ã€‚å…³äºsp3æ–‡ä»¶çš„è¯¦ç»†è¯´æ˜å¯ä»¥å‚è€ƒå®˜æ–¹æ–‡æ¡£ã€‚ä¸å¹¿æ’­æ˜Ÿå†ä¸ä¸€æ ·ï¼Œç²¾å¯†æ˜Ÿå†å¹¶ä¸æ˜¯ç”¨å¼€æ™®å‹’å‚æ•°ç»™å‡ºçš„ï¼Œè€Œæ˜¯ç›´æ¥ç»™å‡ºå«æ˜Ÿåœ¨ ITRFæ¡†æ¶ä¸­çš„åæ ‡å€¼ ITRFï¼ˆInternational Terrestrial Reference Frame å›½é™…åœ°çƒå‚è€ƒæ¡†æ¶ï¼‰æ¡†æ¶æ˜¯ç”± IERSï¼ˆå›½é™…åœ°çƒè‡ªè½¬æœåŠ¡ï¼‰å‘å¸ƒçš„ï¼ŒITRF çš„æ„æˆæ˜¯åŸºäºVLBIã€LLRã€SLRã€GPS å’Œ DORIS ç­‰ç©ºé—´å¤§åœ°æµ‹é‡æŠ€æœ¯çš„è§‚æµ‹æ•°æ®ï¼Œç”± IERSä¸­å¿ƒå±€åˆ†æå¾—åˆ°çš„å…¨çƒç«™åæ ‡å’Œé€Ÿåº¦åœºã€‚è‡ª1988 å¹´èµ·ï¼ŒIERS å·²ç»å‘å¸ƒ ITRF88ã€ITRF89ã€ITRF90ã€ITRF9 1ã€ITRF92ã€ITRF93ã€ITRF94ã€ITRF96ã€ITRF2000ã€ITRF2005ã€ITRF2008ã€ITRF2014 ç­‰å…¨çƒå‚è€ƒæ¡†æ¶ã€‚ä¸‹é¢æ˜¯ä»igs20863.sp3æ–‡ä»¶ä¸­æˆªå–çš„å¼€å¤´éƒ¨åˆ†ï¼š#cP2020  1  1  0  0  0.00000000      96 ORBIT IGS14 HLM  IGS## 2086 259200.00000000   900.00000000 58849 0.0000000000000+   32   G01G02G03G04G05G06G07G08G09G10G11G12G13G14G15G16G17+        G18G19G20G21G22G23G24G25G26G27G28G29G30G31G32  0  0+          0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0+          0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0+          0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0++         2  2  2  2  2  2  2  2  2  2  2  2  2  2  2  2  2++         2  2  2  2  2  2  2  2  3  2  2  2  2  2  2  0  0++         0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0++         0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0++         0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0%c G  cc GPS ccc cccc cccc cccc cccc ccccc ccccc ccccc ccccc%c cc cc ccc ccc cccc cccc cccc cccc ccccc ccccc ccccc ccccc%f  1.2500000  1.025000000  0.00000000000  0.000000000000000%f  0.0000000  0.000000000  0.00000000000  0.000000000000000%i    0    0    0    0      0      0      0      0         0%i    0    0    0    0      0      0      0      0         0/* FINAL ORBIT COMBINATION FROM WEIGHTED AVERAGE OF:        /* cod emr esa gfz grg jpl mit ngs sio                      /* REFERENCED TO IGS TIME (IGST) AND TO WEIGHTED MEAN POLE:/* PCV:IGS14_2086 OL/AL:FES2004  NONE     Y  ORB:CMB CLK:CMB*  2020  1  1  0  0  0.00000000PG01   9888.347661 -19617.637150 -14892.695413   -247.874423 12 10  5  71       PG02 -21823.783543  13971.156772  -4920.780210   -377.229970 10  9  7  81       PG03  -1601.529966 -16464.253025 -20857.441401    -63.370799  8  7 11 105       PG04   1221.994671 -26086.976634  -4781.101677    -27.923755 12  4  5 109       PG05 -19154.192243   5721.537965  17444.937173     -5.436142  7  8  6  88       PG06 -21150.813850   2402.751626 -15853.420427   -169.653500  9  7  8 106       PG07  -7307.639840 -13757.950583  21767.441209   -182.185020  6  6  5  99       PG08   7039.047666 -21245.446842  14152.046835    -18.646350  8  5  7  94       PG09  -6875.945629 -25134.252934   5050.629544   -121.818618  9  8  4 109       PG10  24015.414289  11544.134960   1555.732288   -193.008701  8  8  8 103       PG11   7282.297820 -25005.780611  -6416.591136   -403.117157  9  8  7  95       PG12  -3612.078652  14754.643360 -22024.819114    167.238453  6  6  5 121       PG13 -12822.251931  14077.120706  18359.989020    -22.958664  7  7  7  85       PG14  15097.782136    719.539797 -21518.284406    -41.480187  8  9  3  98       PG15  -5026.428258  22304.034935  12884.805910   -261.734981  8  6  5  83       PG16  20065.806133  -2268.606859  17288.279253   -108.806027  7  8  6  98       PG17 -13302.574437 -12501.633252 -18888.874080    190.733864  6  5  7  99       PG18  15683.730129 -20086.062189  -7815.214505 999999.999999PG19 -14744.295897  -4057.283573 -22007.637771   -218.643006  9  7  9 107       PG20  18932.638979  14547.678555  11749.766535    527.763846 11 10 11  93       PG21  10191.957706  12064.511376  22150.584734    -62.423168 10  8 11  69       PG22   7023.579706 -14225.418680 -21077.053685   -780.142685  9  7  9  70       PG23  -1206.975660 -26081.394867  -3218.011480   -145.988210 10  4  6 100       PG24 -10589.076575  20789.036009 -12534.802874     -6.933769  9  7  4 109       PG25  11115.892105  17563.783060 -16907.847503    -16.767205  8  8  6 106       PG26  24809.687134   2652.030547   9387.846884    117.742691  8 10  8 116       PG27  12654.914692 -10785.577586  20515.681941   -167.508526  8  5  8  92       PG28 -22961.626731 -13197.537237    783.057544    747.765166  6  8  6  95       PG29   4498.761624  25678.893062   4992.306129      4.083857 10 10  6  67       PG30 -17217.300944  -5541.835900  19540.416589   -118.767102  6  7  7  87       PG31  22625.699147  -4025.359523 -13738.508642    -13.516273  7  9  7  90       PG32  14835.028318  11206.018688 -18957.170663    172.050190  9 10  5 104       *  2020  1  1  0 15  0.00000000PG01  11218.886280 -20435.428221 -12620.054414   -247.885427 11 10  5  55       PG02 -21416.153632  13234.932709  -7652.201926   -377.236434  9  9  6  89       PG03    658.942604 -15624.793321 -21537.118493    -63.377346  7  7 10  93       PG04   1551.226922 -25415.284695  -7518.401629    -27.928395 11  5  6  93       PG05 -20891.993883   4906.521003  15635.291423     -5.436689  7  8  5  80       PG06 -19726.065274   1101.751537 -17715.564454   -169.663056  9  6  7 113... ... ...ç®€å•ä»‹ç»ä¸€ä¸‹  ç¬¬ä¸€è¡Œï¼Œæ—¶é—´ï¼Œ2020å¹´1æœˆ1æ—¥ï¼ŒIGS14 è¡¨ç¤ºåº§æ ‡ç³»   é‡‡ç”¨ITRF2014æ¡†æ¶ã€‚  ç¬¬äºŒè¡Œï¼Œ2086è¡¨ç¤ºGPSå‘¨ï¼Œ259200è¡¨ç¤ºç´¯è®¡ç§’æ•°ï¼ˆ3å¤©*86400ï¼‰  ç¬¬ä¸‰/å››è¡Œï¼ŒåŒ…å«32é¢—GPSå«æ˜Ÿçš„è½¨é“ä½ç½®  ç¬¬23è¡Œè¡¨ç¤ºä»ç¬¬24è¡Œå¼€å§‹çš„è¿™ä¸€ç»„å«æ˜Ÿè½¨é“ä½ç½®å¯¹åº”çš„æ—¶é—´  ç¬¬56è¡Œè¡¨ç¤ºä»ç¬¬57è¡Œå¼€å§‹çš„è¿™ä¸€ç»„å«æ˜Ÿè½¨é“ä½ç½®å¯¹åº”çš„æ—¶é—´ï¼Œä¸å‰ä¸€æ•°æ®å—ç›¸å·®15åˆ†é’Ÿ  ç¬¬24è¡Œä¸ºç¬¬ä¸€ä¸ªå«æ˜Ÿçš„ä½ç½®å’Œé’Ÿå·®ä¿¡æ¯ï¼Œä½ç½®å•ä½ä¸ºkmï¼Œç²¾åº¦åˆ°mmï¼ŒåŒ…å«xyzä¸‰ä¸ªæ–¹å‘ã€‚æ—¶é’Ÿå•ä½ä¸ºmsï¼Œç²¾åº¦ä¸ºpsã€‚æœ€åå››ä¸ªæ•°ä¸ºxyzä½ç½®å’Œé’Ÿå·®çš„æ ‡å‡†å·®ã€‚  æ ‡å‡†å·®çš„å€¼è¦ç»“åˆç¬¬15è¡Œçš„æµ®ç‚¹åŸºå‡†å€¼æ¥è®¡ç®—ï¼Œæ¯”å¦‚ç¬¬ä¸€é¢—å«æ˜Ÿxæ–¹å‘æ ‡å‡†å·®ä¸º12ï¼Œç»“åˆç¬¬15è¡Œç¬¬ä¸€ä¸ªæµ®ç‚¹åŸºå‡†å€¼1.25ï¼Œæ ‡å‡†å·®è®¡ç®—ä¸º $1.25^{12} = 14.5519 mm$ã€‚é’Ÿå·®è®¡ç®—æ–¹æ³•ç±»ä¼¼ï¼Œä¸è¿‡ç”¨çš„ç¬¬äºŒä¸ªåŸºå‡†å€¼1.025ã€‚å®˜ç½‘æœ‰æŠ“å–çˆ¬è™«çš„ä»£ç å’Œæ•™ç¨‹ã€‚ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼šimport requestsurl='https://cddis.nasa.gov/archive/gnss/products/'dest = 'C:/GPS/'### determine GPS week rangeGPSweek_start = 2086GPSweek_end = 2087for i in range(GPSweek_end-GPSweek_start):    gpsw = str(GPSweek_start+i)    for d in range(7):        filename = '/igs'+gpsw+str(d)+'.sp3.Z' # e.g., igs20860.sp3.Z        path = url + gpsw + filename        r=requests.get(path)        destf = dest + filename        with open(destf, \"wb\") as f:            for chunk in r.iter_content(chunk_size=1000):                f.write(chunk)        f.close()æ³¨æ„éœ€è¦å°† .netrc æ–‡ä»¶æ”¾åœ¨æŒ‡å®šä½ç½®åï¼Œå°†è¯¥ä½ç½®åŠ å…¥åˆ°ç³»ç»Ÿç¯å¢ƒå˜é‡ä¸­ï¼Œå˜é‡åä¸º HOMEã€‚ç„¶åé‡‡ç”¨ python å³å¯æŠ“å–æ•°æ®ã€‚åŒæ ·ä¹Ÿå¯ä»¥é‡‡ç”¨cURL å·¥å…·ï¼Œè¯·å‚è€ƒè¿™é‡Œã€‚"
  },
  
  {
    "title": "æ·±åº¦å­¦ä¹ æ–‡ç« é˜…è¯»ï¼ˆImage Segmentationï¼‰",
    "url": "/posts/CV-FuzzySeg/",
    "categories": "Academic, Paper",
    "tags": "deep learning, computer vision",
    "date": "2021-09-23 09:53:49 +0800",
    





    
    "snippet": "æœ¬æ–‡ä»‹ç»äº†æ¨¡ç³Šæƒ©ç½šç¨€ç–ç¼–ç åœ¨æ‰©æ•£å¼ é‡ç£å…±æŒ¯å›¾åƒåˆ†å‰²ä¸­çš„åº”ç”¨ã€‚Fuzziness Penalized Sparse Coding for Diffusion Tensor Magnetic Resonance Image Segmentation  1. å‚æ•°å®šä¹‰  2. æ¨¡ç³Šæƒ©ç½šç¨€ç–ç¼–ç   3. ä¼˜åŒ–          3.1. å‚æ•°æ›´æ–°                  3.1.1. s ...",
    "content": "æœ¬æ–‡ä»‹ç»äº†æ¨¡ç³Šæƒ©ç½šç¨€ç–ç¼–ç åœ¨æ‰©æ•£å¼ é‡ç£å…±æŒ¯å›¾åƒåˆ†å‰²ä¸­çš„åº”ç”¨ã€‚Fuzziness Penalized Sparse Coding for Diffusion Tensor Magnetic Resonance Image Segmentation  1. å‚æ•°å®šä¹‰  2. æ¨¡ç³Šæƒ©ç½šç¨€ç–ç¼–ç   3. ä¼˜åŒ–          3.1. å‚æ•°æ›´æ–°                  3.1.1. s æ›´æ–°          3.1.2. t æ›´æ–°          3.1.3. u æ›´æ–°          3.1.4. D æ›´æ–°                    1. å‚æ•°å®šä¹‰  æ‰©æ•£å¼ é‡ $\\boldsymbol{T}$ï¼š\\[\\boldsymbol{T}=[\\boldsymbol v_1,\\boldsymbol v_2,\\boldsymbol v_3]\\begin{bmatrix}e_1 &amp; 0 &amp;0 \\\\0 &amp; e_2 &amp;0 \\\\0 &amp; 0 &amp; e_3\\end{bmatrix}[\\boldsymbol v_1,\\boldsymbol v_2,\\boldsymbol v_3]^T\\]å…¶ä¸­  $e_1\\geq e_2 \\geq e_3$ æ˜¯ç‰¹å¾å€¼ï¼›  $\\boldsymbol{v}_1, \\boldsymbol{v}_2, \\boldsymbol{v}_3$ æ˜¯ç‰¹å¾å‘é‡ï¼›  $\\boldsymbol{v}1=[v{11}, v_{12}, v_{13}]$ æ˜¯ä¸»è¦æ‰©æ•£æ–¹å‘ï¼Œå³æœ€å¤§ç‰¹å¾å€¼ $e_1$ å¯¹åº”çš„ç‰¹å¾å‘é‡ï¼›æè¿°ç¬¦ï¼š  å‡ ä½•æè¿°ç¬¦ï¼š\\[\\boldsymbol{x}_i^G=[e_1, e_2,e_3,FA, MD, RA, VR, RD, PA, SA, LA]\\in \\mathbb R^{11}\\]  æ–¹å‘æè¿°ç¬¦ï¼š\\[\\boldsymbol{x}_i^O=\\frac{1}{\\vert\\vert\\boldsymbol{v}_1\\vert\\vert} (v_{11}^2-v_{12}^2, 2v_{11}v_{12}, 2v_{11}v_{13}, 2v_{12}v_{13},\\frac{1}{\\sqrt{3}}(2v_{13}^2-v_{11}^2-v_{12}^2)) \\in \\mathbb R^{5}\\]  åŸå§‹æ•°æ®åŸŸä¸‹ï¼Œæ ¸ç£å…±æŒ¯ä½“ç´ çš„ç‰¹å¾å‘é‡ï¼š\\[\\boldsymbol{x}_i = [t_1, \\boldsymbol x_i^G,\\boldsymbol x_i^O]\\in \\mathbb R^{k\\times 1}, \\; k=17\\]  ç¨€ç–ç¼–ç åŸŸä¸‹ï¼Œä½“ç´ ç‰¹å¾å‘é‡çš„ç¨€ç–è¡¨ç¤º\\[\\boldsymbol s_i\\in \\mathbb R^{l\\times 1}\\]  è¶…å®Œå¤‡è¯å…¸\\[\\boldsymbol D = [\\boldsymbol d_1, \\boldsymbol d_2, \\cdots, \\boldsymbol d_l]\\in \\mathbb R^{k\\times l}\\]2. æ¨¡ç³Šæƒ©ç½šç¨€ç–ç¼–ç è¾“å…¥è®­ç»ƒæ ·æœ¬ $\\boldsymbol X = [\\boldsymbol x_1, \\cdots, \\boldsymbol x_n]\\in \\mathbb R^{k\\times n}$ï¼Œå¯¹äºæ¯ä¸ªæ ·æœ¬å¯ä»¥è®­ç»ƒå­—å…¸å¾—åˆ°ç¨€ç–ç¼–ç \\[F(\\boldsymbol s, \\boldsymbol D)=\\min_{\\boldsymbol s, \\boldsymbol D} \\sum_{i=1}^n(\\frac{1}{2}\\vert\\vert\\boldsymbol x_i - \\boldsymbol D \\boldsymbol s_i\\vert\\vert_2^2+\\lambda\\vert\\vert \\boldsymbol s_i\\vert\\vert_1),\\\\s.t.\\vert\\vert\\boldsymbol d_j\\vert\\vert_2^2 &lt; 1 \\; \\forall j\\in[1,\\cdots,l]\\]å‡è®¾ä¸€å…±æœ‰ $C$ ç±»ã€‚ä¸“å®¶æä¾›çš„ç¡¬æ ‡ç­¾ä¸º $\\boldsymbol l_i \\in \\mathbb R^C$ï¼ˆone-hot å½¢å¼ï¼‰ã€‚è½¯æ¨¡ç³Šéš¶å±åº¦ $\\boldsymbol u_i=[u_1,\\cdots, u_C] \\in \\mathbb R^C$ï¼ˆåˆ†é‡å’Œä¸º 1ï¼‰ï¼Œè¡¨æ˜æ ·æœ¬ $\\boldsymbol x_i$ ä¸å¤šä¸ªå…¶ä»–ç±»åˆ«çš„å…³ç³»ã€‚å…¶ä¸­ï¼Œ$C$ ä¸ºç±»åˆ«æ•°ã€‚æ¨¡ç³Šéš¶å±åº¦é‡‡ç”¨æ¨¡ç³Škè¿‘é‚»ç®—æ³•ï¼ˆFKNNï¼‰è®¡ç®—ã€‚é¦–å…ˆè®¡ç®—æ ·æœ¬ç‰¹å¾å‘é‡é—´çš„æ¬§å¼è·ç¦»çŸ©é˜µï¼Œç„¶åå¯¹è¯¥è·ç¦»çŸ©é˜µè¿›è¡Œæ’åºï¼Œé€‰å–å…¶ä¸­ $k$ ä¸ªæœ€è¿‘é‚»çš„è®­ç»ƒæ ·æœ¬ã€‚å¯¹äºå±äºç¬¬ $m$ ç±»åˆ«çš„æ ·æœ¬ $\\boldsymbol x_i$ï¼Œå…¶æ¨¡ç³Šéš¶å±åº¦è®¡ç®—æ–¹å¼ä¸º\\[\\begin{array}{l}\\hat u_{ij} = \\left\\{\\begin{aligned}\\gamma + (1-\\gamma)(n_{jm}/k) &amp; &amp; j=m \\\\(1-\\gamma)(n_{jm}/k)  &amp; &amp; j\\not=m \\\\\\end{aligned}\\right. \\end{array}\\]å…¶ä¸­ $\\gamma= \\frac{N-C}{2^hN}$ï¼Œ$h,\\lambda\\in(0,1)$ æ˜¯æ§åˆ¶æ¨¡ç³Šéš¶å±åº¦å–å€¼çš„å¸¸æ•°ï¼Œ$n_{jm}$ æ˜¯å±äºç¬¬ $j$ ä¸ªç±»åˆ«çš„é‚»å±…æ ·æœ¬ä¸ªæ•°ã€‚Nï¼ŒCæ˜¯å•¥ï¼Ÿï¼Ÿ$n_{jm}$ æ˜¯å±äºç¬¬ $j$ ç±»åˆ«çš„é‚»å±…ä¸ªæ•°ã€‚$h \\in (0,1),\\gamma \\in (0,1)$ æ˜¯ç”¨äºæ§åˆ¶æ¨¡ç³Šéš¶å±åº¦çš„å¸¸æ•°ã€‚ä¸ºäº†ç®€åŒ–è®¡ç®—ï¼Œè¿›ä¸€æ­¥å°†æ¨¡ç³Šçš„åˆ†è¿›è¡Œå½’ä¸€åŒ–ï¼Œä½¿å¾— $\\sum_j \\hat{u}_{ij} = 1$ã€‚  è¿›ä¸€æ­¥è§£è¯»ï¼šå¯¹äºæ¯ä¸ªæ ·æœ¬ï¼Œé€‰å–å…¶ $k$ ä¸ªæœ€è¿‘æ ·æœ¬ã€‚è®¡ç®—è¯¥é€‰æ‹©çš„æ ·æœ¬å¯¹æ‰€æœ‰ç±»åˆ«çš„æ¨¡ç³Šéš¶å±åº¦ï¼Œè¯¥æ ·æœ¬å¯¹åº”è¯¥ç±»åˆ«çš„éš¶å±åº¦ä¸ºç¬¬ä¸€ä¸ªå¼å­ï¼Œè¯¥æ ·æœ¬å¯¹äºæ‰€æœ‰å…¶å®ƒç±»åˆ«çš„éš¶å±åº¦ä¸ºç¬¬äºŒä¸ªå¼å­ï¼›å…¶ä¸­ï¼Œæ¯ä¸ªéš¶å±åº¦å³ä¸å¯¹åº”ç±»åˆ«çš„è¿‘é‚»æ ·æœ¬ä¸ªæ•°æœ‰å…³ã€‚æœ€ååšä¸€ä¸ªå½’ä¸€åŒ–ã€‚æ¨¡ç³Šåº¦å¯¹åº”åŸå§‹ç‰¹å¾åŸŸçš„æ ‡æ³¨æ•°æ®ï¼Œé‡‡ç”¨æ¨¡ç³Šæƒ©ç½šç¨€ç–ç¼–ç ï¼ˆFPSCï¼‰æ¥åœ¨ç¨€ç–ç¼–ç ç©ºé—´ä¿ç•™ä¸Šè¿°æ¨¡ç³Šåº¦ã€‚\\[G(\\boldsymbol{s},\\boldsymbol{u},\\boldsymbol{D})= \\min_{\\boldsymbol{s},\\boldsymbol{u},\\boldsymbol{D}} [F(\\boldsymbol{s},\\boldsymbol{D}) + {\\eta_1}\\sum\\limits_{i,j} {u}_{ij}\\vert\\vert\\boldsymbol{s}_i - {\\boldsymbol{c}_j}\\vert\\vert_2^2+\\eta_2\\sum\\limits_{i} I(i\\in\\Omega) \\vert\\vert \\boldsymbol u_i-\\hat{\\boldsymbol u}_i\\vert\\vert_2^2],\\\\s.t.\\;\\boldsymbol{u}_{i}\\boldsymbol{1} = 1\\;\\forall i\\in[1,\\cdots,n]\\]  ç¬¬ä¸€é¡¹ï¼šå‰é¢å®šä¹‰çš„ç¨€ç–ç¼–ç æ¨¡å‹ï¼›  ç¬¬äºŒé¡¹ï¼šç¨€ç–ç¼–ç è¡¨å¾ $\\boldsymbol s_i$ èšç±»åˆ°æŸäº›ä¸­å¿ƒ $\\boldsymbol c_j$ï¼›  ç¬¬ä¸‰é¡¹ï¼šæ¨¡ç³Šå¾—åˆ† $\\boldsymbol u$ è¢«æƒ©ç½šåˆ°ä¸ä¸“å®¶æ‰“åˆ† $\\hat{ \\boldsymbol u}$ ä¸€è‡´ã€‚å…¶ä¸­ï¼Œ$\\Omega$ è¡¨ç¤ºç›‘ç£æ•°æ®é›†ï¼Œ$I(i\\in\\Omega)$ æ˜¯ä¸€ä¸ªæŒ‡ç¤ºå‡½æ•°ï¼Œå¦‚æœ $i\\in\\Omega$ åˆ™å–å€¼ä¸º 1ï¼Œå¦åˆ™ä¸º 0ã€‚  $i=1,2,\\cdots,n$ éå†æ¯ä¸ªæ ·æœ¬ï¼›  $j=1,2,\\cdots,C$ éå†æ¯ä¸ªç±»åˆ«ï¼›3. ä¼˜åŒ–éš¾ç‚¹åœ¨äºç¨€ç–ç¼–ç è¡¨å¾ $\\boldsymbol s_i$ çš„æ›´æ–°è§„åˆ™ï¼Œå› ä¸ºä»–å³åœ¨ç¨€ç–ç¼–ç æ¨¡å‹ä¸­å‡ºç°ï¼Œåˆåœ¨æ¨¡ç³Šèšç±»éƒ¨åˆ†å‡ºç°ã€‚å‚è€ƒç¨€ç–ä¼˜åŒ–çš„å·²æœ‰ç ”ç©¶ï¼Œå¼•å…¥è¾…åŠ©å˜é‡ $\\boldsymbol t_i$ ï¼Œå°†ä¼˜åŒ–è½¬ä¸ºå¦‚ä¸‹å½¢å¼\\[\\min_{\\boldsymbol{s},\\boldsymbol{u},\\boldsymbol{D}}\\;  G(\\boldsymbol{s},\\boldsymbol{u},\\boldsymbol{D}), \\; s.t. ~~\\boldsymbol{s}_i=\\boldsymbol{t}_i ~\\forall i.\\]ä¸Šå¼æ˜¯ä¸€ä¸ªå…¸å‹çš„çº¦æŸä¼˜åŒ–é—®é¢˜ï¼Œé‡‡ç”¨äº¤æ›¿æ–¹å‘ä¹˜å­æ³•ï¼ˆADMï¼‰å¯ä»¥å°†çº¦æŸæ¾å¼›åˆ°ç›®æ ‡å‡½æ•°ä¸­\\[\\begin{aligned}L(\\boldsymbol{s},\\boldsymbol{t},\\boldsymbol{u},\\boldsymbol{D}) &amp;= \\sum\\limits_i {\\lambda \\vert\\vert{\\boldsymbol{t}_i}|{|_1} + \\frac{1}{2}\\vert\\vert{\\boldsymbol{x}_i} - } \\boldsymbol{D}{\\boldsymbol{s}_i}\\vert\\vert_2^2 \\\\&amp; + {\\eta _1}\\sum\\limits_{i,j} {u}_{ij}\\vert\\vert{\\boldsymbol{s}_i} - {\\boldsymbol{c}_j}\\vert\\vert_2^2 \\\\&amp; + {\\eta _2}\\sum\\limits_{i}I(i \\in \\Omega )\\vert\\vert{\\hat{\\boldsymbol{u}}_i} - {\\boldsymbol{u}_i}\\vert\\vert_2^2 \\\\&amp; + &lt; {\\theta _{i}},\\boldsymbol{u}_i\\boldsymbol{1} - 1 &gt;+&lt; {\\boldsymbol \\mu_i},{\\boldsymbol{t}_i} - {\\boldsymbol{s}_i} &gt;  \\\\&amp; + \\frac{\\rho}{2}(\\vert\\vert{\\boldsymbol{t}_i} - {\\boldsymbol{s}_i}\\vert\\vert_2^2+\\vert\\vert\\boldsymbol{u}_i\\boldsymbol{1} - 1\\vert\\vert_2^2)\\end{aligned}\\]å…¶ä¸­ï¼Œ$\\boldsymbol \\mu_i\\in \\mathbb R^{l\\times 1}, \\theta_i\\in \\mathbb R^1, \\; \\forall i$ æ˜¯æ‹‰æ ¼æœ—æ—¥ä¹˜å­ï¼Œ$\\rho\\in\\mathbb R^1$ æ˜¯å¢å¹¿æ‹‰æ ¼æœ—æ—¥å‚æ•°ã€‚ä¸Šè¿°å½¢å¼æ˜¯å…¸å‹çš„ADMå½¢å¼ï¼Œå¯ä»¥é‡‡ç”¨ä¸¤æ­¥æ³•æ±‚è§£ï¼Œç¬¬ä¸€æ­¥å‚æ•°æ›´æ–°ï¼Œç¬¬äºŒéƒ¨åŒå‡ï¼Ÿ3.1. å‚æ•°æ›´æ–°3.1.1. s æ›´æ–°æ³¨ï¼šåæ–‡ä¸­å…¬å¼çš„æ‹¬å·å†…ç¼–å·ä¸º ã€ŠThe Matrix Cookbookã€‹ ä¹¦å†…å¯¹åº”å‚è€ƒå…¬å¼ç¼–å·ã€‚é¦–å…ˆæ›´æ–° $\\boldsymbol s_i$ï¼Œå‰”é™¤ä¸ $\\boldsymbol s_i$ æ— å…³çš„é¡¹ï¼Œåˆ™æœ‰ä¼˜åŒ–ç›®æ ‡ä¸º\\[\\begin{aligned}\\min_{\\boldsymbol s_i} \\; &amp;  \\frac{1}{2}\\vert\\vert{\\boldsymbol{x}_i} -  \\boldsymbol{D}^{(k)}{\\boldsymbol{s}_i}\\vert\\vert_2^2\\\\&amp; + {\\eta _1}\\sum\\limits_{j} u^{(k)}_{ij}\\vert\\vert{\\boldsymbol{s}_i} - {\\boldsymbol{c}_j}\\vert\\vert_2^2 \\\\&amp; +  &lt; {\\mu_{i}},{\\boldsymbol{t}^{(k)}_i} - {\\boldsymbol{s}_i} &gt; \\\\&amp; + \\frac{\\rho}{2}\\vert\\vert{\\boldsymbol{t}^{(k)}_i} - {\\boldsymbol{s}_i}\\vert\\vert_2^2\\\\\\end{aligned}\\]å…¶ä¸­ $(k)$ è¡¨ç¤ºå½“å‰ç¬¬ $k$ æ­¥æ›´æ–°æ—¶çš„å‚æ•°ï¼Œæ¶‰åŠçš„å‚æ•°ä¸ºå¾…æ›´æ–°çš„ $\\boldsymbol s_i, \\boldsymbol t_i, \\boldsymbol D$ã€‚å¯¹ä¸Šå¼æ±‚åå¯¼ï¼Œç¬¬ä¸€é¡¹æ±‚åå¯¼ä¸º\\[\\begin{aligned}&amp;\\frac{\\partial}{\\partial \\boldsymbol s_i} \\frac{1}{2}\\vert\\vert{\\boldsymbol{x}_i} -  \\boldsymbol{D}^{(k)}{\\boldsymbol{s}_i}\\vert\\vert_2^2 \\\\=&amp;\\vert\\vert{\\boldsymbol{x}_i} -  \\boldsymbol{D}^{(k)}{\\boldsymbol{s}_i}\\vert\\vert_2 \\cdot \\frac{\\boldsymbol{x}_i -  \\boldsymbol{D}^{(k)}\\boldsymbol{s}_i}{\\vert\\vert{\\boldsymbol{x}_i} -  \\boldsymbol{D}^{(k)}{\\boldsymbol{s}_i}\\vert\\vert_2 }\\cdot \\frac{\\partial}{\\partial \\boldsymbol s_i}[{\\boldsymbol{x}_i} - \\boldsymbol{D}^{(k)}{\\boldsymbol{s}_i}] \\quad (129)\\\\=&amp;({\\boldsymbol{x}_i} - \\boldsymbol{D}^{(k)}\\boldsymbol{s}_i) \\cdot (-{\\boldsymbol D^{(k)}}^T) \\quad (69)\\\\=&amp;{\\boldsymbol D^{(k)}}^T\\boldsymbol D^{(k)}\\boldsymbol{s}_i-{\\boldsymbol D^{(k)}}^T\\boldsymbol x_i\\quad \\in \\mathbb R^{l\\times 1}\\end{aligned}\\]ç¬¬äºŒé¡¹æ±‚åå¯¼ä¸º\\[\\begin{aligned}\\frac{\\partial}{\\partial \\boldsymbol s_i} {\\eta _1}\\sum\\limits_{j} u^{(k)}_{ij}\\vert\\vert{\\boldsymbol{s}_i} - {\\boldsymbol{c}_j}\\vert\\vert_2^2 =&amp;2\\eta_1\\sum\\limits_{j} u^{(k)}_{ij}(\\boldsymbol{s}_i - \\boldsymbol{c}_j)\\quad (129)\\\\=&amp;2\\eta_1 \\bar u \\boldsymbol s_i - 2\\eta_1\\bar{\\boldsymbol c}\\\\where \\quad &amp;\\bar u=\\sum\\limits_j u^{(k)}_{ij},\\quad \\bar{ \\boldsymbol{c}}= \\sum \\limits_{j} u^{(k)}_{ij} \\boldsymbol{c}_j\\end{aligned}\\]ç¬¬ä¸‰é¡¹ä¸ºçŸ©é˜µå†…ç§¯ï¼Œæ ¹æ®å†…ç§¯çš„å®šä¹‰æœ‰\\[&lt; \\boldsymbol \\mu_i,\\boldsymbol{t}^{(k)}_i - \\boldsymbol{s}_i &gt; = tr(\\boldsymbol \\mu_i^T\\cdot(\\boldsymbol{t}^{(k)}_i - \\boldsymbol{s}_i))\\]åˆ™æ±‚åå¯¼ä¸º\\[\\begin{aligned}\\frac{\\partial}{\\partial \\boldsymbol s_i}&lt; \\boldsymbol \\mu_i,\\boldsymbol{t}^{(k)}_i - \\boldsymbol{s}_i &gt;=&amp; \\frac{\\partial}{\\partial \\boldsymbol s_i}  tr(\\boldsymbol \\mu_i^T\\cdot(\\boldsymbol{t}^{(k)}_i - \\boldsymbol{s}_i))\\\\=&amp;-\\boldsymbol \\mu_i\\quad (101)\\end{aligned}\\]æˆ–è€…æ ¹æ®å‘é‡å†…ç§¯å®šä¹‰ï¼ˆ$\\boldsymbol \\mu_i \\in\\mathbb R^{l\\times 1}$ å’Œ $\\boldsymbol t_i-\\boldsymbol s_i \\in\\mathbb R^{l\\times 1}$ éƒ½æ˜¯å‘é‡ï¼‰ï¼Œå»æ‰ $tr$ ç¬¦å·ï¼Œåˆ™æ±‚åå¯¼ä¸º\\[\\begin{aligned}\\frac{\\partial}{\\partial \\boldsymbol s_i}&lt; \\boldsymbol \\mu_i,\\boldsymbol{t}^{(k)}_i - \\boldsymbol{s}_i &gt;=&amp; \\frac{\\partial}{\\partial \\boldsymbol s_i}  (\\boldsymbol \\mu_i^T\\cdot(\\boldsymbol{t}^{(k)}_i - \\boldsymbol{s}_i))\\\\=&amp;-\\boldsymbol \\mu_i \\quad (70)\\end{aligned}\\]ç¬¬å››é¡¹æ±‚åå¯¼ä¸º\\[\\begin{aligned}\\frac{\\partial}{\\partial \\boldsymbol s_i} \\frac{\\rho}{2}\\vert\\vert \\boldsymbol{t}^{(k)}_i - {\\boldsymbol{s}_i}\\vert\\vert_2^2=&amp;\\rho\\vert\\vert \\boldsymbol{t}^{(k)}_i - {\\boldsymbol{s}_i}\\vert\\vert_2 \\frac{\\boldsymbol{t}^{(k)}_i - \\boldsymbol{s}_i}{\\vert\\vert \\boldsymbol{t}^{(k)}_i - {\\boldsymbol{s}_i}\\vert\\vert_2}\\cdot (-\\boldsymbol I)\\quad (129)\\\\=&amp;\\rho(\\boldsymbol{s}_i - \\boldsymbol{t}^{(k)}_i)\\end{aligned}\\]åˆ™æ±‚åå¯¼åå®Œæ•´çš„è¡¨è¾¾å¼ä¸º\\[\\begin{aligned}&amp;\\frac{\\partial}{\\partial \\boldsymbol s_i} L(\\boldsymbol{s}_i,\\boldsymbol{t},\\boldsymbol{u},\\boldsymbol{D})\\\\= &amp;{\\boldsymbol D^{(k)}}^T\\boldsymbol D^{(k)}\\boldsymbol{s}_i-{\\boldsymbol D^{(k)}}^T\\boldsymbol x_i + 2\\eta_1 \\bar u \\boldsymbol s_i - 2\\eta_1\\bar{\\boldsymbol c} - \\boldsymbol \\mu_i + \\rho(\\boldsymbol{s}_i - \\boldsymbol{t}^{(k)}_i)\\\\=&amp; ({\\boldsymbol D^{(k)}}^T\\boldsymbol D^{(k)} + 2\\eta_1 \\bar u + \\rho)\\boldsymbol s_i - ({\\boldsymbol D^{(k)}}^T\\boldsymbol x_i+2\\eta_1\\bar{\\boldsymbol c}+\\rho\\boldsymbol{t}^{(k)}_i+\\boldsymbol \\mu_i)\\end{aligned}\\]ä»¤åå¯¼æ•°ç­‰äº 0ï¼Œåˆ™æœ‰\\[\\boldsymbol s_i = ({\\boldsymbol D^{(k)}}^T\\boldsymbol D^{(k)} + 2\\eta_1 \\bar u + \\rho)^{-1}({\\boldsymbol D^{(k)}}^T\\boldsymbol x_i+2\\eta_1\\bar{\\boldsymbol c}+\\rho\\boldsymbol{t}^{(k)}_i+\\boldsymbol \\mu_i)\\]3.1.2. t æ›´æ–°å‰”é™¤ä¸ $\\boldsymbol t_i$ æ— å…³çš„é¡¹ï¼Œåˆ™æœ‰ä¼˜åŒ–ç›®æ ‡ä¸º\\[\\begin{aligned}\\min_{\\boldsymbol s_i} \\; &amp;   \\sum\\limits_i \\lambda \\vert\\vert{\\boldsymbol{t}_i}|{|_1}\\\\&amp; + &lt; {\\boldsymbol \\mu_i},{\\boldsymbol{t}_i} - {\\boldsymbol{s}_i} &gt;  \\\\&amp; + \\frac{\\rho}{2}\\vert\\vert{\\boldsymbol{t}_i} - {\\boldsymbol{s}_i}\\vert\\vert_2^2\\end{aligned}\\]æ³¨æ„åˆ°ï¼Œ$\\boldsymbol \\mu_i \\in\\mathbb R^{l\\times 1}$ å’Œ $\\boldsymbol t_i-\\boldsymbol s_i \\in\\mathbb R^{l\\times 1}$ éƒ½æ˜¯å‘é‡ï¼Œåˆ™å†…ç§¯é¡¹ä¸º\\[&lt; {\\boldsymbol \\mu_i},{\\boldsymbol{t}_i} - {\\boldsymbol{s}_i} &gt; = {\\boldsymbol \\mu_i}^T({\\boldsymbol{t}_i} - {\\boldsymbol{s}_i})\\]äºŒèŒƒæ•°é¡¹ä¸º\\[\\frac{\\rho}{2}\\vert\\vert\\boldsymbol{t}_i - \\boldsymbol{s}_i\\vert\\vert_2^2 = \\frac{\\rho}{2}(\\boldsymbol t_i - \\boldsymbol s_i)^T(\\boldsymbol t_i - \\boldsymbol s_i)\\]å¯¹äº $\\boldsymbol t_i$ è€Œè¨€ï¼ŒæŸå¤±å‡½æ•°ä¸­çš„ $\\boldsymbol \\mu_i$ æ²¡æœ‰å½±å“ï¼Œå› æ­¤ä¸å¦¨å°†æŸå¤±å‡½æ•°åä¸¤é¡¹çš„å’Œé…æ–¹æˆå¦‚ä¸‹å½¢å¼\\[\\begin{aligned}&amp;&lt; {\\boldsymbol \\mu_i},{\\boldsymbol{t}_i} - {\\boldsymbol{s}_i} &gt; + \\frac{\\rho}{2}\\vert\\vert\\boldsymbol{t}_i - \\boldsymbol{s}_i\\vert\\vert_2^2 \\\\=&amp; {\\boldsymbol \\mu_i}^T({\\boldsymbol{t}_i} - {\\boldsymbol{s}_i}) + \\frac{\\rho}{2}(\\boldsymbol t_i - \\boldsymbol s_i)^T(\\boldsymbol t_i - \\boldsymbol s_i)\\\\=&amp; \\frac{1}{\\rho^2}{\\boldsymbol \\mu_i}^T{\\boldsymbol \\mu_i} + \\frac{\\rho}{2}\\frac{2}{\\rho}{\\boldsymbol \\mu_i}^T({\\boldsymbol{t}_i} - {\\boldsymbol{s}_i}) + \\frac{\\rho}{2}(\\boldsymbol t_i - \\boldsymbol s_i)^T(\\boldsymbol t_i - \\boldsymbol s_i)\\\\=&amp; \\frac{\\rho}{2}[(\\frac{1}{\\rho}\\boldsymbol \\mu_i)^T(\\frac{1}{\\rho}\\boldsymbol \\mu_i) + \\frac{1}{\\rho}\\boldsymbol \\mu_i^T(\\boldsymbol t_i - \\boldsymbol s_i) + \\frac{1}{\\rho}\\boldsymbol \\mu_i(\\boldsymbol t_i - \\boldsymbol s_i)^T + (\\boldsymbol t_i - \\boldsymbol s_i)^T(\\boldsymbol t_i - \\boldsymbol s_i)]\\\\=&amp; \\frac{\\rho}{2}( \\frac{1}{\\rho}\\boldsymbol \\mu_i + (\\boldsymbol t_i - \\boldsymbol s_i) )^T( \\frac{1}{\\rho}\\boldsymbol \\mu_i + (\\boldsymbol t_i - \\boldsymbol s_i) )\\\\=&amp; \\frac{\\rho}{2}\\vert\\vert \\frac{1}{\\rho}\\boldsymbol \\mu_i + (\\boldsymbol t_i - \\boldsymbol s_i) \\vert\\vert_2^2\\end{aligned}\\]åˆ™åŸå§‹æŸå¤±å‡½æ•°å˜ä¸º\\[\\min_{\\boldsymbol t_i} \\;    \\sum\\limits_i \\lambda \\vert\\vert{\\boldsymbol{t}_i}|{|_1} +\\frac{\\rho}{2}\\vert\\vert \\frac{1}{\\rho}\\boldsymbol \\mu_i + (\\boldsymbol t_i - \\boldsymbol s_i) \\vert\\vert_2^2\\]ä¸Šå¼æ˜¯ä¸€ä¸ªæ ‡å‡†çš„ 1 èŒƒæ•°å¸¦äºŒæ¬¡é¡¹çš„å½¢å¼ï¼Œé‡‡ç”¨è¿­ä»£æ”¶ç¼©ç®—æ³•ï¼ˆå…·ä½“è§£æ³•å‚è€ƒä¸‹è¿°é“¾æ¥ï¼‰  L1-L2èŒƒæ•°æœ€å°åŒ–é—®é¢˜-è¿­ä»£æ”¶ç¼©ç®—æ³•. https://www.cnblogs.com/yuningqiu/p/9936184.htmlå…¶æ ‡å‡†é—­ç¯å½¢å¼çš„æ›´æ–°å…¬å¼ä¸º\\[\\boldsymbol t_i ^{(k+1)}= h_{\\lambda\\rho^{-1}}(\\boldsymbol s_i^{(k)}-\\rho^{-1}\\boldsymbol \\mu^{(k)})\\]å…¶ä¸­ï¼Œ$h_{\\lambda\\rho^{-1}}$ ä¸ºå‹ç¼©ç®—å­ã€‚3.1.3. u æ›´æ–°æå‡ºä¸ $\\boldsymbol u_i$ æ— å…³é¡¹ï¼Œåˆ™æœ‰ä¼˜åŒ–ç›®æ ‡ä¸º\\[\\begin{aligned}\\min_{\\boldsymbol u_i} L(\\boldsymbol{u}) &amp;=  {\\eta _1}\\sum\\limits_{i,j} {u}_{ij}\\vert\\vert{\\boldsymbol{s}_i} - {\\boldsymbol{c}_j}\\vert\\vert_2^2 \\\\&amp; + {\\eta _2}\\sum\\limits_{i}I(i \\in \\Omega )\\vert\\vert{\\hat{\\boldsymbol{u}}_i} - {\\boldsymbol{u}_i}\\vert\\vert_2^2 \\\\&amp; + &lt; {\\theta _{i}},\\boldsymbol{u}_i\\boldsymbol{1} - 1 &gt; \\\\&amp; + \\frac{\\rho}{2}\\vert\\vert\\boldsymbol{u}_i\\boldsymbol{1} - 1\\vert\\vert_2^2\\end{aligned}\\]å¯¹äºç¬¬ä¸€é¡¹\\[\\begin{aligned}{\\eta _1}\\sum\\limits_{i,j} {u}_{ij}\\vert\\vert{\\boldsymbol{s}_i} - {\\boldsymbol{c}_j}\\vert\\vert_2^2 &amp;= \\sum\\limits_{i}\\eta _1\\sum\\limits_{j} {u}_{ij}\\vert\\vert{\\boldsymbol{s}_i^{(k)}} - {\\boldsymbol{c}_j}\\vert\\vert_2^2\\end{aligned}\\]ä»¤ $\\boldsymbol T^{(k)} \\in \\mathbb R^C$ï¼Œå…¶æ¯ä¸ªåˆ†é‡ä¸º\\[\\boldsymbol T_j^{(k)} = \\vert\\vert{\\boldsymbol{s}_i} - {\\boldsymbol{c}_j}\\vert\\vert_2^2, \\quad j=1,2,\\cdots, C\\]å¯å°†ç¬¬ä¸€ä¸ªåˆ†é‡å†™æˆçŸ©é˜µå½¢å¼\\[\\sum\\limits_{j} {u}_{ij}\\vert\\vert{\\boldsymbol{s}_i^{(k)}} - {\\boldsymbol{c}_j}\\vert\\vert_2^2 = tr(\\boldsymbol u^T_i \\cdot \\boldsymbol T^{(k)})\\]æ•´ä¸ªä¼˜åŒ–ç›®æ ‡æ”¹å†™ä¸º\\[\\begin{aligned}\\min_{\\boldsymbol u_i} L(\\boldsymbol{u}) = &amp; \\sum\\limits_{i}\\eta _1\\cdot  tr(\\boldsymbol u^T_i \\cdot \\boldsymbol T^{(k)})\\\\&amp; + {\\eta _2}\\sum\\limits_{i}I(i \\in \\Omega )\\vert\\vert{\\hat{\\boldsymbol{u}}_i} - {\\boldsymbol{u}_i}\\vert\\vert_2^2 \\\\&amp; + &lt; {\\theta _{i}},\\boldsymbol{u}_i\\boldsymbol{1} - 1 &gt; \\\\&amp; + \\frac{\\rho}{2}\\vert\\vert\\boldsymbol{u}_i\\boldsymbol{1} - 1\\vert\\vert_2^2\\\\= &amp; \\eta _1\\cdot  tr(\\boldsymbol u^T_i \\cdot \\boldsymbol T^{(k)})\\\\&amp; + {\\eta _2}I(i \\in \\Omega )\\vert\\vert{\\hat{\\boldsymbol{u}}_i} - {\\boldsymbol{u}_i}\\vert\\vert_2^2 \\\\&amp; +  {\\theta _{i}}(\\boldsymbol{u}_i\\boldsymbol{1} - 1 ) \\\\&amp; + \\frac{\\rho}{2}\\vert\\vert\\boldsymbol{u}_i\\boldsymbol{1} - 1\\vert\\vert_2^2\\end{aligned}\\]å…¶å¯¹ $\\boldsymbol u_i$ çš„åå¯¼æ•°ä¸º\\[\\begin{aligned}&amp;\\eta_1\\cdot \\boldsymbol T^{(k)}\\quad (103)\\\\+&amp;2{\\eta _2}I(i \\in \\Omega )(\\boldsymbol{u}_i - \\hat{\\boldsymbol{u}}_i)\\\\+&amp; {\\theta _{i}}\\boldsymbol{1}^T\\quad (70)\\\\+&amp; \\rho (\\boldsymbol{u}_i\\boldsymbol{1} - 1) \\boldsymbol 1^T\\quad (70)\\end{aligned}\\]ä»¤åå¯¼ç­‰äº 0ï¼Œå¾—åˆ°å‚æ•° $\\boldsymbol u_i$ çš„æ›´æ–°å¼ä¸º\\[\\boldsymbol u_i^{(k+1)} = (2{\\eta _2}I(i \\in \\Omega )+\\rho\\boldsymbol{1}\\boldsymbol{1}^T)^{-1}(2{\\eta _2}I\\hat{\\boldsymbol{u}}_i-\\eta_1\\cdot \\boldsymbol T^{(k)}+(\\rho_{i}^{(k)}-\\theta_{i}^{(k)})\\boldsymbol 1^T)\\]3.1.4. D æ›´æ–°ä¼˜åŒ–ç›®æ ‡ä¸º\\[\\min \\sum\\limits_i  \\vert\\vert \\boldsymbol{x}_i - \\boldsymbol{D}{\\boldsymbol{s}_i^{(k)}}\\vert\\vert_2^2\\]è¿™æ˜¯ä¸ªå…¸å‹çš„æœ€å°äºŒä¹˜å›å½’é—®é¢˜ï¼Œå¯¹å…¶äºŒèŒƒæ•°å±•å¼€ä¸º\\[\\sum\\limits_i(\\boldsymbol{x}_i - \\boldsymbol{D}\\boldsymbol{s}_i^{(k)})^T(\\boldsymbol{x}_i - \\boldsymbol{D}\\boldsymbol{s}_i^{(k)}) =\\\\\\sum\\limits_i[\\boldsymbol{x}_i^T\\boldsymbol{x}_i - \\boldsymbol x_i^T\\boldsymbol{D}\\boldsymbol{s}_i^{(k)} - \\boldsymbol x_i(\\boldsymbol{D}\\boldsymbol{s}_i^{(k)})^T + (\\boldsymbol{D}\\boldsymbol{s}_i^{(k)})^T\\boldsymbol{D}\\boldsymbol{s}_i^{(k)}]\\]å…¶å¯¹ $\\boldsymbol D$ çš„åå¯¼ä¸ºï¼ˆå‚è€ƒMatrix Cookbook å¼ï¼ˆ70ï¼‰ã€å¼ï¼ˆ71ï¼‰å’Œå¼ï¼ˆ77ï¼‰)\\[\\sum\\limits_i[-\\boldsymbol x_i(\\boldsymbol{s}_i^{(k)})^T-\\boldsymbol{s}_i(\\boldsymbol x_i^{(k)})^T+(\\boldsymbol{s}_i^{(k)})^T\\boldsymbol{D}\\boldsymbol{s}_i^{(k)}+\\boldsymbol{D}\\boldsymbol{s}_i^{(k)}(\\boldsymbol{s}_i^{(k)})^T]\\\\=\\sum\\limits_i[-2\\boldsymbol x_i(\\boldsymbol{s}_i^{(k)})^T+2\\boldsymbol{D}\\boldsymbol{s}_i^{(k)}(\\boldsymbol{s}_i^{(k)})^T]\\]  å¯¹äºå‘é‡ä¹˜æ³•å¯äº¤æ¢é¡ºåºï¼Œå³$a^T\\cdot b = a\\cdot b^T$ä»¤åå¯¼ç­‰äº 0ï¼Œåˆ™æ›´æ–°å¼ä¸º\\[\\boldsymbol D^{(k+1)} = (\\sum\\limits_i\\boldsymbol{s}_i^{(k)}(\\boldsymbol{s}_i^{(k)})^T)^{-1}(\\sum\\limits_i\\boldsymbol{x}_i^{(k)}(\\boldsymbol{s}_i^{(k)})^T)\\]"
  },
  
  {
    "title": "è®¡ç®—æœºè§†è§‰ï¼ˆYOLO V5ï¼‰",
    "url": "/posts/CV-yolov5/",
    "categories": "Academic, Knowledge",
    "tags": "deep learning, computer vision",
    "date": "2021-06-08 09:08:49 +0800",
    





    
    "snippet": "æœ¬æ–‡ä»‹ç»äº†è®¡ç®—æœºè§†è§‰ä¸­å•é˜¶æ®µç›®æ ‡æ£€æµ‹é—®é¢˜çš„ä¸€ä¸ªæœ€æ–°å®ç°ï¼Œå³ YOLO V5ã€‚  1. ç½‘ç»œç»“æ„          1.1. parameters      1.2. backnone                  1.2.1. Focus          1.2.2. Conv          1.2.3. BottleneckCSP                    1.3. ...",
    "content": "æœ¬æ–‡ä»‹ç»äº†è®¡ç®—æœºè§†è§‰ä¸­å•é˜¶æ®µç›®æ ‡æ£€æµ‹é—®é¢˜çš„ä¸€ä¸ªæœ€æ–°å®ç°ï¼Œå³ YOLO V5ã€‚  1. ç½‘ç»œç»“æ„          1.1. parameters      1.2. backnone                  1.2.1. Focus          1.2.2. Conv          1.2.3. BottleneckCSP                    1.3. head        2. è®­ç»ƒ          2.1. å‡†å¤‡æ ‡ç­¾      2.2. æ•°æ®å­˜æ”¾ä½ç½®      2.3. å‡†å¤‡æ¨¡å‹      2.4. è¿›è¡Œè®­ç»ƒ        3. æµ‹è¯•  4. æ£€æµ‹          4.1. å¿«é€Ÿæ£€æµ‹      4.2. å¿«é€Ÿæ¨ç†      4.3. è‡ªå®šä¹‰æ£€æµ‹      4.4. æ£€æµ‹å‚æ•°        5. å…¶å®ƒ          5.1. Citation      1. ç½‘ç»œç»“æ„  https://www.cnblogs.com/xiaoheizi-12345/p/14287592.htmlå…¶ä¸­æ©™è‰²çš„æ•°å­—è¡¨ç¤ºå±‚å·ï¼Œ0-9å±‚æ„æˆbackboneï¼Œ10-23å±‚æ„æˆheadï¼Œ17ã€20ã€23 å±‚çš„è¾“å‡ºæ˜¯Detect()å‡½æ•°çš„è¾“å…¥ã€‚  C3åçš„å‚æ•°è¡¨ç¤º(c_in, c_out)*è¯¥æ¨¡å—å †å çš„æ¬¡æ•°  Convå’ŒFocuså‚æ•°(c_in, c_out, kernel_size, stride)  SPPåçš„å‚æ•°(c_in, c_out, [kernel_size1,kernel_size2,kernel_size3])  Concatæ˜¯axes=1æ—¶çš„åˆå¹¶ï¼ˆå¢åŠ é€šé“ï¼‰  upsampleçš„scale_factorä¸º2ï¼Œè¾“å‡ºå›¾åƒä¸ºè¾“å…¥çš„2å€ã€‚  https://www.bilibili.com/video/BV18K411n7rcyolov5 æ˜¯ä½¿ç”¨ xxxx.yaml é…ç½®æ–‡ä»¶ï¼Œé€šè¿‡./models/yolo.pyè§£ææ–‡ä»¶åŠ äº†ä¸€ä¸ªè¾“å…¥æ„æˆçš„ç½‘ç»œæ¨¡å—ã€‚ä»¥ yolov5s.yaml ä¸ºä¾‹ï¼š# parametersnc: 80  # number of classesdepth_multiple: 0.33  # model depth multiplewidth_multiple: 0.50  # layer channel multiple# anchorsanchors:  - [10,13, 16,30, 33,23]  # P3/8  - [30,61, 62,45, 59,119]  # P4/16  - [116,90, 156,198, 373,326]  # P5/32# YOLOv5 backbonebackbone:  # [from, number, module, args]  [[-1, 1, Focus, [64, 3]],  # 0-P1/2   [-1, 1, Conv, [128, 3, 2]],  # 1-P2/4   [-1, 3, C3, [128]],   [-1, 1, Conv, [256, 3, 2]],  # 3-P3/8   [-1, 9, C3, [256]],   [-1, 1, Conv, [512, 3, 2]],  # 5-P4/16   [-1, 9, C3, [512]],   [-1, 1, Conv, [1024, 3, 2]],  # 7-P5/32   [-1, 1, SPP, [1024, [5, 9, 13]]],   [-1, 3, C3, [1024, False]],  # 9  ]# YOLOv5 headhead:  [[-1, 1, Conv, [512, 1, 1]],   [-1, 1, nn.Upsample, [None, 2, 'nearest']],   [[-1, 6], 1, Concat, [1]],  # cat backbone P4   [-1, 3, C3, [512, False]],  # 13   [-1, 1, Conv, [256, 1, 1]],   [-1, 1, nn.Upsample, [None, 2, 'nearest']],   [[-1, 4], 1, Concat, [1]],  # cat backbone P3   [-1, 3, C3, [256, False]],  # 17 (P3/8-small)   [-1, 1, Conv, [256, 3, 2]],   [[-1, 14], 1, Concat, [1]],  # cat head P4   [-1, 3, C3, [512, False]],  # 20 (P4/16-medium)   [-1, 1, Conv, [512, 3, 2]],   [[-1, 10], 1, Concat, [1]],  # cat head P5   [-1, 3, C3, [1024, False]],  # 23 (P5/32-large)   [[17, 20, 23], 1, Detect, [nc, anchors]],  # Detect(P3, P4, P5)  ]  from åˆ—å‚æ•°ï¼š-1 ä»£è¡¨æ˜¯ä»ä¸Šä¸€å±‚è·å¾—çš„è¾“å…¥ï¼Œ-2 è¡¨ç¤ºä»ä¸Šä¸¤å±‚è·å¾—çš„è¾“å…¥ã€‚  number åˆ—å‚æ•°ï¼š1 è¡¨ç¤ºåªæœ‰ä¸€ä¸ªï¼Œ3 è¡¨ç¤ºæœ‰ä¸‰ä¸ªç›¸åŒçš„æ¨¡å—ã€‚  module è¡¨ç¤ºæ¨¡å—ï¼šåŒ…æ‹¬ SPPã€Convã€Bottleneckã€BottleneckCSPï¼Œä»£ç å¯ä»¥åœ¨./models/common.pyä¸­è·å–åˆ°ã€‚  Focus çš„ [64, 3] è¡¨ç¤ºè¾“å…¥å›¾ç‰‡é€šé“æ•°ä¸º3ï¼ˆRGBï¼‰ï¼Œå·ç§¯æ ¸ä¸ªæ•°ä¸º 64å³è¾“å‡ºé€šé“æ•°ä¸º64ï¼›  [128, 3, 2] è§£æå¾—åˆ° [64, 128, 3, 2] ï¼Œ64 æ˜¯è¾“å…¥ï¼Œ128 è¡¨ç¤ºè¾“å‡º 128 ä¸ªå·ç§¯æ ¸ä¸ªæ•°ï¼Œä¹Ÿæ˜¯æ˜¯è¾“å‡ºé€šé“æ•°ï¼Œ3 è¡¨ç¤º 3Ã—3 çš„å·ç§¯æ ¸ï¼Œ2 è¡¨ç¤ºæ­¥é•¿ä¸º 2ã€‚yaml ä¸­è¾“å…¥éƒ½çœå»äº†ï¼Œå› ä¸ºè¾“å…¥éƒ½æ˜¯ä¸Šå±‚çš„è¾“å‡ºã€‚ä¸ºäº†ä¿®æ”¹è¿‡äºéº»çƒ¦ï¼Œè¿™é‡Œè¾“å…¥çš„è·å–æ˜¯ä»./models/yolo.pyçš„def parse_model(md, ch)å‡½æ•°ä¸­è§£æå¾—åˆ°çš„ã€‚1.1. parameters  https://www.cnblogs.com/E-Dreamer-Blogs/p/13297580.html      ncï¼šç±»åˆ«æ•°ã€‚        depth_multipleï¼šæ§åˆ¶æ¨¡å‹çš„æ·±åº¦ã€‚    åœ¨ backbone ä¸­çš„ number â‰  1 çš„æƒ…å†µä¸‹ç”Ÿæ•ˆï¼Œä¹Ÿå³å¯¹æ•°é‡å¤§äº 1 çš„å±‚ç”Ÿæ•ˆã€‚          yolov5sä¸­ï¼šdepth_multiple = 0.33ï¼Œå³3ä¸ªæ¨¡å—ç¼©å‡ä¸º1ä¸ªï¼Œ9ä¸ªæ¨¡å—ç¼©å‡ä¸º3ä¸ªï¼›      yolov5mä¸­: depth_multiple = 0.66ï¼Œå³3ä¸ªæ¨¡å—ç¼©å‡ä¸º2ä¸ªï¼Œ9ä¸ªæ¨¡å—ç¼©å‡ä¸º6ä¸ªï¼›      yolov5lä¸­: depth_multiple = 1      yolov5xä¸­: depth_multiple = 1.33ï¼Œå³3ä¸ªæ¨¡å—æ‰©å……ä¸º4ä¸ªï¼Œ9ä¸ªæ¨¡å—ç¼©æ‰©å……12ä¸ªï¼›        å‡è®¾ yolov5l ä¸­æœ‰ä¸‰ä¸ª BottleneckCSPï¼Œé‚£ yolov5s ä¸­å°±åªæœ‰ä¸€ä¸ª BottleneckCSPï¼Œé‚£        width_multipleï¼šæ§åˆ¶å·ç§¯æ ¸çš„ä¸ªæ•°ã€‚    ç”¨äºè®¾ç½® argumentsï¼Œä¾‹å¦‚ yolov5s è®¾ç½®ä¸º 0.5ï¼Œåˆ™ Focus å°±å˜æˆ [32, 3]ï¼ŒConv å°±å˜æˆ [64, 3, 2]ã€‚ä»¥æ­¤ç±»æ¨ï¼Œå·ç§¯æ ¸çš„ä¸ªæ•°éƒ½å˜æˆäº†è®¾ç½®çš„ä¸€åŠã€‚  yolov5æä¾›äº† sã€mã€lã€x å››ç§å°ºå¯¸çš„ç½‘ç»œï¼Œæ‰€æœ‰çš„.yamlæ–‡ä»¶éƒ½ä¸€æ ·ï¼Œåªéœ€è¦ä¿®æ”¹è¿™ä¸¤ä¸ªå‚æ•°å°±å¯ä»¥è°ƒæ•´æ¨¡å‹çš„ç½‘ç»œç»“æ„ã€‚1.2. backnonehttps://blog.csdn.net/jiafeier_555/article/details/109052569éª¨å¹²ç½‘ç»œç‰¹å¾å›¾ä»å¤§åˆ°å°ï¼Œæ·±åº¦åŠ æ·±ã€‚1.2.1. Focusä¸€ç§ä¸‹é‡‡æ ·æ–¹æ³•ï¼Œä»é«˜åˆ†è¾¨ç‡å›¾åƒä¸­ï¼Œå‘¨æœŸæ€§çš„æŠ½å‡ºåƒç´ ç‚¹é‡æ„åˆ°ä½åˆ†è¾¨ç‡å›¾åƒä¸­ï¼Œå³å°†å›¾åƒç›¸é‚»çš„å››ä¸ªä½ç½®è¿›è¡Œå †å ï¼Œèšç„¦ wh ç»´åº¦ä¿¡æ¯åˆ° c é€šé“ç©ºé—´ï¼Œæé«˜æ¯ä¸ªç‚¹æ„Ÿå—é‡ï¼Œå¹¶å‡å°‘åŸå§‹ä¿¡æ¯çš„ä¸¢å¤±ã€‚ä¸€ç§ space to depth æ–¹æ³•ã€‚class Focus(nn.Module):    # Focus wh information into c-space    def __init__(self, c1, c2, k=1, s=1, p=None, g=1, act=True):  # ch_in, ch_out, kernel, stride, padding, groups        super(Focus, self).__init__()        self.conv = Conv(c1 * 4, c2, k, s, p, g, act)    def forward(self, x):  # x(b,c,w,h) -&gt; y(b,4c,w/2,h/2)        return self.conv(torch.cat([x[..., ::2, ::2], x[..., 1::2, ::2], x[..., ::2, 1::2], x[..., 1::2, 1::2]], 1))å…·ä½“æ“ä½œæ˜¯åœ¨ä¸€å¼ å›¾ç‰‡ä¸­æ¯éš”ä¸€ä¸ªåƒç´ æ‹¿åˆ°ä¸€ä¸ªå€¼ï¼Œç±»ä¼¼äºé‚»è¿‘ä¸‹é‡‡æ ·ï¼Œè¿™æ ·å°±æ‹¿åˆ°äº†å››å¼ å›¾ç‰‡ï¼Œå››å¼ å›¾ç‰‡äº’è¡¥ï¼Œé•¿çš„å·®ä¸å¤šï¼Œä½†æ˜¯æ²¡æœ‰ä¿¡æ¯ä¸¢å¤±ï¼Œè¿™æ ·ä¸€æ¥ï¼Œå°† Wã€H ä¿¡æ¯å°±é›†ä¸­åˆ°äº† C ç»´åº¦ï¼Œè¾“å…¥é€šé“æ‰©å……äº†4å€ï¼Œå³æ‹¼æ¥èµ·æ¥çš„å›¾ç‰‡ç›¸å¯¹äºåŸå…ˆçš„RGBä¸‰é€šé“æ¨¡å¼å˜æˆäº†12ä¸ªé€šé“ï¼Œæœ€åå°†å¾—åˆ°çš„æ–°å›¾ç‰‡å†ç»è¿‡å·ç§¯æ“ä½œï¼Œæœ€ç»ˆå¾—åˆ°äº†æ²¡æœ‰ä¿¡æ¯ä¸¢å¤±æƒ…å†µä¸‹çš„äºŒå€ä¸‹é‡‡æ ·ç‰¹å¾å›¾ã€‚ä»¥yolov5sä¸ºä¾‹ï¼ŒåŸå§‹çš„ 640 Ã— 640 Ã— 3 çš„å›¾åƒè¾“å…¥Focusç»“æ„ï¼Œé‡‡ç”¨åˆ‡ç‰‡æ“ä½œï¼Œå…ˆå˜æˆ 320 Ã— 320 Ã— 12 çš„ç‰¹å¾å›¾ï¼Œå†ç»è¿‡ä¸€æ¬¡å·ç§¯æ“ä½œï¼Œæœ€ç»ˆå˜æˆ 320 Ã— 320 Ã— 32 çš„ç‰¹å¾å›¾ã€‚åˆ‡ç‰‡æ“ä½œå¦‚ä¸‹ï¼šè¯¥æ¨¡å—çš„è®¾è®¡ä¸»è¦æ˜¯å‡å°‘è®¡ç®—é‡åŠ å¿«é€Ÿåº¦ã€‚ä½œè€…åŸè¯ï¼šFocus() module is designed for FLOPS reduction and speed increase, not mAP increase.ã€ç„¶è€Œã€‘â€¦â€¦è®¡ç®—é‡ï¼ˆFLOPsï¼‰ï¼šå³æµ®ç‚¹è¿ç®—æ•°ï¼Œå¯ä»¥ç”¨æ¥è¡¡é‡ç®—æ³•/æ¨¡å‹çš„å¤æ‚åº¦ï¼Œè¿™å…³ç³»åˆ°ç®—æ³•é€Ÿåº¦ï¼Œå¤§æ¨¡å‹çš„å•ä½é€šå¸¸ä¸ºGï¼Œå°æ¨¡å‹å•ä½é€šå¸¸ä¸ºMï¼›é€šå¸¸åªè€ƒè™‘ä¹˜åŠ æ“ä½œçš„æ•°é‡ï¼Œè€Œä¸”åªè€ƒè™‘Convå’ŒFCç­‰å‚æ•°å±‚çš„è®¡ç®—é‡ï¼Œå¿½ç•¥BNå’ŒPReLUç­‰ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ï¼ŒConvå’ŒFCå±‚ä¹Ÿä¼šå¿½ç•¥ä»…çº¯åŠ æ“ä½œçš„è®¡ç®—é‡ï¼Œå¦‚biasåç½®åŠ å’Œshoutcutæ®‹å·®åŠ ç­‰ï¼Œç›®å‰æŠ€æœ¯æœ‰BNå’ŒCNNå¯ä»¥ä¸åŠ biasã€‚è®¡ç®—å…¬å¼ï¼ˆå·ç§¯å±‚ï¼‰ï¼šFLOPs =ï¼ˆCin x Kh x Kw - 1ï¼‰Ã— H Ã— W Ã— Coutä¸è€ƒè™‘biasæ—¶æœ‰-1ï¼Œæœ‰biasæ—¶æ²¡æœ‰-1ã€‚è¾“å…¥ 640 Ã— 640 Ã— 3 çš„å›¾ç‰‡ï¼Œæ™®é€šä¸‹é‡‡æ ·ï¼š3 Ã— 3 x 32s2p1 å·ç§¯ï¼Œå¾—åˆ° 320 Ã— 320 Ã— 32 çš„ç‰¹å¾å›¾ï¼Œè®¡ç®—é‡ä¸ºï¼šFLOPsï¼ˆconvï¼‰ = 3 Ã— 3 Ã— 3 Ã— 320 Ã— 320 Ã— 32 = 88473600Focusï¼šåˆ‡ç‰‡æ“ä½œï¼Œå…ˆå˜æˆ 320 Ã— 320 Ã— 12 çš„ç‰¹å¾å›¾ï¼Œå†ç»è¿‡ 3 Ã— 3 x 32s1p1 å·ç§¯æ“ä½œï¼Œå¾—åˆ° 320 Ã— 320 Ã— 32 çš„ç‰¹å¾å›¾ï¼Œè®¡ç®—é‡ä¸ºï¼šFLOPsï¼ˆFocusï¼‰ = 3 Ã— 3 Ã— 12 Ã— 32 Ã— 320 Ã— 320 = 353894400å¯ä»¥çœ‹å‡ºï¼ŒFocusçš„è®¡ç®—é‡æ˜¯æ™®é€šå·ç§¯çš„4å€ï¼Œä½†æ˜¯ä¸‹é‡‡æ ·æ—¶æ²¡æœ‰ä¿¡æ¯çš„ä¸¢å¤±ã€‚1.2.2. Convclass Conv(nn.Module):    # Standard convolution    def __init__(self, c1, c2, k=1, s=1, p=None, g=1, act=True):  # ch_in, ch_out, kernel, stride, padding, groups        super(Conv, self).__init__()        self.conv = nn.Conv2d(c1, c2, k, s, autopad(k, p), groups=g, bias=False)        self.bn = nn.BatchNorm2d(c2)        self.act = nn.Hardswish() if act else nn.Identity()    def forward(self, x):        return self.act(self.bn(self.conv(x)))    def fuseforward(self, x):        return self.act(self.conv(x))    def autopad(k, p=None):  # kernel, padding    # Pad to 'same'    if p is None:        p = k // 2 if isinstance(k, int) else [x // 2 for x in k]  # auto-pad    return pCONVå±‚ä½¿ç”¨çš„æ¿€æ´»å‡½æ•°æ˜¯ Hardswish;atuopad æ˜¯è‡ªåŠ¨å¡« padding çš„å€¼ï¼Œåœ¨k=1çš„æ—¶å€™ï¼Œpadding=0ï¼Œåœ¨k=3çš„æ—¶å€™padding=1ï¼Œä¿è¯äº†å·ç§¯æ¨¡å¼ä¸º sameã€‚1.2.3. BottleneckCSPé¦–å…ˆä»‹ç» bottleneckã€‚bottleneck ä¸»è¦ç›®çš„æ˜¯ä¸ºäº†å‡å°‘å‚æ•°çš„æ•°é‡ï¼Œä»è€Œå‡å°‘è®¡ç®—é‡ï¼Œä¸”åœ¨é™ç»´ä¹‹åå¯ä»¥æ›´åŠ æœ‰æ•ˆã€ç›´è§‚åœ°è¿›è¡Œæ•°æ®çš„è®­ç»ƒå’Œç‰¹å¾æå–ã€‚class Bottleneck(nn.Module):    # Standard bottleneck    def __init__(self, c1, c2, shortcut=True, g=1, e=0.5):  # ch_in, ch_out, shortcut, groups, expansion        super(Bottleneck, self).__init__()        c_ = int(c2 * e)  # hidden channels        self.cv1 = Conv(c1, c_, 1, 1)        self.cv2 = Conv(c_, c2, 3, 1, g=g)        self.add = shortcut and c1 == c2    def forward(self, x):        return x + self.cv2(self.cv1(x)) if self.add else self.cv2(self.cv1(x))å‚æ•°è¯´æ˜ï¼š  c1ï¼šbottleneck ç»“æ„çš„è¾“å…¥é€šé“ç»´åº¦ï¼›  c2ï¼šbottleneck ç»“æ„çš„è¾“å‡ºé€šé“ç»´åº¦ï¼›  shortcutï¼šæ˜¯å¦ç»™bottleneck ç»“æ„æ·»åŠ shortcutè¿æ¥ï¼Œæ·»åŠ åå³ä¸ºResNetæ¨¡å—ï¼›  gï¼šgroupsï¼Œé€šé“åˆ†ç»„çš„å‚æ•°ï¼Œè¾“å…¥é€šé“æ•°ã€è¾“å‡ºé€šé“æ•°å¿…é¡»åŒæ—¶æ»¡è¶³è¢«groupsæ•´é™¤ï¼›  eï¼šexpansion: bottleneck ç»“æ„ä¸­çš„ç“¶é¢ˆéƒ¨åˆ†çš„é€šé“è†¨èƒ€ç‡ï¼Œä½¿ç”¨0.5å³ä¸ºå˜ä¸ºè¾“å…¥çš„1/2ï¼›ç“¶é¢ˆå±‚çš„ç“¶é¢ˆä¸»è¦ä½“ç°åœ¨é€šé“æ•°ä¸Šé¢ã€‚ä¸€èˆ¬ 1 x 1 å·ç§¯å…·æœ‰å¾ˆå¼ºçš„çµæ´»æ€§ï¼Œè¿™é‡Œç”¨äºé™ä½é€šé“æ•°ï¼Œå¦‚è†¨èƒ€ç‡ä¸º  0.5ï¼Œè‹¥è¾“å…¥é€šé“ä¸º 640ï¼Œé‚£ä¹ˆç»è¿‡1 x 1 çš„å·ç§¯å±‚ä¹‹åå˜ä¸º 320ï¼›ç»è¿‡ 3x3 ä¹‹åå˜ä¸ºè¾“å‡ºçš„é€šé“æ•°ï¼Œè¿™æ ·å‚æ•°é‡ä¼šå¤§é‡å‡å°‘ã€‚ç„¶åä»‹ç» CSP Bottleneckã€‚  CSP Bottleneck: https://github.com/WongKinYiu/CrossStagePartialNetworksclass BottleneckCSP(nn.Module):    # CSP Bottleneck https://github.com/WongKinYiu/CrossStagePartialNetworks    def __init__(self, c1, c2, n=1, shortcut=True, g=1, e=0.5):  # ch_in, ch_out, number, shortcut, groups, expansion        super(BottleneckCSP, self).__init__()        c_ = int(c2 * e)  # hidden channels        self.cv1 = Conv(c1, c_, 1, 1)        self.cv2 = nn.Conv2d(c1, c_, 1, 1, bias=False)        self.cv3 = nn.Conv2d(c_, c_, 1, 1, bias=False)        self.cv4 = Conv(2 * c_, c2, 1, 1)        self.bn = nn.BatchNorm2d(2 * c_)  # applied to cat(cv2, cv3)        self.act = nn.LeakyReLU(0.1, inplace=True)        self.m = nn.Sequential(*[Bottleneck(c_, c_, shortcut, g, e=1.0) for _ in range(n)])    def forward(self, x):        y1 = self.cv3(self.m(self.cv1(x)))        y2 = self.cv2(x)        return self.cv4(self.act(self.bn(torch.cat((y1, y2), dim=1))))å‚æ•°è¯´æ˜ï¼š  c1ï¼šBottleneckCSP ç»“æ„çš„è¾“å…¥é€šé“ç»´åº¦ï¼›  c2ï¼šBottleneckCSP ç»“æ„çš„è¾“å‡ºé€šé“ç»´åº¦ï¼›  nï¼šbottleneck ç»“æ„ ç»“æ„çš„ä¸ªæ•°ï¼›  shortcutï¼šæ˜¯å¦ç»™bottleneck ç»“æ„æ·»åŠ shortcutè¿æ¥ï¼Œæ·»åŠ åå³ä¸ºResNetæ¨¡å—ï¼›  gï¼šgroupsï¼Œé€šé“åˆ†ç»„çš„å‚æ•°ï¼Œè¾“å…¥é€šé“æ•°ã€è¾“å‡ºé€šé“æ•°å¿…é¡»åŒæ—¶æ»¡è¶³è¢«groupsæ•´é™¤ï¼›  eï¼šexpansion: bottleneck ç»“æ„ä¸­çš„ç“¶é¢ˆéƒ¨åˆ†çš„é€šé“è†¨èƒ€ç‡ï¼Œä½¿ç”¨0.5å³ä¸ºå˜ä¸ºè¾“å…¥çš„12ï¼›  torch.cat((y1, y2), dim=1)ï¼šè¿™é‡Œæ˜¯æŒ‡å®šåœ¨ç¬¬1ä¸ªç»´åº¦ä¸Šè¿›è¡Œåˆå¹¶ï¼Œå³åœ¨channelç»´åº¦ä¸Šåˆå¹¶;  c_ï¼šBottleneckCSP ç»“æ„çš„ä¸­é—´å±‚çš„é€šé“æ•°ï¼Œç”±è†¨èƒ€ç‡eå†³å®šã€‚Cross Stage Partial Network (CSPNet) å°±æ˜¯ä»ç½‘ç»œç»“æ„è®¾è®¡çš„è§’åº¦æ¥è§£å†³ä»¥å¾€å·¥ä½œåœ¨æ¨ç†è¿‡ç¨‹ä¸­éœ€è¦å¾ˆå¤§è®¡ç®—é‡çš„é—®é¢˜ã€‚CSP bottleneck ç»“æ„åœ¨ Bottleneck éƒ¨åˆ†å­˜åœ¨ä¸€ä¸ªå¯ä¿®æ”¹çš„å‚æ•° nï¼Œæ ‡è¯†ä½¿ç”¨çš„Bottleneckç»“æ„ä¸ªæ•°ã€‚è¿™ä¸€æ¡ä¹Ÿæ˜¯æˆ‘ä»¬çš„ä¸»åˆ†æ”¯ï¼Œæ˜¯å¯¹æ®‹å·®è¿›è¡Œå­¦ä¹ çš„ä¸»è¦ç»“æ„ï¼Œå³ä¾§åˆ†æ”¯nn.Conv2dæ˜¯shortcutåˆ†æ”¯ã€‚å€˜è‹¥è¯¥å±‚åé¢æœ‰BNå±‚çš„è¯ï¼Œä¸€èˆ¬é€‰æ‹©bias=Falseï¼ˆå› ä¸ºBNåŒ…å«åç½®ï¼‰ï¼Œè€Œåé¢æ²¡æœ‰çš„æ—¶å€™bias=Trueã€‚ä¸Šé¢çš„ Conv å±‚å’Œ CSPNet ä¹Ÿæ˜¯è¿™ä¸ªè§„å¾‹1.3. headYOLO V5 ä½¿ç”¨çš„ head æ˜¯ PANetã€‚  PANet: https://arxiv.org/pdf/1803.01534.pdf2. è®­ç»ƒ2.1. å‡†å¤‡æ ‡ç­¾yoloæ ¼å¼çš„æ ‡ç­¾ä¸ºtxtæ ¼å¼çš„æ–‡ä»¶ï¼Œæ–‡ä»¶åè·Ÿå¯¹åº”çš„å›¾ç‰‡åä¸€æ ·ï¼Œé™¤äº†åç¼€æ”¹ä¸ºäº†.txtã€‚ å…·ä½“æ ¼å¼å¦‚ä¸‹ï¼š  æ¯ä¸ªç›®æ ‡ä¸€è¡Œï¼Œæ•´ä¸ªå›¾ç‰‡æ²¡æœ‰ç›®æ ‡çš„è¯ä¸éœ€è¦æœ‰txtæ–‡ä»¶  æ¯è¡Œçš„æ ¼å¼ä¸ºclass_num x_center y_center width height  å…¶ä¸­class_numå–å€¼ä¸º0è‡³total_class - 1ï¼Œæ¡†çš„å››ä¸ªå€¼x_center y_center width heightæ˜¯ç›¸å¯¹äºå›¾ç‰‡åˆ†è¾¨ç‡å¤§å°æ­£åˆ™åŒ–çš„0-1ä¹‹é—´çš„æ•°ï¼Œå·¦ä¸Šè§’ä¸º(0,0)ï¼Œå³ä¸‹è§’ä¸º(1,1)  2.2. æ•°æ®å­˜æ”¾ä½ç½®yolov5çš„ä»£ç ä¼šæ ¹æ®å›¾ç‰‡æ‰¾æ ‡ç­¾ï¼Œå…·ä½“å½¢å¼çš„æŠŠå›¾ç‰‡è·¯å¾„/images/*.jpgæ›¿æ¢ä¸º/labels/*.txtï¼Œæ‰€ä»¥è¦æ–°å»ºä¸¤ä¸ªæ–‡ä»¶å¤¹ï¼Œä¸€ä¸ªåä¸ºimageså­˜æ”¾å›¾ç‰‡ï¼Œä¸€ä¸ªåä¸ºlabelså­˜æ”¾æ ‡ç­¾txtæ–‡ä»¶ï¼Œå¦‚åˆ†è®­ç»ƒé›†ã€éªŒè¯é›†å’Œæµ‹è¯•é›†çš„è¯ï¼Œè¿˜è¦å†æ–°å»ºå„è‡ªçš„æ–‡ä»¶å¤¹ï¼Œå¦‚ï¼šcoco|--images   |--train2017   |--val2017|--labels   |--train2017   |--val20172.3. å‡†å¤‡æ¨¡å‹è‡ªå®šä¹‰è®­ç»ƒéœ€è¦ä¿®æ”¹.yamlæ–‡ä»¶ï¼Œä¸€ä¸ªæ˜¯æ¨¡å‹æ–‡ä»¶(å¯é€‰)ï¼Œä¸€ä¸ªæ˜¯æ•°æ®æ–‡ä»¶ã€‚  æ¨¡å‹æ–‡ä»¶(å¯é€‰):å¯ä»¥æ ¹æ®ä½ é€‰æ‹©è®­ç»ƒçš„æ¨¡å‹ï¼Œç›´æ¥ä¿®æ”¹./modelsé‡Œçš„yolov5s.yaml / yolov5m.yaml / yolov5l.yaml / yolov5x.yamlæ–‡ä»¶ï¼Œåªéœ€è¦å°†nc: 80ä¸­çš„80ä¿®æ”¹ä¸ºä½ æ•°æ®é›†çš„ç±»åˆ«æ•°ã€‚å…¶ä»–ä¸ºæ¨¡å‹ç»“æ„ä¸éœ€è¦æ”¹ã€‚ æ³¨æ„ :å½“éœ€è¦éšæœºåˆå§‹åŒ–æ—¶æ‰ä¼šä½¿ç”¨æœ¬æ–‡ä»¶ï¼Œå®˜æ–¹æ¨èä½¿ç”¨é¢„è®­ç»ƒæƒé‡åˆå§‹åŒ–ã€‚  æ•°æ®æ–‡ä»¶:æ ¹æ®./dataæ–‡ä»¶å¤¹é‡Œçš„cocoæ•°æ®æ–‡ä»¶ï¼Œåˆ¶ä½œè‡ªå·±çš„æ•°æ®æ–‡ä»¶ï¼Œåœ¨æ•°æ®æ–‡ä»¶ä¸­å®šä¹‰è®­ç»ƒé›†ã€éªŒè¯é›†ã€æµ‹è¯•é›†è·¯å¾„ï¼›å®šä¹‰æ€»ç±»åˆ«æ•°ï¼›å®šä¹‰ç±»åˆ«åç§°# train and val data as 1) directory: path/images/, 2) file: path/images.txt, or 3) list: [path1/images/, path2/images/]train: /coco128/images/train2017/val: /coco128/images/val2017/test:/coco128/images/test2017/# number of classesnc: 80# class namesnames: ['person', 'bicycle', 'car', 'motorcycle', 'airplane', 'bus', 'train', 'truck', 'boat', 'traffic light',        'fire hydrant', 'stop sign', 'parking meter', 'bench', 'bird', 'cat', 'dog', 'horse', 'sheep', 'cow',        'elephant', 'bear', 'zebra', 'giraffe', 'backpack', 'umbrella', 'handbag', 'tie', 'suitcase', 'frisbee',        'skis', 'snowboard', 'sports ball', 'kite', 'baseball bat', 'baseball glove', 'skateboard', 'surfboard',        'tennis racket', 'bottle', 'wine glass', 'cup', 'fork', 'knife', 'spoon', 'bowl', 'banana', 'apple',        'sandwich', 'orange', 'broccoli', 'carrot', 'hot dog', 'pizza', 'donut', 'cake', 'chair', 'couch',        'potted plant', 'bed', 'dining table', 'toilet', 'tv', 'laptop', 'mouse', 'remote', 'keyboard',         'cell phone', 'microwave', 'oven', 'toaster', 'sink', 'refrigerator', 'book', 'clock', 'vase', 'scissors',         'teddy bear', 'hair drier', 'toothbrush']2.4. è¿›è¡Œè®­ç»ƒè®­ç»ƒç›´æ¥è¿è¡Œtrain.pyå³å¯ï¼Œåé¢æ ¹æ®éœ€è¦åŠ ä¸ŠæŒ‡ä»¤å‚æ•°ï¼Œâ€“weightsæŒ‡å®šæƒé‡ï¼Œâ€“dataæŒ‡å®šæ•°æ®æ–‡ä»¶ï¼Œâ€“batch-sizeæŒ‡å®šbatchå¤§å°ï¼Œâ€“epochsæŒ‡å®šepochã€‚ä¸€ä¸ªç®€å•çš„è®­ç»ƒè¯­å¥ï¼š# ä½¿ç”¨yolov5sæ¨¡å‹è®­ç»ƒcoco128æ•°æ®é›†5ä¸ªepochsï¼Œbatch sizeè®¾ä¸º16python train.py --batch 16 --epochs 5 --data ./data/coco128.yaml --weights ./weights/yolov5s.ptè®­ç»ƒæŒ‡ä»¤è¯´æ˜:æœ‰å‚ï¼š  --weights (â­)æŒ‡å®šæƒé‡ï¼Œå¦‚æœä¸åŠ æ­¤å‚æ•°ä¼šé»˜è®¤ä½¿ç”¨COCOé¢„è®­çš„yolov5s.ptï¼Œ--weights ''åˆ™ä¼šéšæœºåˆå§‹åŒ–æƒé‡  --cfg æŒ‡å®šæ¨¡å‹æ–‡ä»¶  --data (â­)æŒ‡å®šæ•°æ®æ–‡ä»¶  --hypæŒ‡å®šè¶…å‚æ•°æ–‡ä»¶  --epochs (â­)æŒ‡å®šepochæ•°ï¼Œé»˜è®¤300  --batch-size (â­)æŒ‡å®šbatchå¤§å°ï¼Œé»˜è®¤16ï¼Œå®˜æ–¹æ¨èè¶Šå¤§è¶Šå¥½ï¼Œç”¨ä½ GPUèƒ½æ‰¿å—æœ€å¤§çš„batch sizeï¼Œå¯ç®€å†™ä¸ºâ€“batch  --img-size æŒ‡å®šè®­ç»ƒå›¾ç‰‡å¤§å°ï¼Œé»˜è®¤640ï¼Œå¯ç®€å†™ä¸ºâ€“img  --name æŒ‡å®šç»“æœæ–‡ä»¶åï¼Œé»˜è®¤result.txt  --device æŒ‡å®šè®­ç»ƒè®¾å¤‡ï¼Œå¦‚â€“device 0,1,2,3  --local_rank åˆ†å¸ƒå¼è®­ç»ƒå‚æ•°ï¼Œä¸è¦è‡ªå·±ä¿®æ”¹ï¼  --log-imgs W&amp;Bçš„å›¾ç‰‡æ•°é‡ï¼Œé»˜è®¤16ï¼Œæœ€å¤§100  --workers æŒ‡å®šdataloaderçš„workersæ•°é‡ï¼Œé»˜è®¤8  --project è®­ç»ƒç»“æœå­˜æ”¾ç›®å½•ï¼Œé»˜è®¤./runs/train/      --name è®­ç»ƒç»“æœå­˜æ”¾åï¼Œé»˜è®¤expæ— å‚ï¼š    --rectçŸ©å½¢è®­ç»ƒ  --resume ç»§ç»­è®­ç»ƒï¼Œé»˜è®¤ä»æœ€åä¸€æ¬¡è®­ç»ƒç»§ç»­  --nosave è®­ç»ƒä¸­é€”ä¸å­˜å‚¨æ¨¡å‹ï¼Œåªå­˜æœ€åä¸€ä¸ªcheckpoint  --notest è®­ç»ƒä¸­é€”ä¸åœ¨éªŒè¯é›†ä¸Šæµ‹è¯•ï¼Œè®­ç»ƒå®Œæ¯•å†æµ‹è¯•  --noautoanchor å…³é—­è‡ªåŠ¨é”šç‚¹æ£€æµ‹  --evolveè¶…å‚æ•°æ¼”å˜  --bucketä½¿ç”¨gsutil bucket  --cache-images ä½¿ç”¨ç¼“å­˜å›¾ç‰‡è®­ç»ƒ  --image-weights è®­ç»ƒä¸­å¯¹å›¾ç‰‡åŠ æƒé‡  --multi-scale è®­ç»ƒå›¾ç‰‡å¤§å°+/-50%å˜æ¢  --single-cls å•ç±»è®­ç»ƒ  --adam ä½¿ç”¨torch.optim.Adam()ä¼˜åŒ–å™¨  --sync-bn ä½¿ç”¨SyncBatchNormï¼Œåªåœ¨åˆ†å¸ƒå¼è®­ç»ƒå¯ç”¨  --log-artifacts è¾“å‡ºartifacts,å³æ¨¡å‹æ•ˆæœ  --exist-ok å¦‚è®­ç»ƒç»“æœå­˜æ”¾è·¯å¾„é‡åï¼Œä¸è¦†ç›–å·²å­˜åœ¨çš„æ–‡ä»¶å¤¹  --quad ä½¿ç”¨å››åˆ†dataloader3. æµ‹è¯•é¦–å…ˆæ˜ç¡®ï¼Œæ¨ç†æ˜¯ç›´æ¥æ£€æµ‹å›¾ç‰‡ï¼Œè€Œæµ‹è¯•æ˜¯éœ€è¦å›¾ç‰‡æœ‰ç›¸åº”çš„çœŸå®æ ‡ç­¾çš„ï¼Œç›¸å½“äºæ£€æµ‹å›¾ç‰‡åå†æŠŠæ¨ç†æ ‡ç­¾å’ŒçœŸå®æ ‡ç­¾åšmAPè®¡ç®—ã€‚ä½¿ç”¨./weights/yolov5x.ptæƒé‡æ£€æµ‹./data/coco.yamlé‡Œå®šä¹‰çš„æµ‹è¯•é›†ï¼Œå›¾ç‰‡åˆ†è¾¨ç‡è®¾ä¸º672ã€‚python test.py --weights ./weights/yolov5x.pt --data ./data/coco.yaml --img 672æœ‰å‚ï¼š  --weights(â­) æµ‹è¯•æ‰€ç”¨æƒé‡ï¼Œé»˜è®¤yolov5sCOCOé¢„è®­ç»ƒæƒé‡æ¨¡å‹  --data(â­) æµ‹è¯•æ‰€ç”¨çš„.yamlæ–‡ä»¶ï¼Œé»˜è®¤ä½¿ç”¨./data/coco128.yaml  --batch-size æµ‹è¯•ç”¨çš„batchå¤§å°ï¼Œé»˜è®¤32ï¼Œè¿™ä¸ªå¤§å°å¯¹ç»“æœæ— å½±å“  --img-size æµ‹è¯•é›†åˆ†è¾¨ç‡å¤§å°ï¼Œé»˜è®¤640ï¼Œæµ‹è¯•å»ºè®®ä½¿ç”¨æ›´é«˜åˆ†è¾¨ç‡  --conf-thresç›®æ ‡ç½®ä¿¡åº¦é˜ˆå€¼ï¼Œé»˜è®¤0.001  --iou-thresNMSçš„IOUé˜ˆå€¼ï¼Œé»˜è®¤0.65  --task æŒ‡å®šä»»åŠ¡æ¨¡å¼ï¼Œtrain, val, æˆ–è€…test,æµ‹è¯•çš„è¯ç”¨â€“task test  --device æŒ‡å®šè®¾å¤‡ï¼Œå¦‚â€“device 0 â€“device 0,1,2,3 â€“device cpu  --project æŒ‡å®šç»“æœå­˜æ”¾è·¯å¾„ï¼Œé»˜è®¤./runs/test/  --name æŒ‡å®šç»“æœå­˜æ”¾å,é»˜è®¤expæ— å‚ï¼š  --single-cls è§†ä¸ºåªæœ‰ä¸€ç±»  --augment å¢å¼ºè¯†åˆ«  --verbose è¾“å‡ºå„ä¸ªç±»åˆ«çš„mAP  --save-txt è¾“å‡ºæ ‡ç­¾ç»“æœ(yoloæ ¼å¼)  --save-hybrid è¾“å‡ºæ ‡ç­¾+é¢„æµ‹æ··åˆç»“æœåˆ°txt  --save-conf ä¿å­˜ç½®ä¿¡åº¦è‡³è¾“å‡ºæ–‡ä»¶ä¸­  --save-json ä¿å­˜ç»“æœä¸ºjson  --exist-ok è‹¥é‡åä¸è¦†ç›–4. æ£€æµ‹4.1. å¿«é€Ÿæ£€æµ‹ç›´æ¥æ‰§è¡Œdetect.pyï¼ŒæŒ‡å®šä¸€ä¸‹è¦æ¨ç†çš„ç›®å½•å³å¯ï¼Œå¦‚æœæ²¡æœ‰æŒ‡å®šæƒé‡ï¼Œä¼šè‡ªåŠ¨ä¸‹è½½é»˜è®¤COCOé¢„è®­ç»ƒæƒé‡æ¨¡å‹ã€‚æ¨ç†ç»“æœé»˜è®¤ä¼šä¿å­˜åˆ°./runs/detectä¸­ã€‚æ³¨æ„ï¼šæ¯æ¬¡æ¨ç†ä¼šæ¸…ç©ºoutputæ–‡ä»¶å¤¹ï¼Œæ³¨æ„ç•™å­˜æ¨ç†ç»“æœã€‚4.2. å¿«é€Ÿæ¨ç†é‡‡ç”¨ --source æŒ‡å®šæ£€æµ‹æºï¼Œä»¥ä¸‹ä»»æ„ä¸€ç§ç±»å‹éƒ½æ”¯æŒã€‚python detect.py --source 0  # æœ¬æœºé»˜è®¤æ‘„åƒå¤´python detect.py --source file.jpg  # å›¾ç‰‡ python detect.py --source file.mp4  # è§†é¢‘python detect.py --source path/  # æ–‡ä»¶å¤¹ä¸‹æ‰€æœ‰åª’ä½“python detect.py --source path/*.jpg  # æ–‡ä»¶å¤¹ä¸‹æŸç±»å‹åª’ä½“ 4.3. è‡ªå®šä¹‰æ£€æµ‹ä½¿ç”¨æƒé‡./weights/yolov5s.ptå»æ¨ç†./data/imagesæ–‡ä»¶å¤¹ä¸‹çš„æ‰€æœ‰åª’ä½“ï¼Œå¹¶ä¸”æ¨ç†ç½®ä¿¡åº¦é˜ˆå€¼è®¾ä¸º0.5:python detect.py --source ./data/images/ --weights ./weights/yolov5s.pt --conf 0.54.4. æ£€æµ‹å‚æ•°è‡ªå·±æ ¹æ®éœ€è¦åŠ å„ç§æŒ‡ä»¤ã€‚æœ‰å‚ï¼š  --source(â­) æŒ‡å®šæ£€æµ‹æ¥æº  --weights æŒ‡å®šæƒé‡ï¼Œä¸æŒ‡å®šçš„è¯ä¼šä½¿ç”¨yolov5s.pté¢„è®­ç»ƒæƒé‡  --img-size æŒ‡å®šæ¨ç†å›¾ç‰‡åˆ†è¾¨ç‡ï¼Œé»˜è®¤640ï¼Œä¹Ÿå¯ä½¿ç”¨â€“img  --conf-thres æŒ‡å®šç½®ä¿¡åº¦é˜ˆå€¼ï¼Œé»˜è®¤0.4ï¼Œä¹Ÿå¯ä½¿ç”¨â€“conf  --iou-thres æŒ‡å®šNMS(éæå¤§å€¼æŠ‘åˆ¶)çš„IOUé˜ˆå€¼ï¼Œé»˜è®¤0.5  --device æŒ‡å®šè®¾å¤‡ï¼Œå¦‚--device 0 --device 0,1,2,3 --device cpu  --classes åªæ£€æµ‹ç‰¹å®šçš„ç±»ï¼Œå¦‚--classes 0 2 4 6 8  --project æŒ‡å®šç»“æœå­˜æ”¾è·¯å¾„ï¼Œé»˜è®¤./runs/detect/  --name æŒ‡å®šç»“æœå­˜æ”¾å,é»˜è®¤expæ— å‚ï¼š  --view-img å›¾ç‰‡å½¢å¼æ˜¾ç¤ºç»“æœ  --save-txt è¾“å‡ºæ ‡ç­¾ç»“æœ(yoloæ ¼å¼)  --save-conf åœ¨è¾“å‡ºæ ‡ç­¾ç»“æœtxtä¸­åŒæ ·å†™å…¥æ¯ä¸ªç›®æ ‡çš„ç½®ä¿¡åº¦  --agnostic-nms ä½¿ç”¨agnostic NMS(å‰èƒŒæ™¯)  --augment å¢å¼ºè¯†åˆ«ï¼Œé€Ÿåº¦ä¼šæ…¢ä¸å°‘ã€‚è¯¦æƒ…  --update æ›´æ–°æ‰€æœ‰æ¨¡å‹  --exist-ok è‹¥é‡åä¸è¦†ç›–5. å…¶å®ƒBFLOPS çš„æ¦‚å¿µï¼šhttps://blog.csdn.net/weixin_38145317/article/details/1062814625.1. Citation"
  },
  
  {
    "title": "è®¡ç®—æœºè§†è§‰ï¼ˆOne-Stage ç›®æ ‡æ£€æµ‹ï¼‰",
    "url": "/posts/CV-object-detection-1stage/",
    "categories": "Academic, Knowledge",
    "tags": "deep learning, computer vision",
    "date": "2021-06-08 09:08:49 +0800",
    





    
    "snippet": "æœ¬æ–‡ä»‹ç»äº†è®¡ç®—æœºè§†è§‰ä¸­å•é˜¶æ®µç›®æ ‡æ£€æµ‹é—®é¢˜çš„è§£å†³æ–¹æ³•ï¼Œå³ Yolo ç³»åˆ—ã€‚  1. å‰è¨€  2. YOLO V1          2.1. ç½‘ç»œç»“æ„      2.2. è¾“å…¥      2.3. è¾“å‡º      2.4. æ„é€ è®­ç»ƒæ ·æœ¬      2.5. æŸå¤±å‡½æ•°      2.6. è®­ç»ƒ      2.7. æµ‹è¯•é¢„æµ‹      2.8. ç»“è®º        3. YOLO V2      ...",
    "content": "æœ¬æ–‡ä»‹ç»äº†è®¡ç®—æœºè§†è§‰ä¸­å•é˜¶æ®µç›®æ ‡æ£€æµ‹é—®é¢˜çš„è§£å†³æ–¹æ³•ï¼Œå³ Yolo ç³»åˆ—ã€‚  1. å‰è¨€  2. YOLO V1          2.1. ç½‘ç»œç»“æ„      2.2. è¾“å…¥      2.3. è¾“å‡º      2.4. æ„é€ è®­ç»ƒæ ·æœ¬      2.5. æŸå¤±å‡½æ•°      2.6. è®­ç»ƒ      2.7. æµ‹è¯•é¢„æµ‹      2.8. ç»“è®º        3. YOLO V2          3.1. ç½‘ç»œç»“æ„      3.2. æ‰¹å½’ä¸€åŒ–      3.3. é«˜åˆ†è¾¨ç‡åˆ†ç±»å™¨      3.4. å…ˆéªŒæ¡†ï¼ˆanchorï¼‰      3.5. çº¦æŸé¢„æµ‹æ¡†ä½ç½®      3.6. pass through      3.7. è®­ç»ƒ      3.8. æµ‹è¯•é¢„æµ‹        4. YOLO V3          4.1. ç½‘ç»œç»“æ„      4.2. å¤šå°ºåº¦ç‰¹å¾      4.3. æŸå¤±å‡½æ•°        5. å‚è€ƒæ–‡çŒ®1. å‰è¨€Yoloï¼ŒSSD è¿™ç±» one-stage ç®—æ³•ï¼Œä»…ä»…ä½¿ç”¨ä¸€ä¸ªå·ç§¯ç¥ç»ç½‘ç»œ CNN ç›´æ¥é¢„æµ‹ä¸åŒç›®æ ‡çš„ç±»åˆ«ä¸ä½ç½®ã€‚ä¸€é˜¶æ®µæ–¹æ³•çš„é€Ÿåº¦å¿«ï¼Œä½†æ˜¯å‡†ç¡®æ€§è¦ä½ä¸€äº›ã€‚2. YOLO V1YOLOæ„æ€æ˜¯You Only Look Onceï¼Œåˆ›é€ æ€§çš„å°†å€™é€‰åŒºå’Œå¯¹è±¡è¯†åˆ«è¿™ä¸¤ä¸ªé˜¶æ®µåˆäºŒä¸ºä¸€ï¼Œçœ‹ä¸€çœ¼å›¾ç‰‡ï¼ˆä¸ç”¨çœ‹ä¸¤çœ¼å“¦ï¼‰å°±èƒ½çŸ¥é“æœ‰å“ªäº›å¯¹è±¡ä»¥åŠå®ƒä»¬çš„ä½ç½®ã€‚å®é™…ä¸Šï¼ŒYOLOå¹¶æ²¡æœ‰çœŸæ­£å»æ‰å€™é€‰åŒºï¼Œè€Œæ˜¯é‡‡ç”¨äº†é¢„å®šä¹‰çš„å€™é€‰åŒºï¼ˆå‡†ç¡®ç‚¹è¯´åº”è¯¥æ˜¯é¢„æµ‹åŒºï¼Œå› ä¸ºå¹¶ä¸æ˜¯Faster RCNNæ‰€é‡‡ç”¨çš„Anchorï¼‰ã€‚ä¹Ÿå°±æ˜¯å°†å›¾ç‰‡åˆ’åˆ†ä¸º $7\\times 7=49$ ä¸ªç½‘æ ¼ï¼ˆgridï¼‰ï¼Œæ¯ä¸ªç½‘æ ¼å…è®¸é¢„æµ‹å‡º 2 ä¸ªè¾¹æ¡†ï¼ˆbounding boxï¼ŒåŒ…å«æŸä¸ªå¯¹è±¡çš„çŸ©å½¢æ¡†ï¼‰ï¼Œæ€»å…± $49\\times 2=98$ ä¸ª bounding boxã€‚å¯ä»¥ç†è§£ä¸º 98 ä¸ªå€™é€‰åŒºï¼Œå®ƒä»¬å¾ˆç²—ç•¥çš„è¦†ç›–äº†å›¾ç‰‡çš„æ•´ä¸ªåŒºåŸŸã€‚2.1. ç½‘ç»œç»“æ„ç½‘ç»œç»“æ„å€Ÿé‰´äº† GoogLeNet ã€‚24ä¸ªå·ç§¯å±‚ï¼Œ2ä¸ªå…¨é“¾æ¥å±‚ã€‚ï¼ˆç”¨1Ã—1 reduction layers ç´§è·Ÿ 3Ã—3 convolutional layers å–ä»£Goolenetçš„ inception modules ï¼‰2.2. è¾“å…¥è¾“å…¥å°±æ˜¯åŸå§‹å›¾åƒï¼Œå”¯ä¸€çš„è¦æ±‚æ˜¯ç¼©æ”¾åˆ° $448\\times 448$ çš„å¤§å°ã€‚ä¸»è¦æ˜¯å› ä¸ºYOLOçš„ç½‘ç»œä¸­ï¼Œå·ç§¯å±‚æœ€åæ¥äº†ä¸¤ä¸ªå…¨è¿æ¥å±‚ï¼Œå…¨è¿æ¥å±‚æ˜¯è¦æ±‚å›ºå®šå¤§å°çš„å‘é‡ä½œä¸ºè¾“å…¥ï¼Œæ‰€ä»¥å€’æ¨å›å»ä¹Ÿå°±è¦æ±‚åŸå§‹å›¾åƒæœ‰å›ºå®šçš„å°ºå¯¸ã€‚2.3. è¾“å‡ºè¾“å‡ºæ˜¯ä¸€ä¸ª $7\\times 7\\times 30$ çš„å¼ é‡ã€‚$7\\times 7$ å¯¹åº”åŸå§‹å›¾åƒçš„ç½‘æ ¼ï¼Œ30ç»´å‘é‡ = 20ä¸ªå¯¹è±¡çš„æ¦‚ç‡ + 2ä¸ªbounding box * 4ä¸ªåæ ‡ + 2ä¸ªbounding boxçš„ç½®ä¿¡åº¦ã€‚å‰ 20 ç»´ï¼Œone hot ç¼–ç ã€‚å› ä¸ºYOLOæ”¯æŒè¯†åˆ«20ç§ä¸åŒçš„å¯¹è±¡ï¼ˆäººã€é¸Ÿã€çŒ«ã€æ±½è½¦ã€æ¤…å­ç­‰ï¼‰ï¼Œæ‰€ä»¥è¿™é‡Œæœ‰20ä¸ªå€¼è¡¨ç¤ºè¯¥ç½‘æ ¼ä½ç½®å­˜åœ¨ä»»ä¸€ç§å¯¹è±¡çš„æ¦‚ç‡ã€‚ä¸­ 2 ç»´ï¼Œ2 ä¸ª bounding box çš„ç½®ä¿¡åº¦ã€‚ = è¯¥ bounding box å†…æœ‰å¯¹è±¡çš„æ¦‚ç‡ * è¯¥ bounding box ä¸è¯¥å¯¹è±¡å®é™… bounding box çš„ IOUã€‚å 8 ç»´ï¼Œ2 ä¸ª bounding box çš„ä½ç½®ã€‚æ¯ä¸ª bounding box éœ€è¦ 4 ä¸ªæ•°å€¼æ¥è¡¨ç¤ºå…¶ä½ç½®ï¼Œ(Center_x, Center_y, width, height)ï¼Œ2 ä¸ª bounding box å…±éœ€è¦ 8 ä¸ªæ•°å€¼æ¥è¡¨ç¤ºå…¶ä½ç½®ã€‚$7\\times 7$ ç½‘æ ¼ï¼Œæ¯ä¸ªç½‘æ ¼ 2 ä¸ª bounding boxï¼Œå¯¹ $448\\times 448$ è¾“å…¥å›¾åƒæ¥è¯´è¦†ç›–ç²’åº¦æœ‰ç‚¹ç²—ã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥è®¾ç½®æ›´å¤šçš„ç½‘æ ¼ä»¥åŠæ›´å¤šçš„bounding boxã€‚è®¾ç½‘æ ¼æ•°é‡ä¸º $S\\times S$ï¼Œæ¯ä¸ªç½‘æ ¼äº§ç”Ÿ B ä¸ªè¾¹æ¡†ï¼ˆ4 ä½ç½® + 1 ç½®ä¿¡åº¦ï¼‰ï¼Œç½‘ç»œæ”¯æŒè¯†åˆ« C ä¸ªä¸åŒçš„å¯¹è±¡ã€‚è¿™æ—¶ï¼Œè¾“å‡ºçš„å‘é‡é•¿åº¦ä¸ºï¼š $C + B\\times (4+1)$ æ•´ä¸ªè¾“å‡ºçš„tensorå°±æ˜¯ï¼š $S\\times S\\times (C + B\\times (4+1))$ã€‚2.4. æ„é€ è®­ç»ƒæ ·æœ¬  20 ä¸ªå¯¹è±¡åˆ†ç±»çš„æ¦‚ç‡å¯¹äºè¾“å…¥å›¾åƒä¸­çš„æ¯ä¸ªå¯¹è±¡ï¼Œå…ˆæ‰¾åˆ°å…¶ä¸­å¿ƒç‚¹ã€‚ä¸­å¿ƒç‚¹è½åœ¨æŸä¸ªç½‘æ ¼å†…ï¼Œè¯¥ç½‘æ ¼å¯¹åº” 30 ç»´å‘é‡ä¸­çš„ 1 ç»´ç½® 1ï¼Œå…¶å®ƒç»´åº¦ç½® 0ï¼ˆä¹Ÿå³ä¸€ä¸ªç½‘æ ¼åªèƒ½é¢„æµ‹ 1 ä¸ªå¯¹è±¡ï¼Œç½‘ç»œä¸€å…±èƒ½ä»ä¸€å¼ å›¾ç‰‡ä¸­æ£€æµ‹49ä¸ªå¯¹è±¡ï¼‰ã€‚è¿™å°±æ˜¯æ‰€è°“çš„â€ä¸­å¿ƒç‚¹æ‰€åœ¨çš„ç½‘æ ¼å¯¹é¢„æµ‹è¯¥å¯¹è±¡è´Ÿè´£â€ã€‚  2 ä¸ª bounding box çš„ä½ç½®è®­ç»ƒæ ·æœ¬çš„ bounding box ä½ç½®åº”è¯¥å¡«å†™å¯¹è±¡å®é™…çš„ bounding boxï¼Œä½†ä¸€ä¸ªå¯¹è±¡å¯¹åº”äº† 2 ä¸ª bounding boxï¼Œè¯¥å¡«å“ªä¸€ä¸ªå‘¢ï¼Ÿä¸Šé¢è®¨è®ºè¿‡ï¼Œéœ€è¦æ ¹æ®ç½‘ç»œè¾“å‡ºçš„ bounding box ä¸å¯¹è±¡å®é™… bounding box çš„ IOU æ¥é€‰æ‹©ï¼Œæ‰€ä»¥è¦åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­åŠ¨æ€å†³å®šåˆ°åº•å¡«å“ªä¸€ä¸ª bounding boxã€‚å‚è€ƒä¸‹é¢ç¬¬ 3 ç‚¹ã€‚  2 ä¸ª bounding box çš„ç½®ä¿¡åº¦ä¸Šé¢è®¨è®ºè¿‡ç½®ä¿¡åº¦å…¬å¼\\[Confidence = Pr(Object) * IOU^{truth}_{pre}\\]2 ä¸ª bounding box çš„ $IOU$ï¼Œå“ªä¸ªæ¯”è¾ƒå¤§å°±ç”±å“ªä¸ª bounding box è´Ÿè´£é¢„æµ‹è¯¥å¯¹è±¡æ˜¯å¦å­˜åœ¨ï¼Œç›¸åº”çš„ $P(Object)=1$ï¼Œ$Confidence = IOU$ï¼Œè¯¥ç½‘æ ¼å…¶å®ƒ bounding box çš„ $Confidence = 0$ã€‚æ³¨æ„ï¼Œåœ¨è®­ç»ƒè¿‡ç¨‹ä¸­ç­‰ç½‘ç»œè¾“å‡ºä»¥åï¼Œæ¯”è¾ƒä¸¤ä¸ª bounding box ä¸è‡ªè¡Œè½¦å®é™…ä½ç½®çš„ IOUï¼Œè‡ªè¡Œè½¦çš„ä½ç½®ï¼ˆå®é™… bounding boxï¼‰æ”¾ç½®åœ¨ IOU æ¯”è¾ƒå¤§çš„é‚£ä¸ª bounding boxï¼ˆå›¾ä¸­å‡è®¾æ˜¯ bounding box1ï¼‰ï¼Œä¸”è¯¥ bounding box çš„ç½®ä¿¡åº¦è®¾ä¸º 1ã€‚2.5. æŸå¤±å‡½æ•°æŸå¤±å‡½æ•°å°±æ˜¯ç½‘ç»œå®é™…è¾“å‡ºä¸æ ‡ç­¾ä¹‹é—´çš„è¯¯å·®ï¼ŒYOLO V1 ç®€å•ç²—æš´é‡‡ç”¨ sum-squared error lossã€‚\\[\\begin{aligned}loss =&amp;\\lambda_{coord}\\sum_{i=0}^{S^2}\\sum_{j=0}^{B}[(x_i-\\hat{x}_i)^2+(y_i-\\hat{y}_i)^2]\\\\&amp;+\\lambda_{coord}\\sum_{i=0}^{S^2}\\sum_{j=0}^{B}\\mathbb{I}_{ij}^{obj}[(\\sqrt w_i-\\sqrt{\\hat{w}_i})^2+(\\sqrt h_i-\\sqrt{\\hat{h}_i})^2]\\\\&amp;+\\sum_{i=0}^{S^2}\\sum_{j=0}^{B}\\mathbb{I}_{ij}^{obj}(C_i-\\hat C_i)^2\\\\&amp;+\\lambda_{noobj}\\sum_{i=0}^{S^2}\\sum_{j=0}^{B}\\mathbb{I}_{ij}^{noobj}(C_i-\\hat C_i)^2\\\\&amp;+\\sum_{i=0}^{S^2}\\mathbb{I}_{i}^{obj}\\sum_{c\\in classes}(p_i(c) - \\hat p_i(c))^2\\end{aligned}\\]å…¶ä¸­ï¼Œä¸‰ä¸ªå¸ƒå°”ç³»æ•°ï¼š  $\\mathbb{I}_{ij}^{obj}=1$ è¡¨ç¤ºç¬¬ $i$ ä¸ªç½‘æ ¼çš„ç¬¬ $j$ ä¸ª bounding box ä¸­å­˜åœ¨å¯¹è±¡ï¼›  $\\mathbb{I}_{ij}^{noobj}=1$ è¡¨ç¤ºç¬¬ $i$ ä¸ªç½‘æ ¼çš„ç¬¬ $j$ ä¸ª bounding box ä¸­ä¸å­˜åœ¨å¯¹è±¡ï¼›  $\\mathbb{I}_{i}^{obj}=1$ è¡¨ç¤ºç¬¬ $i$ ä¸ªç½‘æ ¼ä¸­å­˜åœ¨å¯¹è±¡ã€‚åŠ å…¥è¿™äº›é¡¹çš„æ„ä¹‰åœ¨äºï¼Œåªå¯¹ç¬¦åˆå¸ƒå°”æ¡ä»¶çš„ ç½‘æ ¼ / bounding box æ‰å‚ä¸è¯¯å·®è®¡ç®—ã€‚ç¬¬ä¸€è¡Œï¼Œä¸­å¿ƒç‚¹çš„è¯¯å·®ã€‚ç¬¬äºŒè¡Œï¼Œè¾¹æ¡†å®½åº¦é«˜åº¦çš„è¯¯å·®ã€‚æ³¨æ„å–äº†å¹³æ–¹æ ¹ï¼Œè¿™æ˜¯ä¸ºäº†å¹³è¡¡å°æ¡†å’Œå¤§æ¡†çš„ä¸åŒæƒé‡ï¼Œå› ä¸ºç»å¯¹åå·®åœ¨å°æ¡†ä¸Šæ›´åŠ æ•æ„Ÿã€‚å–å¹³æ–¹æ ¹å¯ä»¥é™ä½è¿™ç§æ•æ„Ÿåº¦çš„å·®å¼‚ï¼Œä½¿å¾—è¾ƒå¤§çš„å¯¹è±¡å’Œè¾ƒå°çš„å¯¹è±¡åœ¨å°ºå¯¸è¯¯å·®ä¸Šæœ‰ç›¸ä¼¼çš„æƒé‡ç³»æ•° $\\lambda_{coord}=5$ ç”¨æ¥è°ƒé«˜ä½ç½®è¯¯å·®ï¼ˆç›¸å¯¹äºåˆ†ç±»è¯¯å·®å’Œç½®ä¿¡åº¦è¯¯å·®ï¼‰çš„æƒé‡ã€‚ç¬¬ä¸‰è¡Œï¼Œå­˜åœ¨å¯¹è±¡çš„ bounding box çš„ç½®ä¿¡åº¦è¯¯å·®ã€‚ç¬¬å››è¡Œï¼Œä¸å­˜åœ¨å¯¹è±¡çš„ bounding box çš„ç½®ä¿¡åº¦è¯¯å·®ã€‚å› ä¸ºä¸å­˜åœ¨å¯¹è±¡çš„ bounding box åº”è¯¥è€è€å®å®çš„è¯´ â€œæˆ‘è¿™é‡Œæ²¡æœ‰å¯¹è±¡â€ï¼Œä¹Ÿå°±æ˜¯è¾“å‡ºå°½é‡ä½çš„ç½®ä¿¡åº¦ã€‚å¦‚æœå®ƒä¸æ°å½“çš„è¾“å‡ºè¾ƒé«˜çš„ç½®ä¿¡åº¦ï¼Œä¼šä¸çœŸæ­£æœ‰å¯¹è±¡é¢„æµ‹çš„é‚£ä¸ª bounding box äº§ç”Ÿæ··æ·†ã€‚å³æ­£ç¡®çš„å¯¹è±¡æ¦‚ç‡æœ€å¥½æ˜¯ 1ï¼Œæ‰€æœ‰å…¶å®ƒå¯¹è±¡çš„æ¦‚ç‡æœ€å¥½æ˜¯ 0ã€‚ç³»æ•° $\\lambda_{noobj}=0.5$ ç”¨æ¥è°ƒä½ä½ç½®è¯¯å·®ï¼ˆç›¸å¯¹äºåˆ†ç±»è¯¯å·®å’Œç½®ä¿¡åº¦è¯¯å·®ï¼‰çš„æƒé‡ã€‚ç¬¬äº”è¡Œï¼Œå¯¹äºæœ‰å¯¹è±¡çš„ç½‘æ ¼ï¼ˆ$\\mathbb{I}_{i}^{obj}=1$ï¼‰ï¼Œåˆ†ç±»çš„è¯¯å·®ã€‚è¿™é‡Œå°†åˆ†ç±»çš„å‘é‡ä¸æ ‡ç­¾çš„ one-hot å‘é‡è¿›è¡Œä½œå·®ç„¶åæ±‚å¹³æ–¹ï¼Œå³æŠŠåˆ†ç±»é—®é¢˜å½“ä½œå›å½’é—®é¢˜ã€‚2.6. è®­ç»ƒæœ€åä¸€å±‚é‡‡ç”¨çº¿æ€§æ¿€æ´»å‡½æ•°ï¼Œå…¶å®ƒå±‚éƒ½æ˜¯ Leaky ReLUã€‚è®­ç»ƒè¿‡ç¨‹é‡‡ç”¨äº† drop out å’Œæ•°æ®å¢å¼ºæ¥é˜²æ­¢è¿‡æ‹Ÿåˆã€‚2.7. æµ‹è¯•é¢„æµ‹æµ‹è¯•æ—¶ï¼Œæ¯ä¸ªç½‘æ ¼é¢„æµ‹çš„ class çš„æ¦‚ç‡ï¼ˆæ¯”å¦‚å‰ 20 ç»´å‘é‡ä¸­æœ€å¤§çš„é‚£ä¸ªå€¼ï¼‰ï¼Œå’Œ bounding box é¢„æµ‹çš„ confidence å€¼ç›¸ä¹˜ï¼Œå°±å¾—åˆ°æ¯ä¸ª bounding box çš„ class-specific confidence scoreï¼š\\[Pr(C_i) = Pr(C_i\\vert Object) *Pr(Object) * IOU_{pred}^{truth}\\]ç„¶åè®¾ç½®é˜ˆå€¼ï¼Œæ»¤æ‰å¾—åˆ†ä½çš„ boxesï¼Œå¯¹ä¿ç•™çš„ boxes è¿›è¡Œ NMS å¤„ç†ï¼Œå°±å¾—åˆ°æœ€ç»ˆçš„æ£€æµ‹ç»“æœã€‚å…·ä½“è€Œè¨€ï¼šæ¯ä¸ªç½‘æ ¼æœ‰ 20 ä¸ªå¯¹è±¡çš„æ¦‚ç‡ * 2ä¸ª bounding box çš„ç½®ä¿¡åº¦ï¼Œå…±40ä¸ªå¾—åˆ†ï¼ˆå€™é€‰å¯¹è±¡ï¼‰ã€‚49ä¸ªç½‘æ ¼å…±1960ä¸ªå¾—åˆ†ã€‚Andrew Ngå»ºè®®æ¯ç§å¯¹è±¡åˆ†åˆ«è¿›è¡ŒNMSï¼Œé‚£ä¹ˆæ¯ç§å¯¹è±¡æœ‰ 1960/20=98 ä¸ªå¾—åˆ†ã€‚NMSæ­¥éª¤å¦‚ä¸‹ï¼š1ï¼‰è®¾ç½®ä¸€ä¸ªScoreçš„é˜ˆå€¼ï¼Œä½äºè¯¥é˜ˆå€¼çš„å€™é€‰å¯¹è±¡æ’é™¤æ‰ï¼ˆå°†è¯¥Scoreè®¾ä¸º0ï¼‰2ï¼‰éå†æ¯ä¸€ä¸ªå¯¹è±¡ç±»åˆ«â€ƒ2.1ï¼‰éå†è¯¥å¯¹è±¡çš„98ä¸ªå¾—åˆ†â€ƒâ€ƒ2.1.1ï¼‰æ‰¾åˆ°Scoreæœ€å¤§çš„é‚£ä¸ªå¯¹è±¡åŠå…¶bounding boxï¼Œæ·»åŠ åˆ°è¾“å‡ºåˆ—è¡¨â€ƒâ€ƒ2.1.2ï¼‰å¯¹æ¯ä¸ªScoreä¸ä¸º0çš„å€™é€‰å¯¹è±¡ï¼Œè®¡ç®—å…¶ä¸ä¸Šé¢2.1.1è¾“å‡ºå¯¹è±¡çš„bounding boxçš„IOUâ€ƒâ€ƒ2.1.3ï¼‰æ ¹æ®é¢„å…ˆè®¾ç½®çš„IOUé˜ˆå€¼ï¼Œæ‰€æœ‰é«˜äºè¯¥é˜ˆå€¼ï¼ˆé‡å åº¦è¾ƒé«˜ï¼‰çš„å€™é€‰å¯¹è±¡æ’é™¤æ‰ï¼ˆå°†Scoreè®¾ä¸º0ï¼‰â€ƒâ€ƒ2.1.4ï¼‰å¦‚æœæ‰€æœ‰bounding boxè¦ä¹ˆåœ¨è¾“å‡ºåˆ—è¡¨ä¸­ï¼Œè¦ä¹ˆScore=0ï¼Œåˆ™è¯¥å¯¹è±¡ç±»åˆ«çš„NMSå®Œæˆï¼Œè¿”å›æ­¥éª¤2å¤„ç†ä¸‹ä¸€ç§å¯¹è±¡3ï¼‰è¾“å‡ºåˆ—è¡¨å³ä¸ºé¢„æµ‹çš„å¯¹è±¡2.8. ç»“è®ºYOLOä»¥é€Ÿåº¦è§é•¿ï¼Œå¤„ç†é€Ÿåº¦å¯ä»¥è¾¾åˆ°45fpsï¼Œå…¶å¿«é€Ÿç‰ˆæœ¬ï¼ˆç½‘ç»œè¾ƒå°ï¼‰ç”šè‡³å¯ä»¥è¾¾åˆ°155fpsã€‚è¿™å¾—ç›Šäºå…¶è¯†åˆ«å’Œå®šä½åˆäºŒä¸ºä¸€çš„ç½‘ç»œè®¾è®¡ï¼Œè€Œä¸”è¿™ç§ç»Ÿä¸€çš„è®¾è®¡ä¹Ÿä½¿å¾—è®­ç»ƒå’Œé¢„æµ‹å¯ä»¥ç«¯åˆ°ç«¯çš„è¿›è¡Œï¼Œéå¸¸ç®€ä¾¿ã€‚ä¸è¶³ä¹‹å¤„æ˜¯å°å¯¹è±¡æ£€æµ‹æ•ˆæœä¸å¤ªå¥½ï¼ˆå°¤å…¶æ˜¯ä¸€äº›èšé›†åœ¨ä¸€èµ·çš„å°å¯¹è±¡ï¼‰ï¼Œå¯¹è¾¹æ¡†çš„é¢„æµ‹å‡†ç¡®åº¦ä¸æ˜¯å¾ˆé«˜ï¼Œæ€»ä½“é¢„æµ‹ç²¾åº¦ç•¥ä½äºFast RCNNã€‚ä¸»è¦æ˜¯å› ä¸ºç½‘æ ¼è®¾ç½®æ¯”è¾ƒç¨€ç–ï¼Œè€Œä¸”æ¯ä¸ªç½‘æ ¼åªé¢„æµ‹ä¸¤ä¸ªè¾¹æ¡†ï¼Œå¦å¤–Poolingå±‚ä¼šä¸¢å¤±ä¸€äº›ç»†èŠ‚ä¿¡æ¯ï¼Œå¯¹å®šä½å­˜åœ¨å½±å“ã€‚3. YOLO V2ç›¸æ¯” YOLO V1ï¼Œæ”¹è¿›å¦‚ä¸‹è¡¨æ‰€ç¤ºã€‚3.1. ç½‘ç»œç»“æ„ä¸»å¹²ç½‘ç»œæ¢æˆ Darknet-19ï¼Œ19 ä¸ªå·ç§¯å±‚å’Œ 5 ä¸ªæœ€å¤§æ± åŒ–å±‚ï¼Œæ¯” VGG-16 å°ä¸€äº›ï¼Œç²¾åº¦ä¸å¼±äºå®ƒï¼Œä½†æµ®ç‚¹è¿ç®—å‡å°‘åˆ°çº¦ 1/5ï¼Œè¿ç®—é€Ÿåº¦æ›´å¿«ã€‚  ç§»é™¤å…¨è¿æ¥å±‚å¾ˆé•¿ä¸€æ®µæ—¶é—´ä»¥æ¥ï¼Œå…¨è¿æ¥ç½‘ç»œä¸€ç›´æ˜¯ CNN åˆ†ç±»ç½‘ç»œçš„æ ‡é…ç»“æ„ã€‚ä¸€èˆ¬åœ¨å…¨è¿æ¥åä¼šæœ‰æ¿€æ´»å‡½æ•°æ¥åšåˆ†ç±»ï¼Œå‡è®¾è¿™ä¸ªæ¿€æ´»å‡½æ•°æ˜¯ä¸€ä¸ªå¤šåˆ†ç±» softmaxï¼Œé‚£ä¹ˆå…¨è¿æ¥ç½‘ç»œçš„ä½œç”¨å°±æ˜¯å°†æœ€åä¸€å±‚å·ç§¯å¾—åˆ°çš„ feature map stretch æˆå‘é‡ï¼Œå¯¹è¿™ä¸ªå‘é‡åšä¹˜æ³•ï¼Œæœ€ç»ˆé™ä½å…¶ç»´åº¦ï¼Œç„¶åè¾“å…¥åˆ° softmax å±‚ä¸­å¾—åˆ°å¯¹åº”çš„æ¯ä¸ªç±»åˆ«çš„å¾—åˆ†ã€‚å…¨è¿æ¥å±‚å¦‚æ­¤çš„é‡è¦ï¼Œä»¥è‡³äºå…¨è¿æ¥å±‚è¿‡å¤šçš„å‚æ•°é‡è¦åˆ°ä¼šé€ æˆè¿‡æ‹Ÿåˆï¼Œæ‰€ä»¥ä¹Ÿä¼šæœ‰ä¸€äº›æ–¹æ³•ä¸“é—¨ç”¨æ¥è§£å†³è¿‡æ‹Ÿåˆï¼Œæ¯”å¦‚dropoutã€‚YOLO V2 ç§»é™¤äº†å…¨è¿æ¥å±‚ï¼Œè€Œæ˜¯é‡‡ç”¨ å…¨å±€å¹³å‡æ± åŒ–å±‚æ¥è¿›è¡Œåˆ†ç±»ã€‚global average pooling ä¸ average pooling çš„å·®åˆ«å°±åœ¨ â€œglobalâ€ è¿™ä¸€ä¸ªå­—çœ¼ä¸Šã€‚global ä¸ local åœ¨å­—é¢ä¸Šéƒ½æ˜¯ç”¨æ¥å½¢å®¹ pooling çª—å£åŒºåŸŸçš„ã€‚ local æ˜¯å– feature map çš„ä¸€ä¸ªå­åŒºåŸŸæ±‚å¹³å‡å€¼ï¼Œç„¶åæ»‘åŠ¨è¿™ä¸ªå­åŒºåŸŸï¼› global æ˜¾ç„¶å°±æ˜¯å¯¹æ•´ä¸ª feature map æ±‚å¹³å‡å€¼äº†ã€‚  æ‘†è„±äº†å›ºå®šå°ºå¯¸çš„ FC å¯¹è¾“å…¥å›¾åƒå°ºå¯¸çš„çº¦æŸï¼Œå¯ä»¥é€‚åº”å„ç§å°ºå¯¸çš„è¾“å…¥å›¾åƒã€‚  å‰”é™¤äº† FC çš„é»‘ç®±ç‰¹æ€§ï¼Œç›´æ¥èµ‹äºˆæ¯ä¸ª channel å®é™…æ„ä¹‰ã€‚  PLoB. å…³äºglobal average poolingç†è§£å’Œä»‹ç»  ç§»é™¤ä¸€ä¸ªæ± åŒ–å±‚å»æ‰äº†ä¸€ä¸ªæ± åŒ–å±‚ï¼Œä½¿ç½‘ç»œå·ç§¯å±‚è¾“å‡ºå…·æœ‰æ›´é«˜çš„åˆ†è¾¨ç‡ã€‚3.2. æ‰¹å½’ä¸€åŒ–è¯¥ä¸»å¹²ç½‘ç»œä¸­çš„æ¯ä¸ªå·ç§¯å±‚ä¸­è¿˜å¼•å…¥äº† Batch Normalization ç¨³å®šè®­ç»ƒï¼ŒåŠ å¿«æ”¶æ•›ï¼Œé˜²æ­¢è¿‡æ‹Ÿåˆã€‚åŒæ—¶æ”¾å¼ƒäº† dropoutã€‚æ‰¹å½’ä¸€åŒ–æœ‰åŠ©äºè§£å†³åå‘ä¼ æ’­è¿‡ç¨‹ä¸­çš„æ¢¯åº¦æ¶ˆå¤±å’Œæ¢¯åº¦çˆ†ç‚¸é—®é¢˜ï¼Œé™ä½å¯¹ä¸€äº›è¶…å‚æ•°ï¼ˆæ¯”å¦‚å­¦ä¹ ç‡ã€ç½‘ç»œå‚æ•°çš„å¤§å°èŒƒå›´ã€æ¿€æ´»å‡½æ•°çš„é€‰æ‹©ï¼‰çš„æ•æ„Ÿæ€§ï¼Œå¹¶ä¸”æ¯ä¸ª batch åˆ†åˆ«è¿›è¡Œå½’ä¸€åŒ–çš„æ—¶å€™ï¼Œèµ·åˆ°äº†ä¸€å®šçš„æ­£åˆ™åŒ–æ•ˆæœï¼ˆYOLO V2 ä¸å†ä½¿ç”¨ dropoutï¼‰ï¼Œä»è€Œèƒ½å¤Ÿè·å¾—æ›´å¥½çš„æ”¶æ•›é€Ÿåº¦å’Œæ”¶æ•›æ•ˆæœã€‚é€šå¸¸ï¼Œä¸€æ¬¡è®­ç»ƒä¼šè¾“å…¥ä¸€æ‰¹æ ·æœ¬ï¼ˆbatchï¼‰è¿›å…¥ç¥ç»ç½‘ç»œã€‚æ‰¹è§„ä¸€åŒ–åœ¨ç¥ç»ç½‘ç»œçš„æ¯ä¸€å±‚ï¼Œåœ¨ç½‘ç»œï¼ˆçº¿æ€§å˜æ¢ï¼‰è¾“å‡ºåå’Œæ¿€æ´»å‡½æ•°ï¼ˆéçº¿æ€§å˜æ¢ï¼‰ä¹‹å‰å¢åŠ ä¸€ä¸ªæ‰¹å½’ä¸€åŒ–å±‚ï¼ˆBNï¼‰ï¼ŒBNå±‚è¿›è¡Œå¦‚ä¸‹å˜æ¢ï¼š  å¯¹è¯¥æ‰¹æ ·æœ¬çš„å„ç‰¹å¾é‡ï¼ˆå¯¹äºä¸­é—´å±‚æ¥è¯´ï¼Œå°±æ˜¯æ¯ä¸€ä¸ªç¥ç»å…ƒï¼‰åˆ†åˆ«è¿›è¡Œå½’ä¸€åŒ–å¤„ç†ï¼Œåˆ†åˆ«ä½¿æ¯ä¸ªç‰¹å¾çš„æ•°æ®åˆ†å¸ƒå˜æ¢ä¸ºå‡å€¼ 0ï¼Œæ–¹å·® 1ã€‚ä»è€Œä½¿å¾—æ¯ä¸€æ‰¹è®­ç»ƒæ ·æœ¬åœ¨æ¯ä¸€å±‚éƒ½æœ‰ç±»ä¼¼çš„åˆ†å¸ƒã€‚è¿™ä¸€å˜æ¢ä¸éœ€è¦å¼•å…¥é¢å¤–çš„å‚æ•°ã€‚  å¯¹ä¸Šä¸€æ­¥çš„è¾“å‡ºå†åšä¸€æ¬¡çº¿æ€§å˜æ¢ï¼Œå‡è®¾ä¸Šä¸€æ­¥çš„è¾“å‡ºä¸ºZï¼Œåˆ™ $Z_1=\\gamma Z + \\beta$ã€‚è¿™é‡ŒÎ³ã€Î²æ˜¯å¯ä»¥è®­ç»ƒçš„å‚æ•°ã€‚å¢åŠ è¿™ä¸€å˜æ¢æ˜¯å› ä¸ºä¸Šä¸€æ­¥éª¤ä¸­å¼ºåˆ¶æ”¹å˜äº†ç‰¹å¾æ•°æ®çš„åˆ†å¸ƒï¼Œå¯èƒ½å½±å“äº†åŸæœ‰æ•°æ®çš„ä¿¡æ¯è¡¨è¾¾èƒ½åŠ›ã€‚å¢åŠ çš„çº¿æ€§å˜æ¢ä½¿å…¶æœ‰æœºä¼šæ¢å¤å…¶åŸæœ¬çš„ä¿¡æ¯ã€‚æ‰¹å½’ä¸€åŒ–ä½¿ mAP æœ‰ 2.4% çš„æå‡ã€‚  å¤©é›¨ç²Ÿ. Batch NormalizationåŸç†ä¸å®æˆ˜. çŸ¥ä¹3.3. é«˜åˆ†è¾¨ç‡åˆ†ç±»å™¨å›¾åƒåˆ†ç±»çš„è®­ç»ƒæ ·æœ¬å¾ˆå¤šï¼Œè€Œæ ‡æ³¨äº†è¾¹æ¡†çš„ç”¨äºè®­ç»ƒå¯¹è±¡æ£€æµ‹çš„æ ·æœ¬ç›¸æ¯”è€Œè¨€å°±æ¯”è¾ƒå°‘äº†ï¼Œå› ä¸ºæ ‡æ³¨è¾¹æ¡†çš„äººå·¥æˆæœ¬æ¯”è¾ƒé«˜ã€‚æ‰€ä»¥å¯¹è±¡æ£€æµ‹æ¨¡å‹é€šå¸¸éƒ½å…ˆç”¨å›¾åƒåˆ†ç±»æ ·æœ¬è®­ç»ƒå·ç§¯å±‚ï¼Œæå–å›¾åƒç‰¹å¾ã€‚ä½†è¿™å¼•å‡ºçš„å¦ä¸€ä¸ªé—®é¢˜æ˜¯ï¼Œå›¾åƒåˆ†ç±»æ ·æœ¬çš„åˆ†è¾¨ç‡ä¸æ˜¯å¾ˆé«˜ã€‚æ‰€ä»¥YOLO v1ä½¿ç”¨ImageNetçš„å›¾åƒåˆ†ç±»æ ·æœ¬é‡‡ç”¨ 224 x 224 ä½œä¸ºè¾“å…¥ï¼Œæ¥è®­ç»ƒCNNå·ç§¯å±‚ã€‚ç„¶ååœ¨è®­ç»ƒå¯¹è±¡æ£€æµ‹æ—¶ï¼Œæ£€æµ‹ç”¨çš„å›¾åƒæ ·æœ¬é‡‡ç”¨æ›´é«˜åˆ†è¾¨ç‡çš„ 448 x 448 çš„å›¾åƒä½œä¸ºè¾“å…¥ã€‚ä½†è¿™æ ·åˆ‡æ¢å¯¹æ¨¡å‹æ€§èƒ½æœ‰ä¸€å®šå½±å“ã€‚æ‰€ä»¥YOLO2åœ¨é‡‡ç”¨ 224 x 224 å›¾åƒè¿›è¡Œåˆ†ç±»æ¨¡å‹é¢„è®­ç»ƒåï¼Œå†é‡‡ç”¨ 448 x 448 çš„é«˜åˆ†è¾¨ç‡æ ·æœ¬å¯¹åˆ†ç±»æ¨¡å‹è¿›è¡Œå¾®è°ƒï¼ˆ10ä¸ªepochï¼‰ï¼Œä½¿ç½‘ç»œç‰¹å¾é€æ¸é€‚åº” 448 x 448 çš„åˆ†è¾¨ç‡ã€‚ç„¶åå†ä½¿ç”¨ 448 x 448 çš„æ£€æµ‹æ ·æœ¬è¿›è¡Œè®­ç»ƒï¼Œç¼“è§£äº†åˆ†è¾¨ç‡çªç„¶åˆ‡æ¢é€ æˆçš„å½±å“ã€‚mAP æå‡äº† 3.7%ã€‚3.4. å…ˆéªŒæ¡†ï¼ˆanchorï¼‰å€Ÿé‰´ Faster R-CNN çš„åšæ³•ï¼ŒYOLO V2 ä¹Ÿå°è¯•é‡‡ç”¨å…ˆéªŒæ¡†ï¼ˆanchorï¼‰ã€‚åœ¨æ¯ä¸ªç½‘æ ¼é¢„å…ˆè®¾å®šä¸€ç»„ä¸åŒå¤§å°å’Œå®½é«˜æ¯”çš„è¾¹æ¡†ï¼Œæ¥è¦†ç›–æ•´ä¸ªå›¾åƒçš„ä¸åŒä½ç½®å’Œå¤šç§å°ºåº¦ï¼Œè¿™äº›å…ˆéªŒæ¡†ä½œä¸ºé¢„å®šä¹‰çš„å€™é€‰åŒºåœ¨ç¥ç»ç½‘ç»œä¸­å°†æ£€æµ‹å…¶ä¸­æ˜¯å¦å­˜åœ¨å¯¹è±¡ï¼Œä»¥åŠå¾®è°ƒè¾¹æ¡†çš„ä½ç½®ã€‚ä¹‹å‰ YOLO V1 å¹¶æ²¡æœ‰é‡‡ç”¨å…ˆéªŒæ¡†ï¼Œå¹¶ä¸”æ¯ä¸ªç½‘æ ¼åªé¢„æµ‹ä¸¤ä¸ª bounding boxï¼Œæ•´ä¸ªå›¾åƒ 98 ä¸ªã€‚YOLO V2 å¦‚æœæ¯ä¸ªç½‘æ ¼é‡‡ç”¨ 9 ä¸ªå…ˆéªŒæ¡†ï¼Œæ€»å…±æœ‰ $13\\times 13\\times 9=1521$ ä¸ªå…ˆéªŒæ¡†ã€‚å¬å›ç‡å¤§å¹…æå‡åˆ°88%ï¼ŒåŒæ—¶mAPè½»å¾®ä¸‹é™äº†0.2%ã€‚ä¸è¿‡ YOLO V2 æ¥ç€è¿›ä¸€æ­¥å¯¹å…ˆéªŒæ¡†è¿›è¡Œäº†æ”¹è‰¯ã€‚ä¹‹å‰å…ˆéªŒæ¡†éƒ½æ˜¯æ‰‹å·¥è®¾å®šçš„ï¼ŒYOLO2å°è¯•ç»Ÿè®¡å‡ºæ›´ç¬¦åˆæ ·æœ¬ä¸­å¯¹è±¡å°ºå¯¸çš„å…ˆéªŒæ¡†ï¼Œè¿™æ ·å°±å¯ä»¥å‡å°‘ç½‘ç»œå¾®è°ƒå…ˆéªŒæ¡†åˆ°å®é™…ä½ç½®çš„éš¾åº¦ã€‚YOLO V2 å¯¹è®­ç»ƒé›†ä¸­æ ‡æ³¨çš„è¾¹æ¡†è¿›è¡Œèšç±»åˆ†æï¼Œä»¥å¯»æ‰¾å°½å¯èƒ½åŒ¹é…æ ·æœ¬çš„è¾¹æ¡†å°ºå¯¸ã€‚èšç±»ç®—æ³•æœ€é‡è¦çš„æ˜¯é€‰æ‹©å¦‚ä½•è®¡ç®—ä¸¤ä¸ªè¾¹æ¡†ä¹‹é—´çš„â€œè·ç¦»â€ï¼Œå¯¹äºå¸¸ç”¨çš„æ¬§å¼è·ç¦»ï¼Œå¤§è¾¹æ¡†ä¼šäº§ç”Ÿæ›´å¤§çš„è¯¯å·®ï¼Œä½†æˆ‘ä»¬å…³å¿ƒçš„æ˜¯è¾¹æ¡†çš„IOUã€‚æ‰€ä»¥ï¼ŒYOLO V2 åœ¨èšç±»æ—¶é‡‡ç”¨ä»¥ä¸‹å…¬å¼æ¥è®¡ç®—ä¸¤ä¸ªè¾¹æ¡†ä¹‹é—´çš„ â€œè·ç¦»â€ã€‚\\[d(box,centroid) = 1- IOU(box, centroid)\\]$centroid$ æ˜¯èšç±»æ—¶è¢«é€‰ä½œä¸­å¿ƒçš„è¾¹æ¡†ï¼Œ$box$ å°±æ˜¯å…¶å®ƒè¾¹æ¡†ï¼Œ$d$ å°±æ˜¯ä¸¤è€…é—´çš„ â€œè·ç¦»â€ã€‚IOU è¶Šå¤§ï¼Œâ€œè·ç¦»â€ è¶Šè¿‘ã€‚èšç±»åˆ†æç»“æœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼šä¸Šå›¾å·¦è¾¹æ˜¯é€‰æ‹©ä¸åŒçš„èšç±» k å€¼æƒ…å†µä¸‹ï¼Œå¾—åˆ°çš„ k ä¸ª centroid è¾¹æ¡†ï¼Œè®¡ç®—æ ·æœ¬ä¸­æ ‡æ³¨çš„è¾¹æ¡†ä¸å„ centroid çš„ Avg IOUã€‚æ˜¾ç„¶ï¼Œè¾¹æ¡†æ•° k è¶Šå¤šï¼ŒAvg IOU è¶Šå¤§ã€‚YOLO V2 é€‰æ‹© k=5 ä½œä¸ºè¾¹æ¡†æ•°é‡ä¸ IOU çš„æŠ˜ä¸­ã€‚å¯¹æ¯”æ‰‹å·¥é€‰æ‹©çš„å…ˆéªŒæ¡†ï¼Œä½¿ç”¨ 5 ä¸ªèšç±»æ¡†å³å¯è¾¾åˆ° 61 Avg IOUï¼Œç›¸å½“äº 9 ä¸ªæ‰‹å·¥è®¾ç½®çš„å…ˆéªŒæ¡† 60.9 Avg IOUã€‚ä¸Šå›¾å³è¾¹æ˜¾ç¤ºäº† 5 ç§èšç±»å¾—åˆ°çš„å…ˆéªŒæ¡†ï¼ŒVOC å’Œ COCO æ•°æ®é›†ç•¥æœ‰å·®å¼‚ï¼Œä¸è¿‡éƒ½æœ‰è¾ƒå¤šçš„ç˜¦é«˜å½¢è¾¹æ¡†ã€‚3.5. çº¦æŸé¢„æµ‹æ¡†ä½ç½®å€Ÿé‰´äº Faster RCNN çš„å…ˆéªŒæ¡†æ–¹æ³•ï¼Œå…¶ä½ç½®é¢„æµ‹å…¬å¼ä¸ºï¼š\\[x = (t_x \\cdot w_a) + x_a\\\\y = (t_y \\cdot h_a) + y_a\\]å…¶ä¸­ï¼Œ$x_a, y_a$ æ—¶å…ˆéªŒæ¡†ä¸­å¿ƒï¼Œ$w_a, h_a$ æ˜¯å…ˆéªŒæ¡†å®½é«˜ï¼Œ$x,y$ æ˜¯é¢„æµ‹æ¡†ä¸­å¿ƒï¼Œ$t_x, t_y$ æ˜¯å¾…å­¦ä¹ å‚æ•°ã€‚ç”±äº $t_x, t_y$ æ²¡æœ‰ä»»ä½•çº¦æŸï¼Œå› æ­¤é¢„æµ‹æ¡†çš„ä¸­å¿ƒå¯èƒ½å‡ºç°åœ¨ä»»ä½•ä½ç½®ã€‚è®­ç»ƒæ—©æœŸé˜¶æ®µä¸å®¹æ˜“ç¨³å®šã€‚å› æ­¤ YOLO V2 è°ƒæ•´äº†é¢„æµ‹å…¬å¼ï¼Œå°†é¢„æµ‹æ¡†ä¸­å¿ƒçº¦æŸåœ¨ç‰¹å®šçš„ç½‘æ ¼å†…ã€‚\\[x = \\sigma (t_x) + c_x\\\\y = \\sigma (t_y) + c_y\\\\w = w_a e^{t_w}\\\\h = h_a e^{t_h}\\\\Pr(obj)\\cdot IOU(b, obj) = \\sigma (t_o)\\]å¼ä¸­ï¼Œ$t_x, t_y, t_w, t_h, t_o$ æ˜¯å¾…å­¦ä¹ å‚æ•°ã€‚$c_x, x_y$ æ˜¯å½“å‰ç½‘æ ¼å·¦ä¸Šè§’åˆ°å›¾åƒå·¦ä¸Šè§’çš„è·ç¦»ï¼Œè¦å…ˆå°†ç½‘æ ¼å¤§å°å½’ä¸€åŒ–ï¼Œå³ä»¤ä¸€ä¸ªç½‘æ ¼çš„å®½=1ï¼Œé«˜=1ã€‚$\\sigma$ å³ sigmoid å‡½æ•°ï¼Œå¯ä»¥å°† $[-\\infty,+\\infty]$ çš„ $t_x, t_y$ æ˜ å°„åˆ° $[0,1]$ï¼Œä»è€Œçº¦æŸåœ¨äº†å½“å‰ç½‘æ ¼å†…ï¼ˆè“è‰²åŒºåŸŸï¼‰ã€‚å¯¹äºé¢„æµ‹æ¡†çš„å®½é«˜ï¼Œé‡‡ç”¨æŒ‡æ•°å‡½æ•°ï¼Œå°† $[-\\infty,+\\infty]$ çš„ $t_w, t_h$ æ˜ å°„åˆ° $[0,+\\infty]$ï¼Œæ­¤æ—¶ $t=0$ å¯¹åº” $e^t=1$ ï¼Œåˆ™é¢„æµ‹æ¡†å®½é«˜å°±ç­‰äºåŸå§‹å®½é«˜ï¼Œç›¸å½“äºè®©å‚æ•°å›´ç»• 0 é™„è¿‘æ³¢åŠ¨ï¼Œæ›´å¥½å­¦ä¹ ã€‚å¼•å…¥å…ˆéªŒæ¡†å’Œçº¦æŸé¢„æµ‹æ¡†ä½ç½®ï¼Œä½¿å¾— mAP æœ‰ 4.8% çš„æå‡ã€‚å¯¹äºç½®ä¿¡åº¦ï¼ŒYOLO V1 ç›´æ¥é¢„æµ‹ç½®ä¿¡åº¦çš„å€¼ï¼Œè€Œ YOLO V2 é¢„æµ‹ $t_o$ï¼Œè¦ç»è¿‡ sigmoid å˜æ¢ä½œä¸ºç½®ä¿¡åº¦çš„å€¼ã€‚3.6. pass throughä¸ºäº†æ›´å¥½çš„æ£€æµ‹å‡ºä¸€äº›æ¯”è¾ƒå°çš„å¯¹è±¡ï¼Œæœ€åè¾“å‡ºçš„ç‰¹å¾å›¾éœ€è¦ä¿ç•™ä¸€äº›æ›´ç»†èŠ‚çš„ä¿¡æ¯ã€‚YOLO V2 å¼•å…¥ä¸€ç§ç§°ä¸º passthrough å±‚çš„æ–¹æ³•åœ¨ç‰¹å¾å›¾ä¸­ä¿ç•™ä¸€äº›ç»†èŠ‚ä¿¡æ¯ã€‚å…·ä½“æ¥è¯´ï¼Œå°±æ˜¯åœ¨æœ€åä¸€ä¸ª pooling ä¹‹å‰ï¼Œç‰¹å¾å›¾çš„å¤§å°æ˜¯ 26 x 26 x 512ï¼Œå°†å…¶ 1 æ‹† 4ï¼Œç›´æ¥ä¼ é€’ï¼ˆpassthroughï¼‰åˆ° pooling åï¼ˆå¹¶ä¸”åˆç»è¿‡ä¸€ç»„å·ç§¯ï¼‰çš„ç‰¹å¾å›¾ï¼Œä¸¤è€…å åŠ åˆ°ä¸€èµ·ä½œä¸ºè¾“å‡ºçš„ç‰¹å¾å›¾ã€‚ç”±äºä¹‹åçš„ YOLO V3 ç­‰ä¸å†è¿ç”¨ï¼Œæ­¤å¤„å°±ä¸ä»‹ç»äº†ã€‚3.7. è®­ç»ƒYOLO V2 çš„è®­ç»ƒä¸»è¦åŒ…æ‹¬ä¸¤ä¸ªé˜¶æ®µã€‚ç¬¬ä¸€é˜¶æ®µå°±æ˜¯å…ˆåœ¨ ImageNet åˆ†ç±»æ•°æ®é›†ä¸Šé¢„è®­ç»ƒ Darknet-19ï¼Œæ­¤æ—¶æ¨¡å‹è¾“å…¥ä¸º 224 x 224 ï¼Œå…±è®­ç»ƒ 160 ä¸ª epochsã€‚ç„¶åç¬¬äºŒé˜¶æ®µå°†ç½‘ç»œçš„è¾“å…¥è°ƒæ•´ä¸º 448 x 448 ï¼Œç»§ç»­åœ¨ ImageNet æ•°æ®é›†ä¸Š finetune åˆ†ç±»æ¨¡å‹ï¼Œè®­ç»ƒ 10 ä¸ª epochsï¼Œæ­¤æ—¶åˆ†ç±»æ¨¡å‹çš„ top-1 å‡†ç¡®åº¦ä¸º 76.5%ï¼Œè€Œ top-5 å‡†ç¡®åº¦ä¸º 93.3%ã€‚3.8. æµ‹è¯•é¢„æµ‹ä¿®æ”¹ Darknet-19 åˆ†ç±»æ¨¡å‹ä¸ºæ£€æµ‹æ¨¡å‹ï¼Œç§»é™¤æœ€åä¸€ä¸ªå·ç§¯å±‚ã€global avgpooling å±‚ä»¥åŠ softmax å±‚ï¼Œå¹¶ä¸”æ–°å¢äº†ä¸‰ä¸ª 3 x 3 x 1024 å·ç§¯å±‚ï¼ŒåŒæ—¶å¢åŠ äº†ä¸€ä¸ªpassthroughå±‚ï¼Œæœ€åä½¿ç”¨ 1 x 1 å·ç§¯å±‚è¾“å‡ºé¢„æµ‹ç»“æœï¼Œè¾“å‡ºçš„ channels æ•°ä¸ºï¼šnum_anchors x (5+num_classes)ï¼Œå’Œè®­ç»ƒé‡‡ç”¨çš„æ•°æ®é›†æœ‰å…³ç³»ã€‚ç”±äº anchors æ•°ä¸º 5ï¼Œå¯¹äº VOC æ•°æ®é›†ï¼ˆ20 ç§åˆ†ç±»å¯¹è±¡ï¼‰è¾“å‡ºçš„ channels æ•°å°±æ˜¯ 125ï¼Œæœ€ç»ˆçš„é¢„æµ‹çŸ©é˜µ T çš„ shape ä¸º (batch_size, 13, 13, 125)ï¼Œå¯ä»¥å…ˆå°†å…¶ reshape ä¸º (batch_size, 13, 13, 5, 25) ï¼Œå…¶ä¸­ T[:, :, :, :, 0:4] ä¸ºè¾¹ç•Œæ¡†çš„ä½ç½®å’Œå¤§å° $[t_x, t_y, t_w, t_h]$ ï¼ŒT[:, :, :, :, 4] ä¸ºè¾¹ç•Œæ¡†çš„ç½®ä¿¡åº¦ï¼Œè€Œ T[:, :, :, :, 5:] ä¸ºç±»åˆ«é¢„æµ‹å€¼ã€‚4. YOLO V34.1. ç½‘ç»œç»“æ„å…¶ä¸­ä¸»å¹²ç½‘ç»œï¼ˆBackboneï¼‰ä¸º Backboneã€‚ä» YOLO V3 å¼€å§‹å¼•å…¥ Neck ã€‚åœ¨ç›®æ ‡æ£€æµ‹é¢†åŸŸï¼Œä¸ºäº†æ›´å¥½çš„æå–èåˆç‰¹å¾ï¼Œé€šå¸¸åœ¨ Backbone å’Œè¾“å‡ºå±‚ä¹‹é—´ä¼šæ’å…¥ä¸€äº›å±‚ï¼Œè¿™ä¸ªéƒ¨åˆ†ç§°ä¸º Neckã€‚ç›¸å½“äºç›®æ ‡æ£€æµ‹ç½‘ç»œçš„é¢ˆéƒ¨ï¼Œä¹Ÿæ˜¯éå¸¸å…³é”®çš„ã€‚DarkNet-53 çš„åŸºæœ¬å•å…ƒä¸º Convolutionalï¼ŒåŒ…æ‹¬ {conv2d + BN + Leaky ReLU}ã€‚ä¸Šå›¾çš„ Darknet-53 ç½‘ç»œé‡‡ç”¨ 256 x 256 x 3 ä½œä¸ºè¾“å…¥ï¼Œé¦–å…ˆç»è¿‡ä¸€ä¸ª 3 x 3 x 32 Convolutionalï¼Œç„¶åç»è¿‡ä¸€ä¸ª 3 x 3 x 64s2 Convolutional ä¸‹é‡‡æ ·ä¸€å€ã€‚åé¢è¿˜å¯ä»¥çœ‹åˆ°ï¼Œ DarkNet æ‘’å¼ƒäº†æ‰€æœ‰æœ€å¤§æ± åŒ–å±‚ï¼Œè½¬è€Œç”¨ stride=2 çš„ Convolutional æ¥åšä¸‹é‡‡æ ·ã€‚æ¯”å¦‚ç¬¬äºŒå±‚çš„ Convolutionalï¼š\\[\\begin{aligned}output &amp;= (input + 2*padding - kernel)/stride+1\\\\&amp;= (256+2*0-3)/2 + 1\\\\&amp;= ceil(136.5) + 1\\\\&amp;= 128\\\\\\end{aligned}\\]ç´§æ¥æ˜¯è‹¥å¹²é‡å¤æ¨¡å—ã€‚æœ€å·¦ä¾§é‚£ä¸€åˆ—çš„ 1ã€2ã€8 ç­‰æ•°å­—è¡¨ç¤ºå¤šå°‘ä¸ªé‡å¤çš„æ®‹å·®ç»„ä»¶ã€‚æ¯ä¸ªæ®‹å·®ç»„ä»¶æœ‰ä¸¤ä¸ª Convolutional å’Œä¸€ä¸ªå¿«æ·é“¾è·¯ã€‚ä»¥ç¬¬ä¸€ä¸ªæ®‹å·®æ¨¡å—ä¸ºä¾‹ï¼š            [1 x 1] x 32 kernel          [3 x 3] x 64 kernel128 x 128 x 64 ----------&gt;  128 x 128 x 32 ----------&gt;  128 x 128 x 64       |                                                       ^       |_______________________________________________________| (+)åæ¥ä¸€ä¸ª 3 x 3 x 256s2 çš„ä¸‹é‡‡æ · Convolutionalã€‚è¿›å…¥ç¬¬äºŒä¸ªæ®‹å·®æ¨¡å—ï¼Œè¿™é‡Œç”± 8 ä¸ªæ®‹å·®æ¨¡å—å †å è€Œæˆã€‚åé¢ä»¥æ­¤ç±»æ¨ã€‚4.2. å¤šå°ºåº¦ç‰¹å¾YOLO V2 æ›¾é‡‡ç”¨ passthrough ç»“æ„æ¥æ£€æµ‹ç»†ç²’åº¦ç‰¹å¾ï¼Œåœ¨ YOLO V3 æ›´è¿›ä¸€æ­¥é‡‡ç”¨äº† 3 ä¸ªä¸åŒå°ºåº¦çš„ç‰¹å¾å›¾æ¥è¿›è¡Œå¯¹è±¡æ£€æµ‹ï¼Œæ„æˆç‰¹å¾é‡‘å­—å¡”ï¼ˆFeature Pyramid Networks, FPNï¼‰ã€‚åˆ†åˆ«ä»ä¸»å¹²ç½‘ç»œçš„ä¸­é—´å±‚å¼•å‡ºä¸¤ä¸ªç‰¹å¾å›¾ï¼Œåˆ†åˆ«ä¸ºï¼š  b: 52 x 52 x 256  c: 26 x 26 x 512ä¸‹é¢è¯¦ç»†è®¨è®ºç‰¹å¾é‡‘å­—å¡”ï¼š  Predict oneä¸»å¹²ç½‘ç»œè¾“å‡ºçš„æœ€æŠ½è±¡çš„ç‰¹å¾ï¼Œå…·æœ‰å¤§å°ºåº¦çš„æ„Ÿå—é‡ï¼ˆç‰¹å¾å›¾ä¸Šå¾ˆå°çš„åŒºåŸŸå°±å¯¹åº”åŸå›¾å¾ˆå¤§çš„ä¸€å—åŒºåŸŸï¼‰ï¼Œç”¨æ¥æ£€æµ‹å¤§ç›®æ ‡ã€‚é¦–å…ˆï¼Œä¸»å¹²ç½‘ç»œæœ€æœ«ç«¯è¾“å‡º 13 x 13 x 1024 ï¼Œç»è¿‡ Convolutional Setï¼ŒåŒ…å«äº”ä¸ª Convolutional ç»„ï¼ˆå›¾å³ä¾§ï¼‰ï¼Œå…¶ä¸­æ¯ä¸ª Convolutional çš„å·ç§¯æ ¸å…·ä½“ä¸ºï¼š[1 x 1] x 512 --&gt; [3 x 3] x 1024 --&gt; [1 x 1] x 512 --&gt; [3 x 3] x 1024 --&gt; [1 x 1] x 512å¾—åˆ° 13 x 13 x 512 ç‰¹å¾ï¼Œè®°ä½œ Aã€‚å†ç»è¿‡ä¸€ä¸ªå•ç‹¬çš„ {[3 x 3] x 1024 + BN + Leaky ReLU} Convolutional å’Œä¸€ä¸ª 1 x 1 x 255 çº¯å·ç§¯ conv2dï¼Œå¾—åˆ° 13 x 13 x 255 çš„ç‰¹å¾å›¾ Y1ï¼Œå¯è¯†åˆ« 13 x 13 = 169 ä¸ªå¤§ç‰©ä½“ã€‚  Predict Twoå…·æœ‰ä¸­ç­‰å°ºåº¦çš„æ„Ÿå—é‡ï¼Œç”¨æ¥æ£€æµ‹ä¸­ç›®æ ‡ã€‚å°†å‰é¢çš„ A æ‹¿è¿‡æ¥ï¼Œç»è¿‡ä¸€ä¸ªå•ç‹¬çš„ {[1 x 1] x 256 + BN + Leaky ReLU} Convolutional å’Œä¸€ä¸ªä¸Šé‡‡æ ·ï¼Œå¾—åˆ° 26 x 26 x 256 çš„ç‰¹å¾å›¾ã€‚å°†ä¸Šé‡‡æ ·çš„ç»“æœä¸ b æ‹¼æ¥åå¾—åˆ° 26 x 26 x 768ã€‚            26 x 26 x 512 ------------------------------------------                                                                     | (concat)Aï¼š13 x 13 x 512 --&gt; 13 x 13 x 256 --------&gt; 26 x 26 x 512 --&gt; 26 x 26 x 768                                  (upsample)å†ç»è¿‡ Convolutional Setï¼Œå…¶ä¸­æ¯ä¸ª Convolutional çš„å·ç§¯æ ¸å…·ä½“ä¸ºï¼š[1 x 1] x 256 --&gt; [3 x 3] x 512 --&gt; [1 x 1] x 256 --&gt; [3 x 3] x 512 --&gt; [1 x 1] x 256å¾—åˆ° 26 x 26 x 256ï¼Œè®°ä½œ Bã€‚å†ç»è¿‡ä¸€ä¸ªå•ç‹¬çš„ {[3 x 3] x 512 + BN + Leaky ReLU} Convolutional å’Œä¸€ä¸ª 1 x 1 x 255 çº¯å·ç§¯ conv2dï¼Œå¾—åˆ° 26 x 26 x 255 çš„ç‰¹å¾å›¾ Y2ï¼Œå¯è¯†åˆ« 26 x 26 = 676 ä¸ªä¸­ç‰©ä½“ã€‚  Predict Threeå…·æœ‰å°å°ºåº¦çš„æ„Ÿå—é‡ï¼Œç”¨æ¥æ£€æµ‹ä¸­ç›®æ ‡ã€‚å°†å‰é¢çš„ B æ‹¿è¿‡æ¥ï¼Œç»è¿‡ä¸€ä¸ªå•ç‹¬çš„ {[1 x 1] x 128 + BN + Leaky ReLU} Convolutional å’Œä¸€ä¸ªä¸Šé‡‡æ ·ï¼Œå¾—åˆ° 52 x 52 x 128 çš„ç‰¹å¾å›¾ã€‚            52 x 52 x 256 ------------------------------------------                                                                     | (concat)Bï¼š26 x 26 x 256 --&gt; 26 x 26 x 128 --------&gt; 52 x 52 x 128 --&gt; 52 x 52 x 384                                  (upsample)å°†ä¸Šé‡‡æ ·çš„ç»“æœä¸ c æ‹¼æ¥åå¾—åˆ° 26 x 26 x 384ã€‚å†ç»è¿‡ Convolutional Setï¼Œå…¶ä¸­æ¯ä¸ª Convolutional çš„å·ç§¯æ ¸å…·ä½“ä¸ºï¼š[1 x 1] x 128 --&gt; [3 x 3] x 256 --&gt; [1 x 1] x 128 --&gt; [3 x 3] x 256 --&gt; [1 x 1] x 128å†ç»è¿‡ä¸€ä¸ªå•ç‹¬çš„ {[3 x 3] x 256 + BN + Leaky ReLU} Convolutional å’Œä¸€ä¸ª 1 x 1 x 255 çº¯å·ç§¯ conv2dï¼Œå¾—åˆ° 52 x 52 x 255 çš„ç‰¹å¾å›¾ Y3ï¼Œå¯è¯†åˆ« 52 x 52 = 2704 ä¸ªå°ç‰©ä½“ã€‚ä¸¤ä¸ªæ³¨æ„ç‚¹ï¼š  ä¸Šé‡‡æ ·ï¼ˆup samplingï¼‰æ–¹æ³•åŒ…æ‹¬ï¼šåŒçº¿æ€§æ’å€¼ï¼ˆç®€å•ï¼Œä¸éœ€è¦å­¦ä¹ å‚æ•°ï¼‰å’Œåå·ç§¯ï¼Œä¸çŸ¥é“ YOLO V3 é‡‡ç”¨å“ªç§ã€‚  è¾“å‡ºç‰¹å¾ç»´åº¦ä¸­ 255 = [ 80 class + 4 (x,y,w,h) + 1 confidence ] x 3 bbox4.3. æŸå¤±å‡½æ•°5. å‚è€ƒæ–‡çŒ®[1] XçŒª. YOLO v1æ·±å…¥ç†è§£. ç®€ä¹¦"
  },
  
  {
    "title": "è®¡ç®—æœºè§†è§‰ï¼ˆTwo-Stage ç›®æ ‡æ£€æµ‹ï¼‰",
    "url": "/posts/CV-object-detection-2stage/",
    "categories": "Academic, Knowledge",
    "tags": "deep learning, computer vision",
    "date": "2021-06-08 09:08:49 +0800",
    





    
    "snippet": "æœ¬æ–‡ä»‹ç»äº†è®¡ç®—æœºè§†è§‰ä¸­ç›®æ ‡æ£€æµ‹é—®é¢˜çš„åŸºç¡€ç ”ç©¶å’Œå†å²ã€‚  1. å‰è¨€          1.1. AlexNet      1.2. VGG16        2. R-CNN  3. Fast R-CNN  4. Faster R-CNN  5. å‚è€ƒæ–‡çŒ®1. å‰è¨€å›¾ç‰‡åˆ†ç±»ä»»åŠ¡æˆ‘ä»¬å·²ç»ç†Ÿæ‚‰äº†ï¼Œå°±æ˜¯ç®—æ³•å¯¹å…¶ä¸­çš„å¯¹è±¡è¿›è¡Œåˆ†ç±»ã€‚è€Œä»Šå¤©æˆ‘ä»¬è¦äº†è§£æ„å»ºç¥ç»ç½‘ç»œçš„å¦ä¸€ä¸ªé—®é¢˜ï¼Œå³ç›®æ ‡æ£€æµ‹é—®é¢˜ã€‚è¿™æ„å‘³ç€ï¼Œæˆ‘...",
    "content": "æœ¬æ–‡ä»‹ç»äº†è®¡ç®—æœºè§†è§‰ä¸­ç›®æ ‡æ£€æµ‹é—®é¢˜çš„åŸºç¡€ç ”ç©¶å’Œå†å²ã€‚  1. å‰è¨€          1.1. AlexNet      1.2. VGG16        2. R-CNN  3. Fast R-CNN  4. Faster R-CNN  5. å‚è€ƒæ–‡çŒ®1. å‰è¨€å›¾ç‰‡åˆ†ç±»ä»»åŠ¡æˆ‘ä»¬å·²ç»ç†Ÿæ‚‰äº†ï¼Œå°±æ˜¯ç®—æ³•å¯¹å…¶ä¸­çš„å¯¹è±¡è¿›è¡Œåˆ†ç±»ã€‚è€Œä»Šå¤©æˆ‘ä»¬è¦äº†è§£æ„å»ºç¥ç»ç½‘ç»œçš„å¦ä¸€ä¸ªé—®é¢˜ï¼Œå³ç›®æ ‡æ£€æµ‹é—®é¢˜ã€‚è¿™æ„å‘³ç€ï¼Œæˆ‘ä»¬ä¸ä»…è¦ç”¨ç®—æ³•åˆ¤æ–­å›¾ç‰‡ä¸­æ˜¯ä¸æ˜¯ä¸€è¾†æ±½è½¦ï¼Œ è¿˜è¦åœ¨å›¾ç‰‡ä¸­æ ‡è®°å‡ºå®ƒçš„ä½ç½®ï¼Œ ç”¨è¾¹æ¡†æˆ–çº¢è‰²æ–¹æ¡†æŠŠæ±½è½¦åœˆèµ·æ¥ï¼Œ è¿™å°±æ˜¯ç›®æ ‡æ£€æµ‹é—®é¢˜ã€‚ å…¶ä¸­â€œå®šä½â€çš„æ„æ€æ˜¯åˆ¤æ–­æ±½è½¦åœ¨å›¾ç‰‡ä¸­çš„å…·ä½“ä½ç½®ã€‚è¿‘å‡ å¹´æ¥ï¼Œç›®æ ‡æ£€æµ‹ç®—æ³•å–å¾—äº†å¾ˆå¤§çš„çªç ´ã€‚æ¯”è¾ƒæµè¡Œçš„ç®—æ³•å¯ä»¥åˆ†ä¸ºä¸¤ç±»ï¼Œä¸€ç±»æ˜¯åŸºäº Region Proposal çš„ R-CNN ç³»ç®—æ³•ï¼ˆR-CNNï¼ŒFast R-CNN, Faster R-CNNç­‰ï¼‰ï¼Œå®ƒä»¬æ˜¯two-stageçš„ï¼Œéœ€è¦å…ˆç®—æ³•äº§ç”Ÿç›®æ ‡å€™é€‰æ¡†ï¼Œä¹Ÿå°±æ˜¯ç›®æ ‡ä½ç½®ï¼Œç„¶åå†å¯¹å€™é€‰æ¡†åšåˆ†ç±»ä¸å›å½’ã€‚è€Œå¦ä¸€ç±»æ˜¯ Yoloï¼ŒSSD è¿™ç±» one-stage ç®—æ³•ï¼Œå…¶ä»…ä»…ä½¿ç”¨ä¸€ä¸ªå·ç§¯ç¥ç»ç½‘ç»œ CNN ç›´æ¥é¢„æµ‹ä¸åŒç›®æ ‡çš„ç±»åˆ«ä¸ä½ç½®ã€‚ç¬¬ä¸€ç±»æ–¹æ³•æ˜¯å‡†ç¡®åº¦é«˜ä¸€äº›ï¼Œä½†æ˜¯é€Ÿåº¦æ…¢ï¼Œä½†æ˜¯ç¬¬äºŒç±»ç®—æ³•æ˜¯é€Ÿåº¦å¿«ï¼Œä½†æ˜¯å‡†ç¡®æ€§è¦ä½ä¸€äº›ã€‚1.1. AlexNetAlexNet çš„ç½‘ç»œç»“æ„å¦‚ä¸‹ï¼š      Conv 11$\\times$11s4,96 / ReLU    è¾“å…¥ä¸º $224 \\times 224 \\times 3$ çš„å›¾åƒï¼Œæ¯ä¸ªé€šé“åŒ…å« 96 ä¸ª $11\\times 11,\\ stride=4$ çš„å·ç§¯æ ¸ï¼Œä¸€å…±å‚æ•°é‡ä¸º\\[3\\ channel \\times 11\\times 11\\times 96\\ kernels + 96\\ bias = 34944 \\approx35K\\ params\\]    å·ç§¯åå¾—åˆ°    wide = (224 + 2 * padding - kernel_size) / stride + 1 = 54height = (224 + 2 * padding - kernel_size) / stride + 1 = 54dimention = 96            Local Response Norm    å±€éƒ¨å“åº”å½’ä¸€åŒ–å±‚å®Œæˆä¸€ç§ â€œä¸´è¿‘æŠ‘åˆ¶â€ æ“ä½œï¼Œå¯¹å±€éƒ¨è¾“å…¥åŒºåŸŸè¿›è¡Œå½’ä¸€åŒ–ã€‚å€Ÿé‰´äº†ç¥ç»ç”Ÿç‰©å­¦ä¸­ä¾§æŠ‘åˆ¶ï¼ˆlateral inhibitio ï¼‰çš„æ¦‚å¿µï¼ŒæŒ‡çš„æ˜¯è¢«æ¿€æ´»çš„ç¥ç»å…ƒä¼šæŠ‘åˆ¶å®ƒå‘¨å›´çš„ç¥ç»å…ƒï¼Œä»è€Œå®ç°å±€éƒ¨æŠ‘åˆ¶ã€‚ä½†æ˜¯ï¼Œåœ¨ 2015 å¹´ Very Deep Convolutional Networks for Large-Scale Image Recognition æåˆ° LRN åŸºæœ¬æ²¡ä»€ä¹ˆç”¨ã€‚å› è€Œåœ¨åé¢çš„ Googlenetï¼Œä»¥åŠä¹‹åçš„ä¸€äº› CNN æ¶æ„æ¨¡å‹ï¼ŒLRN å·²ç»ä¸å†ä½¿ç”¨ï¼Œå› ä¸ºå‡ºç°äº†æ›´åŠ æœ‰è¯´æœèƒ½åŠ›çš„æ‰¹é‡å½’ä¸€åŒ–ï¼ˆBatch Normalization, BNï¼‰ã€‚        Max Poolæœ€å¤§æ± åŒ–ï¼Œä»£æ›¿ä¹‹å‰ç½‘ç»œçš„å¹³å‡æ± åŒ–ã€‚é‡‡ç”¨ 3$\\times$3å·ç§¯æ ¸ï¼Œstride = 2ï¼Œå› æ­¤ä¼šå‡ºç°é‡å æ± åŒ–çš„ç°è±¡ã€‚å¯ä»¥å‡å°è¿‡æ‹Ÿåˆã€‚æ± åŒ–åå¾—åˆ°ï¼š    wide = (54 + 2 * padding - kernel_size) / stride + 1 = 54height = (54 + 2 * padding - kernel_size) / stride + 1 = 54dimention = 96        1.2. VGG16        ICLR. Very Deep Convolutional Networks for Large-Scale Image RecognitionVisual Geometry Group  ç›¸æ¯” AlexNet çš„ä¸€ä¸ªæ”¹è¿›æ˜¯é‡‡ç”¨è¿ç»­çš„å‡ ä¸ª 3x3 çš„å·ç§¯æ ¸ä»£æ›¿ AlexNet ä¸­çš„è¾ƒå¤§å·ç§¯æ ¸ï¼ˆ11x11ï¼Œ7x7ï¼Œ5x5ï¼‰ã€‚  ä½¿ç”¨äº† 3 ä¸ª 3x3 å·ç§¯æ ¸æ¥ä»£æ›¿ 7x7 å·ç§¯æ ¸  ä½¿ç”¨äº† 2 ä¸ª 3x3 å·ç§¯æ ¸æ¥ä»£æ›¿ 5*5 å·ç§¯æ ¸å¯¹äºç»™å®šçš„æ„Ÿå—é‡ï¼ˆä¸è¾“å‡ºæœ‰å…³çš„è¾“å…¥å›¾ç‰‡çš„å±€éƒ¨å¤§å°ï¼‰ï¼Œé‡‡ç”¨å †ç§¯çš„å°å·ç§¯æ ¸æ˜¯ä¼˜äºé‡‡ç”¨å¤§çš„å·ç§¯æ ¸ï¼Œå› ä¸ºå¤šå±‚éçº¿æ€§å±‚å¯ä»¥å¢åŠ ç½‘ç»œæ·±åº¦æ¥ä¿è¯å­¦ä¹ æ›´å¤æ‚çš„æ¨¡å¼ï¼Œè€Œä¸”ä»£ä»·è¿˜æ¯”è¾ƒå°ï¼ˆå‚æ•°æ›´å°‘ï¼‰ã€‚VGGç½‘ç»œçš„ç»“æ„ éå¸¸ä¸€è‡´  æ‰€æœ‰çš„å·ç§¯å±‚éƒ½æ˜¯ 3x3x3,stride=1,padding=1ï¼ˆå›¾åƒå°ºå¯¸ä¿æŒä¸å˜ï¼‰ï¼›  æ‰€æœ‰çš„æ± åŒ–å±‚éƒ½æ˜¯ 2x2,padding=0,stride=2 çš„æœ€å¤§æ± åŒ–ï¼ˆå›¾åƒå°ºå¯¸ç¼©å°ä¸€åŠï¼‰ã€‚VGG16 ç‰¹æŒ‡ D åˆ—åŒ…å« 16 ä¸ªæƒé‡å±‚çš„ç½‘ç»œç»“æ„ï¼Œè€Œ VGG19 ç‰¹æŒ‡ E åˆ—åŒ…å« 19 ä¸ªæƒé‡å±‚çš„ç½‘ç»œç»“æ„ã€‚è¾“å…¥ $224\\times 224 \\times 3\\ channel$ çš„å›¾åƒã€‚é¦–å…ˆç»è¿‡ 2 æ¬¡ 64 ä¸ªæ»¤æ³¢å™¨çš„å·ç§¯ã€‚å¥—å…¬å¼è®¡ç®—å‘ç°å·ç§¯åè¾“å‡ºå°ºå¯¸ä¸å˜\\[H/W = (224+2\\times padding - kernel)/stride + 1 = 224\\]ç„¶åç»è¿‡ 2x2 æœ€å¤§æ± åŒ–åå¤§å°ç¼©å°ä¸ºåŸæ¥çš„ä¸€åŠã€‚æŒ‰ç…§ç½‘ç»œç»“æ„ç»§ç»­è¿›è¡Œï¼Œæœ€ç»ˆç»è¿‡äº”æ¬¡æ± åŒ–å¾—åˆ° 7x7x512 çš„ feature mapã€‚ä¼ å…¥ 4096 ç»´çš„å…¨è¿æ¥å±‚ï¼ˆFC å±‚ï¼‰ï¼Œå‚æ•°ä¸ªæ•°ä¸º $7\\times 7\\times 512\\times 4096+4096\\ bias=102764544$ï¼Œç»è¿‡ ReLUï¼Œåå†æ¥ä¸€ä¸ª 4096 ç»´çš„ FC å±‚ï¼Œå‚æ•°ä¸ªæ•°ä¸º $4096\\times 4096=16777216$ï¼Œç»è¿‡ ReLUï¼Œæœ€åé€å…¥ 1000 ç»´ FC å±‚ï¼Œåæ¥ softmax è¿›è¡Œåˆ†ç±»ã€‚2. R-CNN      Ross Girshickï¼ŒJeffDonahue,TrevorDarrell,Jitendra Malik. Rich feature hierarchies for accurate oject detection and semantic segmentation  ç›®æ ‡æ£€æµ‹æœ‰ä¸¤ä¸ªä¸»è¦ä»»åŠ¡ï¼šç‰©ä½“åˆ†ç±»å’Œå®šä½ï¼Œä¸ºäº†å®Œæˆè¿™ä¸¤ä¸ªä»»åŠ¡ï¼ŒR-CNNå€Ÿé‰´äº†æ»‘åŠ¨çª—å£æ€æƒ³ï¼Œ é‡‡ç”¨å¯¹åŒºåŸŸè¿›è¡Œè¯†åˆ«çš„æ–¹æ¡ˆã€‚RCNNæ˜¯ä¸€ä¸ª two-stage ï¼ˆä¸¤é˜¶æ®µï¼Œä¸Šå›¾ä¸­ 1+2 æ˜¯ç¬¬ä¸€é˜¶æ®µï¼Œ3+4 æ˜¯ç¬¬äºŒé˜¶æ®µï¼‰ç›®æ ‡æ£€æµ‹ç®—æ³•ï¼Œå…·ä½“å®ç°æ­¥éª¤å¦‚ä¸‹ï¼š      æå–å€™é€‰åŒºåŸŸã€‚è¾“å…¥ä¸€å¼ å›¾ç‰‡ï¼Œé€šè¿‡æŒ‡å®šç®—æ³•ä»å›¾ç‰‡ä¸­æå– 2000 ä¸ªç±»åˆ«ç‹¬ç«‹çš„å€™é€‰åŒºåŸŸï¼ˆå¯èƒ½ç›®æ ‡åŒºåŸŸï¼‰ã€‚R-CNN ç›®æ ‡æ£€æµ‹é¦–å…ˆéœ€è¦è·å–2000ä¸ªç›®æ ‡å€™é€‰åŒºåŸŸï¼Œèƒ½å¤Ÿç”Ÿæˆå€™é€‰åŒºåŸŸçš„æ–¹æ³•å¾ˆå¤šï¼Œæ¯”å¦‚ï¼š          objectness      selective search      category-independen object proposals      constrained parametric min-cuts (CPMC)      multi-scale combinatorial grouping      Ciresan        R-CNN é‡‡ç”¨çš„æ˜¯ Selective Search ç®—æ³•ã€‚ç®€å•æ¥è¯´å°±æ˜¯é€šè¿‡ä¸€äº›ä¼ ç»Ÿå›¾åƒå¤„ç†æ–¹æ³•å°†å›¾åƒåˆ†æˆå¾ˆå¤šå°å°ºå¯¸åŒºåŸŸï¼Œç„¶åæ ¹æ®å°å°ºå¯¸åŒºåŸŸçš„ç‰¹å¾åˆå¹¶å°å°ºå¯¸å¾—åˆ°å¤§å°ºå¯¸åŒºåŸŸï¼Œä»¥å®ç°å€™é€‰åŒºåŸŸçš„é€‰å–ã€‚ æå–å€™é€‰åŒºåŸŸéå¸¸è€—æ—¶ï¼Œå¯èƒ½æ¯”å®é™…å¯¹è±¡æ£€æµ‹è¿˜è¦è€—æ—¶ã€‚    å€™é€‰åŒºåŸŸæœ‰ 2000 ä¸ªï¼Œæ‰€ä»¥å¾ˆå¤šä¼šè¿›è¡Œé‡å ã€‚é’ˆå¯¹æ¯ä¸ªç±»ï¼Œé€šè¿‡è®¡ç®— IoU æŒ‡æ ‡ï¼ˆäº¤å¹¶æ¯”ï¼‰ï¼Œé‡‡å–éæå¤§æ€§æŠ‘åˆ¶ï¼Œä»¥æœ€é«˜åˆ†çš„åŒºåŸŸä¸ºåŸºç¡€ï¼Œå‰”é™¤æ‰é‚£äº›é‡å ä½ç½®çš„åŒºåŸŸã€‚    æå–ç‰¹å¾å‘é‡ã€‚å¯¹äºä¸Šè¿°è·å–çš„å€™é€‰åŒºåŸŸï¼Œä½¿ç”¨ AlexNet (2012) æå– 4096 ç»´ç‰¹å¾å‘é‡ã€‚ï¼ˆAlexNet çš„è¾“å…¥å›¾åƒå¤§å°æ˜¯ 227x227ï¼Œè€Œé€šè¿‡ Selective Search äº§ç”Ÿçš„å€™é€‰åŒºåŸŸå¤§å°ä¸ä¸€ï¼Œä¸ºäº†ä¸ AlexNet å…¼å®¹ï¼ŒR-CNN é‡‡ç”¨äº†éå¸¸æš´åŠ›çš„æ‰‹æ®µï¼Œé‚£å°±æ˜¯æ— è§†å€™é€‰åŒºåŸŸçš„å¤§å°å’Œå½¢çŠ¶ï¼Œç»Ÿä¸€å˜æ¢åˆ° 227x227 çš„å°ºå¯¸ã€‚æœ‰ä¸€ä¸ªç»†èŠ‚ï¼Œåœ¨å¯¹ Region è¿›è¡Œå˜æ¢çš„æ—¶å€™ï¼Œé¦–å…ˆå¯¹è¿™äº›åŒºåŸŸè¿›è¡Œè†¨èƒ€å¤„ç†ï¼Œåœ¨å…¶ box å‘¨å›´é™„åŠ äº† p ä¸ªåƒç´ ï¼Œä¹Ÿå°±æ˜¯äººä¸ºæ·»åŠ äº†è¾¹æ¡†ï¼Œåœ¨è¿™é‡Œ p=16ã€‚ï¼‰ç½‘ç»œè®­ç»ƒè¿‡ç¨‹å¦‚ä¸‹ï¼š          é¦–å…ˆè¿›è¡Œæœ‰ç›‘ç£é¢„è®­ç»ƒï¼šä½¿ç”¨ ImageNet è®­ç»ƒç½‘ç»œå‚æ•°ï¼Œè¿™é‡Œåªè®­ç»ƒå’Œåˆ†ç±»æœ‰å…³çš„å‚æ•°ï¼Œå› ä¸º ImageNet æ•°æ®åªæœ‰åˆ†ç±»ï¼Œæ²¡æœ‰ä½ç½®æ ‡æ³¨ã€‚è¾“å…¥å›¾ç‰‡å°ºå¯¸è°ƒæ•´ä¸º 227x227ï¼Œæœ€åä¸€å±‚è¾“å‡ºï¼š4096 ç»´å‘é‡ -&gt; 1000 ç»´å‘é‡çš„æ˜ å°„ï¼ˆå› ä¸º ImageNet æŒ‘æˆ˜ä½¿ç”¨äº†ä¸€ä¸ªâ€œä¿®å‰ªâ€çš„1000 ä¸ªéé‡å ç±»çš„åˆ—è¡¨ï¼‰ã€‚      ç„¶ååœ¨ç‰¹å®šæ ·æœ¬ä¸‹çš„å¾®è°ƒï¼ˆè¿ç§»å­¦ä¹ ï¼‰ ï¼šé‡‡ç”¨è®­ç»ƒå¥½çš„ AlexNet æ¨¡å‹è¿›è¡Œ PASCAL VOC 2007 æ ·æœ¬é›†ä¸‹çš„å¾®è°ƒï¼Œå­¦ä¹ ç‡ = 0.001ï¼Œæœ€åä¸€å±‚è¾“å‡ºï¼š4096 ç»´å‘é‡ -&gt; 21 ç»´å‘é‡çš„æ˜ å°„ï¼ˆPASCAL VOC 2007 æ ·æœ¬é›†åŒ…å« 20 ä¸ªç±» + èƒŒæ™¯ç±»å…± 21 ç±»ï¼Œæ—¢æœ‰å›¾åƒä¸­ç‰©ä½“ç±»åˆ«æ ‡ç­¾ï¼Œä¹Ÿæœ‰å›¾åƒä¸­ç‰©ä½“ä½ç½®æ ‡ç­¾ï¼‰ã€‚å°†å€™é€‰åŒºåŸŸä¸ GroundTrue ä¸­çš„ box æ ‡ç­¾ç›¸æ¯”è¾ƒï¼Œå¦‚æœ IoU &gt; 0.5ï¼Œè¯´æ˜ä¸¤ä¸ªå¯¹è±¡é‡å çš„ä½ç½®æ¯”è¾ƒå¤šï¼Œäºæ˜¯å°±å¯ä»¥è®¤ä¸ºè¿™ä¸ªå€™é€‰åŒºåŸŸæ˜¯æ­£ï¼Œå¦åˆ™å°±æ˜¯è´Ÿã€‚mini-batch ä¸º 128ï¼ˆ32 ä¸ªæ­£æ ·æœ¬å’Œ 96 ä¸ªè´Ÿæ ·æœ¬ï¼‰ã€‚        SVM åˆ†ç±»ã€‚å¯¹äºæ¯ä¸ªåŒºåŸŸç›¸åº”çš„ç‰¹å¾å‘é‡ï¼Œåˆ©ç”¨ SVM è¿›è¡Œåˆ†ç±»ï¼Œå¹¶é€šè¿‡ä¸€ä¸ª bounding box regression è°ƒæ•´ç›®æ ‡åŒ…å›´æ¡†çš„å¤§å°ã€‚          å°† 2000Ã—4096 ç»´ç‰¹å¾ï¼ˆ2000 ä¸ªå€™é€‰æ¡†ï¼Œæ¯ä¸ªå€™é€‰æ¡†è·å¾— 4096 çš„ç‰¹å¾å‘é‡ï¼‰ä¸ 20 ä¸ª SVM ç»„æˆçš„æƒå€¼çŸ©é˜µ 4096Ã—20 ç›¸ä¹˜ï¼ˆæ¯ä¸€ä¸ªç‰¹å¾å‘é‡åˆ†åˆ«åˆ¤æ–­ 20 æ¬¡ç±»åˆ«ï¼Œå› ä¸º SVM æ˜¯äºŒåˆ†ç±»å™¨ï¼Œæ¯ä¸ªç§ç±»è®­ç»ƒä¸€ä¸ª SVM åˆ™æœ‰ 20 ä¸ª SVMï¼‰ï¼Œè·å¾— 2000Ã—20 ç»´çŸ©é˜µè¡¨ç¤ºæ¯ä¸ªå€™é€‰æ¡†æ˜¯æŸä¸ªç‰©ä½“ç±»åˆ«çš„å¾—åˆ†ã€‚      ã€IOU&lt;0.3è¢«ä½œä¸ºè´Ÿä¾‹ï¼Œground-truthæ˜¯æ­£ä¾‹ï¼Œå…¶ä½™çš„å…¨éƒ¨ä¸¢å¼ƒã€‘      ç„¶ååˆ†åˆ«å¯¹ä¸Šè¿° 2000Ã—20 ç»´çŸ©é˜µä¸­æ¯åˆ—ï¼ˆå³æ¯ä¸€ç±»ï¼‰è¿›è¡Œéæå¤§å€¼æŠ‘åˆ¶ï¼Œå‰”é™¤é‡å å€™é€‰æ¡†ï¼Œå¾—åˆ°è¯¥åˆ—ï¼ˆå³è¯¥ç±»ï¼‰ä¸­å¾—åˆ†æœ€é«˜çš„ä¸€äº›å€™é€‰æ¡†ã€‚                  éæå¤§å€¼æŠ‘åˆ¶ï¼šåŒä¸€ä¸ªç›®æ ‡å¯èƒ½æœ‰å¥½å‡ ä¸ªæ¡†ï¼ˆæ¯ä¸€ä¸ªæ¡†éƒ½å¸¦æœ‰ä¸€ä¸ªåˆ†ç±»å™¨å¾—åˆ†ï¼‰ï¼Œç›®æ ‡æ˜¯ä¸€ç±»åªä¿ç•™ä¸€ä¸ªæœ€ä¼˜çš„æ¡†ã€‚                      å°†æ‰€æœ‰æ¡†çš„å¾—åˆ†æ’åºï¼Œé€‰ä¸­æœ€é«˜åˆ†åŠå…¶å¯¹åº”çš„æ¡†;            éå†å…¶ä½™çš„æ¡†ï¼ŒæŒ‘å‡ºå…¶ä¸­ç¬¬äºŒå¤§å¾—åˆ†æ¡†ï¼Œå¦‚æœå’Œå½“å‰æœ€é«˜åˆ†æ¡†çš„é‡å é¢ç§¯ï¼ˆIoUï¼‰å¤§äºä¸€å®šé˜ˆå€¼ï¼Œå°†å…¶åˆ é™¤ï¼Œå³è®¤ä¸ºä»–ä¸æœ€é«˜åˆ†æ¡†é‡å¤äº†ï¼Œéƒ½æŒ‡å‘åŒä¸€ä¸ªç›®æ ‡ã€‚å¦åˆ™ï¼Œæˆ‘ä»¬è®¤ä¸ºè¿™ä¸ªåŒºåŸŸæœ‰ä¸¤ä¸ªè¯¥ç›®æ ‡ã€‚            ä»æœªå¤„ç†çš„æ¡†ä¸­ç»§ç»­é€‰ä¸€ä¸ªå¾—åˆ†æœ€é«˜çš„ï¼Œé‡å¤ä¸Šè¿°è¿‡ç¨‹ã€‚                                bounding box å›å½’ã€‚å— DPM çš„å¯å‘ï¼Œä½œè€…è®­ç»ƒäº†ä¸€ä¸ªçº¿æ€§çš„å›å½’æ¨¡å‹ï¼Œè¿™ä¸ªæ¨¡å‹èƒ½å¤Ÿé’ˆå¯¹å€™é€‰åŒºåŸŸçš„ pool5 æ•°æ®é¢„æµ‹ä¸€ä¸ªæ–°çš„ box ä½ç½®ã€‚å…·ä½“ç»†èŠ‚ï¼Œä½œè€…æ”¾åœ¨è¡¥å……ææ–™å½“ä¸­ã€‚ç¼ºç‚¹ï¼š  è®­ç»ƒåˆ†å¤šæ­¥ã€‚R-CNN çš„è®­ç»ƒå…ˆè¦fine tuning ä¸€ä¸ªé¢„è®­ç»ƒçš„ç½‘ç»œï¼ˆAlexNetï¼‰ï¼Œç„¶åé’ˆå¯¹æ¯ä¸ªç±»åˆ«éƒ½è®­ç»ƒä¸€ä¸ª SVM åˆ†ç±»å™¨ï¼Œæœ€åè¿˜è¦å¯¹ bounding-box è¿›è¡Œå›å½’ï¼Œå¦å¤– region proposal ä¹Ÿè¦å•ç‹¬ç”¨ selective search çš„æ–¹å¼è·å¾—ï¼Œæ­¥éª¤æ¯”è¾ƒç¹çï¼›  æ—¶é—´å’Œå†…å­˜æ¶ˆè€—æ¯”è¾ƒå¤§ã€‚åœ¨è®­ç»ƒ SVM å’Œå›å½’çš„æ—¶å€™éœ€è¦ç”¨ç½‘ç»œè®­ç»ƒçš„ç‰¹å¾ï¼ˆ2000Ã—4096=819ä¸‡å‚æ•°ï¼‰ä½œä¸ºè¾“å…¥ï¼Œç‰¹å¾ä¿å­˜åœ¨ç£ç›˜ä¸Šå†è¯»å…¥çš„æ—¶é—´æ¶ˆè€—è¿˜æ˜¯æ¯”è¾ƒå¤§çš„ï¼›  æµ‹è¯•çš„æ—¶å€™ä¹Ÿæ¯”è¾ƒæ…¢ï¼Œæ¯å¼ å›¾ç‰‡çš„æ¯ä¸ª region proposal éƒ½è¦åšå·ç§¯ï¼Œé‡å¤æ“ä½œå¤ªå¤šã€‚3. Fast R-CNN  æå–ç‰¹å¾å›¾ï¼ˆfeature mapsï¼‰ã€‚è¾“å…¥åŸå§‹å›¾åƒï¼Œä¸»å¹²ç½‘ç»œé‡‡ç”¨ VGG16 æ¥æå–ç‰¹å¾å›¾ï¼Œ3 å¤§æ”¹è¿›ï¼š          å®ç°å¤§éƒ¨åˆ† end-to-end è®­ç»ƒï¼ˆæproposalé˜¶æ®µé™¤å¤–ï¼‰ã€‚æ‰€æœ‰çš„ç‰¹å¾éƒ½æš‚å­˜åœ¨æ˜¾å­˜ä¸­ï¼Œå°±ä¸éœ€è¦é¢å¤–çš„ç£ç›˜ç©ºé—´ã€‚      joint training ï¼ˆSVMåˆ†ç±»ï¼Œbboxå›å½’ è”åˆèµ·æ¥åœ¨ CNN é˜¶æ®µè®­ç»ƒï¼‰æŠŠæœ€åä¸€å±‚çš„Softmaxæ¢æˆä¸¤ä¸ªï¼Œä¸€ä¸ªæ˜¯å¯¹åŒºåŸŸçš„åˆ†ç±»Softmaxï¼ˆåŒ…æ‹¬èƒŒæ™¯ï¼‰ï¼Œå¦ä¸€ä¸ªæ˜¯å¯¹bounding boxçš„å¾®è°ƒã€‚è¿™ä¸ªç½‘ç»œæœ‰ä¸¤ä¸ªè¾“å…¥ï¼Œä¸€ä¸ªæ˜¯æ•´å¼ å›¾ç‰‡ï¼Œå¦ä¸€ä¸ªæ˜¯å€™é€‰proposalsç®—æ³•äº§ç”Ÿçš„å¯èƒ½proposalsçš„åæ ‡ã€‚ï¼ˆå¯¹äºSVMå’ŒSoftmaxï¼Œè®ºæ–‡åœ¨SVMå’ŒSoftmaxçš„å¯¹æ¯”å®éªŒä¸­è¯´æ˜ï¼ŒSVMçš„ä¼˜åŠ¿å¹¶ä¸æ˜æ˜¾ï¼Œæ•…ç›´æ¥ç”¨Softmaxå°†æ•´ä¸ªç½‘ç»œæ•´åˆè®­ç»ƒæ›´å¥½ã€‚å¯¹äºè”åˆè®­ç»ƒï¼š åŒæ—¶åˆ©ç”¨äº†åˆ†ç±»çš„ç›‘ç£ä¿¡æ¯å’Œå›å½’çš„ç›‘ç£ä¿¡æ¯ï¼Œä½¿å¾—ç½‘ç»œè®­ç»ƒçš„æ›´åŠ é²æ£’ï¼Œæ•ˆæœæ›´å¥½ã€‚è¿™ä¸¤ç§ä¿¡æ¯æ˜¯å¯ä»¥æœ‰æ•ˆè”åˆçš„ã€‚ï¼‰      æå‡ºäº†ä¸€ä¸ªRoIå±‚ï¼Œç®—æ˜¯SPPçš„å˜ç§ï¼ŒSPPæ˜¯poolingæˆå¤šä¸ªå›ºå®šå°ºåº¦ï¼ŒRoIåªpoolingåˆ°å•ä¸ªå›ºå®šçš„å°ºåº¦ ï¼ˆè®ºæ–‡é€šè¿‡å®éªŒå¾—åˆ°çš„ç»“è®ºæ˜¯å¤šå°ºåº¦å­¦ä¹ èƒ½æé«˜ä¸€ç‚¹ç‚¹mAPï¼Œä¸è¿‡è®¡ç®—é‡æˆå€çš„å¢åŠ ï¼Œæ•…å•å°ºåº¦è®­ç»ƒçš„æ•ˆæœæ›´å¥½ã€‚ï¼‰        æå–å€™é€‰æ¡†ï¼ˆregion proposalsï¼‰ã€‚è¾“å…¥åŸå§‹å›¾åƒï¼Œé€šè¿‡ selective search æå–æ„Ÿå…´è¶£åŒºåŸŸã€‚æ¯ä¸ªåŒºåŸŸçš„åæ ‡ç”¨å››å…ƒæ•°ç»„ $[r,c,h,w]$ ï¼ˆå·¦ä¸Šè§’çš„è¡Œåˆ—åæ ‡+é«˜å’Œå®½ï¼‰å®šä¹‰ï¼Œè¯¥å››å…ƒæ•°ç»„ç›¸å¯¹äºåŸå§‹å›¾åƒï¼Œéƒ½æœ‰å¯¹åº”çš„ ground truth BBox å’Œ ground truth class labelã€‚  å°†å€™é€‰æ¡†åæ ‡æ˜ å°„åˆ° feature map ä¸Šã€‚é‡‡ç”¨ VGG16 æ—¶ï¼Œæœ€åä¸€ä¸ª max pooling å±‚åæ¥ ROI pooling å±‚ï¼ŒåŒºåŸŸåæ ‡ç»è¿‡ 5 æ¬¡æ± åŒ–ï¼Œè¾“å‡ºçš„ feature maps æ˜¯åŸå›¾åƒçš„ 1/32ï¼ˆ16x16x512ï¼‰ï¼Œåˆ™å°†åŸå›¾åƒå¯¹åº”çš„å››å…ƒæ•°ç»„è½¬æ¢åˆ° feature maps ä¸Šå°±æ˜¯æ¯ä¸ªå€¼éƒ½é™¤ä»¥ 32 å¹¶é‡åŒ–åˆ°æœ€æ¥è¿‘çš„æ•´æ•°ï¼Œå¾—åˆ°æ˜ å°„çš„åæ ‡ï¼Œå³ä¸º ROI feture mapã€‚åœ¨ä¸Šå›¾çš„ä¾‹å­ä¸­ï¼Œä¸€ä¸ª ROI çš„åŸå§‹å¤§å°ä¸º 145x200 ï¼Œå·¦ä¸Šè§’è®¾ç½®ä¸º (192x296) ã€‚é™¤ä»¥ 32ï¼ˆæ¯”ä¾‹å› å­ï¼‰å¹¶å–æ•´ï¼Œå·¦ä¸Šè§’å˜ä¸º (9,6)ï¼Œé«˜å®½å˜ä¸º 4x6ï¼Œå¾—åˆ°çš„ ROI feature maps ä¸º $[9,6,4,6]$ã€‚æ³¨æ„ï¼Œæ˜ å°„è¿‡ç¨‹å­˜åœ¨ä¸€æ¬¡é‡åŒ–æŸå¤±ã€‚æŸå¤±çš„ä¿¡æ¯å¦‚ä¸Šå›¾è“è‰²åŒºåŸŸæ‰€ç¤ºï¼ˆä¹‹åä¼šæœ‰æ”¹è¿›çš„ ROI Align æ–¹æ³•å»é™¤æŸå¤±ï¼‰ã€‚      ROI poolingã€‚è¾“å…¥ conv5 å±‚è¾“å‡ºçš„ feature maps ä»¥åŠ ROI åœ¨è¯¥å±‚ä¸Šçš„æ˜ å°„ï¼ˆå³ ROI feature mapsï¼‰ï¼Œå°†å…¶è½¬æ¢ä¸ºå›ºå®šå¤§å° feature maps è¾“å‡ºï¼Œä»¥ä¾¿é€å…¥åç»­å›ºå®šé•¿åº¦çš„ FC å±‚ã€‚å‡è®¾ç»è¿‡ ROI æ± åŒ–åçš„å›ºå®šå¤§å°ä¸ºæ˜¯ä¸€ä¸ªè¶…å‚æ•° $H\\times W$ ï¼Œå› ä¸ºè¾“å…¥çš„ ROI feature map å¤§å°ä¸ä¸€æ ·ï¼Œå‡è®¾ä¸º $h\\times w$ï¼Œéœ€è¦å¯¹è¿™ä¸ª feature map è¿›è¡Œæ± åŒ–æ¥å‡å°å°ºå¯¸ï¼Œé‚£ä¹ˆå¯ä»¥è®¡ç®—å‡ºæ± åŒ–çª—å£çš„å°ºå¯¸ä¸ºï¼š$(h/H)\\times (w/W)$ï¼Œå³ç”¨è¿™ä¸ªè®¡ç®—å‡ºçš„çª—å£å¯¹ RoI feature map åš max poolingï¼ŒPooling å¯¹æ¯ä¸€ä¸ª feature map é€šé“éƒ½æ˜¯ç‹¬ç«‹çš„ã€‚å‡è®¾æˆ‘ä»¬éœ€è¦å°†ä¸Šé¢å¾—åˆ°çš„ 4x6x512 æ± åŒ–ä¸ºå›ºå®šå¤§å°çš„ 3x3x512 feature mapsï¼Œéœ€è¦è¿›è¡Œ (4/3)x(6/3)x512 = 1x2x512 çš„å·ç§¯æ ¸è¿›è¡Œæœ€å¤§æ± åŒ–ï¼Œä¼šä¸¢å¤± ROI çš„æœ€åä¸€è¡Œã€‚å¦‚æ­¤éå†æ¯ä¸ª ROI feature map æœ€ç»ˆå¾—åˆ° Nx3x3x512 çš„çŸ©é˜µã€‚æ³¨æ„ï¼ŒROI Pooling è¿‡ç¨‹å­˜åœ¨ç¬¬äºŒæ¬¡é‡åŒ–æŸå¤±ï¼ˆä¸Šé¢çš„ä¾‹å­ä¸­ä¸ºæœ€åä¸€è¡Œï¼‰ã€‚    å›å½’ä¸åˆ†ç±»ã€‚å°†æ‰€æœ‰å¾—åˆ°çš„å›ºå®šå¤§å°çš„ ROI feature map é€å…¥ä¸¤ä¸ª 4096 ç»´çš„ FC å±‚ï¼Œç„¶ååˆ†åˆ«é€å…¥å¹¶åˆ—çš„ä¸¤ä¸ª 21 å’Œ 84 ç»´çš„FC å±‚ã€‚å‰è€…æ˜¯åˆ†ç±»çš„è¾“å‡ºï¼Œä»£è¡¨æ¯ä¸ª ROI å±äºæ¯ä¸ªç±»åˆ«ï¼ˆ20ç±»+èƒŒæ™¯ï¼‰çš„å¾—åˆ†ï¼Œåè€…æ˜¯å›å½’çš„è¾“å‡ºï¼Œä»£è¡¨æ¯ä¸ª ROI æ‰€å±ç±»åˆ«çš„å››ä¸ªåæ ‡ã€‚åœ¨è®­ç»ƒæ—¶ï¼šæœ€åæ˜¯æŸå¤±å‡½æ•°ï¼ŒåŒ…æ‹¬ä¸¤éƒ¨åˆ†ï¼Œåˆ†ç±»çš„æ˜¯ softmaxWithLossï¼Œè¾“å…¥æ˜¯labelå’Œåˆ†ç±»å±‚è¾“å‡ºçš„å¾—åˆ†ï¼›å›å½’çš„æ˜¯SmoothL1Lossï¼Œè¾“å…¥æ˜¯å›å½’å±‚çš„è¾“å‡ºå’Œ target åæ ‡åŠ weightã€‚åœ¨æµ‹è¯•æ—¶ï¼šæœ€åä¸¤ä¸ª loss å±‚è¦æ”¹æˆä¸€ä¸ª softmax å±‚ï¼Œè¾“å…¥æ˜¯åˆ†ç±»çš„ scoreï¼Œè¾“å‡ºæ¦‚ç‡ã€‚æœ€åå¯¹æ¯ä¸ªç±»åˆ«é‡‡ç”¨éæå¤§æŠ‘åˆ¶ï¼ˆnon-maximun suppressionï¼‰ã€‚Fast R-CNN çš„ä¸»è¦ç¼ºç‚¹åœ¨äº region proposal çš„æå–ä½¿ç”¨ selective searchï¼Œç›®æ ‡æ£€æµ‹æ—¶é—´å¤§å¤šæ¶ˆè€—åœ¨è¿™ä¸Šé¢ï¼ˆæ region proposal éœ€è¦ 2~3 sï¼Œè€Œæç‰¹å¾åˆ†ç±»åªéœ€ 0.32 sï¼‰ï¼Œè¿™ä¹Ÿæ˜¯åç»­ Faster R-CNN çš„æ”¹è¿›æ–¹å‘ä¹‹ä¸€ã€‚4. Faster R-CNN  å°†è¾“å…¥å›¾åƒç¼©æ”¾è‡³å›ºå®šå¤§å° M x Nï¼Œç„¶åé€å…¥ä¸»å¹²ç½‘ç»œï¼ˆæ¯”å¦‚VGG16ï¼‰çš„ 13 ä¸ªå·ç§¯å±‚ã€13 ä¸ª ReLU æ¿€æ´»å‡½æ•°ã€4 ä¸ªæ± åŒ–å±‚ï¼Œå¾—åˆ° M/16 x N/16 x 256 çš„ feature mapsã€‚  feature map åˆ†åˆ«é€å…¥ä¸¤ä¸ªæ¨¡å—ï¼šRegion Proposal Network ï¼ˆRPNï¼‰å’Œ ROI Poolingã€‚          RPN æ¨¡å—ä¸­ï¼ˆå·¦ä¸‹è§’ï¼‰ï¼Œé¦–å…ˆç»è¿‡ 3x3x256 å·ç§¯å’Œæ¿€æ´»å‡½æ•°ï¼Œç›¸å½“äºæ¯ä¸ªç‚¹åˆèåˆäº†å‘¨å›´ 3 x 3 çš„ç©ºé—´ä¿¡æ¯ï¼ˆçŒœæµ‹è¿™æ ·åšä¹Ÿè®¸æ›´é²æ£’ï¼Ÿè¿›ä¸€æ­¥é›†ä¸­ç‰¹å¾ä¿¡æ¯ï¼Ÿï¼‰ï¼ŒåŒæ—¶ 256 æ·±åº¦ä¸å˜ã€‚ç„¶ååˆ†ä¸ºä¸¤æ¡çº¿ã€‚      ä¸Šä¸€æ¡çº¿åšåˆ†ç±»ï¼Œå¯¹ 256 é€šé“å›¾åƒåš 1 x 1 x 256 å·ç§¯ï¼Œå³å°†è¾“å…¥å›¾åƒäºæ¯ä¸ªé€šé“ä¹˜ä»¥å·ç§¯ç³»æ•°ååŠ åœ¨ä¸€èµ·ï¼Œå³ç›¸å½“äºæŠŠåŸå›¾åƒä¸­æœ¬æ¥å„ä¸ªç‹¬ç«‹çš„é€šé“ â€œè”é€šâ€ åœ¨äº†ä¸€èµ·ï¼Œå¾—åˆ°ä¸€å¼ å•é€šé“çš„ feature mapã€‚      å•é€šé“ feature map ï¼Œanchorï¼Œsoftmax      ç”Ÿæˆä¸€å † anchorsï¼Œå¯¹å…¶è¿›è¡Œè£å‰ªè¿‡æ»¤åï¼Œé€šè¿‡ softmax åˆ¤æ–­ anchors å±äºå‰æ™¯ï¼ˆç‰©ä½“ï¼‰è¿˜æ˜¯èƒŒæ™¯ï¼ŒäºŒåˆ†ç±»ã€‚                  anchors æ˜¯ä¸€ä¸ªçŸ©é˜µï¼Œä»£è¡¨äº†ä¸€ç»„çŸ©å½¢æ¡†ï¼ŒçŸ©é˜µçš„æ¯ä¸€è¡Œè¡¨ç¤ºçŸ©å½¢å·¦ä¸Šå’Œå³ä¸‹ç‚¹çš„åº§æ ‡ï¼Œæ¯”å¦‚ï¼Œrpn/generate_anchors.py ç”Ÿæˆ 9 ä¸ªçŸ©å½¢å…±æœ‰ä¸‰ç§å½¢çŠ¶ï¼Œä¸‰ç§å°ºå¯¸åˆ†åˆ«æ˜¯å°ï¼ˆè“ 128ï¼‰ä¸­ï¼ˆçº¢ 256ï¼‰å¤§ï¼ˆç»¿ 512ï¼‰ï¼Œä¸‰ç§æ¯”ä¾‹åˆ†åˆ«ä¸º 1:1, 1:2, 2:1 ã€‚                    5. å‚è€ƒæ–‡çŒ®[1] ç»´åŸºç™¾ç§‘. Kernel regression"
  },
  
  {
    "title": "æ·±åº¦å­¦ä¹ åŸºç¡€ï¼ˆCNN å·ç§¯ç¥ç»ç½‘ç»œï¼‰",
    "url": "/posts/deep-learning-CNN/",
    "categories": "Academic, Knowledge",
    "tags": "deep learning",
    "date": "2021-06-08 09:08:49 +0800",
    





    
    "snippet": "æœ¬æ–‡ä»‹ç»äº†æ·±åº¦å­¦ä¹ ä¸­å·ç§¯ç¥ç»ç½‘ç»œçš„ï¼ˆCNNï¼‰çš„åŸºç¡€çŸ¥è¯†ã€‚  1. åŸºç¡€çŸ¥è¯†          1.1. å›¾åƒ      1.2. å·ç§¯                  1.2.1. å•é€šé“å·ç§¯          1.2.2. å¤šé€šé“å·ç§¯          1.2.3. æƒé‡          1.2.4. åç½®          1.2.5. æ¿€æ´»          1.2.6. å…±äº«æƒå€¼...",
    "content": "æœ¬æ–‡ä»‹ç»äº†æ·±åº¦å­¦ä¹ ä¸­å·ç§¯ç¥ç»ç½‘ç»œçš„ï¼ˆCNNï¼‰çš„åŸºç¡€çŸ¥è¯†ã€‚  1. åŸºç¡€çŸ¥è¯†          1.1. å›¾åƒ      1.2. å·ç§¯                  1.2.1. å•é€šé“å·ç§¯          1.2.2. å¤šé€šé“å·ç§¯          1.2.3. æƒé‡          1.2.4. åç½®          1.2.5. æ¿€æ´»          1.2.6. å…±äº«æƒå€¼          1.2.7. åˆå§‹åŒ–          1.2.8. å·ç§¯æ¨¡å¼          1.2.9. åå‘ä¼ æ’­                    1.3. æ± åŒ–                  1.3.1. æœ€å¤§æ± åŒ–          1.3.2. å¹³å‡æ± åŒ–          1.3.3. æ± åŒ–çš„å¥½å¤„          1.3.4. åå‘ä¼ æ’­                      2. å‚è€ƒæ–‡çŒ®1. åŸºç¡€çŸ¥è¯†1.1. å›¾åƒå›¾åƒåœ¨è®¡ç®—æœºä¸­è¡¨ç¤ºä¸ºä¸€ä¸ª $height\\times width$ çš„ 2 ç»´çš„çŸ©é˜µï¼ŒçŸ©é˜µçš„å„ä¸ªå…ƒç´ å–å€¼ä¸ºé¢œè‰²çš„å€¼ï¼Œå¯ä»¥è¡¨ç¤ºä¸º $[0,1]$ åŒºé—´æˆ– $[0,255]$ åŒºé—´çš„ä¸€ä¸ªæ•°ã€‚ç°åº¦å›¾åƒæ˜¯å•é€šé“çš„ï¼Œå½©è‰²å›¾åƒæ˜¯ä¸‰é€šé“çš„ï¼ˆRï¼ŒGï¼ŒBï¼‰ã€‚1.2. å·ç§¯å·ç§¯æ˜¯åŸå§‹å›¾åƒä¸å·ç§¯æ ¸ä¹‹é—´çš„æ»‘åŠ¨å±€éƒ¨åŠ ä¹˜è®¡ç®—è¿‡ç¨‹ã€‚ç‹­ä¹‰çš„å·ç§¯æ ¸ï¼ˆkernelï¼‰æ˜¯ä¸€ä¸ªçŸ©é˜µï¼Œå¯åœ¨å›¾åƒä¸Šæ»‘åŠ¨å¹¶ä¸è¾“å…¥ç›¸ä¹˜ï¼Œä»è€Œä»¥æŸç§æˆ‘ä»¬æœŸæœ›çš„æ–¹å¼å¢å¼ºè¾“å‡ºã€‚1.2.1. å•é€šé“å·ç§¯å‡è®¾è¾“å…¥å›¾ç‰‡ä¸º $6\\times 6 \\times 1\\ channel$ï¼Œå·ç§¯æ ¸ä¸º $3\\times 3$ï¼Œstride=1ï¼ˆè¡¨ç¤º kernel çš„æ»‘åŠ¨æ­¥é•¿ä¸º1ï¼‰ï¼Œpadding=1ï¼ˆè¡¨ç¤ºå¯¹åŸå§‹è¾“å…¥å›¾åƒå‘¨å›´é¢å¤–å¢åŠ ä¸€å±‚ï¼Œé…åˆstride=1ï¼Œå¯ä»¥ä¿è¯å·ç§¯åå›¾ç‰‡å¤§å°ä¸å˜ï¼‰ï¼Œåˆ™å·ç§¯è¿‡ç¨‹å¦‚ä¸‹å›¾æ‰€ç¤ºï¼šä¸Šé¢çš„kernelå¯ç”¨äºé”åŒ–å›¾åƒã€‚æ¯”å¦‚ï¼Œè€ƒè™‘ä¸‹å›¾æ‰€ç¤ºçš„ä¸¤ä¸ªè¾“å…¥å›¾åƒã€‚  ç¬¬ä¸€ä¸ªå›¾åƒï¼Œä¸­å¿ƒå€¼ä¸º3 * 5 + 2 * -1 + 2 * -1 + 2 * -1 + 2 * -1 =7ï¼Œå€¼3å¢åŠ åˆ°7ã€‚  ç¬¬äºŒä¸ªå›¾åƒï¼Œè¾“å‡ºæ˜¯1 * 5 + 2 * -1 + 2 * -1 + 2 * -1 + 2 * -1 = -3ï¼Œå€¼1å‡å°‘åˆ°-3ã€‚æ˜¾ç„¶ï¼Œ3å’Œ1ä¹‹é—´çš„å¯¹æ¯”åº¦å¢åŠ åˆ°äº†7å’Œ-3ï¼Œå›¾åƒå°†æ›´æ¸…æ™°é”åˆ©ã€‚å·ç§¯åå°ºå¯¸è®¡ç®—å…¬å¼ï¼š\\[è¾“å‡ºå›¾åƒå°ºå¯¸ = (è¾“å‡ºå›¾åƒå°ºå¯¸-å·ç§¯æ ¸å°ºå¯¸ + 2*å¡«å……å€¼)/æ­¥é•¿+1\\]1.2.2. å¤šé€šé“å·ç§¯å‡è®¾ä¸€ä¸ªå›¾åƒä¸º $5\\times 5 \\times 3\\ channel$ï¼Œæ­¤æ—¶ï¼Œå¯¹äºæ¯ä¸€ä¸ªé€šé“å‡å¯ä»¥ç”¨ä¸€ä¸ªå·ç§¯æ ¸è¿›è¡Œå·ç§¯ã€‚æ­¤æ—¶ï¼Œä¸‰ä¸ªé€šé“çš„å·ç§¯æ ¸ä¸²è”èµ·æ¥ï¼Œå½¢æˆä¸€ä¸ªæ»¤æ³¢å™¨ï¼ˆfilterï¼‰ã€‚åœ¨å‰é¢çš„å•é€šé“å·ç§¯ä¸­ï¼Œå·ç§¯æ ¸å°±æ˜¯ä¸€ä¸ªå•é€šé“çš„ filterã€‚ä¸¾ä¾‹ï¼Œé‡‡ç”¨ 1 ä¸ª $3\\ channel$ çš„æ»¤æ³¢å™¨ï¼Œæ¯ä¸ªé€šé“çš„å·ç§¯æ ¸å¤§å°ä»ä¸º 3x3ï¼Œpadding=0ï¼Œstride=1ã€‚å·ç§¯è¿‡ç¨‹å¦‚ä¸‹ï¼Œæ¯ä¸€ä¸ªé€šé“çš„åƒç´ å€¼ä¸å¯¹åº”é€šé“çš„å·ç§¯æ ¸çš„æ•°å€¼è¿›è¡Œå·ç§¯ï¼Œå› æ­¤æ¯ä¸€ä¸ªé€šé“ä¼šå¯¹åº”ä¸€ä¸ªè¾“å‡ºå·ç§¯ç»“æœï¼Œä¸‰ä¸ªå·ç§¯ç»“æœå¯¹åº”ä½ç½®ç´¯åŠ  æ±‚å’Œï¼Œå¾—åˆ°æœ€ç»ˆçš„å·ç§¯ç»“æœã€‚ä¸Šè¿°è¿‡ç¨‹ä¸­ï¼Œæ¯ä¸€ä¸ª æ»¤æ³¢å™¨ çš„é€šé“æ•°å¿…é¡»ä¸è¾“å…¥å›¾ç‰‡çš„é€šé“æ•° ä¸€è‡´ã€‚å¯ä»¥çœ‹å‡ºï¼Œä¸€ä¸ª æ»¤æ³¢å™¨ æœ€ç»ˆåˆ°ä¸€ä¸ªé€šé“çš„ç‰¹å¾å›¾ï¼Œåˆ™é‡‡ç”¨å¤šä¸ª æ»¤æ³¢å™¨ å°±å¯å¾—åˆ°å¤šä¸ªç‰¹å¾å›¾ï¼Œä¹Ÿå³æœ€ç»ˆè¾“å‡ºçš„ç‰¹å¾å›¾çš„é€šé“æ•°ç­‰äº æ»¤æ³¢å™¨ çš„ä¸ªæ•°ã€‚ä¸ºä»€ä¹ˆè¦é‡‡ç”¨å¤šä¸ª æ»¤æ³¢å™¨ å‘¢ï¼Ÿå› ä¸ºä¸€ä¸ª æ»¤æ³¢å™¨ æå–ç‰¹å¾æ˜¯ä¸å……åˆ†çš„ï¼Œéœ€è¦æ·»åŠ å¤šä¸ª æ»¤æ³¢å™¨ å»å­¦ä¹ å¤šç§ç‰¹å¾ã€‚å¦å¤–ï¼Œæ»¤æ³¢å™¨ ä¸­ä¸åŒé€šé“ä¸Šçš„å·ç§¯æ ¸çš„å‚æ•°å¹¶ä¸ç›¸åŒã€‚1.2.3. æƒé‡å·ç§¯æ ¸çš„å€¼å°±æ˜¯å¾…å­¦ä¹ çš„æƒé‡å‚æ•°ã€‚ç½‘ç»œè®­ç»ƒæ—¶ï¼Œè¾“å‡ºçš„ç»“æœä¼šå’Œæ•°æ®é›†æ ‡ç­¾åšæŸå¤±è®¡ç®—ï¼Œç„¶åæŠŠè®¡ç®—å¾—åˆ°çš„æŸå¤±åå‘æ¢¯åº¦ä¸‹é™å»æ›´æ–°å·ç§¯æ ¸é‡Œçš„æ¯ä¸€ä¸ªå‚æ•°ã€‚æ‰€ä»¥å·ç§¯æ ¸é‡Œé¢çš„å‚æ•°æœ€ç»ˆæ˜¯è®­ç»ƒå¾—åˆ°çš„ã€‚é€šè¿‡æ·±å±‚ CNNï¼Œæˆ‘ä»¬æ— éœ€å†ç”¨æ‰‹å·¥è®¾è®¡çš„ kernel æ¥æå–ç‰¹å¾ï¼Œè€Œæ˜¯å¯ä»¥ç›´æ¥å­¦ä¹ è¿™äº›å¯æå–æ½œåœ¨ç‰¹å¾çš„ kernel å€¼ã€‚1.2.4. åç½®æ¯ä¸€ä¸ª æ»¤æ³¢å™¨ éƒ½åŒ…æ‹¬ä¸€ä¸ªåç½®å‚æ•°ï¼ˆbiasï¼‰ã€‚è¿™ä¸ªåç½®å‚æ•°æ˜¯è¯¥ æ»¤æ³¢å™¨ ä¸­æ‰€æœ‰ å·ç§¯æ ¸ å…±äº«çš„ã€‚æœ€ç»ˆçš„å·ç§¯ç»“æœéœ€è¦åœ¨åŠ ä¸Šè¯¥åç½®å€¼ã€‚1.2.5. æ¿€æ´»å·ç§¯ä¸åç½®åŠ å’Œåçš„å€¼ï¼Œè¿˜éœ€è¦å†ç»è¿‡æ¿€æ´»å‡½æ•°ï¼ˆæ¯”å¦‚ ReLUï¼‰æ‰å¾—åˆ°æœ€ç»ˆç‰¹å¾å›¾ä¸Šçš„å€¼ã€‚1.2.6. å…±äº«æƒå€¼å…±äº«æƒå€¼åŒ…æ‹¬ å…±äº«æƒé‡ å’Œ å…±äº«åç½®ã€‚ç®€è€Œè¨€ä¹‹ï¼Œå·ç§¯æ ¸çš„æƒé‡ä¸åç½®åœ¨å·ç§¯è¿‡ç¨‹ä¸­ä¿æŒä¸å˜ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œç›¸åŒé¢œè‰²çš„æƒå€¼ä¿æŒä¸å˜1.2.7. åˆå§‹åŒ–å·ç§¯æ ¸çš„æƒå€¼æ˜¯é€šè¿‡å­¦ä¹ æ›´æ–°çš„ï¼Œä½†æ˜¯æœ€å¼€å§‹æ˜¯éœ€è¦ç»™è¿™äº›å‚æ•°æä¾›åˆå§‹å€¼æ‰èƒ½ä½¿ç½‘ç»œè¿è¡Œã€‚åˆå§‹åŒ–æ–¹æ³•å¯ä»¥ç®€ç•¥åˆ†ä¸‰ç§ï¼š  å–åå·®å¾ˆå°çš„é«˜æ–¯åˆ†å¸ƒéšæœºå–å€¼  Xavier åˆå§‹åŒ–æ–¹æ³•  He kai ming åˆå§‹åŒ–æ–¹æ³•1.2.8. å·ç§¯æ¨¡å¼æ©™è‰²éƒ¨åˆ†ä¸º image, è“è‰²éƒ¨åˆ†ä¸º filterã€‚  full modefull æ¨¡å¼çš„æ„æ€æ˜¯ï¼Œä» filter å’Œ image åˆšç›¸äº¤å¼€å§‹åšå·ç§¯ï¼Œç™½è‰²éƒ¨åˆ†ä¸ºå¡« 0ã€‚filter çš„è¿åŠ¨èŒƒå›´å¦‚å›¾æ‰€ç¤ºã€‚  same modeå½“filterçš„ä¸­å¿ƒ K ä¸ image çš„è¾¹è§’é‡åˆæ—¶ï¼Œå¼€å§‹åšå·ç§¯è¿ç®—ã€‚å½“å·ç§¯æ­¥é•¿ stride = 1 æ—¶ï¼Œå·ç§¯ä¹‹åè¾“å‡ºçš„ feature map å°ºå¯¸ç›¸å¯¹äºè¾“å…¥å›¾ç‰‡ä¿æŒä¸å˜ï¼ˆsameï¼‰ã€‚  valid modeå½“filterå…¨éƒ¨åœ¨imageé‡Œé¢çš„æ—¶å€™ï¼Œè¿›è¡Œå·ç§¯è¿ç®—ã€‚1.2.9. åå‘ä¼ æ’­ä¸ºäº†è¯´æ˜åå‘ä¼ æ’­ï¼Œéœ€è¦å…ˆåˆ†æå‰å‘ä¼ æ’­ã€‚å‡è®¾å·ç§¯çš„å‰å‘ä¼ æ’­é‡‡ç”¨ valid æ¨¡å¼ã€‚æˆ‘ä»¬å‘ç°ï¼Œå½“è¯¯å·®åå‘ä¼ æ’­åˆ°å·ç§¯å±‚æ—¶ï¼Œæˆ‘ä»¬çš„æ“ä½œæ–¹æ³•ä¾ç„¶æ˜¯ä¸€ä¸ªå·ç§¯ï¼Œåªä¸è¿‡è¦æŠŠå·ç§¯æ ¸ç¿»è½¬ï¼ˆæ—‹è½¬180Â°ï¼‰ï¼Œç„¶ååœ¨å‘¨å›´è¡¥ 0ã€‚æ³¨æ„åˆ°ï¼Œå‰å‘ä¼ æ’­é‡‡ç”¨ valid mode å·ç§¯ï¼Œåå‘ä¼ æ’­æ—¶æ˜¯ full mode å·ç§¯ï¼Œå¦‚å›¾æ‰€ç¤ºï¼šæ˜¾ç„¶ï¼Œå¦‚æœå‰å‘ä¼ æ’­æ˜¯ full mode å·ç§¯ï¼Œé‚£ä¹ˆåå‘ä¼ æ’­å°±æ˜¯ valid mode å·ç§¯ï¼Œä¸è¿‡ä¾æ—§è¦å°†å·ç§¯æ ¸ç¿»è¿‡æ¥ã€‚è€Œå¯¹äº same mode å·ç§¯ï¼Œå®ƒçš„åå‘ä¼ æ’­ä¹Ÿæ˜¯ä¸€ä¸ª same mode å·ç§¯ï¼ŒåŒæ ·ä¹Ÿéœ€è¦ç¿»è½¬å·ç§¯æ ¸ã€‚æœ€åï¼Œå¯¹äº strided å·ç§¯ï¼ˆè·¨è¶…è¿‡ 1 æ­¥çš„å·ç§¯ï¼‰ï¼Œåå‘ä¼ æ’­æ˜¯ fractional strided å·ç§¯ï¼Œåä¹‹ä¾ç„¶ã€‚å·ç§¯æ ¸åŒæ ·ä¹Ÿè¦ç¿»è½¬ã€‚1.3. æ± åŒ–æ± åŒ–å±‚ä¹Ÿç§°ä¸‹é‡‡æ ·å±‚ï¼Œä¼šå‹ç¼©è¾“å…¥çš„ç‰¹å¾å›¾ï¼Œä¸€æ–¹é¢å‡å°‘äº†ç‰¹å¾ï¼Œå¯¼è‡´äº†å‚æ•°å‡å°‘ï¼Œè¿›è€Œç®€åŒ–äº†å·ç§¯ç½‘ç»œè®¡ç®—æ—¶çš„å¤æ‚åº¦ï¼›å¦ä¸€æ–¹é¢ä¿æŒäº†ç‰¹å¾çš„æŸç§ä¸å˜æ€§ï¼ˆæ—‹è½¬ã€å¹³ç§»ã€ä¼¸ç¼©ç­‰ï¼‰ã€‚æ± åŒ–çš„æ€æƒ³æ¥è‡ªäºè§†è§‰æœºåˆ¶ï¼Œæ˜¯å¯¹ä¿¡æ¯è¿›è¡ŒæŠ½è±¡çš„è¿‡ç¨‹ã€‚æ± åŒ–æ“ä½œä¸»è¦æœ‰ä¸¤ç§ï¼Œä¸€ç§æ˜¯å¹³å‡æ± åŒ–(Average Pooling)ï¼Œå³å¯¹é‚»åŸŸå†…çš„ç‰¹å¾ç‚¹æ±‚å¹³å‡ï¼›å¦ä¸€ç§æ˜¯æœ€å¤§æ± åŒ–(Max Pooling)ï¼Œå³å¯¹é‚»åŸŸå†…çš„ç‰¹å¾ç‚¹å–æœ€å¤§ã€‚æ³¨æ„ï¼Œæ± åŒ–ä¹Ÿå¯ä»¥çœ‹ä½œä¸€ç§æ­¥é•¿ä¸å·ç§¯æ ¸ç›¸ç­‰çš„å·ç§¯ï¼Œä¸”å·ç§¯æ ¸å‚æ•°å›ºå®šä¸å˜ã€‚æ³¨æ„ï¼Œæ± åŒ–è¿‡ç¨‹æ²¡æœ‰éœ€è¦å­¦ä¹ çš„å‚æ•°ã€‚å› æ­¤æ± åŒ–å¯ä»¥åœ¨ä¸å¢åŠ å‚æ•°çš„æƒ…å†µä¸‹ï¼Œå¤§å¹…é™ä½ feature map çš„ç»´åº¦ï¼ŒèŠ‚çº¦å¼€é”€ã€‚1.3.1. æœ€å¤§æ± åŒ–é‡‡ç”¨ $2\\times 2$ å·ç§¯æ ¸å¯¹ $4\\times 4$ å›¾åƒçš„æœ€å¤§æ± åŒ–è¿‡ç¨‹ï¼šé€šå¸¸è®¤ä¸ºå¦‚æœé€‰å–åŒºåŸŸå‡å€¼(mean pooling)ï¼Œå¾€å¾€èƒ½ä¿ç•™æ•´ä½“æ•°æ®çš„ç‰¹å¾ï¼Œè¾ƒå¥½çš„çªå‡ºèƒŒæ™¯ä¿¡æ¯ã€‚1.3.2. å¹³å‡æ± åŒ–é‡‡ç”¨ $2\\times 2$ å·ç§¯æ ¸å¯¹ $4\\times 4$ å›¾åƒçš„å¹³å‡æ± åŒ–è¿‡ç¨‹ï¼šå¦‚æœé€‰å–åŒºåŸŸæœ€å¤§å€¼(max pooling)ï¼Œåˆ™èƒ½æ›´å¥½ä¿ç•™çº¹ç†ç‰¹å¾ã€‚1.3.3. æ± åŒ–çš„å¥½å¤„  è¨€æœ‰ä¸‰. æ± åŒ–æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿæ± åŒ–çš„å¥½å¤„ï¼š  å¢å¤§æ„Ÿå—é‡ã€‚æ‰€è°“æ„Ÿå—é‡ï¼Œå³ä¸€ä¸ªåƒç´ å¯¹åº”å›åŸå›¾çš„åŒºåŸŸå¤§å°ï¼Œå‡å¦‚æ²¡æœ‰poolingï¼Œä¸€ä¸ª33ï¼Œæ­¥é•¿ä¸º1çš„å·ç§¯ï¼Œé‚£ä¹ˆè¾“å‡ºçš„ä¸€ä¸ªåƒç´ çš„æ„Ÿå—é‡å°±æ˜¯33çš„åŒºåŸŸï¼Œå†åŠ ä¸€ä¸ªstride=1çš„33å·ç§¯ï¼Œåˆ™æ„Ÿå—é‡ä¸º55ã€‚å‡å¦‚æˆ‘ä»¬åœ¨æ¯ä¸€ä¸ªå·ç§¯ä¸­é—´åŠ ä¸Š3*3çš„poolingå‘¢ï¼Ÿå¾ˆæ˜æ˜¾æ„Ÿå—é‡è¿…é€Ÿå¢å¤§ï¼Œè¿™å°±æ˜¯poolingçš„ä¸€å¤§ç”¨å¤„ã€‚æ„Ÿå—é‡çš„å¢åŠ å¯¹äºæ¨¡å‹çš„èƒ½åŠ›çš„æå‡æ˜¯å¿…è¦çš„ï¼Œæ­£æ‰€è°“â€œä¸€å¶éšœç›®åˆ™ä¸è§æ³°å±±ä¹Ÿâ€ã€‚  å¹³ç§»ä¸å˜æ€§ã€‚æˆ‘ä»¬å¸Œæœ›ç›®æ ‡çš„äº›è®¸ä½ç½®çš„ç§»åŠ¨ï¼Œèƒ½å¾—åˆ°ç›¸åŒçš„ç»“æœã€‚å› ä¸ºpoolingä¸æ–­åœ°æŠ½è±¡äº†åŒºåŸŸçš„ç‰¹å¾è€Œä¸å…³å¿ƒä½ç½®ï¼Œæ‰€ä»¥poolingä¸€å®šç¨‹åº¦ä¸Šå¢åŠ äº†å¹³ç§»ä¸å˜æ€§ã€‚  é™ä½ä¼˜åŒ–éš¾åº¦å’Œå‚æ•°ã€‚æˆ‘ä»¬å¯ä»¥ç”¨æ­¥é•¿å¤§äº1çš„å·ç§¯æ¥æ›¿ä»£æ± åŒ–ï¼Œä½†æ˜¯æ± åŒ–æ¯ä¸ªç‰¹å¾é€šé“å•ç‹¬åšé™é‡‡æ ·ï¼Œä¸åŸºäºå·ç§¯çš„é™é‡‡æ ·ç›¸æ¯”ï¼Œä¸éœ€è¦å‚æ•°ï¼Œæ›´å®¹æ˜“ä¼˜åŒ–ã€‚å…¨å±€æ± åŒ–æ›´æ˜¯å¯ä»¥å¤§å¤§é™ä½æ¨¡å‹çš„å‚æ•°é‡å’Œä¼˜åŒ–å·¥ä½œé‡ã€‚1.3.4. åå‘ä¼ æ’­æ± åŒ–çš„åå‘ä¼ æ’­æ¯”è¾ƒç®€å•ã€‚åå‘ä¼ æ’­æ˜¯è¦ä»ç¼©å°åçš„è¯¯å·® $\\delta^{l+1}$ è¿˜åŸæ± åŒ–å‰è¾ƒå¤§ feature map å¯¹åº”çš„è¯¯å·® $\\delta^l$ã€‚å‡è®¾é‡‡ç”¨æ­¥é•¿ä¸º 1 çš„$2\\times 2$ æ± åŒ–ï¼Œå°† $4\\times 4$ çš„ feature map æ± åŒ–ä¸º $2\\times 2$ï¼Œå¦‚æœ $\\delta^{l+1}$ çš„ç¬¬ $k$ ä¸ªå­çŸ©é˜µä¸º\\[\\delta^{l+1}_k = \\begin{bmatrix}  2 &amp; 8\\\\  4 &amp; 6\\end{bmatrix}\\]å¯¹äºæœ€å¤§æ± åŒ–ï¼Œéœ€è¦åœ¨å‰å‘ä¼ æ’­æ—¶ï¼Œè®°ä½æ¯ä¸ªæ± åŒ–å—ä¸­æœ€å¤§å€¼çš„ä½ç½®ï¼Œç„¶åå°†è¯¯å·®æ”¾å›å»å³å¯ã€‚å‡è®¾å››ä¸ªä½ç½®åˆ†åˆ«ä¸ºå·¦ä¸Šï¼Œå³ä¸‹ï¼Œå³ä¸Šï¼Œå·¦ä¸‹ï¼Œåˆ™æœ‰\\[\\delta^{l}_k = \\begin{bmatrix}  2 &amp;0&amp;0&amp; 0\\\\  0&amp;0&amp;0&amp;8\\\\  0&amp;4&amp;0&amp;0\\\\  0&amp;0&amp;6&amp;0\\end{bmatrix}\\]å¯¹äºå¹³å‡æ± åŒ–ï¼Œæˆ‘ä»¬åªéœ€è¦å°†æ± åŒ–å•å…ƒçš„è¯¯å·®å¹³å‡å€¼æ”¾å›åŸæ¥çš„å­çŸ©é˜µå³å¯ï¼š\\(\\delta^{l}_k = \\begin{bmatrix}  0.5&amp;0.5&amp;2&amp;2\\\\  0.5&amp;0.5&amp;2&amp;2\\\\  1&amp;1&amp;1.5&amp;1.5\\\\  1&amp;1&amp;1.5&amp;1.5\\end{bmatrix}\\)2. å‚è€ƒæ–‡çŒ®[1] æœ¨ç›. å·ç§¯çš„ä¸‰ç§æ¨¡å¼. CSDN.[2] æ°¸è¿œåœ¨ä½ èº«å. å·ç§¯ç®—æ³•çš„å¦ä¸€ç§é«˜æ•ˆå®ç°ï¼Œas_stridedè¯¦è§£. çŸ¥ä¹."
  },
  
  {
    "title": "ç»Ÿè®¡å­¦åŸºç¡€ï¼ˆæ ¸å›å½’ï¼‰",
    "url": "/posts/statistics-kernel-regression/",
    "categories": "Academic, Knowledge",
    "tags": "statistics",
    "date": "2021-04-01 10:50:49 +0800",
    





    
    "snippet": "æœ¬æ–‡ä»‹ç»äº†ç»Ÿè®¡å­¦ä¸­çš„æ ¸å›å½’æ–¹æ³•ï¼Œå¹¶é“ºå«äº†éå‚æ•°åŒ–ç»Ÿè®¡æ–¹æ³•ç­‰ä¸€äº›åŸºç¡€çŸ¥è¯†ã€‚  1. åŸºæœ¬çŸ¥è¯†          1.1. å›å½’      1.2. è¿‘é‚»å›å½’      1.3. æ ¸å›å½’        2. å‚è€ƒæ–‡çŒ®1. åŸºæœ¬çŸ¥è¯†1.1. å›å½’å›å½’åˆ†æï¼ˆRegression Analysisï¼‰æ˜¯ä¸€ç§ç»Ÿè®¡å­¦ä¸Šåˆ†ææ•°æ®çš„æ–¹æ³•ï¼Œç›®çš„åœ¨äºäº†è§£ä¸¤ä¸ªæˆ–å¤šä¸ªå˜é‡é—´æ˜¯å¦ç›¸å…³ã€ç›¸å…³æ–¹å‘ä¸å¼ºåº¦ï¼Œå¹¶å»ºç«‹æ•°å­¦æ¨¡å‹ä»¥ä¾¿è§‚...",
    "content": "æœ¬æ–‡ä»‹ç»äº†ç»Ÿè®¡å­¦ä¸­çš„æ ¸å›å½’æ–¹æ³•ï¼Œå¹¶é“ºå«äº†éå‚æ•°åŒ–ç»Ÿè®¡æ–¹æ³•ç­‰ä¸€äº›åŸºç¡€çŸ¥è¯†ã€‚  1. åŸºæœ¬çŸ¥è¯†          1.1. å›å½’      1.2. è¿‘é‚»å›å½’      1.3. æ ¸å›å½’        2. å‚è€ƒæ–‡çŒ®1. åŸºæœ¬çŸ¥è¯†1.1. å›å½’å›å½’åˆ†æï¼ˆRegression Analysisï¼‰æ˜¯ä¸€ç§ç»Ÿè®¡å­¦ä¸Šåˆ†ææ•°æ®çš„æ–¹æ³•ï¼Œç›®çš„åœ¨äºäº†è§£ä¸¤ä¸ªæˆ–å¤šä¸ªå˜é‡é—´æ˜¯å¦ç›¸å…³ã€ç›¸å…³æ–¹å‘ä¸å¼ºåº¦ï¼Œå¹¶å»ºç«‹æ•°å­¦æ¨¡å‹ä»¥ä¾¿è§‚å¯Ÿç‰¹å®šå˜é‡æ¥é¢„æµ‹ç ”ç©¶è€…æ„Ÿå…´è¶£çš„å˜é‡ã€‚æ›´å…·ä½“çš„æ¥è¯´ï¼Œå›å½’åˆ†æå¯ä»¥å¸®åŠ©äººä»¬äº†è§£åœ¨åªæœ‰ä¸€ä¸ªè‡ªå˜é‡å˜åŒ–æ—¶å› å˜é‡çš„å˜åŒ–é‡ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œé€šè¿‡å›å½’åˆ†ææˆ‘ä»¬å¯ä»¥ç”±ç»™å‡ºçš„è‡ªå˜é‡ä¼°è®¡å› å˜é‡çš„æ¡ä»¶æœŸæœ›ã€‚å›å½’åˆ†ææ˜¯å»ºç«‹å› å˜é‡ $Y$ï¼ˆæˆ–ç§°ä¾å˜é‡ï¼Œåå› å˜é‡ï¼‰ä¸è‡ªå˜é‡ $X$ï¼ˆæˆ–ç§°ç‹¬å˜é‡ï¼Œè§£é‡Šå˜é‡ï¼‰ä¹‹é—´å…³ç³»çš„æ¨¡å‹ã€‚ç®€å•çº¿æ€§å›å½’ä½¿ç”¨ä¸€ä¸ªè‡ªå˜é‡ $X$ï¼Œå¤å›å½’ä½¿ç”¨è¶…è¿‡ä¸€ä¸ªè‡ªå˜é‡ï¼ˆ$X_{1},X_{2}â€¦X_{i}$ï¼‰ã€‚      å‚æ•°å›å½’    ä¼˜ç‚¹ï¼š          æ¨¡å‹å½¢å¼ç®€å•æ˜ç¡®ï¼Œä»…ç”±ä¸€äº›å‚æ•°è¡¨è¾¾      åœ¨æŸäº›é—®é¢˜ä¸­ï¼Œæ¨¡å‹å‚æ•°å…·æœ‰æ˜ç¡®çš„å«ä¹‰ï¼ˆå¦‚ç»æµé—®é¢˜ä¸­ï¼‰      å½“æ¨¡å‹å‚æ•°å‡è®¾æˆç«‹æ—¶ï¼Œç»Ÿè®¡æ¨æ–­çš„ç²¾åº¦è¾ƒé«˜ï¼Œèƒ½ç»å—å®é™…æ£€éªŒ      æ¨¡å‹èƒ½å¤Ÿè¿›è¡Œå¤–æ¨è¿ç®—      æ¨¡å‹å¯ä»¥ç”¨äºå°æ ·æœ¬çš„ç»Ÿè®¡æ¨æ–­        ç¼ºç‚¹ï¼š          å›å½’å‡½æ•°æ€’çš„å½¢å¼éœ€è¦é¢„å…ˆå‡å®š      æ¨¡å‹é™åˆ¶æ¡ä»¶è¾ƒå¤šï¼Œä¸€èˆ¬è¦æ±‚æ ·æœ¬æ»¡è¶³æŸç§åˆ†å¸ƒï¼Œéšæœºè¯¯å·®æ»¡è¶³æ­£æ€å‡è®¾ï¼Œè§£é‡Šå˜é‡é—´ç‹¬ç«‹ï¼Œè§£é‡Šå˜é‡ä¸éšæœºè¯¯å·®ä¸ç›¸å…³ç­‰      æ¨¡å‹æ³›åŒ–èƒ½åŠ›å¼±ã€ç¼ºä¹ç¨³å¥æ€§            éå‚æ•°å›å½’    éå‚æ•°å›å½’æ˜¯æŒ‡å¹¶ä¸éœ€è¦çŸ¥é“æ€»çš„åˆ†å¸ƒçš„æƒ…å†µä¸‹è¿›è¡Œçš„ä¸€ç§éå‚æ•°ç»Ÿè®¡æ–¹æ³•ã€‚          éå‚æ•°ç»Ÿè®¡ï¼ˆnonparametric statisticsï¼‰ï¼Œæˆ–ç§°éå‚æ•°ç»Ÿè®¡å­¦ï¼Œç»Ÿè®¡å­¦çš„åˆ†æ”¯ï¼Œé€‚ç”¨äºæ¯ç¾¤ä½“åˆ†å¸ƒæƒ…å†µæœªæ˜ã€å°æ ·æœ¬ã€æ¯ç¾¤ä½“åˆ†å¸ƒä¸ä¸ºæ­£æ€ä¹Ÿä¸æ˜“å˜æ¢ä¸ºæ­£æ€ã€‚ç‰¹ç‚¹åœ¨äºå°½é‡å‡å°‘æˆ–ä¸ä¿®æ”¹å…¶å»ºç«‹ä¹‹æ¨¡å‹ï¼Œè¾ƒå…·ç¨³å¥ç‰¹æ€§ï¼›åœ¨æ ·æœ¬æ•°ä¸å¤§æ—¶ï¼Œè®¡ç®—è¿‡ç¨‹è¾ƒç®€å•ã€‚      éå‚æ•°ç»Ÿè®¡æ¨æ–­æ—¶æ‰€ä½¿ç”¨çš„ç»Ÿè®¡é‡çš„æŠ½æ ·åˆ†é…é€šå¸¸ä¸æ€»ä½“åˆ†é…æ— å…³ï¼Œä¸å¿…æ¨è®ºå…¶ä¸­ä½æ•°ã€æ‹Ÿåˆä¼˜åº¦ã€ç‹¬ç«‹æ€§ã€éšæœºæ€§ï¼Œæ›´å¹¿ä¹‰çš„è¯´ï¼Œéå‚æ•°ç»Ÿè®¡åˆç§°ä¸ºâ€œä¸å—åˆ†å¸ƒé™åˆ¶ç»Ÿè®¡æ³•â€ï¼ˆdistribution freeï¼‰ã€‚        ä¼˜ç‚¹ï¼š          å›å½’å‡½æ•°å½¢å¼è‡ªç”±ã€å—çº¦æŸå°‘ï¼Œå¯¹æ•°æ®åˆ†å¸ƒä¸€èˆ¬ä¸åšä»»ä½•è¦æ±‚      é€‚åº”èƒ½åŠ›å¼ºï¼Œç¨³å¥æ€§é«˜ï¼Œå›å½’æ¨¡å‹å®Œå…¨ç”±æ•°æ®é©±åŠ¨      å¯¹äºéçº¿æ€§ã€éé½æ¬¡é—®é¢˜æ•ˆæœå¾ˆå¥½        ç¼ºç‚¹          ä¸èƒ½è¿›è¡Œå¤–æ¨è¿ç®—      ä¼°è®¡çš„æ”¶æ•›é€Ÿåº¦æ…¢      ä¸€èˆ¬åªæœ‰åœ¨å¤§æ ·æœ¬ä¸‹æ‰èƒ½å–å¾—å¾ˆå¥½çš„æ•ˆæœï¼Œå°æ ·æœ¬æ•ˆæœè¾ƒå·®      é«˜ç»´è¯…å’’ï¼Ÿ      1.2. è¿‘é‚»å›å½’1NNï¼ˆ1-Nearest Neighborï¼‰å›å½’ï¼šæ‰¾å¯»ä¸è¾“å…¥ $x_q$ æœ€æ¥è¿‘çš„ $x_i$ å¯¹åº”çš„ $y_i$ ä½œä¸ºé¢„æµ‹è¾“å‡ºã€‚ç¼ºç‚¹æ—¶å¯¹å¤§å—åŒºåŸŸæ²¡æœ‰æ•°æ®æˆ–æ•°æ®ä¸è¶³æ—¶æ•æ„Ÿï¼Œæ‹Ÿåˆçš„ä¸å¥½ã€‚KNNï¼ˆK-Nearest Neighborï¼‰å›å½’ï¼šæ‰¾å¯» $k$ ä¸ªæœ€è¿‘é‚»çš„ç‚¹ $x_1,x_2,\\cdots,x_k$ï¼Œç„¶åå¯¹ä»–ä»¬å¯¹åº”çš„ $y_1,y_2,\\cdots,y_k$ æ±‚å¹³å‡ã€‚åŠ æƒ kNN ï¼ˆWeighted K-Nearest Neighborï¼‰å›å½’ï¼šæ‰¾å¯» $k$ ä¸ªæœ€è¿‘é‚»çš„ç‚¹ $X_1,X_2,\\cdots,X_k$ï¼Œç„¶åå¯¹ä»–ä»¬å¯¹åº”çš„ $y_1,y_2,\\cdots,y_k$ æ±‚åŠ æƒå¹³å‡ã€‚æƒé‡å–æ³•ä¸ºï¼Œç¦»å¾—æ›´è¿‘çš„ç‚¹å…·å¤‡æ›´å¤§çš„æƒé‡ï¼Œåä¹‹æ›´å°ã€‚ç®€å•çš„ç®—æ³•ä¸ºè®¡ç®—è·ç¦»çš„å€’æ•°ï¼Œå³\\[\\begin{aligned}y_{q} &amp;= \\frac{c_{1}y_{1}+\\cdots+c_{k}y_{k}}{\\sum_{j=1}^k c_{qj}}\\\\c_{qj} &amp;= \\frac{1}{dis(x_j,x_q)}\\end{aligned}\\]å½±å“è¿‘é‚»å›å½’æ€§èƒ½çš„å› ç´ ï¼š      kå¦‚æœ K å€¼é€‰æ‹©çš„æ¯”è¾ƒå°ï¼Œè¿™æ—¶å€™æˆ‘ä»¬å°±ç›¸å½“äºä½¿ç”¨è¾ƒå°çš„é¢†åŸŸä¸­çš„è®­ç»ƒæ ·æœ¬å¯¹å®ä¾‹è¿›è¡Œé¢„æµ‹ã€‚è¿™æ—¶å€™ï¼Œç®—æ³•çš„è¿‘ä¼¼è¯¯å·®ä¼šå‡å°ï¼Œå› ä¸ºåªæœ‰ä¸è¾“å…¥å®ä¾‹ç›¸è¿‘çš„è®­ç»ƒæ ·æœ¬æ‰èƒ½æ‰ä¼šå¯¹é¢„æµ‹ç»“æœèµ·ä½œç”¨ã€‚ä½†æ˜¯å®ƒä¹Ÿä¼šæœ‰æ˜æ˜¾çš„ç¼ºç‚¹ï¼šç®—æ³•çš„ä¼°è®¡è¯¯å·®ä¼šåå¤§ï¼Œé¢„æµ‹çš„ç»“æœä¼šå¯¹è¿‘é‚»ç‚¹ååˆ†æ•æ„Ÿï¼Œä¹Ÿå°±æ˜¯è¯´å¦‚æœè¿‘é‚»ç‚¹æ˜¯å™ªå£°ç‚¹çš„è¯ï¼Œé‚£ä¹ˆé¢„æµ‹å°±ä¼šå‡ºé”™ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œk å€¼å¤ªå°ä¼šä½¿å¾— KNN ç®—æ³•å®¹æ˜“è¿‡æ‹Ÿåˆã€‚    åŒç†ï¼Œå¦‚æœ K å€¼é€‰çš„æ¯”è¾ƒå¤§çš„è¯ï¼Œè¿™æ—¶å€™è·ç¦»è¾ƒè¿œçš„è®­ç»ƒæ ·æœ¬éƒ½èƒ½å¤Ÿå¯¹å®ä¾‹çš„é¢„æµ‹ç»“æœäº§ç”Ÿå½±å“ã€‚è¿™æ—¶å€™ï¼Œè€Œæ¨¡å‹ç›¸å¯¹æ¯”è¾ƒé²æ£’ï¼Œä¸ä¼šå› ä¸ªåˆ«å™ªå£°ç‚¹å¯¹æœ€ç»ˆçš„é¢„æµ‹äº§ç”Ÿå½±å“ã€‚ä½†æ˜¯ç¼ºç‚¹ä¹Ÿæ˜¯ååˆ†æ˜æ˜¾çš„ï¼šç®—æ³•çš„è¿‘ä¼¼è¯¯å·®ä¼šåå¤§ï¼Œè·ç¦»è¾ƒè¿œçš„ç‚¹ï¼ˆä¸é¢„æµ‹å®ä¾‹ä¸ç›¸ä¼¼ï¼‰ä¹Ÿä¼šåŒæ ·å¯¹é¢„æµ‹ç»“æœäº§ç”Ÿä½œç”¨ï¼Œä½¿å¾—é¢„æµ‹äº§ç”Ÿè¾ƒå¤§åå·®ã€‚æ­¤æ—¶ç›¸å½“äºæ¨¡å‹å‘ç”Ÿæ¬ æ‹Ÿåˆã€‚    å› æ­¤ï¼Œåœ¨å®é™…çš„å·¥ç¨‹å®è·µè¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä¸€èˆ¬é‡‡ç”¨äº¤å‰éªŒè¯çš„æ–¹å¼é€‰å– K å€¼ã€‚ä»ä¸Šé¢çš„åˆ†æä¹Ÿå¯ä»¥çŸ¥é“ï¼Œä¸€èˆ¬ k å€¼å–å¾—æ¯”è¾ƒå°ã€‚æˆ‘ä»¬ä¼šé€‰å– k å€¼åœ¨è¾ƒå°çš„èŒƒå›´ï¼ŒåŒæ—¶åœ¨æµ‹è¯•é›†ä¸Šå‡†ç¡®ç‡æœ€é«˜çš„é‚£ä¸€ä¸ªç¡®å®šä¸ºæœ€ç»ˆçš„ç®—æ³•è¶…å‚æ•° kã€‚        è·ç¦»åº¦é‡æ–¹æ³•    è·ç¦»è®¡ç®—ä¸€èˆ¬é‡‡ç”¨:          é—µå¯å¤«æ–¯åŸºè·ç¦»ï¼ˆæ¬§æ°è·ç¦»ã€æ›¼å“ˆé¡¿è·ç¦»ã€åˆ‡æ¯”é›ªå¤«è·ç¦»ï¼‰      ä½™å¼¦è·ç¦»ï¼ˆä½™å¼¦ç›¸ä¼¼åº¦ï¼‰        é—µå¯å¤«æ–¯åŸºè·ç¦»ä¸æ˜¯ä¸€ç§è·ç¦»ï¼Œè€Œæ˜¯ä¸€ç±»è·ç¦»çš„å®šä¹‰ã€‚å¯¹äºä¸¤ä¸ªå…·æœ‰ $n$ ç»´ç‰¹å¾çš„æ ·æœ¬ç‚¹ $\\boldsymbol x_i,\\boldsymbol x_q$ï¼ŒäºŒè€…é—´çš„é—µå¯å¤«æ–¯åŸºè·ç¦»ä¸º\\[dis(\\boldsymbol x_i,\\boldsymbol x_q)=\\left( \\sum_{k=1}^n \\vert x_i^k - x_q^k \\vert^n \\right)^{\\frac{1}{n}}\\]    $p=1$ æ—¶è¢«ç§°ä¸ºæ›¼å“ˆé¡¿è·ç¦»ï¼›$p=2$ æ—¶è¢«ç§°ä¸ºæ¬§æ°è·ç¦»ï¼ˆL2èŒƒæ•°ï¼‰ï¼›$p\\rightarrow \\infty$ æ—¶è¢«ç§°ä¸ºåˆ‡æ¯”é›ªå¤«è·ç¦»ã€‚    å¯¹äºä¸¤ä¸ªå…·æœ‰ $n$ ç»´ç‰¹å¾çš„æ ·æœ¬ç‚¹ $\\boldsymbol x_i,\\boldsymbol x_q$ï¼ŒäºŒè€…é—´çš„ä½™å¼¦ç›¸ä¼¼åº¦ä¸º\\[sim_c(\\boldsymbol x_i,\\boldsymbol x_q) = cos(\\boldsymbol x_i,\\boldsymbol x_q)=\\frac{\\boldsymbol x_i\\cdot \\boldsymbol x_q}{\\vert\\vert\\boldsymbol x_i\\vert\\vert\\cdot\\vert\\vert\\boldsymbol x_q\\vert\\vert} = \\frac{\\sum_{k=1}^n x_{ik}x_{qk}}{\\sqrt{\\sum_{k=1}^n x_{ik}^2} \\sqrt{\\sum_{k=1}^n x_{qk}^2}}\\]    åˆ™ä½™å¼¦è·ç¦»ä¸º\\[dis_c(\\boldsymbol x_i,\\boldsymbol x_q) = 1 - sim_c(\\boldsymbol x_i,\\boldsymbol x_q)\\]    æ³¨æ„ï¼Œä½™å¼¦è·ç¦»ä¸æ˜¯ä¸€ä¸ªä¸¥æ ¼æ„ä¹‰ä¸Šçš„è·ç¦»åº¦é‡å…¬å¼ï¼Œä½†åœ¨å½¢å®¹ä¸¤ä¸ªç‰¹å¾å‘é‡ä¹‹é—´çš„å…³ç³»ä¸Šç”¨å¤„å¾ˆå¤§ã€‚    å½“å‘é‡çš„æ¨¡é•¿ç»è¿‡å½’ä¸€åŒ–æ—¶ï¼Œæ¬§æ°è·ç¦»ä¸ä½™å¼¦è·ç¦»æœ‰ç€å•è°ƒçš„å…³ç³»\\[dis_2 = \\sqrt{2\\cdot dis_c}\\]    æ­¤æ—¶å¦‚æœé€‰æ‹©è·ç¦»æœ€å°ï¼ˆç›¸ä¼¼åº¦æœ€å¤§ï¼‰çš„è¿‘é‚»ï¼Œé‚£ä¹ˆä½¿ç”¨ä½™å¼¦ç›¸ä¼¼åº¦å’Œæ¬§æ°è·ç¦»çš„ç»“æœæ˜¯ç›¸åŒçš„ã€‚    äºŒè€…ä¹‹é—´çš„ä½¿ç”¨å·®å¼‚å¦‚ä¸‹ï¼šæ¬§æ°è·ç¦»ä½“ç°æ•°å€¼ä¸Šçš„ç»å¯¹å·®å¼‚ï¼Œè€Œä½™å¼¦è·ç¦»ä½“ç°æ–¹å‘ä¸Šçš„ç›¸å¯¹å·®å¼‚ã€‚    1) ä¾‹å¦‚ï¼Œç»Ÿè®¡ä¸¤éƒ¨å‰§çš„ç”¨æˆ·è§‚çœ‹è¡Œä¸ºï¼Œç”¨æˆ·Açš„è§‚çœ‹å‘é‡ä¸º(0,1)ï¼Œç”¨æˆ·Bä¸º(1,0)ï¼›æ­¤æ—¶äºŒè€…çš„ä½™å¼¦è·å¾ˆå¤§ï¼Œè€Œæ¬§æ°è·ç¦»å¾ˆå°ï¼›æˆ‘ä»¬åˆ†æä¸¤ä¸ªç”¨æˆ·å¯¹äºä¸åŒè§†é¢‘çš„åå¥½ï¼Œæ›´å…³æ³¨ç›¸å¯¹å·®å¼‚ï¼Œæ˜¾ç„¶åº”å½“ä½¿ç”¨ä½™å¼¦è·ç¦»ã€‚    2) è€Œå½“æˆ‘ä»¬åˆ†æç”¨æˆ·æ´»è·ƒåº¦ï¼Œä»¥ç™»é™†æ¬¡æ•°(å•ä½ï¼šæ¬¡)å’Œå¹³å‡è§‚çœ‹æ—¶é•¿(å•ï¼šåˆ†é’Ÿ)ä½œä¸ºç‰¹å¾æ—¶ï¼Œä½™å¼¦è·ç¦»ä¼šè®¤ä¸º(1,10)ã€(10,100)ä¸¤ä¸ªç”¨æˆ·è·ç¦»å¾ˆè¿‘ï¼›ä½†æ˜¾ç„¶è¿™ä¸¤ä¸ªç”¨æˆ·æ´»è·ƒåº¦æ˜¯æœ‰ç€æå¤§å·®å¼‚çš„ï¼Œæ­¤æ—¶æˆ‘ä»¬æ›´å…³æ³¨æ•°å€¼ç»å¯¹å·®å¼‚ï¼Œåº”å½“ä½¿ç”¨æ¬§æ°è·ç¦»ã€‚  1.3. æ ¸å›å½’ç»§ç»­ç»†åŒ–æƒé‡ï¼Œæå‡ºæ ¸æƒé‡çš„æ¦‚å¿µã€‚\\[c_{qj} = k(\\boldsymbol x_i,\\boldsymbol x_q)\\]$k$ æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œä¸€ä¸ªäºŒå…ƒå‡½æ•°ï¼Œä¸€ä¸ª $R^n\\times R^n \\rightarrow R^+$ çš„äºŒå…ƒå‡½æ•°ï¼Œç”¨æ¥æè¿°ç‚¹ä¸ç‚¹ä¹‹é—´çš„å…³ç³»æˆ–è€…è¯´è·ç¦»çš„ä¸€ç§ä¸œè¥¿ã€‚èŒƒæ•°å°±æ˜¯æˆ‘ä»¬ä¹‹å‰å¼ºè°ƒçš„è·ç¦»ï¼Œæˆ–è€…è¯´å¹¿ä¹‰çš„è·ç¦»ã€‚å‘é‡ç©ºé—´ä¸­ä¸¤å‘é‡çš„å†…ç§¯å¯åº¦é‡å…¶è·ç¦»ï¼Œå³å†…ç§¯å°±æ˜¯è¿™ä¸ªè·ç¦»çš„å®šä¹‰çš„æ–¹å¼ï¼Œä¹Ÿå³ç”±å†…ç§¯å¯ä»¥è¯±å¯¼å‡ºèŒƒæ•°ã€‚å¯ä»¥ç”¨å†…ç§¯æ¥åˆ»ç”» kernel\\[k(\\boldsymbol x_i,\\boldsymbol x_q)=&lt;\\boldsymbol x_i,\\boldsymbol x_q&gt;\\]æ ¹æ®ä¸åŒçš„å†…ç§¯å®šä¹‰ï¼Œå¯ä»¥æ„é€ å‡ºä¸åŒçš„æ ¸å‡½æ•°ã€‚k å¯ä»¥ç”¨åŸç‰¹å¾ç©ºé—´ä¸Šç‚¹å†…ç§¯çš„æ–¹å¼ç»è¿‡è¿ç®—è½¬åŒ–æˆé«˜ç»´ç©ºé—´ç‚¹å†…ç§¯çš„å‡½æ•°ï¼Œå¯ä»¥ç”¨æ¥é¿å…åœ¨é«˜ç»´ç©ºé—´é‡Œè¿›è¡Œç¹ççš„å†…ç§¯è®¡ç®—ã€‚å¸¸ç”¨çš„é«˜æ–¯æ ¸å¦‚ä¸‹\\[k_\\lambda(x_i,x_q)=exp(-\\frac{\\vert\\vert \\boldsymbol x_i-\\boldsymbol x_q\\vert\\vert^2}{\\lambda})\\]å…¶å®ƒå¸¸ç”¨çš„æ ¸å‡½æ•°åŒ…æ‹¬å‡åŒ€åˆ†å¸ƒæ ¸ã€ä¸‰è§’æ ¸ç­‰ç­‰ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚æ ¸å›å½’å°±æ˜¯å‡çº§ç‰ˆçš„åŠ æƒ KNNï¼ŒåŒºåˆ«åœ¨äºä¸æ˜¯åŠ æƒ k ä¸ªæœ€è¿‘çš„é‚»å±…ï¼Œè€Œæ˜¯åŠ æƒæ‰€æœ‰æ ·æœ¬ç‚¹ã€‚ç„¶åæƒé‡æ˜¯ç”±ç‰¹å®šçš„æ ¸å‡½æ•°æ¥ç¡®å®šçš„ã€‚\\[y_q = \\frac{\\sum_{i=1}^N c_{qi}y_i}{\\sum_{i=1}^Nc_{qi}} = \\frac{\\sum_{i=1}^N k_{\\lambda}(\\boldsymbol x_i,\\boldsymbol x_q)y_i}{\\sum_{i=1}^N k_{\\lambda}(\\boldsymbol x_i,\\boldsymbol x_q)}\\]è¦ç¡®å®šä¸¤ä¸ªä¸œè¥¿ï¼š  æ ¸  $\\lambda$$\\lambda$ çš„é€‰æ‹©æ ¹æ®éªŒè¯é›†éªŒè¯æ—¶çš„éªŒè¯æŸå¤±æ¥ç¡®å®šã€‚è¾ƒå°çš„ $\\lambda$ å³ä½¿å¾—é¢„æµ‹é‡è¿‘å—åˆ°é™„è¿‘è·ç¦»å¾ˆè¿‘çš„ç‚¹çš„å½±å“ï¼Œè¿‡å°çš„ $\\lambda$ ä¼šå¯¼è‡´è¿‡æ‹Ÿåˆï¼›è¿‡å¤§çš„ $\\lambda$ åˆ™ä¼šå¯¼è‡´è¿‡å¹³æ»‘ï¼Œå³æ¬ æ‹Ÿåˆã€‚æ ¸çš„é€‰æ‹©æ¯” $\\lambda$ çš„é€‰æ‹©æ›´é‡è¦ã€‚å¾ˆå¤šæ—¶å€™æˆ‘ä»¬æ ¹æœ¬ä¸çŸ¥é“æ ¸å‡½æ•°å°†æ•°æ®æ˜ å°„æˆäº†ä»€ä¹ˆæ ·å­ï¼Œæ˜ å°„åçš„å¯åˆ†ç¦»æ€§å¯èƒ½æ›´å¥½ï¼Œä¹Ÿå¯èƒ½æ›´å·®ã€‚è¿™ä¸ªæ—¶å€™æˆ‘ä»¬ä¼šå°è¯•ä¸åŒçš„æ ¸å‡½æ•°å’Œå‚æ•°ã€‚å¯¹äºéå‚æ•°å›å½’é—®é¢˜ï¼Œç‚¹ $x_q$ å¯¹åº”çš„é¢„æµ‹å€¼ $y_q$ çš„æ¡ä»¶æœŸæœ›å¯ä»¥å†™æˆæŸä¸ªæœªçŸ¥å‡½æ•° $m(\\cdot)$ ä¸å™ªå£° $\\sigma$ ä¹‹å’Œ\\[y_q = \\mathbb E(y\\vert x=x_q)=m(x)+\\sigma\\]1964å¹´ï¼ŒNadaraya å’Œ Watson æå‡ºäº†ä¸€ç§å±€éƒ¨åŠ æƒå¹³å‡ä¼°è®¡ $m(\\cdot)$ æ–¹æ³•ï¼Œç§°ä¸º Nadaraya-Watson æ ¸ä¼°è®¡ï¼ˆæˆ– Nadaraya-Watson å›å½’ï¼‰ã€‚\\[y_q = \\frac{\\sum_{i=1}^N k_{\\lambda}(\\boldsymbol x_q-\\boldsymbol x_i)y_i}{\\sum_{i=1}^N k_{\\lambda}(\\boldsymbol x_q-\\boldsymbol x_i)}\\]å¦å¤–ä¸¤ä¸ªæ ¸ä¼°è®¡æ–¹æ³•ä¸º Priestley-Chao æ ¸ä¼°è®¡å’Œ Gasserâ€”â€”MÃ¼ller æ ¸ä¼°è®¡ã€‚2. å‚è€ƒæ–‡çŒ®[1] ç»´åŸºç™¾ç§‘. Kernel regression"
  },
  
  {
    "title": "æœ€ä¼˜æ§åˆ¶åŸºç¡€ï¼ˆå¾®åˆ†æ–¹ç¨‹çš„è§£æ³•ï¼‰",
    "url": "/posts/optimal-control-numerical/",
    "categories": "Academic, Knowledge",
    "tags": "optimal control",
    "date": "2021-01-25 09:07:49 +0800",
    





    
    "snippet": "æœ¬æ–‡ä»‹ç»äº†æœ€ä¼˜æ§åˆ¶çš„æ•°å€¼è§£æ³•çš„åŸºç¡€çŸ¥è¯†ï¼ŒåŒ…æ‹¬å¾®åˆ†æ–¹ç¨‹çš„æ•°å€¼è§£æ³•ã€‚  1. å¤šé¡¹å¼å±€éƒ¨è¿‘ä¼¼  2. å¤šé¡¹å¼æ’å€¼          2.1. æ‹‰æ ¼æœ—æ—¥æ’å€¼      2.2. é‡å¿ƒæ‹‰æ ¼æœ—æ—¥æ’å€¼      2.3. åˆ‡æ¯”é›ªå¤«èŠ‚ç‚¹        3. ODE-IPVçš„æ•°å€¼è§£æ³•          3.1. æ—¶é—´æ¨è¿›æ³•                  3.1.1. å¤šæ­¥æ³•          3.1.2...",
    "content": "æœ¬æ–‡ä»‹ç»äº†æœ€ä¼˜æ§åˆ¶çš„æ•°å€¼è§£æ³•çš„åŸºç¡€çŸ¥è¯†ï¼ŒåŒ…æ‹¬å¾®åˆ†æ–¹ç¨‹çš„æ•°å€¼è§£æ³•ã€‚  1. å¤šé¡¹å¼å±€éƒ¨è¿‘ä¼¼  2. å¤šé¡¹å¼æ’å€¼          2.1. æ‹‰æ ¼æœ—æ—¥æ’å€¼      2.2. é‡å¿ƒæ‹‰æ ¼æœ—æ—¥æ’å€¼      2.3. åˆ‡æ¯”é›ªå¤«èŠ‚ç‚¹        3. ODE-IPVçš„æ•°å€¼è§£æ³•          3.1. æ—¶é—´æ¨è¿›æ³•                  3.1.1. å¤šæ­¥æ³•          3.1.2. å¤šæ®µæ³•                    3.2. é…ç‚¹æ³•                  3.2.1. æ­£äº¤é…ç‚¹æ³•                      4. ODE-BPVçš„æ•°å€¼è§£æ³•  5. è½¨è¿¹è§„åˆ’ä¸æœ€ä¼˜æ§åˆ¶          5.1. å½¢å¼åŒ–æè¿°      5.2. é—´æ¥æ³•      5.3. ç›´æ¥æ³•                  5.3.1. ç›´æ¥æ‰“é¶æ³•          5.3.2. ç›´æ¥é…ç‚¹æ³•                    5.4. é«˜æ–¯ä¼ªè°±æ³•        6. å‚è€ƒæ–‡çŒ®1. å¤šé¡¹å¼å±€éƒ¨è¿‘ä¼¼äººä»¬å¸Œæœ›é€šè¿‡ç®€å•çš„å‡½æ•°æ¥è¿‘ä¼¼è¡¨ç¤ºå¤æ‚çš„å‡½æ•°ã€‚å¤šé¡¹å¼å°±æ˜¯ä¸€ç±»ç®€å•å‡½æ•°ï¼ŒåªåŒ…å«åŠ æ³•å’Œä¹˜æ³•ä¸¤ç§åŸºæœ¬è¿ç®—ã€‚ç»™å®šå‡½æ•° $f(x)$ ï¼Œè¦åœ¨æŒ‡å®šç‚¹ $x$ é™„è¿‘æ‰¾ä¸€ä¸ªä¸ $f(x)$ è¿‘ä¼¼çš„å¤šé¡¹å¼\\[P(x) = a_0 + a_1x + a_2x^2 + \\cdots + a_nx^n\\]å‡è®¾æŒ‡å®šç‚¹ä¸º $x_0$ï¼Œ$f(x)$ åœ¨ $x_0$ å¤„å¯å¯¼ï¼Œäºæ˜¯æŒ‰ç…§å®šä¹‰æœ‰\\[f(x) = f(x_0) + f^\\prime(x_0)(x-x_0) + O(x-x_0)\\]è¿™è¡¨æ˜åœ¨ $x_0$ é™„è¿‘å¯ä»¥ç”¨ä¸€æ¬¡å¤šé¡¹å¼æ¥è¿‘ä¼¼è¡¨è¾¾ $f(x)$ ï¼Œè€Œè¯¯å·®æ˜¯é«˜äºä¸€é˜¶çš„æ— ç©·å°é‡ã€‚ä»å‡ ä½•è§’åº¦çœ‹ï¼Œè¿™å°±æ˜¯ç”¨æ›²çº¿è¿‡ç‚¹ $x_0$ çš„åˆ‡çº¿æ¥è¿‘ä¼¼æ›²çº¿ã€‚ä»å¾®åˆ†å­¦çš„è§’åº¦çœ‹ï¼Œè¿™ç§è¿‘ä¼¼çš„ç‰¹ç‚¹æ˜¯åœ¨ç‚¹ $x_0$ å¤„å¤šé¡¹å¼çš„å‡½æ•°å€¼å’Œä¸€é˜¶å¯¼æ•°å€¼ä¸åŸå§‹å‡½æ•° $f(x)$ ç›¸ç­‰ã€‚ä½†æ˜¯ï¼Œè®¸å¤šæƒ…å†µä¸‹è¿™ä¸ªé€¼è¿‘ç¨‹åº¦ä¸å¤Ÿï¼Œéœ€è¦æé«˜å¤šé¡¹å¼çš„è¿‘ä¼¼ç²¾åº¦ã€‚ä¸ºäº†è¿›ä¸€æ­¥æé«˜é€¼è¿‘ç²¾åº¦ï¼Œéœ€è¦åœ¨è¯¥ç‚¹é™„è¿‘æ„é€ æ›´é«˜é˜¶æ¬¡çš„å¤šé¡¹å¼ï¼Œå³æ„é€ ä¸€ä¸ª $(x-x_0)$ çš„ $n$ æ¬¡å¤šé¡¹å¼\\[P_n(x) = a_0 + a_1(x-x_0) + a_2(x-x_0)^2 + \\cdots + a_n(x-x_0)^n\\]æˆ‘ä»¬å¸Œæœ›è¯¥å¤šé¡¹å¼åœ¨ $x_0$ å¤„çš„å‡½æ•°å€¼åŠå…¶ç›´åˆ° $n$ é˜¶å¯¼æ•°å€¼éƒ½ä¸ $f(x)$ çš„ç›¸åº”å€¼åˆ†åˆ«ç›¸ç­‰ï¼Œå³\\[\\begin{aligned}P_n(x_0) &amp;= a_1 = f(x_0)\\\\P^\\prime_n(x_0) &amp;= a_1 = f^\\prime(x_0)\\\\P^{\\prime\\prime}_n(x_0) &amp;= 2a_2 = f^{\\prime\\prime}(x_0)\\\\\\cdots\\\\P^{(n)}_n(x_0) &amp;= n!a_n = f^{(n)}(x_0)\\\\\\end{aligned}\\]äºæ˜¯æœ‰\\[\\begin{aligned}P_n(x) = &amp;f(x_0) \\\\&amp; + f^\\prime(x_0)(x-x_0)\\\\&amp; + \\frac{1}{2}f^{\\prime\\prime}(x_0)(x-x_0)^2\\\\&amp; + \\cdots\\\\&amp; + \\frac{1}{n!}f^{(n)}(x_0)(x-x_0)^n\\end{aligned}\\]ç§° $P_n(x)$ ä¸º $f(x)$ åœ¨ç‚¹ $x_0$ å¤„çš„ $n$ é˜¶æ³°å‹’å¤šé¡¹å¼ã€‚  åŒ¿åç”¨æˆ·. å¦‚ä½•é€šä¿—åœ°è§£é‡Šæ³°å‹’å…¬å¼ï¼Ÿæ€»ç»“  æ³°å‹’å…¬å¼çš„ä½œç”¨æ˜¯æè¿°å¦‚ä½•åœ¨ $x_0$ ç‚¹é™„è¿‘, ç”¨ä¸€ä¸ªå¤šé¡¹å¼å‡½æ•° $P_n(x)$ å»è¿‘ä¼¼ä¸€ä¸ªå¤æ‚å‡½æ•° $f(x)$ï¼›  ä¹‹æ‰€ä»¥èƒ½å®ç°è¿™ç§è¿‘ä¼¼, èƒŒåçš„é€»è¾‘æ˜¯ï¼š          å¤šé¡¹å¼å‡½æ•°åœ¨ $x=x_0$ å¤„çš„å€¼, ä¸€é˜¶å¯¼, äºŒé˜¶å¯¼ â€¦$n$ é˜¶å¯¼çš„å€¼ = åŸå§‹å‡½æ•°åœ¨ $x=x_0$ å¤„çš„å€¼, ä¸€é˜¶å¯¼, äºŒé˜¶å¯¼ â€¦$n$ é˜¶å¯¼ï¼›      å¤šé¡¹å¼å’Œå‡½æ•°åœ¨æŸä¸€ç‚¹çš„å€¼ä¸€æ ·, å˜åŒ–ç‡ä¸€æ ·, å˜åŒ–ç‡çš„å˜åŒ–ç‡ä¸€æ ·, å˜åŒ–ç‡çš„å˜åŒ–ç‡çš„å˜åŒ–ç‡ä¹Ÿä¸€æ ·â€¦      å°±è¿™æ ·å±‚å±‚æ·±å…¥, æ— è®ºæ·±å…¥åˆ°å“ªä¸€ä¸ªç»´åº¦, å…³äºè¿™ä¸€ç‚¹çš„å˜åŒ–ç‡, äºŒè€…éƒ½ç›¸ç­‰, é‚£å°±å¯ä»¥æ¨æ–­ï¼š                  åœ¨è¿™ä¸€ç‚¹ä¸Š, å‡½æ•°å’Œå¤šé¡¹å¼åº”è¯¥æ˜¯ä¸€æ ·çš„ï¼›          åœ¨è¿™ä¸€ç‚¹é™„è¿‘, å‡½æ•°å’Œå¤šé¡¹å¼åº”è¯¥å¾ˆç›¸ä¼¼ï¼›          ç¦»è¿™ä¸€ç‚¹è¶Šè¿œ, å‡½æ•°å’Œå¤šé¡¹å¼çš„ç›¸ä¼¼ç¨‹åº¦å°±è¶Šéš¾ä»¥ä¿è¯ã€‚                    2. å¤šé¡¹å¼æ’å€¼åœ¨å®é™…é—®é¢˜ä¸­ï¼Œå¾€å¾€é€šè¿‡å®éªŒæˆ–è§‚æµ‹å¾—å‡ºè¡¨ç¤ºæŸç§è§„å¾‹çš„æ•°é‡å…³ç³» $y=F(x)$ï¼Œé€šå¸¸åªç»™å‡ºäº† $F(x)$ åœ¨æŸäº›ç‚¹ $x_i$ ä¸Šçš„å‡½æ•°å€¼ $y_i=F(x_i), i=1,2,\\cdots,n+1$ã€‚å³ä½¿æœ‰æ—¶ç»™å‡ºäº†å‡½æ•° $F(x)$ çš„è§£æè¡¨è¾¾å¼ï¼Œå€˜è‹¥è¾ƒä¸ºå¤æ‚ï¼Œä¹Ÿä¸ä¾¿äºè®¡ç®—ã€‚å› æ­¤ï¼Œéœ€è¦æ ¹æ®ç»™å®šç‚¹ $x_i$ ä¸Šçš„å‡½æ•°å€¼ $F(x_i)$,æ±‚å‡ºä¸€ä¸ªæ—¢èƒ½åæ˜  $F(x)$ çš„ç‰¹æ€§ï¼Œåˆä¾¿äºè®¡ç®—çš„ç®€å•å‡½æ•° $Æ’(x)$ æ¥è¿‘ä¼¼åœ°ä»£æ›¿ $F(x)$,æ­¤æ—¶ $Æ’(x)$ ç§°ä¸º $F(x)$ çš„æ’å€¼å‡½æ•°ï¼›$x_1,x_2,\\cdots,x_{n+1}$ ç§°ä¸ºæ’å€¼èŠ‚ç‚¹ã€‚æ±‚æ’å€¼å‡½æ•°çš„æ–¹æ³•ï¼Œç§°ä¸ºæ’å€¼æ³•ã€‚å¤šé¡¹å¼æ˜¯ä¸€ç±»ç®€å•çš„åˆç­‰å‡½æ•°ï¼Œè€Œä¸”ä»»ç»™ä¸¤ç»„æ•°ï¼š$b_1,b_2,\\cdots,b_{n+1}$ å’Œå„ä¸ç›¸åŒçš„ $Ñ_1,Ñ_2,\\cdots,Ñ_{n+1}$ï¼Œæ€»æœ‰å”¯ä¸€çš„æ¬¡æ•°ä¸è¶…è¿‡ $n$ çš„å¤šé¡¹å¼ $Æ’(x)$ æ»¡è¶³ $Æ’(Ñ_i)=b_i, i=1,2,\\cdots,n+1$ã€‚å› æ­¤åœ¨å®é™…åº”ç”¨ä¸­å¸¸å¸¸å–å¤šé¡¹å¼ä½œä¸ºæ’å€¼å‡½æ•°ã€‚ä½œä¸ºæ’å€¼å‡½æ•°çš„å¤šé¡¹å¼ï¼Œç§°ä¸ºæ’å€¼å¤šé¡¹å¼ã€‚2.1. æ‹‰æ ¼æœ—æ—¥æ’å€¼æ‹‰æ ¼æœ—æ—¥æ’å€¼æ³•ï¼Œç»™å®šæŸä¸ªå‡½æ•° $y(x)$ï¼Œé€‰æ‹© $k+1$ ä¸ªæ’å€¼ç‚¹ $(x_0,y_0),\\cdots,(x_k,y_k)$ï¼Œå…¶ä¸­ $x_j$ å¯¹åº”åæ ‡ç‚¹ï¼Œ$y_j$ ä¸ºå¯¹åº”è¿™ä¸ªåæ ‡ç‚¹çš„å€¼ï¼Œé‚£ä¹ˆæ‹‰æ ¼æœ—æ—¥æ’å€¼å¤šé¡¹å¼ä¸ºï¼š\\[L(x) := \\sum_{j=0}^k y_jl_j(x)\\]å…¶ä¸­ï¼Œæ¯ä¸ª $l_j(x)$ ä¸ºæ‹‰æ ¼æœ—æ—¥åŸºæœ¬å¤šé¡¹å¼ï¼ˆæˆ–ç§°æ’å€¼åŸºå‡½æ•°ï¼‰ï¼Œå…¶è¡¨è¾¾å¼ä¸ºï¼š\\[l_j(x) := \\prod_{i=0,i\\neq j}^k \\frac{x-x_i}{x_j-x_i}= \\frac{x-x_0}{x_j-x_0}\\cdots\\frac{x-x_{j-1}}{x_j-x_{j-1}}\\frac{x-x_{j+1}}{x_j-x_{j+1}}\\cdots\\frac{x-x_k}{x_j-x_k}\\]æ‹‰æ ¼æœ—æ—¥åŸºæœ¬å¤šé¡¹å¼ $l_j(x)$ çš„æ€§è´¨ï¼š  åœ¨ $x_{j}$ ä¸Šå–å€¼ä¸º $1$ï¼›  åœ¨å…¶å®ƒçš„ç‚¹ $x_{i},\\,i\\neq j$ ä¸Šå–å€¼ä¸º $0$ã€‚è¿™ä¸ªæ€§è´¨ä¿è¯äº†ï¼Œåœ¨ç»™å®šçš„æ‰€æœ‰ç¦»æ•£ç‚¹ $(x_j,y_j)$ ä¸Šï¼š  $y_jl_j(x)$ åœ¨ $x_j$ å¤„å–å€¼ä¸º $y_j$ï¼›  $y_jl_j(x)$ åœ¨å…¶ä½™ç‚¹å¤„å–å€¼ä¸º 0ã€‚å¯¹äºç»™å®šçš„è‹¥ $n+1$ ä¸ªç‚¹ï¼Œå¯¹åº”äºå®ƒä»¬çš„æ¬¡æ•°ä¸è¶…è¿‡ $n$ çš„æ‹‰æ ¼æœ—æ—¥å¤šé¡¹å¼åªæœ‰ä¸€ä¸ªã€‚è¯æ˜ç•¥ã€‚ä»¥ä¸‰ä¸ªç‚¹çš„æ‹‰æ ¼æœ—æ—¥æ’å€¼ä¸ºä¾‹ [2]ï¼Œå¦‚å›¾æ‰€ç¤ºï¼Œæˆ‘ä»¬æƒ³æ‰¾ä¸€æ ¹ç©¿è¿‡å®ƒçš„æ›²çº¿ï¼Œæˆ‘ä»¬å¯ä»¥åˆç†çš„å‡è®¾ï¼Œè¿™æ ¹æ›²çº¿æ˜¯ä¸€ä¸ªäºŒæ¬¡å¤šé¡¹å¼\\[y=a_0+a_1x + a_2x^2\\]ç‰›é€¼çš„æ‹‰æ ¼æœ—æ—¥è®¤ä¸ºï¼Œéœ€è¦æ‰¾åˆ°ä¸‰ä¸ªäºŒæ¬¡æ›²çº¿ä½œä¸ºåŸºï¼Œå°±å¯ä»¥è¾¾åˆ°ç›®æ ‡ã€‚æ‹‰æ ¼æœ—æ—¥æ’å€¼æ³•çš„å…¬å¼ç»“æ„æ•´é½ç´§å‡‘ï¼Œåœ¨ç†è®ºåˆ†æä¸­ååˆ†æ–¹ä¾¿ï¼Œç„¶è€Œåœ¨è®¡ç®—ä¸­ï¼Œå½“æ’å€¼ç‚¹å¢åŠ æˆ–å‡å°‘ä¸€ä¸ªæ—¶ï¼Œæ‰€å¯¹åº”çš„åŸºæœ¬å¤šé¡¹å¼å°±éœ€è¦å…¨éƒ¨é‡æ–°è®¡ç®—ï¼Œäºæ˜¯æ•´ä¸ªå…¬å¼éƒ½ä¼šå˜åŒ–ï¼Œéå¸¸ç¹çã€‚è¿™æ—¶å¯ä»¥ç”¨é‡å¿ƒæ‹‰æ ¼æœ—æ—¥æ’å€¼æ³•æˆ–ç‰›é¡¿æ’å€¼æ³•æ¥ä»£æ›¿ã€‚æ­¤å¤–ï¼Œå½“æ’å€¼ç‚¹æ¯”è¾ƒå¤šçš„æ—¶å€™ï¼Œæ‹‰æ ¼æœ—æ—¥æ’å€¼å¤šé¡¹å¼çš„æ¬¡æ•°å¯èƒ½ä¼šå¾ˆé«˜ï¼Œå› æ­¤å…·æœ‰æ•°å€¼ä¸ç¨³å®šçš„ç‰¹ç‚¹ï¼Œä¹Ÿå°±æ˜¯è¯´å°½ç®¡åœ¨å·²çŸ¥çš„å‡ ä¸ªç‚¹å–åˆ°ç»™å®šçš„æ•°å€¼ï¼Œä½†åœ¨é™„è¿‘å´ä¼šå’Œ â€œå®é™…ä¸Šâ€ çš„å€¼ä¹‹é—´æœ‰å¾ˆå¤§çš„åå·®ï¼ˆå¦‚ä¸‹å›¾ï¼‰ã€‚è¿™ç±»ç°è±¡ä¹Ÿè¢«ç§°ä¸ºé¾™æ ¼ç°è±¡ï¼Œè§£å†³çš„åŠæ³•æ˜¯åˆ†æ®µç”¨è¾ƒä½æ¬¡æ•°çš„æ’å€¼å¤šé¡¹å¼ã€‚ä¸Šå›¾å±•ç¤ºäº†æ‹‰æ ¼æœ—æ—¥æ’å€¼æ³•çš„æ•°å€¼ç¨³å®šæ€§ï¼šå¦‚å›¾ï¼Œç”¨äºæ¨¡æ‹Ÿä¸€ä¸ªååˆ†å¹³ç¨³çš„å‡½æ•°æ—¶ï¼Œæ’å€¼å¤šé¡¹å¼çš„å–å€¼å¯èƒ½ä¼šçªç„¶å‡ºç°ä¸€ä¸ªå¤§çš„åå·®ï¼ˆå›¾ä¸­çš„14è‡³15ä¸­é—´ï¼‰2.2. é‡å¿ƒæ‹‰æ ¼æœ—æ—¥æ’å€¼é‡å¿ƒæ‹‰æ ¼æœ—æ—¥æ’å€¼ï¼ˆç¬¬ä¸€å‹ï¼‰æ˜¯æ‹‰æ ¼æœ—æ—¥æ’å€¼æ³•çš„ä¸€ç§æ”¹è¿›ã€‚åœ¨æ‹‰æ ¼æœ—æ—¥æ’å€¼æ³•ä¸­ï¼Œè¿ç”¨å¤šé¡¹å¼\\[l(x) = (x-x_0)(x-x_1)\\cdots(x-x_k)\\]å¯ä»¥å°†æ‹‰æ ¼æœ—æ—¥åŸºæœ¬å¤šé¡¹å¼é‡æ–°å†™ä¸ºï¼š\\[l_j(x) = \\frac{l(x)}{x-x_j}\\frac{1}{\\prod_{i=0,i\\neq j}^k(x_j-x_i)}\\]å®šä¹‰é‡å¿ƒæƒ\\[\\omega_j = \\frac{1}{\\prod_{i=0,i\\neq j}^k(x_j-x_i)}\\]ä¸Šé¢çš„è¡¨è¾¾å¼å¯ç®€åŒ–ä¸º\\[l_j(x) = l(x)\\frac{\\omega_j}{x-x_j}\\]äºæ˜¯æ‹‰æ ¼æœ—æ—¥æ’å€¼å¤šé¡¹å¼å˜ä¸ºï¼š\\[L(x) = l(x)\\sum_{j=0}^k \\frac{\\omega_j}{x-x_j}y_j\\]å®ƒçš„ä¼˜ç‚¹æ˜¯å½“æ’å€¼ç‚¹çš„ä¸ªæ•°å¢åŠ ä¸€ä¸ªæ—¶ï¼Œå°†æ¯ä¸ª $\\omega_{j}$ éƒ½é™¤ä»¥ $(x_{j}-x_{k+1})$ï¼Œå°±å¯ä»¥å¾—åˆ°æ–°çš„é‡å¿ƒæƒ $\\omega_{k+1}$ï¼Œè®¡ç®—å¤æ‚åº¦ä¸º ${\\mathcal  O}(n)$ï¼Œæ¯”é‡æ–°è®¡ç®—æ¯ä¸ªåŸºæœ¬å¤šé¡¹å¼æ‰€éœ€è¦çš„å¤æ‚åº¦ ${\\mathcal  O}(n^{2})$ é™äº†ä¸€ä¸ªé‡çº§ã€‚å°†ä»¥ä¸Šçš„æ‹‰æ ¼æœ—æ—¥æ’å€¼å¤šé¡¹å¼ç”¨æ¥å¯¹å‡½æ•° $g(x)\\equiv 1$ æ’å€¼ï¼Œå¯ä»¥å¾—åˆ°ï¼š\\[\\forall x, g(x) = l(x) \\sum_{j=0}^k \\frac{\\omega_j}{x-x_j}\\]å› ä¸º $g(x) \\equiv 1$ æ˜¯ä¸€ä¸ªå¤šé¡¹å¼ï¼Œå› æ­¤å°† $L(x)$ é™¤ä»¥ $g(x)$ å¾—åˆ°\\[L(x) = \\frac{\\sum_{j=0}^k\\frac{\\omega_j}{x-x_j}y_j}{\\sum_{j=0}^k\\frac{\\omega_j}{x-x_j}}\\]ä¸Šè¿°å…¬å¼è¢«ç§°ä¸ºé‡å¿ƒæ‹‰æ ¼æœ—æ—¥æ’å€¼å…¬å¼ï¼ˆç¬¬äºŒå‹ï¼‰ã€‚å®ƒç»§æ‰¿äº†ç¬¬ä¸€å‹å¼å®¹æ˜“è®¡ç®—çš„ç‰¹ç‚¹ï¼Œå¹¶ä¸”åœ¨ä»£å…¥ $x$ å€¼è®¡ç®— $L(x)$ çš„æ—¶å€™ä¸å¿…è®¡ç®—å¤šé¡¹å¼ $l(x)$ã€‚å®ƒçš„å¦ä¸€ä¸ªä¼˜ç‚¹æ˜¯ï¼Œç»“åˆåˆ‡æ¯”é›ªå¤«èŠ‚ç‚¹è¿›è¡Œæ’å€¼çš„è¯ï¼Œå¯ä»¥å¾ˆå¥½åœ°æ¨¡æ‹Ÿç»™å®šçš„å‡½æ•°ï¼Œä½¿å¾—æ’å€¼ç‚¹ä¸ªæ•°è¶‹äºæ— ç©·æ—¶ï¼Œæœ€å¤§åå·®è¶‹äºé›¶ã€‚åŒæ—¶ï¼Œé‡å¿ƒæ‹‰æ ¼æœ—æ—¥æ’å€¼ç»“åˆåˆ‡æ¯”é›ªå¤«èŠ‚ç‚¹è¿›è¡Œæ’å€¼å¯ä»¥è¾¾åˆ°æä½³çš„æ•°å€¼ç¨³å®šæ€§ã€‚ç¬¬ä¸€å‹æ‹‰æ ¼æœ—æ—¥æ’å€¼æ˜¯å‘åç¨³å®šçš„ï¼Œè€Œç¬¬äºŒå‹æ‹‰æ ¼æœ—æ—¥æ’å€¼æ˜¯å‘å‰ç¨³å®šçš„ï¼Œå¹¶ä¸”å‹’è´æ ¼å¸¸æ•°å¾ˆå°ã€‚2.3. åˆ‡æ¯”é›ªå¤«èŠ‚ç‚¹ç¬¬ä¸€ç±»åˆ‡æ¯”é›ªå¤«å¤šé¡¹å¼ $T_n$ ç”±ä»¥ä¸‹é€’æ¨å…³ç³»ç¡®å®šï¼š\\[\\begin{aligned}  T_0(x) &amp;= 1\\\\  T_1(x) &amp;= x\\\\  T_{n+1}(x) &amp;= 2xT_n(x) - T_{n-1}(x),\\ n=1,2,\\cdots\\\\\\end{aligned}\\]å‰ 4 é˜¶ç¬¬ä¸€ç±»åˆ‡æ¯”é›ªå¤«å¤šé¡¹å¼ä¸º\\[\\begin{aligned}  T_0(x) &amp;= 1\\\\  T_1(x) &amp;= x\\\\  T_2(x) &amp;= 2x^2 - 1\\\\  T_3(x) &amp;= 4x^3 - 3x\\\\  T_4(x) &amp;= 8x^4 - 8x^2+1\\\\\\end{aligned}\\]ç¬¬ä¸€ç±»åˆ‡æ¯”é›ªå¤«å¤šé¡¹å¼çš„æ ¹åˆè¢«ç§°ä¸ºåˆ‡æ¯”é›ªå¤«èŠ‚ç‚¹ï¼Œåœ¨ $[0,1]$ åŒºé—´å†…ä¸º\\[x_k=cos(\\frac{2k-1}{2n}\\pi),\\ k=1,\\cdots,n\\]  å¤šé¡¹å¼çš„æ ¹ä¸ºä½¿å¾—å¤šé¡¹å¼å–å€¼ä¸º 0 çš„å€¼ï¼Œå³å¤šé¡¹å¼æ›²çº¿ä¸æ¨ªåæ ‡è½´çš„äº¤ç‚¹ã€‚å½¢è±¡çš„çœ‹ï¼Œåˆ‡æ¯”é›ªå¤«èŠ‚ç‚¹ç­‰ä»·äº $n$ ç­‰åˆ†å•ä½åŠçƒçš„ç‚¹çš„ $x$ åæ ‡ï¼ˆä¸‹å›¾ä¸­ $n=10$ï¼‰ã€‚å¯¹äºä»»æ„åŒºé—´ $[a,b]$ï¼Œåˆ‡æ¯”é›ªå¤«èŠ‚ç‚¹ä¸º\\[x_k=\\frac{1}{2}(a+b) + \\frac{1}{2}(b-a)cos(\\frac{2k-1}{2n}\\pi),\\ k=1,\\cdots,n\\]åˆ‡æ¯”é›ªå¤«èŠ‚ç‚¹å¹¿æ³›ç”¨äºå¤šé¡¹å¼æ’å€¼ï¼Œå› ä¸ºä»–ä»¬å…·å¤‡ä¸€ä¸ªå¾ˆå¥½çš„æ€§è´¨ï¼Œå³å…·æœ‰æœ€å°çš„é¾™æ ¼ç°è±¡ã€‚3. ODE-IPVçš„æ•°å€¼è§£æ³•å¾®åˆ†æ–¹ç¨‹çš„åˆå€¼é—®é¢˜ï¼ˆODE-IVPï¼‰å¦‚ä¸‹\\[\\left\\{\\begin{array}{l}  \\dot{x}=f(x(t),t),\\quad t\\in[t_n,t_{n+1}]\\\\  x(t_0)=x_0\\end{array}\\right.\\]å…¶ä¸­ï¼Œ$f$ ä¸º $x,t$ çš„å·²çŸ¥å‡½æ•°ï¼Œ$x_0$ ä¸ºç»™å®šçš„åˆå€¼ã€‚åœ¨ä»¥ä¸‹è®¨è®ºä¸­ï¼Œå‡è®¾å‡½æ•° $f(x,t)$ åœ¨åŒºåŸŸ $t_0\\leq t\\leq T, \\vert x\\vert&lt;\\infty$ å†…è¿ç»­ï¼Œå¹¶ä¸”å…³äº $x$ æ»¡è¶³ Lipschitz æ¡ä»¶ï¼Œä½¿å¾—\\[\\vert f(x, t) - f(\\overline x, t) \\vert \\leq L\\vert x - \\overline x \\vert\\]ç”±å¸¸å¾®åˆ†æ–¹ç¨‹ç†è®ºï¼Œåœ¨ä»¥ä¸Šå‡è®¾ä¸‹ï¼Œåˆå€¼é—®é¢˜å¿…å®šä¸”å”¯ä¸€å­˜åœ¨æ•°å€¼è§£ $x(t)$ã€‚ç”±äºå¸¸å¾®åˆ†æ–¹ç¨‹çš„è§£æè§£æ±‚è§£å›°éš¾ï¼Œåˆ°ç›®å‰ä¸ºæ­¢æˆ‘ä»¬åªèƒ½å¯¹å°‘æ•°å‡ ä¸ªç‰¹æ®Šç±»å‹çš„æ–¹ç¨‹æ±‚å¾—è§£æè§£ï¼Œå¾ˆå¤šå®é™…é—®é¢˜ä¸­å¸¸å¸¸å¾—ä¸åˆ°åˆç­‰å‡½æ•°è¡¨ç¤ºçš„è§£ï¼Œéœ€è¦æ±‚æ•°å€¼è§£ã€‚å‡è®¾ $t_n$ æ—¶åˆ»çš„çŠ¶æ€é‡å–å€¼ä¸º $x(t_n) = x_n$ï¼Œåˆ™ä¸‹ä¸€æ—¶åˆ» $t_{n+1}$ çš„çŠ¶æ€é‡å–å€¼ $x(t_{n+1}) = x_{n+1}$ å¯ä»¥é€šè¿‡å¯¹åŸå§‹å¾®åˆ†å¼è¿›è¡Œç§¯åˆ†æ±‚å¾—\\[x_{n+1} = x_n + \\int_{t_n}^{t_{n+1}}f(x(s),s)ds\\]å¸¸å¾®åˆ†æ–¹ç¨‹åˆå€¼é—®é¢˜çš„æ•°å€¼è§£æ³•ï¼Œå°±æ˜¯ç»™å®šåˆå€¼ $x(t_0)=x_0$ çš„åŸºç¡€ä¸Šï¼Œå¯»æ±‚å¾®åˆ†æ–¹ç¨‹åœ¨ä¸€ç³»åˆ—ç¦»æ•£èŠ‚ç‚¹ $t_1,t_2,\\cdots,t_n$ ä¸Šçš„è¿‘ä¼¼å€¼ $x_1,x_2,\\cdots,x_n$ã€‚ç”±äºå¾®åˆ†æ–¹ç¨‹çš„è§£çš„å›¾å½¢æ—¶ä¸€æ¡æ›²çº¿ï¼Œå«åšå¾®åˆ†æ–¹ç¨‹çš„ç§¯åˆ†æ›²çº¿ï¼Œåˆå€¼é—®é¢˜çš„å‡ ä½•æ„ä¹‰ï¼Œå°±æ˜¯æ±‚å¾®åˆ†æ–¹ç¨‹é€šè¿‡åˆå€¼ç‚¹ $(t_0,x_0)$ çš„é‚£æ¡ç§¯åˆ†æ›²çº¿ã€‚è§£å†³ä¸Šè¿°é—®é¢˜æœ‰ä¸¤ç§æ–¹æ³•ï¼šæ—¶é—´æ¨è¿›æ³•å’Œé…ç‚¹æ³•ã€‚3.1. æ—¶é—´æ¨è¿›æ³•Time-Marchingï¼Œæ—¶é—´æ¨è¿›æ³•ï¼Œå¾®åˆ†æ–¹ç¨‹åœ¨æ¯ä¸ªæ—¶åˆ»çš„è§£æ ¹æ®å‰é¢ä¸€ä¸ªæˆ–å¤šä¸ªæ—¶åˆ»çš„è§£æ±‚å¾—ã€‚æ—¶é—´æ­¥è¿›æ³•å†æ¬¡è¢«åˆ†ä¸ºä¸¤ç±»ï¼šå¤šæ­¥æ³•ï¼ˆmultiple-stepï¼‰å’Œå¤šé˜¶æ®µæ³•ï¼ˆmultiple-stageï¼‰ã€‚3.1.1. å¤šæ­¥æ³•åˆç§°ä¸º linear multiple-step methodï¼Œå³ $t_{n+1}$ æ—¶åˆ»å¾®åˆ†æ–¹ç¨‹çš„è§£ç”± $t_{n-j},\\cdots,t_n$ æ—¶åˆ»çš„è§£æ±‚å¾—ï¼Œ$j$ ä¸ºæ­¥é•¿ã€‚  å•æ­¥æ³•ï¼ˆæ¬§æ‹‰æ³•ï¼‰æœ€ç®€å•çš„å¤šæ­¥æ³•å°±æ˜¯å•æ­¥æ³•ï¼Œå³ $j=1$ï¼Œæœ€å¸¸ç”¨çš„å•æ­¥æ³•ä¸ºæ¬§æ‹‰æ³•ï¼ˆEuler Methodï¼‰ï¼Œå…·å¤‡å¦‚ä¸‹çš„å½¢å¼ã€‚\\[x_{n+1} = x_n + h_n[b f_n + (1-b)f_{n+1}]\\]å…¶ä¸­ $f_n=f[x(t_n),t_n]$ï¼Œ$b\\in[0,1]$ï¼Œ$h_n$ æ˜¯æ­¥é•¿ã€‚å½“ $b=1$ æ—¶ï¼Œä¸ºå¯¹åº”å‰å‘æ¬§æ‹‰æ³•ï¼›$b=0$ æ—¶ï¼Œä¸ºå¯¹åº”åå‘æ¬§æ‹‰æ³•ã€‚ä»¥åå‘æ¬§æ‹‰æ³•ä¸ºä¾‹\\[x_{t+1} = x_t + h\\cdot f(x_t,t)\\]å½“ $b=1/2$ æ—¶ï¼Œä¸ºå¯¹åº”æ”¹è¿›çš„æ¬§æ‹‰æ³•ã€‚æ¬§æ‹‰æ³•ä¹Ÿå¯ä»¥ä»ä¸€é˜¶æ³°å‹’å¤šé¡¹å¼å˜åŒ–å¾—åˆ°ã€‚æ”¹è¿›çš„æ¬§æ‹‰æ³•å¯ä»¥é‡‡ç”¨ é¢„æµ‹-æ ¡æ­£ æ¨¡å‹æ¥å®æ–½ã€‚\\[\\begin{aligned}\\overline x_{t+1} &amp;= x_t + h\\cdot f(x_t,t)\\\\x_{t+1} &amp;= x_t + \\frac{1}{2}h\\cdot [f(x_t,t)+f(\\overline x_{t+1},t+1)]\\\\\\end{aligned}\\]  å¤šæ­¥æ³•å½“ $j&gt;1$ æ—¶ï¼Œå°±æ˜¯æ›´åŠ å¤æ‚çš„çº¿æ€§å¤šæ­¥æ³•ã€‚å½¢å¦‚\\[\\begin{aligned}&amp;a_0x_n + \\cdots + a_{j-1}x_{n+j-1} + a_jx_{n+j} =\\\\&amp;h(b_0f(x_n,t_n) + \\cdots + b_{j-1}f(x_{n+j-1},t_{n+j-1})+b_jf(x_{n+j},t_{n+j}))\\end{aligned}\\]å…¶ä¸­ $a_j=1$ã€‚ç³»æ•° $a_0,\\cdots,a_{j-1}$ å’Œ $b_0,\\cdots,b_j$ çš„é€‰å–å†³å®šäº†å¤šæ­¥æ³•çš„å…·ä½“å½¢å¼ï¼Œä¸€èˆ¬åœ¨é€¼è¿‘ç¨‹åº¦å’Œè®¡ç®—ç®€ä¾¿æ€§ä¸Šè¿›è¡Œæƒè¡¡ã€‚æ›´åŠ æ™®éçš„æƒ…å†µä¸‹ï¼Œå…¶ä¸­ç»å¤§éƒ¨åˆ†çš„ç³»æ•°éƒ½ç½®ä¸º0ã€‚å¦‚æœ $b_j=0$ åˆ™ç§°ä¸ºæ˜¾å¼æ³•ï¼Œå› ä¸ºå¯ä»¥ç›´æ¥æ ¹æ®ç­‰å¼è®¡ç®— $x_{n+j}$ã€‚å¦‚æœ$b_j\\neq 0$ åˆ™ç§°ä¸ºéšå¼æ³•ï¼Œå› ä¸º $x_{n+j}$ ä¾èµ–äº $f(x_{n+j},t_{n+j})$ï¼Œéœ€è¦é€šè¿‡è¿­ä»£çš„æ–¹æ³•æ¥æ±‚è§£ï¼Œæ¯”å¦‚é‡‡ç”¨ç‰›é¡¿è¿­ä»£æ³•ã€‚æœ‰æ—¶å€™ï¼Œé‡‡ç”¨æ˜¾å¼å¤šæ­¥æ³•æ¥ ã€é¢„æµ‹ã€ $x_{n+j}$ï¼Œç„¶åç”¨éšå¼æ¥ ã€æ ¡æ­£ã€å®ƒï¼Œè¿™ç§æ–¹å¼ç§°ä¸º é¢„æµ‹-æ ¡æ­£æ³•ï¼ˆpredictorâ€“corrector methodï¼‰ã€‚ä¸‹é¢åˆ—ä¸¾ä¸¤ç§å¸¸ç”¨çš„çº¿æ€§å¤šæ­¥æ³•å®¶æ—ã€‚Adams-Bashforth methodsï¼Œä¸€ç§æ˜¾å¼æ³•ï¼Œå…¶ä¸­ $a_{j-1}=-1$ è€Œ $a_{j-2}=\\cdots=a_0=0$ï¼Œç„¶åè®¾è®¡ $b_j$ æ¥ä½¿å¾—æ–¹æ³•å…·å¤‡ $j$ é˜¶ç²¾åº¦ï¼ˆåŒæ—¶ä¹Ÿä½¿å¾—ç®—æ³•å…·å¤‡å”¯ä¸€æ€§ï¼‰ã€‚$j=1,2,3$ æ­¥ Adams-Bashforth æ–¹æ³•å¦‚ä¸‹ï¼š\\[\\begin{aligned}  x_{n+1} &amp;= x_n + hf(x_n, t_n)\\quad (å‰å‘æ¬§æ‹‰æ³•)\\\\  x_{n+2} &amp;= x_{n+1} + h[\\frac{3}{2}f(x_{n+1}, t_{n+1})-\\frac{1}{2}f(x_{n}, t_{n})]\\\\  x_{n+3} &amp;= x_{n+2} + h[\\frac{23}{12}f(x_{n+2}, t_{n+2})-\\frac{16}{12}f(x_{n+1}, t_{n+1})+\\frac{5}{12}f(x_{n}, t_{n})]\\\\\\end{aligned}\\]$j=2$ è´¨ä¸ºæ³°å‹’å±•å¼€ä¿ç•™è‡³äºŒé˜¶ï¼Œå¹¶ç”¨å·®åˆ†ä»£æ›¿äºŒé˜¶å¾®åˆ†é¡¹ã€‚\\[\\begin{aligned}x_{n+1} &amp;= x_n + hf(x_n,t_n) + \\frac{h^2}{2}\\dot f(x_n,t_n)+\\cdots\\\\x_{n+2} &amp;= x_{n+1} + hf(x_{n+1},t_{n+1}) + \\frac{h^2}{2}\\dot f(x_{n+1},t_{n+1})\\\\&amp;= x_{n+1} + hf(x_{n+1},t_{n+1}) + \\frac{h^2}{2}[\\frac{f(x_{n+1},t_{n+1})-f(x_{n},t_{n})}{h}]\\\\&amp;= x_{n+1} + h[\\frac{3}{2}f(x_{n+1}, t_{n+1})-\\frac{1}{2}f(x_{n}, t_{n})]\\end{aligned}\\]å¦ä¸€ç§å¦‚ä½•ç¡®å®šå‚æ•° $b_j$ çš„æ–¹æ³•ç•¥ï¼Œå¯å‚è€ƒç»´åŸºç™¾ç§‘ã€‚æ³¨æ„åˆ°ï¼Œå¤šæ­¥æ³•éœ€è¦å¤šä¸ªå†å²æ•°æ® $x_n,x_{n+1}$ æ¥è®¡ç®—ä¸‹ä¸€æ­¥ $x_{n+2}$ï¼Œè€Œå¸¸å¾®åˆ†æ–¹ç¨‹çš„åˆå€¼é—®é¢˜ä¸€èˆ¬åªç»™å‡ºåˆå§‹æ—¶åˆ»çš„åˆå€¼ï¼Œå› æ­¤ä¸èƒ½ç›´æ¥ä»è¯¥å€¼å¯åŠ¨ã€‚å¸¸ç”¨æ–¹æ³•æ˜¯ç”¨ Euler æ³•æˆ–è€… Runge-Kutta æ³•æ¥å¯åŠ¨ï¼Œè®¡ç®—å‡ºå‰å‡ ä¸ªå€¼ã€‚Adams-Moulton methodsï¼Œä¸€ç§éšå¼æ³•ï¼Œä¸ Adams-Bashforth æ–¹æ³•å¾ˆç±»ä¼¼ï¼Œåªæ˜¯è®¾è®¡ $b_j$ ä½¿å¾—ç²¾åº¦é˜¶æ•°å°½å¯èƒ½é«˜ï¼ˆ$j$ é˜¶ Adams-Moulton æ³•å…·å¤‡ $j+1$ é˜¶ç²¾åº¦ï¼Œè€Œ$j$ é˜¶ Adams-Bashforth æ³•åªå…·å¤‡ $j$ é˜¶ç²¾åº¦ï¼‰ã€‚$j=1,2$ æ­¥ Adams-Moulton æ–¹æ³•å¦‚ä¸‹ï¼š\\[\\begin{aligned}  x_{n+1} &amp;= x_n + hf(x_{n+1}, t_{n+1})\\quad (åå‘æ¬§æ‹‰æ³•)\\\\  x_{n+1} &amp;= x_n + \\frac{1}{2}h[f(x_{n+1}, t_{n+1})+f(x_n, t_n)]\\quad (æ¢¯å½¢æ³•åˆ™)\\\\  x_{n+2} &amp;= x_{n+1} + h[\\frac{5}{12}f(x_{n+2}, t_{n+2})+\\frac{3}{2}f(x_{n+1}, t_{n+1})-\\frac{1}{12}f(x_{n}, t_{n})]\\\\\\end{aligned}\\]3.1.2. å¤šæ®µæ³•åˆç§°ä¸º multiple-stage methodï¼Œæ˜¯åœ¨ $[t_n,t_{n+1}]$ åŒºé—´å†…åˆ’åˆ†è‹¥å¹²ä¸´æ—¶æ®µï¼Œç„¶åè¿›è¡Œè¿­ä»£æ±‚è§£çš„ä¸€ç§å¸¸å¾®åˆ†æ–¹ç¨‹æ•°å€¼è§£æ³•ã€‚å¤šæ®µæ³•åªéœ€è¦ç”¨åˆ°ä¸€æ­¥çš„å†å²ä¿¡æ¯ï¼Œä½†æ˜¯å°†è¿™ä¸€æ­¥åŒºé—´åˆ’åˆ†ä¸ºè®¸å¤šæ®µã€‚å¤šæ®µæ³•å…¶ä¸­æœ€å¸¸ç”¨çš„æ˜¯ é¾™æ ¼-åº“å¡”ï¼ˆRunge-Kuttaï¼‰ æ³•ã€‚å®šä¹‰æ­¥é•¿ä¸º $h$ï¼Œå°†åŒºé—´åˆ’åˆ†ä¸º $s$ ä¸ªå­åŒºé—´ï¼Œåˆ™ $s$ é˜¶æ˜¾å¼ Runge-Kutta å…¬å¼ä¸º\\[\\begin{aligned}x_{n+1} &amp;= x_n + h\\sum_{i=1}^sb_ik_i\\\\k_1&amp;= f(x_n,t_n)\\\\k_2&amp;= f(x_n+h(a_{21}k_1),t_n+c_2h)\\\\k_3&amp;= f(x_n+h(a_{31}k_1+a_{32}k_2),t_n+c_3h)\\\\\\vdots\\\\k_s&amp;= f(x_n+h(a_{s1}k_1+a_{s2}k_2+\\cdots+a_{s,s-1}k_{s-1}),t_n+c_sh)\\\\\\end{aligned}\\]é¾™æ ¼åº“å¡”æ³•çš„åŸºæœ¬æ€è·¯æ˜¯ï¼Œç”¨ $f(x,t)$ åœ¨å‡ ä¸ªä¸åŒç‚¹çš„æ•°å€¼åŠ æƒå¹³å‡ä»£æ›¿ $f(x_{n+1},t_{n+1})$ çš„å€¼ï¼Œè€Œä½¿æˆªæ–­è¯¯å·®çš„é˜¶æ•°å°½å¯èƒ½é«˜ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå–ä¸åŒç‚¹çš„æ–œç‡åŠ æƒå¹³å‡ä½œä¸ºå¹³å‡æ–œç‡ï¼Œä»è€Œæé«˜æ–¹æ³•çš„é˜¶æ•°ã€‚è¿™æ ·å¯ä»¥ä¿ç•™æ³°å‹’å±•å¼€æ³•æ‰€å…·æœ‰çš„é«˜é˜¶å±€éƒ¨æˆªæ–­è¯¯å·®ï¼ŒåŒæ—¶é¿å…äº†è®¡ç®—å‡½æ•° $f(x,t)$ çš„é«˜é˜¶å¯¼æ•°ã€‚é¾™æ ¼åº“å¡”æ³•åŒ…å«çš„ç³»æ•°ä¸º $b_i, a_{ij},c_i$ï¼Œéœ€è¦ä¸æ³°å‹’å±•å¼€å…¬å¼å„é¡¹ç³»æ•°åšå¯¹æ¯”æ¥ç¡®å®šè¿™äº›ç³»æ•°ã€‚  ä¸€é˜¶é¾™æ ¼åº“å¡”æ³•æ³°å‹’å±•å¼€åˆ°ä¸€é˜¶å¯¼ä¸º\\[x_{n+1} = x_n + hf(x_n,t_n)+\\cdots\\]ä¸€é˜¶é¾™æ ¼åº“å¡”å…¬å¼ï¼š$s=1$ æ—¶ä¸º\\[\\begin{aligned}x_{n+1} &amp;= x_n + hb_1k_1\\\\k_1 &amp;= f(x_n,t_n)\\\\\\Rightarrow x_{n+1} &amp;= x_n + hb_1f(x_n,t_n)\\end{aligned}\\]ä¸‹é¢ç¡®å®šç³»æ•° $b_1$ã€‚ä¸æ³°å‹’å±•å¼€å¯¹æ¯”ï¼Œç›¸åº”é¡¹ç³»æ•°ä¿æŒä¸€è‡´ï¼Œæœ‰\\[b_1=1\\]å¯ä»¥çœ‹å‡ºï¼Œ1 é˜¶é¾™æ ¼åº“å¡”æ³•å°±æ˜¯æ˜¾å¼æ¬§æ‹‰æ³•ã€‚  äºŒé˜¶é¾™æ ¼åº“å¡”æ³•æ³°å‹’å±•å¼€åˆ°äºŒé˜¶å¯¼ä¸º\\[\\begin{aligned}x_{n+1} &amp;= x_n + hf(x_n,t_n) + \\frac{h^2}{2}\\dot f(x_n,t_n)+\\cdots\\\\&amp;=x_n + hf(x_n,t_n) + \\frac{h^2}{2}\\left[\\frac{\\partial f(x_n,t_n)}{\\partial x}f(x_n,t_n)+\\frac{\\partial f(x_n,t_n)}{\\partial t}\\right] + \\cdots\\end{aligned}\\]æ³¨æ„ï¼Œä¸Šå¼éšå«äº†æ¡ä»¶ $\\frac{\\partial x}{\\partial t}=\\dot x = f(x_n,t_n)$äºŒé˜¶é¾™æ ¼åº“å¡”æ³•ï¼š$s=2$ æ—¶ä¸º\\[\\begin{aligned}x_{n+1} &amp;= x_n + h(b_1k_1+b_2k_2)\\\\k_1&amp;= f(x_n,t_n)\\\\k_2&amp;= f(x_n+h(a_{21}k_1),t_n+c_2h)\\\\\\Rightarrow x_{n+1} &amp;= x_n + hb_1f(x_n,t_n)+hb_2f(x_n+h(a_{21}k_1),t_n+c_2h)\\end{aligned}\\]ç›¸å½“äºåœ¨åŒºé—´ $[t_n,t_n+1]$ å–ä¸¤ä¸ªç‚¹ $t_n,t_{n}+c_2h$ï¼Œè®¡ç®—è¯¥ä¸¤ä¸ªç‚¹çš„æ–œç‡å€¼ $k_1,k_2$ï¼Œç„¶ååšåŠ æƒå¹³å‡ã€‚ä¸ºäº†ä¸ä¸Šè¿°æ³°å‹’å±•å¼€å¼è¿›è¡Œç³»æ•°å¯¹æ¯”ï¼Œéœ€è¦å¯¹æ–œç‡ $k_2$ åœ¨ $(x_n,t_n)$ å¤„åšæ³°å‹’å±•å¼€ï¼Œéµå¾ªäºŒå…ƒå‡½æ•°çš„æ³°å‹’å±•å¼€å…¬å¼ï¼Œå½¢å¼å¦‚ä¸‹\\[\\begin{aligned}  f(x_0+h,y_0+k) = f(x_0,t_0) + (h\\frac{\\partial}{\\partial x}+k\\frac{\\partial}{\\partial y})f(x_0,y_0)+\\cdots\\end{aligned}\\]å±•å¼€åæœ‰\\[\\begin{aligned}  k_2 &amp;= f(x_n+h(a_{21}k_1),t_n+c_2h)\\\\  &amp;=f(x_n,t_n) + ha_{21}k_1\\frac{\\partial f(x_n,t_n)}{\\partial x} + c_2h\\frac{\\partial f(x_n,t_n)}{\\partial t}\\\\  &amp;=f(x_n,t_n) + ha_{21}\\frac{\\partial f(x_n,t_n)}{\\partial x}f(x_n,t_n) + c_2h\\frac{\\partial f(x_n,t_n)}{\\partial t}\\\\\\end{aligned}\\]å¸¦å›åˆ°äºŒé˜¶é¾™æ ¼åº“å¡”çš„å±•å¼€å¼ä¸­ï¼Œæœ‰\\[\\begin{aligned}  x_{n+1} &amp;= x_n + hb_1f(x_n,t_n)+hb_2f(x_n+h(a_{21}k_1),t_n+c_2h)\\\\  &amp;= x_n + hb_1f(x_n,t_n)+hb_2 \\left[ f(x_n,t_n) + ha_{21}\\frac{\\partial f(x_n,t_n)}{\\partial x}f(x_n,t_n) + c_2h\\frac{\\partial f(x_n,t_n)}{\\partial t} [\\right]\\\\  &amp;=x_n + h(b_1+b_2)f(x_n,t_n) + \\frac{h^2}{2}\\left[ 2b_2a_{21}\\frac{\\partial f(x_n,t_n)}{\\partial x}f(x_n,t_n) + 2b_2c_2\\frac{\\partial f(x_n,t_n)}{\\partial t} \\right]\\end{aligned}\\]ä¸æ³°å‹’å±•å¼€å¼è¿›è¡Œç³»æ•°å¯¹æ¯”ï¼Œæœ‰\\[b_1+b_2=1,\\quad 2b_2a_{21}=1,\\quad 2b_2c_2 = 1\\]å››ä¸ªæœªçŸ¥æ•°ï¼Œä¸‰ä¸ªæ–¹ç¨‹ï¼Œå› æ­¤å­˜åœ¨æ— ç©·å¤šä¸ªç³»æ•°ç»„åˆã€‚æ‰€æœ‰æ»¡è¶³çš„ç³»æ•°ç»Ÿç§°ä¸ºäºŒé˜¶é¾™æ ¼åº“å¡”æ ¼å¼ã€‚æ³¨æ„åˆ°ï¼Œ $b_1=b_2=0.5,\\;a_{21}=c_2=1$ï¼Œå¯¹åº”çš„äºŒé˜¶é¾™æ ¼åº“å¡”å…¬å¼ä¸º\\[\\begin{aligned}x_{n+1} &amp;= x_n + \\frac{h}{2}(k_1+k_2)\\\\k_1&amp;= f(x_n,t_n)\\\\k_2&amp;= f(x_n+hk_1,t_n+h)\\\\\\end{aligned}\\]è¿™å°±æ˜¯æ”¹è¿›çš„ Euler æ³•ã€‚  ä¸‰é˜¶é¾™æ ¼åº“å¡”æ³•ï¼šç•¥ã€‚å¯å‚è€ƒç™¾åº¦æ–‡åº“. é¾™æ ¼åº“å¡”æ³•æ¨å¯¼  å››é˜¶é¾™æ ¼åº“å¡”æ³•ï¼š$s=4$ æ—¶ï¼Œå››é˜¶é¾™æ ¼åº“å¡”æ³•å¦‚ä¸‹\\[\\begin{aligned}x_{n+1} &amp;=x_n + \\frac{1}{6}h(k_1+2k_2+2k_3+k_4)\\\\k_1 &amp;= f(x_n,t_n)\\\\k_2 &amp;= f(x_n+h\\frac{k_1}{2},t_n + \\frac{h}{2})\\\\k_3 &amp;= f(x_n+h\\frac{k_2}{2},t_n + \\frac{h}{2})\\\\k_4 &amp;= f(x_n+hk_3,t_n + h)\\\\\\end{aligned}\\]è¯æ˜è¿‡ç¨‹ç•¥ã€‚å¯å‚è€ƒç™¾åº¦æ–‡åº“. é¾™æ ¼åº“å¡”æ³•æ¨å¯¼æœ€å¸¸ç”¨å››é˜¶é¾™æ ¼åº“å¡”æ³•ï¼Œå› ä¸ºé¾™æ ¼åº“å¡”å…¬å¼çš„æˆªæ–­ç²¾åº¦å¹¶ä¸æ˜¯éšç€é˜¶æ•°çš„å¢é«˜è€Œæé«˜çš„ï¼Œå½“ $s=5,6$ æ—¶çš„é¾™æ ¼åº“å¡”å…¬å¼ä»ç„¶åªæœ‰å››é˜¶ç²¾åº¦ï¼Œåªæœ‰åˆ° $s=7$ æ‰å…·å¤‡äº”é˜¶ç²¾åº¦ã€‚æ€»ç»“ï¼šRunge-Kutta å…¬å¼çš„æ€è·¯ï¼Œå°±æ˜¯åˆ©ç”¨åŒºé—´å†…ä¸€äº›ç‰¹æ®Šç‚¹çš„ä¸€é˜¶å¯¼æ•°å€¼çš„çº¿æ€§ç»„åˆæ¥æ›¿ä»£æŸç‚¹å¤„çš„ $n$ é˜¶å¯¼æ•°å€¼ï¼Œè¿™æ ·å°±å¯ä»¥ä»…é€šè¿‡ä¸€ç³»åˆ—ä¸€é˜¶å¯¼æ•°å€¼æ¥å¾—åˆ°æŸç‚¹å¹‚çº§æ•°å±•å¼€çš„é¢„æµ‹æ•ˆæœã€‚è¿™å’Œæ³°å‹’å…¬å¼æ­£å¥½æ˜¯åè¿‡æ¥çš„ï¼Œæ³°å‹’å…¬å¼æ˜¯ç”¨æŸç‚¹çš„ $n$ é˜¶å¹‚çº§æ•°å±•å¼€æ¥è¿‘ä¼¼å¾—åˆ°å°é‚»åŸŸå†…çš„å‡½æ•°å€¼ã€‚3.2. é…ç‚¹æ³•é…ç‚¹æ³•é€‰æ‹©çš„æœ‰é™ç»´å€™é€‰è§£ç©ºé—´ï¼ˆé€šå¸¸æ˜¯å±•å¼€åˆ°ä¸€å®šé˜¶æ•°çš„å¤šé¡¹å¼ï¼‰å’ŒåŸŸä¸­çš„å¤šä¸ªç‚¹ï¼ˆç§°ä¸ºé…ç‚¹ï¼‰ï¼Œå¹¶é€‰æ‹©åœ¨é…ç‚¹å¤„æ»¡è¶³ç»™å®šæ–¹ç¨‹çš„è§£ ã€‚ä¸€ç§ç®€å•çš„æ–¹å¼æ˜¯é‡‡ç”¨å¦‚ä¸‹å½¢å¼çš„ $n$ é˜¶åˆ†æ®µå¤šé¡¹å¼æ¥è¿‘ä¼¼çŠ¶æ€é‡å–å€¼\\[p(t) = \\sum_{i=0}^n a_i(t-t_0)^i,\\ t\\in[t_0,t_1]\\]å‡è®¾å¸Œæœ›æ±‚å¾®åˆ†æ–¹ç¨‹åˆå€¼é—®é¢˜\\[\\left\\{\\begin{array}{l}  \\dot{x}=f(x(t),t)\\\\  x(t_0)=x_0\\end{array}\\right.\\]åœ¨åŒºé—´ $[t_0,t_0+c_kh]$ çš„è§£ï¼Œå…¶ä¸­ $0&lt;c_1&lt;\\cdots&lt;c_n\\leq1$ã€‚é…ç‚¹æ³•è®¾è®¡ä¸€ä¸ª $n$ é˜¶å¤šé¡¹å¼ $p$ï¼Œä½¿å¤šé¡¹å¼æ»¡è¶³ä»¥ä¸‹ä¸¤ä¸ªçº¦æŸ  åˆå§‹æ¡ä»¶ $p(t_{0})=x_{0}$  å¾®åˆ†æ–¹ç¨‹ $\\dot p(t_{k})=f(p(t_{k}),t_{k}),\\ k=1,\\cdots,n$åè€…è¢«ç§°ä¸ºé…ç‚¹æ¡ä»¶ï¼Œä½¿å¾—å¤šé¡¹å¼åœ¨åŒºé—´çš„æ¯ä¸ªé…ç‚¹ $t_1,\\cdots,t_n$ ä¸Šçš„å¾®åˆ†å‡ç­‰äºå¾®åˆ†æ–¹ç¨‹çš„ç­‰å¼å³è¾¹ã€‚ä¸Šé¢ä¸¤ä¸ªçº¦æŸæä¾›äº† $n+1$ ä¸ªæ¡ä»¶ï¼Œæ­£å¥½å¯¹åº” $n$ é˜¶å¤šé¡¹å¼ä¸­çš„ $n+1$ ä¸ªå¾…å®šå‚æ•°ã€‚ä¸¾ä¾‹ï¼šæ¢¯å½¢æ³•/æ”¹è¿›çš„æ¬§æ‹‰æ³•ï¼ˆä¸¤ä¸ªé…ç‚¹ $c_1=0, c_2 = 1$ï¼Œé‚£ä¹ˆ $n=2$ï¼‰é…ç‚¹æ¡ä»¶ä¸º\\[\\begin{aligned}  p(t_0) &amp;= x_0\\\\  \\dot p(t_0) &amp;= f(p(t_0),t_0)\\\\  \\dot p(t_0+h) &amp;= f(p(t_0+h),t_0+h)\\end{aligned}\\]å› ä¸ºæœ‰ä¸‰ä¸ªé…ç‚¹æ¡ä»¶ï¼Œå› æ­¤å¤šé¡¹å¼çš„é˜¶æ•°ä¸º 2ã€‚å‡è®¾å¤šé¡¹å¼ä¸ºå¦‚ä¸‹å½¢å¼\\[p(t) = a_2(t-t_0)^2 + a_1(t-t_0) + a_0\\]å°†å¤šé¡¹å¼åŠå…¶å¯¼æ•°å¸¦å…¥ä¸Šé¢çš„é…ç‚¹æ¡ä»¶ï¼Œå¯ä»¥è§£å‡ºä¸‰ä¸ªç³»æ•°\\[\\begin{aligned}a_0 &amp;= x_0\\\\a_1 &amp;= f(p(t_0),t_0)\\\\a_2 &amp;= \\frac{1}{2h}[f(p(t_0+h),t_0+h)-f(p(t_0),t_0)]\\\\\\end{aligned}\\]åˆ™ $t_0+h$ ä½ç½®çš„å¾®åˆ†æ–¹ç¨‹çš„è¿‘ä¼¼è§£ä¸º\\[x_1 = p(t_0+h) = x_0 + \\frac{1}{2}h[f(x_1,t_0+h)+f(x_0,t_0)]\\]é…ç‚¹æ³•åŒ…æ‹¬ä¸‰ä¸ªç§ç±»ï¼š  Gauss é…ç‚¹æ³•ï¼ˆå§‹æœ«ç«¯ç‚¹ $t_k,t_{k+1}$ å‡ä¸æ˜¯é…ç‚¹ï¼‰  Radau é…ç‚¹æ³•ï¼ˆå§‹æœ«ç«¯ç‚¹ $t_k,t_{k+1}$ ä»»æ„ä¸€ä¸ªæ˜¯é…ç‚¹ï¼‰  Lobatto é…ç‚¹æ³•ï¼ˆå§‹æœ«ç«¯ç‚¹ $t_k,t_{k+1}$ å‡æ˜¯é…ç‚¹ï¼‰æ‰€æœ‰è¿™äº›é…ç‚¹æ³•æœ¬è´¨ä¸Šéƒ½æ˜¯éšå¼é¾™æ ¼åº“å¡”æ³•ï¼Œä½†ä¸æ˜¯æ‰€æœ‰é¾™æ ¼åº“å¡”æ³•éƒ½æ˜¯é…ç‚¹æ³•ã€‚ä»å¦å¤–ä¸€ä¸ªè§’åº¦ï¼Œé¾™æ ¼åº“å¡”æ³•ï¼ˆåŒ…æ‹¬ä¸€é˜¶æ¬§æ‹‰æ³•ï¼‰æ—¢å¯ä»¥çœ‹ä½œæ˜¯åˆ†æ®µæ³•ï¼Œåˆå¯ä»¥çœ‹ä½œæ˜¯é…ç‚¹æ³•ã€‚å…¶ä¸­çš„åŒºåˆ«åœ¨äºï¼Œä»é…ç‚¹æ³•çš„å½¢å¼æ¥çœ‹ï¼Œæ‰€æœ‰å¾®åˆ†æ–¹ç¨‹æ˜¯åŒæ—¶è¢«è§£å‡ºçš„ï¼ˆå¤šé¡¹å¼çš„æ‰€æœ‰å‚æ•°åŒæ—¶ç¡®å®šï¼‰ï¼Œè€Œåˆ†æ®µæ³•ä¸­æ‰€æœ‰å‚æ•°æ˜¯è¿­ä»£è§£å‡ºçš„ã€‚ç±»ä¼¼åœ°ï¼Œé…ç‚¹æ³•è¢«è®¤ä¸ºæ˜¯ä¸€ç§éšå¼è§£æ³•ï¼Œå› ä¸ºæ‰€æœ‰æ—¶åˆ»çš„çŠ¶æ€å‡åŒæ—¶è¢«è§£å‡ºï¼ˆæ‰€æœ‰å¤šé¡¹å¼å‚æ•°åŒæ—¶ç¡®å®šåï¼Œå°†æ‰€æœ‰æ—¶åˆ»å¸¦å…¥å¤šé¡¹å¼å¾—åˆ°æ‰€æœ‰æ—¶åˆ»çš„çŠ¶æ€é‡ï¼‰ï¼Œæœ‰åˆ«äºæ—¶é—´æ¨è¿›æ–¹æ³•ä¸­çŠ¶æ€é‡åºåˆ—çš„ä¸€æ­¥æ­¥æ˜¾å¼è§£å‡ºã€‚æœ€åï¼Œé…ç‚¹æ³•ä¹Ÿä¸éœ€è¦é‡‡ç”¨ã€Œé¢„æµ‹ã€-ã€Œæ ¡æ­£ã€ç­–ç•¥ã€‚æ€»ç»“ï¼š  åæ ‡ç‚¹é€‰æ‹©éšæ„ï¼Œæ¯”å¦‚ç­‰è·å–ç‚¹ï¼›  çŠ¶æ€é‡å–å€¼ç‚¹é€‰æ‹©åˆ†æ®µå¤šé¡¹å¼è¿‘ä¼¼ï¼›3.2.1. æ­£äº¤é…ç‚¹æ³•orthogonal collocation methodsï¼Œé…ç‚¹æ³•ä¸­çš„ä¸€ä¸ªéå¸¸å¸¸ç”¨çš„å…·ä½“æ–¹æ³•æ—ã€‚ä¸ä¸€èˆ¬é…ç‚¹æ³•çš„ä¸åŒåœ¨äºå…¶é‡‡ç”¨æ­£äº¤å¤šé¡¹å¼ã€‚å…·ä½“è€Œè¨€ï¼Œåœ¨æ­£äº¤é…ç‚¹æ–¹æ³•ä¸­ï¼Œé…ç‚¹æ˜¯æŸä¸ªæ­£äº¤å¤šé¡¹å¼çš„æ ¹ï¼Œä¸€èˆ¬ä¸º åˆ‡æ¯”é›ªå¤«ï¼ˆChebyshevï¼‰å¤šé¡¹å¼ æˆ–è€… Legendre å¤šé¡¹å¼ã€‚æ­£äº¤é…ç‚¹æ³•ä¸€èˆ¬é…åˆæ‹‰æ ¼æœ—æ—¥å¤šé¡¹å¼è¿›è¡Œæ¥è¿‘ä¼¼è§£ã€‚å³  åæ ‡ç‚¹é€‰æ‹©æ­£äº¤å¤šé¡¹å¼çš„æ ¹ï¼Œæ¯”å¦‚åˆ‡æ¯”é›ªå¤«èŠ‚ç‚¹ï¼›  çŠ¶æ€é‡å–å€¼ç‚¹é€‰æ‹©æ‹‰æ ¼æœ—æ—¥å¤šé¡¹å¼è¿‘ä¼¼ï¼›ä½¿ç”¨æ­£äº¤é…ç‚¹æ³•çš„å¥½å¤„åœ¨äºï¼Œå¯ä»¥è·å¾—æ˜æ˜¾é«˜äºæ‰€ä½¿ç”¨çš„é…ç‚¹æ•°çš„ç²¾åº¦ã€‚4. ODE-BPVçš„æ•°å€¼è§£æ³•å¾®åˆ†æ–¹ç¨‹çš„è¾¹å€¼é—®é¢˜ï¼ˆODE-BPVï¼‰ ç±»ä¼¼åˆå€¼é—®é¢˜ã€‚è¾¹å€¼é—®é¢˜çš„æ¡ä»¶æ˜¯åœ¨åŒºåŸŸçš„è¾¹ç•Œä¸Šï¼Œè€Œåˆå€¼é—®é¢˜çš„æ¡ä»¶éƒ½æ˜¯åœ¨ç‹¬ç«‹å˜é‡åŠå…¶å¯¼æ•°åœ¨æŸä¸€ç‰¹å®šå€¼æ—¶çš„æ•°å€¼ï¼ˆä¸€èˆ¬æ˜¯å®šä¹‰åŸŸçš„ä¸‹é™ï¼Œæ‰€ä»¥ç§°ä¸ºåˆå€¼é—®é¢˜ï¼‰ã€‚ä¾‹å¦‚ç‹¬ç«‹å˜é‡æ˜¯æ—¶é—´ï¼Œå®šä¹‰åŸŸä¸º $[0,1]$ï¼Œè¾¹å€¼é—®é¢˜çš„æ¡ä»¶ä¼šæ˜¯ $x(t)$ åœ¨ $t=0$ åŠ $t=1$ æ—¶çš„æ•°å€¼ï¼Œè€Œåˆå€¼é—®é¢˜çš„æ¡ä»¶ä¼šæ˜¯ $t=0$ æ—¶çš„ $x(t)$ åŠ $x^\\prime(t)$ ä¹‹å€¼ã€‚è§£å†³è¾¹å€¼é—®é¢˜ä¸€èˆ¬é‡‡ç”¨ï¼š  æ‰“é¶æ³•  å·®åˆ†  ä¼½è¾½é‡‘æ³•  é…ç‚¹æ³•5. è½¨è¿¹è§„åˆ’ä¸æœ€ä¼˜æ§åˆ¶è½¨è¿¹ç”¨æ¥æè¿°ä¸€ä¸ªç‰©ä½“çš„è¿åŠ¨è¿‡ç¨‹ï¼Œé€šå¸¸æ˜¯å…³äºæ—¶é—´çš„å˜é‡ã€‚è½¨è¿¹ä¼˜åŒ–ä¸€ç§ç”¨äºå¯»æ‰¾æœ€ä½³è½¨è¿¹é€‰æ‹©çš„æ–¹æ³•ï¼Œé€šå¸¸æ˜¯é€šè¿‡é€‰æ‹©åˆé€‚çš„ç³»ç»Ÿè¾“å…¥æˆ–æ§åˆ¶é‡ï¼Œæ˜¯ç³»ç»Ÿå®ŒæˆæœŸæœ›çš„è¿åŠ¨è¿‡ç¨‹ã€‚åœ¨æ§åˆ¶é¢†åŸŸï¼Œè½¨è¿¹ä¼˜åŒ–è¿‘ä¼¼äºæœ€ä¼˜æ§åˆ¶ï¼Œä½†ä»æ›´å¹¿çš„æ¦‚å¿µä¸Šæ¥è®²ï¼Œè½¨è¿¹ä¼˜åŒ–æ›´å…·ä¸€èˆ¬æ€§ã€‚æ•°å€¼è§£æ³•å°†æœ€ä¼˜æ§åˆ¶é—®é¢˜è½¬åŒ–æˆä¸€ä¸ªç­‰æ•ˆé—®é¢˜ï¼Œç„¶åç”¨æ•°å€¼ä¼˜åŒ–çš„æ–¹æ³•æ¥æ±‚è§£è¯¥ç­‰æ•ˆé—®é¢˜ã€‚å› æ­¤ï¼Œæ•°å€¼è§£æ³•ä¸»è¦åŒ…æ‹¬äº†æœ€ä¼˜æ§åˆ¶é—®é¢˜çš„è½¬åŒ–å’Œè§£ç­‰æ•ˆé—®é¢˜ä¸¤éƒ¨åˆ†ã€‚å…¶ä¸­ï¼Œæœ€ä¼˜æ§åˆ¶é—®é¢˜çš„è½¬åŒ–æ–¹æ³•ä¸»è¦æœ‰ç›´æ¥æ³•å’Œé—´æ¥æ³•ä¸¤ç±»ã€‚5.1. å½¢å¼åŒ–æè¿°  ç›®æ ‡å‡½æ•°\\[\\mathop{\\rm min}\\limits_{t_0,t_f,\\bm x(t),\\bm u(t)} \\underbrace{J(t_0,t_f,\\bm x(t_0),\\bm x(t_f))}_{\\rm Mayer\\; Term} + \\underbrace{\\int_{t_0}^{t_f} H(\\tau,\\bm x(\\tau),\\bm u(\\tau))d\\tau}_{\\rm Lagrange\\; Term}\\]çº¦æŸåŒ…æ‹¬ï¼š  åŠ¨åŠ›å­¦çº¦æŸ\\[\\dot \\bm x(t)=f(\\bm x(t),\\bm u(t),t)\\]  è·¯å¾„çº¦æŸ\\[\\bm h(\\bm x(t),\\bm u(t),t)\\leq \\bm 0\\]  è¾¹ç•Œçº¦æŸ\\[\\bm g(\\bm x(t_0),\\bm x(t_f),t_0,t_f)\\leq \\bm 0\\]  çŠ¶æ€é‡ä¸æ§åˆ¶é‡è¾¹ç•Œ\\[\\begin{aligned}\\bm x_{lb}\\leq\\bm x(t)\\leq \\bm x_{ub}\\\\\\bm u_{lb}\\leq\\bm u(t)\\leq \\bm u_{ub}\\end{aligned}\\]ç”±äºæœ€ç»ˆæˆ‘ä»¬æƒ³è¦æ±‚å¾—çš„æ˜¯æ§åˆ¶é‡å…³äºæ—¶é—´çš„å…·ä½“å‡½æ•°å½¢å¼ï¼Œè€Œéä¸€ä¸ªå€¼æˆ–ä¸€ä¸ªå‚æ•°ï¼Œå› æ­¤è½¨è¿¹ä¼˜åŒ–é—®é¢˜ä¹Ÿå¯ä»¥ç†è§£ä¸ºåœ¨ä¸€å®šçº¦æŸæˆ–å¤§é‡çº¦æŸä¸‹çš„æ³›å‡½æ±‚æå€¼é—®é¢˜ã€‚5.2. é—´æ¥æ³•å˜åˆ†æ³•5.3. ç›´æ¥æ³•ç›´æ¥æ³•æ˜¯é€šè¿‡æŠŠåŸåŸå§‹ä¼˜æ§åˆ¶é—®é¢˜çš„æ§åˆ¶å˜é‡æˆ–çŠ¶æ€å˜é‡ç¦»æ•£å’Œå‚æ•°åŒ–ï¼Œä»è€Œå®ç°ç°å°†è¿ç»­ç³»ç»Ÿç»Ÿåˆä¸ºæœ€ä¼˜æ§é¢˜é¢˜è½¬åŒ–ä¸ºä¸€ä¸ªéçº¿æ€§è§„åˆ’é—®é¢˜ï¼ˆNLPï¼‰ï¼Œä¹‹åå†é‡‡ç”¨æŸç§ä¼˜ æ³•æ±‚è§£ä½¿ NLP é—®é¢˜æ€§èƒ½æŒ‡æ ‡æœ€ä¼˜çš„å‚æ•°ï¼Œå¹¶æœ€ç»ˆè·å¾—å¾—åŸæœ€ä¼˜æ§åˆ¶é—®é¢˜çš„æœ€ä¼˜è§£ã€‚è¯¥æ–¹æ³•æœ€å¤§çš„ä¼˜ç‚¹æ˜¯ä¸éœ€è¦æ¨å¯¼åŸå§‹é—®é¢˜çš„ä¸€é˜¶æœ€ä¼˜æ€§å¿…è¦æ¡ä»¶ï¼ŒåŒæ—¶æ”¶æ•›åŸŸç›¸å¯¹äºé—´æ¥æ³•æ›´åŠ å®½å¹¿ï¼Œå¯¹åˆå€¼ä¼°è®¡ç²¾åº¦è¦æ±‚ä¸é«˜ï¼Œä¸éœ€è¦çŒœçŒœæµ‹åæ€å˜é‡é‡åˆå€¼ï¼Œä¹Ÿä¸éœ€åˆ‡åˆ‡æ¢ç»“æ„å…ˆéªŒéªŒçŸ¥è¯†ã€‚5.3.1. ç›´æ¥æ‰“é¶æ³•5.3.2. ç›´æ¥é…ç‚¹æ³•ç›´æ¥é…ç‚¹æ³•ï¼ˆdirect collocation methodsï¼‰çš„ç®—æ³•æ ¸å¿ƒæ˜¯ï¼šå…ˆå°†æ•´ä¸ªæ—¶é—´è¿‡ç¨‹åˆ’åˆ†ä¸º $N$ æ®µï¼Œæ¯ä¸€æ®µçš„ä¸¤ä¸ªç«¯ç‚¹ç§°ä¸ºèŠ‚ç‚¹ã€‚ä¹‹åå°†èŠ‚ç‚¹ä¸Šçš„æ§åˆ¶å˜è‘£ä½œä¸ºä¸€éƒ¨åˆ†è®¾è®¡ä¼˜åŒ–å˜é‡ï¼Œå¹¶é‡‡ç”¨åˆ†æ®µçº¿æ€§æ’å€¼æˆ–æ‹‰æ ¼æœ—æ—¥æ’å€¼å¤šé¡¹å¼æ¥è¿‘ä¼¼èŠ‚ç‚¹ä¹‹é—´çš„æ§åˆ¶å˜é‡å€¼ã€‚ä¸ç›´æ¥æ‰“é¶æ³•ä¸åŒçš„æ˜¯ï¼Œé…ç‚¹æ³•ä¸æ˜¯é€šè¿‡ç§¯åˆ†çŠ¶æ€æ–¹ç¨‹æ¥è·å¾—çŠ¶æ€å˜é‡ï¼Œè€Œæ˜¯é‡‡ç”¨ Gmiss-Lobatto å¤šé¡¹å¼æ—æ¥è¡¨ç¤ºèŠ‚ç‚¹é—´çŠ¶æ€å˜é‡éš¨æ—¶é—´çš„å˜åŒ–å…³ç³»ï¼Œå¹¶æ ¹æ®ç‰¹å®šçš„é›…å¯æ¯”å¤šé¡¹å¼é€‰æ‹©é…ç‚¹ã€‚é›…å¯æ¯”å¤šé¡¹å¼æ˜¯ $[-1ï¼Œ1]$ åŒºé—´ä¸Šçš„æ­£äº¤å¤šé¡¹å¼æ—ã€‚åœ¨é€‰æ‹©çš„é…ç‚¹å¤„åº”ä½¿å¤šé¡¹å¼æ±‚å¯¼å¾—åˆ°çš„çŠ¶æ€å˜é‡å¯¼æ•°ä¸åŠ¨æ€ç³»ç»Ÿè¿åŠ¨æ–¹ç¨‹å³å‡½æ•°æ±‚å¾—çš„çŠ¶æ€å˜é‡å¯¼æ•°åœ¨ä¸€å®šç²¾åº¦æ¡ä»¶ä¸‹ç›¸åŒ¹é…ï¼Œå³å°†åŠ¨åŠ›å­¦å¾®åˆ†æ–¹ç¨‹çº¦æŸè½¬åŒ–ä¸ºä¸€ç»„ä»£æ•°çº¦æŸã€‚å†ä»¥èŠ‚ç‚¹å¤„çš„çŠ¶æ€å˜æ™¯å’Œæ§åˆ¶å˜é‡ä»¥åŠé…ç‚¹å¤„çš„æ§åˆ¶å˜é‡ä½œä¸ºè®¾è®¡ä¼˜åŒ–å˜é‡ï¼Œå¹¶é‡‡ç”¨æŸç¥éçº¿æ€§è§„åˆ’ç®—æ³•ï¼Œæœç´¢æ»¡è¶³çº¦æŸä¸”ä½¿ç›®æ ‡å‡½æ•°æœ€å°çš„æœ€ä¼˜è§£ã€‚ä¸‹é¢æˆ‘ä»¬ç”¨ä¸€ä¸ªä¾‹å­æ¥è¿›ä¸€æ­¥è¯´æ˜é…ç‚¹æ³•å¦‚ä½•åº”ç”¨äºè½¨è¿¹ä¼˜åŒ–æœ€ä¼˜æ§åˆ¶é—®é¢˜[1]ã€‚å¦‚å›¾æ‰€ç¤ºï¼Œä¸€ä¸ªæ»‘å—æ”¾ç½®åœ¨å…‰æ»‘åœ°é¢ä¸Šï¼Œå¹¶å—åˆ°ä¸€ä¸ªæ°´å¹³æ–¹å‘çš„ä½œç”¨åŠ›ã€‚æˆ‘ä»¬æƒ³è¦æ»‘å—åœ¨é‡Œçš„ä½œç”¨ä¸‹ï¼Œåœ¨ 1s çš„æ—¶é—´å†…ä»å¼€å§‹ä½ç½®è¿åŠ¨åˆ°æŒ‡å®šä½ç½®ï¼Œå¹¶åˆšå¥½åœåœ¨è¯¥å¤„ã€‚è¿™ä¸ªé—®é¢˜å­˜åœ¨ç€æ— æ•°ç§å¯èƒ½çš„è¿åŠ¨è½¨è¿¹ï¼Œè¿›ä¸€æ­¥ï¼Œæˆ‘ä»¬å¸Œæœ›ä»ä¸­ç¡®å®šä¸€æ¡æœ€ä¼˜çš„è½¨è¿¹ï¼Œå¦‚å›¾æ‰€ç¤ºã€‚ç³»ç»ŸçŠ¶æ€æ–¹ç¨‹ä¸º\\[\\dot x = v,\\quad \\dot v = u\\]è¾¹ç•Œçº¦æŸä¸º\\[\\begin{aligned}x(0) = 0,\\quad x(1) = 1\\\\v(0) = 0,\\quad v(1) = 0\\end{aligned}\\]è½¨è¿¹ä¼˜åŒ–å…³å¿ƒåœ¨ä¸€å®šæŒ‡æ ‡ä¸‹çš„æœ€ä¼˜è½¨è¿¹ï¼Œå‡è®¾éœ€è¦èƒ½é‡æœ€ä¼˜ï¼Œåˆ™ç›®æ ‡å‡½æ•°ä¸º\\[\\mathop{\\rm min}\\limits_{u(t)}\\int_0^1 u^2(\\tau)d\\tau\\]ç›´æ¥é…ç‚¹æ³•çš„æ ¸å¿ƒæ€æƒ³æ˜¯å°†è¿ç»­æ—¶é—´æ›²çº¿ç¦»æ•£ä¸ºæœ‰é™æ—¶é—´åºåˆ—ï¼Œä»è€ŒæŠŠè½¨è¿¹è§„åˆ’é—®é¢˜è½¬åŒ–å¤§è§„æ¨¡éçº¿æ€§è§„åˆ’é—®é¢˜ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬å¯¹è½¨è¿¹è¿›è¡Œç¦»æ•£åŒ–ï¼Œå°†çŠ¶æ€å˜é‡ $x(t)$ å’Œ $v(t)$ è¡¨ç¤ºä¸ºä¸€ç³»åˆ—ç¦»æ•£æ—¶åˆ»ä¸Šçš„å€¼ï¼Œä¹Ÿç§°ä¸ºé…ç½®ç‚¹ï¼š\\[\\begin{aligned}t\\rightarrow t_0,\\cdots,t_N\\\\x\\rightarrow x_0,\\cdots,x_N\\\\v\\rightarrow v_0,\\cdots,v_N\\\\u\\rightarrow u_0,\\cdots,u_N\\\\\\end{aligned}\\]è¿™äº›é…ç½®ç‚¹å®é™…ä¸Šå°±æ˜¯æœ€ç»ˆè½¬åŒ–çš„ NLP é—®é¢˜ä¼˜åŒ–å˜é‡ï¼Œ$N$ è¡¨ç¤ºç¦»æ•£çš„ç»†åŒ–ç¨‹åº¦ï¼ŒNè¶Šå¤§åˆ™ç¦»æ•£åŒ–è¯¯å·®è¶Šå°ï¼Œä½†ä¼˜åŒ–å•ç‹¬è¶Šå¤§ã€‚å…¶æ¬¡ï¼Œè¦æŠŠåŸå§‹é—®é¢˜åœ¨è¿™äº›é…ç½®ç‚¹å¤„è¿›è¡Œè¿‘ä¼¼è¡¨ç¤ºï¼Œå…¶æ ¸å¿ƒæ€æƒ³æ˜¯ä¸¤ä¸ªé…ç½®ç‚¹ä¹‹é—´çš„çŠ¶æ€å˜åŒ–ç­‰äºç³»ç»ŸåŠ¨åŠ›å­¦çš„ç§¯åˆ†ï¼š\\[\\begin{aligned}\\dot x &amp;= v\\\\\\int_{t_k}^{t_{k+1}}\\dot xdt &amp;= \\int_{t_k}^{t_{k+1}}vdt\\\\x_{x+1}-x_k&amp;\\approx \\frac{1}{2}(t_{k+1}-t_k)(v_{k+1}+v_k)\\end{aligned}\\]ç”±äºä½ç½®çš„å¾®åˆ†ç­‰äºé€Ÿåº¦ï¼Œå¯¹ç­‰å¼ä¸¤ä¾§è¿›è¡Œç§¯åˆ†ï¼Œä»æ—¶åˆ» $t_k$ ç§¯åˆ†åˆ°æ—¶åˆ» $t_{k+1}$ ã€‚ç­‰å¼å·¦ä¾§è‡ªç„¶ç­‰äºä¸¤ä¸ªçŠ¶æ€ä¹‹é—´çš„å·®å€¼ï¼Œè€Œå¯¹äºç­‰å¼å³ä¾§æˆ‘ä»¬ç”¨æ¢¯å½¢ç§¯åˆ†å…¬å¼è¿›è¡Œè¿‘ä¼¼ã€‚æŠŠé€Ÿåº¦ä¸ä½œç”¨åŠ›çš„åŠ¨åŠ›å­¦å…³ç³»åŒæ ·è½¬åŒ–æˆä¸Šé¢çš„å½¢å¼ï¼Œå¿½ç•¥ç”±æ¢¯å½¢ç§¯åˆ†è¿‘ä¼¼çš„è¯¯å·®ï¼Œå¾—åˆ°ä»¥ä¸‹ç”±é…ç½®ç‚¹è¡¨ç¤ºçš„çº¦æŸæ–¹ç¨‹ï¼Œå…¶ä¸­ $h_k = t_{k+1}-t_k$\\[\\begin{aligned}x_{k+1}-x_{k}=\\frac{1}{2}\\left(h_{k}\\right)\\left(\\nu_{k+1}+\\nu_{k}\\right)\\\\u_{k+1}-\\nu_{k}=\\frac{1}{2}\\left(h_{k}\\right)\\left(u_{k+1}+u_{k}\\right)\\end{aligned}\\]è¿™æ ·ï¼Œé€šè¿‡ç¦»æ•£åŒ–ï¼Œæˆ‘ä»¬æŠŠåŸæ¥è¿ç»­çš„åŠ¨åŠ›å­¦æ–¹ç¨‹ä¸­çš„æ¯ä¸ªå˜é‡å‡è½¬åŒ–ä¸º $N$ ä¸ªç­‰å¼çº¦æŸã€‚å½“ç„¶ä¸ºäº†æ»¡è¶³é—®é¢˜è¦æ±‚ï¼Œé…ç½®ç‚¹è¿˜è¦æ»¡è¶³ä»¥ä¸‹çš„çº¦æŸ\\[\\begin{aligned}x_0 = 0,\\quad x_N = 1\\\\v_0 = 0,\\quad v_N = 0\\end{aligned}\\]æœ€åï¼Œé€šè¿‡é‡‡ç”¨æ¢¯å½¢ç§¯åˆ†è¿‘ä¼¼çš„æ–¹æ³•ï¼Œå°†ç›®æ ‡å‡½æ•°ä¹Ÿç”¨é…ç½®ç‚¹è¿›è¡Œè¡¨ç¤º\\(\\mathop{\\rm min}\\limits_{u(t)}\\int_0^1 u^2(\\tau)d\\tau = \\mathop{\\rm min}\\limits_{u_0,\\cdots,u_N}\\sum_{k=0}^{N-1}\\frac{1}{2}h_k(u_k^2 + u_{k+1}^2)\\)è‡³æ­¤ï¼Œæ»‘å—ç§»åŠ¨é—®é¢˜è¢«å®Œå…¨è½¬åŒ–ä¸ºä¸€ä¸ª $3N$ ä¸ªä¼˜åŒ–å˜é‡ï¼ˆé…ç½®ç‚¹ï¼‰ï¼Œ$2N+4$ ä¸ªçº¦æŸçš„éçº¿æ€§è§„åˆ’é—®é¢˜ï¼Œé‡‡ç”¨ç±»ä¼¼å†…ç‚¹æ³•çš„éçº¿æ€§è§„åˆ’æ±‚è§£å™¨ï¼ˆIPOPTï¼‰è¿›è¡Œæ±‚è§£ï¼Œå°±å¯ä»¥å¾—åˆ°é—®é¢˜æ•°å€¼ç»“æœã€‚åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬é‡‡ç”¨æ¢¯å½¢å…¬å¼æ¥è¿‘ä¼¼ç§¯åˆ†ï¼Œå°†é—®é¢˜ä¸­çš„æ‰€ç”¨è¿ç»­é—®é¢˜è½¬åŒ–ä¸ºç¦»æ•£é—®é¢˜ï¼Œè¿™ç§æ–¹æ³•ç§°ä¸ºæ¢¯å½¢é…ç‚¹æ³•ã€‚æ¢¯å½¢æ³•æ˜¯ä¸€ç§ä½é˜¶å¤šé¡¹å¼ï¼Œè¿˜å¯ä»¥é‡‡ç”¨æ›´åŠ é«˜é˜¶çš„å¤šé¡¹å¼ï¼Œå¦‚ ä¸‰é˜¶ Simpson æ³•ç­‰ã€‚è¿™äº›å¤šé¡¹å¼éƒ½å±äº Gauss-Lobatto å¤šé¡¹å¼æ—ã€‚5.4. é«˜æ–¯ä¼ªè°±æ³•      è°±æ–¹æ³•        ä¼ªè°±æ³•  6. å‚è€ƒæ–‡çŒ®[1] é©¬åŒå­¦. å¦‚ä½•ç›´è§‚åœ°ç†è§£æ‹‰æ ¼æœ—æ—¥æ’å€¼æ³•ï¼Ÿ[2] ç´ _å±¥. è½¨è¿¹ä¼˜åŒ–ä¸ç›´æ¥é…ç‚¹æ³•[3] ç™¾åº¦æ–‡åº“. é¾™æ ¼åº“å¡”æ³•æ¨å¯¼"
  },
  
  {
    "title": "æ·±åº¦å­¦ä¹ åŸºç¡€ï¼ˆé«˜æ–¯è¿‡ç¨‹ï¼‰",
    "url": "/posts/deep-learning-gaussian-process/",
    "categories": "Academic, Knowledge",
    "tags": "deep learning",
    "date": "2021-01-18 16:21:49 +0800",
    





    
    "snippet": "æœ¬æ–‡ä»‹ç»äº†é«˜æ–¯è¿‡ç¨‹ï¼ŒåŒ…æ‹¬é«˜æ–¯å‡½æ•°ã€å¤šå…ƒé«˜æ–¯åˆ†å¸ƒã€é«˜æ–¯è¿‡ç¨‹ã€‚  1. ä¸€å…ƒé«˜æ–¯åˆ†å¸ƒ  2. å¤šå…ƒé«˜æ–¯åˆ†å¸ƒ  3. é«˜æ–¯è¿‡ç¨‹          3.1. æ¦‚å¿µ      3.2. ä¸¾ä¾‹      3.3. é«˜æ–¯è¿‡ç¨‹å›å½’                  3.3.1. æ„å»ºé«˜æ–¯è¿‡ç¨‹å…ˆéªŒ          3.3.2. æ±‚è§£è¶…å‚æ•°          3.3.3. æµ‹è¯•æ ·æœ¬é¢„æµ‹            ...",
    "content": "æœ¬æ–‡ä»‹ç»äº†é«˜æ–¯è¿‡ç¨‹ï¼ŒåŒ…æ‹¬é«˜æ–¯å‡½æ•°ã€å¤šå…ƒé«˜æ–¯åˆ†å¸ƒã€é«˜æ–¯è¿‡ç¨‹ã€‚  1. ä¸€å…ƒé«˜æ–¯åˆ†å¸ƒ  2. å¤šå…ƒé«˜æ–¯åˆ†å¸ƒ  3. é«˜æ–¯è¿‡ç¨‹          3.1. æ¦‚å¿µ      3.2. ä¸¾ä¾‹      3.3. é«˜æ–¯è¿‡ç¨‹å›å½’                  3.3.1. æ„å»ºé«˜æ–¯è¿‡ç¨‹å…ˆéªŒ          3.3.2. æ±‚è§£è¶…å‚æ•°          3.3.3. æµ‹è¯•æ ·æœ¬é¢„æµ‹                    3.4. æ·±åº¦æ ¸å›å½’                  3.4.1. åˆå§‹åŒ–          3.4.2. å‰å‘ä¼ æ’­          3.4.3. åå‘ä¼ æ’­          3.4.4. é¢„æµ‹                      4. å‚è€ƒæ–‡çŒ®    1. ä¸€å…ƒé«˜æ–¯åˆ†å¸ƒ  é«˜æ–¯åˆ†å¸ƒåˆç§°æ­£æ€åˆ†å¸ƒã€‚æ ‡å‡†é«˜æ–¯å‡½æ•°ä¸º\\[f(x) = \\frac{1}{\\sqrt{2\\pi}}e^{-\\frac{x^2}{2}}\\]å‡½æ•°å›¾åƒä¸ºè¿™ä¸ªå‡½æ•°æè¿°äº†å˜é‡ $x$ çš„ä¸€ç§åˆ†å¸ƒç‰¹æ€§ï¼Œå˜é‡ $x$ çš„åˆ†å¸ƒæœ‰å¦‚ä¸‹ç‰¹ç‚¹ï¼š  å‡å€¼ = 0  æ–¹å·® = 1  æ¦‚ç‡å¯†åº¦å’Œ = 1ä¸€å…ƒé«˜æ–¯å‡½æ•°çš„ä¸€èˆ¬å½¢å¼ä¸º\\[f(x) = \\frac{1}{\\sqrt{2\\pi}\\sigma}e^{-\\frac{1}{2\\sigma^2}(x-\\mu)^2}\\]è¿™é‡ŒæŒ‡æ•°å‡½æ•°çš„å‚æ•° $-\\frac{1}{2\\sigma^2}(x-\\mu)^2$ æ˜¯ä¸€ä¸ªå…³äº $x$ çš„äºŒé¡¹å¼å‡½æ•°ã€‚ç”±äºç³»æ•°ä¸ºè´Ÿï¼Œæ‰€ä»¥æ˜¯æŠ›ç‰©çº¿å¼€å£å‘ä¸‹çš„å‡½æ•°ã€‚æ­¤å¤–ï¼Œç”±äºæœ€å‰é¢çš„ç³»æ•°ä¸ $x$ æ— å…³ï¼Œå› æ­¤å¯ä»¥æŠŠå®ƒå½“ä½œæ˜¯ä¸€ä¸ªæ­£è§„åŒ–å› å­ï¼ˆnormalization factorï¼‰ï¼Œä»¥ä¿è¯\\[\\frac{1}{\\sqrt{2\\pi}\\sigma}\\int_{-\\infty}^{\\infty}{exp(-\\frac{1}{2\\sigma^2}(x-\\mu)^2)}dx=1\\]è‹¥ä»¤\\[z = \\frac{x-\\mu}{\\sigma}\\]ç§°è¿™ä¸ªè¿‡ç¨‹ä¸ºæ ‡å‡†åŒ–\\[\\begin{aligned}  x &amp;= z\\cdot \\sigma + \\mu\\\\  \\Rightarrow p(x) &amp;= \\frac{1}{\\sqrt{2\\pi}\\sigma}e^{-\\frac{1}{2}(z)^2}\\\\  \\Rightarrow 1 &amp;=\\int_{-\\infty}^{\\infty}{p(x)dx}\\\\  &amp;=\\int_{-\\infty}^{\\infty}{\\frac{1}{\\sqrt{2\\pi}\\sigma}e^{-\\frac{1}{2}(z)^2}dx}\\\\  &amp;=\\int_{-\\infty}^{\\infty}{\\frac{1}{\\sqrt{2\\pi}\\sigma}e^{-\\frac{1}{2}(z)^2}\\sigma\\cdot dz}\\\\  &amp;=\\int_{-\\infty}^{\\infty}{\\frac{1}{\\sqrt{2\\pi}}e^{-\\frac{1}{2}(z)^2} dz}\\\\\\end{aligned}\\]å³ $z\\sim N(0,1)$ã€‚éšæœºå˜é‡ $x$ æ ‡å‡†åŒ–çš„è¿‡ç¨‹, å®é™…ä¸Šçš„æ¶ˆé™¤é‡çº²å½±å“å’Œåˆ†å¸ƒå·®å¼‚çš„è¿‡ç¨‹. é€šè¿‡å°†éšæœºå˜é‡çš„å€¼å‡å»å…¶å‡å€¼å†é™¤ä»¥æ ‡å‡†å·®, ä½¿å¾—éšæœºå˜é‡ä¸å…¶å‡å€¼çš„å·®è·å¯ä»¥ç”¨è‹¥å¹²ä¸ªæ ‡å‡†å·®æ¥è¡¡é‡, ä»è€Œå®ç°äº†ä¸åŒéšæœºå˜é‡ä¸å…¶å¯¹åº”å‡å€¼çš„å·®è·, å¯ä»¥ä»¥ä¸€ç§ç›¸å¯¹çš„è·ç¦»æ¥è¿›è¡Œæ¯”è¾ƒã€‚2. å¤šå…ƒé«˜æ–¯åˆ†å¸ƒ  é’±é»˜åŸ. å¤šå…ƒé«˜æ–¯åˆ†å¸ƒå®Œå…¨è§£æå¤šå…ƒé«˜æ–¯åˆ†å¸ƒæ˜¯ä¸€å…ƒé«˜æ–¯åˆ†å¸ƒåœ¨å‘é‡å½¢å¼çš„æ¨å¹¿ã€‚å‡è®¾éšæœºå‘é‡ $\\boldsymbol Z = [z_1,\\cdots,z_n]$ï¼Œå…¶ä¸­ $z_i\\sim \\mathcal N(0,1)(i=1,\\cdots,n)$ ä¸”å½¼æ­¤ç‹¬ç«‹ï¼Œåˆ™éšæœºå‘é‡çš„è”åˆæ¦‚ç‡å¯†åº¦å‡½æ•°ä¸º\\[\\begin{aligned}  p(z_1, \\cdots, z_n) &amp;= \\prod_{i=1}^n \\frac{1}{\\sqrt{2\\pi}}e^{-\\frac{1}{2}(z_i)^2}\\\\  &amp;=\\frac{1}{2\\pi^{n/2}}e^{-1/2\\cdot Z^TZ}\\\\1&amp;=\\int_{-\\infty}^{\\infty}\\cdots\\int_{-\\infty}^{\\infty} p(z_1,\\cdots,z_n)dz_1\\cdots dz_n\\end{aligned}\\]ç§°éšæœºå‘é‡ $\\boldsymbol Z\\sim \\mathcal N(\\boldsymbol 0,\\boldsymbol I)$ï¼Œå³æœä»å‡å€¼ä¸ºé›¶å‘é‡ï¼Œåæ–¹å·®çŸ©é˜µä¸ºå•ä½çŸ©é˜µçš„é«˜æ–¯åˆ†å¸ƒã€‚å¯¹äºå‘é‡ $X=[x_1,\\cdots,x_n]$ï¼Œå…¶æ¦‚ç‡å¯†åº¦å‡½æ•°çš„å½¢å¼ä¸º\\[\\begin{aligned}p(x_1,x_2,\\cdots,x_n) &amp;=\\prod_{i=1}^n p(x_i)\\\\&amp;=\\frac{1}{(2\\pi)^{n/2}\\sigma_1\\cdots\\sigma_n}exp\\left( -\\frac{1}{2} \\left[ \\frac{(x_1-\\mu_1)^2}{\\sigma^2_1}+\\cdots+\\frac{(x_n-\\mu_n)^2}{\\sigma^2_n} \\right] \\right)\\\\\\end{aligned}\\]å…¶ä¸­ $\\mu_i, \\sigma_i$ ä¸ºç¬¬ $i$ ç»´çš„å‡å€¼å’Œæ–¹å·®ã€‚æŒ‰ç…§çŸ©é˜µè¡¨ç¤º\\[\\begin{aligned}  \\boldsymbol x - \\boldsymbol \\mu &amp;= [x_1-\\mu_1,\\cdots,x_n-\\mu_n]^T\\\\  \\Sigma &amp;= \\left[    \\begin{matrix}      \\sigma_1^2&amp;0&amp;\\cdots&amp;0\\\\      0&amp;\\sigma_2^2&amp;\\cdots&amp;0\\\\      \\vdots&amp;\\vdots&amp;\\ddots&amp;0\\\\      0&amp;0&amp;\\cdots&amp;\\sigma_n^2\\\\    \\end{matrix}    \\right]\\end{aligned}\\]é‚£ä¹ˆæœ‰\\[\\begin{aligned}\\sigma_1\\cdots\\sigma_n &amp;= \\vert\\Sigma\\vert^\\frac{1}{2}\\\\\\frac{(x_1-\\mu_1)^2}{\\sigma^2_1}+\\cdots+\\frac{(x_n-\\mu_n)^2}{\\sigma^2_n} &amp;= (\\boldsymbol x - \\boldsymbol \\mu)^T\\Sigma^{-1}(\\boldsymbol x - \\boldsymbol \\mu)\\end{aligned}\\]ä»£å…¥å¾—\\[\\begin{aligned}p(x_1,x_2,\\cdots,x_n) &amp;=p(\\boldsymbol x\\vert \\boldsymbol \\mu, \\Sigma)\\\\&amp;= \\frac{1}{(2\\pi)^{n/2}\\vert\\Sigma\\vert^{1/2}}exp(-\\frac{1}{2}(\\boldsymbol x-\\boldsymbol \\mu)^T\\Sigma^{-1}(\\boldsymbol x-\\boldsymbol \\mu))\\\\\\end{aligned}\\]åˆ™ç§° $X$ ä¸ºå…·æœ‰å‡å€¼ $\\boldsymbol \\mu \\in \\mathbb R^n$ï¼Œåæ–¹å·®çŸ©é˜µä¸º $\\Sigma \\in S^n$ çš„å¤šå…ƒé«˜æ–¯åˆ†å¸ƒã€‚3. é«˜æ–¯è¿‡ç¨‹3.1. æ¦‚å¿µé¦–å…ˆç®€å•ç†è§£é«˜æ–¯è¿‡ç¨‹ï¼Œæ¯”å¦‚ä½ æœ‰ $(t_1,t_2,\\cdots,t_N)=\\boldsymbol T$ ä¸ªæ—¶é—´ç‚¹ï¼Œæ¯ä¸ªæ—¶é—´ç‚¹çš„è§‚æµ‹å€¼éƒ½æ˜¯é«˜æ–¯åˆ†å¸ƒçš„ï¼Œå¹¶ä¸”ä»»æ„ $k$ ä¸ªæ—¶é—´ç‚¹çš„è§‚æµ‹å€¼çš„ç»„åˆéƒ½æ˜¯è”åˆé«˜æ–¯åˆ†å¸ƒã€‚è¿™æ ·çš„ä¸€ä¸ªè¿‡ç¨‹ç§°ä¸ºé«˜æ–¯è¿‡ç¨‹ã€‚é«˜æ–¯è¿‡ç¨‹é€šå¸¸å¯ä»¥ç”¨æ¥è¡¨ç¤ºä¸€ä¸ªå‡½æ•°çš„åˆ†å¸ƒã€‚é«˜æ–¯è¿‡ç¨‹ï¼Œä»å­—é¢ä¸Šåˆ†è§£ï¼Œæˆ‘ä»¬å°±å¯ä»¥çœ‹å‡ºä»–åŒ…å«ä¸¤éƒ¨åˆ†ï¼š  é«˜æ–¯ï¼ŒæŒ‡çš„æ˜¯é«˜æ–¯åˆ†å¸ƒ  è¿‡ç¨‹ï¼ŒæŒ‡çš„æ˜¯éšæœºè¿‡ç¨‹  å½“éšæœºå˜é‡æ˜¯ 1 ç»´æ—¶ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºä¸€ç»´é«˜æ–¯åˆ†å¸ƒï¼Œæ¦‚ç‡å¯†åº¦å‡½æ•° $p(x)=N(\\mu,\\sigma^2)$å½“éšæœºå˜é‡æ˜¯æœ‰é™çš„ $p$ ç»´æ—¶ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºé«˜ç»´é«˜æ–¯åˆ†å¸ƒï¼Œ $p(x) = N(\\mu, \\Sigma_{p \\times p})$å½“éšæœºå˜é‡æ˜¯è¿ç»­åŸŸä¸Šçš„æ— é™å¤šä¸ªé«˜æ–¯éšæœºå˜é‡ç»„æˆçš„éšæœºè¿‡ç¨‹ï¼Œç§°ä¹‹ä¸ºæ— é™ç»´çš„é«˜æ–¯åˆ†å¸ƒï¼Œå³é«˜æ–¯è¿‡ç¨‹é€šå¸¸å¦‚æœæˆ‘ä»¬è¦å­¦ä¹ ä¸€ä¸ªå‡½æ•°ï¼ˆæˆ–è€…è¯´å­¦ä¹ ä¸€ä¸ªæ˜ å°„ï¼‰ï¼Œé¦–å…ˆå®šä¹‰å‡½æ•°çš„å‚æ•°ï¼Œç„¶åæ ¹æ®è®­ç»ƒæ•°æ®æ¥å­¦ä¹ è¿™ä¸ªå‡½æ•°çš„å‚æ•°ã€‚ä¾‹å¦‚æˆ‘ä»¬åšçº¿æ€§å›å½’ï¼Œå­¦ä¹ è¿™æ ·ä¸€ä¸ªå‡½æ•°å°±ç›¸å½“äºè®­ç»ƒå›å½’å‚æ•°ï¼ˆæƒé‡ã€åç½®ï¼‰ã€‚è¿™ç§æ–¹æ³•å«åšå‚æ•°åŒ–çš„æ–¹æ³•ã€‚ä½†æ˜¯è¿™ç§åšæ³•å°±æŠŠå¯å­¦ä¹ çš„å‡½æ•°çš„èŒƒå›´é™åˆ¶æ­»äº†ï¼Œæ— æ³•å­¦ä¹ ä»»æ„ç±»å‹çš„å‡½æ•°ã€‚éå‚æ•°åŒ–çš„æ–¹æ³•å°±æ²¡æœ‰è¿™ä¸ªç¼ºç‚¹ã€‚ç”¨é«˜æ–¯è¿‡ç¨‹æ¥å»ºæ¨¡å‡½æ•°ï¼Œå°±æ˜¯ä¸€ç§éå‚æ•°æ–¹æ³•ã€‚3.2. ä¸¾ä¾‹ä¸¾ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼Œä¸‹é¢çš„å›¾ä¸­ï¼Œæ¨ªè½´ $T$ æ˜¯ä¸€ä¸ªå…³äºæ—¶é—´çš„è¿ç»­åŸŸï¼Œè¡¨ç¤ºäººçš„ä¸€ç”Ÿï¼Œè€Œçºµè½´è¡¨ç¤ºçš„æ˜¯ä½“èƒ½å€¼ $\\xi$ã€‚å¯¹äºä¸€ä¸ªäººè€Œè¨€ï¼Œåœ¨ä»»æ„ä¸åŒçš„æ—¶é—´ç‚¹ä½“èƒ½å€¼éƒ½æœä»æ­£æ€åˆ†å¸ƒï¼Œä½†æ˜¯ä¸åŒæ—¶é—´ç‚¹åˆ†å¸ƒçš„å‡å€¼å’Œæ–¹å·®ä¸åŒã€‚ä¸€ä¸ªäººçš„ä¸€ç”Ÿçš„ä½“èƒ½æ›²çº¿å°±æ˜¯ä¸€ä¸ªå‡½æ•°ï¼ˆä½“èƒ½å…³äºæ—¶é—´çš„å‡½æ•°ï¼‰ï¼Œè¯¥å‡½æ•°çš„åˆ†å¸ƒå°±æ˜¯é«˜æ–¯è¿‡ç¨‹ã€‚å¯¹äºä»»æ„ $t\\in T, \\xi_t \\sim N(\\mu_t,\\sigma_t^2)$ ï¼Œä¹Ÿå°±æ˜¯å¯¹äºä¸€ä¸ªç¡®å®šçš„é«˜æ–¯è¿‡ç¨‹è€Œè¨€ï¼Œå¯¹äºä»»æ„æ—¶åˆ» $t$ ï¼Œä»–çš„ $\\mu_t$ å’Œ $\\sigma_t$ éƒ½å·²ç»ç¡®å®šäº†ã€‚è€Œåƒä¸Šå›¾ä¸­ï¼Œæˆ‘ä»¬å¯¹åŒä¸€äººä½“èƒ½å€¼åœ¨å…³é”®èŠ‚ç‚¹è¿›è¡Œé‡‡æ ·ï¼Œç„¶åå¹³æ»‘è¿æ¥ï¼Œä¹Ÿå°±æ˜¯å›¾ä¸­çš„ä¸¤æ¡è™šçº¿ï¼Œå°±å½¢æˆäº†è¿™ä¸ªé«˜æ–¯è¿‡ç¨‹ä¸­çš„ä¸¤ä¸ªæ ·æœ¬ã€‚å›é¡¾ $p$ ç»´åº¦é«˜æ–¯åˆ†å¸ƒï¼Œå†³å®šä»–çš„åˆ†å¸ƒæ˜¯ä¸¤ä¸ªå‚æ•°ï¼Œä¸€ä¸ªæ˜¯ $p$ ç»´çš„å‡å€¼å‘é‡ $\\mu_p$ ï¼Œä»–åæ˜ äº† $p$ ç»´é«˜æ–¯åˆ†å¸ƒä¸­æ¯ä¸€ç»´éšæœºå˜é‡çš„æœŸæœ›ï¼Œå¦ä¸€ä¸ªå°±æ˜¯ $p\\times p$ çš„åæ–¹å·®çŸ©é˜µ $\\Sigma_{p\\times p}$ ï¼Œä»–åæ˜ äº†é«˜ç»´åˆ†å¸ƒä¸­ï¼Œæ¯ä¸€ç»´è‡ªèº«çš„æ–¹å·®ï¼Œä»¥åŠä¸åŒç»´åº¦ä¹‹é—´çš„åæ–¹å·®ã€‚å®šä¹‰åœ¨è¿ç»­åŸŸ $T$ ä¸Šçš„é«˜æ–¯è¿‡ç¨‹å…¶å®ä¹Ÿæ˜¯ä¸€æ ·ï¼Œä»–æ˜¯æ— é™ç»´çš„é«˜æ–¯åˆ†å¸ƒï¼Œä»–åŒæ ·éœ€è¦æè¿°æ¯ä¸€ä¸ªæ—¶é—´ç‚¹ $t$ ä¸Šçš„å‡å€¼ï¼Œä½†æ˜¯è¿™ä¸ªæ—¶å€™å°±ä¸èƒ½ç”¨å‘é‡äº†ï¼Œå› ä¸ºæ˜¯åœ¨è¿ç»­åŸŸä¸Šçš„ï¼Œç»´æ•°æ˜¯æ— é™çš„ï¼Œå› æ­¤å°±åº”è¯¥å®šä¹‰æˆä¸€ä¸ªå…³äºæ—¶åˆ» $t$ çš„å‡½æ•° $m(t)$ã€‚åæ–¹å·®çŸ©é˜µä¹Ÿæ˜¯åŒç†ï¼Œæ— é™ç»´çš„æƒ…å†µä¸‹å°±å®šä¹‰ä¸ºä¸€ä¸ªæ ¸å‡½æ•° $k(t_i,t_j)$ ï¼Œå…¶ä¸­ $t_i$ å’Œ $t_j$ è¡¨ç¤ºä»»æ„ä¸¤ä¸ªæ—¶åˆ»ã€‚æ ¸å‡½æ•°ä¹Ÿç§°åæ–¹å·®å‡½æ•°ï¼Œæ˜¯ä¸€ä¸ªé«˜æ–¯è¿‡ç¨‹çš„æ ¸å¿ƒï¼Œä»–å†³å®šäº†é«˜æ–¯è¿‡ç¨‹çš„æ€§è´¨ã€‚åœ¨ç ”ç©¶å’Œå®è·µä¸­ï¼Œæ ¸å‡½æ•°æœ‰å¾ˆå¤šç§ä¸åŒçš„ç±»å‹ï¼Œä»–ä»¬å¯¹é«˜æ–¯è¿‡ç¨‹çš„è¡¡é‡æ–¹æ³•ä¹Ÿä¸å°½ç›¸åŒï¼Œæœ€ä¸ºå¸¸è§çš„ä¸€ä¸ªæ ¸å‡½æ•°æ˜¯å¾„å‘åŸºå‡½æ•°ï¼Œå…¶å®šä¹‰å¦‚ä¸‹ï¼š\\[k_\\lambda(t_i,t_j)=\\sigma^2 exp(-\\frac{\\vert\\vert t_i-t_j\\vert\\vert^2}{2l^2})\\]$\\sigma$ å’Œ $l$ æ˜¯å¾„å‘åŸºå‡½æ•°çš„è¶…å‚æ•°ï¼Œæ˜¯æˆ‘ä»¬æå‰å¯ä»¥è®¾ç½®å¥½çš„ã€‚å¾„å‘åŸºå‡½æ•°è¾“å‡ºçš„æ˜¯ä¸€ä¸ªæ ‡é‡ï¼Œä»–ä»£è¡¨çš„å°±æ˜¯ä¸¤ä¸ªæ—¶é—´ç‚¹å„è‡ªæ‰€ä»£è¡¨çš„é«˜æ–¯åˆ†å¸ƒä¹‹é—´çš„åæ–¹å·®å€¼ï¼Œå¾ˆæ˜æ˜¾å¾„å‘åŸºå‡½æ•°æ˜¯ä¸€ä¸ªå…³äºè·ç¦» $\\vert\\vert x_i-x_j\\vert\\vert$ è´Ÿç›¸å…³çš„å‡½æ•°ï¼Œä¸¤ä¸ªç‚¹è·ç¦»è¶Šå¤§ï¼Œä¸¤ä¸ªåˆ†å¸ƒä¹‹é—´çš„åæ–¹å·®å€¼è¶Šå°ï¼Œå³ç›¸å…³æ€§è¶Šå°ï¼Œåä¹‹è¶Šé è¿‘çš„ä¸¤ä¸ªæ—¶é—´ç‚¹å¯¹åº”çš„åˆ†å¸ƒå…¶åæ–¹å·®å€¼å°±è¶Šå¤§ã€‚ç”±æ­¤ï¼Œé«˜æ–¯è¿‡ç¨‹çš„ä¸¤ä¸ªæ ¸å¿ƒè¦ç´ ï¼šå‡å€¼å‡½æ•°å’Œæ ¸å‡½æ•°çš„å®šä¹‰æˆ‘ä»¬å°±æè¿°æ¸…æ¥šäº†ï¼ŒæŒ‰ç…§é«˜æ–¯è¿‡ç¨‹å­˜åœ¨æ€§å®šç†ï¼Œä¸€æ—¦è¿™ä¸¤ä¸ªè¦ç´ ç¡®å®šäº†ï¼Œé‚£ä¹ˆæ•´ä¸ªé«˜æ–¯è¿‡ç¨‹å°±ç¡®å®šäº†ï¼š\\[\\xi_t \\sim GP(m(t),k(t_i,t_j))\\]å¦ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼Œå‡è®¾æˆ‘ä»¬æœ‰ä¸¤ä¸ªç‚¹ $x_0=0$ å’Œ $x_1=1$ ï¼Œå¯¹åº”è¿™ä¸¤ä¸ªç‚¹çš„å‡½æ•°å€¼æœä»äºŒç»´é«˜æ–¯åˆ†å¸ƒï¼ˆé«˜æ–¯è¿‡ç¨‹ä¸­â€œé«˜æ–¯â€äºŒå­—çš„ç”±æ¥ï¼‰\\[\\begin{aligned}\\left(  \\begin{matrix}  y_0\\\\  y_1  \\end{matrix}\\right)\\sim \\mathcal N\\left(  \\begin{matrix}  \\left(  \\begin{matrix}  0\\\\  1  \\end{matrix}  \\right),  \\left(  \\begin{matrix}  1&amp;0\\\\  0&amp;1  \\end{matrix}  \\right)  \\end{matrix}\\right)\\end{aligned}\\]ä»è¿™ä¸ªäºŒç»´é«˜æ–¯åˆ†å¸ƒä¸­é‡‡æ · 10 ç»„æ•°æ®ï¼Œå…¶ä¸­ä¸¤ä¸ªç‚¹åœ¨ $x$ è½´ä¸Šçš„ä¸¤ç«¯ï¼Œé‡‡æ ·å¾—åˆ°çš„ä¸¤ä¸ª $y$ å¯¹åº”åœ¨ $y$ è½´å–å€¼ï¼Œå¯ä»¥å¾—åˆ°ä¸‹å›¾æ‰€ç¤ºçš„ç»“æœæ¯æ¡ç›´çº¿å¯ä»¥è¢«è®¤ä¸ºæ˜¯ä»ä¸€ä¸ªçº¿æ€§å‡½æ•°åˆ†å¸ƒä¸­é‡‡æ ·å‡ºæ¥çš„çº¿æ€§å‡½æ•°ã€‚å¦‚æœæˆ‘ä»¬æœ‰20ä¸ª $x$ ç‚¹ï¼Œå¯¹åº”è¿™ 20 ä¸ª $x$ çš„å‡½æ•°å€¼ç¬¦åˆå‡å€¼ä¸º 0ï¼Œåæ–¹å·®çŸ©é˜µä¸ºå•ä½çŸ©é˜µçš„è”åˆé«˜æ–¯åˆ†å¸ƒã€‚å’Œä¸Šé¢ä¸€æ ·é‡‡æ · 10 ç»„æ•°æ®ï¼Œå¾—åˆ°ä¸‹å›¾æ¯ä¸€æ¡çº¿éƒ½æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œæ˜¯ä»æŸä¸ªå‡½æ•°åˆ†å¸ƒä¸­é‡‡æ ·å¾—åˆ°çš„ã€‚ä½†æ˜¯è¿™æ ·çš„å‡½æ•°çœ‹ä¸Šå»ä¸€ç‚¹ä¹Ÿä¸å¹³æ»‘ï¼Œå¹¶ä¸”æ˜¾å¾—æ‚ä¹±æ— ç« ï¼Œè·ç¦»å¾ˆè¿‘çš„ä¸¤ä¸ª $x$ å¯¹åº”çš„å‡½æ•°å€¼ $y$ å¯ä»¥ç›¸å·®å¾ˆå¤§ã€‚ç›´è§‚æ¥è¯´ï¼Œä¸¤ä¸ª $x$ ç¦»å¾—è¶Šè¿‘ï¼Œå¯¹åº”çš„å‡½æ•°å€¼åº”è¯¥ç›¸å·®è¶Šå°ï¼Œä¹Ÿå°±æ˜¯è¯´è¿™ä¸ªå‡½æ•°åº”è¯¥æ˜¯å¹³æ»‘çš„ï¼Œè€Œä¸æ˜¯åƒä¸Šå›¾é‚£æ ·æ˜¯çªå˜çš„ã€‚æ‰€ä»¥æˆ‘ä»¬åº”è¯¥é€šè¿‡ä¸¤ä¸ª $x$ ä¹‹é—´çš„æŸç§è·ç¦»æ¥å®šä¹‰è¿™ä¸¤ä¸ª $x$ å¯¹åº”çš„å‡½æ•°å€¼ä¹‹é—´çš„åæ–¹å·®ã€‚ä¸¤ä¸ª $x$ ç¦»å¾—è¶Šè¿‘ï¼Œå¯¹åº”å‡½æ•°å€¼ä¹‹é—´çš„åæ–¹å·®åº”è¯¥è¶Šå¤§ï¼Œæ„å‘³ç€è¿™ä¸¤ä¸ªå‡½æ•°å€¼çš„å–å€¼å¯èƒ½è¶Šæ¥è¿‘ã€‚æˆ‘ä»¬å¼•å…¥æ ¸å‡½æ•°ï¼ˆä»¥é«˜æ–¯æ ¸ä¸ºä¾‹ï¼Œä¹Ÿå¯ä»¥ç”¨å…¶ä»–æ ¸ï¼Œå¹¶ä¸æ˜¯è¯´æˆ‘ä»¬åœ¨è®²é«˜æ–¯è¿‡ç¨‹æ‰€ä»¥è¿™é‡Œå°±ä¸€å®šç”¨é«˜æ–¯æ ¸ï¼‰ï¼š\\[k_\\lambda(x_i,x_j)=exp(-\\frac{\\vert\\vert \\boldsymbol x_i-\\boldsymbol x_j\\vert\\vert^2}{\\lambda})\\]å’Œå‡½æ•°å¯ä»¥è¡¨ç¤ºä¸¤ä¸ªç‚¹ $x_i,x_j$ ä¹‹é—´çš„è·ç¦»ã€‚æ­¤æ—¶ï¼Œè‹¥æˆ‘ä»¬æœ‰Nä¸ªæ•°æ®ç‚¹( $x_1,\\cdots,x_N$ )ï¼Œåˆ™è¿™ä¸ª $N$ ä¸ªæ•°æ®ç‚¹å¯¹åº”çš„ $N$ ä¸ªå‡½æ•°å€¼æœä» $N$ ç»´é«˜æ–¯åˆ†å¸ƒï¼Œè¿™ä¸ªé«˜æ–¯åˆ†å¸ƒçš„å‡å€¼æ˜¯ 0ï¼Œåæ–¹å·®çŸ©é˜µæ˜¯ $K$ï¼Œ$K$ é‡Œçš„æ¯ä¸€ä¸ªå…ƒç´ å¯¹åº”\\[K_{nm} = k(\\boldsymbol x_n,\\boldsymbol x_m)\\]æ­¤æ—¶ï¼Œå†ä»¥åˆšæ‰ 20 ä¸ªæ•°æ®ç‚¹çš„æƒ…å†µä¸ºä¾‹ï¼Œæˆ‘ä»¬é‡‡æ · 10 ç»„ï¼Œå¾—åˆ°ä¸‹å›¾ï¼Œç°åœ¨çœ‹èµ·æ¥å‡½æ•°å°±å¹³æ»‘å¤šäº†å¦‚æœæ•°æ®ç‚¹å†å¤šç‚¹ï¼Œä¾‹å¦‚ 100 ä¸ªæ•°æ®ç‚¹ï¼Œåˆ™é‡‡æ · 10 ç»„ï¼Œå¾—åˆ°ä¸‹å›¾ï¼šä¸Šå›¾æ¯æ¡æ›²çº¿å°±æ˜¯ä¸€ä¸ªé«˜æ–¯è¿‡ç¨‹çš„é‡‡æ ·ï¼Œæ¯ä¸ªæ•°æ®ç‚¹ä¸Šçš„å‡½æ•°å€¼éƒ½æ˜¯é«˜æ–¯åˆ†å¸ƒã€‚ä¸”ä»»æ„kä¸ªæ•°æ®ç‚¹å¯¹åº”çš„å‡½æ•°å€¼çš„ç»„åˆéƒ½æ˜¯è”åˆé«˜æ–¯åˆ†å¸ƒã€‚3.3. é«˜æ–¯è¿‡ç¨‹å›å½’é«˜æ–¯è¿‡ç¨‹å›å½’å¯ä»¥çœ‹ä½œæ˜¯ä¸€ä¸ªæ ¹æ®å…ˆéªŒä¸è§‚æµ‹å€¼æ¨å‡ºåéªŒçš„è¿‡ç¨‹ã€‚ä¸€ç‰ˆéµå¾ªä»¥ä¸‹ä¸‰æ­¥  æ„å»ºé«˜æ–¯è¿‡ç¨‹å…ˆéªŒ  æ±‚è§£è¶…å‚æ•°  å¯¹æµ‹è¯•æ ·æœ¬è¿›è¡Œé¢„æµ‹3.3.1. æ„å»ºé«˜æ–¯è¿‡ç¨‹å…ˆéªŒå‡è®¾ä¸€ç»„ $n$ ä¸ªè§‚æµ‹å€¼ï¼Œæ¯ä¸ªè§‚æµ‹å€¼ä¸º $D$ ç»´å‘é‡ $\\boldsymbol X={\\boldsymbol x_1, \\cdots, \\boldsymbol x_n}$ï¼Œå¯¹åº”çš„å€¼ä¸º $n$ ä¸ª 1 ç»´ç›®æ ‡å‘é‡ $\\boldsymbol Y={y_1,\\cdots, y_n}$ã€‚å‡è®¾å›å½’æ®‹å·® $\\boldsymbol \\varepsilon=[\\varepsilon_1,\\cdots,\\varepsilon_n]$ æœä» $iid$ æ­£æ€åˆ†å¸ƒ $p(\\varepsilon)=\\mathcal N(0,\\sigma^2_{noise})$ï¼Œåˆ™å›å½’é—®é¢˜å°±æ˜¯å¸Œæœ›æˆ‘ä»¬é€šè¿‡ $\\boldsymbol X,\\boldsymbol Y$ å­¦ä¹ ä¸€ä¸ªç”± $\\boldsymbol X$ åˆ° $\\boldsymbol Y$ çš„æ˜ å°„å‡½æ•° $f$\\[\\boldsymbol Y=f(\\boldsymbol X)+\\boldsymbol \\varepsilon,\\quad where\\quad \\varepsilon_i\\sim \\mathcal N(0,\\sigma^2_{noise}), i=1,\\cdots,n\\]æœªçŸ¥æ˜ å°„ $f$ éµå¾ªé«˜æ–¯è¿‡ç¨‹ï¼Œé€šè¿‡ $\\boldsymbol \\mu = [\\mu(x_1),\\cdots,\\mu(x_n)]$ ä¸ $k(\\boldsymbol x_i,\\boldsymbol x_j)$ å®šä¹‰ä¸€ä¸ªé«˜æ–¯è¿‡ç¨‹ï¼Œä½†æ˜¯å› ä¸ºæ­¤æ—¶æ²¡æœ‰ä»»ä½•è§‚æµ‹å€¼ï¼Œæ‰€ä»¥è¿™æ˜¯ä¸€ä¸ªå…ˆéªŒã€‚\\[f(\\boldsymbol X) \\sim \\mathcal{GP}[\\boldsymbol \\mu,\\boldsymbol K(\\boldsymbol X, \\boldsymbol X)]\\]  æ³¨æ„ï¼šç»å…¸é«˜æ–¯è¿‡ç¨‹è¾“å…¥å¯ä»¥æ˜¯å¤šç»´ï¼Œä½†è¾“å‡ºåªæœ‰ 1 ç»´ï¼ˆå³å•è¾“å‡ºï¼‰ã€‚å¦‚æœéœ€è¦å¤šç»´è¾“å‡ºï¼Œå½“è¾“å‡ºåˆ†é‡ä¹‹é—´ä¸ç›¸å…³æ—¶ï¼Œå¯ä»¥åˆ†åˆ«è®¾è®¡å¤šä¸ªé«˜æ–¯è¿‡ç¨‹æ¨¡å‹è¿›è¡Œå›å½’ã€‚å½“è¾“å‡ºåˆ†é‡ä¹‹é—´ç›¸å…³æ—¶ï¼Œå¯ä»¥å‚è€ƒä¸€äº›paperå’Œå·¥å…·åŒ…æ¥å®ç°ï¼Œæ¯”å¦‚ï¼šhttps://github.com/SheffieldML/multigphttps://github.com/SheffieldML/GPy/blob/devel/GPy/models/gp_multiout_regression.pyé«˜æ–¯è¿‡ç¨‹ç”±å…¶æ•°å­¦æœŸæœ› $\\boldsymbol \\mu$ å’Œåæ–¹å·®å‡½æ•° $\\boldsymbol K$ å®Œå…¨å†³å®šã€‚å¸¸è§çš„é€‰æ‹©æ˜¯å¹³ç¨³é«˜æ–¯è¿‡ç¨‹ï¼Œå³æ•°å­¦æœŸæœ›ä¸ºä¸€å¸¸æ•°ï¼Œåæ–¹å·®å‡½æ•°å–å¹³ç¨³é«˜æ–¯è¿‡ç¨‹å¯ç”¨çš„æ ¸å‡½æ•°ã€‚é«˜æ–¯è¿‡ç¨‹çš„å‡å€¼å‡½æ•°å†³å®šç€æ›²çº¿çš„èµ°åŠ¿ï¼Œå¸¸æ•°å‡å€¼ç›¸å½“äºèµ·äº†ä¸€ä¸ªå¹³ç§»ä½œç”¨ï¼Œå‡å€¼å‡½æ•°ä¸å†æ˜¯å¸¸æ•°æ—¶ï¼Œæ›²çº¿å°†å›´ç»•ç€å‡å€¼å‡½æ•°è¿™æ¡æ›²çº¿è€Œæ³¢åŠ¨ã€‚$\\mu = 1$ æ—¶$\\mu = 2x$ æ—¶ä½†æ˜¯ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬éƒ½ä¼šå¯¹æ•°æ®é›†çš„è¾“å‡ºè¿›è¡Œæ ‡å‡†åŒ–å¤„ç†æ¥è¾¾åˆ°å»å‡å€¼çš„ç›®çš„ï¼Œè¿™æ ·åšçš„å¥½å¤„å°±æ˜¯æˆ‘ä»¬åªéœ€è¦è®¾ç½® $\\boldsymbol \\mu=\\boldsymbol 0$ å³å¯ï¼Œè€Œæ— éœ€çŒœæµ‹è¾“å‡ºå¤§è‡´çš„æ¨¡æ ·ï¼Œå¹¶ä¸”åœ¨åé¢çš„è¶…å‚æ•°å¯»ä¼˜çš„è¿‡ç¨‹ä¸­ä¹Ÿå¯ä»¥å‡å°‘æˆ‘ä»¬éœ€è¦ä¼˜åŒ–çš„è¶…å‚æ•°çš„ä¸ªæ•°ã€‚ä½¿ç”¨æœ€å¤šçš„æ ¸å‡½æ•°æ˜¯ RBF æ ¸ã€‚3.3.2. æ±‚è§£è¶…å‚æ•°é«˜æ–¯è¿‡ç¨‹å›å½’çš„æ±‚è§£ä¹Ÿè¢«ç§°ä¸ºè¶…å‚å­¦ä¹ ï¼ˆhyper-parameter learningï¼‰ï¼Œæ˜¯æŒ‰ç…§è´å¶æ–¯æ–¹æ³•é€šè¿‡å­¦ä¹ æ ·æœ¬ç¡®å®šæ ¸å‡½æ•°çš„è¶…å‚æ•° $\\boldsymbol \\theta$ çš„è¿‡ç¨‹ã€‚æ ¹æ®è´å¶æ–¯å®šç†ï¼Œé«˜æ–¯è¿‡ç¨‹å›å½’çš„è¶…å‚æ•°çš„åéªŒè¡¨ç¤ºå¦‚ä¸‹\\[p(\\boldsymbol \\theta \\vert \\boldsymbol X,\\boldsymbol Y) = \\frac{p(\\boldsymbol Y\\vert \\boldsymbol X,\\boldsymbol \\theta)p(\\boldsymbol \\theta)}{p(\\boldsymbol Y\\vert \\boldsymbol X)}\\]å…¶ä¸­ï¼Œ$\\boldsymbol \\theta$ åŒ…æ‹¬æ ¸å‡½æ•°çš„è¶…å‚æ•°å’Œæ®‹å·®çš„æ–¹å·® $\\sigma^2_{noise}$ã€‚$p(\\boldsymbol Y\\vert\\boldsymbol X,\\boldsymbol \\theta)$ æ˜¯ä¼¼ç„¶ï¼Œæ˜¯å¯¹é«˜æ–¯è¿‡ç¨‹å›å½’çš„è¾“å‡ºè¾¹ç¼˜åŒ–å¾—åˆ°çš„è¾¹ç¼˜ä¼¼ç„¶ï¼š\\[p(\\boldsymbol Y\\vert\\boldsymbol X,\\boldsymbol \\theta) = \\int p(\\boldsymbol Y\\vert f, \\boldsymbol X,\\boldsymbol \\theta)p(f\\vert\\boldsymbol X,\\boldsymbol \\theta)df\\]é«˜æ–¯åˆ†å¸ƒçš„è¾¹ç¼˜åˆ†å¸ƒä¹Ÿæ˜¯é«˜æ–¯åˆ†å¸ƒï¼Œå› æ­¤è¾¹ç¼˜ä¼¼ç„¶ä¹Ÿæœä»é«˜æ–¯åˆ†å¸ƒï¼Œåˆ™æ¦‚ç‡å¯å†™ä¸º\\[p(\\boldsymbol Y\\vert\\boldsymbol X,\\boldsymbol \\theta) = \\frac{1}{(2\\pi)^{n/2}\\vert\\Sigma\\vert^{1/2}}exp(-\\frac{1}{2}(\\boldsymbol Y-\\mu(\\boldsymbol X))^T\\Sigma^{-1}(\\boldsymbol Y-\\mu(\\boldsymbol X)))\\]é‡‡ç”¨æœ€å¤§ä¼¼ç„¶ä¼°è®¡æ¥å¯¹é«˜æ–¯è¿‡ç¨‹çš„è¶…å‚æ•°è¿›è¡Œä¼°è®¡ï¼Œåˆ™è´Ÿå¯¹æ•°ä¼¼ç„¶å‡½æ•°ä¸º\\[\\begin{aligned} \\Rightarrow L = -{\\rm ln}\\ p(\\boldsymbol Y\\vert\\boldsymbol X,\\boldsymbol \\theta) &amp;= -[-\\frac{1}{2}{\\rm ln}{\\vert\\Sigma\\vert}-\\frac{n}{2}{\\rm ln}(2\\pi)-\\frac{1}{2}(\\boldsymbol Y-\\mu(\\boldsymbol X))^T\\Sigma^{-1}(\\boldsymbol Y-\\mu(\\boldsymbol X))]\\\\&amp;= \\frac{1}{2}{\\rm ln}{\\vert\\Sigma\\vert}+\\frac{n}{2}{\\rm ln}(2\\pi)+\\frac{1}{2}\\boldsymbol Y^T\\Sigma^{-1}\\boldsymbol Y\\quad \\boldsymbol (\\boldsymbol \\mu = 0)\\end{aligned}\\]ä¸Šå¼ç¬¬ä¸€é¡¹ä»…ä¸å›å½’æ¨¡å‹æœ‰å…³ï¼Œå›å½’æ¨¡å‹çš„æ ¸çŸ©é˜µè¶Šå¤æ‚å…¶å–å€¼è¶Šé«˜ï¼Œåæ˜ äº†æ¨¡å‹çš„ç»“æ„é£é™©ï¼ˆstructural riskï¼‰ã€‚ç¬¬ä¸‰é¡¹åŒ…å«å­¦ä¹ æˆæœ¬ï¼Œæ˜¯æ•°æ®æ‹Ÿåˆé¡¹ï¼Œè¡¨ç¤ºæ¨¡å‹çš„ç»éªŒé£é™©ï¼ˆempirical riskï¼‰ã€‚å…¶ä¸­ï¼Œ$\\Sigma=k(\\boldsymbol X,\\boldsymbol X)+\\sigma^2_{noise}\\boldsymbol I$ï¼Œä¸è¶…å‚æ•° $\\boldsymbol \\theta$ æœ‰å…³ã€‚åˆ©ç”¨æ¢¯åº¦ä¸‹é™çš„æ–¹æ³•æ›´æ–°è¶…å‚æ•°ï¼Œä¸Šè¿°å¼å­å¯¹è¶…å‚æ•° $\\boldsymbol \\theta$ æ±‚å¯¼\\[\\begin{aligned}\\frac{\\partial L}{\\partial \\boldsymbol \\theta} = \\frac{\\partial {\\rm ln}\\ p(\\boldsymbol Y\\vert\\boldsymbol X,\\boldsymbol \\theta)}{\\partial \\boldsymbol \\theta} &amp;= -\\frac{1}{2}tr(\\Sigma^{-1}\\frac{\\partial \\Sigma}{\\partial \\boldsymbol \\theta}) + \\frac{1}{2}(\\boldsymbol Y-\\mu(\\boldsymbol X))^T\\Sigma^{-1}\\frac{\\partial \\Sigma}{\\partial \\boldsymbol \\theta}(\\boldsymbol Y-\\mu(\\boldsymbol X))\\\\&amp;=-\\frac{1}{2}tr(\\Sigma^{-1}\\frac{\\partial \\Sigma}{\\partial \\boldsymbol \\theta}) + \\frac{1}{2}\\boldsymbol Y^T\\Sigma^{-1}\\frac{\\partial \\Sigma}{\\partial \\boldsymbol \\theta}\\boldsymbol Y\\quad \\boldsymbol (\\boldsymbol \\mu = 0)\\end{aligned}\\]æ³¨æ„ï¼Œé«˜æ–¯è¿‡ç¨‹å›å½’ä¸­çš„ç›®æ ‡å‡½æ•°ä¸æ˜¯å‡¸çš„ï¼Œå› è€Œå¸¦æ¥çš„é—®é¢˜å°±æ˜¯ï¼šé€šè¿‡æ±‚è§£è¿™ä¸ªæœ€ä¼˜åŒ–é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ°çš„åªèƒ½æ˜¯ä¸€ä¸ªå±€éƒ¨æœ€å°å€¼ï¼Œè€ŒéçœŸæ­£çš„å…¨å±€æœ€å°å€¼ã€‚å±€éƒ¨æœ€å°ä¸èƒ½ä¿è¯æ˜¯å…¨å±€æœ€ä¼˜æ—¶ï¼Œåˆå§‹å€¼çš„é€‰æ‹©å˜å¾—éå¸¸çš„é‡è¦ã€‚å› ä¸ºä¸€ä¸ªåˆå§‹å€¼å¯èƒ½ä¼šèµ°å‘ä¸€ä¸ªå…·ä½“çš„æå°å€¼ï¼Œè€Œä¸åŒçš„åˆå§‹å€¼æˆ–è®¸å¯ä»¥å¾—åˆ°ä¸åŒæœ€ä¼˜å€¼ã€‚ä¸€ç§è§£å†³æ–¹æ¡ˆå°±æ˜¯ï¼Œå¤šæ¬¡äº§ç”Ÿä¸åŒçš„åˆå§‹è¶…å‚æ•°ï¼Œç„¶åæ“ä½œä¸€æ¬¡æœ€ä¼˜åŒ–é—®é¢˜çš„æ±‚è§£ï¼Œç„¶åæ¯”è¾ƒè¿™äº›æœ€ä¼˜åŒ–ï¼ŒæŒ‘é€‰å¾—å‡ºå…¶ä¸­æœ€å°çš„å€¼ã€‚3.3.3. æµ‹è¯•æ ·æœ¬é¢„æµ‹æ¥ç€ï¼Œç»™å®šå…¶å®ƒ $m$ ä¸ªæµ‹è¯•è§‚æµ‹å€¼ $\\boldsymbol X^$ï¼Œé¢„æµ‹ $\\boldsymbol Y^=f(\\boldsymbol X^*)$ ã€‚æˆ‘ä»¬å¸Œæœ›å¯¹ $\\boldsymbol Y^\\vert \\boldsymbol Y$ çš„æ¡ä»¶æ¦‚ç‡ $p(\\boldsymbol Y^\\vert \\boldsymbol X, \\boldsymbol Y,\\boldsymbol X^)$ è¿›è¡Œå»ºæ¨¡ï¼Œå³ç»™å®šè§‚å¯Ÿåˆ°çš„æ‰€æœ‰æ•°æ® $\\boldsymbol X, \\boldsymbol Y,\\boldsymbol X^$ï¼Œç¡®å®šé¢„æµ‹æ ·æœ¬çš„é¢„æµ‹å€¼ $\\boldsymbol Y^*$ çš„åˆ†å¸ƒã€‚é«˜æ–¯è¿‡ç¨‹å¹¶æ²¡æœ‰ç›´æ¥å¯¹è¿™ä¸ªæ¡ä»¶æ¦‚ç‡åˆ†å¸ƒè¿›è¡Œå»ºæ¨¡ï¼Œè€Œæ˜¯ä»è”åˆæ¦‚ç‡åˆ†å¸ƒå‡ºå‘ï¼Œå¯¹ $\\boldsymbol Y^$ çš„è”åˆæ¦‚ç‡ $p(\\boldsymbol Y,\\boldsymbol Y^\\vert\\boldsymbol X,\\boldsymbol X^*)$ è¿›è¡Œå»ºæ¨¡ã€‚å½“è¿™ä¸ªæ¦‚ç‡å·²çŸ¥æ—¶ï¼Œå¯ä»¥é€šè¿‡ä¸‹é¢çš„å¼å­å¾—åˆ°æ–°æ ·æœ¬é¢„æµ‹å€¼çš„æ¡ä»¶æ¦‚ç‡\\[p(\\boldsymbol Y^*\\vert\\boldsymbol X,\\boldsymbol Y,\\boldsymbol X^*)= \\frac{p(\\boldsymbol Y,\\boldsymbol Y^*\\vert \\boldsymbol X,\\boldsymbol X^*)}{p(\\boldsymbol Y\\vert \\boldsymbol X,\\boldsymbol X^*)}= \\frac{p(\\boldsymbol Y,\\boldsymbol Y^*\\vert \\boldsymbol X,\\boldsymbol X^*)}{\\int _{Y^*}p(\\boldsymbol Y,\\boldsymbol Y^*\\vert \\boldsymbol X,\\boldsymbol X^*)dY^*}\\]æ˜¾ç„¶ï¼Œæ ¸å¿ƒæ˜¯å»ºç«‹ $p(\\boldsymbol Y,\\boldsymbol Y^\\vert \\boldsymbol X,\\boldsymbol X^)$ çš„å…·ä½“å½¢å¼ï¼Œç„¶åé€šè¿‡ä¸Šå¼æ±‚å‡ºå…³äº $\\boldsymbol Y^*$ çš„æ¡ä»¶æ¦‚ç‡ã€‚æ ¹æ®å›å½’æ¨¡å‹æ ¸é«˜æ–¯è¿‡ç¨‹çš„å®šä¹‰ï¼Œ$\\boldsymbol Y$ å’Œ $\\boldsymbol Y^*$ çš„æ¦‚ç‡åˆ†å¸ƒä¸º\\[\\begin{aligned}\\boldsymbol Y&amp;\\sim \\mathcal N(\\mu(\\boldsymbol X),k(\\boldsymbol X, \\boldsymbol X)+\\sigma^2_{noise}\\boldsymbol I)\\\\\\boldsymbol Y^* &amp;\\sim \\mathcal N(\\mu(\\boldsymbol X^*),k(\\boldsymbol X^*, \\boldsymbol X^*))\\end{aligned}\\]äºŒè€…çš„è”åˆåˆ†å¸ƒæ»¡è¶³æ— é™ç»´é«˜æ–¯åˆ†å¸ƒ\\[\\begin{aligned}  \\left[\\begin{matrix}    \\boldsymbol Y\\\\\\boldsymbol Y^*  \\end{matrix}\\right]  \\sim  N(  \\left[\\begin{matrix}    \\mu(\\boldsymbol X)\\\\\\mu(\\boldsymbol X^*)  \\end{matrix}\\right],  \\left[\\begin{matrix}    k(\\boldsymbol X,\\boldsymbol X)+\\sigma^2_{noise} \\boldsymbol I &amp; k(\\boldsymbol X,\\boldsymbol X^*)\\\\ k(\\boldsymbol X^*,\\boldsymbol X)&amp;k(\\boldsymbol X^*,\\boldsymbol X^*)  \\end{matrix}\\right]  )\\end{aligned}\\]ä»è¿™ä¸ªè”åˆåˆ†å¸ƒä¸­æ´¾ç”Ÿå‡ºæ¥çš„æ¡ä»¶æ¦‚ç‡ $\\boldsymbol Y^*\\vert \\boldsymbol Y$ åŒæ ·ä¹Ÿæœä»æ— é™ç»´é«˜æ–¯åˆ†å¸ƒã€‚å¥—ç”¨é«˜ç»´é«˜æ–¯åˆ†å¸ƒçš„å…¬å¼\\[\\begin{aligned}  \\boldsymbol Y^*\\vert \\boldsymbol Y &amp;\\sim N(\\mu^*,k^*) \\Rightarrow p(\\boldsymbol Y^*\\vert \\boldsymbol X,\\boldsymbol Y,\\boldsymbol X^*)= N(\\mu^*,k^*)\\\\  \\mu^* &amp;= k(\\boldsymbol X^*,\\boldsymbol X)[k(\\boldsymbol X,\\boldsymbol X)+\\sigma^2_{noise}\\boldsymbol I]^{-1}(\\boldsymbol Y-\\mu(\\boldsymbol X))+\\mu(\\boldsymbol X^*)\\\\  &amp;= k(\\boldsymbol X^*,\\boldsymbol X)k(\\boldsymbol X,\\boldsymbol X)^{-1}\\boldsymbol Y\\\\  k^* &amp;= k(\\boldsymbol X^*,\\boldsymbol X^*)-k(\\boldsymbol X^*,\\boldsymbol X)[k(\\boldsymbol X,\\boldsymbol X)+\\sigma^2_{noise}\\boldsymbol I]^{-1}k(\\boldsymbol X,\\boldsymbol X^*)\\\\  &amp;=k(\\boldsymbol X^*,\\boldsymbol X^*)-k(\\boldsymbol X^*,\\boldsymbol X)k(\\boldsymbol X,\\boldsymbol X)^{-1}k(\\boldsymbol X,\\boldsymbol X^*)\\end{aligned}\\]å‡å€¼ $\\mu^$ å®é™…ä¸Šæ˜¯è§‚æµ‹ç‚¹ $\\boldsymbol Y^$ çš„ä¸€ä¸ªçº¿æ€§å‡½æ•°ã€‚åæ–¹å·®é¡¹ $k^*$ çš„ç¬¬ä¸€éƒ¨åˆ†æ˜¯æˆ‘ä»¬çš„å…ˆéªŒçš„åæ–¹å·®ï¼Œå‡æ‰çš„åé¢çš„é‚£ä¸€é¡¹å®é™…ä¸Šè¡¨ç¤ºäº†è§‚æµ‹åˆ°æ•°æ®åå‡½æ•°åˆ†å¸ƒä¸ç¡®å®šæ€§çš„å‡å°‘ã€‚å¦‚æœç¬¬äºŒé¡¹éå¸¸æ¥è¿‘äº 0ï¼Œè¯´æ˜è§‚æµ‹æ•°æ®åæˆ‘ä»¬çš„ä¸ç¡®å®šæ€§å‡ ä¹ä¸å˜ï¼Œåä¹‹å¦‚æœç¬¬äºŒé¡¹éå¸¸å¤§ï¼Œåˆ™è¯´æ˜ä¸ç¡®å®šæ€§é™ä½äº†å¾ˆå¤šã€‚  PS1ï¼šé«˜æ–¯åˆ†å¸ƒæœ‰ä¸€ä¸ªå¾ˆå¥½çš„ç‰¹æ€§ï¼Œå³é«˜æ–¯åˆ†å¸ƒçš„è”åˆæ¦‚ç‡ã€è¾¹ç¼˜æ¦‚ç‡ã€æ¡ä»¶æ¦‚ç‡ä»ç„¶æ˜¯æ»¡è¶³é«˜æ–¯åˆ†å¸ƒçš„ï¼Œå‡è®¾ $n$ ç»´éšæœºå˜é‡æ»¡è¶³é«˜æ–¯åˆ†å¸ƒ  $\\boldsymbol x \\sim N(\\mu,\\Sigma_{n\\times n})$  æŠŠéšæœºå˜é‡åˆ†æˆä¸¤éƒ¨åˆ†ï¼š$p$ ç»´ $\\boldsymbol x_a$ å’Œ $q$ ç»´ $\\boldsymbol x_b$ï¼Œæ»¡è¶³ $n=p+q$ï¼ŒæŒ‰ç…§åˆ†å—è§„åˆ™å¯ä»¥å†™æˆ\\(\\begin{aligned}  x=\\left[\\begin{matrix}    x_a\\\\x_b  \\end{matrix}\\right],  \\mu=\\left[\\begin{matrix}    \\mu_a\\\\\\mu_b  \\end{matrix}\\right],  \\Sigma=\\left[\\begin{matrix}    \\Sigma_{aa} &amp; \\Sigma_{ab}\\\\\\Sigma_{ba}&amp;\\Sigma_{bb}  \\end{matrix}\\right]\\end{aligned}\\)åˆ™ä¸‹åˆ—æ¡ä»¶åˆ†å¸ƒä¾ç„¶æ˜¯é«˜ç»´é«˜æ–¯åˆ†å¸ƒ\\(\\begin{aligned}x_b\\vert x_a &amp;\\sim N(\\mu_{b\\vert a},\\Sigma_{b\\vert a})\\\\\\mu_{b\\vert a} &amp;= \\Sigma_{ba}\\Sigma_{aa}^{-1}(x_a-\\mu_a)+\\mu_b\\\\\\Sigma_{b\\vert a} &amp;= \\Sigma_{bb}-\\Sigma_{ba}\\Sigma_{aa}^{-1}\\Sigma_{ab}\\end{aligned}\\)ç”±æ­¤å¯æ¨å¹¿åˆ°é«˜æ–¯è¿‡ç¨‹ã€‚ä¸‹å›¾æ˜¯é«˜æ–¯è¿‡ç¨‹çš„å¯è§†åŒ–ï¼Œå…¶ä¸­è“çº¿æ˜¯é«˜æ–¯è¿‡ç¨‹çš„å‡å€¼ï¼Œæµ…è“è‰²åŒºåŸŸ 95% ç½®ä¿¡åŒºé—´ï¼ˆç”±åæ–¹å·®çŸ©é˜µçš„å¯¹è§’çº¿å¾—åˆ°ï¼‰ï¼Œæ¯æ¡è™šçº¿ä»£è¡¨ä¸€ä¸ªå‡½æ•°é‡‡æ ·ï¼ˆè¿™é‡Œç”¨äº† 100 ç»´æ¨¡æ‹Ÿè¿ç»­æ— é™ç»´ï¼‰ã€‚å·¦ä¸Šè§’ç¬¬ä¸€å¹…å›¾æ˜¯é«˜æ–¯è¿‡ç¨‹çš„å…ˆéªŒï¼ˆè¿™é‡Œç”¨äº†é›¶å‡å€¼ä½œä¸ºå…ˆéªŒï¼‰ï¼Œåé¢å‡ å¹…å›¾å±•ç¤ºäº†å½“è§‚æµ‹åˆ°æ–°çš„æ•°æ®ç‚¹çš„æ—¶å€™ï¼Œé«˜æ–¯è¿‡ç¨‹å¦‚ä½•æ›´æ–°è‡ªèº«çš„å‡å€¼å‡½æ•°å’Œåæ–¹å·®å‡½æ•°ã€‚3.4. æ·±åº¦æ ¸å›å½’  Andrew Gordon Wilson, et al. Deep Kernel Learning. 2016.æ•°æ®é›†å¦‚ä¸‹ï¼Œè¾“å…¥ $n$ ä¸ª $D$ ç»´æ•°æ® $\\boldsymbol X=[\\boldsymbol x_1,\\cdots,\\boldsymbol x_n]$ï¼Œè¾“å‡º $n$ ä¸ª 1 ç»´æ•°æ® $\\boldsymbol Y = [y(\\boldsymbol x_1),\\cdots,y(\\boldsymbol x_n)]$ã€‚ç½‘ç»œç»“æ„å¦‚ä¸‹ï¼š$n&lt;6000$ æ—¶ç½‘ç»œä¸º $[D-1000-500-50-2-gp]$ ç»“æ„ï¼Œ$n\\leq 6000$ æ—¶ç½‘ç»œä¸º $[D-1000-1000-500-50-2-gp]$ ç»“æ„ã€‚å…¶ä¸­å‰é¢ä¸ºå…¨è¿æ¥çš„ MLPï¼Œè¾“å…¥ $D$ ç»´æ•°æ®ï¼Œè¾“å‡º 2 ç»´ç‰¹å¾ï¼Œæœ€åä¸€å±‚ä¸ºé«˜æ–¯è¿‡ç¨‹å›å½’å±‚ï¼Œ3.4.1. åˆå§‹åŒ–NNRegressor.fit()|--first_run()    |--layers[i].initialize_ws()  å…¨è¿æ¥å±‚Dense()ï¼Œåˆå§‹åŒ–ä¸ºdef initialize_ws(self):  self.W=numpy.random.randn(self.n_inp,self.n_out)*numpy.sqrt(1.0/self.n_inp)  self.b=numpy.zeros((1,self.n_out))  self.dW=numpy.zeros((self.n_inp,self.n_out))  self.db=numpy.zeros((1,self.n_out))å³\\[\\begin{aligned}w&amp;\\sim N(0,\\sqrt{\\frac{1}{D}}) \\in \\mathbb R^{D_i\\times D_o}\\\\b &amp;= [0,\\cdots,0] \\in \\mathbb R^{D_o}\\\\dw &amp;= \\left[\\begin{matrix}  0&amp;\\cdots&amp;0\\\\  \\vdots&amp;\\ddots&amp;\\vdots\\\\  0&amp;\\cdots&amp;0\\\\  \\end{matrix}\\right] \\in \\mathbb R^{D_i\\times D_o}\\\\db &amp;= [0,\\cdots,0] \\in \\mathbb R^{D_o}\\end{aligned}\\]  é«˜æ–¯å±‚CovMat()ï¼Œåˆå§‹åŒ–ä¸ºdef initialize_ws(self):  self.W=numpy.ones((1,2))*numpy.array([[numpy.log(self.s_alpha/(1.0-self.s_alpha)),numpy.sqrt(self.var)]])  self.b=numpy.zeros((1,1))  self.dW=numpy.zeros((1,2))  self.db=numpy.zeros((1,1))å³\\[\\begin{aligned}\\boldsymbol w &amp;= [w_1,w_2] = [{\\rm ln}\\frac{\\alpha}{1-\\alpha},\\sqrt{var}],\\quad \\alpha = 0.1,\\; var = 1\\\\b &amp;= [0]\\\\dw &amp;= [0,0]\\\\db &amp;= [0]\\end{aligned}\\]3.4.2. å‰å‘ä¼ æ’­NNRegressor.fit()|--Adam.fit()    |--NNRegressor.update()        |--CoreNN.forward()            |--layers[i].forward(X)  å…¨è¿æ¥å±‚Dense()ï¼Œå‰å‘ä¼ æ’­ä¸ºdef forward(self,X):  self.inp=X  self.out=numpy.dot(self.inp,self.W)+self.b  return self.outå³\\[\\boldsymbol {o} = \\boldsymbol x_{ND_i} \\cdot \\boldsymbol w_{D_iD_o} + \\boldsymbol b_{D_o}\\; \\in \\mathbb R^{N\\times D_o}\\]å…¶ä¸­ï¼Œ$N$ æ˜¯æ ·æœ¬æ•°é‡ï¼›$D_i$ æ˜¯è¯¥å±‚è¾“å…¥ç»´åº¦ï¼›$D_o$ æ˜¯è¯¥å±‚è¾“å‡ºç»´åº¦ï¼Œä¹Ÿæ˜¯ä¸‹ä¸€å±‚è¾“å…¥ç»´åº¦ã€‚ç»è¿‡å¤šå±‚å…¨è¿æ¥çš„ MLPï¼Œè¾“å…¥æ•°æ®é›†ä» $N\\times D$ ç»´å˜ä¸º $N\\times M$ ç»´ç‰¹å¾ã€‚  é«˜æ–¯å±‚CovMat()ï¼Œå‰å‘ä¼ æ’­ä¸ºdef forward_rbf(self,X):  self.inp=X    #Calculate distances  ll=[]  for i in range(0,X.shape[1]):    tmp=X[:,i].reshape(1,-1)-X[:,i].reshape(-1,1)    ll.append(tmp.reshape(X.shape[0],X.shape[0],1))  self.z=numpy.concatenate(ll,-1)    #Apply RBF function to distance  self.s0=numpy.exp(-0.5*numpy.sum(self.z**2,-1))    #Multiply with variance  self.var=self.W[0,1]**2  self.s=self.var*self.s0    #Add noise / whitekernel  self.s_alpha=1.0/(numpy.exp(-self.W[0,0])+1.0)  self.out=self.s+(self.s_alpha+1e-8)*numpy.identity(X.shape[0])  return self.outé¦–å…ˆè®¡ç®—æ¯ä¸ªæ ·æœ¬å¯¹æ‰€æœ‰æ ·æœ¬çš„è·ç¦»çŸ©é˜µï¼šç¬¬ä¸€æ­¥ X[:,i].reshape(1,-1)-X[:,i].reshape(-1,1)ï¼Œå¯¹æ•°æ®çš„æ¯ä¸€åˆ—è½¬ç½®æˆè¡Œï¼Œç„¶åæ‰©å……æˆæ–¹é˜µï¼Œç„¶åå‡å»ç›´æ¥å¯¹åˆ—æ‰©å……æˆçš„æ–¹é˜µã€‚è¿™é‡Œç›¸å½“äºå¯¹æ•°æ®çš„æ¯ä¸€åˆ—é€ä¸€å‡å»å„ä¸ªåˆ—å…ƒç´ å½¢æˆä¸€ä¸ªçŸ©é˜µã€‚  $1m$ ç»´è¡Œå‘é‡å‡ $n1$ ç»´åˆ—å‘é‡æ—¶ï¼Œpython ä¼šæŠŠ $1m$ ç»´è¡Œå‘é‡è‡ªåŠ¨æ‰©å……ä¸º $nm$ ç»´ï¼Œæ¯ä¸€è¡Œéƒ½æ˜¯è¡Œå‘é‡çš„å¤åˆ¶ï¼› æŠŠ $n1$ ç»´åˆ—å‘é‡æ‰©å……ä¸º $nm$ ç»´ï¼Œå¢åŠ çš„æ¯ä¸€åˆ—éƒ½æ˜¯åˆ—å‘é‡çš„å¤åˆ¶ï¼Œç„¶ååšå·®å¾—åˆ° $nm$ ç»´çŸ©é˜µã€‚ç¬¬äºŒæ­¥ï¼ŒæŠŠä¸Šè¿°çŸ©é˜µé‡æ–°æ’åˆ—ä¸º $N\\times N\\times 1$ çš„å½¢å¼ï¼›ç¬¬ä¸‰æ­¥ï¼Œé€ä¸€éå†æ‰€æœ‰åˆ—ï¼Œå¾—åˆ° $D$ ä¸ª $N\\times N\\times 1$ çš„çŸ©é˜µç»„æˆçš„åˆ—è¡¨ï¼Œé‡æ–°æ‹¼æ¥ä¸º $N\\times N\\times D$ ç»´çŸ©é˜µã€‚å…¶å®æœ¬è´¨ä¸Šå°±æ˜¯åšäº†å¯¹æ•°æ®é›†ä¸­çš„æ¯ä¸ªæ ·æœ¬å¯¹æ‰€æœ‰å…¶å®ƒæ ·æœ¬åšå·®çš„æ“ä½œï¼Œå‡è®¾è¾“å…¥é«˜æ–¯è¿‡ç¨‹çš„æ•°æ®é›†ä¸ºç»è¿‡ MLP çš„ $N\\times M$ ç»´ç‰¹å¾ $\\boldsymbol x$\\[\\boldsymbol x = \\left[  \\begin{matrix}    \\boldsymbol x_1\\\\    \\boldsymbol x_2\\\\    \\vdots\\\\    \\boldsymbol x_N  \\end{matrix}\\right]= \\left[  \\begin{matrix}    x_{11}&amp;x_{12}&amp;\\cdots&amp;x_{1M}\\\\    x_{21}&amp;x_{22}&amp;\\cdots&amp;x_{2M}\\\\    \\vdots\\\\    x_{N1}&amp;x_{N2}&amp;\\cdots&amp;x_{NM}\\\\  \\end{matrix}\\right]\\in \\mathbb R^{N\\times M}\\]é‚£ä¹ˆè·ç¦»ä¸º\\[\\boldsymbol z =\\left[\\left[  \\begin{matrix}    \\boldsymbol x_1 - \\boldsymbol x_1\\\\    \\boldsymbol x_2 - \\boldsymbol x_1\\\\    \\vdots\\\\    \\boldsymbol x_N - \\boldsymbol x_1\\\\  \\end{matrix}\\right],\\left[  \\begin{matrix}    \\boldsymbol x_1 - \\boldsymbol x_2\\\\    \\boldsymbol x_2 - \\boldsymbol x_2\\\\    \\vdots\\\\    \\boldsymbol x_N - \\boldsymbol x_2\\\\  \\end{matrix}\\right],\\cdots,\\left[  \\begin{matrix}    \\boldsymbol x_1 - \\boldsymbol x_N\\\\    \\boldsymbol x_2 - \\boldsymbol x_N\\\\    \\vdots\\\\    \\boldsymbol x_N - \\boldsymbol x_N\\\\  \\end{matrix}\\right]\\right]\\in \\mathbb R^{N\\times N\\times M}\\]å¯¹ $\\boldsymbol z$ çš„æœ€åä¸€ç»´ï¼ˆ$M$ ç»´ï¼‰åˆ†é‡è®¡ç®—äºŒèŒƒæ•°çš„å¹³æ–¹\\[\\vert\\vert\\boldsymbol z\\vert\\vert^2 = \\left[\\begin{matrix}  \\vert\\vert\\boldsymbol x_1 - \\boldsymbol x_1\\vert\\vert^2 &amp; \\cdots &amp; \\vert\\vert\\boldsymbol x_1 - \\boldsymbol x_N\\vert\\vert^2\\\\  \\vert\\vert\\boldsymbol x_2 - \\boldsymbol x_1\\vert\\vert^2 &amp; \\cdots &amp; \\vert\\vert\\boldsymbol x_2 - \\boldsymbol x_N\\vert\\vert^2\\\\  \\vdots&amp;\\ddots&amp;\\vdots\\\\  \\vert\\vert\\boldsymbol x_N - \\boldsymbol x_1\\vert\\vert^2 &amp; \\cdots &amp; \\vert\\vert\\boldsymbol x_N - \\boldsymbol x_N\\vert\\vert^2\\\\\\end{matrix}\\right]\\in \\mathbb R^{N\\times N}\\]å…¶ä¸­äºŒèŒƒæ•°ä¸º\\[\\vert\\vert\\boldsymbol x_i - \\boldsymbol x_j\\vert\\vert = \\sqrt{\\sum_{k=1}^M (x_{ik}-x_{jk})^2}\\]å…¶æ¬¡è®¡ç®—RBFï¼š\\[\\boldsymbol s_0 = e^{-0.5\\cdot \\vert\\vert\\boldsymbol z\\vert\\vert^2}\\quad\\in \\mathbb R_{N\\times N}\\]ä¹˜ä»¥æ–¹å·®ï¼ˆä¹‹å‰å®šä¹‰çš„ç¬¬ 2 ä¸ªæƒé‡ç³»æ•° $w_2$ï¼‰\\[\\boldsymbol s = w_2^2 \\cdot \\boldsymbol s_0  = var\\cdot \\boldsymbol s_0\\quad\\in \\mathbb R_{N\\times N}\\]åŠ å™ªå£°ï¼ˆä¹‹å‰å®šä¹‰çš„ç¬¬ 1 ä¸ªæƒé‡ç³»æ•° $w_1$ï¼‰\\[\\begin{aligned}s_\\alpha &amp;= 1/{(e^{-w_1}+1}) = 1/({\\frac{1-\\alpha}{\\alpha}}+1) = \\alpha\\\\\\boldsymbol {out} &amp;= \\boldsymbol s + (s_\\alpha+10^{-8})\\cdot \\boldsymbol I_{N\\times N}\\end{aligned}\\]å½¢å¼ä¸Šç­‰æ•ˆäº\\[\\boldsymbol K = var\\cdot \\boldsymbol K(X,X) + \\alpha\\cdot \\boldsymbol I\\]æ ¸å‡½æ•°å‚æ•°åˆ†åˆ«ä¸ºä¸¤ä¸ªæƒé‡ $var, \\alpha$ï¼Œæœ€åè¾“å‡º $N\\times N$ ç»´çš„æ ¸çŸ©é˜µ $\\boldsymbol {out} = \\boldsymbol K$ã€‚3.4.3. åå‘ä¼ æ’­æ ¹æ®å‰æ–‡ï¼Œæå¤§ä¼¼ç„¶ä¼°è®¡å³æœ€å°åŒ–è´Ÿå¯¹æ•°ä¼¼ç„¶å‡½æ•°ï¼š\\[{\\rm argmin}_\\theta \\quad loss = \\frac{1}{2}{\\rm ln}{\\vert\\boldsymbol K\\vert}+\\frac{n}{2}{\\rm ln}(2\\pi)+\\frac{1}{2}\\boldsymbol Y^T\\boldsymbol K^{-1}\\boldsymbol Y\\]  å®šç†1ï¼šè®¾ $\\boldsymbol K$ ä¸ºä¸€ $n\\times n$ æ­£å®šå¯¹ç§°çŸ©é˜µçŸ©é˜µï¼Œå¯¹ $\\boldsymbol K$ è¿›è¡Œ Cholesky åˆ†è§£  \\(\\vert\\boldsymbol K\\vert=\\boldsymbol L \\boldsymbol L^T\\)      å› ä¸ºä¸‰è§’çŸ©é˜µçš„è¡Œåˆ—å¼ $\\vert\\boldsymbol L\\vert = \\prod_{i=1}^n L_{ii}$ï¼Œè€Œ $\\vert\\boldsymbol K\\vert = \\vert\\boldsymbol L\\vert\\vert\\boldsymbol L^T\\vert$ï¼Œåˆ™æœ‰  \\[\\vert\\boldsymbol K\\vert=\\prod_{i=1}^n L_{ii}^2\\]\\[{\\rm ln}\\vert\\boldsymbol K\\vert=2\\sum_{i=1}^n {\\rm ln}L_{ii}\\]åˆ™ $loss$ å¯æ”¹å†™ä¸º\\[loss = \\sum_{i=1}^n {\\rm ln}L_{ii}+\\frac{n}{2}{\\rm ln}(2\\pi)+\\frac{1}{2}\\boldsymbol Y^T\\boldsymbol K^{-1}\\boldsymbol Y\\]ä¸»è¦è®¡ç®—é‡åœ¨äºæ±‚è§£æ ¸çŸ©é˜µçš„é€† $\\boldsymbol K^{-1}$ã€‚ä¸‹é¢ç»“åˆä»£ç è¿›è¡Œè¯´æ˜ã€‚NNRegressor.fit(self,X,Y,...)|--Adam.fit(self,X,Y):  |--NNRegressor.update(self,X,Y):    |--CoreNN.backward(self,Y):      self.j,err=self.cost(Y,self.layers[-1].out)      for i in reversed(range(0,len(self.layers))):        err=self.layers[i].backward(err)      return erré¦–å…ˆè®¡ç®—æŸå¤±å‡½æ•°ã€‚NNRegressor.__init__()  if gp:    self.cost=self.gp_lossNNRegressor.gp_loss(self,y,K):  self.y=y  self.A=self.layers[-2].out  self.K=K  self.L_ = cholesky(K, lower=True)  L_inv = solve_triangular(self.L_.T,numpy.eye(self.L_.shape[0]))  self.K_inv = L_inv.dot(L_inv.T)    self.alpha_ = cho_solve((self.L_, True), y)  self.nlml=0.0  self.nlml_grad=0.0  for i in range(0,y.shape[1]):    gg1=numpy.dot(self.alpha_[:,i].reshape(1,-1),y[:,i].reshape(-1,1))[0,0]    self.nlml+=0.5*gg1+numpy.sum(numpy.log(numpy.diag(self.L_)))+K.shape[0]*0.5*numpy.log(2.0*numpy.pi)    yy=numpy.dot(y[:,i].reshape(-1,1),y[:,i].reshape(1,-1))    self.nlml_grad += -0.5*( numpy.dot(numpy.dot(self.K_inv,yy),self.K_inv)-self.K_inv)*K.shape[0]  return self.nlml,self.nlml_gradè®¾ $\\boldsymbol K \\in \\mathbb R^{N\\times N}$ æ˜¯é«˜æ–¯å±‚æœ€ç»ˆè¾“å‡ºçš„æ ¸çŸ©é˜µï¼Œ$\\boldsymbol A\\in \\mathbb R^{N\\times M}$ æ˜¯å…¨è¿æ¥å±‚è¾“å‡ºçš„ç‰¹å¾ã€‚å¯¹æ ¸çŸ©é˜µæ±‚é€†å¾—åˆ°  $\\boldsymbol K^{-1}$ ã€‚å› ä¸º $\\boldsymbol K$ ä¸ºå¯¹ç§°æ­£å®šçŸ©é˜µï¼Œå¯é‡‡ç”¨ Cholesky çŸ©é˜µåˆ†è§£åŠ é€Ÿæ±‚é€†è¿‡ç¨‹ï¼ˆcholesky() å’Œ solve_triangular()ï¼‰ã€‚  Cholesky åˆ†è§£æ˜¯æŠŠä¸€ä¸ªå¯¹ç§°æ­£å®šçš„çŸ©é˜µè¡¨ç¤ºæˆä¸€ä¸ªä¸‹ä¸‰è§’çŸ©é˜µ $\\boldsymbol L$ å’Œå…¶è½¬ç½®çš„ä¹˜ç§¯çš„åˆ†è§£ã€‚\\[\\boldsymbol K = \\boldsymbol L\\boldsymbol L^T\\]  å®ƒè¦æ±‚çŸ©é˜µçš„æ‰€æœ‰ç‰¹å¾å€¼å¿…é¡»å¤§äºé›¶ï¼Œæ•…åˆ†è§£çš„ä¸‹ä¸‰è§’çš„å¯¹è§’å…ƒä¹Ÿæ˜¯å¤§äºé›¶çš„ã€‚ç”±äº $L$ æ˜¯å¯é€†æ–¹é˜µï¼Œå› æ­¤æ±‚é€†å’Œè½¬ç½®å¯ä»¥äº¤æ¢æ¬¡åºï¼Œåˆ™\\[\\boldsymbol K^{-1} = (\\boldsymbol L^T)^{-1}\\boldsymbol L^{-1} = (\\boldsymbol L^T)^{-1}[{(\\boldsymbol L^T)^{-1}}]^T\\]  é‚£ä¹ˆåªéœ€è¦æ±‚ $(\\boldsymbol L^T)^{-1}$ å°±å¯ä»¥æ±‚å‡º $\\boldsymbol K^{-1}$ã€‚è®¾ $\\boldsymbol y\\in \\mathbb R^{N\\times 1}$ æ˜¯è®­ç»ƒé›†æ ‡ç­¾ï¼Œæ ¹æ® $\\boldsymbol L\\boldsymbol \\alpha=\\boldsymbol y$ æ±‚å‡º $\\boldsymbol \\alpha$ï¼ˆcho_solve()ï¼‰ã€‚\\[\\boldsymbol \\alpha = \\boldsymbol L^{-1} \\boldsymbol y  \\in \\mathbb R^{N\\times 1}\\]åˆ™\\[gg1 = \\boldsymbol \\alpha^T\\boldsymbol y = \\boldsymbol y^T (\\boldsymbol L^{-1})^T\\boldsymbol y \\\\\\]æœ‰ negative log marginal likelihood (nlml)\\[\\begin{aligned}nlml &amp;= \\frac{1}{2}gg1 + \\sum_{i=1}^N {\\rm ln}L_{ii} + \\frac{N}{2}{\\rm ln} 2\\pi\\\\&amp;=\\frac{1}{2}\\boldsymbol y^T (\\boldsymbol L^{-1})^T\\boldsymbol y + \\sum_{i=1}^N {\\rm ln}L_{ii} + \\frac{N}{2}{\\rm ln} 2\\pi\\\\&amp;= -loss\\quad ?\\end{aligned}\\]ã€WARNINGã€‘ï¼šå…³äºä¸ºå•¥å…¬å¼æ˜¯ $y^TK^{-1}y$ è€Œä»£ç æ˜¯ $y^TL^{-1}y$ æ²¡æƒ³æ˜ç™½ã€‚è¦ä½¿å¾—æå¤§ä¼¼ç„¶ä¼°è®¡æœ€å¤§ä¹Ÿå°±æ˜¯ $loss$ æœ€å¤§ï¼Œå°±è¦ä½¿å¾— $nlml$ æœ€å°ï¼ŒäºŒè€…ç›¸å·®ä¸€ä¸ªè´Ÿå·ã€‚æ±‚æå€¼åˆ™å¯¹å‚æ•°æ±‚åå¯¼ï¼Œå› ä¸ºæ ¸çŸ©é˜µå¯è¡¨ç¤ºä¸º\\[k(\\boldsymbol x_i, \\boldsymbol x_j\\vert\\boldsymbol \\theta) \\rightarrow k(g(\\boldsymbol x_i,\\boldsymbol w), g(\\boldsymbol x_j,\\boldsymbol w)\\vert\\boldsymbol \\theta)\\]å…¶ä¸­ $g(\\boldsymbol x,\\boldsymbol w)$ æ˜¯æ·±åº¦ç¥ç»ç½‘ç»œçš„æ˜ å°„ï¼Œé‚£ä¹ˆ\\[\\begin{aligned}L = -loss &amp;= \\frac{1}{2}{\\rm ln}{\\vert \\boldsymbol K\\vert}+\\frac{n}{2}{\\rm ln}(2\\pi)+\\frac{1}{2}\\boldsymbol Y^T\\boldsymbol K^{-1}\\boldsymbol Y\\\\\\frac{\\partial L}{\\partial \\boldsymbol \\theta} &amp;= \\frac{\\partial L}{\\partial \\boldsymbol K}\\frac{\\partial \\boldsymbol K}{\\partial \\boldsymbol \\theta}\\\\\\frac{\\partial L}{\\partial \\boldsymbol w} &amp;= \\frac{\\partial L}{\\partial \\boldsymbol K}\\frac{\\partial \\boldsymbol K}{\\partial g(\\boldsymbol x,\\boldsymbol w)}\\frac{\\partial g(\\boldsymbol x,\\boldsymbol w)}{\\partial \\boldsymbol w}\\\\\\end{aligned}\\]å…¶ä¸­å…±åŒé¡¹å¯ä»¥é¦–å…ˆæ±‚è§£\\[\\begin{aligned}\\frac{\\partial L}{\\partial \\boldsymbol K} &amp;= -\\frac{N}{2}[\\boldsymbol K^{-1}\\boldsymbol Y\\boldsymbol Y^T\\boldsymbol K^{-1} - \\boldsymbol K^{-1}]\\\\\\end{aligned}\\]  å¸¸ç”¨å…¬å¼ 1 ï¼ˆmatrix cookbook 124ï¼‰ï¼š\\(\\frac{\\partial }{\\partial \\boldsymbol X}Tr(\\boldsymbol A\\boldsymbol X^{-1}\\boldsymbol B) = -(\\boldsymbol X^{-1})^T\\boldsymbol A^T\\boldsymbol B(\\boldsymbol X^{-1})^T\\)å¸¸ç”¨å…¬å¼ 1 ï¼ˆç½‘ç»œï¼‰ï¼š\\(\\frac{\\partial }{\\partial \\boldsymbol A}(\\boldsymbol x^T\\boldsymbol A^{-1}\\boldsymbol x) = -(\\boldsymbol A^{-1})^T\\boldsymbol x\\boldsymbol x^T(\\boldsymbol A^{-1})^T\\)å¸¸ç”¨å…¬å¼ 2 ï¼ˆmatrix cookbook 141ï¼‰ï¼ˆå¯¹åº”ç¬¬äºŒé¡¹ï¼‰ï¼š\\(\\frac{\\partial {\\rm ln\\ det}(\\boldsymbol X)}{\\partial \\boldsymbol X} = 2\\boldsymbol X^{-1}-(\\boldsymbol X^{-1}\\cdot \\boldsymbol I)\\)å¸¸ç”¨å…¬å¼ 2 ï¼ˆç»´åŸºç™¾ç§‘ï¼‰ï¼ˆå¯¹åº”ç¬¬äºŒé¡¹ï¼‰ï¼š\\(\\frac{\\partial {\\rm ln\\ det}(\\boldsymbol X)}{\\partial \\boldsymbol X} = \\boldsymbol X^{-1}\\)ã€WARNINGã€‘ï¼šå¤šä½™çš„ $N$ æ€ä¹ˆæ¥çš„ï¼Ÿç»§ç»­å¯¹é«˜æ–¯å±‚åå‘ä¼ æ’­\\[a_{err} = \\frac{\\partial L}{\\partial \\boldsymbol K}(s_\\alpha)(1-s_\\alpha)\\]3.4.4. é¢„æµ‹å¯¹äº å…¨è¿æ¥å±‚ï¼Œåœ¨ first_run() ä¸­ï¼Œç›´æ¥å®šä¹‰è°ƒç”¨ forward() å‡½æ•°è¿›è¡Œé¢„æµ‹ï¼ˆpredict = forwardï¼‰ã€‚NNRegressor.fit()|--first_run()    for i in range(0,len(self.layers)):      if type(self.layers[i]) != Dropout and type(self.layers[i]) != CovMat:        self.layers[i].predict=self.layers[i].forwardå¯¹äºé«˜æ–¯å±‚ï¼Œé¢„æµ‹ä»£ç å¦‚ä¸‹NNRegressor.predict(self,X):  A=X  A2=self.x  for i in range(0,len(self.layers)-1):    A2=self.layers[i].predict(A2)    A=self.layers[i].predict(A)      self.K=self.layers[-1].forward(A2)  self.L_ = cholesky(self.K, lower=True)    L_inv = solve_triangular(self.L_.T,numpy.eye(self.L_.shape[0]))  self.K_inv = L_inv.dot(L_inv.T)    self.alpha_ = cho_solve((self.L_, True), self.y)      K2=numpy.zeros((X.shape[0],X.shape[0]))  K3=numpy.zeros((X.shape[0],self.K.shape[0]))    if self.layers[-1].kernel=='rbf':    d1=0.0    d2=0.0    for i in range(0,A.shape[1]):      d1+=(A[:,i].reshape(-1,1)-A[:,i].reshape(1,-1))**2      d2+=(A[:,i].reshape(-1,1)-A2[:,i].reshape(1,-1))**2    K2=self.layers[-1].var*numpy.exp(-0.5*d1)+numpy.identity(A.shape[0])*(self.layers[-1].s_alpha+1e-8)    K3=self.layers[-1].var*numpy.exp(-0.5*d2)  elif self.layers[-1].kernel=='dot':    K2=numpy.dot(A,A.T)+numpy.identity(A.shape[0])*(self.layers[-1].s_alpha+1e-8) + self.layers[-1].var    K3=numpy.dot(A,A2.T) + self.layers[-1].var      preds=numpy.zeros((X.shape[0],self.y.shape[1]))  for i in range(0,self.alpha_.shape[1]):    preds[:,i]=numpy.dot(K3,self.alpha_[:,i].reshape(-1,1))[:,0]    return preds, numpy.sqrt(numpy.diagonal(K2-numpy.dot(K3,numpy.dot(self.K_inv,K3.T))))è®¾ $\\boldsymbol A=\\boldsymbol X\\in \\mathbb R^{n\\times D}$ ä¸ºæµ‹è¯•é›†ï¼Œ$\\boldsymbol A_2=\\boldsymbol x\\in \\mathbb R^{N\\times D}$ ä¸ºè®­ç»ƒé›†.é¦–å…ˆç»è¿‡å…¨è¿æ¥å±‚å‰å‘ä¼ æ’­åç‰¹å¾ç»´åº¦ä¸º $M$ï¼Œå¾—åˆ°çš„è¾“å‡ºåˆ†åˆ«ä¾ç„¶è®°ä½œ $\\boldsymbol A\\in \\mathbb R^{n\\times M}, \\boldsymbol A_2\\in \\mathbb R^{N\\times M}$ã€‚å¯¹äºè®­ç»ƒé›† $\\boldsymbol A_2$ï¼Œè°ƒç”¨é«˜æ–¯å±‚çš„å‰å‘ä¼ æ’­å‡½æ•°ï¼Œè®¡ç®—å‡ºè®­ç»ƒé›†çš„æ ¸çŸ©é˜µ\\[\\boldsymbol K = \\boldsymbol s + (s_\\alpha+10^{-8})\\cdot \\boldsymbol I_{N\\times N}\\]ç„¶åå¯¹æ ¸çŸ©é˜µæ±‚é€†ã€‚å› ä¸º $\\boldsymbol K$ ä¸ºå¯¹ç§°æ­£å®šçŸ©é˜µï¼Œå¯é‡‡ç”¨ Cholesky çŸ©é˜µåˆ†è§£åŠ é€Ÿæ±‚é€†è¿‡ç¨‹ï¼ˆcholesky() å’Œ solve_triangular()ï¼‰ã€‚è®¾ $\\boldsymbol y\\in \\mathbb R^{N\\times1}$ æ˜¯è®­ç»ƒé›†çš„æ ‡ç­¾ï¼Œåˆ™æ ¹æ® $\\boldsymbol L\\boldsymbol \\alpha=\\boldsymbol y$ æ±‚å‡º $\\boldsymbol \\alpha$ï¼ˆcho_solve()ï¼‰ã€‚\\[\\boldsymbol \\alpha = \\boldsymbol y \\boldsymbol L^{-1}  \\in \\mathbb R^{N\\times 1}\\]å’Œé«˜æ–¯å±‚çš„å‰å‘ä¼ æ’­ç±»ä¼¼ï¼Œåˆ†åˆ«è®¡ç®—æµ‹è¯•é›†çš„æ ¸å‡½æ•° $\\boldsymbol K_2 \\in \\mathbb R^{n\\times n}$ï¼Œä»¥åŠæµ‹è¯•é›†ä¸è®­ç»ƒé›†ä¹‹é—´çš„æ ¸å‡½æ•° $\\boldsymbol K_3 \\in \\mathbb R^{n\\times N}$ã€‚\\[\\begin{aligned}\\vert\\vert\\boldsymbol d_1\\vert\\vert^2 &amp;= \\left[\\begin{matrix}  \\vert\\vert\\boldsymbol X_1 - \\boldsymbol X_1\\vert\\vert^2 &amp; \\cdots &amp; \\vert\\vert\\boldsymbol X_1 - \\boldsymbol X_n\\vert\\vert^2\\\\  \\vert\\vert\\boldsymbol X_2 - \\boldsymbol X_1\\vert\\vert^2 &amp; \\cdots &amp; \\vert\\vert\\boldsymbol X_2 - \\boldsymbol X_n\\vert\\vert^2\\\\  \\vdots&amp;\\ddots&amp;\\vdots\\\\  \\vert\\vert\\boldsymbol X_n - \\boldsymbol X_1\\vert\\vert^2 &amp; \\cdots &amp; \\vert\\vert\\boldsymbol X_n - \\boldsymbol X_n\\vert\\vert^2\\\\\\end{matrix}\\right]\\in \\mathbb R^{n\\times n}\\\\\\vert\\vert\\boldsymbol d_2\\vert\\vert^2 &amp;= \\left[\\begin{matrix}  \\vert\\vert\\boldsymbol X_1 - \\boldsymbol x_1\\vert\\vert^2 &amp; \\cdots &amp; \\vert\\vert\\boldsymbol X_1 - \\boldsymbol x_N\\vert\\vert^2\\\\  \\vert\\vert\\boldsymbol X_2 - \\boldsymbol x_1\\vert\\vert^2 &amp; \\cdots &amp; \\vert\\vert\\boldsymbol X_2 - \\boldsymbol x_N\\vert\\vert^2\\\\  \\vdots&amp;\\ddots&amp;\\vdots\\\\  \\vert\\vert\\boldsymbol X_n - \\boldsymbol x_1\\vert\\vert^2 &amp; \\cdots &amp; \\vert\\vert\\boldsymbol X_n - \\boldsymbol x_N\\vert\\vert^2\\\\\\end{matrix}\\right]\\in \\mathbb R^{n\\times N}\\\\\\boldsymbol K_2 &amp;= var\\cdot e^{-0.5\\cdot \\vert\\vert\\boldsymbol d_1\\vert\\vert^2} + (s_\\alpha + 10^{-8})\\boldsymbol I_{n\\times n}\\\\\\boldsymbol K_3 &amp;= var\\cdot e^{-0.5\\cdot \\vert\\vert\\boldsymbol d_2\\vert\\vert^2}\\\\\\end{aligned}\\]é¢„æµ‹è¾“å‡ºçš„å€¼ä¸º\\[\\begin{aligned}\\boldsymbol Y &amp;= \\boldsymbol K_3 \\cdot \\boldsymbol \\alpha\\\\std &amp;= \\sqrt{diag[\\boldsymbol K_2-\\boldsymbol K_3\\boldsymbol K^{-1}\\boldsymbol K_3^T]}\\end{aligned}\\]4. å‚è€ƒæ–‡çŒ®[1] bingjianing. å¤šå…ƒé«˜æ–¯åˆ†å¸ƒï¼ˆThe Multivariate normal distributionï¼‰[2] è®ºæ™º. å›¾æ–‡è¯¦è§£é«˜æ–¯è¿‡ç¨‹ï¼ˆä¸€ï¼‰â€”â€”å«ä»£ç [3] æˆ‘èƒ½è¯´ä»€ä¹ˆå¥½. é€šä¿—ç†è§£é«˜æ–¯è¿‡ç¨‹åŠå…¶åº”ç”¨[4] çŸ³æºª. å¦‚ä½•é€šä¿—æ˜“æ‡‚åœ°ä»‹ç» Gaussian Process[5] é’±é»˜åŸ. å¤šå…ƒé«˜æ–¯åˆ†å¸ƒå®Œå…¨è§£æ[6] li Eta. å¦‚ä½•é€šä¿—æ˜“æ‡‚åœ°ä»‹ç» Gaussian Processï¼Ÿ[7] è“¦é£æ˜ŸåŸ. Gaussian process çš„æœ€åä¸€æ­¥â€”â€”è¯è¯´è¶…å‚å­¦ä¹ [7] è“¦é£æ˜ŸåŸ. ã€ç­”ç–‘è§£æƒ‘IIIã€‘è¯´è¯´é«˜æ–¯è¿‡ç¨‹ä¸­çš„å¤šç»´è¾“å…¥å’Œå¤šç»´è¾“å‡º"
  },
  
  {
    "title": "VSCodeéƒ¨ç½²Rå¼€å‘ç¯å¢ƒ",
    "url": "/posts/vscode-R/",
    "categories": "Tutorial, Coding",
    "tags": "vscode, r",
    "date": "2021-01-13 22:22:49 +0800",
    





    
    "snippet": "æœ¬æ–‡ä»‹ç»äº†åŸºäº VSCode çš„ R å¼€å‘ç¯å¢ƒçš„æ­å»ºæ–¹æ³•ã€‚  1. ç®€ä»‹  2. ä¸‹è½½ä¸å®‰è£…  3. é…ç½® R å¼€å‘ç¯å¢ƒ          3.1. å®‰è£… R è¯­è¨€      3.2. å®‰è£… LanguageServer      3.3. å®‰è£…æ‰©å±•      3.4. æµ‹è¯• R ç¯å¢ƒ        4. å®‰è£… R ç¨‹è¾‘åŒ…  5. å‚è€ƒæ–‡çŒ®1. ç®€ä»‹VSCodeæ˜¯å¾®è½¯æ¨å‡ºçš„ä¸€æ¬¾è·¨å¹³å°å¼€æºç¼–è¾‘...",
    "content": "æœ¬æ–‡ä»‹ç»äº†åŸºäº VSCode çš„ R å¼€å‘ç¯å¢ƒçš„æ­å»ºæ–¹æ³•ã€‚  1. ç®€ä»‹  2. ä¸‹è½½ä¸å®‰è£…  3. é…ç½® R å¼€å‘ç¯å¢ƒ          3.1. å®‰è£… R è¯­è¨€      3.2. å®‰è£… LanguageServer      3.3. å®‰è£…æ‰©å±•      3.4. æµ‹è¯• R ç¯å¢ƒ        4. å®‰è£… R ç¨‹è¾‘åŒ…  5. å‚è€ƒæ–‡çŒ®1. ç®€ä»‹VSCodeæ˜¯å¾®è½¯æ¨å‡ºçš„ä¸€æ¬¾è·¨å¹³å°å¼€æºç¼–è¾‘å™¨ï¼Œå‡­å€Ÿå¼ºå¤§çš„ç¬¬ä¸‰æ–¹æ’ä»¶æ”¯æŒC/C++ã€Pythonã€Javaç­‰ä¼—å¤šè¯­è¨€ï¼Œä½“ç§¯å°å·§åŠŸèƒ½ä¸°å¯Œï¼Œé€‚åˆå°å‹å·¥ç¨‹é¡¹ç›®çš„å¼€å‘è°ƒè¯•ã€‚ä¸‹é¢ç®€å•ä»‹ç»VSCodeå¼€å‘ç¯å¢ƒçš„éƒ¨ç½²ã€‚æ³¨æ„ï¼ŒVSCodeä»…ä»…æ˜¯ä¸€ä¸ªå‰ç«¯æ–‡æœ¬ç¼–è¾‘å™¨ï¼Œæœ¬è´¨ä¸Šä¸è®°äº‹æœ¬å¹¶æ— ä¸åŒï¼Œåœ¨æ²¡æœ‰æ’ä»¶å’Œç¼–è¯‘å™¨çš„æƒ…å†µä¸‹åªèƒ½è¿›è¡Œæ–‡ä»¶çš„è¯»å†™ï¼Œå¹¶ä¸èƒ½è¿›è¡Œæºç¨‹åºç¼–è¯‘è°ƒè¯•ã€‚ä¸ä¹‹ç›¸å¯¹ï¼Œå¾®è½¯è‡ªå®¶çš„Visual Studioæ˜¯ä¸€ä¸ªé›†æˆå¼€å‘ç¯å¢ƒï¼ˆIDEï¼‰ï¼Œä¸‹è½½å®‰è£…åå¯ä»¥ç›´æ¥è¿›è¡Œæºç¨‹åºçš„ç¼–è¯‘è°ƒè¯•ã€‚ä¸€ä¸ªç°ä»£ç¼–è¯‘å™¨çš„ä¸»è¦å·¥ä½œæµç¨‹å¦‚ä¸‹ï¼š æºä»£ç  (source code) =&gt; é¢„å¤„ç†å™¨ (preprocessor) =&gt; ç¼–è¯‘å™¨ (compiler) =&gt; æ±‡ç¼–ç¨‹åº (assembler) =&gt; ç›®æ ‡ä»£ç  (object code) =&gt; é“¾æ¥å™¨ (Linker) =&gt; å¯æ‰§è¡Œæ–‡ä»¶ (executables)ã€‚VSCode æœ¬èº«ä»…ä»…æ˜¯ä¸€ä¸ªæºä»£ç ç¼–è¾‘å™¨ã€‚ä¸è¿‡ï¼Œå½“é…åˆæ’ä»¶å’Œç¼–è¯‘å™¨åï¼ŒVSCodeä¹Ÿèƒ½å¤Ÿå®Œæˆç»å¤§éƒ¨åˆ†çš„æºä»£ç ç¼–è¯‘è°ƒè¯•å·¥ä½œã€‚2. ä¸‹è½½ä¸å®‰è£…å‰å¾€å®˜ç½‘ï¼ˆhttps://code.visualstudio.comï¼‰ä¸‹è½½å®‰è£…ï¼Œæ”¯æŒWindowsã€Linuxå’ŒMacç³»ç»Ÿã€‚å¯ä»¥ä¸‹è½½å®‰è£…ç‰ˆï¼Œä¹Ÿå¯ä»¥é€‰æ‹©è§£å‹å³ç”¨çš„ç»¿è‰²ç‰ˆã€‚åŒºåˆ«åœ¨äºå®‰è£…æ¿ä¼šå‘ç³»ç»Ÿè·¯å¾„å†™å…¥é…ç½®ä¿¡æ¯ï¼Œç»¿è‰²ç‰ˆæ‰€æœ‰çš„ä¾èµ–ä¿¡æ¯å’Œé…ç½®ä¿¡æ¯å‡å­˜æ”¾äºä¸€ä¸ªç›®å½•ä¸­ã€‚å®‰è£…ç‰ˆå¯ä»¥åœ¨çº¿ä¸‹è½½æ›´æ–°å’Œå®‰è£…æ›´æ–°ï¼Œç»¿è‰²ç‰ˆåªèƒ½ä¸‹è½½æ–°ç‰ˆæœ¬çš„ç»¿è‰²å®‰è£…åŒ…è§£å‹åè¦†ç›–æ¥æ›´æ–°ã€‚å®‰è£…å®Œæˆåï¼Œç‚¹å‡»å·¦ä¾§çš„æ‰©å±•å•†åº—ï¼Œæœç´¢chineseï¼Œä¸‹è½½ä¸­æ–‡ç®€ä½“æ±‰åŒ–åŒ…ï¼ˆå¯èƒ½éœ€è¦ç¿»å¢™ï¼‰ã€‚å®‰è£…å®Œæˆåé‡å¯VSCodeï¼Œå³å¯å‘ç°æ‰€æœ‰ç•Œé¢å‡å·²æ±‰åŒ–ã€‚æ³¨æ„ï¼š      VSCodeåŸºäºæ–‡ä»¶å¤¹è¿›è¡Œç¼–è¯‘å’Œè°ƒè¯•ï¼Œæ¯ä¸ªé¡¹ç›®å¿…é¡»å¯¹åº”ä¸€ä¸ªæ–‡ä»¶å¤¹ä½œä¸ºå·¥ä½œè·¯å¾„ï¼ˆæ ¹ç›®å½•ï¼‰ï¼Œæ ¹ç›®å½•å†…åŒ…å«ä¸€ä¸ª.vscodeæ–‡ä»¶å¤¹å­˜æ”¾é…ç½®æ–‡ä»¶ï¼ˆjsonæ ¼å¼ï¼‰ï¼›        VSCodeé»˜è®¤ç¼–ç ä¸ºUTF8ï¼Œå¯¹ä¸­æ–‡æ”¯æŒå¹¶ä¸å®Œç¾ï¼Œç‰¹åˆ«æ˜¯æ‰“å¼€å·²æœ‰çš„åŒ…å«ä¸­æ–‡æ³¨é‡Šçš„æºä»£ç æ–‡ä»¶æ—¶è¦ç‰¹åˆ«æ³¨æ„ï¼Œå¯èƒ½å¯¼è‡´ä¸­æ–‡ä¹±ç ï¼Œä¸”åœ¨ä¿å­˜æ–‡ä»¶æ—¶å¼¹å‡ºè­¦å‘Šã€‚å› æ­¤ï¼Œå¯¹äºåŒ…å«ä¸­æ–‡æ³¨é‡Šçš„å·²æœ‰æ–‡ä»¶ï¼Œä¸€èˆ¬éœ€è¦æ–°å»ºä¸€ä¸ªç©ºç™½æ–‡ä»¶ï¼Œä¿å­˜ä¸ºUTF8ç¼–ç æ ¼å¼ï¼Œç„¶åé‡æ–°è¾“å…¥ä¸­æ–‡æ³¨é‡Šéƒ¨åˆ†å†è¿›è¡Œä¿å­˜ã€‚  3. é…ç½® R å¼€å‘ç¯å¢ƒæ³¨æ„ï¼ŒR çš„å¼€å‘ç¯å¢ƒè¿˜å¯ä»¥é€‰ç”¨ RStudioã€‚3.1. å®‰è£… R è¯­è¨€å‰å¾€å®˜ç½‘ï¼ˆhttps://www.r-project.org/ï¼‰ ä¸‹è½½Rè¯­è¨€çš„å®‰è£…åŒ…ã€‚ç„¶åé€‰æ‹©ä»»æ„ä¸€ä¸ªä¸­å›½é•œåƒï¼ˆæ¯”å¦‚ç¬¬ä¸€ä¸ªæ¸…åé•œåƒï¼‰ç„¶åæ ¹æ®è‡ªå·±çš„å¹³å°é€‰æ‹©å®‰è£…åŒ…ï¼ˆæ¯”å¦‚ Windowsï¼‰é¦–æ¬¡å®‰è£…ï¼Œè¯·é€‰æ‹© baseæœ€åç‚¹å‡»ä¸‹è½½å®‰è£…åŒ…ï¼Œä¸‹è½½å®Œæ¯•åå®‰è£…å³å¯ã€‚3.2. å®‰è£… LanguageServerLanguageServer æ˜¯ R è¯­è¨€ç«¯é…åˆ VSCode è¿›è¡Œå¯è§†åŒ–çš„ Language Server Protocol æ’ä»¶ã€‚  LSP æ˜¯Language Server Protocol çš„ç¼©å†™ã€‚ç®€å•æ¥è¯´ï¼ŒLSP ä¸ºä¸åŒè¯­è¨€åœ¨ä¸åŒç¼–è¾‘å™¨æˆ–IDE ä¸­çš„è‡ªåŠ¨è¡¥å…¨ã€æŸ¥æ‰¾å®šä¹‰ã€æ‚¬åœæŸ¥çœ‹å‡½æ•°æ–‡æ¡£ç­‰åŠŸèƒ½æ­å»ºäº†æ¡¥æ¢ï¼Œä½¿å¾—å¼€å‘è€…å¯ä»¥å‡å°‘é’ˆå¯¹ä¸åŒè¯­è¨€å’Œä¸åŒç¼–è¾‘å™¨çš„é‡å¤å¼€å‘ã€‚å¯¹ç”¨æˆ·æ¥è¯´ï¼Œä½¿ç”¨è¿™ä¸€åŠŸèƒ½æ„å‘³ç€å¯ä»¥è·å¾—æ›´å¥½çš„è‡ªåŠ¨è¡¥å…¨ã€æŸ¥çœ‹å¸®åŠ©æ–‡æ¡£ç­‰ç‰¹æ€§ã€‚ç”±äºLSP æœ¬èº«ä¹Ÿæ˜¯å¾®è½¯çš„é¡¹ç›®ï¼Œåœ¨VSCode ä¸­çš„ä½¿ç”¨ä½“éªŒä¹Ÿä¼šæ›´å¥½ä¸€äº›ã€‚R LSP Client ä¾¿æ˜¯R è¯­è¨€åœ¨è¿™æ–¹é¢çš„å®ç°ï¼Œé€šè¿‡å®‰è£…è¿™ä¸ªæ’ä»¶ï¼Œå¯ä»¥å¼¥è¡¥è‡ªåŠ¨è¡¥å…¨ç­‰åŠŸèƒ½çš„ä¸è¶³ã€‚å‰å¾€ R å®‰è£…çš„è·¯å¾„ï¼Œè¿›å…¥ bin æ–‡ä»¶å¤¹ï¼ˆæ¯”å¦‚ C:\\Program Files\\R\\R-4.0.3\\binï¼‰ï¼ŒåŒå‡» R.exe å¯åŠ¨ R ç¯å¢ƒã€‚è¾“å…¥install.packages(\"languageserver\")æç¤ºé€‰æ‹©ä¸€ä¸ªé•œåƒï¼ˆå¿½ç•¥ R å®˜æ–¹é‚£è¹©è„šçš„ä¸­æ–‡ï¼‰ï¼Œé€‰æ‹©ä¸­å›½é•œåƒåï¼ˆæ¯”å¦‚åœ¨åŒ—äº¬å°±é€‰æ‹© China,Beijingï¼‰å¼€å§‹ç–¯ç‹‚ä¸‹è½½ä¾èµ–åŒ…ã€‚ç­‰å¾…ä¸‹è½½å®Œæ¯•å³å¯ã€‚3.3. å®‰è£…æ‰©å±•å¯èƒ½éœ€è¦ç¿»å¢™ã€‚åœ¨ VSCode çš„æ‰©å±•åˆ—è¡¨ä¸­æœç´¢å¹¶å®‰è£… R å’Œ R LSP Client ä¸¤ä¸ªæ‰©å±•ã€‚å®‰è£…å®Œæ¯•åï¼Œåˆ†åˆ«ç‚¹å‡»ä¸¤ä¸ªæ‰©å±•çš„é½¿è½®æŒ‰é’®ï¼Œè¿›å…¥æ‰©å±•è®¾ç½®ã€‚é¦–å…ˆç¡®å®šå®‰è£… R çš„ R.exe æ‰€åœ¨çš„è·¯å¾„ï¼Œæ¯”å¦‚C:\\Program Files\\R-4.0.3\\bin\\R.exeå¯¹äº R æ‰©å±•ï¼Œè®¾ç½® R â€º Rpath: Windows ä¸ºå®‰è£… R çš„ R.exe æ‰€åœ¨çš„è·¯å¾„ã€‚å¯¹äº R æ‰©å±•ï¼Œè®¾ç½® R â€º Rterm: Windows ä¸ºå®‰è£… R çš„ R.exe æ‰€åœ¨çš„è·¯å¾„ã€‚å¯¹äº R LSP Client æ‰©å±•ï¼ŒåŒæ ·è®¾ç½® R â€º Rpath: Windows ä¸ºå®‰è£… R çš„ R.exe æ‰€åœ¨çš„è·¯å¾„ã€‚å®‰è£… R Debugger æ‰©å±•ï¼Œç”¨ä»¥æ”¯æŒ VSCode å†…ç›´æ¥æ–­ç‚¹è°ƒè¯•ã€‚è‹¥ä¸å®‰è£…ä¹Ÿå¯ä»¥ï¼Œåªæ˜¯åªèƒ½ç›´æ¥é€šè¿‡å‰é¢å®‰è£…çš„ R æ‰©å±•ç›´æ¥è¿è¡Œæ•´ä¸ª R æ–‡ä»¶ï¼ˆè§ä¸‹é¢çš„ç« èŠ‚ã€æµ‹è¯• R ç¯å¢ƒã€‘ï¼‰ã€‚å®‰è£…å®Œæˆåï¼Œä»ã€è¿è¡Œå’Œè°ƒè¯•ã€‘ç•Œé¢ä¸­ï¼Œé€‰æ‹© R Debuggerï¼Œç„¶åé€‰æ‹© Debug R-File å³å¯è¿›è¡Œ R æ–‡ä»¶è°ƒè¯•ã€‚å¦å¤–ï¼Œè¯¥æ’ä»¶ä¾èµ– R æ’ä»¶åŒ… vscDebugger ï¼Œåœ¨ Windows ä¸‹å¯é€šé€šè¿‡ Ctrl+Shift+P æ‰“å¼€å‘½ä»¤é¢æ¿ï¼ˆMac ä¸‹ä¸º â‡§ + âŒ˜ + P ï¼‰ï¼Œç„¶åè¾“å…¥R debugger update or install required packageé€‰ä¸­åå®‰è£…å³å¯ã€‚3.4. æµ‹è¯• R ç¯å¢ƒæ‰“å¼€ä¸€ä¸ª R æ–‡ä»¶ï¼Œéšä¾¿å†™ä¸ª1/3å³ä¸Šè§’å‡ºç°ä¸€ä¸ªæ–°å›¾æ ‡æŒ‰é’®ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œç‚¹å‡»å³å¯è¿è¡Œ R æ–‡ä»¶ã€‚4. å®‰è£… R ç¨‹è¾‘åŒ…å’Œå‰é¢å®‰è£… LanguageServer ç±»ä¼¼ï¼Œå¯ä»¥ä» R æä¾›çš„ R ç¯å¢ƒæ¥å®‰è£…ï¼Œä¹Ÿå¯ä»¥éšä¾¿æ‰“å¼€ä¸€ä¸ª .r æ–‡ä»¶ï¼Œç‚¹å‡»å³ä¸Šè§’æŒ‰é’®æˆ–è€…å¿«æ·é”® Ctrl+Shift+S è¿›å…¥ R è¿è¡Œç¯å¢ƒå®‰è£…ã€‚è¾“å…¥install.packages(\"survminer\")æç¤º--- åœ¨æ­¤é€£ç·šéšæ®µæ—¶è¯·é€‰ç”¨CRANçš„é¡å­ ---ç¨ç­‰ç‰‡åˆ»åå¼¹å‡ºé€‰æ‹© CRAN é•œåƒçš„åˆ—è¡¨ï¼Œé€‰æ‹©ä¸€ä¸ªä¸­å›½é•œåƒï¼Œæ¯”å¦‚åŒ—äº¬é•œåƒç‚¹å‡»ç¡®å®šåå°±ä¼šè‡ªåŠ¨å¼€å§‹è¿›è¡Œå®‰è£…æ“ä½œã€‚5. å‚è€ƒæ–‡çŒ®æ— ã€‚"
  },
  
  {
    "title": "PyTorchåŸºç¡€ï¼ˆéšæœºæ•°ç§å­ï¼‰",
    "url": "/posts/pytorch-basic-2/",
    "categories": "Tutorialï¼ŒCoding",
    "tags": "python, deep learning",
    "date": "2021-01-04 15:22:19 +0800",
    





    
    "snippet": "æœ¬æ–‡ä¸»è¦è®°å½•è‡ªå·±å­¦ä¹  PyTorch è¿‡ç¨‹ä¸­æ¶‰åŠçš„ä¸€äº›åŸºç¡€çŸ¥è¯†ã€‚  1. éšæœºæ•°          1.1. éšæœºæ•°äº§ç”Ÿ      1.2. éšæœºæ•°ç§å­        2. å‚è€ƒæ–‡çŒ®1. éšæœºæ•°1.1. éšæœºæ•°äº§ç”Ÿéšæœºæ•°å¹¿æ³›åº”ç”¨åœ¨ç§‘å­¦ç ”ç©¶ï¼Œä½†æ˜¯è®¡ç®—æœºæ— æ³•äº§ç”ŸçœŸæ­£çš„éšæœºæ•°ï¼Œä¸€èˆ¬æˆä¸ºä¼ªéšæœºæ•°ã€‚å®ƒçš„äº§ç”Ÿè¿‡ç¨‹ï¼šç»™å®šä¸€ä¸ªéšæœºç§å­ï¼ˆä¸€èˆ¬æ˜¯ä¸€ä¸ªæ­£æ•´æ•°ï¼‰ï¼Œæ ¹æ®éšæœºç®—æ³•å’Œç§å­äº§ç”Ÿéšæœºåºåˆ—ã€‚ç»™å®šç›¸åŒçš„éšæœºç§å­ï¼Œ...",
    "content": "æœ¬æ–‡ä¸»è¦è®°å½•è‡ªå·±å­¦ä¹  PyTorch è¿‡ç¨‹ä¸­æ¶‰åŠçš„ä¸€äº›åŸºç¡€çŸ¥è¯†ã€‚  1. éšæœºæ•°          1.1. éšæœºæ•°äº§ç”Ÿ      1.2. éšæœºæ•°ç§å­        2. å‚è€ƒæ–‡çŒ®1. éšæœºæ•°1.1. éšæœºæ•°äº§ç”Ÿéšæœºæ•°å¹¿æ³›åº”ç”¨åœ¨ç§‘å­¦ç ”ç©¶ï¼Œä½†æ˜¯è®¡ç®—æœºæ— æ³•äº§ç”ŸçœŸæ­£çš„éšæœºæ•°ï¼Œä¸€èˆ¬æˆä¸ºä¼ªéšæœºæ•°ã€‚å®ƒçš„äº§ç”Ÿè¿‡ç¨‹ï¼šç»™å®šä¸€ä¸ªéšæœºç§å­ï¼ˆä¸€èˆ¬æ˜¯ä¸€ä¸ªæ­£æ•´æ•°ï¼‰ï¼Œæ ¹æ®éšæœºç®—æ³•å’Œç§å­äº§ç”Ÿéšæœºåºåˆ—ã€‚ç»™å®šç›¸åŒçš„éšæœºç§å­ï¼Œè®¡ç®—æœºäº§ç”Ÿçš„éšæœºæ•°åˆ—æ˜¯ä¸€æ ·çš„ï¼ˆè¿™ä¹Ÿè®¸æ˜¯ä¼ªéšæœºçš„åŸå› ï¼‰ã€‚æ¯”å¦‚ï¼šimport randomprint(random.random()) # 0.6347616556381207print(random.random()) # 0.17717483228053954random.seed(1024)print(random.random()) # 0.7970515714521261print(random.random()) # 0.4834988702079559random.seed(1024)print(random.random()) # 0.7970515714521261print(random.random()) # 0.4834988702079559å¯ä»¥çœ‹åˆ°ï¼Œåœ¨è®¾ç½®éšæœºæ•°ç§å­åï¼Œäº§ç”Ÿéšæœºæ•°çš„è¿‡ç¨‹å¯ä»¥å®Œå…¨é‡å¤ï¼Œè¿™ç§ç‰¹æ€§éå¸¸é€‚åˆæ¯”å¦‚ç¥ç»ç½‘ç»œæƒå€¼åˆå§‹åŒ–çš„å¤ç°ã€‚1.2. éšæœºæ•°ç§å­éšæœºç§å­æ˜¯é’ˆå¯¹éšæœºæ–¹æ³•è€Œè¨€çš„ã€‚å¸¸è§çš„éšæœºæ–¹æ³•æœ‰ç”Ÿæˆéšæœºæ•°ï¼Œä»¥åŠå…¶ä»–çš„åƒéšæœºæ’åºä¹‹ç±»çš„ï¼Œåè€…æœ¬è´¨ä¸Šä¹Ÿæ˜¯åŸºäºç”Ÿæˆéšæœºæ•°æ¥å®ç°çš„ã€‚åœ¨æ·±åº¦å­¦ä¹ ä¸­ï¼Œæ¯”è¾ƒå¸¸ç”¨çš„éšæœºæ–¹æ³•çš„åº”ç”¨æœ‰ï¼šç½‘ç»œçš„éšæœºåˆå§‹åŒ–ï¼Œè®­ç»ƒé›†çš„éšæœºæ‰“ä¹±ç­‰ã€‚å½“ç”¨æˆ·æœªæŒ‡å®šéšæœºç§å­ï¼Œç³»ç»Ÿé»˜è®¤éšæœºç”Ÿæˆï¼Œä¸€èˆ¬ä¸ç³»ç»Ÿå½“å‰æ—¶é—´æœ‰å…³ã€‚ç”¨æˆ·æŒ‡å®šéšæœºç§å­åï¼Œä½¿ç”¨éšæœºå‡½æ•°äº§ç”Ÿçš„éšæœºæ•°å¯ä»¥å¤ç°ã€‚ç§å­ç¡®å®šåï¼Œæ¯æ¬¡ä½¿ç”¨éšæœºå‡½æ•°ç›¸å½“äºä»éšæœºåºåˆ—å»è·å–éšæœºæ•°ï¼Œæ¯æ¬¡è·å–çš„éšæœºæ•°æ˜¯ä¸åŒçš„ã€‚ä½¿ç”¨ PyTorch å¤ç°æ•ˆæœæ—¶ï¼Œæ€»æ˜¯æ— æ³•åšåˆ°å®Œå…¨çš„å¤ç°ã€‚åŒä¸€ä»½ä»£ç è¿è¡Œä¸¤æ¬¡ï¼Œæœ‰æ—¶ç»“æœå·®å¼‚å¾ˆå¤§ã€‚è¿™æ˜¯ç”±äºç®—æ³•ä¸­çš„éšæœºæ€§å¯¼è‡´çš„ã€‚è¦æƒ³æ¯æ¬¡è·å¾—çš„ç»“æœä¸€è‡´ï¼Œå¿…é¡»å›ºå®šä½éšæœºç§å­ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦æ‰¾åˆ°ç®—æ³•åœ¨å“ªé‡Œä½¿ç”¨äº†éšæœºæ€§ï¼Œå†ç›¸åº”çš„å›ºå®šä½éšæœºç§å­ã€‚import numpy as npimport randomimport osimport torchdef seed_torch(seed=1024):    random.seed(seed)    os.environ['PYTHONHASHSEED'] = str(seed)    np.random.seed(seed)    torch.manual_seed(seed) # è®¾ç½® cpu çš„éšæœºæ•°ç§å­    torch.cuda.manual_seed(seed) # å¯¹äºå•å¼ æ˜¾å¡ï¼Œè®¾ç½® gpu çš„éšæœºæ•°ç§å­    torch.cuda.manual_seed_all(seed) # å¯¹äºå¤šå¼ æ˜¾å¡ï¼Œè®¾ç½®æ‰€æœ‰ gpu çš„éšæœºæ•°ç§å­    torch.backends.cudnn.benchmark = False    torch.backends.cudnn.deterministic = Trueseed_torch()å…¶ä¸­      torch.backends.cudnn.enabledï¼šcuDNN ä½¿ç”¨éç¡®å®šæ€§ç®—æ³•ã€‚å¦‚æœè¯¥å‚æ•°è®¾ç½®ä¸º Trueï¼Œè¯´æ˜è®¾ç½®ä¸ºä½¿ç”¨ä½¿ç”¨éç¡®å®šæ€§ç®—æ³•ï¼›        torch.backends.cudnn.benchmarkï¼šåœ¨ torch.backends.cudnn.enabled = True çš„å‰æä¸‹å°†è¯¥å‚æ•°è®¾ç½®ä¸º Trueï¼Œå¯ä»¥è®©ç¨‹åºåœ¨å¼€å§‹æ—¶èŠ±è´¹ä¸€ç‚¹é¢å¤–æ—¶é—´ï¼Œè‡ªåŠ¨ä¸ºæ•´ä¸ªç½‘ç»œçš„æ¯ä¸ªå·ç§¯å±‚æœç´¢æœ€é€‚åˆå®ƒçš„å·ç§¯å®ç°ç®—æ³•ï¼Œæ¥è¾¾åˆ°ä¼˜åŒ–è¿è¡Œæ•ˆç‡çš„ç›®çš„ã€‚ä½†è¿™ä¼šå¯¼è‡´ç½‘ç»œçš„è®­ç»ƒå­˜åœ¨ä¸€å®šçš„éšæœºæ€§ï¼Œå¯¼è‡´è®­ç»ƒç»“æœå­˜åœ¨ä¸€äº›å¾®å°çš„ä¸ç¡®å®šã€‚ä¸€èˆ¬æ¥è®²ï¼Œåº”è¯¥éµå¾ªä»¥ä¸‹å‡†åˆ™ï¼š          å¦‚æœç½‘ç»œçš„è¾“å…¥æ•°æ®ç»´åº¦æˆ–ç±»å‹ä¸Šå˜åŒ–ä¸å¤§ï¼Œè®¾ç½® torch.backends.cudnn.benchmark = True å¯ä»¥å¢åŠ è¿è¡Œæ•ˆç‡ï¼›      å¦‚æœç½‘ç»œçš„è¾“å…¥æ•°æ®åœ¨æ¯æ¬¡ iteration éƒ½å˜åŒ–çš„è¯ï¼Œä¼šå¯¼è‡´ cnDNN æ¯æ¬¡éƒ½ä¼šå»å¯»æ‰¾ä¸€éæœ€ä¼˜é…ç½®ï¼Œè¿™æ ·åè€Œä¼šé™ä½è¿è¡Œæ•ˆç‡ã€‚        https://blog.csdn.net/byron123456sfsfsfa/article/details/96003317https://www.cnblogs.com/wanghui-garcia/p/11514502.html  torch.backends.cudnn.deterministicï¼štorch.backends.cudnn.benchmark = Trueä¼šæå‡è®¡ç®—é€Ÿåº¦ï¼Œä½†æ˜¯ç”±äºè®¡ç®—ä¸­æœ‰éšæœºæ€§ï¼Œæ¯æ¬¡ç½‘ç»œå‰é¦ˆç»“æœç•¥æœ‰å·®å¼‚ã€‚æ¯”å¦‚è®­ç»ƒCNNçš„æ—¶å€™ï¼Œå‘ç°æ¯æ¬¡è·‘å‡ºæ¥å°æ•°ç‚¹åå‡ ä½ä¼šæœ‰ä¸ä¸€æ ·ã€‚epoch è¶Šå¤šï¼Œè¯¯å·®å°±è¶Šå¤šï¼Œè™½ç„¶ç»“æœå¤§è‡´ä¸Šä¸€æ ·ï¼Œä½†æ˜¯å¼ºè¿«ç—‡çœŸçš„ä¸èƒ½å¿ã€‚å¦‚æœæƒ³è¦é¿å…è¿™ç§ç»“æœæ³¢åŠ¨ï¼Œå¯ä»¥è®¾ç½® torch.backends.cudnn.deterministic = True è¿™æ ·è°ƒç”¨çš„ CuDNN çš„å·ç§¯æ“ä½œå°±æ˜¯æ¯æ¬¡ä¸€æ ·çš„äº†ã€‚  é«˜æ–¯å®šç†. https://www.zhihu.com/question/67209417/answer/4185688792. å‚è€ƒæ–‡çŒ®[1] æ¢¦å¹¶ä¸é¥è¿œã€‚4.3Pythonæ•°æ®å¤„ç†ç¯‡ä¹‹Matplotlibç³»åˆ—(ä¸‰)â€”plt.plot().[2] æˆ‘çš„æ˜å¤©ä¸æ˜¯æ¢¦ã€‚pythonä½¿ç”¨matplotlib:subplotç»˜åˆ¶å¤šä¸ªå­å›¾."
  },
  
  {
    "title": "æ·±åº¦å­¦ä¹ æ–‡ç« é˜…è¯»ï¼ˆæ·±åº¦æµä½“å¯è§†åŒ–ï¼‰",
    "url": "/posts/deep-PDE/",
    "categories": "Academic, Paper",
    "tags": "deep learning, pde",
    "date": "2020-12-25 15:43:19 +0800",
    





    
    "snippet": "æœ¬æ–‡ä»‹ç»äº† 2020 å¹´ Raissi ç­‰å‘è¡¨åœ¨ Science ä¸Šçš„ä¸€ç§æ ¹æ®æµä½“å¯è§†åŒ–ç»“æœæ¥å­¦ä¹ é€Ÿåº¦å’Œå‹åŠ›åœºçš„æ–¹æ³•ï¼Œç§°ä¸ºéšæµä½“åŠ›å­¦ï¼ˆhidden fluid mechanicsï¼‰ã€‚  1. å¼•è¨€          1.1. ç½‘ç»œæ¡†æ¶      1.2. æŸå¤±å‡½æ•°      1.3. ä»¿çœŸ                  1.3.1. åœ†æŸ±ä½“é®æŒ¡çš„å¤–éƒ¨æµåŠ¨          1.3.2. ...",
    "content": "æœ¬æ–‡ä»‹ç»äº† 2020 å¹´ Raissi ç­‰å‘è¡¨åœ¨ Science ä¸Šçš„ä¸€ç§æ ¹æ®æµä½“å¯è§†åŒ–ç»“æœæ¥å­¦ä¹ é€Ÿåº¦å’Œå‹åŠ›åœºçš„æ–¹æ³•ï¼Œç§°ä¸ºéšæµä½“åŠ›å­¦ï¼ˆhidden fluid mechanicsï¼‰ã€‚  1. å¼•è¨€          1.1. ç½‘ç»œæ¡†æ¶      1.2. æŸå¤±å‡½æ•°      1.3. ä»¿çœŸ                  1.3.1. åœ†æŸ±ä½“é®æŒ¡çš„å¤–éƒ¨æµåŠ¨          1.3.2. 3D é¢…å†…åŠ¨è„‰ç˜¤çš„å®šé‡è¡€æµåŠ¨åŠ›å­¦                      2. ä¼˜åŠ¿  3. å‰ä½œ  4. å‚è€ƒæ–‡çŒ®  M. Raissi, A. Yazdaniå’ŒG. E. Karniadakis, Hidden fluid mechanics: Learning velocity and pressure fields from flow visualizations, Science, å· 367, æœŸ 6481, é¡µ 1026â€“1030, 2æœˆ 2020, doi: 10.1126/science.aaw4741.github: maziarraissi/HFM: Hidden fluid mechanics (version v1.0)SUPPLEMENTARY MATERIALS: science.sciencemag.org/content/367/6481/1026/suppl/DC1  Materials and Methods  Supplementary Text  Figs. S1 to S21  Tables S1 to S4  References (20â€“37)  Movies S1 and S21. å¼•è¨€æœ¬æ–‡é’ˆå¯¹ç‰©ç†å’Œç”Ÿç‰©ç³»ç»Ÿä¸­çš„æµä½“è¿åŠ¨å¯è§†åŒ–ã€‚ç†è®ºä¸Šï¼ŒNavier-Stokes æ–¹ç¨‹ï¼ˆNS æ–¹ç¨‹ï¼‰å¯ä»¥æè¿°æµåŠ¨æ¨¡å¼ï¼Œç›´æ¥ä½¿ç”¨å›¾åƒæ¥æå–é€Ÿåº¦å’Œå‹åŠ›åœºå¾ˆéš¾ã€‚  Navier Stokesï¼ˆçº³ç»´å¶ï¼æ–¯æ‰˜å…‹æ–¯ï¼‰æ–¹ç¨‹æ˜¯æµä½“åŠ›å­¦ä¸­æè¿°ç²˜æ€§ç‰›é¡¿æµä½“çš„æ–¹ç¨‹ï¼Œæ˜¯å°šæœªè¢«å®Œå…¨è§£å†³çš„æ–¹ç¨‹ï¼Œåªæœ‰å¤§çº¦ä¸€ç™¾å¤šä¸ªç‰¹è§£è¢«è§£å‡ºæ¥ï¼Œæ˜¯æœ€å¤æ‚çš„æ–¹ç¨‹ä¹‹ä¸€ã€‚NS æ–¹ç¨‹ç”±ä¸€ä¸ªè¿ç»­æ–¹ç¨‹å’Œä¸€ä¸ªåŠ¨é‡æ–¹ç¨‹ç»„æˆï¼ˆå˜æˆæ ‡é‡å°±æ˜¯ä¸‰ä¸ªï¼‰ã€‚ç›¸å…³æ–¹ç¨‹åŒ…æ‹¬ï¼š      è¿ç»­æ–¹ç¨‹ï¼šå•ä½æ—¶é—´å†…ï¼Œæµå…¥è´¨é‡-æµå‡ºè´¨é‡ç­‰äºè´¨é‡å¢é‡ï¼ˆè´¨é‡å®ˆæ’æ–¹ç¨‹çš„æµä½“è¡¨è¾¾ï¼‰    åŠ¨é‡æ–¹ç¨‹ï¼šæŸä¸€æ—¶åˆ»ï¼Œæ§åˆ¶ä½“ä¸­æ‰€æœ‰æµä½“å¾®å›¢çš„æ€»åŠ¨é‡éšæ—¶é—´å˜åŒ–ç‡=æ§åˆ¶ä½“ä¸­æ‰€æœ‰æµä½“å¾®å›¢å—åˆ°çš„åˆåŠ›ï¼ˆç‰›é¡¿ç¬¬äºŒå®šå¾‹çš„æµä½“è¡¨è¾¾ï¼‰    ä¼ è¾“æ–¹ç¨‹ï¼šåˆ†å­æ‰©æ•£+éšæµä¼ è¾“ï¼Œæµ“åº¦ä¸é€Ÿåº¦çš„å…³ç³»ï¼Ÿ    çŠ¶æ€æ–¹ç¨‹ï¼šè¡¨å¾æµä½“å‹å¼ºã€ æµä½“å¯†åº¦ã€ æ¸©åº¦ç­‰ä¸‰ä¸ªçƒ­åŠ›å­¦å‚é‡çš„å‡½æ•°å…³ç³»å¼ï¼Œ$p=p(\\rho T)$ æˆ– $U=U(\\rho T)$ æ¥è¡¨ç¤ºï¼Œå¼ä¸­ $p$ ä¸ºå‹å¼ºï¼›$\\rho$ ä¸ºæµä½“å¯†åº¦ï¼›$T$ ä¸ºçƒ­åŠ›å­¦æ¸©åº¦ï¼›$U$ ä¸ºå•ä½è´¨é‡æµä½“çš„å†…èƒ½ã€‚    æ³¨æ„ï¼Œæ–¹ç¨‹é€šè¿‡ç½‘æ ¼åˆ’åˆ†ï¼Œèƒ½è§£é™¤ç‰¹å®šåæ ‡ç‚¹çš„æµ“åº¦ï¼Œé€Ÿåº¦ï¼Œå‹åŠ›ä¿¡æ¯ã€‚ä½œè€…å¼€å‘äº†ä¸€ç§ç‰©ç†å…ˆéªŒçš„æ·±åº¦å­¦ä¹ æ¡†æ¶ï¼ˆa physics-informed deep-learning frameworkï¼‰ï¼Œèƒ½å¤Ÿå°† NS æ–¹ç¨‹ç¼–ç åˆ°ç¥ç»ç½‘ç»œä¸­ï¼Œè€Œä¸å‡ ä½•æˆ–åˆå§‹/è¾¹ç•Œæ¡ä»¶æ— å…³ã€‚åœ¨ä¸€äº›ç‰©ç†å’Œç”Ÿç‰©åŒ»å­¦é—®é¢˜ä¸­ï¼Œhidden fluid mechanicsï¼ˆHFMï¼‰ å¯ä»¥æå–å¯èƒ½æ— æ³•ç›´æ¥æµ‹é‡çš„å®šé‡ä¿¡æ¯ã€‚ HFM å¯¹äºä½åˆ†è¾¨ç‡å’Œè§‚æµ‹æ•°æ®ä¸­çš„å¤§é‡å™ªå£°å…·æœ‰é²æ£’æ€§ã€‚ä½œè€…è€ƒè™‘ä¸€ä¸ªåœ¨é€Ÿåº¦åœº $\\boldsymbol u(t,x,y,z)=[u(t,x,y,z),v(t,x,y,z),w(t,x,y,z)]$ ä¸­çš„æŸç§è¢«åŠ¨æ ‡é‡ $c(t,x,y,z)$ çš„ä¼ è¾“è¿‡ç¨‹ï¼Œè¯¥è¿‡ç¨‹æ»¡è¶³ä¸å¯å‹ç¼©çš„ NS æ–¹ç¨‹ã€‚è¢«åŠ¨æ ‡é‡å—æµåŠ¨å¹³æµå¹¶æ‰©æ•£ï¼Œä½†å¯¹æµä½“è¿åŠ¨æœ¬èº«æ²¡æœ‰åŠ¨åŠ›å­¦å½±å“ã€‚  passive scalarï¼ŒçƒŸé›¾å’ŒæŸ“æ–™æ˜¯è¢«åŠ¨æ ‡é‡çš„ä¸¤ä¸ªå…¸å‹ç¤ºä¾‹ã€‚å”¯ä¸€çš„è§‚æµ‹é‡æ˜¯ä¸€ç»„å•ç‚¹äº‘çš„ç¦»æ•£æ•°æ®ç»„æˆçš„ä¸”åŒ…å«å™ªå£°çš„æ—¶ç©ºåæ ‡ ${t^n,x^n,y^n,z^n,c^n}_{n=1}^N$ï¼Œä»–æ˜¯è¢«åŠ¨æ ‡é‡çš„æµ“åº¦ä¿¡æ¯ï¼ˆFig. 2Bï¼‰ã€‚è¿™ç»„æ—¶ç©ºåæ ‡ä¸€å…±åŒ…å« $N$ ä¸ªæ•°æ®ç‚¹ $(t^n,x^n,y^n,z^n,c^n)$ ä»¥åŠå…¶å¯¹åº”çš„æ ‡ç­¾ $c^n$ï¼Œå³åæ˜ äº†åœ¨æ—¶ç©ºåæ ‡ $(t^n,x^n,y^n,z^n,c^n)$ å¤„çš„æµ“åº¦ä¿¡æ¯ $c^n$ã€‚N ä¸€èˆ¬ä¸ºç½‘æ ¼èŠ‚ç‚¹æˆ–è€…ç½‘æ ¼ä¸­å¿ƒç‚¹ã€‚æœ‰äº†è¿™ç»„è§‚æµ‹é‡åï¼Œæˆ‘ä»¬å…³æ³¨äºæ¨ç†å‡ºæ„Ÿå…´è¶£çš„éšçŠ¶æ€é‡ï¼Œå³é€Ÿåº¦é‡ $u(t,x,y,z),v(t,x,y,z),w(t,x,y,z)$ å’Œå‹åŠ›é‡ $p(t,x,y,z)$ã€‚1.1. ç½‘ç»œæ¡†æ¶ä½œè€…è‡´åŠ›äºå¼€å‘å‡ºä¸€ä¸ªçµæ´»çš„æ¡†æ¶ï¼Œå¯ä»¥å¤„ç†å„ç±»æµåŠ¨åœºï¼Œæ¯”å¦‚è¿è½½å™¨é™„è¿‘çš„æµåŠ¨åœºï¼Œæˆ–è€…å¤§è„‘æˆ–ä¸»åŠ¨è„‰ç˜¤ä¸­çš„è¡€ç®¡æµåŠ¨åœºã€‚ç½‘ç»œæ¡†æ¶ï¼ŒåŒ…å«ä¸¤ä¸ªéƒ¨åˆ†ï¼Œå…±äº«å‚æ•°ï¼ˆå…¶å®åªæœ‰ç¬¬ä¸€éƒ¨åˆ†ç½‘ç»œæœ‰å‚æ•°ï¼‰ã€‚  ç½‘ç»œ1ï¼šæ— ç‰©ç†å…ˆéªŒçš„æ·±åº¦ç¥ç»ç½‘ç»œï¼ˆa physics-uninformed deep neural networkï¼‰ï¼Œç”¨æ¥è¿‘ä¼¼ä¸‹è¿°æ–¹ç¨‹\\[(t,x,y,z)\\mapsto (c,u,v,w,p)\\]æ ¹æ®æ•°å­¦æ–¹ç¨‹æ±‚è§£çš„ç»“æœï¼Œè¾“å…¥æ—¶ç©ºåæ ‡ï¼Œè¾“å‡ºå¯¹åº”çš„æµ“åº¦ï¼Œé€Ÿåº¦ï¼Œå‹åŠ›ã€‚ç”¨æ¥å­¦ä¹ æ–¹ç¨‹æœ¬èº«çš„è§„å¾‹ã€‚  ç½‘ç»œ2ï¼šç‰©ç†å…ˆéªŒçš„æ·±åº¦ç¥ç»ç½‘ç»œ\\[(t,x,y,z)\\mapsto (e_1,e_2,e_3,e_4,e_5)\\]å…¶ä¸­ï¼Œè¾“å‡º $e_1,e_2,e_3,e_4,e_5$ ä¸ºé‡‡ç”¨è‡ªåŠ¨å¾®åˆ†ï¼ˆautomatic differentiationï¼‰ç¼–ç çš„è¢«åŠ¨æ ‡é‡å’Œ NS æ–¹ç¨‹çš„è€¦åˆåŠ¨åŠ›å­¦ä¿¡æ¯ï¼ˆFig. 3C and fig. S1ï¼‰ï¼Œä¹Ÿå°±æ˜¯è¯´è¿™éƒ¨åˆ†æœ¬è´¨ä¸Šä¸æ˜¯ä¸€ä¸ªç¥ç»ç½‘ç»œï¼Œè€Œæ˜¯ç›´æ¥å†™å‡ºåå¾®åˆ†æ–¹ç¨‹ã€‚é€šè¿‡æœ€å°åŒ–è¿™äº”ä¸ªæ®‹å·®çš„èŒƒæ•°æ¥ä¿è¯ç›¸åº”æ–¹ç¨‹çš„æ»¡è¶³æ€§ã€‚  $e_1$ æ˜¯ä¼ é€’æ–¹ç¨‹çš„æ®‹å·®ï¼Œç”¨äºå»ºæ¨¡è¢«åŠ¨æ ‡é‡çš„åŠ¨åŠ›å­¦ç‰¹æ€§ï¼ˆå¯¹åº”æµ“åº¦ $c$ï¼Ÿï¼‰ï¼›  $e_2,e_3,e_4$ ä»£è¡¨ $x,y,z$ æ–¹å‘çš„åŠ¨é‡æ–¹ç¨‹ï¼ˆå¯¹åº”é€Ÿåº¦ $u,v,w$ï¼Ÿï¼‰ï¼›  $e_5$ æ˜¯è¿ç»­æ–¹ç¨‹çš„æ®‹å·®ï¼ˆå¯¹åº”å¯†åº¦ï¼Œç„¶åé€šè¿‡çŠ¶æ€æ–¹ç¨‹å¾—åˆ°å‹åŠ› $p$ï¼Ÿï¼‰ï¼›1.2. æŸå¤±å‡½æ•°ä¸Šè¿°ä¸¤ä¸ªæ·±åº¦ç¥ç»ç½‘ç»œå…±äº«å‚æ•°ï¼Œé€šè¿‡ä¸‹é¢çš„å‡æ–¹å·®æŸå¤±å‡½æ•°æ¥è®­ç»ƒ\\[MSE = \\frac{1}{N}\\sum_{n=1}^N\\vert c(t^n,x^n,y^n,z^n)-c^n \\vert^2 + \\sum_{i=1}^5\\frac{1}{M}\\sum_{m=1}^M\\vert e_i(t^m,x^m,y^m,z^m) \\vert^2\\]  ç¬¬ä¸€é¡¹å¯¹åº”è®­ç»ƒæ•°æ®ä¸­å„ä¸ªåæ ‡ç‚¹çš„æµ“åº¦ã€‚æµ“åº¦æ˜¯å¯¹æ–¹ç¨‹çš„æ•°å€¼è§£ç®—å¾—åˆ°çš„ï¼Œåªåœ¨ç½‘æ ¼ä¸­å¿ƒç‚¹æˆ–èŠ‚ç‚¹æœ‰å€¼ã€‚  ç¬¬äºŒé¡¹å¼ºåˆ¶æ‰§è¡Œäº† NS æ–¹ç¨‹å’Œä¼ è¾“æ–¹ç¨‹å¼ºåŠ åœ¨å„ä¸ªåæ ‡çš„ç»“æ„ã€‚ç”±äºæµä½“æ–¹ç¨‹åœ¨ä»»æ„ç‚¹å‡æ»¡è¶³ï¼Œå› æ­¤ç»™å®šä»»æ„æ—¶ç©ºåæ ‡ç‚¹ä½ç½®ï¼Œå‡å¯ä»¥æ ¹æ®æ–¹ç¨‹è®¡ç®—æ®‹å·®ã€‚å› æ­¤ç¬¬äºŒé¡¹ä¸­çš„åæ ‡ä¸è®­ç»ƒæ•°æ®çš„ä¸ªæ•°å’Œä½ç½®å¯ä»¥ä¸åŒï¼Œå³ç”¨æ¥æƒ©ç½šæ–¹ç¨‹çš„åæ ‡çš„ä¸ªæ•°å’Œä½ç½®æ˜¯ç”±äººä»¬å®Œå…¨æŒæ§çš„ï¼ˆMï¼‰ï¼Œä½†æ˜¯æµ“åº¦åªåœ¨æµ‹é‡ç‚¹ï¼ˆç½‘æ ¼ä¸­å¿ƒæˆ–è€…èŠ‚ç‚¹ï¼‰æœ‰æ•°æ®ï¼ˆNï¼‰ã€‚  the first term corresponds to the training data ${t^n,x^n,y^n,z^n}{n=1}^N$ on the concentration of the passive scalar, the last term enforces the structure imposed by the NS and transport equations at a finite set of residual points ${t^m,x^m,y^m,z^m}{m=1}^M$. The number and locations of these points at which we penalize the equations are in our full control, whereas the data on the concentration of the passive scalar are available at the measurement points.å°æ‰¹é‡æ¢¯åº¦ä¸‹é™ç®—æ³•åŠå…¶ç°ä»£å˜ä½“ï¼ˆä¾‹å¦‚Adamä¼˜åŒ–å™¨ï¼‰ä½¿æˆ‘ä»¬èƒ½å¤Ÿåœ¨å‡ ä¹ â€œæ— é™â€ å¤šä¸ªç‚¹å¤„å¯¹æ–¹ç¨‹è¿›è¡Œæƒ©ç½šã€‚æ›´è¿›ä¸€æ­¥ï¼Œå¦‚è¡¨ S2 å’Œ S3 æ‰€ç¤ºï¼Œé™¤äº†é€Ÿåº¦å’Œå‹åŠ›åœºï¼Œå…¶å®ƒæœªçŸ¥æµä½“å‚æ•°ä¹Ÿèƒ½ä»è¢«åŠ¨æ ‡é‡çš„å¯†åº¦æ•°æ®ä¸­ç›´æ¥å‘æ˜ï¼Œå¦‚é›·è¯ºæ•°ï¼ˆReï¼‰ã€ä½©å…‹è±æ•°ï¼ˆPeï¼‰ã€‚1.3. ä»¿çœŸ1.3.1. åœ†æŸ±ä½“é®æŒ¡çš„å¤–éƒ¨æµåŠ¨é¦–å…ˆè€ƒå¯Ÿå¤–éƒ¨æµåŠ¨ï¼Œä»¥ä¸€ä¸ªå…¸å‹çš„åœ¨åœ†æ¡¶ä¸­çš„ 2D æµåŠ¨é—®é¢˜ä¸ºèµ·ç‚¹ï¼Œ$Re=100, Pe=100$ï¼ˆå›¾ 2ï¼‰ã€‚åœ¨åœ†ç­’ä¸­æ”¾ä¸€ä¸ªåœ†æŸ±ä½“ï¼Œè€ƒå¯Ÿè¢«åœ†æŸ±éšœç¢æŒ¡ä½çš„æ¶²ä½“çš„æµåŠ¨ã€‚ç”¨è°±å…ƒæ³•ï¼ˆspectral element methodï¼‰åšä¸€ä¸ªç›´æ¥æ•°å€¼ä»¿çœŸï¼Œå¾—åˆ°è®­ç»ƒæ•°æ®ï¼ˆæµ“åº¦æ•£ç‚¹ï¼‰ï¼ŒåŒæ—¶æä¾›å‚è€ƒé€Ÿåº¦å’Œå‹åŠ›åœºç”¨ä»¥åˆ†æ HFM çš„å‡†ç¡®æ€§ã€‚è¢«åŠ¨æ ‡é‡åœ¨å·¦ä¾§è¾¹ç•Œå…¥å£è¢«æ³¨å…¥ï¼ˆå›¾ 2ï¼‰ï¼Œè®­ç»ƒåŸŸçš„è¾¹ç•Œçš„å½¢çŠ¶å’ŒèŒƒå›´ä»»æ„ï¼ˆå¦‚ä¸‹å›¾ä¸­çš„èŠ±ç“£å½¢çŠ¶ï¼‰ã€‚ä½†è®­ç»ƒåŸŸçš„é€‰æ‹©éœ€è¦æ³¨æ„ä»¥ä¸‹ä¸¤ç‚¹ï¼š  ç¬¬ä¸€ï¼Œè¢«åŠ¨æ ‡é‡çš„æµ“åº¦åœºå¿…é¡»å­˜åœ¨äºè®­ç»ƒåŸŸå†…ï¼Œä»¥ä¾¿å…¶ä¿¡æ¯å¯ç”¨äºæ¨æ–­å…¶ä»–æµé‡å˜é‡ï¼›  ç¬¬äºŒï¼Œä¸ºäº†é¿å…éœ€è¦ç»™é€Ÿåº¦æŒ‡å®šé€‚å½“çš„è¾¹ç•Œæ¡ä»¶ï¼Œå¿…é¡»æœ‰è¶³å¤Ÿçš„å‚ç›´äºè¾¹ç•Œçš„æµ“åº¦æ¢¯åº¦ ï¼ˆ$\\partial c/\\partial n\\neq 0$ï¼‰ï¼Œä¸ºäº†ä½¿è¯¥æ–¹æ³•èƒ½å¤Ÿæ¨æ–­å‡ºé€Ÿåº¦åœºçš„å•ä¸ªè§£ã€‚åœ¨è®­ç»ƒåŸŸçš„åŒºåŸŸä¸­ï¼Œæµ“åº¦åˆ†å¸ƒæœ¬èº«ä¸èƒ½æºå¸¦è¶³å¤Ÿçš„ä¿¡æ¯æ¥ä¿è¯è·å¾—å•ä¸ªé€Ÿåº¦åœºæˆ–å‹åŠ›åœºï¼Œå¯ä»¥ä¸ºç®—æ³•æä¾›é¢å¤–ä¿¡æ¯ï¼Œå¦‚é¢å¤–çš„é€Ÿåº¦æˆ–å‹åŠ›æ•°æ®ï¼ˆæ¯”å¦‚ï¼Œé’ˆå¯¹å£è¾¹ç•Œä¸Šçš„é€Ÿåº¦çš„æ— æ»‘ç§»è¾¹ç•Œæ¡ä»¶ï¼‰ã€‚ä½†æ˜¯åœ¨æœ¬æ–‡ä¸­ï¼Œé™¤äº†ä¸€ä¸ªå®éªŒï¼ˆå›¾ S8 å’Œ S9ï¼‰å¤–ï¼Œå…¶å®ƒå®éªŒä¸­æˆ‘ä»¬åªåŸºäºå°è£…åœ¨æµ“åº¦æ•°æ®å†…çš„ä¿¡æ¯ã€‚è¯¥ç®—æ³•çš„è¾“å…¥æœ¬è´¨ä¸Šæ˜¯æ•£å¸ƒåœ¨ç©ºé—´å’Œæ—¶é—´ä¸Šçš„è¢«åŠ¨æ ‡é‡æ•°æ®ç‚¹äº‘ï¼ˆå›¾2Bï¼‰ã€‚å¦‚ å›¾2 æ‰€ç¤ºï¼Œåœ¨åœ†æŸ±ä½“ä¸‹æ¸¸ä»»æ„çš„è®­ç»ƒåŸŸå†…ï¼Œç®—æ³•çš„é¢„æµ‹ä¸å‚è€ƒæ•°æ®ä¹‹é—´çš„å®šé‡ä¸€è‡´æ€§å¾ˆå¥½ã€‚æˆ‘ä»¬é’ˆå¯¹è¢«åŠ¨æ ‡é‡æµ“åº¦åˆ†å¸ƒçš„è®­ç»ƒæ•°æ®çš„æ—¶ç©ºåˆ†è¾¨ç‡è¿›è¡Œäº†ç³»ç»Ÿç ”ç©¶ï¼ˆå›¾ 2F å’Œå›¾ S5ï¼‰ï¼Œç»“æœè¡¨æ˜ç®—æ³•å¯¹äºç‚¹äº‘æ•°æ®çš„æ—¶ç©ºåˆ†è¾¨ç‡éå¸¸é²æ£’ã€‚å…·ä½“è€Œè¨€ï¼Œå¦‚æœç”¨äºè®­ç»ƒçš„ç®—æ³•æ¯ä¸ªæ¶¡è¡—è„±è½å‘¨æœŸçš„æ—¶é—´å¿«ç…§å°‘äºäº”ä¸ªï¼Œæˆ–è€…åœ¨ç©ºé—´åŸŸä¸­å°‘äº 250 ä¸ª ç‚¹ï¼Œç®—æ³•æ‰ä¼šå´©æºƒã€‚1.3.2. 3D é¢…å†…åŠ¨è„‰ç˜¤çš„å®šé‡è¡€æµåŠ¨åŠ›å­¦è®­ç»ƒæ ·æœ¬ï¼ˆæµ“åº¦ï¼‰å’Œå‚è€ƒæ•°æ®ï¼ˆé€Ÿåº¦å’Œå‹åŠ›ï¼‰æ¥æºäºå³é¢ˆå†…åŠ¨è„‰çš„åŠ¨è„‰ç˜¤ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚å›¾B ä¸­ç”»äº†ä¸¤ä¸ªå‚è€ƒå¹³é¢ï¼Œç”¨ä»¥åç»­çš„å±•ç¤ºé¢„æµ‹ä¿¡æ¯å’Œå‚è€ƒä¿¡æ¯çš„æ’å€¼å¯¹æ¯”ã€‚ç”¨æ¥é¢„æµ‹æµ“åº¦å’Œé€Ÿåº¦å‹åŠ›æ•°æ®çš„ NSå…ˆéªŒçš„ç¥ç»ç½‘ç»œç»“æ„å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚å¤šäº†ä¸€ä¸ª zï¼ˆwï¼‰ ç»´é€Ÿåº¦æ•°æ®ã€‚ç»“æœå¯¹æ¯”å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚å·¦è¾¹ä¸¤åˆ—æ˜¯ç«–ç€çš„å‚ç›´äº Z è½´çš„å‚è€ƒå¹³é¢ï¼Œå³è¾¹ä¸¤åˆ—æ˜¯æ¨ªç€çš„å‚ç›´äº X è½´ï¼ˆåŸæ–‡é”™å†™ä¸ºå‚ç›´äº Y è½´ï¼‰çš„å‚è€ƒå¹³é¢ã€‚ä¸‰è¡Œä»ä¸Šåˆ°ä¸‹åˆ†åˆ«ä¸ºæµ“åº¦ï¼Œé€Ÿåº¦å’Œå‹åŠ›ã€‚æµåŠ¨æµçº¿ï¼Œæ ¹æ®å‚è€ƒé€Ÿåº¦åœºå’Œå›å½’é€Ÿåº¦åœºè®¡ç®—å¾—å‡ºçš„ï¼Œæ ¹æ®å‹åŠ›åœºç€è‰²ã€‚ æ‰€æœ‰å­—æ®µçš„è½®å»“çº§åˆ«èŒƒå›´éƒ½ç›¸åŒï¼Œä»¥ä¾¿è¿›è¡Œæ›´å¥½çš„æ¯”è¾ƒã€‚2. ä¼˜åŠ¿å¼€å‘çš„ç®—æ³•ä¸å‡ ä½•ï¼Œåˆå§‹å’Œè¾¹ç•Œæ¡ä»¶æ— å…³ï¼Œå› æ­¤å¯ä»¥çµæ´»åœ°é€‰æ‹©æ„Ÿå…´è¶£çš„é¢†åŸŸè¿›è¡Œæ•°æ®é‡‡é›†ä»¥åŠåç»­çš„è®­ç»ƒå’Œé¢„æµ‹ã€‚æ­¤å¤–ï¼Œå½“å‰çš„æ–¹æ³•ä½¿æˆ‘ä»¬èƒ½å¤Ÿä¸ºé€Ÿåº¦å’Œå‹åŠ›åœºæ„é€ è®¡ç®—æœ‰æ•ˆä¸”å®Œå…¨å¯å¾®çš„æ›¿ä»£é¡¹ï¼Œè¿™äº›æ›¿ä»£é¡¹å¯è¿›ä¸€æ­¥ç”¨äºä¼°è®¡å…¶ä»–æ„Ÿå…´è¶£çš„é‡ï¼Œä¾‹å¦‚å‰ªåˆ‡åº”åŠ›å’Œæ¶¡åº¦åœºã€‚  The algorithm we developed is agnostic to the geometry, initial, and boundary conditions, hence providing flexibility in choosing the domain of interest for data acquisition as well as subsequent training and predictions. Moreover, the current methodology allows us to construct computationally efficient and fully differentiable surrogates for velocity and pressure fields that can be further used to estimate other quantities of interest, such as shear stresses and vorticity fields.æ ‡é‡åœºåœ¨æµä½“æµä¸­çš„ä¼ è¾“å·²åœ¨è®¸å¤šåº”ç”¨ä¸­è¿›è¡Œäº†ç ”ç©¶ï¼Œä¾‹å¦‚ç©ºæ°”åŠ¨åŠ›å­¦ï¼Œç”Ÿç‰©æµä½“åŠ›å­¦å’Œéååº”æ€§æµæ··åˆç­‰ã€‚é•¿æœŸä»¥æ¥ï¼Œåœ¨å®éªŒæµä½“åŠ›å­¦ä¸­ä¸€ç›´åœ¨ä½¿ç”¨é£æ´ä¸­çš„çƒŸæˆ–æ°´éš§é“ä¸­çš„æŸ“æ–™è¿›è¡Œæµé‡å¯è§†åŒ–å’Œé‡åŒ–ã€‚ æ­¤å¤–ï¼Œå·²ç»å¼€å‘äº†ç»“åˆç²’å­å›¾åƒæµ‹é€Ÿä»ªçš„å¹³é¢æ¿€å…‰è¯±å¯¼è§å…‰æˆåƒæŠ€æœ¯ï¼Œä»¥è¯„ä¼°æ ‡é‡åœºä¸é€Ÿåº¦æ¶¡åº¦åœºä¹‹é—´çš„å…³ç³»ã€‚ç°åœ¨ï¼Œå°†æ ‡é‡è¿è¾“ä¸å…ˆè¿›çš„æˆåƒæ–¹å¼ç»“åˆä½¿ç”¨ä»¥é‡åŒ–è¡€ç®¡ç½‘ç»œä¸­çš„è¡€æµæ˜¯ä¸€ç§å¸¸è§çš„åšæ³•ã€‚ä¾‹å¦‚ï¼Œåœ¨æ³¨å°„ä¸å¯æ‰©æ•£çš„ç¢˜é€ å½±å‰‚åï¼Œé€šå¸¸åœ¨å¤šæ¢æµ‹å™¨CTç³»ç»Ÿä¸Šè¿›è¡Œå† çŠ¶åŠ¨è„‰è®¡ç®—æœºæ–­å±‚æ‰«æï¼ˆCTï¼‰è¡€ç®¡é€ å½±ï¼Œè¿™å¯ä»¥ä½¿å† çŠ¶åŠ¨è„‰å¯è§†åŒ–å¹¶æ£€æµ‹å† çŠ¶åŠ¨è„‰ç‹­çª„ã€‚å¦ä¸€ä¸ªä¾‹å­æ˜¯å¯¹è„‘è¡€æµè¿›è¡Œé‡åŒ–ï¼Œè¦ä¹ˆé€šè¿‡é€ å½±å‰‚å’ŒçŒæ³¨CTå¯¹æ‚£è€…è¿›è¡Œä¸­é£é¢„åè¯„ä¼°ï¼Œæˆ–è€…åœ¨åŸºäºåŠŸèƒ½ç£å…±æŒ¯æˆåƒæŠ€æœ¯çš„è®¤çŸ¥ç¥ç»ç§‘å­¦ä¸­åº”ç”¨ï¼Œä»…ä¾èµ–äºè¡€æ°§æ°´å¹³çš„å¯¹æ¯”æ¥æµ‹é‡å¤§è„‘æ´»åŠ¨ã€‚å¦‚è¿™é¡¹å·¥ä½œæ‰€ç¤ºï¼Œå½“å‰æ–¹æ³•çš„ç›´æ¥å«ä¹‰æ˜¯é‡åŒ–è„‰ç®¡ç³»ç»Ÿä¸­çš„è¡€æ¶²åŠ¨åŠ›å­¦ã€‚è¿™å¯èƒ½ä¼šå¯¹ä¸è¯¸å¦‚å¿ƒè„ç—…å‘ä½œå’Œä¸­é£ç­‰é‡è¦ç—…ç†ç›¸å…³çš„è¡€ç®¡ç–¾ç—…çš„ä¸´åºŠè¯Šæ–­ï¼ˆå°¤å…¶æ˜¯éä¾µå…¥æ€§æ–¹æ³•ï¼‰äº§ç”Ÿé‡å¤§å½±å“ã€‚ä½œç”¨åœ¨è¡€ç®¡å£ä¸Šçš„è¡€æµåˆ‡åº”åŠ›åœ¨è¡€ç®¡ç–¾ç—…çš„é¢„åä¸­è‡³å…³é‡è¦ï¼Œå…¶é‡åŒ–åœ¨ä¸´åºŠä¸Šå¾ˆé‡è¦ï¼ˆ14ï¼Œ15ï¼‰ã€‚ä½¿ç”¨æœ¬æ–‡æå‡ºçš„æ–¹æ³•ï¼Œå¯ä»¥åœ¨ä¸å¢åŠ æˆæœ¬çš„æƒ…å†µä¸‹ä¼°ç®—å£åˆ‡åº”åŠ›ã€‚è¿™å°†ç®€åŒ–éœ€è¦ä»ä¸´åºŠå›¾åƒä¸­æå–è¡€ç®¡ç¡®åˆ‡è¾¹ç•Œçš„æœ€æ–°æ–¹æ³•çš„å¤æ‚æ€§ï¼ˆ16ï¼‰ã€‚æˆ‘ä»¬çš„æ¡†æ¶æ˜¯é€šç”¨çš„ï¼Œå¯ä»¥æ‰©å±•åˆ°å…¶ä»–å­¦ç§‘ï¼›ä¾‹å¦‚ï¼Œåœ¨ç”µç£å­¦ä¸­ï¼Œå½“ç»™å®šç”µåœºæ•°æ®å¹¶äº†è§£éº¦å…‹æ–¯éŸ¦æ–¹ç¨‹æ—¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥æ¨æ–­å‡ºç£åœºã€‚æˆ‘ä»¬è¿˜éªŒè¯äº† HFM åœ¨è§‚å¯Ÿåˆ°çš„æµ“åº¦åœºä¸­å¯¹ä½åˆ†è¾¨ç‡å’Œå¤§é‡å™ªå£°çš„é²æ£’æ€§ï¼ˆå›¾2å’Œå›¾S5å’ŒS6ï¼‰ï¼Œè¿™è¡¨æ˜ HFM å¯èƒ½åœ¨å·¥ç¨‹å’Œç”Ÿç‰©åŒ»å­¦ä¸­æ‰¾åˆ°åº”ç”¨ã€‚ä¸ªäººæ€»ç»“ï¼š  ç®—æ³•ä¸å‡ ä½•ã€åˆå§‹æ¡ä»¶å’Œè¾¹ç•Œæ¡ä»¶æ— å…³ï¼Œå¯ä»¥çµæ´»é€‰æ‹©æ„Ÿå…´è¶£çš„åŒºåŸŸè¿›è¡Œæ•°æ®é‡‡é›†ã€è®­ç»ƒå’Œé¢„æµ‹ï¼›  é«˜æ•ˆçš„è®¡ç®—ä»»æ„ä½ç½®çš„é€Ÿåº¦å‹åŠ›åœºï¼Œä¸”ç»“æœå®Œå…¨å¯å¾®ï¼Ÿ  å¯ä»¥è¿›ä¸€æ­¥ç”¨æ¥ä¼°è®¡å…¶å®ƒæ„Ÿå…´è¶£çš„é‡ï¼›  å¯¹ä¸€äº›é¢†åŸŸçš„æŸäº›åœ°æ–¹äº§ç”Ÿé‡å¤§å½±å“ï¼Œæ¯”å¦‚è¡€ç®¡å£ä¸Šçš„è¡€æµåˆ‡åº”åŠ›åœ¨è¡€ç®¡ç–¾ç—…çš„é¢„åä¸­è‡³å…³é‡è¦ï¼›  æ¡†æ¶æ˜¯é€šç”¨çš„ï¼Œå¯ä»¥æ‰©å±•åˆ°å…¶ä»–å­¦ç§‘ã€‚æ¯”å¦‚ç”µç£å­¦ä¸­ï¼Œå½“ç»™å®šç”µåœºæ•°æ®å¹¶äº†è§£éº¦å…‹æ–¯éŸ¦æ–¹ç¨‹æ—¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥æ¨æ–­å‡ºç£åœºï¼ˆä¸ªäººé™„ï¼šè¦ä¹ˆæ±‚è§£å‡ºæ¥ï¼Œè¦ä¹ˆæµ‹é‡å‡ºæ¥ï¼Œæ‰æœ‰æ•°æ®è®­ç»ƒï¼‰ï¼›3. å‰ä½œ  M. Raissi, P. Perdikaris, and G. E. Karniadakis, â€œPhysics-informed neural networks: A deep learning framework for solving forward and inverse problems involving nonlinear partial differential equations,â€ Journal of Computational Physics, vol. 378, pp. 606â€“707, 2019.å¤æ‚ç‰©ç†å­¦ï¼Œç”Ÿç‰©å­¦æˆ–è€…å·¥ç¨‹ç³»ç»Ÿä¸­ï¼Œæ•°æ®è·å–ä»£ä»·é«˜æ˜‚ï¼Œäººä»¬å…ä¸äº†éœ€è¦åœ¨éƒ¨åˆ†ä¿¡æ¯æœªçŸ¥çš„æƒ…å†µä¸‹å¾—å‡ºç»“è®ºæˆ–è€…åšå‡ºå†³å®šã€‚åœ¨è¿™ç§å°æ•°æ®åˆ¶åº¦ä¸‹ï¼Œæœ€æ–°çš„ç»å¤§éƒ¨åˆ†çš„æœºå™¨å­¦ä¹ æŠ€æœ¯ï¼ˆæ¯”å¦‚æ·±åº¦/å·ç§¯/å¾ªç¯ç¥ç»ç½‘ç»œï¼‰éƒ½ç¼ºä¹é²æ£’æ€§ï¼Œä¸”æ— æ³•æä¾›æ”¶æ•›æ€§ä¿è¯ã€‚å®é™…ä¸Šï¼Œåœ¨ç‰©ç†æˆ–ç”Ÿç‰©ç³»ç»Ÿä¸­ï¼Œæœ‰å¤§é‡å…ˆéªŒçŸ¥è¯†æ²¡æœ‰è¢«ç”¨ä¸Šã€‚  M. Raissi and G. E. Karniadakis, â€œHidden physics models: Machine learning of nonlinear partial differential equations,â€ Journal of Computational Physics, vol. 357, pp. 125â€“141, Mar. 2018, doi: 10.1016/j.jcp.2017.11.039.4. å‚è€ƒæ–‡çŒ®æ— ã€‚"
  },
  
  {
    "title": "æ·±åº¦å­¦ä¹ æ–‡ç« é˜…è¯»ï¼ˆå¹¿ä¹‰TSæ¨¡ç³Šç³»ç»Ÿï¼‰",
    "url": "/posts/deep-learning-generalized-TS-fuzzy/",
    "categories": "Academic, Paper",
    "tags": "deep learning, fuzzy",
    "date": "2020-12-08 10:48:19 +0800",
    





    
    "snippet": "æœ¬æ–‡ä»‹ç»äº† 2001 å¹´ Taniguchi ç­‰æå‡ºçš„ä¸€ç§å¹¿ä¹‰ TS æ¨¡ç³Šç³»ç»Ÿçš„å»ºæ¨¡æ–¹æ³•ã€è§„åˆ™çº¦å‡å’Œé²æ£’æ§åˆ¶æ–¹æ³•ã€‚  1. å¼•è¨€  2. ä¼ ç»Ÿ TS æ¨¡ç³Šç³»ç»Ÿ  3. å¹¿ä¹‰ TS æ¨¡ç³Šç³»ç»Ÿ          3.1. å»ºæ¨¡                  3.1.1. ç³»ç»Ÿå»ºæ¨¡          3.1.2. æ¨¡ç³ŠåŒ–è¡¨ç¤º          3.1.3. ä¸¾ä¾‹                ...",
    "content": "æœ¬æ–‡ä»‹ç»äº† 2001 å¹´ Taniguchi ç­‰æå‡ºçš„ä¸€ç§å¹¿ä¹‰ TS æ¨¡ç³Šç³»ç»Ÿçš„å»ºæ¨¡æ–¹æ³•ã€è§„åˆ™çº¦å‡å’Œé²æ£’æ§åˆ¶æ–¹æ³•ã€‚  1. å¼•è¨€  2. ä¼ ç»Ÿ TS æ¨¡ç³Šç³»ç»Ÿ  3. å¹¿ä¹‰ TS æ¨¡ç³Šç³»ç»Ÿ          3.1. å»ºæ¨¡                  3.1.1. ç³»ç»Ÿå»ºæ¨¡          3.1.2. æ¨¡ç³ŠåŒ–è¡¨ç¤º          3.1.3. ä¸¾ä¾‹                    3.2. è§„åˆ™çº¦å‡                  3.2.1. çº¦å‡æ–¹å¼          3.2.2. æ¨¡å‹ä¸ç¡®å®šæ€§          3.2.3. ä¸¾ä¾‹                    3.3. æ¨¡ç³Šæ§åˆ¶å™¨                  3.3.1. è®¾è®¡          3.3.2. ä¸¾ä¾‹                      4. å‚è€ƒæ–‡çŒ®  T. Taniguchi; K. Tanaka; H. Ohtake; H.O. Wang. Model construction, rule reduction, and robust compensation for generalized form of Takagi-Sugeno fuzzy systems. IEEE Transactions on Fuzzy Systems ( Volume: 9, Issue: 4, Aug 2001).1. å¼•è¨€åœ¨çº¿æ€§çŸ©é˜µä¸ç­‰å¼ï¼ˆlinear matrix inequality, LMIï¼‰è®¾è®¡æ¡†æ¶ä¸‹ï¼ŒåŸºäº TS æ¨¡ç³Šæ¨¡å‹çš„éçº¿æ€§æ§åˆ¶å¾—ä»¥å¹¿æ³›åº”ç”¨ã€‚ä¸€èˆ¬åˆ†ä¸ºä¸‰ä¸ªé˜¶æ®µï¼š  ç¬¬ä¸€é˜¶æ®µï¼šå¯¹éçº¿æ€§è¢«æ§å¯¹è±¡çš„æ¨¡ç³Šå»ºæ¨¡          åˆ©ç”¨è¾“å…¥è¾“å‡ºæ•°æ®è¿›è¡Œæ¨¡ç³Šæ¨¡å‹è¾¨è¯†ï¼ˆTakagi and Sugeno, 1993 ç­‰ï¼‰      æˆ– åŸºäºåˆ†åŒºéçº¿æ€§æ€æƒ³çš„æ¨¡ç³Šç³»ç»Ÿæ„å»ºï¼ˆæ¨¡ç³Š IF-THEN è§„åˆ™ï¼‰        ç¬¬äºŒé˜¶æ®µï¼šæ¨¡ç³Šæ§åˆ¶è§„åˆ™æ¨å¯¼ï¼Œå®ƒåæ˜ äº†æ¨¡ç³Šæ¨¡å‹çš„è§„åˆ™ç»“æ„ï¼Œå®ƒé€šè¿‡æ‰€è°“çš„å¹¶è¡Œåˆ†å¸ƒå¼è¡¥å¿ï¼ˆPDCï¼‰å®ç°  ç¬¬ä¸‰é˜¶æ®µï¼šæ¨¡ç³Šæ§åˆ¶å™¨è®¾è®¡ï¼Œå³ç¡®å®šåé¦ˆå¢ç›Šã€‚  This paper presents a systematic procedure of fuzzy control system design that consists of fuzzy model construction, rule reduction, and robust compensation for nonlinear systems.æœ¬æ–‡æå‡ºäº†ä¸€ç§æ¨¡ç³Šæ§åˆ¶ç³»ç»Ÿè®¾è®¡çš„ç³»ç»Ÿç¨‹åºï¼Œè¯¥ç¨‹åºç”±æ¨¡ç³Šæ¨¡å‹æ„å»ºï¼Œè§„åˆ™çº¦ç®€å’Œéçº¿æ€§ç³»ç»Ÿçš„é²æ£’è¡¥å¿ç»„æˆã€‚æ³¨æ„ï¼Œåœ¨æœ¬ç¯‡æ–‡ç« ä¹‹å‰ï¼Œè¿˜æœ‰ä¸¤ç¯‡å…³é”®æ–‡ç« ä½œä¸ºå‰ç»­ç ”ç©¶åŸºç¡€ï¼š  H. O. Wang, K. Tanaka, and M. Griffin, â€œParallel distributed compensation of nonlinear systems by Takagi-Sugeno fuzzy model,â€ in Proceedings of 1995 IEEE International Conference on Fuzzy Systems. The International Joint Conference of the Fourth IEEE International Conference on Fuzzy Systems and The Second International Fuzzy Engineering Symposium, Yokohama, Japan, 1995, vol. 2, pp. 531â€“538, doi: 10.1109/FUZZY.1995.409737.é¦–æ¬¡å°†TSæ¨¡ç³Šç³»ç»Ÿç”¨äºéçº¿æ€§ç³»ç»Ÿçš„è¿‘ä¼¼ï¼Œç»™å‡ºäº†æ¨¡ç³Šç³»ç»Ÿ Lyapunov ç¨³å®šæ€§çš„å……åˆ†æ¡ä»¶ï¼Œç ”ç©¶äº†å¹¶è¡Œåˆ†å¸ƒå¼è¡¥å¿ï¼ˆPDCï¼‰ï¼Œç»™å‡ºäº†çŠ¶æ€åé¦ˆæ§åˆ¶å¾‹ä¸‹çš„ç¨³å®šæ€§åˆ¤åˆ«å‡†åˆ™ã€‚  D. Localmodel, â€œStability Analysis of Fuzzy Control Systems,â€ IEEE TRANSACTIONS ON SYSTEMS, MAN, AND CYBERNETICS-PART B: CYBERNETICS, vol. 26, no. 1, p. 4, 1996.æå‡ºäº†æ¨¡ç³ŠçŠ¶æ€åé¦ˆæ§åˆ¶å™¨ï¼Œè²Œä¼¼æ”¾å®½äº†ç¨³å®šæ€§çš„æ¡ä»¶ï¼ˆè¿˜æ²¡ç»†çœ‹ï¼‰ã€‚2. ä¼ ç»Ÿ TS æ¨¡ç³Šç³»ç»Ÿå½¢å¼å¦‚ä¸‹\\[\\begin{aligned}  &amp;rule\\ i\\quad (i=1,2,\\cdots,r):\\\\  &amp;{\\rm IF}\\ z_1(t)\\ is\\ M_{1i}\\ and\\ \\cdots\\ and\\ z_p(t)\\ is\\ M_{pi}\\\\  &amp;{\\rm THEN}\\ \\dot \\boldsymbol x(t) = \\boldsymbol A_i \\boldsymbol x(t) + \\boldsymbol B_i \\boldsymbol u(t)\\end{aligned}\\]å…¶ä¸­  $r$ æ˜¯è§„åˆ™ä¸ªæ•°  $M_{ji}$ æ˜¯ç¬¬ $j$ ä¸ªè¾“å…¥åˆ†é‡çš„æ¨¡ç³Šé›†  $\\boldsymbol x\\in \\mathbb R^n$ æ˜¯çŠ¶æ€é‡ï¼Œ$\\boldsymbol u\\in \\mathbb R^m$ æ˜¯è¾“å…¥é‡  $\\boldsymbol A_i\\in \\mathbb R^{n\\times n}, \\boldsymbol B_i\\in \\mathbb R^{n\\times m}$ æ˜¯ç³»æ•°çŸ©é˜µ  $z_1(t),\\cdots,z_p(t)$ æ˜¯å·²çŸ¥çš„å‰æå˜é‡ï¼Œå¯èƒ½ä¸ºå¯æµ‹é‡çš„çŠ¶æ€é‡çš„å‡½æ•°ã€å¤–éƒ¨å¹²æ‰°ï¼Œå’Œ/æˆ–æ—¶é—´ï¼Œç”¨ $\\boldsymbol z(t)$ æ¥è¡¨ç¤ºæ‰€æœ‰ç»™å®šä¸€å¯¹ $[\\boldsymbol x(t),\\boldsymbol u(t),\\boldsymbol z(t)]$ï¼Œé‡‡ç”¨é‡å¿ƒæ³•ï¼ˆåŠ æƒå¹³å‡æ³•ï¼‰å¯ä»¥å¾—åˆ°æ¨¡ç³Šç³»ç»Ÿçš„æœ€ç»ˆè¾“å‡ºï¼š\\[\\dot \\boldsymbol x(t) = \\sum_{i=1}^r h_i(\\boldsymbol z(t))(\\boldsymbol A_i \\boldsymbol x(t) + \\boldsymbol B_i \\boldsymbol u(t))\\]å…¶ä¸­\\[\\begin{aligned}  h_i(\\boldsymbol z(t)) &amp;= \\frac{\\omega_i(\\boldsymbol z(t))}{\\sum_{i=1}^r\\omega_i(\\boldsymbol z(t))}\\\\  \\omega_i(z(t)) &amp;= \\prod_{j=1}^p M_{ji}(z_j(t))\\end{aligned}\\]$h_i(\\boldsymbol z(t))$ æ˜¯æ¯æ¡è§„åˆ™çš„å½’ä¸€åŒ–æƒé‡ï¼Œ$M_{ji}(z_j(t)$ æ˜¯ç¬¬ $i$ æ¡è§„åˆ™ä¸­ç¬¬ $j$ ä¸ªåˆ†é‡çš„æ¨¡ç³Šé›† $M_{ji}$ çš„éš¶å±åº¦å€¼ã€‚å‚è€ƒï¼šå•ç‚¹æ¨¡ç³Šäº§ç”Ÿå™¨ã€ä¹˜ç§¯æ¨ç†æœºå’Œä¸­å¿ƒå¹³å‡è§£æ¨¡ç³Šå™¨ã€‚  Wang H., Tanaka K. and Griifn M., Parallel distributed conpensation of nonlinear systems by Takagi and Sugenoâ€™s fuzzy model, 1995, in Porc. 4 th IEEE Int. Conf. Fuzzy syst., Yokohama, Japan, pp: 531-538.å®šç†ï¼šå½“æ¨¡ç³Šè§„åˆ™æ¡æ•°é€‚å½“æ—¶ï¼Œæ¨¡ç³Šç³»ç»Ÿå¯ä»¥ä»¥ä»»æ„çš„ç²¾åº¦é€¼è¿‘å®é™…çš„ä»»æ„çº¿æ€§æˆ–éçº¿æ€§ç³»ç»Ÿã€‚ï¼ˆä¸‡èƒ½é€¼è¿‘å™¨ï¼Ÿï¼‰  MamdaniE.H.and Assilian 5., Applications of fuzzy algorithms for control of simple dynamic Plant, IEEE Proc. Part-D, 1974, vol. 121, no. 8, pp: 1585-15883. å¹¿ä¹‰ TS æ¨¡ç³Šç³»ç»Ÿä¸ªäººå‰è¨€ï¼šä¼ ç»Ÿçš„ TS æ¨¡ç³Šç³»ç»Ÿæ˜¯æœ‰è§„åˆ™ä¸ªæ•°çš„æ¦‚å¿µçš„ï¼Œä½†æ˜¯ä¸‹æ–‡ä½œè€…æå‡ºçš„å¹¿ä¹‰ TS æ¨¡ç³Šç³»ç»Ÿä¸å†å¼ºè°ƒè§„åˆ™çš„æ¦‚å¿µï¼Œè€Œæ˜¯ç›´æ¥å¯¹çŠ¶æ€æ–¹ç¨‹è¿›è¡Œæ¨¡ç³Šè¿‘ä¼¼ã€‚3.1. å»ºæ¨¡3.1.1. ç³»ç»Ÿå»ºæ¨¡è€ƒè™‘æŸä¸€ç±»éçº¿æ€§ç³»ç»Ÿè¡¨ç¤ºå¦‚ä¸‹ï¼š\\[\\dot x_i(t) = \\sum_{j=1}^n f_{ij}(\\boldsymbol z(t))x_j(t) + \\sum_{k=1}^m g_{ik}(\\boldsymbol z(t))u_k(t)\\]å…¶ä¸­ï¼š  $x_1(t)\\cdots x_n(t)$ æ˜¯çŠ¶æ€é‡ï¼Œ$u_1(t)\\cdots u_m(t)$ æ˜¯è¾“å…¥é‡  $z_1(t),\\cdots,z_n(t)$ æ˜¯å·²çŸ¥çš„å˜é‡ï¼Œå¯èƒ½ä¸ºçŠ¶æ€é‡çš„å‡½æ•°ã€å¤–éƒ¨å˜é‡ï¼Œå’Œ/æˆ–æ—¶é—´  $f_{ij}(\\boldsymbol z(t)), g_{ik}(\\boldsymbol z(t))$ æ˜¯å…³äº $\\boldsymbol z(t)$ çŸ©é˜µæ³¨æ„ï¼Œä¸Šå¼ä¸­çš„ $j$ æ˜¯éå†æ‰€æœ‰çŠ¶æ€é‡ï¼Œ$j=1,2,\\cdots,n$ï¼Œ$k$ æ˜¯éå†æ‰€æœ‰è¾“å…¥é‡ï¼Œ$k=1,2,\\cdots,m$ã€‚ä¸Šå¼å¯ä»¥çœ‹ä½œæè¿°ç³»ç»Ÿçš„éçº¿æ€§çŠ¶æ€æ–¹ç¨‹ã€‚è¯¥æ–¹ç¨‹åˆ»ç”»äº†æ¯ä¸ªçŠ¶æ€é‡çš„ä¸€é˜¶å¯¼ä¸æ‰€æœ‰çŠ¶æ€é‡å’Œæ§åˆ¶ï¼ˆè¾“å…¥ï¼‰é‡çš„çº¿æ€§ç»„åˆå…³ç³»ã€‚éçº¿æ€§å¯ä»¥ä½“ç°åœ¨ï¼š$z_i(t)$ å¯ä¸º $x_i(t)$ çš„éçº¿æ€§å‡½æ•°ã€‚å‡è®¾ $z_i(t) = sin(x_i(t))$ ï¼Œ$f_{ij}(\\boldsymbol z(t))=\\boldsymbol z(t) = sin(\\boldsymbol x(t))$ï¼Œåˆ™åŸå§‹çŠ¶æ€æ–¹ç¨‹æ˜¯å…³äº $\\boldsymbol x(t)$ çš„éçº¿æ€§æ–¹ç¨‹ç»„ã€‚å®šä¹‰å¦‚ä¸‹çš„æ–°å˜é‡ï¼ˆè¡¨ç¤ºç³»æ•° $f_{ij},g_{ik}$ çš„æœ€å¤§æœ€å°å€¼ï¼‰\\[\\begin{aligned}  a_{ij1} &amp;\\equiv \\mathop{\\rm max}\\limits_{\\boldsymbol z(t)} f_{ij}(\\boldsymbol z(t))\\\\  a_{ij2} &amp;\\equiv \\mathop{\\rm min}\\limits_{\\boldsymbol z(t)} f_{ij}(\\boldsymbol z(t))\\\\  b_{ik1} &amp;\\equiv \\mathop{\\rm max}\\limits_{\\boldsymbol z(t)} g_{ik}(\\boldsymbol z(t))\\\\  b_{ik2} &amp;\\equiv \\mathop{\\rm min}\\limits_{\\boldsymbol z(t)} g_{ik}(\\boldsymbol z(t))\\\\\\end{aligned}\\]å€ŸåŠ©ä¸Šè¿°æ–°å®šä¹‰çš„å˜é‡ï¼Œå¯ä»¥å°† $f_{ij}(\\boldsymbol z(t)), g_{ik}(\\boldsymbol z(t))$ è½¬åŒ–ä¸ºç”¨å…¶æœ€å¤§æœ€å°å€¼è¡¨è¾¾çš„å½¢å¼ï¼ˆtransforming into fuzzy model representationï¼‰ï¼š\\[\\begin{aligned}  f_{ij}(\\boldsymbol z(t)) &amp;= h_{ij1}(\\boldsymbol z(t))a_{ij1} + h_{ij2}(\\boldsymbol z(t))a_{ij2}\\\\  g_{ik}(\\boldsymbol z(t)) &amp;= v_{ik1}(\\boldsymbol z(t))b_{ik1} + v_{ik2}(\\boldsymbol z(t))b_{ik2}\\end{aligned}\\]ä¸Šå¼çš„æƒé‡å‚æ•°æ»¡è¶³\\[\\sum_{l=1}^2 h_{ijl}(\\boldsymbol z(t)) = 1\\quad \\sum_{l=1}^2 v_{ikl}(\\boldsymbol z(t)) = 1\\]æƒé‡å‚æ•°å®è´¨ä¸Šå°±æ˜¯éš¶å±åº¦å‡½æ•°çš„å½¢å¼ï¼Œå¯ä»¥å®šä¹‰å¦‚ä¸‹\\[\\begin{aligned}h_{ij1}(\\boldsymbol z(t)) &amp;= \\frac{f_{ij}(\\boldsymbol z(t))-a_{ij2}}{a_{ij1}-a_{ij2}}\\\\h_{ij2}(\\boldsymbol z(t)) &amp;= \\frac{a_{ij1} - f_{ij}(\\boldsymbol z(t))}{a_{ij1}-a_{ij2}}\\\\v_{ik1}(\\boldsymbol z(t)) &amp;= \\frac{g_{ik}(\\boldsymbol z(t))-b_{ij2}}{b_{ij1}-b_{ij2}}\\\\v_{ik2}(\\boldsymbol z(t)) &amp;= \\frac{b_{ik1} - g_{ik}(\\boldsymbol z(t))}{b_{ik1}-b_{ik2}}\\\\\\end{aligned}\\]æœ€ç»ˆå¯ä»¥å°†åŸå§‹TSæ¨¡ç³Šç³»ç»Ÿè¡¨ç¤ºä¸ºï¼š\\[\\begin{aligned}\\dot x_i(t) &amp;= \\sum_{j=1}^n f_{ij}(\\boldsymbol z(t))x_j(t) + \\sum_{k=1}^m g_{ik}(\\boldsymbol z(t))u_k(t)\\\\&amp;=\\sum_{j=1}^n\\sum_{l=1}^2 h_{ijl}(\\boldsymbol z(t))a_{ijl}x_j(t) + \\sum_{k=1}^m\\sum_{l=1}^2 v_{ikl}(\\boldsymbol z(t))b_{ikl}u_k(t)\\\\&amp;=\\sum_{l=1}^2\\left[\\begin{bmatrix}  h_{i1l}a_{i1l}&amp;\\cdots&amp;h_{inl}a_{inl}\\end{bmatrix}\\begin{bmatrix}  x_1(t)\\\\  \\vdots\\\\  x_n(t)\\end{bmatrix}+\\begin{bmatrix}  v_{i1l}b_{i1l}&amp;\\cdots&amp;v_{iml}b_{iml}\\end{bmatrix}\\begin{bmatrix}  u_1(t)\\\\  \\vdots\\\\  u_m(t)\\end{bmatrix}\\right]\\end{aligned}\\]$i$ æ˜¯è¾“å…¥å‘é‡çš„ç»´åº¦ï¼ˆè¡¨ç¤ºçŠ¶æ€æ–¹ç¨‹çš„æ¯ä¸ªçŠ¶æ€é‡ï¼‰ï¼Œ$j$ ä¹Ÿæ˜¯è¾“å…¥å‘é‡çš„ç»´åº¦ï¼ˆè¡¨ç¤ºæ¯ä¸ªçŠ¶æ€é‡çš„ä¸€é˜¶å¯¼ä¸æ‰€æœ‰çŠ¶æ€é‡çš„å…³ç³»ï¼‰ï¼Œ$l$ æ˜¯å–å¤§å–å°å€¼çš„ç»´åº¦ã€‚å°†ä¸Šè¿°å¼å­è½¬ä¸ºçŸ©é˜µå½¢å¼ï¼Œå¦‚ä¸‹\\[\\begin{aligned}\\dot \\boldsymbol x(t) &amp;=\\sum_{i=1}^n\\sum_{j=1}^n\\sum_{l=1}^2 h_{ijl}(\\boldsymbol z(t))a_{ijl} \\boldsymbol U^A_{ij} \\boldsymbol x(t) + \\sum_{i=1}^n\\sum_{k=1}^m\\sum_{l=1}^2 v_{ikl}(\\boldsymbol z(t))b_{ikl}\\boldsymbol U^B_{ik}\\boldsymbol u(t)\\\\&amp;=\\sum_{i=1}^n\\sum_{j=1}^n\\sum_{l=1}^2 h_{ijl}(\\boldsymbol z(t)) \\boldsymbol A_{ijl} \\boldsymbol x(t) + \\sum_{i=1}^n\\sum_{k=1}^m\\sum_{l=1}^2 v_{ikl}(\\boldsymbol z(t))\\boldsymbol B_{ikl}\\boldsymbol u(t)\\\\\\end{aligned}\\]å…¶ä¸­\\[\\begin{aligned}&amp;\\quad \\quad \\quad \\quad \\quad \\quad \\quad \\quad j\\\\\\boldsymbol A_{ijl} &amp;= i\\begin{bmatrix}  0&amp;\\cdots&amp;0&amp;0&amp;0&amp;\\cdots&amp;0\\\\  \\vdots&amp;\\vdots&amp;\\vdots&amp;\\vdots&amp;\\vdots&amp;\\vdots&amp;\\vdots\\\\  0&amp;\\cdots&amp;0&amp;0&amp;0&amp;\\cdots&amp;0\\\\  0&amp;\\cdots&amp;0&amp;a_{ijl}&amp;0&amp;\\cdots&amp;0\\\\  0&amp;\\cdots&amp;0&amp;0&amp;0&amp;\\cdots&amp;0\\\\  \\vdots&amp;\\vdots&amp;\\vdots&amp;\\vdots&amp;\\vdots&amp;\\vdots&amp;\\vdots\\\\  0&amp;\\cdots&amp;0&amp;0&amp;0&amp;\\cdots&amp;0\\\\\\end{bmatrix}\\\\&amp;\\quad \\quad \\quad \\quad \\quad \\quad \\quad \\quad k\\\\\\boldsymbol B_{ikl} &amp;= i\\begin{bmatrix}  0&amp;\\cdots&amp;0&amp;0&amp;0&amp;\\cdots&amp;0\\\\  \\vdots&amp;\\vdots&amp;\\vdots&amp;\\vdots&amp;\\vdots&amp;\\vdots&amp;\\vdots\\\\  0&amp;\\cdots&amp;0&amp;0&amp;0&amp;\\cdots&amp;0\\\\  0&amp;\\cdots&amp;0&amp;b_{ikl}&amp;0&amp;\\cdots&amp;0\\\\  0&amp;\\cdots&amp;0&amp;0&amp;0&amp;\\cdots&amp;0\\\\  \\vdots&amp;\\vdots&amp;\\vdots&amp;\\vdots&amp;\\vdots&amp;\\vdots&amp;\\vdots\\\\  0&amp;\\cdots&amp;0&amp;0&amp;0&amp;\\cdots&amp;0\\\\\\end{bmatrix}\\end{aligned}\\]ä¸ªäººç†è§£ï¼šä¸Šè¿°ä¸¤ä¸ªçŸ©é˜µå°±æ˜¯ä¸ºäº†å‰é¢çš„çŸ©é˜µæ±‚å’Œå¼è€Œäººå·¥æ„é€ çš„ï¼Œå¯ä»¥ä¸åé¢çš„ $\\boldsymbol x(t), \\boldsymbol u(t)$ åšçŸ©é˜µä¹˜æ³•ï¼Œå–åˆ°å¯¹åº”çš„å…ƒç´ ä¹˜ç§¯ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸Šè¿°ä¸¤ä¸ªçŸ©é˜µåˆ†åˆ«æœ‰ $n^2,m^2$ ä¸ªï¼Œä¸”æ¯ä¸ªéƒ½æ˜¯ä¸Šé¢è¿™ç§åªæœ‰ä¸€ä¸ªå…ƒç´ ä¸ä¸º 0 çš„ç¨€ç–å½¢å¼ã€‚å³\\[\\begin{aligned}\\dot \\boldsymbol x(t) &amp;=\\sum_{l=1}^2\\left[a_{11l}\\begin{bmatrix}  h_{11l}&amp;\\boldsymbol 0\\\\  \\boldsymbol 0&amp;\\boldsymbol 0\\\\\\end{bmatrix}\\boldsymbol x(t)+\\cdots+a_{nnl}\\begin{bmatrix}  \\boldsymbol 0&amp;\\boldsymbol 0\\\\  \\boldsymbol 0&amp;h_{nnl}\\\\\\end{bmatrix}\\boldsymbol x(t)+b_{11l}\\begin{bmatrix}  h_{11l}&amp;\\boldsymbol 0\\\\  \\boldsymbol 0&amp;\\boldsymbol 0\\\\\\end{bmatrix}\\boldsymbol u(t)+\\cdots+b_{nnl}\\begin{bmatrix}  \\boldsymbol 0&amp;\\boldsymbol 0\\\\  \\boldsymbol 0&amp;v_{nml}\\\\\\end{bmatrix}\\boldsymbol u(t)\\right]\\\\&amp;=\\sum_{l=1}^2\\left[\\begin{bmatrix}  h_{11l}a_{11l}&amp;\\cdots&amp;h_{1nl}a_{1nl}\\\\  \\vdots&amp;\\ddots&amp;\\vdots\\\\  h_{n1l}a_{n1l}&amp;\\cdots&amp;h_{nnl}a_{nnl}\\\\\\end{bmatrix}\\begin{bmatrix}  x_1(t)\\\\  \\vdots\\\\  x_n(t)\\end{bmatrix}+\\begin{bmatrix}  v_{11l}b_{11l}&amp;\\cdots&amp;v_{1ml}b_{1ml}\\\\  \\vdots&amp;\\ddots&amp;\\vdots\\\\  v_{n1l}b_{n1l}&amp;\\cdots&amp;v_{nml}b_{nml}\\\\\\end{bmatrix}\\begin{bmatrix}  u_1(t)\\\\  \\vdots\\\\  u_m(t)\\end{bmatrix}\\right]\\\\&amp;=\\sum_{l=1}^2\\left[\\boldsymbol h_l*\\boldsymbol A_l\\cdot \\boldsymbol x(t) + \\boldsymbol v_l*\\boldsymbol B_l\\cdot \\boldsymbol u(t)\\right]\\end{aligned}\\]ä½œè€…è¡¨æ˜ï¼Œ$a_{ijl}, b_{ikl}$ å†è§„åˆ™çº¦å‡ä¸­éå¸¸é‡è¦ï¼Œä¸Šé¢çŸ©é˜µå’Œçš„å¼å­åœ¨è§„åˆ™çº¦å‡ä¸­ååˆ†æ–¹ä¾¿ã€‚3.1.2. æ¨¡ç³ŠåŒ–è¡¨ç¤ºä¸‹é¢åˆ†æä¸€èˆ¬ç³»ç»ŸçŠ¶æ€æ–¹ç¨‹å’Œå¹¿ä¹‰ TS æ¨¡å‹ä¹‹é—´çš„ç­‰ä»·æ€§ï¼Œä¹Ÿå³åˆ†æä¸€èˆ¬çš„ç³»ç»ŸçŠ¶æ€æ–¹ç¨‹æ€ä¹ˆè½¬åŒ–ä¸ºå¹¿ä¹‰ TS æ¨¡ç³Šæ¨¡å‹çš„å½¢å¼ã€‚é¦–å…ˆç»™å‡ºç»“è®º\\[\\begin{aligned}  \\dot \\boldsymbol x(t) &amp;=\\sum_{i=1}^n\\sum_{j=1}^n\\sum_{l=1}^2 h_{ijl}(\\boldsymbol z(t))a_{ijl} \\boldsymbol U^A_{ij} \\boldsymbol x(t)+\\sum_{i=1}^n\\sum_{k=1}^m\\sum_{l=1}^2 v_{ikl}(\\boldsymbol z(t))b_{ikl}\\boldsymbol U^B_{ik}\\boldsymbol u(t)\\\\  &amp;=\\sum_{p=1}^{2^{n(n+m)}} \\hat h_p(\\boldsymbol z(t))[\\hat \\boldsymbol A_p\\boldsymbol x(t) + \\hat \\boldsymbol B_p\\boldsymbol u(t)]                                     \\end{aligned}\\]ä¸‹é¢è¿›è¡Œä¸€æ­¥æ­¥æ¨å¯¼åˆ†æï¼ˆåŸæ–‡ä¸­åˆæ˜¯ä¸€ä¸ª where æ˜“å¾—ï¼Œæˆ‘äººå‚»äº†ï¼‰ã€‚åˆ©ç”¨å„é¡¹ç³»æ•°å’Œä¸º 1 çš„æ€§è´¨ï¼Œè¿›è¡Œè¿ä¹˜å±•å¼€\\[\\begin{aligned}  1 = &amp;\\overbrace{(h_{111}+h_{112})\\cdots (h_{1n1}+h_{1n2})}^{n}&amp;&lt;1&gt;\\\\  &amp;\\cdot(h_{211}+h_{212})\\cdots (h_{2n1}+h_{2n2})&amp;&lt;2&gt;\\\\  &amp;\\cdot\\quad \\cdots&amp;\\cdots\\\\  &amp;\\cdot(h_{n11}+h_{n12})\\cdots (h_{nn1}+h_{nn2})&amp;&lt;n&gt;\\\\  &amp;\\cdot\\overbrace{(v_{111}+v_{n12})\\cdots (v_{1m1}+v_{1m2})}^{m}&amp;&lt;1&gt;\\\\  &amp;\\cdot\\quad \\cdots&amp;\\cdots\\\\  &amp;\\cdot(v_{n11}+v_{n12})\\cdots (v_{nm1}+v_{nm2})&amp;&lt;n&gt;\\\\\\end{aligned}\\]ä¸Šå¼ä¸­ä¸€å…±æœ‰ $n\\cdot n+n\\cdot m$ ä¸ªæ‹¬å·ï¼Œæ¯ä¸ªæ‹¬å·çš„å’Œå‡ä¸º 1ã€‚ä¸‹é¢ä»æ¯ä¸ªæ‹¬å·ä¸­ä»»æ„å–ä¸€ä¸ªå…ƒç´ ï¼ˆ$l=1\\ or\\ 2$ï¼‰ç»„æˆè¿ä¹˜é¡¹  å‰ $n$ è¡Œä¸­ï¼Œç¬¬ä¸€è¡Œå±•å¼€åå…±æœ‰ $2^n$ é¡¹ï¼Œåˆ™å‰ $n$ è¡Œä¸€å…±æœ‰ $2^{n\\cdot n}$ é¡¹ï¼›  å $n$ è¡Œä¸­ï¼Œç¬¬ä¸€è¡Œå±•å¼€åå…±æœ‰ $2^m$ é¡¹ï¼Œåˆ™å $n$ è¡Œä¸€å…±æœ‰ $2^{m\\cdot n}$ é¡¹ã€‚é‚£ä¹ˆï¼Œæ•´ä¸ªå¼å­ä¸€å…±æœ‰ $C_{2^{n\\cdot n}}^1C_{2^{m\\cdot n}}^1=2^{n(n+m)}$ é¡¹ã€‚æ¯ä¸€é¡¹éƒ½æ˜¯æ‰€æœ‰ $i,j,k$ å¯¹ä¸åŒ $l$ çš„æ’åˆ—ç»„åˆï¼Œå³ä¸€å…±æœ‰ $2^{n(n+m)}$ ç§æ’åˆ—ç»„åˆã€‚å‡è®¾é€‰å–æ‰€æœ‰æ‹¬å·é‡Œçš„ $l=1$ï¼ˆå–æ‰€æœ‰æ‹¬å·é‡Œå·¦è¾¹çš„å…ƒç´ ï¼‰ï¼Œè®¾è¯¥è¿ä¹˜é¡¹ä¸ºç¬¬ $p=1$ é¡¹ï¼Œ åˆ™è¯¥é¡¹ä¸º\\[\\begin{aligned}  t_{p=1} = &amp;(h_{111}\\cdots h_{1n1})\\cdots(h_{n11}\\cdots h_{nn1})\\\\  &amp;\\cdot(v_{111}\\cdots v_{1n1})\\cdots(v_{1m1}\\cdots v_{nm1})\\\\  = &amp;\\prod_{i=1}^n (h_{i11}\\cdots h_{in1}) \\cdot (v_{i11} \\cdots v_{im1})\\\\  = &amp;\\prod_{i=1}^n \\prod_{j=1}^n h_{ij1}\\cdot (v_{i11}\\cdots v_{im1})\\\\  = &amp;\\prod_{i=1}^n\\prod_{j=1}^n\\prod_{k=1}^m h_{ij1}v_{ik1}\\end{aligned}\\]å¯¹æ‰€æœ‰çš„ $p$ ä¸ªè¿ä¹˜é¡¹æ±‚å’Œï¼Œå¾—åˆ°åŸå§‹ç­‰å¼çš„æœ€ç»ˆè¡¨è¾¾å½¢å¼\\[1 =\\sum_{p=1}^{2^{n(n+m)}} t_p = \\sum_{p=1}^{2^{n(n+m)}} \\prod_{i=1}^n\\prod_{j=1}^n\\prod_{k=1}^m h_{ijl}v_{ikl}\\]å…¶ä¸­ $l$ ä¸å…·ä½“æ¯é¡¹æœ‰å…³ã€‚é‚£ä¹ˆ\\[\\begin{aligned}  \\dot \\boldsymbol x(t) &amp;=\\sum_{i=1}^n\\sum_{j=1}^n\\sum_{l=1}^2 h_{ijl}a_{ijl}\\boldsymbol U_{ij}^A\\boldsymbol x(t) + \\sum_{i=1}^n\\sum_{k=1}^m\\sum_{l=1}^2 v_{ijl}(\\boldsymbol z(t))b_{ikl}\\boldsymbol U^B_{ik}\\boldsymbol u(t)\\\\  &amp;= \\sum_{i=1}^n\\sum_{j=1}^n\\sum_{l=1}^2h_{ijl}\\boldsymbol A_{ijl}\\boldsymbol x(t) + \\sum_{i=1}^n\\sum_{k=1}^m\\sum_{l=1}^2v_{ikl}\\boldsymbol B_{ikl}\\boldsymbol u(t)\\\\  &amp;=\\sum_{p=1}^{2^{n(n+m)}} \\prod_{i=1}^n\\prod_{j=1}^n\\prod_{k=1}^m h_{ijl}v_{ikl} \\left[ \\sum_{i=1}^n\\sum_{j=1}^n\\sum_{l=1}^2h_{ijl}\\boldsymbol A_{ijl}\\boldsymbol x(t) + \\sum_{i=1}^n\\sum_{k=1}^m\\sum_{l=1}^2v_{ikl}\\boldsymbol B_{ikl}\\boldsymbol u(t)\\right] \\\\\\end{aligned}\\]ç„¶åæˆ‘å°±æ¨ä¸å‡ºæ¥äº†ï¼3.1.3. ä¸¾ä¾‹è€ƒè™‘å¦‚ä¸‹éçº¿æ€§ç³»ç»Ÿ\\[\\begin{aligned}\\left\\{\\begin{array}{l}\\dot x_1(t) = x_2(t)\\\\\\dot x_2(t) = x_1(t){\\rm cos}x_2(t)-x_3(t)\\\\\\dot x_3(t) = x_1(t)x_3(t) + (1+\\varepsilon {\\rm sin}x_3(t))u(t)\\end{array}\\right.\\end{aligned}\\]çŠ¶æ€é‡çš„å–å€¼èŒƒå›´ä¸º\\[\\begin{aligned}  \\underline d_1\\leq x_1(t)\\leq \\overline d_1\\\\  \\underline d_2\\leq x_2(t)\\leq \\overline d_2\\\\  \\underline d_3\\leq x_3(t)\\leq \\overline d_3\\\\\\end{aligned}\\]å…¶ä¸­\\[\\begin{aligned}\\underline d_1 &amp;= -5\\\\\\overline d_1 &amp;= 5\\\\\\underline d_2 &amp;= -\\pi/2\\\\\\overline d_2 &amp;= \\pi/2\\\\\\underline d_3 &amp;= -\\pi\\\\\\overline d_3 &amp;= \\pi\\\\\\varepsilon &amp;= 0.5\\\\\\end{aligned}\\]æ ¹æ®å‰é¢çš„çº¦å®šï¼Œé‡æ–°æ•´ç†çŠ¶æ€æ–¹ç¨‹å¦‚ä¸‹\\[\\begin{aligned}\\left\\{\\begin{array}{l}\\dot x_1(t) &amp;= 0\\cdot x_1(t)&amp; + 1\\cdot x_2(t)&amp; + 0\\cdot x_3(t)&amp; + 0\\cdot u(t)&amp;\\\\\\dot x_2(t) &amp;= {\\rm cos}x_2(t)\\cdot x_1(t)&amp; + 0\\cdot x_2(t)&amp; +(-1) \\cdot x_3(t)&amp; + 0\\cdot u(t)&amp;\\\\\\dot x_3(t) &amp;= 0\\cdot x_1(t)&amp; +0\\cdot x_2(t)&amp; + x_1(t)\\cdot x_3(t)&amp; + (1+\\varepsilon {\\rm sin}x_3(t))u(t)&amp;\\end{array}\\right.\\end{aligned}\\]æœ‰\\[\\begin{aligned}f_{11}(z(t)) &amp;= 0,\\ &amp;f_{12}(z(t)) = 1,\\ &amp;f_{13}(z(t)) = 0,\\ &amp;g_{11}(z(t)) = 0\\\\f_{21}(z(t)) &amp;= {\\rm cos}x_2(t),\\ &amp;f_{22}(z(t)) = 0,\\ &amp;f_{23}(z(t)) = -1,\\ &amp;g_{11}(z(t)) = 0\\\\f_{31}(z(t)) &amp;= 0,\\ &amp;f_{32}(z(t)) = 0,\\ &amp;f_{33}(z(t)) = x_1(t),\\ &amp;g_{11}(z(t)) = (1+\\varepsilon {\\rm sin}x_3(t))\\\\\\end{aligned}\\]è®¡ç®—ç³»æ•°çš„æœ€å¤§æœ€å°å€¼ï¼Œæœ‰ï¼ˆåŠ  * å·çš„æ˜¯åŸæ–‡ä¸­åˆ—å‡ºçš„ï¼Œç•¥å»äº†  $a=b=0$ é¡¹ï¼‰\\[\\begin{aligned}a_{111} &amp;= 0,\\ &amp;a_{112} = 0\\\\*a_{121} &amp;= 1,\\ &amp;a_{122} = 1\\\\a_{131} &amp;= 0,\\ &amp;a_{132} = 0\\\\b_{111} &amp;= 0,\\ &amp;b_{112} = 0\\\\\\\\*a_{211} &amp;= 1,\\ &amp;a_{212} = 0\\\\a_{221} &amp;= 0,\\ &amp;a_{222} = 0\\\\*a_{231} &amp;= -1,\\ &amp;a_{232} = -1\\\\b_{211} &amp;= 0,\\ &amp;b_{212} = 0\\\\\\\\a_{311} &amp;= 0,\\ &amp;a_{312} = 0\\\\a_{321} &amp;= 0,\\ &amp;a_{322} = 0\\\\*a_{331} &amp;= 5,\\ &amp;a_{332} = -5\\\\*b_{311} &amp;= 1.5,\\ &amp;b_{312} = 0.5\\\\\\end{aligned}\\]éš¶å±åº¦å‡½æ•°æŒ‡å®šä¸ºï¼ˆåŠ  * å·çš„æ˜¯åŸæ–‡ä¸­åˆ—å‡ºçš„ï¼Œç•¥å»äº† $a=b=0$ å¯¹åº”é¡¹ï¼‰\\[\\begin{aligned}h_{111}(z(t)) &amp;= 0.5,\\ &amp;h_{112}(z(t)) = 0.5\\\\*h_{121}(z(t)) &amp;= 0.5,\\ &amp;h_{122}(z(t)) = 0.5\\\\h_{131}(z(t)) &amp;= 0.5,\\ &amp;h_{132}(z(t)) = 0.5\\\\v_{111}(z(t)) &amp;= 0.5,\\ &amp;v_{112}(z(t)) = 0.5\\\\\\\\*h_{211}(z(t)) &amp;= {\\rm cos}x_2(t),\\ &amp;h_{212}(z(t)) = 1-{\\rm cos}x_2(t)\\\\h_{221}(z(t)) &amp;= 0.5,\\ &amp;h_{222}(z(t)) = 0.5\\\\*h_{231}(z(t)) &amp;= 0.5,\\ &amp;h_{232}(z(t)) = 0.5\\\\v_{211}(z(t)) &amp;= 0.5,\\ &amp;v_{212}(z(t)) = 0.5\\\\\\\\h_{311}(z(t)) &amp;= 0.5,\\ &amp;h_{312}(z(t)) = 0.5\\\\h_{321}(z(t)) &amp;= 0.5,\\ &amp;h_{322}(z(t)) = 0.5\\\\*h_{331}(z(t)) &amp;= \\frac{x_1(t)+5}{10},\\ &amp;h_{332}(z(t)) = \\frac{5-x_1(t)}{10}\\\\*v_{311}(z(t)) &amp;= \\frac{1+{\\rm sin}x_3(t)}{2},\\ &amp;v_{312}(z(t)) = \\frac{1-{\\rm sin}x_3(t)}{2}\\\\\\end{aligned}\\]æ ¹æ®ä¸€èˆ¬å½¢å¼\\[\\dot \\boldsymbol x(t) =\\sum_{i=1}^n\\sum_{j=1}^n\\sum_{l=1}^2 h_{ijl}(\\boldsymbol z(t))a_{ijl} \\boldsymbol U^A_{ij} \\boldsymbol x(t) + \\sum_{i=1}^n\\sum_{k=1}^m\\sum_{l=1}^2 v_{ikl}(\\boldsymbol z(t))b_{ikl}\\boldsymbol U^B_{ik}\\boldsymbol u(t)\\]åˆ™åŸç³»ç»Ÿå¯¹åº”çš„æ¨¡ç³Šæ¨¡å‹å¯ä»¥å†™ä¸ºï¼ˆæ‰€æœ‰ 0 é¡¹ä¹˜ç§¯å¿½ç•¥ï¼‰\\[\\begin{aligned}\\dot \\boldsymbol x(t) = &amp;h_{121}a_{121}\\boldsymbol U_{12}^A \\boldsymbol x(t)+h_{122}a_{122}\\boldsymbol U_{12}^A \\boldsymbol x(t)+\\\\&amp; h_{211}a_{211}\\boldsymbol U^A_{21} \\boldsymbol x(t)+h_{212}a_{212}\\boldsymbol U^A_{21} \\boldsymbol x(t)+\\\\&amp; h_{231}a_{231}\\boldsymbol U^A_{23} \\boldsymbol x(t)+h_{232}a_{232}\\boldsymbol U^A_{23} \\boldsymbol x(t)+\\\\&amp; h_{331}a_{331}\\boldsymbol U^A_{33} \\boldsymbol x(t)+h_{332}a_{332}\\boldsymbol U^A_{33} \\boldsymbol x(t)+\\\\&amp; v_{311}b_{311}\\boldsymbol U^B_{31} \\boldsymbol u(t)+v_{312}b_{312}\\boldsymbol U^B_{31} \\boldsymbol u(t)\\end{aligned}\\]è¿›è¡ŒçŸ©é˜µåŒ–ï¼Œ$h, a$ çš„å‰ä¸¤ä¸ªä¸‹æ ‡ä»¥åŠ $U$ çš„ä¸‹æ ‡ä¸ºè¡Œåˆ—å·ï¼Œ$h, a$ çš„ç¬¬ä¸‰ä¸ªä¸‹æ ‡ä¸ºæœ€å¤§æœ€å°å€¼çš„åŠ æƒå’Œä½œä¸ºå…ƒç´ å€¼ï¼Œåˆ—å†™å‡ºå­çŸ©é˜µ\\[\\begin{aligned}\\boldsymbol A_1 &amp;= h_{121}a_{121}\\boldsymbol U_{12}^A\\\\\\boldsymbol A_2 &amp;= h_{122}a_{122}\\boldsymbol U_{12}^A\\\\\\boldsymbol A_3 &amp;= h_{211}a_{211}\\boldsymbol U_{21}^A\\\\\\boldsymbol A_4 &amp;= h_{212}a_{212}\\boldsymbol U_{21}^A\\\\\\boldsymbol A_5 &amp;= h_{231}a_{231}\\boldsymbol U_{23}^A\\\\\\boldsymbol A_6 &amp;= h_{232}a_{232}\\boldsymbol U_{23}^A\\\\\\boldsymbol A_7 &amp;= h_{331}a_{331}\\boldsymbol U_{33}^A\\\\\\boldsymbol A_8 &amp;= h_{332}a_{332}\\boldsymbol U_{33}^A\\\\\\boldsymbol B_1 &amp;= v_{311}a_{311}\\boldsymbol U_{31}^B\\\\\\boldsymbol B_2 &amp;= v_{312}a_{312}\\boldsymbol U_{31}^B\\\\\\end{aligned}\\]ä»¤\\[\\begin{aligned}\\boldsymbol A &amp;= \\boldsymbol A_1+\\boldsymbol A_2+\\cdots+\\boldsymbol A_8\\\\\\boldsymbol B &amp;= \\boldsymbol B_1+\\boldsymbol B_2\\end{aligned}\\]æœ‰\\[\\begin{aligned}\\dot \\boldsymbol x(t) &amp;= \\boldsymbol A\\boldsymbol x(t) + \\boldsymbol B\\boldsymbol u(t)\\\\\\end{aligned}\\]ä½†æ˜¯è¿™å¹¶ä¸æ˜¯å¹¿ä¹‰æ¨¡ç³Š TS ç³»ç»Ÿçš„å½¢å¼ï¼Œä¸‹é¢è¿›è¡Œè½¬æ¢ã€‚æ³¨æ„åˆ°ï¼ˆå­˜åœ¨ä¸¤ç»„æœ€å¤§æœ€å°å€¼ç›¸ç­‰çš„æƒ…å†µï¼‰\\[a_{121}=a_{122}=1,\\ a_{231}=a_{232}=-1\\]åˆ™\\[\\begin{aligned}\\boldsymbol A_1 &amp;= \\boldsymbol A_2 = 0.5\\boldsymbol U_{12}^A\\\\\\boldsymbol A_5 &amp;= \\boldsymbol A_6 = -0.5\\boldsymbol U_{23}^A\\\\\\boldsymbol A_{b1} &amp;= \\boldsymbol A_1 + \\boldsymbol A_2 = \\begin{bmatrix}  0&amp;1&amp;0\\\\  0&amp;0&amp;0\\\\  0&amp;0&amp;0\\end{bmatrix}\\\\\\boldsymbol A_{b2} &amp;= \\boldsymbol A_5 + \\boldsymbol A_6 = \\begin{bmatrix}  0&amp;0&amp;0\\\\  0&amp;0&amp;-1\\\\  0&amp;0&amp;0\\end{bmatrix}\\\\\\boldsymbol A_{b} &amp;= \\boldsymbol A_{b1} + \\boldsymbol A_{b2} = \\begin{bmatrix}  0&amp;1&amp;0\\\\  0&amp;0&amp;-1\\\\  0&amp;0&amp;0\\end{bmatrix}\\end{aligned}\\]åˆ†æå…¶å®ƒå­çŸ©é˜µã€‚å°†å­çŸ©é˜µè¿›è¡Œå˜æ¢ï¼Œå¦‚ä¸‹\\[\\begin{aligned}\\boldsymbol A_3 &amp;= h_{211}a_{211}\\boldsymbol U_{21}^A = h_{211}(v_{311}+v_{312})(h_{331}+h_{332})a_{211}\\boldsymbol U_{21}^A\\\\\\boldsymbol A_4 &amp;= h_{212}a_{211}\\boldsymbol U_{21}^A = h_{212}(v_{311}+v_{312})(h_{331}+h_{332})a_{212}\\boldsymbol U_{21}^A\\\\\\boldsymbol A_7 &amp;= h_{331}a_{331}\\boldsymbol U_{33}^A = h_{331}(v_{311}+v_{312})(h_{211}+h_{212}) a_{331}\\boldsymbol U_{33}^A\\\\\\boldsymbol A_8 &amp;= h_{332}a_{332}\\boldsymbol U_{33}^A = h_{332}(v_{311}+v_{312})(h_{211}+h_{212})a_{332}\\boldsymbol U_{33}^A\\\\\\boldsymbol B_1 &amp;= v_{311}b_{311}\\boldsymbol U_{31}^B= v_{311}(h_{211}+h_{212})(h_{331}+h_{332})b_{311}\\boldsymbol U_{31}^B\\\\\\boldsymbol B_2 &amp;= v_{312}b_{312}\\boldsymbol U_{31}^B= v_{312}(h_{211}+h_{212})(h_{331}+h_{332})b_{312}\\boldsymbol U_{31}^B\\\\\\end{aligned}\\]ç±»ä¼¼çš„ï¼Œå°†å‰é¢çš„ä¸¤ä¸ªçŸ©é˜µçš„ç³»æ•°è¿›è¡Œé…åˆ\\[\\begin{aligned}  \\boldsymbol A_{b} &amp;= (h_{211}+h_{212})(v_{311}+v_{312})(h_{331}+h_{332})\\boldsymbol A_{b}\\\\\\end{aligned}\\]å°†ç³»æ•°å±•å¼€åå¾—åˆ° å…« ç»„ç³»æ•°\\[\\begin{aligned}h_1 &amp;= h_{211}h_{331}v_{311}\\\\h_2 &amp;= h_{212}h_{331}v_{311}\\\\h_3 &amp;= h_{211}h_{332}v_{311}\\\\h_4 &amp;= h_{212}h_{332}v_{311}\\\\h_5 &amp;= h_{211}h_{331}v_{312}\\\\h_6 &amp;= h_{212}h_{331}v_{312}\\\\h_7 &amp;= h_{211}h_{332}v_{312}\\\\h_8 &amp;= h_{212}h_{332}v_{312}\\\\\\end{aligned}\\]åˆ™\\[\\begin{aligned}  \\boldsymbol A_{b} &amp;= (h_1+h_2+h_3+h_4+h_5+h_6+h_7+h_8)\\boldsymbol A_{b}\\\\  \\boldsymbol A_3 &amp;=(h_1+h_3+h_5+h_7)a_{211}\\boldsymbol U_{21}^A\\\\  \\boldsymbol A_4 &amp;=(h_2+h_4+h_6+h_8)a_{212}\\boldsymbol U_{21}^A\\\\  \\boldsymbol A_7 &amp;=(h_1+h_2+h_5+h_6)a_{331}\\boldsymbol U_{33}^A\\\\  \\boldsymbol A_8 &amp;=(h_3+h_4+h_7+h_8)a_{332}\\boldsymbol U_{33}^A\\\\  \\boldsymbol B_1 &amp;= (h_1+h_2+h_3+h_4)\\boldsymbol b_{311}U_{31}^B\\\\  \\boldsymbol B_2 &amp;= (h_5+h_6+h_7+h_8)\\boldsymbol b_{312}U_{31}^B\\\\\\end{aligned}\\]æŒ‰ç…§ç³»æ•° $h$ é‡æ–°æ•´ç†çŸ©é˜µï¼Œæœ‰\\[\\begin{aligned}\\boldsymbol A = &amp;h_1\\boldsymbol A_1+h_2\\boldsymbol A_2+\\cdots+h_8\\boldsymbol A_8 +\\\\&amp;h_1\\boldsymbol B_1 + h_2\\boldsymbol B_2 + \\cdots + h_8\\boldsymbol B_8\\end{aligned}\\]å…¶ä¸­\\[\\begin{aligned}  \\boldsymbol A_1 &amp;= \\boldsymbol A_5 = \\boldsymbol A_b + a_{211}\\boldsymbol U_{21}^A + a_{331}\\boldsymbol U_{33}^A =  \\begin{bmatrix}  0&amp;1&amp;0\\\\  \\boldsymbol 1&amp;0&amp;-1\\\\  0&amp;0&amp;\\boldsymbol 5  \\end{bmatrix}\\\\  \\boldsymbol A_2 &amp;= \\boldsymbol A_6  = \\boldsymbol A_b + a_{212}\\boldsymbol U_{21}^A + a_{331}\\boldsymbol U_{33}^A =  \\begin{bmatrix}  0&amp;1&amp;0\\\\  \\boldsymbol 0&amp;0&amp;-1\\\\  0&amp;0&amp;\\boldsymbol 5  \\end{bmatrix}\\\\  \\boldsymbol A_3 &amp;= \\boldsymbol A_7 = \\boldsymbol A_b + a_{211}\\boldsymbol U_{21}^A + a_{332}\\boldsymbol U_{33}^A =  \\begin{bmatrix}  0&amp;1&amp;0\\\\  \\boldsymbol 1&amp;0&amp;-1\\\\  0&amp;0&amp;-\\boldsymbol 5  \\end{bmatrix}\\\\  \\boldsymbol A_4 &amp;= \\boldsymbol A_8 = \\boldsymbol A_b + a_{212}\\boldsymbol U_{21}^A + a_{332}\\boldsymbol U_{33}^A =  \\begin{bmatrix}  0&amp;1&amp;0\\\\  \\boldsymbol 0&amp;0&amp;-1\\\\  0&amp;0&amp;-\\boldsymbol 5  \\end{bmatrix}\\\\  \\boldsymbol B_1 &amp;= \\boldsymbol B_2 = \\boldsymbol B_3 = \\boldsymbol B_4 = b_{311}U_{31}^B =  \\begin{bmatrix}  0\\\\  0\\\\  1.5  \\end{bmatrix}\\\\  \\boldsymbol B_5 &amp;= \\boldsymbol B_6 = \\boldsymbol B_7 = \\boldsymbol B_8 = b_{312}U_{31}^B =  \\begin{bmatrix}  0\\\\  0\\\\  0.5  \\end{bmatrix}\\\\  \\end{aligned}\\]è‡³æ­¤ç»ˆäºæ¨å¾—æ–‡ä¸­ ã€Œæ˜“å¾—ã€ çš„ç³»æ•°ï¼Œæ±—ï¼æŒ‰ç…§æ•´ç†åçš„ç³»æ•°å’ŒçŸ©é˜µé‡æ–°å†™ç³»ç»ŸçŠ¶æ€æ–¹ç¨‹ï¼Œæœ‰\\[\\dot \\boldsymbol x(t) = \\sum_{i=1}^8 h_i(\\boldsymbol z(t))[\\boldsymbol A_i\\boldsymbol x(t) + \\boldsymbol B_i\\boldsymbol u(t)]\\]  Note that this fuzzy model has nonlinear terms in $A(2,1),A(3,3)$, and $B(3,1)$, where denotes the (2, 1) element of $A$ matrix.åŸæ–‡è¯´æ¨¡ç³Šç³»ç»Ÿçš„ $\\boldsymbol A$ çš„ $(2,1),(3,3)$ å…ƒç´ å’ŒçŸ©é˜µ $\\boldsymbol B$ çš„ $(3,1)$ å…ƒç´ æ˜¯éçº¿æ€§é¡¹ã€‚ä¸ªäººè§‰å¾—ï¼Œå•çº¯ä»ç³»æ•°çŸ©é˜µè€Œè¨€ $\\boldsymbol A(3,3)$ å¹¶ä¸æ˜¯éçº¿æ€§é¡¹ï¼Œä½†æ˜¯å¯¹äºæ•´ä¸ªç³»ç»Ÿè€Œè¨€çš„ç¡®æ˜¯éçº¿æ€§çš„ã€‚3.2. è§„åˆ™çº¦å‡3.2.1. çº¦å‡æ–¹å¼è§„åˆ™çº¦å‡ä¸ä½¿ç”¨ LMI è¿›è¡Œæ§åˆ¶å™¨è®¾è®¡çš„è®¡ç®—å·¥ä½œé‡å¯†åˆ‡ç›¸å…³ã€‚åŸºæœ¬æ€è·¯ï¼šå°†éçº¿æ€§é¡¹ $f_{ij}(\\boldsymbol z(t)), g_{ik}(\\boldsymbol z(t))$ æ›¿æ¢ä¸ºå¸¸æ•°é¡¹ $a_{i_0j_0},b_{i_0k_0}$ï¼Œå…¶ä¸­ $a_{i_0j_0}=(a_{ij1}+a_{ij2})/2,\\ b_{i_0k_0} = (b_{ik1}+b_{ik2})/2$ã€‚å¯¹äºä»»æ„çš„ $i_0,j_0$ï¼Œå¯¹ $f_{i_0j_0}(\\boldsymbol z(t))$ çº¦å‡åçš„æ¨¡å‹ä¸º\\[\\begin{aligned}\\dot \\boldsymbol x(t) = &amp;\\mathop{\\sum_{i=1}^n\\sum_{j=1}^n\\sum_{l=1}^2}\\limits_{(i,j)\\neq (i_0,j_0)} h_{ijl}(\\boldsymbol z(t))a_{ijl} \\boldsymbol U^A_{ij} \\boldsymbol x(t)\\\\&amp;+a_{i_0j_0}\\boldsymbol U^A_{i_0j_0} \\boldsymbol x(t)\\\\&amp;+\\sum_{i=1}^n\\sum_{k=1}^m\\sum_{l=1}^2 v_{ijl}(\\boldsymbol z(t))b_{ikl}\\boldsymbol U^B_{ik}\\boldsymbol u(t)\\end{aligned}\\]ç±»ä¼¼åœ°ï¼Œå¯¹äºä»»æ„çš„ $i_0,k_0$ï¼Œå¯¹ $g_{i_0j_0}(\\boldsymbol z(t))$ çº¦å‡åçš„æ¨¡å‹ä¸º\\[\\begin{aligned}\\dot \\boldsymbol x(t) = &amp;\\sum_{i=1}^n\\sum_{j=1}^n\\sum_{l=1}^2 h_{ijl}(\\boldsymbol z(t))a_{ijl} \\boldsymbol U^A_{ij} \\boldsymbol x(t)\\\\&amp;+\\mathop{\\sum_{i=1}^n\\sum_{k=1}^m\\sum_{l=1}^2}\\limits_{(i,k)\\neq (i_0,k_0)} v_{ikl}(\\boldsymbol z(t))b_{ikl}\\boldsymbol U^B_{ik}\\boldsymbol u(t)\\\\&amp;+b_{i_0k_0}\\boldsymbol U^B_{i_0k_0} \\boldsymbol u(t)\\end{aligned}\\]ä¸ªäººç†è§£ï¼Œå‡è®¾é’ˆå¯¹ç¬¬ $(i,j)=(1,1)$ ä¸ª $f_{ij}$ è¿›è¡Œè§„åˆ™çº¦å‡ï¼Œæœ‰\\[\\begin{aligned}\\dot \\boldsymbol x(t) &amp;=\\sum_{l=1}^2\\left[\\begin{bmatrix}  h_{11l}a_{11l}&amp;\\cdots&amp;h_{1nl}a_{1nl}\\\\  \\vdots&amp;\\ddots&amp;\\vdots\\\\  h_{n1l}a_{n1l}&amp;\\cdots&amp;h_{nnl}a_{nnl}\\\\\\end{bmatrix}\\begin{bmatrix}  x_1(t)\\\\  \\vdots\\\\  x_n(t)\\end{bmatrix}+\\begin{bmatrix}  v_{11l}b_{11l}&amp;\\cdots&amp;v_{1ml}b_{1ml}\\\\  \\vdots&amp;\\ddots&amp;\\vdots\\\\  v_{n1l}b_{n1l}&amp;\\cdots&amp;v_{nml}b_{nml}\\\\\\end{bmatrix}\\begin{bmatrix}  u_1(t)\\\\  \\vdots\\\\  u_m(t)\\end{bmatrix}\\right]\\\\&amp;=\\begin{bmatrix}  h_{111}a_{111}+h_{112}a_{112}&amp;\\cdots&amp;h_{1n1}a_{1n1}+h_{1n2}a_{1n2}\\\\  \\vdots&amp;\\ddots&amp;\\vdots\\\\  h_{n11}a_{n11}+h_{n12}a_{n12}&amp;\\cdots&amp;h_{nn1}a_{nn1}+h_{nn2}a_{nn2}\\\\\\end{bmatrix}\\begin{bmatrix}  x_1(t)\\\\  \\vdots\\\\  x_n(t)\\end{bmatrix}+\\cdots\\\\&amp;=\\begin{bmatrix}  (a_{111}+a_{112})/2&amp;\\cdots&amp;h_{1n1}a_{1n1}+h_{1n2}a_{1n2}\\\\  \\vdots&amp;\\ddots&amp;\\vdots\\\\  h_{n11}a_{n11}+h_{n12}a_{n12}&amp;\\cdots&amp;h_{nn1}a_{nn1}+h_{nn2}a_{nn2}\\\\\\end{bmatrix}\\begin{bmatrix}  x_1(t)\\\\  \\vdots\\\\  x_n(t)\\end{bmatrix}+\\cdots\\end{aligned}\\]åŒç†ï¼Œå¯¹ç¬¬ $(i,k)=(1,1)$ ä¸ª $g_{ik}$ è¿›è¡Œè§„åˆ™çº¦å‡ï¼Œæœ‰\\[\\begin{aligned}\\dot \\boldsymbol x(t) &amp;=\\cdots + \\begin{bmatrix}  (b_{111}+b_{112})/2&amp;\\cdots&amp;v_{1m1}b_{1m1}+v_{1m2}v_{1m2}\\\\  \\vdots&amp;\\ddots&amp;\\vdots\\\\  v_{n11}b_{n11}+v_{n12}b_{n12}&amp;\\cdots&amp;v_{nm1}b_{nm1}+v_{nm2}b_{nm2}\\\\\\end{bmatrix}\\begin{bmatrix}  u_1(t)\\\\  \\vdots\\\\  u_m(t)\\end{bmatrix}\\end{aligned}\\]3.2.2. æ¨¡å‹ä¸ç¡®å®šæ€§å¯¹åŸå§‹æ¨¡å‹è¿›è¡Œè§„åˆ™çº¦å‡åï¼Œä¼šå­˜åœ¨çº¦å‡åå·®ï¼Œä½œè€…å°†å…¶è½¬åŒ–ä¸ºæ¨¡å‹ä¸ç¡®å®šæ€§ã€‚  ä»»ä¸€çº¦å‡å¯¹äºæŸä¸€ $i_0,j_0,k_0$ é¡¹è¿›è¡Œè§„åˆ™çº¦å‡ï¼Œå‡è®¾æ¨¡å‹ä¸ç¡®å®šæ€§ä¸º $\\delta^A_{i_0j_0}(t),\\delta^B_{i_0k_0}(t)$ï¼Œå·²çŸ¥\\[a_{i_0j_0}=\\frac{a_{ij1}+a_{ij2}}{2},\\ b_{i_0k_0}=\\frac{b_{ik1}+b_{ik2}}{2}\\]é‚£ä¹ˆåŸæ¨¡å‹å¯å†™ä¸º\\[\\begin{aligned}\\dot \\boldsymbol x(t) = &amp;\\mathop{\\sum_{i=1}^n\\sum_{j=1}^n\\sum_{l=1}^2}\\limits_{(i,j)\\neq (i_0,j_0)} h_{ijl}(\\boldsymbol z(t))a_{ijl} \\boldsymbol U^A_{ij} \\boldsymbol x(t)\\\\&amp;+(a_{i_0j_0} + \\delta^A_{i_0j_0}(t))\\boldsymbol U^A_{i_0j_0} \\boldsymbol x(t)\\\\&amp;+\\mathop{\\sum_{i=1}^n\\sum_{k=1}^m\\sum_{l=1}^2}\\limits_{(i,k)\\neq (i_0,k_0)} v_{ikl}(\\boldsymbol z(t))b_{ikl}\\boldsymbol U^B_{ik}\\boldsymbol u(t)\\\\&amp;+(b_{i_0k_0}+\\delta^B_{i_0k_0}(t))\\boldsymbol U^B_{i_0k_0} \\boldsymbol u(t)\\end{aligned}\\]è¿™ç§çº¦å‡å¯¼è‡´çš„åå·®ï¼Œæœ€å¤§ä¸ä¼šè¶…è¿‡å¯¹åº”éçº¿æ€§é¡¹å–å€¼èŒƒå›´çš„ä¸€åŠï¼ˆæ¯”å¦‚è¯¥é¡¹å®é™…å–å€¼ä¸ºæœ€å°å€¼ï¼Œç»“æœæˆ‘ä»¬ç”¨å…¶å¹³å‡å€¼ä½œä¸ºæ›¿ä»£ï¼Œæ­¤æ—¶åå·®æ­£å¥½ä¸ºå–å€¼èŒƒå›´çš„ä¸€åŠï¼‰ã€‚å³\\[\\vert\\vert \\delta^A_{i_0j_0}(t) \\vert\\vert \\leq \\frac{a_{ij1}-a_{ij2}}{2},\\ \\vert\\vert \\delta^B_{i_0k_0}(t) \\vert\\vert\\leq \\frac{b_{ik1}-b_{ik2}}{2}\\]å¯¹æ¨¡ç³ŠåŒ–åçš„ç³»ç»Ÿæ–¹ç¨‹è¿›è¡Œé‡æ–°è¡¨è¾¾ï¼Œä»¤\\[\\begin{aligned}r&amp;=2^{n(n+m)}\\end{aligned}\\]åˆ™ç³»ç»Ÿå¯ä»¥å†™ä¸º\\[\\begin{aligned}\\dot \\boldsymbol x(t)&amp;=\\sum_{p=1}^{2^{n(n+m)}} \\hat h_p(\\boldsymbol z(t))[\\hat \\boldsymbol A_p\\boldsymbol x(t) + \\hat \\boldsymbol B_p\\boldsymbol u(t)]\\\\&amp;= \\sum_{p=1}^{\\frac{1}{4}r}h_p(\\boldsymbol z(t))[\\boldsymbol A_p\\boldsymbol x(t)+\\boldsymbol B_p\\boldsymbol u(t)+\\delta^A_{i_0j_0}(t) \\boldsymbol U_{i_0j_0}\\boldsymbol x(t)+\\delta^B_{i_0k_0}(t) \\boldsymbol U_{i_0k_0}\\boldsymbol u(t)]\\\\&amp;=\\sum_{p=1}^{\\frac{1}{4}r}h_p(\\boldsymbol z(t))[  (\\boldsymbol A_p + \\boldsymbol D_{ap}\\Delta_{ap}(t)\\boldsymbol E_{ap})\\boldsymbol x(t)+(\\boldsymbol B_p+ \\boldsymbol D_{bp}\\Delta_{bp}(t)\\boldsymbol E_{bp})\\boldsymbol u(t)]\\end{aligned}\\]å…¶ä¸­ï¼Œ$\\frac{1}{4}r$ æ˜¯å› ä¸ºç³»ç»Ÿä¸­æœ‰ä¸¤é¡¹ï¼ˆ$f_{ij},g_{ik}$ï¼‰è¢«çº¦å‡äº†ã€‚æ¯å°‘ä¸€é¡¹ï¼Œéœ€è¦éå†çš„å‚æ•°å‡åŠï¼ˆå‚è€ƒå‰é¢ç³»æ•°å’Œçš„è¿ä¹˜çš„åˆ†æï¼‰ï¼Œå› æ­¤æ€»è§„åˆ™ä¸ªæ•°éœ€è¦é™¤ä»¥ $2\\cdot 2=4$ã€‚$\\boldsymbol A_p,\\boldsymbol B_p$ ä¸ºå»é™¤ $(i_0,j_0)$ å…ƒç´ åçš„ç³»æ•°çŸ©é˜µã€‚çŸ©é˜µ $\\boldsymbol D_{ap},\\boldsymbol E_{ap},\\boldsymbol D_{bp},\\boldsymbol E_{bp}$ ä¸º\\[\\begin{aligned}\\boldsymbol D_{ap} &amp;= \\boldsymbol D_{bp} = i_0\\begin{bmatrix}  0\\\\\\vdots\\\\0\\\\1\\\\0\\\\ \\vdots\\\\ 0\\end{bmatrix}\\\\&amp;\\quad \\quad \\quad \\quad \\ \\ \\ j_0\\\\\\boldsymbol E_{ap} &amp;= [0\\ \\cdots\\ 0\\ 1\\ 0\\ \\cdots\\ 0]\\\\&amp;\\quad \\quad \\quad \\quad \\ \\ \\ k_0\\\\\\boldsymbol E_{bp} &amp;= [0\\ \\cdots\\ 0\\ 1\\ 0\\ \\cdots\\ 0]\\\\\\end{aligned}\\]  ä¸€èˆ¬çº¦å‡å¯¹äºä»»æ„ $i,j,k$ é¡¹è¿›è¡Œè§„åˆ™çº¦å‡ï¼Œå¼•å…¥æ¨¡å‹ä¸ç¡®å®šæ€§ $\\boldsymbol \\Delta^A_{ij}(t),\\boldsymbol \\Delta^B_{ik}(t)$ï¼Œæœ‰\\[\\begin{aligned}\\dot \\boldsymbol x(t)&amp;=\\sum_{i=1}^n\\sum_{j=1}^n (a_{ij}+\\delta^A_{ij}(t))\\boldsymbol U_{ij}^A\\boldsymbol x(t) + \\sum_{i=1}^n\\sum_{k=1}^m (b_{ik}+\\delta^B_{ik}(t))\\boldsymbol U_{ik}^B\\boldsymbol u(t)\\\\\\end{aligned}\\]å…¶ä¸­\\[\\vert\\vert \\delta^A_{ij}(t) \\vert\\vert \\leq \\frac{a_{ij1}-a_{ij2}}{2},\\ \\vert\\vert \\delta^B_{ik}(t) \\vert\\vert\\leq \\frac{b_{ik1}-b_{ik2}}{2}\\]å†™æˆçŸ©é˜µçš„å½¢å¼\\[\\dot \\boldsymbol x(t)=\\sum_{i=1}^{\\frac{1}{4}r} (\\boldsymbol A_i+\\boldsymbol D_{ai}\\boldsymbol \\Delta_{ai}(t)\\boldsymbol E_{ai})\\boldsymbol x(t)+(\\boldsymbol B_i+ \\boldsymbol D_{bi}\\boldsymbol \\Delta_{bi}(t)\\boldsymbol E_{bi})\\boldsymbol u(t)\\]å…¶ä¸­\\[\\vert\\vert \\delta^A_{ij}(t) \\vert\\vert \\leq \\frac{1}{\\rho_{ai}},\\ \\vert\\vert \\delta^B_{ik}(t) \\vert\\vert\\leq \\frac{1}{\\rho_{bi}}\\]$\\frac{1}{\\rho_{ai}},\\frac{1}{\\rho_{bi}}$ æ ¹æ®å‰é¢ä¸ç¡®å®šæ€§ä¸ç­‰å¼çš„ä¸Šç•Œå†³å®šï¼ˆåŸæ–‡å¯èƒ½è¯¯å†™ä½œ $\\rho_{ai},\\rho_{bi}$ï¼‰ã€‚  å…¨éƒ¨çº¦å‡å¯¹äºæ‰€æœ‰ $i,j,k$ é¡¹è¿›è¡Œè§„åˆ™çº¦å‡ï¼Œé‚£ä¹ˆå¾ˆæ˜¾ç„¶ï¼Œè§„åˆ™æœ€ç»ˆä» $2^{n(n+m)}$ ä¸ªå˜æˆ 1 ä¸ªã€‚å¼•å…¥æ¨¡å‹ä¸ç¡®å®šæ€§ $\\delta^A_{ij}(t),\\delta^B_{ik}(t)$ï¼Œæœ‰\\[\\begin{aligned}\\dot \\boldsymbol x(t)&amp;=\\sum_{i=1}^n\\sum_{j=1}^n (a_{ij}+\\delta^A_{ij}(t))\\boldsymbol U_{ij}^A\\boldsymbol x(t) + \\sum_{i=1}^n\\sum_{k=1}^m (b_{ik}+\\delta^B_{ik}(t))\\boldsymbol U_{ik}^B\\boldsymbol u(t)\\\\\\end{aligned}\\]å…¶ä¸­\\[\\vert\\vert \\delta^A_{ij}(t) \\vert\\vert \\leq \\frac{a_{ij1}-a_{ij2}}{2},\\ \\vert\\vert \\delta^B_{ik}(t) \\vert\\vert\\leq \\frac{b_{ik1}-b_{ik2}}{2}\\]å†™æˆçŸ©é˜µçš„å½¢å¼\\[\\dot \\boldsymbol x(t)=(\\boldsymbol A_1+\\boldsymbol D_{a1}\\boldsymbol \\Delta_{a1}(t)\\boldsymbol E_{a1})\\boldsymbol x(t)+(\\boldsymbol B_1+ \\boldsymbol D_{b1}\\boldsymbol \\Delta_{b1}(t)\\boldsymbol E_{b1})\\boldsymbol u(t)\\]å…¶ä¸­\\[\\begin{aligned}  \\boldsymbol A_1 &amp;= \\begin{bmatrix}    a_{11}&amp;a_{12}&amp;\\cdots&amp;a_{1n}\\\\    a_{21}&amp;a_{22}&amp;\\cdots&amp;a_{2n}\\\\    \\vdots&amp;\\vdots&amp;\\ddots&amp;\\vdots\\\\    a_{n1}&amp;a_{n2}&amp;\\cdots&amp;a_{nn}\\\\  \\end{bmatrix}\\in \\mathbb R^{n\\times n},\\   \\boldsymbol B_1 = \\begin{bmatrix}    b_{11}&amp;b_{12}&amp;\\cdots&amp;a_{1m}\\\\    b_{21}&amp;b_{22}&amp;\\cdots&amp;a_{2m}\\\\    \\vdots&amp;\\vdots&amp;\\ddots&amp;\\vdots\\\\    b_{n1}&amp;b_{n2}&amp;\\cdots&amp;a_{nm}\\\\  \\end{bmatrix}\\in \\mathbb R^{n\\times m}\\\\  \\boldsymbol \\Delta_{a1}(t) &amp;= diag(\\delta_{11}^A(t)\\cdots\\delta_{1n}^A(t)\\cdots\\delta_{nn}^A(t)) = \\begin{bmatrix}    \\delta_{11}^A(t)&amp;&amp;\\boldsymbol 0\\\\    &amp;\\ddots&amp;\\\\    \\boldsymbol 0&amp;&amp;\\delta_{nn}^A(t)  \\end{bmatrix}\\in R^{n^2\\times n^2}\\\\  \\boldsymbol \\Delta_{b1}(t) &amp;= diag(\\delta_{11}^B(t)\\cdots\\delta_{1m}^B(t)\\cdots\\delta_{nm}^B(t)) = \\begin{bmatrix}  \\delta_{11}^B(t)&amp;&amp;\\boldsymbol 0\\\\  &amp;\\ddots&amp;\\\\  \\boldsymbol 0&amp;&amp;\\delta_{nm}^B(t)  \\end{bmatrix}\\in R^{nm\\times nm}\\\\  \\boldsymbol D_{a1} &amp;= \\begin{bmatrix}    \\overbrace{1 1\\cdots 1}^n&amp;&amp;\\boldsymbol 0\\\\    \\vdots&amp;\\ddots&amp;\\vdots\\\\    \\boldsymbol 0&amp;&amp;\\overbrace{1 1\\cdots 1}^n  \\end{bmatrix}\\in \\mathbb R^{n\\times n^2},\\   \\boldsymbol D_{b1} = \\begin{bmatrix}  \\overbrace{1 1\\cdots 1}^m&amp;&amp;\\boldsymbol 0\\\\  \\vdots&amp;\\ddots&amp;\\vdots\\\\  \\boldsymbol 0&amp;&amp;\\overbrace{1 1\\cdots 1}^m  \\end{bmatrix}\\in \\mathbb R^{n\\times nm}\\\\  \\boldsymbol E_{a1} &amp;= \\begin{bmatrix}    \\boldsymbol I_n\\\\    \\vdots\\\\    \\boldsymbol I_n\\\\  \\end{bmatrix} =\\begin{bmatrix}    1&amp;&amp;\\boldsymbol 0\\\\    &amp;\\ddots&amp;\\\\    \\boldsymbol 0&amp;&amp;1\\\\    1&amp;&amp;\\boldsymbol 0\\\\    &amp;\\ddots&amp;\\\\    \\boldsymbol 0&amp;&amp;1\\\\    &amp;\\vdots&amp;\\\\    \\boldsymbol 0&amp;&amp;1\\\\  \\end{bmatrix}\\in \\mathbb R^{n^2\\times n},\\   \\boldsymbol E_{b1} = \\begin{bmatrix}    \\boldsymbol I_m\\\\    \\vdots\\\\    \\boldsymbol I_m\\\\  \\end{bmatrix} \\in \\mathbb R^{nm\\times m},\\end{aligned}\\]åå·®çŸ©é˜µ $\\boldsymbol D_{a1}\\boldsymbol \\Delta_{a1}(t)\\boldsymbol E_{a1}$ å’Œç³»æ•°çŸ©é˜µ $\\boldsymbol A_1$ çš„å½¢å¼ä¸€è‡´ï¼Œè™½ç„¶æˆ‘å¹¶ä¸æ˜ç™½ä¸ºä»€ä¹ˆéè¦è¿™ä¹ˆå†™æˆè¿™ä¹ˆå¤æ‚çš„çŸ©é˜µå½¢å¼\\[\\begin{aligned}\\boldsymbol D_{a1}\\boldsymbol \\Delta_{a1}(t)\\boldsymbol E_{a1} &amp;=\\begin{bmatrix}  \\overbrace{1 1\\cdots 1}^n&amp;&amp;\\boldsymbol 0\\\\  \\vdots&amp;\\ddots&amp;\\vdots\\\\  \\boldsymbol 0&amp;&amp;\\overbrace{1 1\\cdots 1}^n\\end{bmatrix}_{n\\times n^2}\\begin{bmatrix}  \\delta_{11}^A(t)&amp;&amp;\\boldsymbol 0\\\\  &amp;\\ddots&amp;\\\\  \\boldsymbol 0&amp;&amp;\\delta_{nn}^A(t)\\end{bmatrix}_{n^2\\times n^2}\\begin{bmatrix}  1&amp;&amp;\\boldsymbol 0\\\\  &amp;\\ddots&amp;\\\\  \\boldsymbol 0&amp;&amp;1\\\\  1&amp;&amp;\\boldsymbol 0\\\\  &amp;\\ddots&amp;\\\\  \\boldsymbol 0&amp;&amp;1\\\\  &amp;\\vdots&amp;\\\\  \\boldsymbol 0&amp;&amp;1\\\\\\end{bmatrix}_{n^2\\times n}\\\\&amp;=\\begin{bmatrix}  \\overbrace{\\delta_{11}^A(t)\\ \\delta_{12}^A(t)\\ \\cdots \\delta_{1n}^A(t)}^n&amp;&amp;\\boldsymbol 0\\\\  \\vdots&amp;\\ddots&amp;\\vdots\\\\  \\boldsymbol 0&amp;&amp;\\overbrace{\\delta_{n1}^A(t)\\ \\delta_{n2}^A(t)\\ \\cdots \\delta_{nn}^A(t)}^n\\end{bmatrix}_{n\\times n^2}\\begin{bmatrix}  1&amp;&amp;\\boldsymbol 0\\\\  &amp;\\ddots&amp;\\\\  \\boldsymbol 0&amp;&amp;1\\\\  1&amp;&amp;\\boldsymbol 0\\\\  &amp;\\ddots&amp;\\\\  \\boldsymbol 0&amp;&amp;1\\\\  &amp;\\vdots&amp;\\\\  \\boldsymbol 0&amp;&amp;1\\\\\\end{bmatrix}_{n^2\\times n}\\\\&amp;=\\begin{bmatrix}  \\delta_{11}^A(t)&amp;\\delta_{12}^A(t)&amp;\\cdots&amp;\\delta_{1n}^A(t)\\\\  \\delta_{21}^A(t)&amp;\\delta_{22}^A(t)&amp;\\cdots&amp;\\delta_{2n}^A(t)\\\\  \\vdots&amp;\\vdots&amp;\\ddots&amp;\\vdots\\\\  \\delta_{n1}^A(t)&amp;\\delta_{n2}^A(t)&amp;\\cdots&amp;\\delta_{nn}^A(t)\\\\\\end{bmatrix}\\end{aligned}\\]åå·®çŸ©é˜µ $\\boldsymbol D_{b1}\\boldsymbol \\Delta_{b1}(t)\\boldsymbol E_{b1}$ å’Œç³»æ•°çŸ©é˜µ $\\boldsymbol B_1$ ç±»ä¼¼ï¼Œè¿™é‡Œä¸å†èµ˜è¿°ã€‚3.2.3. ä¸¾ä¾‹å¯¹å‰é¢å·²ç»å®Œæˆå»ºæ¨¡çš„ç³»ç»Ÿï¼ˆ3.1.3. ä¸¾ä¾‹ï¼‰è¿›è¡Œè§„åˆ™çº¦å‡ã€‚ç³»ç»ŸçŠ¶æ€æ–¹ç¨‹ä¸º\\[\\dot \\boldsymbol x(t) = \\sum_{i=1}^8 h_i(\\boldsymbol z(t))[\\boldsymbol A_i\\boldsymbol x(t) + \\boldsymbol B_i\\boldsymbol u(t)]\\]å…¶ä¸­\\[\\begin{aligned}  h_1 &amp;= h_{211}h_{331}v_{311}={\\rm cos}x_2(t)\\cdot\\frac{5+x_1(t)}{10}\\cdot\\frac{1+{\\rm sin}x_3(t)}{2}\\\\  h_2 &amp;= h_{212}h_{331}v_{311}=(1-{\\rm cos}x_2(t))\\cdot\\frac{5+x_1(t)}{10}\\cdot\\frac{1+{\\rm sin}x_3(t)}{2}\\\\  h_3 &amp;= h_{211}h_{332}v_{311}={\\rm cos}x_2(t)\\cdot\\frac{5-x_1(t)}{10}\\cdot\\frac{1+{\\rm sin}x_3(t)}{2}\\\\  h_4 &amp;= h_{212}h_{332}v_{311}=(1-{\\rm cos}x_2(t))\\cdot\\frac{5-x_1(t)}{10}\\cdot\\frac{1+{\\rm sin}x_3(t)}{2}\\\\  h_5 &amp;= h_{211}h_{331}v_{312}={\\rm cos}x_2(t)\\cdot\\frac{5+x_1(t)}{10}\\cdot\\frac{1-{\\rm sin}x_3(t)}{2}\\\\  h_6 &amp;= h_{212}h_{331}v_{312}=(1-{\\rm cos}x_2(t))\\cdot\\frac{5+x_1(t)}{10}\\cdot\\frac{1-{\\rm sin}x_3(t)}{2}\\\\  h_7 &amp;= h_{211}h_{332}v_{312}={\\rm cos}x_2(t)\\cdot\\frac{5-x_1(t)}{10}\\cdot\\frac{1-{\\rm sin}x_3(t)}{2}\\\\  h_8 &amp;= h_{212}h_{332}v_{312}=(1-{\\rm cos}x_2(t))\\cdot\\frac{5-x_1(t)}{10}\\cdot\\frac{1-{\\rm sin}x_3(t)}{2}\\\\  \\boldsymbol A_1 &amp;= \\boldsymbol A_5 =   \\begin{bmatrix}  0&amp;1&amp;0\\\\  \\boldsymbol 1&amp;0&amp;-1\\\\  0&amp;0&amp;\\boldsymbol 5  \\end{bmatrix},\\   \\boldsymbol A_2 = \\boldsymbol A_6  =   \\begin{bmatrix}  0&amp;1&amp;0\\\\  \\boldsymbol 0&amp;0&amp;-1\\\\  0&amp;0&amp;\\boldsymbol 5  \\end{bmatrix}\\\\  \\boldsymbol A_3 &amp;= \\boldsymbol A_7 =   \\begin{bmatrix}  0&amp;1&amp;0\\\\  \\boldsymbol 1&amp;0&amp;-1\\\\  0&amp;0&amp;-\\boldsymbol 5  \\end{bmatrix},\\   \\boldsymbol A_4 = \\boldsymbol A_8 =   \\begin{bmatrix}  0&amp;1&amp;0\\\\  \\boldsymbol 0&amp;0&amp;-1\\\\  0&amp;0&amp;-\\boldsymbol 5  \\end{bmatrix}\\\\  \\boldsymbol B_1 &amp;= \\boldsymbol B_2 = \\boldsymbol B_3 = \\boldsymbol B_4 =  \\begin{bmatrix}  0\\\\  0\\\\  1.5  \\end{bmatrix},\\   \\boldsymbol B_5 = \\boldsymbol B_6 = \\boldsymbol B_7 = \\boldsymbol B_8 =   \\begin{bmatrix}  0\\\\  0\\\\  0.5  \\end{bmatrix}  \\end{aligned}\\]  çº¦å‡å½¢å¼ä¸€å¦‚æœé’ˆå¯¹ $A(2,1)$ è¿›è¡Œè§„åˆ™çº¦å‡ï¼Œå³ $A(2,1)=\\sum_ih_iA_i(2,1)\\equiv\\frac{1+0}{2}=0.5$ã€‚æ­¤æ—¶ç›¸å½“äº $h_{211},h_{212}$ å¤±å»ä½œç”¨ï¼Œ$A_1,A_2$ åˆå¹¶ä¸ºæ–°çš„ $A_1^\\prime$ï¼ˆåŸæ–‡ä¸­ä»ä»¥ $A_1$ è¡¨ç¤ºï¼‰ï¼Œå…¶å®ƒçŸ©é˜µç±»ä¼¼ã€‚éš¶å±åº¦å‡½æ•° $h_1,h_2$ åˆå¹¶ä¸º $h_1^\\prime$ï¼ˆåŸæ–‡ä¸­ä»¥ $m_1$ è¡¨ç¤ºï¼‰ï¼Œå…¶å®ƒéš¶å±åº¦å‡½æ•°ç±»ä¼¼ã€‚åˆ™è§„åˆ™æ•°å’ŒçŸ©é˜µæ•°ç›®å‡åŠï¼Œç³»ç»Ÿå˜ä¸º\\[\\begin{aligned}  \\dot \\boldsymbol x(t) &amp;= \\sum_{i=1}^4 h_i^\\prime(\\boldsymbol z(t))[\\boldsymbol A_i^\\prime\\boldsymbol x(t) + \\boldsymbol B_i^\\prime\\boldsymbol u(t)]\\\\  h_1^\\prime &amp;= h_{331}v_{311}=\\frac{5+x_1(t)}{10}\\cdot\\frac{1+{\\rm sin}x_3(t)}{2}\\\\  h_2^\\prime &amp;= h_{332}v_{311}=\\frac{5-x_1(t)}{10}\\cdot\\frac{1+{\\rm sin}x_3(t)}{2}\\\\  h_3^\\prime &amp;= h_{331}v_{312}=\\frac{5+x_1(t)}{10}\\cdot\\frac{1-{\\rm sin}x_3(t)}{2}\\\\  h_4^\\prime &amp;= h_{332}v_{312}=\\frac{5-x_1(t)}{10}\\cdot\\frac{1-{\\rm sin}x_3(t)}{2}\\\\  \\boldsymbol A_1^\\prime &amp;=   \\begin{bmatrix}  0&amp;1&amp;0\\\\  \\boldsymbol 0.5&amp;0&amp;-1\\\\  0&amp;0&amp;5  \\end{bmatrix},\\   \\boldsymbol A_2^\\prime =   \\begin{bmatrix}  0&amp;1&amp;0\\\\  \\boldsymbol 0.5&amp;0&amp;-1\\\\  0&amp;0&amp;-5  \\end{bmatrix}\\\\  \\boldsymbol A_3^\\prime &amp;=  \\begin{bmatrix}  0&amp;1&amp;0\\\\  \\boldsymbol 0.5&amp;0&amp;-1\\\\  0&amp;0&amp;5  \\end{bmatrix},\\   \\boldsymbol A_4^\\prime =  \\begin{bmatrix}  0&amp;1&amp;0\\\\  \\boldsymbol 0.5&amp;0&amp;-1\\\\  0&amp;0&amp;-5  \\end{bmatrix}\\\\  \\boldsymbol B_1^\\prime &amp;= \\boldsymbol B_2^\\prime =  \\begin{bmatrix}  0\\\\  0\\\\  1.5  \\end{bmatrix},\\   \\boldsymbol B_3^\\prime = \\boldsymbol B_4^\\prime =  \\begin{bmatrix}  0\\\\  0\\\\  0.5  \\end{bmatrix}  \\end{aligned}\\]ç›¸åº”çš„æ¨¡å‹ä¸ç¡®å®šæ€§ä¸º\\[\\vert\\vert\\boldsymbol \\Delta_{ai}(t) \\vert\\vert \\leq 0.5,\\ i=1,2,3,4\\]  çº¦å‡å½¢å¼äºŒé’ˆå¯¹ $A(3,3)$ è¿›è¡Œçº¦å‡ï¼Œå³ $A(3,3)=\\sum_ih_iA_i(3,3)\\equiv\\frac{5+(-5)}{2}=0$ï¼Œç³»ç»Ÿå˜ä¸º\\[\\begin{aligned}  \\dot \\boldsymbol x(t) &amp;= \\sum_{i=1}^4 h_i^\\prime(\\boldsymbol z(t))[\\boldsymbol A_i^\\prime\\boldsymbol x(t) + \\boldsymbol B_i^\\prime\\boldsymbol u(t)]\\\\  h_1^\\prime &amp;= h_{211}v_{311}={\\rm cos}x_2(t)\\cdot\\frac{1+{\\rm sin}x_3(t)}{2}\\\\  h_2^\\prime &amp;= h_{212}v_{311}=(1-{\\rm cos}x_2(t))\\cdot\\frac{1+{\\rm sin}x_3(t)}{2}\\\\  h_3^\\prime &amp;= h_{211}v_{312}={\\rm cos}x_2(t)\\cdot\\frac{1-{\\rm sin}x_3(t)}{2}\\\\  h_4^\\prime &amp;= h_{212}v_{312}=(1-{\\rm cos}x_2(t))\\cdot\\frac{1-{\\rm sin}x_3(t)}{2}\\\\  \\boldsymbol A_1^\\prime &amp;=   \\begin{bmatrix}  0&amp;1&amp;0\\\\  1&amp;0&amp;-1\\\\  0&amp;0&amp;\\boldsymbol 0  \\end{bmatrix},\\   \\boldsymbol A_2^\\prime =   \\begin{bmatrix}  0&amp;1&amp;0\\\\  0&amp;0&amp;-1\\\\  0&amp;0&amp;\\boldsymbol 0  \\end{bmatrix}\\\\  \\boldsymbol A_3^\\prime &amp;=  \\begin{bmatrix}  0&amp;1&amp;0\\\\  1&amp;0&amp;-1\\\\  0&amp;0&amp;\\boldsymbol 0  \\end{bmatrix},\\   \\boldsymbol A_4^\\prime =  \\begin{bmatrix}  0&amp;1&amp;0\\\\  0&amp;0&amp;-1\\\\  0&amp;0&amp;\\boldsymbol 0  \\end{bmatrix}\\\\  \\boldsymbol B_1^\\prime &amp;= \\boldsymbol B_2^\\prime =  \\begin{bmatrix}  0\\\\  0\\\\  1.5  \\end{bmatrix},\\   \\boldsymbol B_3^\\prime = \\boldsymbol B_4^\\prime =  \\begin{bmatrix}  0\\\\  0\\\\  0.5  \\end{bmatrix}  \\end{aligned}\\]ç›¸åº”çš„æ¨¡å‹ä¸ç¡®å®šæ€§ä¸º\\[\\vert\\vert\\boldsymbol \\Delta_{ai}(t) \\vert\\vert \\leq 5,\\ i=1,2,3,4\\]  çº¦å‡å½¢å¼ä¸‰é’ˆå¯¹ $B(3,1)$ è¿›è¡Œçº¦å‡ï¼Œå³ $B(3,1)=\\sum_ih_iB_i(3,1)\\equiv\\frac{1.5+0.5}{2}=1$ï¼Œç³»ç»Ÿå˜ä¸º\\[\\begin{aligned}  \\dot \\boldsymbol x(t) &amp;= \\sum_{i=1}^4 h_i^\\prime(\\boldsymbol z(t))[\\boldsymbol A_i^\\prime\\boldsymbol x(t) + \\boldsymbol B_i^\\prime\\boldsymbol u(t)]\\\\  h_1^\\prime &amp;= h_{211}h_{331}={\\rm cos}x_2(t)\\cdot\\frac{5+x_1(t)}{10}\\\\  h_2^\\prime &amp;= h_{212}h_{331}=(1-{\\rm cos}x_2(t))\\cdot\\frac{5+x_1(t)}{10}\\\\  h_3^\\prime &amp;= h_{211}h_{332}={\\rm cos}x_2(t)\\cdot\\frac{5-x_1(t)}{10}\\\\  h_4^\\prime &amp;= h_{212}h_{332}=(1-{\\rm cos}x_2(t))\\cdot\\frac{5-x_1(t)}{10}\\\\  \\boldsymbol A_1^\\prime &amp;=   \\begin{bmatrix}  0&amp;1&amp;0\\\\  1&amp;0&amp;-1\\\\  0&amp;0&amp;5  \\end{bmatrix},\\   \\boldsymbol A_2^\\prime =   \\begin{bmatrix}  0&amp;1&amp;0\\\\  0&amp;0&amp;-1\\\\  0&amp;0&amp;5  \\end{bmatrix}\\\\  \\boldsymbol A_3^\\prime &amp;=  \\begin{bmatrix}  0&amp;1&amp;0\\\\  1&amp;0&amp;-1\\\\  0&amp;0&amp;-5  \\end{bmatrix},\\   \\boldsymbol A_4^\\prime =  \\begin{bmatrix}  0&amp;1&amp;0\\\\  0&amp;0&amp;-1\\\\  0&amp;0&amp;-5  \\end{bmatrix}\\\\  \\boldsymbol B_1^\\prime &amp;= \\boldsymbol B_2^\\prime =  \\begin{bmatrix}  0\\\\  0\\\\  \\boldsymbol 1  \\end{bmatrix},\\   \\boldsymbol B_3^\\prime = \\boldsymbol B_4^\\prime =  \\begin{bmatrix}  0\\\\  0\\\\  \\boldsymbol 1  \\end{bmatrix}  \\end{aligned}\\]ç›¸åº”çš„æ¨¡å‹ä¸ç¡®å®šæ€§ä¸º\\[\\vert\\vert\\boldsymbol \\Delta_{bi}(t) \\vert\\vert \\leq 0.5,\\ i=1,2,3,4\\]3.3. æ¨¡ç³Šæ§åˆ¶å™¨3.3.1. è®¾è®¡3.3.2. ä¸¾ä¾‹æœªå®Œå¾…ç»­ï¼4. å‚è€ƒæ–‡çŒ®æ— ã€‚"
  },
  
  {
    "title": "æ·±åº¦å­¦ä¹ æ–‡ç« é˜…è¯»ï¼ˆæ¨¡ç³Šæ³¨æ„åŠ›è½¨è¿¹é¢„æµ‹ï¼‰",
    "url": "/posts/deep-learning-fuzzy-attention-trajpre/",
    "categories": "Academic, Paper",
    "tags": "fuzzy, deep learning",
    "date": "2020-12-07 16:39:19 +0800",
    





    
    "snippet": "æœ¬æ–‡ä»‹ç»äº† 2020 å¹´ NIPS ä¸Šçš„ä¸€ç¯‡å…³äºæ¨¡ç³Šæ³¨æ„åŠ›è½¨è¿¹é¢„æµ‹çš„æ–‡ç« ï¼Œä½†æ˜¯è¢«éª—å•¦ï¼ˆæˆ‘å¤§æ„äº†ï¼‰ã€‚å…¶å®å’Œ Fuzzy å¹¶æ²¡æœ‰ä»€ä¹ˆå…³ç³»ï¼Œåè€Œæ˜¯ç”¨çš„ Attention æœºåˆ¶ã€‚  1. å¼•è¨€          1.1. å½’çº³åç½®        2. ç»“æ„          2.1. é¢„æµ‹æ¶æ„      2.2. äº¤äº’æ¨¡å—      2.3. æ¨¡ç³ŠæŸ¥è¯¢æ³¨æ„åŠ›æ¨¡å—      2.4. åˆ†æ     ...",
    "content": "æœ¬æ–‡ä»‹ç»äº† 2020 å¹´ NIPS ä¸Šçš„ä¸€ç¯‡å…³äºæ¨¡ç³Šæ³¨æ„åŠ›è½¨è¿¹é¢„æµ‹çš„æ–‡ç« ï¼Œä½†æ˜¯è¢«éª—å•¦ï¼ˆæˆ‘å¤§æ„äº†ï¼‰ã€‚å…¶å®å’Œ Fuzzy å¹¶æ²¡æœ‰ä»€ä¹ˆå…³ç³»ï¼Œåè€Œæ˜¯ç”¨çš„ Attention æœºåˆ¶ã€‚  1. å¼•è¨€          1.1. å½’çº³åç½®        2. ç»“æ„          2.1. é¢„æµ‹æ¶æ„      2.2. äº¤äº’æ¨¡å—      2.3. æ¨¡ç³ŠæŸ¥è¯¢æ³¨æ„åŠ›æ¨¡å—      2.4. åˆ†æ      2.5. è®­ç»ƒ        3. å®éªŒ  4. å…¶å®ƒ  5. å‚è€ƒæ–‡çŒ®  Nitin Kamra, et al. Multi-agent Trajectory Prediction with Fuzzy Query Attention. NIPS 2020.1. å¼•è¨€1.1. å½’çº³åç½®inductive biasesï¼Œå½’çº³åç½®ã€‚  LinT. å¦‚ä½•ç†è§£Inductive biasï¼Ÿå½’çº³åç½®åœ¨æœºå™¨å­¦ä¹ ä¸­æ˜¯ä¸€ç§å¾ˆå¾®å¦™çš„æ¦‚å¿µï¼šåœ¨æœºå™¨å­¦ä¹ ä¸­ï¼Œå¾ˆå¤šå­¦ä¹ ç®—æ³•ç»å¸¸ä¼šå¯¹å­¦ä¹ çš„é—®é¢˜åšä¸€äº›å‡è®¾ï¼Œè¿™äº›å‡è®¾å°±ç§°ä¸ºå½’çº³åç½®(Inductive Bias)ã€‚å½’çº³åç½®è¿™ä¸ªè¯‘åå¯èƒ½ä¸èƒ½å¾ˆå¥½åœ°å¸®åŠ©ç†è§£ï¼Œä¸å¦¨æ‹†è§£å¼€æ¥çœ‹ï¼šå½’çº³(Induction)æ˜¯è‡ªç„¶ç§‘å­¦ä¸­å¸¸ç”¨çš„ä¸¤å¤§æ–¹æ³•ä¹‹ä¸€(å½’çº³ä¸æ¼”ç», induction and deduction)ï¼ŒæŒ‡çš„æ˜¯ä»ä¸€äº›ä¾‹å­ä¸­å¯»æ‰¾å…±æ€§ã€æ³›åŒ–ï¼Œå½¢æˆä¸€ä¸ªæ¯”è¾ƒé€šç”¨çš„è§„åˆ™çš„è¿‡ç¨‹ï¼›åç½®(Bias)æ˜¯æŒ‡æˆ‘ä»¬å¯¹æ¨¡å‹çš„åå¥½ã€‚å› æ­¤ï¼Œå½’çº³åç½®å¯ä»¥ç†è§£ä¸ºï¼Œä»ç°å®ç”Ÿæ´»ä¸­è§‚å¯Ÿåˆ°çš„ç°è±¡ä¸­å½’çº³å‡ºä¸€å®šçš„è§„åˆ™(heuristics)ï¼Œç„¶åå¯¹æ¨¡å‹åšä¸€å®šçš„çº¦æŸï¼Œä»è€Œå¯ä»¥èµ·åˆ°â€œæ¨¡å‹é€‰æ‹©â€çš„ä½œç”¨ï¼Œå³ä»å‡è®¾ç©ºé—´ä¸­é€‰æ‹©å‡ºæ›´ç¬¦åˆç°å®è§„åˆ™çš„æ¨¡å‹ã€‚å…¶å®ï¼Œè´å¶æ–¯å­¦ä¹ ä¸­çš„â€œå…ˆéªŒ(Prior)â€è¿™ä¸ªå«æ³•ï¼Œå¯èƒ½æ¯”â€œå½’çº³åç½®â€æ›´ç›´è§‚ä¸€äº›ã€‚ä»¥ç¥ç»ç½‘ç»œä¸ºä¾‹ï¼Œå„å¼å„æ ·çš„ç½‘ç»œç»“æ„/ç»„ä»¶/æœºåˆ¶å¾€å¾€å°±æ¥æºäºå½’çº³åç½®ã€‚åœ¨å·ç§¯ç¥ç»ç½‘ç»œä¸­ï¼Œæˆ‘ä»¬å‡è®¾ç‰¹å¾å…·æœ‰å±€éƒ¨æ€§(Locality)çš„ç‰¹æ€§ï¼Œå³å½“æˆ‘ä»¬æŠŠç›¸é‚»çš„ä¸€äº›ç‰¹å¾æ”¾åœ¨ä¸€èµ·ï¼Œä¼šæ›´å®¹æ˜“å¾—åˆ°â€œè§£â€ï¼›åœ¨å¾ªç¯ç¥ç»ç½‘ç»œä¸­ï¼Œæˆ‘ä»¬å‡è®¾æ¯ä¸€æ—¶åˆ»çš„è®¡ç®—ä¾èµ–äºå†å²è®¡ç®—ç»“æœï¼›è¿˜æœ‰æ³¨æ„åŠ›æœºåˆ¶ï¼Œä¹Ÿæ˜¯åŸºäºä»äººçš„ç›´è§‰ã€ç”Ÿæ´»ç»éªŒå½’çº³å¾—åˆ°çš„è§„åˆ™ã€‚  æƒ¯æ€§ï¼ˆInertiaï¼‰ï¼šå‡ ä¹æ‰€æœ‰æ— ç”Ÿå‘½å®ä½“éƒ½æŒ‰ç…§åŒ€é€Ÿå‰è¿›ï¼Œé™¤éæ”¶åˆ°å¤–åŠ›ä½œç”¨ã€‚è¿™ä¸ªè§„åˆ™åœ¨ä½œä¸ºä¸€é˜¶è¿‘ä¼¼ä¼°è®¡æ—¶ï¼Œåœ¨æ®µæ—¶é—´å†…åŒæ ·é€‚ç”¨äºæœ‰ç”Ÿå‘½å®ä½“ï¼ˆå¦‚è¡Œäººï¼‰ï¼Œå› ä¸ºè¡Œäººå‡ ä¹ä¹Ÿä»¥åŒ€é€Ÿè¡Œèµ°ï¼Œé™¤ééœ€è¦è½¬å¼¯æˆ–å‡é€Ÿä»¥é¿å…ç¢°æ’ï¼›  è¿åŠ¨çš„ç›¸å¯¹æ€§ï¼ˆMotion is relativeï¼‰ï¼šä¸¤ä¸ªç›®æ ‡ä¹‹é—´çš„è¿åŠ¨æ˜¯ç›¸å¯¹çš„ï¼Œåœ¨é¢„æµ‹æœªæ¥è½¨è¿¹æ—¶åº”è¯¥ä½¿ç”¨ä»–ä»¬ä¹‹é—´çš„ç›¸å¯¹ä½ç½®å’Œé€Ÿåº¦ï¼ˆç›¸å¯¹è§‚æµ‹ï¼Œrelative observationsï¼‰ï¼Œå¯¹æœªæ¥çš„é¢„æµ‹ä¹Ÿéœ€è¦æ˜¯ç›¸å¯¹äºå½“å‰ä½ç½®çš„åå·®ï¼ˆç›¸å¯¹é¢„æµ‹ï¼Œrelative predictionsï¼‰ï¼›  æ„å›¾ï¼ˆIntentï¼‰ï¼šæœ‰ç”Ÿå‘½å¯¹è±¡æœ‰è‡ªå·±çš„æ„å›¾ï¼Œè¿åŠ¨ä¼šåç¦»æƒ¯æ€§ï¼Œéœ€è¦åœ¨é¢„æµ‹æ¨¡å‹ä¸­è¿›è¡Œè€ƒè™‘ï¼›  äº¤äº’ï¼ˆInteractionsï¼‰ï¼šæœ‰ç”Ÿå‘½å¯¹è±¡å’Œæ— ç”Ÿå‘½å¯¹è±¡å¯èƒ½åç¦»å®ƒä»¬é¢„æœŸçš„è¿åŠ¨ï¼Œæ¯”å¦‚å—åˆ°å…¶å®ƒé™„è¿‘å¯¹è±¡çš„å½±å“ã€‚è¿™ç§å½±å“éœ€è¦æ¸…æ™°çš„å»ºæ¨¡ã€‚2. ç»“æ„2.1. é¢„æµ‹æ¶æ„ä¸‹å›¾ (a) ä¸ºé¢„æµ‹æ¶æ„ï¼Œè¾“å…¥ $t$ æ—¶åˆ»çš„æ‰€æœ‰å¯¹è±¡çš„ä½ç½® $p^t_{i=1:N}$ã€‚ä½¿ç”¨ $t\\leq T_{obs}$ æ—¶åˆ»çš„ä½ç½®ä½œä¸ºè§‚æµ‹ï¼Œå¯¹ $t\\geq T_{obs}$ æ—¶åˆ»çš„ä½ç½®è¿›è¡Œé¢„æµ‹ã€‚æˆ‘ä»¬å¯¹æ¯ä¸ªå¯¹è±¡çš„ä¸‹ä¸€æ—¶åˆ»ä½ç½® $\\hat p^{t+1}_i$ è¿›è¡Œé¢„æµ‹ï¼Œé¢„æµ‹é‡æ˜¯ç›¸å¯¹äºå½“å‰æ—¶åˆ» $p_i^t$ çš„ä½ç½®åå·®ï¼ˆrelative predictionï¼‰ã€‚  å…¬å¼ 1ï¼šå°†ä½ç½®åå·®æ‹†åˆ†ä¸ºä¸€é˜¶å¸¸é€Ÿåº¦ä¼°è®¡ $\\tilde v_i^t$ ï¼ˆæƒ¯æ€§ï¼‰å’Œé€Ÿåº¦ä¿®æ­£é¡¹ $\\Delta v_i^t$ ï¼ˆæ„å›¾å’Œå¯¹è±¡é—´çš„äº¤äº’ï¼‰ã€‚  å…¬å¼ 2ï¼šä¸€é˜¶å¸¸é€Ÿåº¦ä¼°è®¡ç”±å½“å‰æ—¶åˆ»ä½ç½®å’Œå‰ä¸€æ—¶åˆ»ä½ç½®ç›´æ¥å·®åˆ†å¾—åˆ°ã€‚  å…¬å¼ 3ï¼šé‡‡ç”¨ LSTM æ¥æ•æ‰æ¯ä¸ªå¯¹è±¡çš„æ„å›¾ï¼Œå…¶éšè—çŠ¶æ€ $h_i^t$ èƒ½å¤Ÿä¿å­˜ä¹‹å‰çš„è½¨è¿¹ä¿¡æ¯ã€‚LSTM çš„æƒé‡å‚æ•°æ‰€æœ‰å¯¹è±¡å‡å…±äº«ã€‚ä¸ºäº†è®¡ç®—é€Ÿåº¦ä¿®æ­£é¡¹ $\\Delta v_i^t$ï¼Œé¦–å…ˆç”¨ LSTM æ ¹æ®æ¯ä¸ªå¯¹è±¡çš„å½“å‰ä½ç½®åˆæ­¥æ›´æ–°ä¸€ä¸ªä¸´æ—¶éšè—çŠ¶æ€ $\\tilde h_i^t$ã€‚  å…¬å¼ 4ï¼šç„¶åå°†å¯¹è±¡å½“å‰ä½ç½®å’Œä¸´æ—¶éšå±‚çŠ¶æ€ $h_i^t,$ åŒæ—¶é€å…¥ä¸€ä¸ª ã€Œäº¤äº’æ¨¡å—ï¼ˆInteraction moduleï¼‰ã€ æ¥æ¨ç†å¯¹è±¡é—´çš„äº¤äº’ã€åˆè®¡ä»–ä»¬çš„æ•ˆæœï¼Œç„¶åæ›´æ–°æ¯ä¸ªå¯¹è±¡çš„éšè—çŠ¶æ€ï¼ŒåŒæ—¶è®¡ç®—å¯¹è±¡çš„é€Ÿåº¦ä¿®æ­£é¡¹ã€‚å’Œæ‰€æœ‰å¯¹è±¡çš„å½“å‰ä½ç½®å‘é‡è¿›ä¸€æ­¥è¢«ç”¨äºå°†æ¥çš„å¯¹è±¡é—´çš„äº¤äº’ï¼Œæ±‡æ€»å…¶æ•ˆæœå¹¶æ›´æ–°æ¯ä¸ªå¯¹è±¡çš„éšè—çŠ¶æ€ï¼Œ\\[\\begin{aligned}\\hat p^{t+1}_i &amp;= p_i^t + \\tilde v_i^t + \\Delta v_i^t,&amp;\\quad \\forall i\\in 1:N\\\\(Inertia): \\tilde v_i^t &amp;= p_i^t - p_i^{t-1},&amp;\\quad \\forall i\\in 1:N\\\\(Intents): \\tilde h_i^t &amp;= LSTM(p_i^t, h_i^{t-1}),&amp;\\quad \\forall i\\in 1:N\\\\(Interactions): h_i^t,\\Delta v_i^t&amp;= InteractionModule(p_i^t, \\tilde h_i^t)&amp;\\end{aligned}\\]ç”±äºæ‰€æœ‰çš„è®¡ç®—éƒ½åœ¨å½“å‰æ—¶åˆ» $t$ ä¸‹ï¼Œå› æ­¤åæ–‡å¯ä»¥ç•¥å»è¯¥ä¸Šæ ‡ã€‚2.2. äº¤äº’æ¨¡å—ä¸‹å›¾ (b) ä½œä¸ºäº¤äº’æ¨¡å—ã€‚  å…¬å¼ 1ï¼šåœ¨æ¯ä¸¤ä¸ªå¯¹è±¡é—´äº§ç”Ÿä¸€æ¡æœ‰å‘è¾¹æ¥å»ºç«‹ä¸€å¼ å›¾ï¼ˆcreates a graph by generating directed edges between all pairs of agentsï¼‰ï¼ˆå¿½ç•¥è‡ªèº«ä¸è‡ªèº«çš„è¾¹è¿æ¥ï¼‰ï¼Œå¾—åˆ°è¾¹é›†åˆ $\\varepsilon$ã€‚å°†è¾¹é›†åˆã€æ‰€æœ‰å¯¹è±¡çš„ä½ç½®å’Œä¸´æ—¶éšè—çŠ¶æ€ï¼ˆæ„å›¾ï¼‰ä¼°è®¡é€å…¥ æ¨¡ç³ŠæŸ¥è¯¢æ³¨æ„åŠ›æ¨¡å—ï¼ˆFuzzy Query Attention, FQAï¼‰å¾—åˆ°æ¯ä¸€ä¸ªå¯¹è±¡çš„æ³¨æ„åŠ›å‘é‡ $a_i$ï¼Œè¯¥å‘é‡æ±‡èšäº†å…¶ä¸å…¶å®ƒæ‰€æœ‰å¯¹è±¡çš„äº¤äº’ä¿¡æ¯ã€‚    æœ‰å‘è¾¹çš„æ–¹å‘å¦‚ä½•ç¡®å®šçš„ä¸æ˜ç¡®ã€‚    å…¬å¼ 2ï¼Œ3ï¼šå°†æ³¨æ„åŠ›å‘é‡ã€ä½ç½®å‘é‡ã€ä¸´æ—¶éšè—çŠ¶æ€ï¼ˆæ„å›¾ï¼‰é€å…¥éšåçš„ 2 å±‚å…¨è¿æ¥å±‚ï¼ˆReLUï¼‰ï¼Œå¾—åˆ°æ›´æ–°åçš„éšè—çŠ¶æ€ $h_i$ï¼ˆä¸”ä¹‹åè¿”ä¼ ç»™ LSTM ä½œä¸ºä¸Šä¸€æ—¶åˆ»çš„éšè—çŠ¶æ€ï¼‰ï¼Œå†æ¬¡ç»è¿‡ 2 å±‚å…¨è¿æ¥å±‚ï¼ˆReLUï¼‰å¾—åˆ°æ¯ä¸ªå¯¹è±¡çš„é€Ÿåº¦ä¿®æ­£é¡¹ $\\Delta v_i$ã€‚\\[\\begin{aligned}a&amp;=FQA(p,\\hat h, \\varepsilon)&amp;\\\\h_i&amp;= FC_2(ReLU(FC_1(p_i, h_i, a_i))),&amp;\\quad \\forall i\\in 1:N\\\\\\Delta v_i&amp;= FC_4(ReLU(FC_3(p_i))),&amp;\\quad \\forall i\\in 1:N\\end{aligned}\\]2.3. æ¨¡ç³ŠæŸ¥è¯¢æ³¨æ„åŠ›æ¨¡å—FQA æ¨¡å—å°†æœ‰å‘è¾¹å›¾çœ‹ä½œ å‘é€-æ¥æ”¶ å¯¹è±¡å¯¹ï¼ˆsender-receiver pairs of agentsï¼‰ã€‚ä»é«˜å±‚æ¥çœ‹ï¼Œè¯¥æ¨¡å—å»ºæ¨¡äº†æ‰€æœ‰å‘é€å¯¹è±¡å¯¹ä¸€ä¸ªç‰¹å®šæ¥æ”¶å¯¹è±¡çš„æ±‡èšå½±å“ã€‚åŸºæœ¬æƒ³æ³•æ˜¯å»ºç«‹ key-query-value self attention ç½‘ç»œï¼ˆVaswani et alï¼‰ã€‚  Ashish Vaswani, Noam Shazeer, Niki Parmar, Jakob Uszkoreit, Llion Jones, Aidan N. Gomez, Lukasz Kaiser, Illia Polosukhin. Attention Is All You Need[J]. arXiv preprint arXiv:1706.03762v5 [cs.CL], 2017. [Google Transformer]  Self attention: è¾“å…¥ä¸€ç³»åˆ—å‘é‡ï¼Œè¾“å‡ºæ‰€æœ‰å‘é‡å¯¹æ¯ä¸ªç‰¹å®šå‘é‡çš„ value çš„åŠ æƒå’Œï¼ˆæ³¨æ„åŠ› / é‡è¦æ€§ï¼‰ã€‚value æ˜¯æ¯ä¸ªå‘é‡ä¹˜ä»¥ä¸€ä¸ªæƒé‡çŸ©é˜µå¾—åˆ°çš„ï¼ŒçŸ©é˜µéœ€è¦è¢«è®­ç»ƒã€‚  äº§ç”Ÿç‹¬ç«‹ç‰¹å¾ï¼šå¤åˆ¶ $p,\\hat h$ åˆ°æ¯ä¸€æ¡è¾¹ï¼Œä¸€æ¡è¾¹ä¸¤ä¸ªå¯¹è±¡ï¼Œä¸€ä¸ª sender ä¸€ä¸ª receiverï¼Œé‚£ä¹ˆå°±å¤åˆ¶å‡º $p_s, p_r, h_s, h_r$ã€‚  äº§ç”Ÿç›¸å¯¹ç‰¹å¾ï¼š$p_{sr} = p_s-p_r$ ï¼ˆç›¸å¯¹ä½ç§»ï¼‰ï¼Œ$h_{sr} = h_s-h_r$ ï¼ˆç›¸å¯¹çŠ¶æ€ï¼‰ï¼Œ$\\hat p_{sr} = p_{sr}/\\vert\\vert p_{sr} \\vert\\vert$ï¼ˆå•ä½åŒ–ï¼‰,$\\hat h_{sr} = h_{sr}/\\vert\\vert h_{sr} \\vert\\vert$ï¼ˆå•ä½åŒ–ï¼‰ã€‚è¿™äº›ç‰¹å¾ç”¨æ¥æ•æ‰ç›¸å¯¹è§‚æµ‹å½’çº³åå·®ã€‚  å¯¹äºæ¯ä¸€æ¡è¾¹ï¼Œå°†ä¸Šè¿°æ‰€æœ‰ç‰¹å¾æ‹¼æ¥ $f_{sr} = { p_s, p_r, p_sr, \\hat p_{sr}, h_s, h_r, h_sr, \\hat h_{sr} }$ï¼Œç„¶ååˆ†åˆ«ç»è¿‡ä¸€ä¸ª å•å±‚å…¨è¿æ¥å±‚ï¼Œäº§ç”Ÿ $n$ ä¸ª keys $K_{sr}\\in \\mathbb R^{n\\times d}$ å’Œ  $n$ ä¸ª queries $Q_{sr}\\in \\mathbb R^{n\\times d}$ã€‚$n$ ä»£è¡¨ $s-r$ å¯¹çš„ä¸ªæ•°ï¼ˆä¸ªäººç†è§£ä¹Ÿå°±æ˜¯è¾¹çš„ä¸ªæ•°ï¼Œä¹Ÿå°±æ˜¯ $f_{sr} çš„ä¸ªæ•°$ï¼‰ï¼Œ$d$ åº”è¯¥æ˜¯ç”¨æˆ·å®šä¹‰çš„ç»´åº¦ã€‚  å°† $K_{sr}\\in \\mathbb R^{n\\times d}$ å’Œ $Q_{sr}\\in \\mathbb R^{n\\times d}$ é€šè¿‡ä¸€ä¸ªç‚¹ä¹˜çš„å˜ä½“ï¼ˆå…ƒç´ ç§¯ç„¶åæŒ‰è¡Œæ±‚å’Œï¼Œrow-wise dot-productï¼‰ï¼Œäº§ç”Ÿæ¨¡ç³Šå†³ç­– $D_{sr}\\in \\mathbb R^n$ã€‚  \\[\\begin{aligned}K_{sr}&amp;=FC_5(f_{sr}^\\perp)&amp;\\ \\forall (s,r)\\in 1:N,s\\neq r\\\\Q_{sr}&amp;=FC_6(f_{sr}^\\perp)&amp;\\ \\forall (s,r)\\in 1:N,s\\neq r\\\\D_{sr}&amp;= \\sigma(K_{sr}\\star Q_{sr}+B)=\\left( \\sum_{dim=1} K_{sr}\\odot Q_{sr}+B\\right),&amp;\\ \\forall (s,r)\\in 1:N,s\\neq r\\end{aligned}\\]  æ³¨ï¼šä½œè€…è¯´çš„æ¨¡ç³Šå†³ç­–ä¸æ˜¯æ¨¡ç³Šé€»è¾‘ï¼Œè€Œæ˜¯æµ®ç‚¹æ•°å–å€¼çš„å†³ç­–ï¼Œç›¸å¯¹äºç¦»æ•£å–å€¼çš„å¸ƒå°”å†³ç­–ã€‚ã€Œå¤§æ„äº†ï¼ã€å…¶ä¸­ $B$ æ˜¯ä¸€ä¸ªå¾…ä¼˜åŒ–çš„åå·®å‚æ•°çŸ©é˜µï¼Œ$\\sigma$ æ˜¯ sigmoid æ¿€æ´»å‡½æ•°ï¼Œ$\\perp$ æ˜¯åˆ†ç¦»è¿ç®—ç¬¦ï¼ˆdetach operatorï¼‰ã€‚[ä¸å…è®¸æ¢¯åº¦ä» $Q,K$ å›ä¼ ï¼Œåªèƒ½ä» $V$ å›ä¼ ]  The detach operator acts as identity for the forward-pass but prevents any gradients from propagating back through its operand. This allows us to learn feature representations only using responses while the keys and queries make useful decisions from the learnt features.we learn the sender-receiver features by backpropagating only through the responses ($V_sr$) while features are detached to generate the keys and queries. This additionally allows us to inject human knowledge into the model via handcrafted non-learnable decisions, IF such decisions are availableæœ€ç»ˆå¾—åˆ°çš„æ¨¡ç³Šå†³ç­– $D_{sr} \\in [0,1]^n$ å¯ä»¥è§£é‡Šä¸ºä¸€ç»„ $n$ä¸ª è¿ç»­å–å€¼çš„å†³ç­–ï¼Œååº”äº† sender å¯¹è±¡å’Œ receiver å¯¹è±¡ä¹‹é—´çš„äº¤äº’ã€‚è¿™ä¸ªå†³ç­–å¯ä»¥ç”¨æ¥å½±å“ï¼ˆselectï¼‰receiver å¯¹è±¡å¯¹ sender å¯¹è±¡å½“å‰çŠ¶æ€çš„åº”ç­”ã€‚  ç¡®å®šæ€§åº”ç­”ï¼ˆå…¬å¼ 1ï¼Œ2ï¼‰ï¼šç›¸å¯¹ç‰¹å¾å¹¶è¡Œçš„é€šè¿‡ä¸¤ä¸ª 2 å±‚å…¨è¿æ¥å±‚ï¼ˆç¬¬ä¸€å±‚åŒ…å« ReLU æ¿€æ´»å‡½æ•°ï¼‰äº§ç”Ÿ yes-no åº”ç­” $V_{y,sr},V_{n,sr}\\in \\mathbb R^{n\\times d_v}$ï¼Œä¸ $D_{sr}=1\\ or\\ D_{sr}=0$ å¯¹åº”ã€‚è™½ç„¶å¯ä»¥ä½¿ç”¨å…¨éƒ¨ç‰¹å¾ $f_{sr}$ï¼Œä½†å®éªŒè¡¨æ˜åªç”¨ä¸€éƒ¨åˆ†ç‰¹å¾ï¼ˆ$p_{sr},h_s$ï¼‰çš„è¡¨ç°å°±å¾ˆå¥½äº†ï¼Œè¿˜èƒ½èŠ‚çº¦å‚æ•°ã€‚  æ¨¡ç³Šåº”ç­”ï¼ˆå…¬å¼ 3ï¼‰ï¼šå°†ä¸Šè¿°ç¡®å®šæ€§åº”ç­”æ¨¡ç³ŠåŒ–ï¼Œæ ¹æ®æ¨¡ç³Šå†³ç­– $D_{sr}$ å’Œå…¶è¡¥é›† $\\overline D_{sr}= 1 - D_{sr}$ é€šè¿‡ fuzzy IF-else äº§ç”Ÿæœ€ç»ˆçš„æ¨¡ç³Šåº”ç­”ã€‚\\[\\begin{aligned}V_{y,sr}&amp;=FC_8(ReLU(FC_7(p_{sr},h_s))),&amp;\\quad \\forall (s,r)\\in 1:N,s\\neq r\\\\V_{n,sr}&amp;=FC_{10}(ReLU(FC_9(p_{sr},h_s))),&amp;\\quad \\forall (s,r)\\in 1:N,s\\neq r\\\\V_{sr}&amp;=D_{sr}V_{y,sr}+\\overline D_{sr}V_{n,sr}&amp;\\quad \\forall (s,r)\\in 1:N,s\\neq r\\\\\\end{aligned}\\]æœ€åå¾—åˆ° $n$ ä¸ªå¯¹è±¡å¯¹çš„åº”ç­” $V_{sr}\\in \\mathbb R^{n\\times d_v}$ã€‚  å…¬å¼ 1ï¼šå°†åº”ç­”æ‹¼æ¥ $\\in \\mathbb R^{nd_v}$ï¼Œç„¶åè¿‡ä¸€ä¸ªå…¨è¿æ¥å±‚ï¼Œæé«˜å‘é‡ç»´åº¦å¢åŠ ä¿¡æ¯é‡ï¼Œä»¥å¼¥è¡¥åç»­æœ€å¤§æ± åŒ–å¸¦æ¥çš„ä¿¡æ¯ä¸¢å¤±ã€‚  å…¬å¼ 2ï¼šå¯¹ä¸Šè¿°æ­¥éª¤çš„è¾“å‡ºè¿›è¡Œæœ€å¤§æ± åŒ–ï¼Œå°†æ‰€æœ‰å¯¹ receiver å¯¹è±¡çš„äº¤äº’çš„å½±å“ç´¯ç§¯ã€‚  å…¬å¼ 3ï¼šæœ€åå†é€šè¿‡ä¸€ä¸ªå…¨è¿æ¥å±‚é™ç»´ï¼ˆä¸ä¹‹å‰å‡ç»´å¯¹åº”ï¼‰ã€‚\\[\\begin{aligned}V_{proc,sr} &amp;= FC_{11}(concat(V_{sr}))\\\\V_{proc,r} &amp;= maxpool_{s:(s-r)\\in\\varepsilon}V_{proc,sr}\\\\a_r&amp;=FC_{12}(V_{proc,r}),\\quad \\forall r\\in 1:N\\end{aligned}\\]2.4. åˆ†æä¸Šè¿°æ¶æ„å—åˆ° multi-head self-attention çš„å¯å‘ï¼Œä½†æ˜¯ç»è¿‡äº†å¤§é‡æ”¹é€ ã€‚  ä» self-attention æ”¹æˆ pairwise-attentionï¼›  åŒ…æ‹¬ä¸€ä¸ªå¯å­¦ä¹ çš„ $B$ ä½¿å¾—æ¨¡å‹èƒ½åŠ›æ›´é«˜ï¼›  ä»çŸ©é˜µå…ƒç´ ç§¯å˜ä¸ºå…ƒç´ ç§¯ç„¶åæŒ‰è¡Œæ±‚å’Œï¼Œé™ä½è®¡ç®—é‡å’Œç¡¬ä»¶æ€§èƒ½è¦æ±‚ï¼ŒåŒæ—¶ä¿è¯äº†æ€§èƒ½ï¼›  åªå…è®¸æ¢¯åº¦ä» $V_{sr}$ å›ä¼ ã€‚è¿™ä½¿å¾—é¢å¤–å¢åŠ ä¸å¯å­¦ä¹ çš„äººç±»çŸ¥è¯†æˆä¸ºå¯èƒ½ï¼ˆsection 4.3ï¼‰ï¼ŸFQA èƒ½å­¦åˆ°ï¼š  é è¿‘ï¼ˆProximityï¼‰ï¼šå‡è®¾ $K,Q$ æ˜¯ $p_{sr}$ ä¸”å¯¹åº”çš„ $B$ æ˜¯ $-d_{th}^2$ é‚£ä¹ˆå†³ç­– $D = \\sigma(p_{sr}^Tp_{sr}-d_{th}^2)$ é€¼è¿‘ 0 è¡¨ç¤ºä¸¤ä¸ªå¯¹è±¡ $s$ å’Œ $r$ é—´çš„è·ç¦»å°äº $d_{th}$ã€‚æ³¨æ„åˆ°ä¸Šè¿°å†³ç­–ä¾èµ– $B$ çš„å­˜åœ¨ï¼Œå³ $B$ èµ‹äºˆæ¨¡å‹æ›´çµæ´»çš„èƒ½åŠ›ï¼›  æ¥è¿‘ï¼ˆApproachï¼‰ï¼šç”±äºéƒ¨åˆ†éšè—çŠ¶æ€å†…éƒ¨èƒ½å¤Ÿå­¦ä¹ å¦‚ä½•å¯¹å¯¹è±¡çš„é€Ÿåº¦è¿›è¡Œå»ºæ¨¡ï¼ŒFQA å¯èƒ½å¯ä»¥å­¦ä¹ åˆ°ä¸€ç§ $K_{sr} = v_{sr},Q_{sr} = \\hat p_{sr},B=0$ å½¢å¼ï¼Œè¿™ç§å½¢å¼é€¼è¿‘ 0 è¡¨ç¤ºä¸¤ä¸ªå¯¹è±¡ç›¸äº’ç›´æ¥æ¥è¿‘å¯¹æ–¹ã€‚è™½ç„¶æˆ‘ä»¬å¹¶æ²¡æœ‰ç›´æ¥è¦æ±‚ FQA å­¦ä¹ è¿™äº›å¯è§£é‡Šçš„å†³ç­–ï¼Œä½†æ˜¯å®éªŒè¡¨æ˜ FQA å­¦ä¹ åˆ°çš„æ¨¡ç³Šå†³ç­–èƒ½å¤Ÿé«˜åº¦é¢„æµ‹å¯¹è±¡é—´çš„äº¤äº’ï¼ˆsection 4.3ï¼‰ã€‚2.5. è®­ç»ƒç”¨ MSEï¼Œè¯„ä¼°ä¸‹ä¸€æ—¶åˆ»æ‰€æœ‰å¯¹è±¡çš„é¢„æµ‹ä½ç½®ä¸çœŸå®ä½ç½®çš„åå·®ï¼Œç”¨ Adamï¼Œbatch size = 32ï¼Œ åˆå§‹å­¦ä¹ ç‡ 0.001ï¼Œæ¯ 5 epoch ä¹˜ä»¥ 0.8 ä¸‹é™ã€‚æ‰€æœ‰å¾…æ¯”è¾ƒçš„æ¨¡å‹éƒ½è®­ç»ƒè‡³å°‘ 50 epochï¼Œç„¶åå½“è¿ç»­ 10 epoch çš„éªŒè¯ MSE ä¸ä¸‹é™æ—¶æ¿€æ´» early stoppingï¼Œæœ€å¤šè¿›è¡Œ 100 epochs è®­ç»ƒã€‚æ‰€æœ‰æ ·æœ¬çš„ $T_{obs} = \\frac{2T}{5}$ï¼Œæˆ‘ä»¬éµå¾ªåŠ¨æ€æ—¶é—´è¡¨ï¼Œå…è®¸æ‰€æœ‰æ¨¡å‹æŸ¥çœ‹ $T_{temp}$ æ—¶é—´æ­¥é•¿çš„çœŸå®è§‚æµ‹å€¼ï¼Œç„¶åé¢„æµ‹ $T-Ttemp$ æ—¶é—´æ­¥é•¿ã€‚åœ¨èµ·å§‹é˜¶æ®µï¼Œ$T_{temp} = T$ï¼Œç„¶åæ¯æ¬¡å‡ 1 ç›´åˆ° $T_{temp} = T_{obs}$ã€‚å‘ç°è¿™æ ·æ“ä½œå¯ä»¥æé«˜æ‰€æœ‰æ¨¡å‹çš„é¢„æµ‹æ€§èƒ½ï¼š  è§‚å¯Ÿ $T$ ä¸ªæ­¥é•¿ï¼Œé¢„æµ‹ $T-T=0$ ä¸ªæ­¥é•¿ï¼›  è§‚å¯Ÿ $T-1$ ä¸ªæ­¥é•¿ï¼Œé¢„æµ‹ $T-(T-1)=1$ ä¸ªæ­¥é•¿ï¼›  è§‚å¯Ÿ $T-2$ ä¸ªæ­¥é•¿ï¼Œé¢„æµ‹ $T-(T-2)=2$ ä¸ªæ­¥é•¿ï¼›  â€¦â€¦ï¼›  è§‚å¯Ÿ $T_{obs}$ ä¸ªæ­¥é•¿ï¼Œé¢„æµ‹ $T-(T-T_{obs})=T_{obs}$ ä¸ªæ­¥é•¿ï¼›3. å®éªŒé‡‡ç”¨ä»¥ä¸‹å‡ ä¸ªå‰äººç ”ç©¶çš„æ•°æ®é›†ï¼ˆåŒ…å«ä¸åŒç§ç±»çš„äº¤äº’ç‰¹å¾ï¼‰ã€‚å¦‚æœæ•°æ®é›†æ²¡æœ‰åˆ’åˆ†ï¼Œé‚£ä¹ˆæˆ‘ä»¬æŒ‰ç…§ $70:15:15$ æ¥åˆ’åˆ†è®­ç»ƒé›†ã€éªŒè¯é›†å’Œæµ‹è¯•é›†ã€‚  ETH-UCYï¼š3400 åœºæ™¯ï¼ŒT = 20ï¼›  Collisionsï¼š9500 åœºæ™¯ï¼ŒT = 25ï¼›  NGsimï¼š3500 åœºæ™¯ï¼ŒT = 20ï¼›  Chargesï¼š3600 åœºæ™¯ï¼ŒT = 25ï¼›  NBAï¼š7500 åœºæ™¯ï¼ŒT = 30ã€‚baselinesï¼š  Vanilla LSTMï¼š  Social LSTMï¼š  GraphSAGEï¼š  Graph Networksï¼š  Neural Relational Inferenceï¼š  Graph Attention Networksï¼š4. å…¶å®ƒ  Robust ${L_1}$ Observer-Based Non-PDC Controller Design for Persistent Bounded Disturbed TS Fuzzy Systems5. å‚è€ƒæ–‡çŒ®æ— ã€‚"
  },
  
  {
    "title": "æ·±åº¦å­¦ä¹ æ–‡ç« é˜…è¯»ï¼ˆTSæ·±åº¦æ¨¡ç³Šç½‘ç»œï¼‰",
    "url": "/posts/deep-learning-TSDFN/",
    "categories": "Academic, Paper",
    "tags": "fuzzy, deep learning",
    "date": "2020-12-06 16:39:19 +0800",
    





    
    "snippet": "æœ¬æ–‡ä»‹ç»äº† TS æ·±åº¦æ¨¡ç³Šç½‘ç»œï¼ˆTS Deep Fuzzy Network, TSDFNï¼‰ï¼Œäº 2017 å¹´æå‡ºï¼ŒåŸºäº TS æ¨¡ç³Šç³»ç»Ÿç»„æˆä¸‰å±‚ç½‘ç»œï¼Œå¹¶æ¨å¯¼äº†åå‘ä¼ æ’­çš„æ¢¯åº¦ã€‚  1. ç½‘ç»œç»“æ„  2. ç½‘ç»œå‚æ•°è¾¨è¯†          2.1. å‰å‘ä¼ æ’­      2.2. åå‘ä¼ æ’­        3. å®éªŒ          3.1. å‡†å¤‡å·¥ä½œ      3.2. ç®—ä¾‹ 1      3.3....",
    "content": "æœ¬æ–‡ä»‹ç»äº† TS æ·±åº¦æ¨¡ç³Šç½‘ç»œï¼ˆTS Deep Fuzzy Network, TSDFNï¼‰ï¼Œäº 2017 å¹´æå‡ºï¼ŒåŸºäº TS æ¨¡ç³Šç³»ç»Ÿç»„æˆä¸‰å±‚ç½‘ç»œï¼Œå¹¶æ¨å¯¼äº†åå‘ä¼ æ’­çš„æ¢¯åº¦ã€‚  1. ç½‘ç»œç»“æ„  2. ç½‘ç»œå‚æ•°è¾¨è¯†          2.1. å‰å‘ä¼ æ’­      2.2. åå‘ä¼ æ’­        3. å®éªŒ          3.1. å‡†å¤‡å·¥ä½œ      3.2. ç®—ä¾‹ 1      3.3. ç®—ä¾‹ 2      3.4. åˆ†æ        4. å‚è€ƒæ–‡çŒ®  Shreedharkumar Rajurkar, Nishchal Kumar Verma. Developing deep fuzzy network with Takagi Sugeno fuzzy inference system[J]. IEEE Transactions on Fuzzy System. 2017.1. ç½‘ç»œç»“æ„æå‡ºäº†ä¸€ç§æ–°å‹çš„ä¸‰å±‚ TS Deep Fuzzy Network (TSDFN) ç½‘ç»œæ¶æ„ã€‚TSDFN çš„ç½‘ç»œæ¶æ„å¦‚ä¸‹å›¾æ‰€ç¤ºå›¾ä¸­ï¼Œéšå±‚ï¼ˆhidden layerï¼‰ä¸­çš„æ¯ä¸€ä¸ªç¥ç»å…ƒéƒ½æ˜¯ä¸€ä¸ª TSFIS ï¼Œè¾“å‡ºå±‚åªæœ‰ä¸€ä¸ªç¥ç»å…ƒï¼Œä¹Ÿæ˜¯ä¸€ä¸ª TSFIS ã€‚å½“ç„¶ä¹Ÿå¯ä»¥æ‰©å±•ä¸ºå¤šè¾“å‡ºï¼Œä¸åŒçš„è¾“å‡ºé—´ç›¸äº’ç‹¬ç«‹ã€‚  FISï¼šfuzzy inference systemï¼Œæ¨¡ç³Šæ¨ç†ç³»ç»Ÿï¼Œæ˜¯ä¸€ä¸ªå®Œæ•´çš„è¾“å…¥-è¾“å‡ºæ¨¡ç³Šç³»ç»Ÿï¼Œæ¯”å¦‚ä¸Šé¢ä»‹ç»çš„ TS æ¨¡ç³Šç³»ç»Ÿï¼Œå°±è¢«ç§°ä¸º TSFISä¸€ä¸ª TSFIS ç¥ç»å…ƒçš„æ¨¡ç³Šè§„åˆ™åŸºï¼ˆFuzzy Rul Baseï¼ŒFRBï¼‰åŒ…å«å¤šæ¡æ¨¡ç³Šè§„åˆ™ï¼Œæ¯æ¡è§„åˆ™éƒ½åŒ…æ‹¬å‰æéƒ¨åˆ†å’Œç»“è®ºéƒ¨åˆ†ã€‚ä¸€é˜¶ TSFIS çš„ç»“è®ºæ˜¯è¾“å…¥çš„çº¿å½¢æ–¹ç¨‹ã€‚FRB çš„è§„åˆ™å½¢å¼å¦‚ä¸‹\\[\\begin{aligned}R_i^h:&amp;\\quad {\\rm IF}\\quad x_1\\ is\\ G_{1,i}\\ {\\rm AND}\\ \\cdots\\ {\\rm AND}\\ x_D\\ is\\ G_{D,i}\\quad\\\\&amp;\\quad {\\rm THEN}\\quad y\\ is\\ y_i=p_{i,0}+p_{i,1}x_1+\\cdots+p_{i,D}x_D\\end{aligned}\\]$D$ æ˜¯è¾“å…¥ä¸ªæ•°ï¼Œ$x_d$ æ˜¯ç¬¬ $d$ ä¸ªè¾“å…¥åˆ†é‡ï¼ˆ$d=1,\\cdots,D$ï¼‰ã€‚$R$ æ˜¯è§„åˆ™æ€»ä¸ªæ•°$G_{d,i}$ æ˜¯å‰æä¸­ç›¸åº”çš„è¾“å…¥æ¨¡ç³Šéš¶å±åº¦å‡½æ•°ï¼ˆ$i=1,\\cdots,R$ï¼‰ã€‚å‰æä¸­é‡‡ç”¨ â€œANDâ€ ä½œä¸ºæ¨¡ç³Šè¿æ¥ç¬¦ã€‚ä¸€ä¸ª TSFIS çš„å‚æ•°å³ä¸ºè¾“å…¥å‰ææ¨¡ç³Šéš¶å±åº¦å‡½æ•°çš„å‚æ•°å’Œç»“è®ºç³»æ•°ï¼ŒäºŒè€…çš„ç»„åˆå¯è¡¨ç¤ºç‰¹å®šè¾“å…¥çš„æ¨¡ç³Šç»“æ„ã€‚å¯é‡‡ç”¨å¤šç§æ¨¡ç³Šéš¶å±åº¦å‡½æ•°ã€‚é‡‡ç”¨ä¸åŒçš„æ¨¡ç³Šè¿æ¥ç¬¦å¯ä»¥å®šä¹‰ä¸åŒçš„æ¨¡ç³Šè§„åˆ™åŸºã€‚æ•´ä¸ªç½‘ç»œåŒ…æ‹¬å¦‚ä¸‹å‚æ•°ï¼š  æ¨¡ç³Šè§„åˆ™çš„å‰æï¼ˆpremiseï¼‰ä¸­çš„è¾“å…¥éš¶å±åº¦çš„å‚æ•°ï¼›  æ¯ä¸€å±‚çš„æ¯ä¸€ä¸ª TS æ¨¡ç³Šç¥ç»å…ƒçš„ç»“è®ºéƒ¨åˆ†çš„è¾“å…¥ç³»æ•°ï¼›ä¸€ä¸ª TS æ¨¡ç³Šç¥ç»å…ƒï¼ˆTSFNï¼‰å»ºæ¨¡å‡ºäº†ä¸€ç§è¾“å…¥çš„å¤æ‚å‡½æ•°ï¼Œè¾“å…¥çš„éš¶å±åº¦å‡½æ•°ä»£è¡¨äº†æ¨¡ç³ŠåŒºåŸŸï¼Œå»ºæ¨¡å‡ºäº†è¾“å…¥æ•°æ®çš„ä¸ç¡®å®šæ€§ã€‚æ¨¡ç³ŠåŒºåŸŸå¯ä»¥è¡¨ç¤ºè¯­ä¹‰æ ‡ç­¾ã€‚TSDFN ä¸­çš„ TSFN æå–è¾“å…¥æ•°æ®ä¸­çš„å¤æ‚æ¨¡å¼ï¼Œç›¸åº”çš„FRBå‚æ•°ä»¥æ¨¡ç³Šè§„åˆ™çš„å½¢å¼è¡¨ç¤ºæ¨¡å¼çš„å†…éƒ¨ç»“æ„ã€‚  a TSFN in TSDFN extracts a complex pattern in input data and corresponding FRB parameters represent the nternal structure of the pattern in the form of fuzzy rules.2. ç½‘ç»œå‚æ•°è¾¨è¯†é‡‡ç”¨æ ‡å‡†çš„è¯¯å·®åå‘ä¼ æ’­æ¥é’ˆå¯¹ç‰¹å®šæ•°æ®è¿›è¡Œç½‘ç»œå‚æ•°è¾¨è¯†ã€‚2.1. å‰å‘ä¼ æ’­ä¸‹é¢è€ƒè™‘ ä¸€ä¸ªä¸€èˆ¬çš„éšå±‚ TSFNï¼ˆ$S_h$ï¼‰ï¼Œå‡è®¾è¾“å…¥å‘é‡ä¸º $\\boldsymbol x=[x_1,x_2,\\cdots,x_d,\\cdots,x_D]$ã€‚  $Î¸^h_{d,f}$ denotes parameter of $f^th$ input MF of input $d$ in premise part of a rule in FRB of $S_h$$\\boldsymbol \\theta^h$ è¡¨ç¤ºæŸä¸ªè§„åˆ™ä¸­çš„è¾“å…¥éš¶å±åº¦å‡½æ•°çš„å‚æ•°çŸ©é˜µï¼Œé‚£ä¹ˆ\\[\\begin{aligned}\\boldsymbol \\theta^h = \\begin{bmatrix}\\theta^h_{1,1} &amp; \\cdots &amp; \\theta^h_{1,f} &amp; \\cdots &amp; \\theta^h_{1,F}\\\\\\vdots &amp; \\ddots &amp; \\vdots &amp; \\ddots &amp; \\vdots\\\\ \\theta^h_{d,1} &amp; \\cdots &amp; \\theta^h_{d,f} &amp; \\cdots &amp; \\theta^h_{d,F}\\\\\\vdots &amp; \\ddots &amp; \\vdots &amp; \\ddots &amp; \\vdots\\\\ \\theta^h_{D,1} &amp; \\cdots &amp; \\theta^h_{D,f} &amp; \\cdots &amp; \\theta^h_{D,F}\\end{bmatrix}\\end{aligned}\\]å…¶ä¸­ $F$ æ˜¯éš¶å±åº¦å‡½æ•°çš„å‚æ•°ä¸ªæ•°ï¼ˆä¸ªäººç†è§£ï¼‰ã€‚å¦‚æœéš¶å±åº¦å‡½æ•°é‡‡ç”¨ é«˜æ–¯ å‡½æ•°ï¼Œé‚£ä¹ˆå‚æ•°ä¸ºå‡å€¼å’Œæ–¹å·®ï¼ˆå‚æ•°çš„ä¸ªæ•°ä¸º 2 ï¼‰ã€‚ä¸ºäº†è¿›è¡Œåå‘ä¼ æ’­ï¼Œå¿…é¡»è¦è®¡ç®—æ¢¯åº¦ï¼Œå› æ­¤éš¶å±åº¦å‡½æ•°å¿…é¡»æ˜¯è¿ç»­çš„ã€‚ï¼ˆç±»ä¼¼å…³äºæ¿€æ´»å‡½æ•°æ˜¯å¦è¦æ±‚å¤„å¤„å¯å¯¼çš„é—®é¢˜ï¼Œæ¶‰åŠæ¬¡æ¢¯åº¦ï¼Œä¸åšå±•å¼€ï¼‰$\\boldsymbol p^h$ è¡¨ç¤ºç»“è®ºéƒ¨åˆ†çš„ç³»æ•°çŸ©é˜µï¼Œé‚£ä¹ˆ\\[\\begin{aligned}\\boldsymbol p^h = \\begin{bmatrix}p^h_{1,0} &amp; \\cdots &amp; p^h_{1,f} &amp; \\cdots &amp; p^h_{1,D}\\\\\\vdots &amp; \\ddots &amp; \\vdots &amp; \\ddots &amp; \\vdots\\\\ p^h_{r,0} &amp; \\cdots &amp; p^h_{r,f} &amp; \\cdots &amp; p^h_{r,D}\\\\\\vdots &amp; \\ddots &amp; \\vdots &amp; \\ddots &amp; \\vdots\\\\ p^h_{R,0} &amp; \\cdots &amp; p^h_{R,f} &amp; \\cdots &amp; p^h_{R,D}\\end{bmatrix}\\end{aligned}\\]å…¶ä¸­ $R$ ä¸ºè§„åˆ™ä¸ªæ•°ã€‚å¯¹äºè¾“å‡ºå±‚çš„ TSFNï¼Œå…¶å‚æ•°ä¸éšå±‚çš„ TSFN ç±»ä¼¼ï¼Œåªä¸è¿‡å°†ä¸Šæ ‡æ¢ä¸º $O$ï¼Œå³ $\\boldsymbol \\theta^o, \\boldsymbol p^o$ã€‚ç»™å®šè¾“å…¥ï¼Œéš¶å±åº¦å‡½æ•°çš„è¾“å‡ºè¡¨ç¤ºä¸º\\[\\begin{aligned}\\boldsymbol \\mu^h = \\begin{bmatrix}\\mu^h_{1,1} &amp; \\cdots &amp; \\mu^h_{1,f} &amp; \\cdots &amp; \\mu^h_{1,D}\\\\\\vdots &amp; \\ddots &amp; \\vdots &amp; \\ddots &amp; \\vdots\\\\ \\mu^h_{r,1} &amp; \\cdots &amp; \\mu^h_{r,d} &amp; \\cdots &amp; \\mu^h_{r,D}\\\\\\vdots &amp; \\ddots &amp; \\vdots &amp; \\ddots &amp; \\vdots\\\\ \\mu^h_{R,1} &amp; \\cdots &amp; \\mu^h_{R,d} &amp; \\cdots &amp; \\mu^h_{R,D}\\end{bmatrix}\\end{aligned}\\]å…¶ä¸­ $\\mu^h_{r,d}=\\mu_{G^h_{r,d}(x_d)}$ æ˜¯ç¬¬ $h$ ä¸ªTSæ¨¡ç³Šç¥ç»å…ƒä¸­ç¬¬ $r$ ä¸ªè§„åˆ™ä¸‹ç¬¬ $d$ ä¸ªè¾“å…¥çš„éš¶å±åº¦ã€‚ç¬¬ $r$ ä¸ªè§„åˆ™çš„æƒé‡è®¡ç®—å¦‚ä¸‹ï¼ˆåŸæ–‡ t-norm ï¼Ÿï¼‰\\[\\omega_r^h = \\land_{d=1}^D\\mu_{r,d}^h\\]ç¬¬ $r$ ä¸ªè§„åˆ™çš„è¾“å‡ºï¼ˆåŸæ–‡ç”¨ $v^h_r$ï¼‰\\[y_r^h = p^h_{r,0}+p^h_{r,1}x_1 + \\cdots + p^h_{r,d}x_d+\\cdots+p^h_{r,D}x_D\\]æœ€ç»ˆ $S_h$ çš„è¾“å‡ºä¸º\\[a^h = \\frac{\\sum_{r=1}^R\\omega^h_ry_r^h}{\\sum_{r=1}^R\\omega^h_r}\\]$a^h$ ä½œä¸ºè¾“å‡ºå±‚çš„ STFN çš„ï¼ˆ$H$ ç»´ï¼‰è¾“å…¥ã€‚åœ¨è¾“å‡ºå±‚ï¼Œç»è¿‡ä¸Šè¿°ç±»ä¼¼çš„æ­¥éª¤ï¼Œå¯ä»¥å¾—åˆ°ä¸€ä¸ªè¾“å‡º $y^o$ï¼ˆåŸæ–‡ç”¨ $y^O$ï¼‰ï¼Œä½œä¸ºæ•´ä¸ª TSDFN çš„è¾“å‡ºï¼Œå¦‚ä¸‹\\[\\begin{aligned}\\mu^o_{r,h} &amp;=\\mu_{G^o_{r,h}(a^h)}\\\\\\omega_r^o &amp;= \\land_{h=1}^H\\mu_{r,h}^o\\\\y_r^o &amp;= p^o_{r,0}+p^o_{r,1}a^1 + \\cdots + p^o_{r,h}a^h+\\cdots+p^o_{r,H}a^H\\\\y^o &amp;= \\frac{\\sum_{r=1}^R\\omega^o_ry_r^o}{\\sum_{r=1}^R\\omega^o_r}\\end{aligned}\\]è¯¯å·® $e = y^o-y_d$ å¯ç”¨äº MSE æŸå¤±å‡½æ•°ï¼ˆåŸæ–‡ $\\frac{1}{2n}$ å¯èƒ½ æœ‰è¯¯ï¼‰\\[J = \\frac{1}{2}\\sum_{n=1}^N(e^{(n)})^2\\]å…¶ä¸­ $N$ æ˜¯æ•°æ®æ ·æœ¬ï¼ˆè¾“å…¥è¾“å‡ºå¯¹ï¼‰æ€»ä¸ªæ•°ï¼Œ$e^n$ æ˜¯ç¬¬ $n$ ä¸ªæ ·æœ¬å¯¹åº”çš„è¯¯å·®ã€‚2.2. åå‘ä¼ æ’­é¦–å…ˆæ±‚ loss å¯¹è¾“å‡ºå±‚å‚æ•°çš„æ¢¯åº¦ã€‚loss å¯¹è¾“å‡ºçš„æ¢¯åº¦\\[\\frac{\\partial J}{\\partial y^o} = \\sum_{n=1}^Ne^{(n)}\\]loss å¯¹è¾“å‡ºç³»æ•° $p^o_{r,h}$ çš„æ¢¯åº¦\\[\\begin{aligned}\\frac{\\partial J}{\\partial p_{r,h}^o} &amp;=\\frac{\\partial J}{\\partial y^o}\\frac{\\partial y^o}{\\partial y^o_r}\\frac{\\partial y^o_r}{\\partial p^o_{r,h}} \\\\&amp;=\\sum_{n=1}^Ne^{(n)}\\cdot \\frac{\\omega^o_r}{\\sum_{r=1}^R\\omega^o_r}\\cdot a^h\\end{aligned}\\]å…¶ä¸­ $a^0=1$ ã€‚loss å¯¹è¾“å‡ºå±‚éš¶å±åº¦å‡½æ•°å‚æ•° $\\theta^o_{h,f}$ çš„æ¢¯åº¦\\[\\frac{\\partial J}{\\partial \\theta^o_{h,f}} =\\frac{\\partial J}{\\partial y^o}\\sum_{r=1}^R\\frac{\\partial y^o}{\\partial \\omega^o_r}\\frac{\\partial \\omega^o_r}{\\partial \\mu^o_r}\\frac{\\partial \\mu^o_r}{\\partial \\theta^o_f}\\]ä½†æ˜¯éœ€è¦æ³¨æ„ä¸€ç‚¹ï¼Œä¸æ˜¯æ¯ä¸ªéš¶å±åº¦å‡½æ•°éƒ½å‚ä¸æ¯æ¡è§„åˆ™çš„è®¡ç®—ï¼ˆä¹Ÿå³ä¸æ˜¯æ¯ä¸ªè¾“å…¥éƒ½å‚ä¸è§„åˆ™è®¡ç®—ï¼‰ã€‚å‡è®¾æœ‰ $Q\\leq R$ ä¸ªè§„åˆ™ä¸­åŒ…å«å¾…æ±‚è§£çš„éš¶å±åº¦å‡½æ•°çš„å‚æ•°ï¼Œåˆ™ä¸Šå¼å˜ä¸º  $Q$ denotes the total number of rules in which the corresponding MF appears in premise part.\\[\\frac{\\partial J}{\\partial \\theta^o_{h,f}} =\\frac{\\partial J}{\\partial y^o}\\sum_{q=1}^Q(\\frac{\\partial y^o}{\\partial \\omega^o_q}\\frac{\\partial \\omega^o_q}{\\partial \\mu^o_{q,h}}\\frac{\\partial \\mu^o_{q,h}}{\\partial \\theta^o_{h,f}})\\]ä¸‹é¢æ±‚ loss å¯¹éšå±‚å‚æ•°çš„æ¢¯åº¦ã€‚é¦–å…ˆæ±‚ loss å¯¹éšå±‚è¾“å‡ºçš„æ¢¯åº¦ã€‚æ³¨æ„åˆ°ä» $y^o$ åˆ° $a^h$ å®é™…ä¸Šæ˜¯æœ‰ä¸¤ä¸ªéƒ¨åˆ†çš„ï¼Œå› æ­¤ä¸‹å¼åŒ…å«ä¸¤é¡¹\\[\\frac{\\partial J}{\\partial a^h} = \\frac{\\partial J}{\\partial y^o}\\sum_{r=1}^R(\\frac{\\partial y^o}{\\partial y^o_h}\\frac{\\partial y^o_h}{\\partial a^h}+\\frac{\\partial y^o}{\\partial \\omega^o_r}\\frac{\\partial \\omega^o_r}{\\partial a^h})\\]ç„¶åæ±‚ loss å¯¹éšå±‚ç³»æ•° $p^h_{r,d}$ å’Œéšå±‚éš¶å±åº¦å‡½æ•°å‚æ•° $\\theta^h_{r,f}$ çš„æ¢¯åº¦\\[\\frac{\\partial J}{\\partial p_{r,d}^h} =\\frac{\\partial J}{\\partial a^h} \\cdot\\frac{\\partial a^h}{\\partial y^h_r}\\frac{\\partial y^h_r}{\\partial p^h_{r,d}}\\]\\[\\frac{\\partial J}{\\partial \\theta^h_{d,f}} =\\frac{\\partial J}{\\partial a^h}\\sum_{q=1}^Q(\\frac{\\partial a^h}{\\partial \\omega^h_q}\\frac{\\partial \\omega^h_q}{\\partial \\mu^h_{q,d}}\\frac{\\partial \\mu^h_{q,d}}{\\partial \\theta^h_{d,f}})\\]å®é™…ä¸Šï¼Œéšå±‚å’Œè¾“å‡ºå±‚çš„ $Q$ åº”è¯¥ç”¨ä¸åŒçš„ç¬¦å·è¡¨ç¤ºï¼Œä¸ºäº†ç®€ç•¥æ­¤å¤„ä¸åŠ åŒºåˆ†ï¼ˆä¸ªäººç†è§£ï¼‰ã€‚åŸæ–‡åˆ°æ­¤å¤„å°±ä¸å†æ¨å¯¼ï¼Œè¿™é‡Œä¹Ÿä¸è¿›è¡Œå±•å¼€äº†ã€‚è®¡ç®—å‡ºå…¨éƒ¨æ¢¯åº¦åï¼Œé‡‡ç”¨æ¢¯åº¦ä¸‹é™æ›´æ–°å‚æ•°ã€‚3. å®éªŒ3.1. å‡†å¤‡å·¥ä½œé‡‡ç”¨é«˜æ–¯éš¶å±åº¦å‡½æ•°ï¼Œç®€ä¾¿èµ·è§ï¼Œéšå±‚çš„æ¯ä¸ªæ¨¡ç³Šç¥ç»å…ƒçš„æ¯æ¡è§„åˆ™ä¸­ï¼Œå‡é‡‡ç”¨ç›¸åŒä¸ªæ•°çš„éš¶å±åº¦å‡½æ•°ã€‚ä¸ºäº†ä»å‰æå‚æ•°å€¼è¯„ä¼°è§„åˆ™æƒé‡ï¼Œé‡‡ç”¨ ä»£æ•°ä¹˜ç§¯ï¼ˆè€Œä¸æ˜¯å–å°ï¼‰ ä½œä¸º t-norm è¿ç®—ç¬¦ï¼Œå› ä¸ºå®ƒæ˜“äºæ±‚å¾®åˆ†ã€‚è®¾è®¡ä¸‰ç§å·¥å†µï¼š  ä¸åŠ ä»»ä½•å¤„ç†çš„åŸå§‹è®­ç»ƒæ•°æ®é›†ï¼›  å¢åŠ å°å¹…åº¦çš„ä¸ç²¾ç¡®çš„è®­ç»ƒæ•°æ®é›†ã€‚å®é™…ä¸Šï¼Œåœ¨è¿›è¡Œæµ‹é‡æ—¶ï¼Œæ€»æ˜¯å­˜åœ¨æµ‹é‡å€¼æ­£ç¡®æ€§çš„å…¬å·®ã€‚å®é™…å€¼åœ¨æµ‹é‡å€¼çš„æŒ‡å®šå…¬å·®èŒƒå›´å†…ã€‚ä¸ºäº†åœ¨æ•°æ®é›†ä¸­æ·»åŠ ä¸ç²¾ç¡®åº¦ï¼Œæ•°æ®é›†å€¼çš„æŸä¸€éšæœºéƒ¨åˆ†åœ¨æŸäº›å¸¦å‰ç¼€ï¼ˆprefixedï¼Ÿï¼‰çš„å…¬å·®å¸¦ä¹‹é—´å˜åŒ–ï¼›  æ›´è¿›ä¸€æ­¥ï¼Œæ·»åŠ æ¨¡ç³Šæ€§ä½¿å¾—æ•°æ®é›†å«ç³Šä¸æ¸…ã€‚é€šå¸¸è€Œè¨€ï¼Œæ¨¡ç³Šæ€§æ˜¯æŒ‡å¯¹å€¼çš„ä¸æ¸…æ¥šçš„ç†è§£æˆ–ä¸æ­£ç¡®å’Œé”™è¯¯çš„åº¦é‡ã€‚åœ¨æ¨¡ç³Šæƒ…å†µä¸‹ï¼Œå¤šä¸ªè§‚æµ‹è€…ï¼ˆæˆ–ä¼ æ„Ÿå™¨ï¼‰å¯¹æŸä¸ªå•ä¸ªå€¼æ²¡æœ‰è¾¾æˆå…±è¯†ã€‚å¦‚æœè®¤ä¸ºæŸæ•°å€¼å±äºæ¨¡ç³Šé›†ï¼Œåˆ™æ›´æ”¹å…¶å‚æ•°ä¼šå¯¼è‡´æ¨¡ç³Šæ€§ï¼ˆvaguenessï¼‰å¢åŠ åˆ°æ•°æ®é›†ä¸­ï¼Œå› ä¸ºæ›´æ”¹æ¨¡ç³Šé›†çš„å‚æ•°ä¼šç”±äºæ¨¡ç³Šæ€§è€Œå¼•å…¥ä¸ç¡®å®šæ€§ï¼ˆuncertaintyï¼‰ï¼Œå¹¶ä¸”æ¨¡ç³Šé›†çš„æ€§è´¨ä¹Ÿä¼šå˜å¾—æ¨¡ç³Šï¼ˆvagueï¼‰ã€‚æœ¬æ–‡è€ƒè™‘ä½¿ç”¨é«˜æ–¯æ¨¡ç³Šé›†å°†æ¨¡ç³Šæ€§æ·»åŠ åˆ°æ•°æ®ä¸­ã€‚          If data values are considered to belong to fuzzy set THEN varying its parameters leads to add vagueness into dataset since varying the parameter of fuzzy set introduces uncertainty due to vagueness and the nature of fuzzy set becomes vague.      åç»­æ¯ä¸ªå®éªŒä¸­ï¼Œé’ˆå¯¹ä¸Šè¿°æ¯ä¸ªæƒ…å†µï¼Œå°†æ•°æ®é›†åˆ’åˆ†ä¸º 70% çš„è®­ç»ƒé›†ï¼Œ15% çš„éªŒè¯é›†å’Œ 15% çš„æµ‹è¯•é›†ã€‚TSDFN ç½‘ç»œæ¶æ„çš„ç¡®å®šåŒ…å«ä¸‹é¢å‡ æ­¥ï¼š  TSDFN çš„ç½‘ç»œæ¶æ„ï¼šä¸åŒçš„éšå±‚æ¨¡ç³Šç¥ç»å…ƒä¸ªæ•°ï¼›  TSDFN çš„ç½‘ç»œç»“æ„ï¼šä¸åŒçš„éš¶å±åº¦å‡½æ•°ä¸ªæ•°ï¼›  å¯¹æ¯ä¸ªç½‘ç»œç»“æ„åœ¨è®­ç»ƒé›†ä¸Šè®­ç»ƒï¼Œåœ¨éªŒè¯é›†ä¸Šæµ‹è¯•ï¼›  æ ¹æ®æœ€å¥½çš„æµ‹è¯•æ€§èƒ½ç¡®å®šéš¶å±åº¦å‡½æ•°ä¸ªæ•°ï¼ˆå³ç¡®å®šç½‘ç»œç»“æ„ï¼‰ï¼›  å°†å·²ç»ç¡®å®šéš¶å±åº¦å‡½æ•°ä¸ªæ•°çš„ä¸åŒæ¶æ„çš„ç½‘ç»œåœ¨æµ‹è¯•é›†ä¸Šæµ‹è¯•ã€‚ï¼ˆç„¶åå°±èƒ½æœ€ç»ˆç¡®å®šé‡‡ç”¨å•¥æ¶æ„çš„ TSDFN äº†ï¼Ÿï¼‰åœ¨ä¸Šè¿°æ¯ä¸ªå·¥å†µä¸‹ï¼Œè®¾è®¡ä¸€ä¸ª 3 å±‚æ™®é€šç¥ç»ç½‘ç»œä¸ TSDFN è¿›è¡Œå¯¹æ¯”ã€‚ç¥ç»ç½‘ç»œæ¿€æ´»å‡½æ•°é‡‡ç”¨ sigmoid å‡½æ•°ï¼Œéšå±‚ä¸ªæ•°ä¸ TSDFN ä¸€è‡´ï¼Œè®­ç»ƒæ–¹å¼é‡‡ç”¨ç°æœ‰çš„å¤æ‚æ–¹å¼ï¼ˆå•¥ï¼Ÿï¼‰ã€‚  This ANN is trained with existing sophisticated approaches.é‡‡ç”¨ MSE è¡¡é‡æ€§èƒ½ã€‚æœ€ç»ˆå¦‚å›¾æ‰€ç¤ºï¼ˆå›¾ä¸­ impression å¯èƒ½å†™é”™äº†ï¼Œåº”è¯¥æ˜¯ imprecisionï¼‰3.2. ç®—ä¾‹ 1è¾¨è¯†ä¸€ä¸ªéçº¿æ€§ç³»ç»Ÿ\\[f=x^2+y^2+xy+2y+x\\]æ–‡ä¸­æ²¡è¯´æ•°æ®é›†å’‹æ¥çš„ï¼Œä¸ªäººç†è§£å°±æ˜¯å¯¹ä¸Šè¿°ç³»ç»Ÿè¿›è¡Œç¦»æ•£èµ‹å€¼æ±‚è§£ï¼Œç„¶åå¾—åˆ°ä¸€å †è¾“å…¥è¾“å‡ºæ ·æœ¬é›†ï¼ˆ$f_i\\leftarrow (x_i,y_i),i=1,2,\\cdots,M$ï¼‰ä¸‹è¡¨åˆ—ä¸¾äº† TSDFN åœ¨éªŒè¯é›†ä¸Šçš„æµ‹è¯•ç»“æœï¼ŒåŠ ç²—çš„æ•°å­—è¡¨ç¤ºä¸åŒç½‘ç»œæ¶æ„ä¸‹çš„æœ€å° MSEï¼Œå¯¹åº”æœ€ä½³çš„ç½‘ç»œç»“æ„ï¼ˆå¯¹åº”æœ€ä½³çš„éš¶å±åº¦å‡½æ•°ä¸ªæ•°ï¼‰ã€‚ç¡®å®šä¸åŒå·¥å†µä¸‹çš„æœ€ä½³ç½‘ç»œç»“æ„ï¼ˆéš¶å±åº¦å‡½æ•°ä¸ªæ•°ï¼‰åï¼Œåˆ†åˆ«åœ¨ä¸‰ä¸ªå·¥å†µä¸‹ä¸ ANN è¿›è¡Œæ¯”è¾ƒï¼Œç»“æœå¦‚ä¸‹ã€‚å¯ä»¥çœ‹å‡º TSDFN å‡å…¨é¢è¶…è¶Š ANNã€‚3.3. ç®—ä¾‹ 2å°è½¦å€’è½¦é—®é¢˜ï¼ˆTruck Backer Upper problemï¼‰ï¼Œæ˜¯ä¸€ä¸ªå°†å¡è½¦ä»¥åˆé€‚çš„æ–¹å‘åé€€åˆ°å¯¹æ¥ä½ç½®çš„é—®é¢˜ã€‚æ¥è‡ªä»¥ä¸‹å‚è€ƒæ–‡çŒ®ï¼Œæ€»å…±åŒ…å« 14 ä¸ªè¡¨ï¼ˆæ€»å…± 239 ä¸ªè¯»æ•°ï¼‰ï¼Œæ¯ä¸ªè¡¨å‡åŒ…å«ä½ç½® $x$ å’Œæ–¹å‘ $\\phi$ çš„å€¼ä»¥åŠç›¸åº”çš„è¾“å‡º â€”â€” è½¬å‘è§’ $\\theta$ã€‚ç”¨äºç”Ÿæˆæ•°æ®é›†çš„æ¨¡å‹ï¼ˆå¾…è¯†åˆ«çš„éçº¿æ€§å¤æ‚ç³»ç»Ÿï¼‰åœ¨æ–‡çŒ®ä¸­ä¹Ÿæœ‰è¯´æ˜ã€‚  Wang, Li-Xin, and Jerry M. Mendel, Generating fuzzy rules from numerical data, with applications, Signal and Image Processing Institute, University of Southern California, Department of Electrical EngineeringSystems, 1991.TSDFN åœ¨éªŒè¯é›†ä¸Šçš„æµ‹è¯•ç»“æœå¦‚ä¸‹è¡¨æ‰€ç¤ºã€‚åŒæ ·åˆ†åˆ«åœ¨ä¸‰ä¸ªå·¥å†µä¸‹ä¸ ANN è¿›è¡Œæ¯”è¾ƒï¼Œç»“æœå¦‚ä¸‹ã€‚å¯ä»¥çœ‹å‡º TSDFN å‡å…¨é¢è¶…è¶Š ANNã€‚3.4. åˆ†æä¸¤ä¸ªç®—ä¾‹çš„ç»“æœè¡¨æ˜ï¼Œå¯¹äºç›¸åŒæ•°é‡çš„éšå±‚ç¥ç»å…ƒä¸ªæ•°ï¼Œåœ¨éš¶å±å‡½æ•°æ•°é‡æ–¹é¢ï¼Œæ€§èƒ½å­˜åœ¨ä¸€äº›ä¸è§„å¾‹ã€‚å¯¹å®éªŒçš„åˆ†æè¡¨æ˜ï¼Œè¯¯å·®åœ¨è¿™äº›ç®—ä¾‹ä¸­ä¸ä¸‹é™äº†ï¼Œå› ä¸ºæ¢¯åº¦åœ¨åˆ°è¾¾æœ€å°å‰å¡ä½äº†ã€‚é€‚å½“çš„è°ƒæ•´å­¦ä¹ ç‡å’Œå¢åŠ è¿­ä»£æ¬¡æ•°å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚ä½†æ˜¯æ€»çš„æ¥è¯´ TSDFN ç‰›é€¼ï¼  In both case studies, the results show that there is a slight irregularity in the performance with respect to the number of membership functions for the same number of hidden nodes. The analysis of experiments have shown that this happens because the training error doesnâ€™t decrease in such cases and the gradient gets stuck before reaching minimum. Proper tunning of learning rate and increased number of iterations solve this problem4. å‚è€ƒæ–‡çŒ®æ— ã€‚"
  },
  
  {
    "title": "æ·±åº¦å­¦ä¹ æ–‡ç« é˜…è¯»ï¼ˆTSæ¨¡ç³Šç³»ç»Ÿï¼‰",
    "url": "/posts/deep-learning-TS-fuzzy-system/",
    "categories": "Academic, Paper",
    "tags": "fuzzy, deep learning",
    "date": "2020-12-02 16:39:19 +0800",
    





    
    "snippet": "æœ¬æ–‡ä»‹ç»äº† TS å‹æ¨¡ç³Šç³»ç»Ÿï¼Œç”± Takagi å’Œ Sugeno ä¸¤ä½å­¦è€…åœ¨ 1985 å¹´æå‡ºï¼Œä¸»è¦æ€æƒ³æ˜¯å°†éçº¿æ€§ç³»ç»Ÿç”¨è®¸å¤šçº¿æ®µç›¸è¿‘çš„è¡¨ç¤ºå‡ºæ¥ï¼Œå³å°†å¤æ‚çš„éçº¿æ€§é—®é¢˜è½¬åŒ–ä¸ºåœ¨ä¸åŒå°çº¿æ®µä¸Šçš„é—®é¢˜ã€‚  1. TS æ¨¡ç³Šç³»ç»Ÿ          1.1. æ¨ç†è¿‡ç¨‹      1.2. ç‰¹æ€§      1.3. è¾¨è¯†ç®—æ³•                  1.3.1. ç»“è®ºå‚æ•°è¾¨è¯†          1...",
    "content": "æœ¬æ–‡ä»‹ç»äº† TS å‹æ¨¡ç³Šç³»ç»Ÿï¼Œç”± Takagi å’Œ Sugeno ä¸¤ä½å­¦è€…åœ¨ 1985 å¹´æå‡ºï¼Œä¸»è¦æ€æƒ³æ˜¯å°†éçº¿æ€§ç³»ç»Ÿç”¨è®¸å¤šçº¿æ®µç›¸è¿‘çš„è¡¨ç¤ºå‡ºæ¥ï¼Œå³å°†å¤æ‚çš„éçº¿æ€§é—®é¢˜è½¬åŒ–ä¸ºåœ¨ä¸åŒå°çº¿æ®µä¸Šçš„é—®é¢˜ã€‚  1. TS æ¨¡ç³Šç³»ç»Ÿ          1.1. æ¨ç†è¿‡ç¨‹      1.2. ç‰¹æ€§      1.3. è¾¨è¯†ç®—æ³•                  1.3.1. ç»“è®ºå‚æ•°è¾¨è¯†          1.3.2. å‰æå‚æ•°è¾¨è¯†          1.3.3. å‰æå˜é‡çš„é€‰æ‹©                    1.4. å¹¿ä¹‰ TS æ¨¡ç³Šç³»ç»Ÿ        3. å‚è€ƒæ–‡çŒ®1. TS æ¨¡ç³Šç³»ç»Ÿ  Tomohiro Takagi and Michio Sugeno. Fuzzy Identification of Systems and Its Applications to Modeling and Control[J]. Fuzzy Identification of Systems, 1993.  A mathematical tool to build a fuzzy model of a system where fuzzy implications and reasoning are used is presented in this paper. The premise of an implication is the description of fuzzy subspace of inputs and its consequence is a linear input-output relation. The method of identification of a system using its input-output data is then shown. Two applications of the method to industrial processes are also discussed: a water cleaning process and a converter in a steel-making process.TS æ¨¡ç³Šæ¨¡å‹æ˜¯ç”±å¤šä¸ªçº¿æ€§ç³»ç»Ÿå¯¹åŒä¸€ä¸ªéçº¿æ€§ç³»ç»Ÿè¿›è¡Œæ‹Ÿåˆï¼Œåˆ©ç”¨æ¨¡ç³Šç®—æ³•è¿›è¡Œè¾“å…¥å˜é‡çš„è§£æ„ï¼Œé€šè¿‡æ¨¡ç³Šæ¼”ç®—æ¨ç†å†å»æ¨¡ç³ŠåŒ–ï¼Œç”Ÿæˆæ•°æ¡ä»£è¡¨æ¯ç»„è¾“å…¥ä¸è¾“å‡ºå…³ç³»çš„æ–¹ç¨‹ã€‚å‡è®¾æ¨¡ç³Šé›†ä¸º $A$ï¼Œéš¶å±åº¦å‡½æ•°ä¸º $A(x)$ï¼Œ$x$ å±äºæŸè®ºåŸŸ $X$ã€‚â€œ$x$ å±äº $A$ ä¸” $y$ å±äº $B$â€ è¡¨è¾¾ä¸º\\[\\vert x\\ is\\ A\\ and\\ y\\ is\\ B \\vert = A(x) \\land B(y)\\]å¯¹äºç¦»æ•£ç³»ç»Ÿæ¨¡å‹ï¼Œä»¤ $R_i$ è¡¨ç¤ºæ¨¡ç³Šç³»ç»Ÿçš„ç¬¬ $i$ æ¡è§„åˆ™ï¼Œå…¶ä¸€é˜¶ TS æ¨¡ç³Šç³»ç»Ÿå…¸å‹çš„æ¨¡ç³Šè•´å«æ¡ä»¶ï¼ˆImplicationï¼‰å¥ä¸º\\[R_i:\\quad IF\\quad f(x_1\\ is\\ A_1,\\ \\cdots,\\ x_k\\ is\\ A_k)\\quad THEN\\quad y = g(x_1, \\cdots, x_k)\\]åœ¨å®é™…åº”ç”¨ä¸­ï¼Œ$f$ ä¸º $and$ è¿æ¥ç¬¦ï¼Œ$g$ ä¸ºçº¿æ€§å‡½æ•°ï¼Œå³\\[R:\\quad IF\\quad x_1\\ is\\ A_1\\ and\\ \\cdots\\ and\\ x_k\\ is\\ A_k\\quad THEN\\quad y = p_0+p_1x_1+\\cdots+p_kx_k)\\]1.1. æ¨ç†è¿‡ç¨‹å‡è®¾æœ‰ 3 ä¸ªä¸Šè¿°æ ¼å¼çš„è•´å«æ¡ä»¶ $R_i,\\ i=1,\\cdots,3$ï¼Œåˆ†åˆ«ä¸º\\[\\begin{aligned}R_1:&amp;\\quad IF\\quad x_1\\ is\\ small_1\\ and\\ x_2\\ is\\ small_2 &amp; \\quad THEN \\quad y=x_1+x_2\\\\R_2:&amp;\\quad IF\\quad x_1\\ is\\ big_1\\ &amp; \\quad THEN \\quad y=2x_1\\\\R_2:&amp;\\quad IF\\quad x_2\\ is\\ big_2\\ &amp; \\quad THEN \\quad y=3x_2\\end{aligned}\\]å‰æï¼ˆPremiseï¼‰ä¸­æ¶‰åŠåˆ°çš„éš¶å±åº¦å‡½æ•°å®šä¹‰ä¸ºå‡è®¾è¾“å…¥ $x_1=12, x_2=5$ï¼Œé‚£ä¹ˆä¸‰ä¸ªå‰æä¸‹çš„ç»“è®ºï¼ˆConsequenceï¼‰ä¸º\\[\\begin{aligned}y_1 &amp;= x_1+x_2 = 17\\\\y_2 &amp;= 2x_1 = 24\\\\y_3 &amp;= 3x_2 = 15\\end{aligned}\\]ç›¸åº”çš„ä¸‰ä¸ªçœŸå€¼ï¼ˆTrue Valueï¼‰ä¸º\\[\\begin{aligned}t_1 &amp;= small_1(x_1)\\land small_2(x_2) = 0.25\\land 0.375 = 0.25\\\\t_2 &amp;= big_1(x_1) = 0.2\\\\t_3 &amp;= big_2(x_2) = 0.375\\end{aligned}\\]é‚£ä¹ˆæœ€ç»ˆ $y$ çš„å–å€¼ä¸ºï¼ˆæ­¤å¤„é‡‡ç”¨åŠ æƒå¹³å‡æ³•ï¼‰\\[y = \\frac{t_1y_1+t_2y_2+t_3y_3}{t_1+t_2+t_3} \\approx 17.8\\]ç”¨ä¸€å¼ è¡¨æ ¼å¯ä»¥åˆ—å†™å¦‚ä¸‹1.2. ç‰¹æ€§ä¼˜ç‚¹ï¼š  ç›¸æ¯”åˆ†æ®µçº¿æ€§é€¼è¿‘ï¼Œæ•°å­¦å½¢å¼æ›´ç´§å‡‘ï¼Œè¿æ¥å¤„æ¯”è¾ƒå¹³æ»‘ï¼›  ç›¸æ¯”åŸå§‹çš„éçº¿æ€§å‡½æ•°ï¼Œæ›´åŠ ç®€æ˜ï¼Œæ–¹ä¾¿è¿›ä¸€æ­¥å¤„ç†ï¼›  æ¨¡ç³Šåˆ’åˆ†å¯ä»¥åŒ…å«æœ‰æ„ä¹‰çš„è¯­ä¹‰æ¡ä»¶ï¼Œæ–¹ä¾¿çš„è®²äººç±»è¯­è¨€è§„åˆ™å½¢å¼è¡¨è¾¾çš„å…ˆéªŒçŸ¥è¯†èå…¥åˆ°æ¨¡å‹å»ºç«‹è¿‡ç¨‹ä¸­ï¼ˆæ¨¡ç³Šé€»è¾‘çš„åŠŸæ•ˆï¼‰ï¼›  ä¸‡èƒ½é€¼è¿‘å®šå¾‹è¡¨æ˜ TS æ¨¡ç³Šç³»ç»Ÿèƒ½ä»¥ä»»æ„ç²¾åº¦é€¼è¿‘éçº¿æ€§æ¨¡å‹ï¼Œé€‚ç”¨äºå¹¿æ³›ç±»å‹çš„éçº¿æ€§ç³»ç»Ÿã€‚å¦ä¸€æ–¹é¢ï¼ŒTS æ¨¡ç³Šç³»ç»Ÿå­˜åœ¨ä»¥ä¸‹é—®é¢˜  éš¶å±åº¦å‡½æ•°å…¨éƒ¨ç”±ç›´çº¿ç»„æˆï¼Œä¸å…·å¤‡è‡ªé€‚åº”æ€§  ä¸èƒ½ä¿è¯å‚æ•°çš„æœ€ä¼˜æ€§  æ¨¡ç³Šè§„åˆ™æ•°ç›®æ— æ³•æœ€ä½³ç¡®å®šï¼Œå³æ— æ³•é¢„çŸ¥æ¨¡å‹çš„å¤æ‚ç¨‹åº¦1.3. è¾¨è¯†ç®—æ³•éœ€è¦ç¡®å®šä»¥ä¸‹ä¸‰ä¸ªéƒ¨åˆ†  $x_i, \\cdots, x_k$ï¼Œå‰æå˜é‡ï¼›  $A_1,\\cdots,A_k$ï¼Œéš¶å±åº¦å‡½æ•°çš„å‚æ•°ï¼Œç®€è®°ä¸ºéš¶å±åº¦å‚æ•°ï¼›  $p_0, p_1,\\cdots,p_k$ï¼Œç»“è®ºä¸­çš„å‚æ•°ã€‚æ³¨æ„ï¼Œå‰æä¸­çš„å˜é‡ä¸éœ€è¦å…¨éƒ¨å‡ºç°ã€‚å‰ä¸¤ä¸ªéƒ¨åˆ†çš„ç¡®å®šå’Œå˜é‡å¦‚ä½•åˆ’åˆ†åˆ°æ¨¡ç³Šå­ç©ºé—´æœ‰å…³ï¼Œæœ€åä¸€ä¸ªéƒ¨åˆ†ä¸æ¨¡ç³Šå­ç©ºé—´ä¸­å¦‚ä½•æè¿°è¾“å…¥è¾“å‡ºå…³ç³»æœ‰å…³ã€‚è®ºæ–‡ä½œè€…æå‡ºä¾æ¬¡é€å±‚è€ƒè™‘å¦‚ä½•ç¡®å®šã€‚1.3.1. ç»“è®ºå‚æ•°è¾¨è¯†å‡è®¾ä¸€ä¸ªä¸€èˆ¬çš„ç³»ç»Ÿï¼ˆ$n$ æ¡è§„åˆ™ï¼‰è¡¨ç¤ºå¦‚ä¸‹\\[\\begin{aligned}R_1:&amp;\\quad IF\\quad x_1\\ is\\ A_1^1,\\ \\cdots,\\ x_k\\ is\\ A_k^1\\\\&amp;\\quad THEN\\quad y=p_0^1 + p_1^1\\cdot x_1+\\cdots+p^1_k\\cdot x_k\\\\&amp;\\quad \\vdots\\\\R_n:&amp;\\quad IF\\quad x_1\\ is\\ A_1^n,\\ \\cdots,\\ x_k\\ is\\ A_k^n\\\\&amp;\\quad THEN\\quad y=p_0^n + p_1^n\\cdot x_1+\\cdots+p^n_k\\cdot x_k\\\\\\end{aligned}\\]é‚£ä¹ˆè¾“å‡ºä¸º\\[y = \\frac{\\sum_{i=1}^n (A_1^i(x_1)\\land\\cdots\\land A_k^i(x_k))\\cdot(p_0^i+p_1^ix_1+\\cdots+p_k^ix_k)}{\\sum_{i=1}^n (A_1^i(x_1)\\land\\cdots\\land A_k^i(x_k))}\\]å‡è®¾\\[\\beta_i = \\frac{A_1^i(x_1)\\land\\cdots\\land A_k^i(x_k)}{\\sum_{i=1}^n (A_1^i(x_1)\\land\\cdots\\land A_k^i(x_k))}\\]é‚£ä¹ˆ\\[y = \\sum_{i=1}^n\\beta_i(p_0^i+p_1^ix_1+\\cdots+p_k^ix_k)\\]å½“ç»™å®šä¸€ç»„è¾“å…¥è¾“å‡ºæ•°æ® $x_{1j},\\cdots,x_{kj}\\rightarrow y_j\\ (j=1,\\cdots,m)$ æ—¶ï¼Œå¯ä»¥é€šè¿‡æœ€å°äºŒä¹˜æ³•æ¥ç¡®å®šå‚æ•° $p_0^i, p_1^i,\\cdots,p_k^i$ã€‚  æœ€å°äºŒä¹˜æ³•ï¼šåœ¨å®éªŒä¸­è·å¾—äº†è‡ªå˜é‡ä¸å› å˜é‡çš„è‹¥å¹²ç»„å¯¹åº”æ•°æ®ï¼Œåœ¨ä½¿åå·®å¹³æ–¹å’Œå–æœ€å°å€¼æ—¶ï¼Œæ‰¾å‡ºä¸€ä¸ªå·²çŸ¥ç±»å‹çš„å‡½æ•°ï¼ˆå³ç¡®å®šå…³ç³»å¼ä¸­çš„å‚æ•°ï¼‰çš„æ–¹æ³•ã€‚ç»è¿‡ TS æ¨¡ç³Šç³»ç»Ÿçš„æ¨ç†åå¾—åˆ°è¾“å‡ºçš„ä¼°è®¡ä¸º\\[\\begin{aligned}\\hat y_1 &amp;= \\sum_{i=1}^n\\beta_{i1}(p_0^i+p_1^ix_{11}+\\cdots+p_k^ix_{k1})\\\\\\hat y_2 &amp;= \\sum_{i=1}^n\\beta_{i2}(p_0^i+p_1^ix_{12}+\\cdots+p_k^ix_{k2})\\\\&amp;\\cdots\\\\\\hat y_m &amp;= \\sum_{i=1}^n\\beta_{im}(p_0^i+p_1^ix_{1m}+\\cdots+p_k^ix_{km})\\\\\\end{aligned}\\]å¯¹äºå…¶ä¸­ç¬¬ $j$ ä¸ªå¼å­ï¼Œå±•å¼€å¦‚ä¸‹\\[\\begin{aligned}\\hat y_j &amp;= \\sum_{i=1}^n\\beta_{ij}(p_0^i+p_1^ix_{1j}+\\cdots+p_k^ix_{kj})\\\\&amp;= (\\beta_{1j}p_0^1+\\cdots+\\beta_{nj}p_0^n)+(\\beta_{1j}p_1^1+\\cdots+\\beta_{nj}p_1^n)x_{11}+\\cdots\\\\&amp;= [\\beta_{1j},\\cdots,\\beta_{nj}][p_0^1,\\cdots,p_0^n]^T+[\\beta_{1j}x_{11},\\cdots,\\beta_{nj}x_{11}][p_1^1,\\cdots,p_1^n]^T+\\cdots\\\\&amp;=\\begin{bmatrix}  \\beta_{1j}\\cdots\\beta_{nj},\\quad \\beta_{1j}x_{11}\\cdots\\beta_{nj}x_{11},\\quad \\cdots\\end{bmatrix}\\begin{bmatrix}  p_0^1\\\\  \\vdots\\\\  p_0^n\\\\  \\\\  p_1^1\\\\  \\vdots\\\\  p_1^n\\\\  \\\\  \\vdots\\end{bmatrix}\\end{aligned}\\]å…¶ä¸­\\[\\beta_{ij} = \\frac{A_{i1}(x_{1j})\\land\\cdots\\land  A_{ik}(x_{kj})}{\\sum_j A_{i1}(x_{1j})\\land\\cdots\\land A_{ik}(x_{kj})}\\]å°†ä¸Šå¼çš„ $j$ åœ¨ $[1,m]$ ä¸Šå±•å¼€ï¼Œå¯å†™æˆçŸ©é˜µå½¢å¼ã€‚å‡è®¾ $X\\in \\mathbb R^{m\\times n(k+1)}$ï¼Œ$Y,\\hat Y\\in \\mathbb R^{m}$ï¼Œ$P\\in \\mathbb R^{n(k+1)}$ï¼Œåˆ™\\[\\begin{aligned}X &amp;= \\begin{bmatrix}\\beta_{11}\\cdots\\beta_{n1},\\ \\beta_{11}x_{11}\\cdots\\beta_{n1}x_{11},\\ \\cdots,\\ beta_{11}x_{k1}\\cdots\\beta_{n1}x_{k1}\\\\\\cdots\\\\\\beta_{1m}\\cdots\\beta_{nm},\\ \\beta_{11}x_{1m}\\cdots\\beta_{nm}x_{1m},\\ \\cdots,\\ \\beta_{1m}x_{km}\\cdots\\beta_{nm}x_{km}\\end{bmatrix}\\\\Y &amp;= [y_1,\\cdots,y_m]^T\\\\\\hat Y &amp;= [\\hat y_1,\\cdots,\\hat y_m]^T\\\\P&amp;=[p_0^1\\cdots p_0^n,\\cdots p_1^1\\cdots p_1^n,\\cdots,p_k^1\\cdots p_k^n]^T\\end{aligned}\\]$m$ è¡¨ç¤ºæ ·æœ¬ä¸ªæ•°ï¼ˆ$X,Y$ çš„è¡Œæ•°ï¼‰ï¼Œ$n$ è¡¨ç¤ºè§„åˆ™ä¸ªæ•°ï¼Œ$n(k+1)$ è¡¨ç¤ºå¾…ä¼°è®¡çš„ç‰¹å¾å‚æ•° $P$ çš„ä¸ªæ•°ã€‚ç”¨çŸ©é˜µå½¢å¼è¡¨è¾¾çš„æ¨ç†è¿‡ç¨‹å˜ä¸º\\[\\hat Y = XP\\]æŸå¤±å‡½æ•°å®šä¹‰ä¸º\\[J(P) = \\frac{1}{2}(\\hat Y-Y)^T(\\hat Y-Y)= \\frac{1}{2}(XP-Y)^T(XP-Y)\\]æ ¹æ®æœ€å°äºŒä¹˜æ³•åŸç†ï¼Œå°†æŸå¤±å‡½æ•°å¯¹å¾…ä¼°è®¡å‚æ•°æ±‚å¯¼å– 0ï¼Œç»“æœä¸ºï¼ˆç»„å†…å¤§ç¥æ¨å¯¼è¡¨ç¤ºæ— è¯¯ï¼‰  Eurekaæœºå™¨å­¦ä¹ è¯»ä¹¦ç¬”è®°. æœ€å°äºŒä¹˜æ³•ï¼ˆleast sqaure methodï¼‰\\[\\begin{aligned}&amp;\\frac{\\partial}{\\partial P}J(P)= X^T(XP-Y)=0\\\\&amp;\\Rightarrow X^TXP=X^TY\\Rightarrow P=(X^TX)^{-1}X^TY\\end{aligned}\\]å³å¾—åˆ°æœ€å°äºŒä¹˜æ³•çš„æ ‡å‡†è§£æè§£\\[P=(X^TX)^{-1}X^TY\\]å¦‚æœèƒ½å¤Ÿæä¾›è¶³å¤Ÿæ•°é‡çš„æ— å™ªå£°æ ·æœ¬æ•°æ®ï¼Œæœ€å°äºŒä¹˜æ³•å¯ä»¥ç²¾ç¡®ä¼°è®¡å‡ºåŸå§‹é—®é¢˜çš„çœŸå®å‚æ•°ã€‚å¦‚æœæ•°æ®æœ‰å™ªå£°ï¼Œåˆ™é‡‡ç”¨ç¨³æ€å¡å°”æ›¼æ»¤æ³¢ï¼ˆåŸæ–‡ stable-stateï¼Œç°åœ¨ä¸€èˆ¬ç”¨ steady-stateï¼‰æ¥ä¼°è®¡ $P$ã€‚ç¨³æ€å¡å°”æ›¼æ»¤æ³¢å¯ä»¥è®¡ç®—å‡ºçº¿æ€§ä»£æ•°æ–¹ç¨‹ä¸­çš„å‚æ•°ï¼Œä½¿å¾—å‡æ–¹å·®æœ€å°ã€‚å‡è®¾ $X$ çŸ©é˜µçš„ç¬¬ $i$ è¡Œä¸º $x_i$ï¼Œ$Y$ çš„ç¬¬ $i$ ä¸ªå…ƒç´ ä¸º $y_i$ï¼Œé‚£ä¹ˆ $P$ å¯ä»¥é€šè¿‡ä¸‹é¢çš„å¼å­é€’å½’ä¼°è®¡ï¼ˆæ¶‰åŠå¡å°”æ›¼æ»¤æ³¢çš„çŸ¥è¯†ï¼Œè¿˜æ²¡çœ‹ï¼Œå‡è®¾å°±èƒ½ä¼°è®¡å‡ºæ¥äº†ï¼‰\\[\\begin{aligned}P_{i+1} &amp;= P_i + S_{i+1}\\cdot x_{i+1}\\cdot(y_{i+1}-x_{i+1}\\cdot P_i)\\\\S_{i+1} &amp;= S_i-\\frac{S_i\\cdot x_i+x_{i+1}\\cdot P_i}{1+x_{i+1}\\cdot S\\cdot x_{i+1}^T},\\quad i=0,1,\\cdots,m-1\\\\P &amp;= P_m\\end{aligned}\\]åˆå€¼ä¸º\\[\\begin{aligned}P_0 &amp;= 0\\\\S_0 &amp;= \\alpha\\cdot I\\quad(\\alpha=big\\ number)\\end{aligned}\\]æœ€åç»™å‡ºä¸€ä¸ªä¾‹å­ã€‚å‡è®¾ç³»ç»Ÿä¸ºåœ¨å°†æ¨¡å‹çš„å‰æå›ºå®šä¸ºåŸå§‹ç³»ç»Ÿçš„å‰æçš„æƒ…å†µä¸‹ï¼Œå°†å™ªå£°æ·»åŠ åˆ°æ•°æ®ä¸­ï¼Œå¯ä»¥ä»è¾“å…¥è¾“å‡ºæ•°æ®ä¸­è¯†åˆ«å‡ºåæœï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚ä¸‹å›¾å±•ç¤ºäº†åŒ…å«å™ªå£°çš„è¾“å…¥è¾“å‡ºæ•°æ®ï¼ŒåŸå§‹ç»“è®ºå’Œè¾¨è¯†å‡ºçš„ç»“è®ºã€‚1.3.2. å‰æå‚æ•°è¾¨è¯†åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬è¯´æ˜å¦‚ä½•ç¡®å®šå‰æä¸­çš„æ¨¡ç³Šé›†ï¼Œå³åœ¨å‰æå˜é‡å·²ç»é€‰å®šçš„æƒ…å†µä¸‹ï¼Œå¦‚ä½•å°†å‰æå˜é‡çš„ç©ºé—´åˆ’åˆ†ä¸ºæ¨¡ç³Šå­ç©ºé—´ï¼ˆåŒ…æ‹¬ç¡®å®šè§„åˆ™ä¸ªæ•°å’Œç¡®å®šæ¯ä¸ªè§„åˆ™ä¸­çš„æ¨¡ç³Šé›†/éš¶å±åº¦å‡½æ•°å‚æ•°ï¼‰ï¼Œä½†æ˜¯è§„åˆ™ä¸ªæ•°ä½œè€…åªæ˜¯ä¸€ç¬”å¸¦è¿‡ã€‚å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œæ ¹æ®å›¾ä¸­çš„è¾“å…¥è¾“å‡ºæ•°æ®æ¥åˆ’åˆ† $x$ çš„æ¨¡ç³Šå­ç©ºé—´ï¼Œæ¯”å¦‚ x is small æˆ–è€… x is bigã€‚å³å¯è®¾è®¡å¦‚ä¸‹ä¸¤ä¸ªè§„åˆ™\\[\\begin{aligned}IF\\ x\\ is\\ small\\ THEN\\ y=a_1x+b_1\\\\IF\\ x\\ is\\ big\\ THEN\\ y=a_2x+b_2\\\\\\end{aligned}\\]ç„¶åéœ€è¦ç¡®å®š small å’Œ big çš„éš¶å±åº¦å‡½æ•°ï¼Œä»¥åŠç»“è®ºä¸­çš„ $a_1,a_2,b_1,b_2$ã€‚é—®é¢˜è½¬å˜ä¸ºï¼Œæ‰¾å¯»éš¶å±åº¦å‡½æ•°çš„æœ€ä¼˜å‚æ•°ï¼Œä½¿å¾—æ€§èƒ½æŒ‡æ ‡æœ€ä¼˜ã€‚æ­¥éª¤å¦‚ä¸‹  å›ºå®šæ¨¡ç³Šé›†å‚æ•°ï¼Œé€šè¿‡ä¸Šä¸€èŠ‚çš„æ–¹æ³•å¾—åˆ°æœ€ä¼˜çš„ç»“è®ºå‚æ•°ä¼°è®¡ï¼›  æ‰¾å¯»éš¶å±åº¦å‡½æ•°çš„æœ€ä¼˜å‚æ•°ä½¿å¾—æ€§èƒ½æŒ‡æ ‡æœ€ä¼˜çš„é—®é¢˜å¯ç®€åŒ–ä¸ºä¸€ä¸ªéçº¿æ€§è§„åˆ’é—®é¢˜ã€‚ä½œè€…é‡‡ç”¨è‘—åçš„  complex method for the minimizationï¼ˆè‘—ååˆ°æˆ‘å±…ç„¶ä¸è®¤è¯†ï¼‰æ±‚è§£ã€‚ç”±äºä¼ ç»Ÿçš„ TS æ¨¡ç³Šç³»ç»Ÿçš„éš¶å±åº¦å‡½æ•°æ˜¯çº¿æ€§çš„ï¼Œå› æ­¤ç”¨ä¸¤ä¸ªå‚æ•°ï¼ˆåˆ†åˆ«å¯¹åº”å–å€¼ä¸º 0 å’Œ 1 çš„éš¶å±åº¦å€¼ï¼‰å°±èƒ½ç¡®å®šã€‚ä¾‹å­ï¼šä½¿ç”¨ä»å‡å®šç³»ç»Ÿä¸­æ”¶é›†çš„å¸¦æœ‰å™ªå£°çš„è¾“å…¥è¾“å‡ºæ•°æ®è¿›è¡Œçš„è¯†åˆ«ï¼Œå™ªå£°çš„æ ‡å‡†å·®æ˜¯è¾“å‡ºå€¼çš„ 5% ã€‚æ³¨æ„ï¼Œå¦‚æœä¸å­˜åœ¨å™ªéŸ³ï¼Œæˆ‘ä»¬å¯ä»¥è¯†åˆ«ä¸åŸå§‹ç³»ç»Ÿç›¸åŒçš„æ‰€æœ‰å‰æå‚æ•°ã€‚æŒ‡å‡ºè¿™ä¸ªäº‹å®éå¸¸é‡è¦ã€‚å¦‚æœä¸æ˜¯è¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬å°±ä¸èƒ½ä¸æ¨¡ç³Šç³»ç»Ÿæè¿°è¯­è¨€ä¸€èµ·ä¸»å¼ è¯†åˆ«ç®—æ³•çš„æœ‰æ•ˆæ€§ã€‚å‡è®¾åŸå§‹ç³»ç»Ÿæè¿°å¦‚ä¸‹ç»“è®ºå’Œå¸¦å™ªéŸ³çš„è¾“å…¥è¾“å‡ºæ•°æ®å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚æ‰€è¯†åˆ«çš„å‰æå‚æ•°å¦‚ä¸‹ã€‚æˆ‘ä»¬å¯ä»¥çœ‹åˆ°å·²ç»æ¨å¯¼å‡ºå‡ ä¹ç›¸åŒçš„å‚æ•°ã€‚1.3.3. å‰æå˜é‡çš„é€‰æ‹©ä¸Šä¸€èŠ‚å‡è®¾å‰æå˜é‡å·²ç»ç»™å®šã€‚ä½†æ˜¯å¦‚ä½•ç¡®å®šå‰æä¸­ç”¨åˆ°å“ªäº›å˜é‡ï¼Ÿå› ä¸ºç»™å®šçš„è¾“å…¥é‡ $x$ å¯ä»¥ä¸å…¨ç”¨åœ¨å‰æä¸­ã€‚æœ¬è´¨ä¸ŠåŒ…æ‹¬ä¸¤ä¸ªé—®é¢˜ï¼š  é€‰æ‹©å“ªäº›å˜é‡ï¼šé€‰æ‹©ä¸€ä¸ªå˜é‡æ„å‘³ç€å®ƒçš„ç©ºé—´è¦è¢«åˆ’åˆ†ï¼›  åˆ’åˆ†å‡ºå¤šå°‘å­ç©ºé—´ï¼›ä¸¤ä¸ªé—®é¢˜æ˜¯æœ‰ç»„åˆå…³ç³»çš„ï¼Œæ‰€ä»¥ä¸€èˆ¬è€Œè¨€æ²¡æœ‰ç†è®ºæ–¹æ³•è§£å†³ï¼ˆThe whole problem is a combinatorial one. So in general there seems no theoretical approach availableï¼‰ã€‚ä½œè€…æå‡ºä¸€ç§å¯å‘å¼æœç´¢æ–¹æ³•ï¼ŒåŒ…å«ä»¥ä¸‹æ­¥éª¤ï¼šå‡è®¾ä¸€ä¸ªåŒ…å« $k$ ä¸ªè¾“å…¥å’Œ 1 ä¸ªè¾“å‡ºçš„æ¨¡ç³Šç³»ç»Ÿã€‚      æ­¥éª¤ 1ï¼šåªåˆ’åˆ† $x_1$ ä¸º big å’Œ smallï¼Œå…¶å®ƒåˆ†é‡ä¸åˆ’åˆ†ï¼Œæ„å‘³ç€åªæœ‰ $x_1$ å‡ºç°åœ¨å‰æä¸­ï¼Œå…¶å®ƒåˆ†é‡ä¸å‡ºç°ã€‚é‚£ä¹ˆæ¨¡å‹è§„åˆ™å¦‚ä¸‹\\[\\begin{aligned}  IF\\ x_1\\ is\\ big_1\\ THEN\\ \\cdots\\\\  IF\\ x_1\\ is\\ small_1\\ THEN\\ \\cdots\\\\\\end{aligned}\\]    ç§°ä¸Šè¿°æ¨¡å‹ä¸º æ¨¡å‹ 1-1ï¼Œç±»ä¼¼çš„ï¼Œåªåˆ’åˆ†ç¬¬ $i$ ä¸ªåˆ†é‡çš„æƒ…å†µç§°ä¸º æ¨¡å‹ 1-$i$ã€‚è¿™æ ·å¯ä»¥å¾—åˆ° $k$ ä¸ªæ¨¡å‹ï¼Œæ¯ä¸ªæ¨¡å‹åŒ…å«ä¸¤ä¸ªæ¨¡ç³Šè•´å«æ¡ä»¶ï¼ˆè§„åˆ™ï¼‰ã€‚    æ­¥éª¤ 2ï¼šå¯¹ä¸Šè¿°æ¯ä¸€ä¸ªæ¨¡å‹ï¼Œç”¨å‰é¢æ‰€è¿°çš„æ–¹æ³•ç¡®å®šæœ€ä¼˜çš„å‰æå‚æ•°å’Œç»“è®ºå‚æ•°ã€‚æŒ‘å‡ºå…¶ä¸­æ€§èƒ½æŒ‡æ ‡æœ€ä½çš„æ¨¡å‹ï¼Œä½œä¸ºç¨³å®šçŠ¶æ€ï¼ˆstable stateï¼‰ã€‚  æ­¥éª¤ 3ï¼šä»å‰é¢çš„ç¨³å®šçŠ¶æ€å‡ºå‘ï¼Œæ¯”å¦‚ æ¨¡å‹ 1-$i$ï¼Œå¯¹æ‰€æœ‰åˆ†é‡ $x_i - x_j$ è¿›è¡Œæ’åˆ—ç»„åˆï¼Œæ¯ä¸ªåˆ†é‡åˆ’åˆ†ä¸º 2 ä¸ªæ¨¡ç³Šå­ç©ºé—´ã€‚ç‰¹åˆ«åœ°ï¼Œ$x_i - x_i$ ç»„åˆå°† $x_i$ åˆ’åˆ†ä¸º 4 ä¸ªæ¨¡ç³Šå­ç©ºé—´ï¼Œæ¯”å¦‚ small, medium small, medium big, bigã€‚è¿™æ ·åˆå¾—åˆ° $k$ ä¸ªæ¨¡å‹ï¼Œç§°ä¸º æ¨¡å‹ 2-jã€‚å†æ¬¡æŒ‘å‡ºå…¶ä¸­æ€§èƒ½æŒ‡æ ‡æœ€å°çš„ä¸€ä¸ªæ¨¡å‹ã€‚  æ­¥éª¤ 4ï¼šé‡å¤æ­¥éª¤ 3ï¼Œå¾€é‡Œå†æ¬¡æ·»åŠ ä¸€ä¸ªå…¶å®ƒåˆ†é‡ã€‚å½“æ»¡è¶³ä¸‹åˆ—ä»»ä¸€æ¡ä»¶æ—¶æœç´¢åœæ­¢ï¼š          æ€§èƒ½æŒ‡æ ‡å°äºé¢„è®¾å€¼ï¼›      æ¨¡ç³Šè•´å«æ¡ä»¶çš„ä¸ªæ•°å¤§äºé¢„è®¾å€¼ï¼›      æ•´ä¸ªè¿‡ç¨‹å¦‚å›¾æ‰€ç¤º1.4. å¹¿ä¹‰ TS æ¨¡ç³Šç³»ç»Ÿå°† TS æ¨¡ç³Šç³»ç»Ÿè¿›è¡Œè§„èŒƒåŒ–æè¿°å¦‚ä¸‹ã€‚ç»™å®š $m$ ä¸ªè¾“å…¥å‘é‡ $x_1,\\cdots,x_m$ï¼Œ$n$ æ¡æ¨¡ç³Šè§„åˆ™ä¸º $R_1,\\cdots,R_n$ï¼Œç¬¬ $i$ æ¡æ¨¡ç³Šè§„åˆ™çš„æ¨¡ç³Šå­é›†åˆ†åˆ«ä¸º $A^i_1,\\cdots,A^i_m$ï¼ˆç›¸åº”çš„éš¶å±åº¦å‡½æ•°ä¸º $A^i_j(x_j)$ï¼‰ï¼Œå„ä¸ªæ¨¡ç³Šè§„åˆ™çš„çœŸå€¼ä¸º $G_1, \\cdots, G_n$ï¼Œå„ä¸ªæ¨¡ç³Šè§„åˆ™å¯¹åº”çš„ç»“è®ºä¸º $y_1,\\cdots,y_n$ï¼Œæœ€ç»ˆè¾“å‡ºä¸º $y$ï¼Œé‚£ä¹ˆé‡‡ç”¨åŠ æƒå¹³å‡æ³•çš„ TS æ¨¡ç³Šç³»ç»Ÿä¸º\\[\\begin{aligned}y &amp;= \\frac{\\sum_{i=1}^n G_iy_i}{\\sum_{i=1}^n G_i}\\\\G_i &amp;= \\prod_{j=1}^m A^i_j(x_j)\\end{aligned}\\]å…¶ä¸­ $\\prod$ ä¸ºæ¨¡ç³ŠåŒ–ç®—å­ï¼Œé€šå¸¸é‡‡å–å–å° â€œ$\\land$â€ æˆ–è€… ä»£æ•°ç§¯ â€œ$\\cdot$â€ è®¡ç®—ã€‚è‹¥éš¶å±åº¦å‡½æ•°é‡‡ç”¨é«˜æ–¯éš¶å±åº¦å‡½æ•°å½¢å¼ï¼Œåˆ™å¯å¾—åˆ°å…·æœ‰ $m$ è¾“å…¥å•è¾“å‡ºã€æ¨¡ç³Šè§„åˆ™æ•°ä¸º $n$ çš„å¹¿ä¹‰ TS æ¨¡ç³Šç³»ç»Ÿï¼ˆæœªèƒ½æ‰¾åˆ°å‡ºå¤„ï¼‰\\[\\begin{aligned}y &amp;= \\frac{\\sum_{i=1}^n G_iy_i}{\\sum_{i=1}^n G_i}\\\\G_i &amp;= \\prod_{j=1}^m A^i_j(x_j) = \\prod_{j=1}^m exp{(-\\left\\vert\\frac{x_j - b_j^i}{a_j^i}\\right\\vert)}\\end{aligned}\\]å¹¿ä¹‰ TS æ¨¡ç³Šç³»ç»Ÿå¯ä»¥ä»¥ä»»æ„ç²¾åº¦é€¼è¿‘è¢«æ§å¯¹è±¡ï¼Œè€Œæ¨¡å‹çš„å‚æ•°å¯ä»¥é€šè¿‡å‚æ•°è¾¨è¯†æ–¹æ³•è·å¾—ã€‚3. å‚è€ƒæ–‡çŒ®æ— ã€‚"
  },
  
  {
    "title": "æ·±åº¦å­¦ä¹ æ–‡ç« é˜…è¯»ï¼ˆlearn2learnï¼‰",
    "url": "/posts/deep-learning-learn-2-learn/",
    "categories": "Academic, Paper",
    "tags": "deep learning",
    "date": "2020-11-30 16:46:19 +0800",
    





    
    "snippet": "æœ¬æ–‡ä»‹ç»äº†ç”¨æ¢¯åº¦ä¸‹é™çš„æ–¹æ³•å­¦ä¼šäº†æ¢¯åº¦ä¸‹é™çš„å­¦ä¹ æ–¹æ³•ï¼Œç”¨ LSTM ä»£æ›¿ä¼ ç»Ÿäººè®¾è®¡çš„è¯¸å¦‚RMSpropã€ADAM ç­‰ä¼˜åŒ–æ–¹æ³•å»å­¦ä¹ å‡ºä¸€ä¸ªé’ˆå¯¹ç‰¹å®šä»»åŠ¡çš„ä¼˜åŒ–å™¨ã€‚  1. ç®€ä»‹          1.1. è¿ç§»å­¦ä¹ å’Œæ³›åŒ–      1.2. ç›¸å…³å·¥ä½œ        2. é‡‡ç”¨ RNN å®ç°å­¦ä¼šå­¦ä¹           2.1. é—®é¢˜æ¡†æ¶      2.2. coordinatewise LSTM ä¼˜...",
    "content": "æœ¬æ–‡ä»‹ç»äº†ç”¨æ¢¯åº¦ä¸‹é™çš„æ–¹æ³•å­¦ä¼šäº†æ¢¯åº¦ä¸‹é™çš„å­¦ä¹ æ–¹æ³•ï¼Œç”¨ LSTM ä»£æ›¿ä¼ ç»Ÿäººè®¾è®¡çš„è¯¸å¦‚RMSpropã€ADAM ç­‰ä¼˜åŒ–æ–¹æ³•å»å­¦ä¹ å‡ºä¸€ä¸ªé’ˆå¯¹ç‰¹å®šä»»åŠ¡çš„ä¼˜åŒ–å™¨ã€‚  1. ç®€ä»‹          1.1. è¿ç§»å­¦ä¹ å’Œæ³›åŒ–      1.2. ç›¸å…³å·¥ä½œ        2. é‡‡ç”¨ RNN å®ç°å­¦ä¼šå­¦ä¹           2.1. é—®é¢˜æ¡†æ¶      2.2. coordinatewise LSTM ä¼˜åŒ–å™¨      2.3. é¢„å¤„ç†ä¸åå¤„ç†        3. å®éªŒ          3.1. 10 ç»´å‡½æ•°      3.2. MNISTï¼ˆMLPï¼‰      3.3. CIFARï¼ˆCNNï¼‰      3.4. Neural Art        4. å‚è€ƒæ–‡çŒ®1. ç®€ä»‹  Marcin Andrychowicz1, Misha Denil1, Sergio GÃ³mez Colmenarejo, Nando de Freitas, et al. Learning to learn by gradient descent by gradient descent[J]. NIPS 2016.  Learning to learn is a very exciting topic for a host of reasons, not least of which is the fact that we know that the type of backpropagation currently done in neural networks is implausible as an mechanism that the brain is actually likely to use: there is no Adam optimizer nor automatic differentiation in the brain! Something else has to be doing the optimization of our brainâ€™s neural network, and most likely that something else is itself a neural network!ç›®å‰æ·±åº¦å­¦ä¹ çš„æƒ…å†µåªæ˜¯è¾“å…¥è¾“å‡ºè¿‡ç¨‹æ˜¯ç¥ç»ç½‘ç»œï¼Œä½†è°ƒæ§ç¥ç»ç½‘ç»œçš„æ˜¯äººå·¥è®¾è®¡ï¼æˆ–è€…è¯´è¿™ä¸ªå­¦ä¹ æœºåˆ¶æ˜¯äººå·¥ç»™å®šçš„ã€‚æœ¬æ–‡è§£å†³çš„æ˜¯ä¼˜åŒ–ç®—æ³•çš„å­¦ä¹ é—®é¢˜ã€‚å…·ä½“æ¥è¯´ï¼Œå‡è®¾ç›®æ ‡å‡½æ•°ä¸º $f(\\theta)$ï¼Œæœºå™¨å­¦ä¹ ä¸­æˆ‘ä»¬ç»å¸¸å¯ä»¥æŠŠä¼˜åŒ–ç›®æ ‡è¡¨ç¤ºæˆ\\[\\theta^*=argmin_{\\theta\\in \\Theta}f(\\theta)\\]å¯¹äºè¿ç»­çš„ç›®æ ‡å‡½æ•°ï¼Œæ ‡å‡†çš„æ¢¯åº¦ä¸‹é™åºåˆ—å¼å¦‚ä¸‹\\[\\theta_{t+1} - \\theta_t - \\alpha \\nabla f(\\theta_t)\\]ä¼˜åŒ–æ–¹é¢çš„è®¸å¤šç°ä»£å·¥ä½œéƒ½åŸºäºè®¾è®¡é’ˆå¯¹ç‰¹å®šé—®é¢˜ç±»åˆ«çš„æ›´æ–°è§„åˆ™ï¼Œä¸åŒç ”ç©¶ç¤¾åŒºä¹‹é—´å…³æ³¨çš„é—®é¢˜ç±»å‹ä¸åŒã€‚æ¯”å¦‚åœ¨æ·±åº¦å­¦ä¹ é¢†åŸŸï¼Œå¤§é‡ç ”ç©¶ä¸“é—¨é’ˆå¯¹é«˜ç»´ï¼Œéå‡¸ä¼˜åŒ–é—®é¢˜çš„ä¼˜åŒ–æ–¹æ³•ï¼Œè¿™äº›ä¿ƒä½¿äº†momentum [Nesterov, 1983, Tseng, 1998], Rprop [Riedmiller and Braun, 1993], Adagrad [Duchi et al., 2011], RMSprop [Tieleman and Hinton, 2012], å’Œ ADAM [Kingma and Ba, 2015] ç­‰ä¼˜åŒ–æ–¹æ³•çš„ç ”ç©¶ã€‚ä¸Šè¿°ç ”ç©¶æ›´å¤šçš„å…³æ³¨å„è‡ªé—®é¢˜ç»“æ„æœ¬èº«ï¼Œä½†å¾€å¾€å­˜åœ¨æ½œåœ¨çš„è¾ƒå·®æ³›åŒ–æ€§èƒ½ä¸ºä»£ä»·ã€‚æ ¹æ® No Free Lunch Theorems for Optimization [Wolpert and Macready, 1997] ï¼ˆå¤©ä¸‹æ²¡æœ‰å…è´¹çš„åˆé¤ï¼‰ç†è®ºï¼Œç»„åˆä¼˜åŒ–è®¾ç½®ä¸‹ï¼Œæ²¡æœ‰ä¸€ä¸ªç®—æ³•å¯ä»¥ç»å¯¹å¥½è¿‡ä¸€ä¸ªéšæœºç­–ç•¥ã€‚å› æ­¤ï¼Œå°†ç ”ç©¶å±€é™äºç‰¹å®šå­é—®é¢˜çš„æ–¹å¼æ˜¯ å”¯ä¸€ èƒ½æé«˜æ€§èƒ½çš„ç ”ç©¶æ‰‹æ®µã€‚æœ¬æ–‡å¦è¾Ÿè¹Šå¾„ï¼Œæå‡ºäº†ä¸€ç§ã€åŸºäºå­¦ä¹ çš„æ›´æ–°ç­–ç•¥ã€‘ä»£æ›¿ã€äººå·¥è®¾è®¡çš„æ›´æ–°ç­–ç•¥ã€‘ï¼ˆç”¨ä¸€ä¸ªå¯å­¦ä¹ çš„æ¢¯åº¦æ›´æ–°è§„åˆ™ï¼Œæ›¿ä»£æ‰‹å·¥è®¾è®¡çš„æ¢¯åº¦æ›´æ–°è§„åˆ™ï¼‰ï¼Œç§°ä¹‹ä¸ºï¼ˆä¼˜åŒ–ï¼‰ä¼˜åŒ–å™¨ï¼ˆoptimizerï¼‰ $g$ï¼Œç”±å…¶å‚æ•° $\\phi$ å®šä¹‰ã€‚  ï¼ˆä¼˜åŒ–ï¼‰ä¼˜åŒ–å™¨ optimizerï¼š$g$ï¼Œå‚æ•°ä¸º $\\phi$  ï¼ˆåŸå§‹ï¼‰ä¼˜åŒ–å™¨ optimizeeï¼šå‚æ•°ä¸º $\\theta$å› æ­¤åŸå§‹ä¼˜åŒ–å™¨ï¼ˆoptimizeeï¼‰çš„å‚æ•°ä¼˜åŒ–åºåˆ—å¼å½¢å¼ä¸º\\[\\theta_{t+1} - \\theta_t + g_t ( \\nabla f(\\theta_t),\\phi)\\]ä¹Ÿå³ç”¨ä¸€ä¸ª optimizer æ¥ç›´æ¥ç»™å‡º optimizee çš„å‚æ•°æ›´æ–°æ–¹å¼ï¼ˆå¤§å°å’Œæ–¹å‘ï¼‰ã€‚$g$ çš„å–å€¼ä¸ç›®æ ‡å‡½æ•° $f$ çš„æ¢¯åº¦ $\\nabla f$ ä»¥åŠè‡ªèº«å‚æ•° $\\phi$ã€‚æ–‡ä¸­çš„ optimizer é‡‡ç”¨ RNN å®ç°ï¼Œå…·ä½“è€Œè¨€é‡‡ç”¨ LSTM å®ç°ã€‚  RNN å­˜åœ¨ä¸€ä¸ªå¯ä»¥ä¿å­˜å†å²ä¿¡æ¯çš„éšçŠ¶æ€ï¼ŒLSTM å¯ä»¥ä»ä¸€ä¸ªå†å²çš„å…¨å±€å»é€‚åº”è¿™ä¸ªç‰¹å®šçš„ä¼˜åŒ–è¿‡ç¨‹ï¼ŒLSTM çš„å‚æ•°å¯¹æ¯ä¸ªæ—¶åˆ»èŠ‚ç‚¹éƒ½ä¿æŒ â€œèªæ˜â€ï¼Œæ˜¯ä¸€ç§ â€œå…¨å±€æ€§çš„èªæ˜â€ï¼Œé€‚åº”æ¯åˆ†æ¯ç§’ã€‚1.1. è¿ç§»å­¦ä¹ å’Œæ³›åŒ–ã€å¼ºçƒˆæ€€ç–‘æœ¬èŠ‚æ˜¯å®¡ç¨¿äººè¦æ±‚åŠ çš„ã€‘è¿™é¡¹å·¥ä½œçš„ç›®çš„æ˜¯å¼€å‘ä¸€ç§æ„å»ºå­¦ä¹ ç®—æ³•çš„ç¨‹åºï¼Œè¯¥ç®—æ³•åœ¨ç‰¹å®šç±»åˆ«çš„ä¼˜åŒ–é—®é¢˜ä¸Šè¡¨ç°è‰¯å¥½ã€‚é€šè¿‡å°†ç®—æ³•è®¾è®¡æ¼”åŒ–ä¸ºå­¦ä¹ é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ç¤ºä¾‹é—®é¢˜å®ä¾‹æ¥æŒ‡å®šæˆ‘ä»¬æ„Ÿå…´è¶£çš„é—®é¢˜ç±»åˆ«ã€‚è¿™ä¸é€šå¸¸çš„æ–¹æ³•ä¸åŒï¼Œåè€…é€šå¸¸é€šè¿‡åˆ†ææ¥è¡¨å¾æœ‰è¶£é—®é¢˜çš„ç‰¹æ€§ï¼Œå¹¶åˆ©ç”¨è¿™äº›åˆ†æè§è§£æ¥æ‰‹åŠ¨è®¾è®¡å­¦ä¹ ç®—æ³•ã€‚ã€ä¸ªäººç†è§£ï¼Œé€šè¿‡æ•°æ®é©±åŠ¨æ¥å­¦ä¹ è®¾è®¡ä¼˜åŒ–ç®—æ³•ï¼Œè€Œä¸æ˜¯é€šè¿‡äººå·¥åˆ†æé—®é¢˜æ¥è®¾è®¡ä¼˜åŒ–ç®—æ³•ã€‘åœ¨æ™®é€šçš„ç»Ÿè®¡å­¦ä¹ ä¸­ï¼Œæ³›åŒ– åæ˜ äº†ç›®æ ‡å‡½æ•°åœ¨æœªçŸ¥ç‚¹å¤„çš„è¡Œä¸ºè¿›è¡Œé¢„æµ‹çš„èƒ½åŠ›ã€‚ è€Œåœ¨æœ¬æ–‡ä¸­ï¼Œä»»åŠ¡æœ¬èº«å°±æ˜¯é—®é¢˜å®ä¾‹ï¼Œè¿™æ„å‘³ç€æ³›åŒ–è¡¡é‡äº†åœ¨ä¸åŒé—®é¢˜ä¹‹é—´ä¼ é€’çŸ¥è¯†çš„èƒ½åŠ›ã€‚é—®é¢˜ç»“æ„çš„è¿™ç§é‡ç”¨é€šå¸¸è¢«ç§°ä¸ºè¿ç§»å­¦ä¹ ï¼Œå¹¶ä¸”é€šå¸¸è¢«è§†ä¸ºç‹¬ç«‹çš„ä¸»é¢˜ã€‚ä½†æ˜¯ä»å…ƒå­¦ä¹ çš„è§‚ç‚¹å‡ºå‘ï¼Œæˆ‘ä»¬å¯ä»¥è®¤ä¸ºè¿ç§»å­¦ä¹ æ˜¯ä¸€ç§æ³›åŒ–ï¼Œåè€…åœ¨æœºå™¨å­¦ä¹ é¢†åŸŸä¸­å·²æœ‰å¹¿æ³›çš„ç ”ç©¶ã€‚æ·±åº¦å­¦ä¹ çš„æˆåŠŸä¹‹å¤„å°±åœ¨äºï¼Œæˆ‘ä»¬å¯ä»¥ä¾èµ–æ·±åº¦ç½‘ç»œçš„æ³›åŒ–èƒ½åŠ›ï¼Œé€šè¿‡å­¦ä¹ æ„Ÿå…´è¶£çš„å­ç»“æ„å»é€‚åº”æ–°æ ·æœ¬ã€‚æœ¬æ–‡æ—¨åœ¨åˆ©ç”¨è¿™ç§æ³›åŒ–èƒ½åŠ›ï¼Œè¿˜å°†å…¶ä»ç®€å•çš„ç›‘ç£å­¦ä¹ æå‡åˆ°æ›´å¹¿æ³›çš„ä¼˜åŒ–è®¾ç½®ã€‚  This is in contrast to the ordinary approach of characterizing properties of interesting problems analytically and using these analytical insights to design learning algorithms by hand.  The meaning of generalization in this framework is      the ability to transfer knowledge between different problems    the way that learning some cmmon structures in different problems    the capability applied to more general optimization problem.  åœ¨æœ¬æ–‡çš„æ¡†æ¶ä¸­ï¼Œæ³›åŒ–çš„å«ä¹‰æ˜¯  åœ¨ä¸åŒé—®é¢˜ä¹‹é—´ä¼ é€’çŸ¥è¯†çš„èƒ½åŠ›  å­¦ä¹ ä¸åŒé—®é¢˜ä¸­æŸäº›é€šç”¨ç»“æ„çš„æ–¹å¼  è¯¥èƒ½åŠ›é€‚ç”¨äºæ›´ä¸€èˆ¬çš„ä¼˜åŒ–é—®é¢˜1.2. ç›¸å…³å·¥ä½œç•¥ã€‚2. é‡‡ç”¨ RNN å®ç°å­¦ä¼šå­¦ä¹ 2.1. é—®é¢˜æ¡†æ¶å‡è®¾æœ€ç»ˆçš„ optimizee çš„å‚æ•°ä¸º $\\theta^*(f,\\phi)$ï¼Œå³å…¶ä¸ optimizer å‚æ•° $\\phi$ å’Œä½ç½®çš„ç›®æ ‡å‡½æ•° $f$ æœ‰å…³ã€‚æå‡ºä»¥ä¸‹é—®é¢˜ï¼šä»€ä¹ˆæ ·çš„ optimizer ç®—æ˜¯ â€œå¥½â€ çš„optimizerå‘¢ï¼Ÿå½“ç„¶æ˜¯è®© optimizee çš„ loss å€¼è¶Šæœ€å°çš„ optimizer æœ€å¥½ã€‚æ‰€ä»¥optimizer çš„ loss å€¼åº”è¯¥æ˜¯åŸºäº optimizee çš„ loss å€¼çš„ã€‚å†æ¬¡å›é¡¾æˆ‘ä»¬æœ€ç»ˆçš„ç›®æ ‡\\[\\theta^*=argmin_{\\theta\\in \\Theta}f(\\theta)\\]ç»™å®šä¸€ä¸ªç›®æ ‡å‡½æ•° $f$ çš„åˆ†å¸ƒï¼Œé‚£ä¹ˆ optimizer çš„æŸå¤±å®šä¹‰ä¸º\\[\\mathcal L(\\phi) = \\mathbb E_f[f(\\theta^*)]\\]è¿™é‡Œè¯¦ç»†è§£è¯»ä¸€ä¸‹ï¼Œå¯¹äºæŸä¸ªå…·ä½“çš„ä»»åŠ¡  ç›®æ ‡å‡½æ•° $f$ ï¼ˆä¸ªäººç†è§£å°±æ˜¯ lossï¼‰  æœ€ç»ˆä¼˜åŒ–åçš„ optimizee çš„å‚æ•°ä¸º $\\theta^$ã€‚å†™æˆ $\\theta^(f,\\phi)$ï¼Œä¸ $f$ æœ‰å…³å› ä¸ºä¸åŒçš„ $f$ ä¼šå¯¼è‡´ä¸åŒçš„æœ€ä¼˜å‚æ•°ï¼›ä¸ $\\phi$ æœ‰å…³å› ä¸ºæœ€ä¼˜çš„å‚æ•°æ˜¯ä¾èµ– optimizer ç»™å‡ºçš„ï¼Œè€Œ optimizer çš„å‚æ•°ä¸º $\\phi$  æœ€ç»ˆçš„æŸå¤±ä¸º $f(\\theta^*)$  å› æ­¤ optimizer çš„æŸå¤±å°±æ˜¯ä¸Šè¿°æœ€ç»ˆæŸå¤±çš„æœŸæœ› $\\mathbb E_f[f(\\theta^*)]$ï¼Œä¸ºå•¥æ±‚æœŸæœ›ï¼Ÿä¸Šå¼å³ä¸ºä¼˜åŒ–æœ€ç»ˆçš„ optimizee çš„æŸå¤±ï¼ˆoptimizing for the best final result with our optimizee.ï¼‰ã€‚æ³¨æ„ï¼Œæœ€ç»ˆæœ€ä¼˜çš„å‚æ•° $\\theta^*$ æˆ‘ä»¬è¿˜å¹¶ä¸çŸ¥é“ï¼Œå®ƒæ˜¯é€šè¿‡ä¸€ä¸ªä¼˜åŒ–è¿‡ç¨‹å¾—åˆ°çš„ã€‚å› æ­¤è™½ç„¶è¿™æ ·è®¾è®¡åˆç†ï¼Œä½†æ˜¯ç»™è®­ç»ƒé€ æˆäº†å¾ˆå¤§éº»çƒ¦ï¼ˆThis seems reasonable, but it makes it much harder to trainï¼‰ã€‚å‡è®¾ç»è¿‡ $T$ æ¬¡ä¼˜åŒ–æ­¥éª¤ï¼Œæ›´åŠ æ–¹ä¾¿çš„åšæ³•æ˜¯å°† optimizer çš„æŸå¤±å®šä¹‰ä¸ºæ•´ä¸ªä¼˜åŒ–è¿‡ç¨‹çš„æŸå¤±çš„åŠ æƒå’Œ\\[\\mathcal L(\\phi) = \\mathbb E_f\\left[ \\sum_{t=1}^T\\omega_tf(\\theta_t) \\right]\\]å…¶ä¸­\\[\\theta_{t+1} = \\theta_t+g_t\\]\\[[ g_t,h_{t+1} ] = {\\rm lstm}(\\nabla_t,h_t,\\phi)\\]$\\omega_t \\in \\mathbb R_{\\geq0}$ æ˜¯å„ä¸ªä¼˜åŒ–æ—¶åˆ»çš„ä»»æ„æƒé‡ï¼Œ$\\nabla_t = \\nabla_\\theta f(\\theta_t)$ã€‚å½“ $t=T$ ä¸”åªæœ‰è¯¥æ—¶åˆ»çš„ $\\omega_t = 1$ æ—¶\\[\\mathcal L(\\phi) = \\mathbb E_f[f(\\theta^*(f,\\phi))] = \\mathbb E_f\\left[ \\sum_{t=1}^T\\omega_tf(\\theta_t) \\right]\\]å¯¹ä¸Šé¢çš„è¿‡ç¨‹è¿›è¡Œè¯¦ç»†è§£è¯»ï¼š  Meta-optimizer ä¼˜åŒ–å™¨ï¼šç›®æ ‡å‡½æ•°æ•´ä¸ªä¼˜åŒ–å‘¨æœŸçš„ loss éƒ½è¦å¾ˆå°ï¼ˆåŠ æƒå’Œï¼‰  ä¼ ç»Ÿä¼˜åŒ–å™¨ï¼šå¯¹äºå½“å‰çš„ç›®æ ‡å‡½æ•°ï¼Œåªè¦è¿™ä¸€æ­¥çš„ loss æ¯”ä¸Šä¸€æ­¥çš„ loss å€¼è¦å°å°±è¡Œå¯ä»¥ç”¨ GD æ¥æœ€å°åŒ– $\\mathcal L(\\phi)$ï¼Œæ¢¯åº¦ä¼°è®¡ $\\partial \\mathcal L(\\phi)/\\partial\\phi$ å¯ä»¥é€šè¿‡é‡‡æ ·éšæœºçš„ $f$ ç„¶åå¯¹è®¡ç®—å›¾è¿›è¡Œåå‘ä¼ æ’­æ¥æ±‚è§£ã€‚æˆ‘ä»¬å…è®¸æ¢¯åº¦æ²¿ç€å®çº¿åä¼ ï¼Œä½†æ˜¯ä¸¢å¼ƒäº†æ²¿ç€è™šçº¿çš„è·¯å¾„ã€‚è¿™ç§è€ƒè™‘ç›¸å½“äºå‡è®¾ $\\partial \\nabla_t/\\partial \\phi = 0$ï¼Œè¿™æ ·å¯ä»¥é¿å…è®¡ç®— $f$ çš„äºŒé˜¶å¯¼ã€‚  ã€ä¸ªäººç†è§£ã€‘ï¼šä»è®¡ç®—å›¾ä¸Šæ±‚$\\partial \\mathcal L(\\phi)/\\partial\\phi$ï¼Œéœ€è¦æ²¿ç€ç®­å¤´æ–¹å‘åå‘æµåŠ¨ï¼Œå¦‚æœè€ƒè™‘è™šçº¿ï¼Œé‚£ä¹ˆå°±åŒ…æ‹¬å¦‚ä¸‹å›¾æ‰€ç¤ºçš„è·¯å¾„ï¼Œè¿™éœ€è¦æ±‚ $\\partial \\nabla_t/\\partial \\theta \\cdot \\partial \\theta / \\partial \\phi$ï¼Œå…¶ä¸­ $\\theta$ å¯¹ $\\phi$ åŒ…å«ä¸‰éƒ¨åˆ†ï¼Œä¸€éƒ¨åˆ†æ˜¯ lstm å†…ç›´æ¥ç›¸å…³çš„ $\\partial \\theta / \\partial \\phi$ï¼Œå¦ä¸€éƒ¨åˆ†æ˜¯é€šè¿‡éšå±‚å›ä¼ çš„ $\\partial \\theta / \\partial h_t$ã€‚ç¬¬ä¸‰ä¸€éƒ¨åˆ†æ˜¯éšç€ $\\nabla_tf$ å¾€å‰å›ä¼ çš„ï¼ˆ$\\partial \\nabla_t/\\partial \\phi = \\partial \\nabla_t / \\partial \\theta \\cdot \\partial \\theta / \\partial \\phi$ï¼‰ï¼Œè¿™ä¸€éƒ¨åˆ†ä¸­åŒ…å« $f$ çš„äºŒé˜¶å¯¼ï¼ˆ$\\partial \\nabla_t / \\partial \\theta$ï¼‰ï¼Œä¸ºäº†è®¡ç®—ç®€ä¾¿ï¼Œä½œè€…å‡è®¾è¯¥é¡¹ç­‰äº 0ï¼Œä¹Ÿå³å¿½ç•¥äº†ä¸‹å›¾ä¸­æ¢¯åº¦å›ä¼ çš„è™šçº¿ï¼ˆçº¢çº¿ï¼‰è·¯å¾„ã€‚  ä»ä¸Šé¢ LSTM ä¼˜åŒ–å™¨çš„è®¾è®¡æ¥çœ‹ï¼Œæˆ‘ä»¬å‡ ä¹æ²¡æœ‰åŠ å…¥ä»»ä½•å…ˆéªŒçš„äººä¸ºç»éªŒåœ¨é‡Œé¢ï¼Œåªæ˜¯ç”¨äº†é•¿çŸ­æœŸè®°å¿†ç¥ç»ç½‘ç»œçš„æ¶æ„ï¼Œä¼˜åŒ–å™¨æœ¬èº«çš„å‚æ•° $\\phi$ å³ LSTM çš„å‚æ•°ï¼Œè¿™ä¸ªä¼˜åŒ–å™¨çš„å‚æ•°ä»£è¡¨äº†æˆ‘ä»¬çš„æ›´æ–°ç­–ç•¥ï¼Œåé¢æˆ‘ä»¬ä¼šå­¦ä¹ è¿™ä¸ªå‚æ•°ï¼Œå³å­¦ä¹ ç”¨ä»€ä¹ˆæ ·çš„æ›´æ–°ç­–ç•¥ã€‚2.2. coordinatewise LSTM ä¼˜åŒ–å™¨  One challenge in applying RNNs in our setting is that we want to be able to optimize at least tens of thousands of parameters. Optimizing at this scale with a fully connected RNN is not feasible as it would require a huge hidden state and an enormous number of parameters. To avoid this difficulty we will use an optimizer m which operates coordinatewise on the parameters of the objective function, similar to other common update rules like RMSprop and ADAM. This coordinatewise network architecture allows us to use a very small network that only looks at a single coordinate to define the optimizer and share optimizer parameters across different parameters of the optimizee.é‡‡ç”¨ RNNï¼ˆLSTMï¼‰ çš„ä¸€å¤§æŒ‘æˆ˜å°±æ˜¯ï¼Œæˆ‘ä»¬æƒ³è¦ä¼˜åŒ–æˆåƒä¸Šä¸‡çš„å‚æ•°ã€‚é‡‡ç”¨å…¨è¿æ¥ RNN éœ€è¦å·¨å¤§çš„éšå±‚ $h_t$ï¼ˆå‡è®¾è¾“å…¥å‘é‡ $\\theta$ ç»´åº¦ä¸º $M$ï¼Œåˆ™ $h_t \\in \\mathbb R^M$ï¼‰å’Œå·¨é‡çš„å‚æ•°ï¼ˆå‡è®¾éšå±‚ç»´åº¦ä¸º $D$ï¼Œåˆ™å‚æ•° $W_f, W_i, W_o, W_c\\in \\mathbb R^{D\\times (D+M)}$ï¼‰ï¼Œè¿™æ˜¯ä¸ç°å®çš„ã€‚ä¸ºäº†å…‹æœè¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬åªè®¾è®¡ä¸€ä¸ªä¼˜åŒ–å™¨ $m$ å¯¹ç›®æ ‡å‡½æ•°çš„æ¯ä¸ªå‚æ•°åˆ†é‡è¿›è¡Œæ“ä½œã€‚å…·ä½“è€Œè¨€ï¼Œæ¯æ¬¡åªå¯¹ optimizee çš„ ä¸€ä¸ªå‚æ•°åˆ†é‡ $\\theta_i$ è¿›è¡Œä¼˜åŒ–ï¼Œè¿™æ ·åªéœ€è¦ç»´æŒä¸€ä¸ªå¾ˆå°çš„ optimizerï¼ˆlstmï¼‰å°±å¯ä»¥å®Œæˆå·¥ä½œäº†ã€‚å¯¹äºæ¯ä¸ªå‚æ•°åˆ†é‡ $\\theta_i$ è€Œè¨€ï¼Œoptimizerï¼ˆlstmï¼‰çš„å‚æ•° $\\phi$ æ˜¯å…±äº«çš„ï¼Œä½†æ˜¯éšå±‚çŠ¶æ€ $h_i$ æ˜¯ä¸å…±äº«çš„ã€‚ç”±äºæ¯ä¸ªç»´åº¦ä¸Šçš„ optimizerï¼ˆlstmï¼‰è¾“å…¥çš„ $h_i$ å’Œ $\\nabla f(\\theta_i)$ æ˜¯ä¸åŒçš„ï¼Œæ‰€ä»¥å³ä½¿å®ƒä»¬çš„ $\\phi$ ç›¸åŒï¼Œä½†æ˜¯å®ƒä»¬çš„è¾“å‡ºå´æ˜¯ä¸ä¸€æ ·çš„ã€‚æ¢å¥è¯è¯´ï¼Œè¿™æ ·è®¾è®¡çš„ lstm å˜ç›¸å®ç°äº†ä¼˜åŒ–ä¸ç»´åº¦ï¼ˆé¡ºåºï¼‰æ— å…³ã€‚è¿™ä¸ä¼ ç»Ÿçš„ RMSprop å’Œ ADAM çš„ä¼˜åŒ–æ–¹å¼ç±»ä¼¼ï¼Œå®ƒä»¬ä¹Ÿæ˜¯ä¸ºæ¯ä¸ªç»´åº¦çš„å‚æ•°æ–½è¡ŒåŒæ ·çš„æ¢¯åº¦æ›´æ–°è§„åˆ™ã€‚  Adrien Lucas Ecoffet çš„è§£è¯»[1]ï¼šThe â€œcoordinatewiseâ€ section is phrased in a way that is a bit confusing to me, but I think it is actually quite simple: what it means is simply this: every single â€œcoordinateâ€ has its own state (though the optimizer itself is shared), and information is not shared across coordinates.I wasnâ€™t 100% sure about is what a â€œcoordinateâ€ is supposed to be. My guess, however, is that it is simply a weight or a bias, which I think is confirmed by my experiments. In other words, if we have a network with 100 weights and biases, there will be 100 hidden states involved in optimizing it, which means that effectively there will be 100 instances of our optimizer network running in parallel as we optimize.2.3. é¢„å¤„ç†ä¸åå¤„ç†ç”±äº optimizerï¼ˆlstmï¼‰ çš„è¾“å…¥æ˜¯æ¢¯åº¦ï¼Œæ¢¯åº¦çš„å¹…å€¼å˜åŒ–æ¢ä½å¾ˆå¤§ï¼Œè€Œç¥ç»ç½‘ç»œä¸€èˆ¬åªå¯¹å°èŒƒå›´çš„è¾“å…¥è¾“å‡ºé²æ£’ï¼Œå› æ­¤åœ¨å®è·µä¸­éœ€è¦å¯¹ lstm çš„è¾“å…¥è¾“å‡ºè¿›è¡Œå¤„ç†ã€‚ç›´è§‰ä¸Šï¼Œå¯ä»¥é‡‡ç”¨ log æ¥ç¼©æ”¾è¾“å…¥ã€‚ä½œè€…é‡‡ç”¨å¦‚ä¸‹çš„æ–¹å¼\\[\\begin{aligned}\\nabla^k \\rightarrow\\left\\{  \\begin{matrix}  \\left( \\frac{log(\\vert\\nabla\\vert)}{p},sgn(\\nabla) \\right) &amp;\\quad if \\vert\\nabla\\vert\\geq e^{-p}\\\\  (-1,e^{p}\\nabla) &amp;\\quad otherwise\\\\  \\end{matrix}\\right.\\end{aligned}\\]  $p&gt;0$ is a parameter controlling how small gradients are disregardedå…¶ä¸­ $p&gt;0$ ä¸ºä»»æ„ä¸€ä¸ªå‚æ•°ï¼ˆä½œè€…å– $p=10$ï¼‰ï¼Œç”¨æ¥è£å‰ªæ¢¯åº¦ã€‚ä¸Šå¼ä¸­å–ç»å¯¹å€¼å°±ä¸¢å¤±äº†ç¬¦å·ä¿¡æ¯ï¼Œå› æ­¤éœ€è¦é¢å¤–åŠ ä¸€é¡¹è¾“å…¥è®°å½•ç¬¦å·ä¿¡æ¯ã€‚  Adrien Lucas Ecoffet çš„è§£è¯»[1]ï¼šWith this formula, if the first parameter is greater than -1, it is a log of gradient, otherwise it is a flag indicating that the neural net should look at the second parameter. Likewise, if the second parameter is -1 or 1, it is the sign of the gradient, but if it is between -1 and 1 it is a scaled version of the gradient itself, exactly what we want!å¦‚æœç¬¬ä¸€ä¸ªå‚æ•°çš„å–å€¼å¤§äº -1ï¼Œé‚£ä¹ˆå®ƒå°±ä»£è¡¨æ¢¯åº¦çš„ log ï¼Œç¬¬äºŒä¸ªå‚æ•°åˆ™æ˜¯å®ƒçš„ç¬¦å·ã€‚å¦‚æœç¬¬ä¸€ä¸ªå‚æ•°çš„å–å€¼ç­‰äº -1ï¼Œé‚£ä¹ˆå®ƒå°†ä½œä¸ºä¸€ä¸ªæ ‡è®°å‘Šè¯‰ç¥ç»ç½‘ç»œåº”è¯¥å»å¯»æ‰¾ç¬¬äºŒä¸ªå‚æ•°ï¼Œæ­¤æ—¶ç¬¬äºŒä¸ªå‚æ•°å°±æ˜¯å¯¹æ¢¯åº¦çš„ç¼©æ”¾ã€‚å˜æ¢åç”»å›¾å¦‚ä¸‹ï¼ˆå›¾ä¸­ $p=1$ï¼‰3. å®éªŒ3.1. 10 ç»´å‡½æ•°è®¾è®¡å¦‚ä¸‹çš„ç›®æ ‡å‡½æ•°\\[f(\\theta)=\\vert\\vert W\\theta-y \\vert\\vert_2^2\\]å…¶ä¸­ $W,y\\in \\mathbb R^{10} \\sim i.i.d\\ Gaussian\\ distribution$ã€‚ç›®çš„æ˜¯éšæœºäº§ç”Ÿä¸€ä¸ª $f$ï¼Œé€šè¿‡è®­ç»ƒæ‰¾åˆ°æœ€ä¼˜çš„ $\\theta$ ä½¿å¾— $f$ æœ€å°ã€‚è€Œä¸”è¿™ä¸ªç›®æ ‡å‡½æ•°æ˜¯ç‹¬ç«‹åŒåˆ†å¸ƒé‡‡æ ·çš„ï¼Œæ„å‘³ç€ä»»æ„åˆå§‹åŒ–ä¸€ä¸ªä¼˜åŒ–é—®é¢˜æ¨¡å‹çš„å‚æ•°ï¼Œæˆ‘ä»¬éƒ½å¸Œæœ›è¿™ä¸ªä¼˜åŒ–å™¨èƒ½å¤Ÿæ‰¾åˆ°ä¸€ä¸ªä¼˜åŒ–é—®é¢˜çš„ç¨³å®šçš„è§£ã€‚  Adrien Lucas Ecoffet çš„è§£è¯»[1]ï¼šThese are pretty simple: our optimizer is supposed to find a 10-element vector called $\\theta$ that, when multiplied by a $10\\times 10$ matrix called $W$, is as close as possible to a 10-element vector called $y$. Both $y$ and $W$ are generated randomly. The error is simply the squared error.ä»é«˜æ–¯åˆ†å¸ƒä¸­éšæœºé‡‡æ ·ï¼Œå¾—åˆ°ä¸€æ¡æ›²çº¿ï¼Œç„¶åè®­ç»ƒ100æ¬¡ optimizeeï¼ŒæœŸé—´ æ¯ 20 æ¬¡ æ”¶é›†ä¸€æ‰¹ loss ç”¨æ¥è®­ç»ƒ optimizerï¼ˆlstmï¼‰ï¼Œç„¶åæ›´æ–°ä¸€æ¬¡ optimizee çš„å‚æ•°æ›´æ–°æ–¹å¼ã€‚  åŸæ–‡ï¼šEach function was optimized for 100 steps and the trained optimizers were unrolled for 20 steps.Adrien Lucas Ecoffet çš„è§£è¯»[1]ï¼šI assume this means that each epoch is made up of trying to optimize a new random function for 100 steps, but we are doing an update of the optimizer every 20 steps. The number of epochs is thus unspecified, but according to the graphs it seems to be 100 too.åœ¨æœ¬ç®—ä¾‹ä¸­æ²¡æœ‰é‡‡ç”¨ä»»ä½•é¢„å¤„ç†å’Œåå¤„ç†ã€‚ç»“æœå¦‚ä¸‹3.2. MNISTï¼ˆMLPï¼‰  In this experiment we test whether trainable optimizers can learn to optimize a small neural network on MNIST. We train the optimizer to optimize a base network and explore a series of modifications to the network architecture and training procedure at test time.è®­ç»ƒä¸€ä¸ªç¥ç»ç½‘ç»œå®Œæˆ MNIST å›¾ç‰‡åˆ†ç±»ã€‚ç›®æ ‡å‡½æ•° $f(\\theta)$ æ˜¯äº¤å‰ç†µï¼Œoptimizee æ˜¯ä¸€ä¸ªå•éšå±‚ 20 ä¸ªç¥ç»å…ƒçš„ MLPï¼Œæ¿€æ´»å‡½æ•°æ˜¯ sigmoidã€‚éšæœºé€‰å– 128 ä¸ªå›¾ç‰‡ä½œä¸ºä¸€ä¸ª minibatch æ¥è®¡ç®— $\\partial f(\\theta)/ \\partial \\theta$ã€‚æ¯æ¬¡ä»»åŠ¡çš„å”¯ä¸€ä¸åŒåœ¨äºåˆå§‹å‚æ•° $\\theta_0$ å’Œéšæœºé€‰æ‹©çš„ minibatchã€‚æ¯ä¸ªä»»åŠ¡è·‘ 100 æ­¥ï¼Œæ¯ 20 æ­¥è®­ç»ƒä¸€æ¬¡ optimizerã€‚é‡‡ç”¨å‰é¢è®¾è®¡çš„é¢„å¤„ç†ï¼Œåå¤„ç†ç»™ lstm çš„è¾“å‡ºä¹˜ä»¥ 0.1ã€‚ç»“æœå¦‚ä¸‹ä¸‹é¢ç ”ç©¶å¯¹ä¸åŒæ¶æ„çš„æ³›åŒ–ã€‚åˆ†åˆ«å°†è®­ç»ƒå¥½çš„ optimizer ç”¨äº  40 ä¸ªéšå±‚ç¥ç»å…ƒçš„ optimizee  2 å±‚/æ¯å±‚ 20 ä¸ªç¥ç»å…ƒçš„ optimizee  é‡‡ç”¨ ReLu æ¿€æ´»å‡½æ•°çš„ optimizeeç»“æœå¦‚ä¸‹è¿˜å¯¹ä¸åŒçš„æ¶æ„çš„æœ€ç»ˆ loss ç»“æœè¿›è¡Œäº†æ¯”è¾ƒã€‚å·¦å›¾ä¸¤è™šçº¿äº¤å‰è¡¨ç¤ºåŸºå‡†ï¼ˆoptimizer åœ¨ 1 å±‚ 20 ç¥ç»å…ƒçš„æ¶æ„ä¸‹è®­ç»ƒï¼‰ï¼Œå…¶å®ƒç‚¹è¡¨ç¤ºå…¶å®ƒæ”¹å˜è¿‡åçš„æ¶æ„ã€‚3.3. CIFARï¼ˆCNNï¼‰optimizee é‡‡ç”¨åŒ…å«å·ç§¯å±‚å’Œå…¨è¿æ¥å±‚åœ¨å†…çš„ç½‘ç»œï¼Œä¸‰å±‚å·ç§¯å±‚+æ± åŒ–å±‚ï¼Œæœ€åè·Ÿä¸€ä¸ª 32 ç¥ç»å…ƒçš„å…¨è¿æ¥å±‚ã€‚æ¿€æ´»å‡½æ•°éƒ½ä¸º ReLuï¼Œé‡‡ç”¨äº† batch normalizationã€‚ä»ç„¶é‡‡ç”¨å‰é¢è¯´çš„ coordinatewise lstmï¼Œä½†æ˜¯è¿™ä¸ªå®éªŒä¸­ï¼Œè€ƒè™‘åˆ°å·ç§¯å’Œå…¨è¿æ¥çš„å·®å¼‚æ€§ï¼ˆåŒæ—¶ä¹Ÿå°è¯•è¿‡åªç”¨ä¸€ä¸ª lstm ä½œä¸º optimizer ä½†æ•ˆæœä¸å¥½ï¼‰ï¼Œä½œè€…å› æ­¤åˆ†åˆ«é’ˆå¯¹å·ç§¯å±‚å’Œå…¨è¿æ¥å±‚è®¾è®¡äº†ä¸¤ä¸ª optimizerï¼Œå®ƒä»¬ä¹‹é—´ä¸å…±äº« $\\phi$ã€‚ç»“æœå¦‚ä¸‹ï¼ˆåŸæ–‡è¯´çš„å¾ˆä¹±ï¼Œæ²¡æ³•è§£è¯»ç»“æœï¼Œå¥½å°±å®Œäº‹äº†ï¼‰  The left-most plot displays the results of using the optimizer to fit a classifier on a held-out test set. The additional two plots on the right display the performance of the trained optimizer on modified datasets which only contain a subset of the labels, i.e. the CIFAR-2 dataset only contains data corresponding to 2 of the 10 labels. Additionally we include an optimizer LSTM-sub which was only trained on the held-out labels.  http://www.cs.toronto.edu/~kriz/cifar.html 163 MB python versionThe CIFAR-10 dataset consists of 60000 32x32 colour images in 10 classes, with 6000 images per class. There are 50000 training images and 10000 test images.3.4. Neural Artç•¥ã€‚4. å‚è€ƒæ–‡çŒ®[1] Adrien Lucas Ecoffet. Paper repro: â€œLearning to Learn by Gradient Descent by Gradient Descentâ€ [åŒ…å«å…¶å®ç°ä»£ç ][2] Sen Yang. Learning to learn by gradient descent by gradient descent-PyTorchå®è·µ [åŒ…å«å…¶å®ç°ä»£ç ]"
  },
  
  {
    "title": "æ·±åº¦å­¦ä¹ æ–‡ç« é˜…è¯»ï¼ˆBERTï¼‰",
    "url": "/posts/deep-learning-BERT/",
    "categories": "Academic, Paper",
    "tags": "deep learning",
    "date": "2020-11-25 16:07:19 +0800",
    





    
    "snippet": "æœ¬æ–‡ä»‹ç»äº†è°·æ­Œæå‡ºçš„ BERT æ¡†æ¶ï¼ŒåŸºäº Transformerï¼Œåœ¨ NLP é¢†åŸŸçš„ 11 ä¸ªæ–¹å‘å¤§å¹…åˆ·æ–°äº†ç²¾åº¦ï¼Œæ˜¯è¿‘å¹´æ¥è‡ªæ®‹å·®ç½‘ç»œæœ€æœ‰çªç ´æ€§çš„ä¸€é¡¹æŠ€æœ¯ã€‚  1. ç®€ä»‹  2. é¢„å¤‡çŸ¥è¯†          2.1. è¯­è¨€æ¨¡å‹                  2.1.1. N-gram          2.1.2. NNLM                    2.2. è¯å‘é‡æ¨¡å‹  ...",
    "content": "æœ¬æ–‡ä»‹ç»äº†è°·æ­Œæå‡ºçš„ BERT æ¡†æ¶ï¼ŒåŸºäº Transformerï¼Œåœ¨ NLP é¢†åŸŸçš„ 11 ä¸ªæ–¹å‘å¤§å¹…åˆ·æ–°äº†ç²¾åº¦ï¼Œæ˜¯è¿‘å¹´æ¥è‡ªæ®‹å·®ç½‘ç»œæœ€æœ‰çªç ´æ€§çš„ä¸€é¡¹æŠ€æœ¯ã€‚  1. ç®€ä»‹  2. é¢„å¤‡çŸ¥è¯†          2.1. è¯­è¨€æ¨¡å‹                  2.1.1. N-gram          2.1.2. NNLM                    2.2. è¯å‘é‡æ¨¡å‹                  2.2.1. CBoW          2.2.2. Skip-gram          2.2.3. ä¸¤ä¸ªæé€Ÿæ‰‹æ®µ          å±€é™æ€§          2.2.4. åç»­å‘å±•                      3. æ€»ä½“ç»“æ„  4. å‚è€ƒæ–‡çŒ®1. ç®€ä»‹  Devlin J, Chang M W, Lee K, et al. BERT: Pre-training of Deep Bidirectional Transformers for Language Understanding[J]. arXiv preprint arXiv:1810.04805v2, 2018.BERTï¼ˆBidirectional Encoder Representations from Transformersï¼‰è¿‘æœŸæå‡ºä¹‹åï¼Œä½œä¸ºä¸€ä¸ª word2vec çš„æ›¿ä»£è€…ï¼Œå…¶åœ¨ NLP é¢†åŸŸçš„ 11 ä¸ªæ–¹å‘å¤§å¹…åˆ·æ–°äº†ç²¾åº¦ï¼Œå¯ä»¥è¯´æ˜¯è¿‘å¹´æ¥è‡ªæ®‹å·®ç½‘ç»œæœ€ä¼˜çªç ´æ€§çš„ä¸€é¡¹æŠ€æœ¯äº†ã€‚è®ºæ–‡çš„ä¸»è¦ç‰¹ç‚¹ä»¥ä¸‹å‡ ç‚¹ï¼š  ä½¿ç”¨äº† Transformer ä½œä¸ºç®—æ³•çš„ä¸»è¦æ¡†æ¶ï¼ŒTransformer èƒ½æ›´å½»åº•çš„æ•æ‰è¯­å¥ä¸­çš„åŒå‘å…³ç³»ï¼›  ä½¿ç”¨äº†Mask Language Model(MLM) ï¼ˆWilson L Taylor. 1953. cloze procedure: A new tool for measuring readability. Journalism Bulletin, 30(4):415â€“433.ï¼‰å’Œ Next Sentence Prediction(NSP) çš„å¤šä»»åŠ¡è®­ç»ƒç›®æ ‡ï¼›  ä½¿ç”¨æ›´å¼ºå¤§çš„æœºå™¨è®­ç»ƒæ›´å¤§è§„æ¨¡çš„æ•°æ®ï¼Œä½¿ BERT çš„ç»“æœè¾¾åˆ°äº†å…¨æ–°çš„é«˜åº¦ï¼Œå¹¶ä¸” Google å¼€æºäº† BERT æ¨¡å‹ï¼Œç”¨æˆ·å¯ä»¥ç›´æ¥ä½¿ç”¨ BERT ä½œä¸º Word2Vec çš„è½¬æ¢çŸ©é˜µå¹¶é«˜æ•ˆçš„å°†å…¶åº”ç”¨åˆ°è‡ªå·±çš„ä»»åŠ¡ä¸­ã€‚BERT çš„æœ¬è´¨ä¸Šæ˜¯é€šè¿‡åœ¨æµ·é‡çš„è¯­æ–™çš„åŸºç¡€ä¸Šè¿è¡Œè‡ªç›‘ç£å­¦ä¹ æ–¹æ³•ä¸ºå•è¯å­¦ä¹ ä¸€ä¸ªå¥½çš„ç‰¹å¾è¡¨ç¤ºï¼Œå³ BERT æ˜¯ä¸€ä¸ªè¯å‘é‡æ¨¡å‹ã€‚æ‰€è°“è‡ªç›‘ç£å­¦ä¹ æ˜¯æŒ‡åœ¨æ²¡æœ‰äººå·¥æ ‡æ³¨çš„æ•°æ®ä¸Šè¿è¡Œçš„ç›‘ç£å­¦ä¹ ã€‚åœ¨ä»¥åç‰¹å®šçš„ NLP ä»»åŠ¡ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨ BERT çš„ç‰¹å¾è¡¨ç¤ºä½œä¸ºè¯¥ä»»åŠ¡çš„è¯åµŒå…¥ç‰¹å¾ã€‚æ‰€ä»¥ BERT æä¾›çš„æ˜¯ä¸€ä¸ªä¾›å…¶å®ƒä»»åŠ¡è¿ç§»å­¦ä¹ çš„æ¨¡å‹ï¼Œè¯¥æ¨¡å‹å¯ä»¥æ ¹æ®ä»»åŠ¡å¾®è°ƒæˆ–è€…å›ºå®šä¹‹åä½œä¸ºç‰¹å¾æå–å™¨ã€‚BERT çš„æºç å’Œæ¨¡å‹2019å¹´10æœˆ31å·å·²ç»åœ¨ Github ä¸Šå¼€æºï¼Œç®€ä½“ä¸­æ–‡å’Œå¤šè¯­è¨€æ¨¡å‹ä¹Ÿäº11æœˆ3å·å¼€æºã€‚2. é¢„å¤‡çŸ¥è¯†2.1. è¯­è¨€æ¨¡å‹è¯­è¨€æ¨¡å‹æ˜¯ä¸€ä¸ªåŸºäºæ¦‚ç‡çš„åˆ¤åˆ«æ¨¡å‹ï¼Œå®ƒçš„è¾“å…¥æ˜¯ä¸€å¥è¯ï¼ˆå•è¯çš„é¡ºåºåºåˆ—ï¼‰ï¼Œè¾“å‡ºæ˜¯è¿™å¥è¯çš„æ¦‚ç‡ï¼Œå³è¿™äº›å•è¯çš„è”åˆæ¦‚ç‡ï¼ˆjoint probabilityï¼‰ã€‚é¦–å…ˆå›é¡¾ä¸€ä¸‹è‡ªç„¶è¯­è¨€å¤„ç†ä¸­çš„ä¸€ä¸ªåŸºæœ¬é—®é¢˜ï¼šå¦‚ä½•è®¡ç®—ä¸€æ®µæ–‡æœ¬åºåˆ—åœ¨æŸç§è¯­è¨€ä¸‹å‡ºç°çš„æ¦‚ç‡ï¼Ÿä¹‹æ‰€ä¸ºç§°å…¶ä¸ºä¸€ä¸ªåŸºæœ¬é—®é¢˜ï¼Œæ˜¯å› ä¸ºå®ƒåœ¨å¾ˆå¤š NLP ä»»åŠ¡ä¸­éƒ½æ‰®æ¼”ç€é‡è¦çš„è§’è‰²ã€‚ä¾‹å¦‚ï¼Œåœ¨æœºå™¨ç¿»è¯‘çš„é—®é¢˜ä¸­ï¼Œå¦‚æœæˆ‘ä»¬çŸ¥é“äº†ç›®æ ‡è¯­è¨€ä¸­æ¯å¥è¯çš„æ¦‚ç‡ï¼Œå°±å¯ä»¥ä»å€™é€‰é›†åˆä¸­æŒ‘é€‰å‡ºæœ€åˆç†çš„å¥å­åšä¸ºç¿»è¯‘ç»“æœè¿”å›ã€‚ç»Ÿè®¡è¯­è¨€æ¨¡å‹ç»™å‡ºäº†è¿™ä¸€ç±»é—®é¢˜çš„ä¸€ä¸ªåŸºæœ¬è§£å†³æ¡†æ¶ã€‚å¯¹äºä¸€æ®µæ–‡æœ¬åºåˆ—\\[S=\\omega_1,\\omega_2,...,\\omega_T\\]å®ƒçš„æ¦‚ç‡å¯ä»¥è¡¨ç¤ºä¸º\\[P(S) = P(\\omega_1,\\omega_2,...,\\omega_T) = \\prod_{t=1}^Tp(\\omega_t\\vert \\omega_1,\\omega_2,...,\\omega_{t-1})\\]ä¹Ÿå³å‡è®¾ï¼Œæ¯ä¸€ä¸ªå•è¯ $w_i$ éƒ½è¦ä¾èµ–äºä»ç¬¬ä¸€ä¸ªå•è¯ $w_1$ åˆ°å®ƒä¹‹å‰ä¸€ä¸ªå•è¯ $\\omega_{t-1}$ çš„å½±å“ã€‚é—®é¢˜å˜æˆäº†å¦‚ä½•é¢„æµ‹è¿ä¹˜ä¸­è¿™äº›ç»™å®š previous words ä¸‹çš„æ¡ä»¶æ¦‚ç‡ã€‚ä¸Šè¿°æ¦‚ç‡è¡¡é‡æ–¹æ³•æœ‰ä¸¤ä¸ªç¼ºé™·  å‚æ•°ç©ºé—´å·¨å¤§ï¼Œ$p(\\omega_t\\vert \\omega_1,\\omega_2,â€¦,\\omega_{t-1})$ çš„å‚æ•°æœ‰ $O(n)$ ä¸ªï¼›  æ•°æ®ç¨€ç–ä¸¥é‡ï¼Œè¯åŒæ—¶å‡ºç°çš„æƒ…å†µå¯èƒ½æ²¡æœ‰ï¼ˆæ¡ä»¶æ¦‚ç‡ä¸º 0ï¼‰ï¼Œç»„åˆé˜¶æ•°é«˜æ—¶å°¤å…¶æ˜æ˜¾ã€‚2.1.1. N-gramä¸ºäº†è§£å†³ç¬¬ä¸€ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¼•å…¥é©¬å°”ç§‘å¤«å‡è®¾ï¼ˆMarkov Assumptionï¼‰ï¼šä¸€ä¸ªè¯çš„å‡ºç°ä»…ä¸å®ƒä¹‹å‰çš„è‹¥å¹²ä¸ªè¯æœ‰å…³ã€‚è¿™å°±äº§ç”Ÿäº† N-gram æ¨¡å‹\\[p(\\omega_t\\vert \\omega_1,\\omega_2,...,\\omega_{t-1}) = p(\\omega_t\\vert \\omega_{t-N+1},...,\\omega_{t-1})\\]ä¸€èˆ¬å– $N=2$ æˆ–è€… $N=3$ï¼Œåˆ†åˆ«å¯¹åº” Bi-gram å’Œ Tri-gram æ¨¡å‹ï¼Œå‰è€…è®¤ä¸ºæ¯ä¸ªè¯åªä¸å‰é¢ä¸€ä¸ªè¯æœ‰å…³ï¼Œåè€…è®¤ä¸ºä¸å‰ä¸¤ä¸ªè¯æœ‰å…³ã€‚æ¯”å¦‚ä¸€ä¸ªå¥å­ï¼ŒI love deep learning åˆ†åˆ«åˆ†è§£ä¸ºï¼šBi-gram : {I, love}, {love, deep}, {love, deep}, {deep, learning}Tri-gram : {I, love, deep}, {love, deep, learning}2.1.2. NNLM      A neural probabilistic language modelè¥¿å¤šå£«NLP. è¯å‘é‡(one-hot/SVD/NNLM/Word2Vec/GloVe)  åœ¨N-gram çš„åŸºç¡€ä¸Šï¼ŒBengio åœ¨ 2003 å¹´æå‡º NNLM å³ Neural Network based Language Modelï¼Œå¹¶é¦–æ¬¡æå‡ºäº† word embedding çš„æ¦‚å¿µï¼ˆè™½ç„¶æ²¡æœ‰å«è¿™ä¸ªåå­—ï¼‰ã€‚å®ƒæ˜¯ä¸€ä¸ªå¾ˆç®€å•çš„æ¨¡å‹ï¼Œç”±å››å±‚ç»„æˆï¼Œè¾“å…¥å±‚ã€åµŒå…¥å±‚ã€éšå±‚å’Œè¾“å‡ºå±‚ã€‚æ¨¡å‹æ¥æ”¶çš„è¾“å…¥æ˜¯é•¿åº¦ä¸º $n$ çš„è¯åºåˆ—ï¼Œè¾“å‡ºæ˜¯ä¸‹ä¸€ä¸ªè¯çš„ç±»åˆ«ã€‚NNLMæ¨¡å‹çš„åŸºæœ¬æ€æƒ³å¯ä»¥æ¦‚æ‹¬å¦‚ä¸‹ï¼š  å‡å®šè¯è¡¨ä¸­çš„æ¯ä¸€ä¸ª word éƒ½å¯¹åº”ç€ä¸€ä¸ªè¿ç»­çš„ç‰¹å¾å‘é‡ï¼›  å‡å®šä¸€ä¸ªè¿ç»­å¹³æ»‘çš„æ¦‚ç‡æ¨¡å‹ï¼Œè¾“å…¥ä¸€æ®µè¯å‘é‡çš„åºåˆ—ï¼Œå¯ä»¥è¾“å‡ºè¿™æ®µåºåˆ—çš„è”åˆæ¦‚ç‡ï¼›  åŒæ—¶å­¦ä¹ è¯å‘é‡çš„æƒé‡å’Œ Ngram æ¦‚ç‡æ¨¡å‹é‡Œçš„å‚æ•°ã€‚Bengioç­‰äººé‡‡ç”¨äº†ä¸€ä¸ªç®€å•çš„å‰å‘åé¦ˆç¥ç»ç½‘ç»œ $f(\\omega_{tâˆ’n+1},â€¦,w_t)$ æ¥æ‹Ÿåˆä¸€ä¸ªè¯åºåˆ—çš„æ¡ä»¶æ¦‚ç‡ $p(\\omega_t\\vert \\omega_{t-N+1},â€¦,\\omega_{t-1})$ã€‚æ•´ä¸ªæ¨¡å‹çš„ç½‘ç»œç»“æ„ä¸ºä¸€ä¸ªä¸‰å±‚ç¥ç»ç½‘ç»œï¼Œç¬¬ä¸€å±‚æ˜ å°„å±‚ï¼Œç¬¬äºŒå±‚éšå±‚ï¼Œç¬¬ä¸‰å±‚è¾“å‡ºå±‚ã€‚ç”¨ç«¯åˆ°ç«¯çš„æ€æƒ³æ¥çœ‹ï¼Œæˆ‘ä»¬è¾“å…¥ä¸€ä¸ªè¯çš„ one-hot å‘é‡è¡¨å¾ï¼Œå¸Œæœ›å¾—åˆ°ç›¸åº”çš„ç›¸åº”è¯çš„æ¡ä»¶æ¦‚ç‡ï¼Œåˆ™ç¥ç»ç½‘ç»œæ¨¡å‹è¦åšçš„å°±æ˜¯æ‹Ÿåˆä¸€ä¸ªç”± one-hot å‘é‡æ˜ å°„ä¸ºç›¸åº”æ¦‚ç‡æ¨¡å‹çš„å‡½æ•°ã€‚æˆ‘ä»¬å°†ä¸Šå›¾çš„ç½‘ç»œç»“æ„æ‹†æˆä¸¤éƒ¨åˆ†æ¥ç†è§£ï¼š      é¦–å…ˆæ˜¯ä¸€ä¸ªçº¿æ€§çš„æ˜ å°„å±‚ã€‚å®ƒå°†è¾“å…¥çš„ $Nâˆ’1$ ä¸ª one-hot è¯å‘é‡ï¼Œé€šè¿‡ä¸€ä¸ªå…±äº«çš„ $D\\times V$ çš„çŸ©é˜µ $C$ï¼Œæ˜ å°„ä¸º $Nâˆ’1$ ä¸ªåˆ†å¸ƒå¼çš„è¯å‘é‡ï¼ˆdistributed vectorï¼‰ã€‚å…¶ä¸­ï¼Œ$V$ æ˜¯è¯å…¸çš„å¤§å°ï¼Œ$D$ æ˜¯ embedding å‘é‡çš„ç»´åº¦ï¼ˆä¸€ä¸ªå…ˆéªŒå‚æ•°ï¼‰ã€‚    $C$ çŸ©é˜µé‡Œå­˜å‚¨äº†è¦å­¦ä¹ çš„è¯å‘é‡ï¼Œä¸ºä»€ä¹ˆè¿™æ˜¯æˆ‘ä»¬éœ€è¦çš„è¯å‘é‡å‘¢ï¼Ÿè¯•æƒ³ä¸€ä¸‹ï¼Œå½“æˆ‘ä»¬æŠŠ $n$ ä¸ª one-hot è¡¨å¾çš„è¯å‘é‡è¯å…¸è¾“å…¥åˆ°ç¥ç»ç½‘ç»œä¸­ï¼Œå•å±‚çš„ç¥ç»ç½‘ç»œè¿›è¡Œçš„è¿ç®—æ— éå°±æ˜¯ $Y=W^TX$ï¼Œè¿™ä¸ªæ“ä½œç­‰æ•ˆäºæŸ¥è¡¨æ“ä½œï¼Œone-hot å‘é‡å°† $n$ ä¸ªè¯å‘é‡ä» embedding å±‚ä¸­åŸå°ä¸åŠ¨åœ°æå–å‡ºæ¥ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚        è¿™æ ·ï¼Œæˆ‘ä»¬åœ¨è®­ç»ƒè¯­è¨€æ¨¡å‹çš„è¿‡ç¨‹ä¸­ï¼Œæ˜ å°„å±‚çš„æƒå€¼å°±ç­‰æ•ˆä¸ºæˆ‘ä»¬éœ€è¦çš„è¯å‘é‡è¡¨å¾ã€‚å€¼å¾—æ³¨æ„çš„ä¸€ç‚¹æ˜¯ï¼Œè¿™é‡Œçš„è¯å‘é‡ä¹Ÿæ˜¯è¦å­¦ä¹ çš„å‚æ•°ï¼Œä¹Ÿå°±æ˜¯è¯´è¯å‘é‡æ˜¯åœ¨è®­ç»ƒçš„è¿‡ç¨‹ä¸­è‡ªåŠ¨ç”Ÿæˆçš„ã€‚        å…¶æ¬¡æ˜¯ä¸€ä¸ªç®€å•çš„å‰å‘åé¦ˆç¥ç»ç½‘ç»œ $g$ã€‚å®ƒæ˜¯å‰é¢ embedding å±‚è¾“å‡ºçš„ç›´æ¥æ‹¼æ¥ï¼Œç”±ä¸€ä¸ªæ¿€æ´»å‡½æ•°ä¸º $tanh$ çš„ $(N-1)\\times D$ ç»´éšè—å±‚å’Œä¸€ä¸ª $V$ ç»´ $softmax$ è¾“å‡ºï¼ˆåˆ†ç±»ï¼‰å±‚ç»„æˆï¼Œå¯ä»¥å°†æˆ‘ä»¬å¾—åˆ°çš„ä¸€ç³»åˆ—è¾“å‡ºæ˜ å°„æˆå¯¹åº”æ¦‚ç‡ã€‚è¿™æ ·ï¼Œé€šè¿‡å°† embedding å±‚è¾“å‡ºçš„ $Nâˆ’1$ ä¸ªè¯å‘é‡æ˜ å°„ä¸ºä¸€ä¸ªé•¿åº¦ä¸º $V$ çš„æ¦‚ç‡åˆ†å¸ƒå‘é‡ï¼Œä»è€Œå¯¹è¯å…¸ä¸­çš„ word åœ¨è¾“å…¥ context ä¸‹çš„æ¡ä»¶æ¦‚ç‡åšå‡ºé¢„ä¼°\\[p(\\omega_t\\vert \\omega_1,...,\\omega_{t-1}) \\approx f(\\omega_{t-n+1},...,\\omega_{t-1})=g(C(\\omega_{t-n+1}),...,C(\\omega_{t-1}))\\]  æ³¨æ„åˆ°ï¼Œå½“è¯è¡¨é•¿åº¦ $V$ å’ŒæœŸæœ›çš„è¯å‘é‡ç»´åº¦ $D$ ç¡®å®šçš„æ—¶å€™ï¼Œç¬¬ä¸€å±‚æ˜ å°„å±‚å’Œ softmax è¾“å‡ºå±‚çš„è§„æ¨¡å°±å·²ç»ç¡®å®šäº†ï¼Œè€Œéšè—å±‚æ‰“å¤§å°å¯ä»¥ç”±æˆ‘ä»¬è‡ªå·±æŒ‡å®šã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡æœ€å°åŒ–ä¸€ä¸ªå¸¦æ­£åˆ™é¡¹çš„ cross-entropy æŸå¤±å‡½æ•°æ¥è°ƒæ•´ç¥ç»ç½‘ç»œçš„æ¨¡å‹å‚æ•°\\[L(\\theta) = \\frac{1}{T}\\sum_t logf(\\omega_{t-n+1},...,\\omega_{t-1})+R(\\theta)\\]ä¸Šå¼åŒ…å«ä¸€ä¸ªå·¨å¤§çš„å‚æ•°ç©ºé—´ã€‚ä¸è¿‡ï¼Œåœ¨æ¯æ¬¡ç”¨ SGD å­¦ä¹ æ›´æ–°æ¨¡å‹çš„å‚æ•°æ—¶ï¼Œå¹¶ä¸æ˜¯æ‰€æœ‰çš„å‚æ•°éƒ½ä¼šè¿›è¡Œè°ƒæ•´ï¼Œåªæœ‰å½“å‰ context åŒ…å«è¯çš„è¯å‘é‡æ‰ä¼šè¢«æ›´æ–°ï¼ˆå› ä¸ºæ˜ å°„å±‚çš„è¾“å‡ºåªä¼šå¾—åˆ°è¿™äº›è¯çš„è¾“å‡ºï¼Œå¹¶å‚ä¸æ¥ä¸‹æ¥çš„è¿ç®—ï¼‰ã€‚çœŸæ­£çš„è®¡ç®—ç“¶é¢ˆä¸»è¦æ˜¯åœ¨ softmax å±‚çš„å½’ä¸€åŒ–å‡½æ•°ä¸Šï¼ˆéœ€è¦å¯¹è¯å…¸ä¸­æ‰€æœ‰çš„ word è®¡ç®—ä¸€éæ¡ä»¶æ¦‚ç‡ï¼‰ã€‚NNLM è§£å†³äº†è¯­è¨€æ¨¡å‹ä¸­çš„ä»¥ä¸‹ä¸¤ä¸ªé—®é¢˜  æ¡ä»¶æ¦‚ç‡ $p(\\omega_t \\vert context)$ çš„è®¡ç®—ï¼›  å‘é‡ç©ºé—´æ¨¡å‹ï¼ˆVector Space Modelï¼ŒVSMï¼‰é‡Œè¯å‘é‡çš„è¡¨è¾¾ï¼›          ä¸€ä¸ªç¨ å¯†è¿ç»­å‘é‡ä¹Ÿå°±æ˜¯æ‰€è°“çš„è¯å‘é‡çš„åˆ†å¸ƒå¼è¡¨å¾ã€‚äº‹å®ä¸Šï¼Œè¿™ä¸ªæ¦‚å¿µåœ¨ä¿¡æ¯æ£€ç´¢ï¼ˆInformation Retrievalï¼‰é¢†åŸŸæ—©å°±å·²ç»è¢«å¹¿æ³›åœ°ä½¿ç”¨äº†ï¼Œå½“æ—¶ï¼Œè¿™ä¸ªæ–¹æ³•è¢«ç§°ä¸ºå‘é‡ç©ºé—´æ¨¡å‹ï¼ˆVector Space Modelï¼ŒVSMï¼‰ã€‚VSM ä¸»è¦åŸºäºä¸¤ä¸ªå‡è¯´ï¼šè¯è¢‹å‡è¯´ï¼ˆBag of Words Hypothesisï¼‰å’Œåˆ†å¸ƒå‡è¯´ï¼ˆDistributional Hypothesisï¼‰ã€‚å‰è€…æ˜¯è¯´ï¼Œä¸€ç¯‡æ–‡æ¡£çš„è¯é¢‘ï¼ˆè€Œä¸æ˜¯è¯åºï¼‰ä»£è¡¨äº†æ–‡æ¡£çš„ä¸»é¢˜ï¼›åè€…æ˜¯è¯´ï¼Œä¸Šä¸‹æ–‡ç¯å¢ƒç›¸ä¼¼çš„ä¸¤ä¸ªè¯æœ‰ç€ç›¸è¿‘çš„è¯­ä¹‰ã€‚      NNLMæ¨¡å‹ä»ç„¶å­˜åœ¨ä¸€ç³»åˆ—é—®é¢˜ï¼š  ç”±äºNNLMæ¨¡å‹ä½¿ç”¨çš„æ˜¯å…¨è¿æ¥ç¥ç»ç½‘ç»œï¼Œå› æ­¤åªèƒ½å¤„ç†å®šé•¿çš„åºåˆ—ï¼›  ç”±äºå…¶å·¨å¤§çš„å‚æ•°ç©ºé—´ï¼Œå°†NNLMçš„è®­ç»ƒå¤ªæ…¢äº†ã€‚å³ä¾¿æ˜¯åœ¨ç™¾ä¸‡é‡çº§çš„æ•°æ®é›†ä¸Šï¼Œå³ä¾¿æ˜¯å€ŸåŠ©äº†40ä¸ªCPUè¿›è¡Œè®­ç»ƒï¼ŒNNLMä¹Ÿéœ€è¦è€—æ—¶æ•°å‘¨æ‰èƒ½ç»™å‡ºä¸€ä¸ªç¨å¾®é è°±çš„è§£æ¥ã€‚æ˜¾ç„¶ï¼Œå¯¹äºç°åœ¨åŠ¨è¾„ä¸Šåƒä¸‡ç”šè‡³ä¸Šäº¿çš„çœŸå®è¯­æ–™åº“ï¼Œè®­ç»ƒä¸€ä¸ªNNLMæ¨¡å‹å‡ ä¹æ˜¯ä¸€ä¸ªimpossible missionã€‚é’ˆå¯¹ç¬¬ä¸€ä¸ªé—®é¢˜ï¼ŒMikolov åœ¨ 2010 å¹´æå‡ºäº† RNNLMï¼Œå…¶ç»“æ„å®é™…ä¸Šæ˜¯ç”¨ RNN ä»£æ›¿ NNLM é‡Œçš„éšå±‚ï¼Œè¿™æ ·åšçš„å¥½å¤„åŒ…æ‹¬å‡å°‘æ¨¡å‹å‚æ•°ã€æé«˜è®­ç»ƒé€Ÿåº¦ã€æ¥å—ä»»æ„é•¿åº¦è¾“å…¥ã€åˆ©ç”¨å®Œæ•´çš„å†å²ä¿¡æ¯ã€‚åŒæ—¶ï¼ŒRNNçš„å¼•å…¥æ„å‘³ç€å¯ä»¥ä½¿ç”¨ RNN çš„å…¶ä»–å˜ä½“ï¼Œåƒ LSTMã€BiLSTMã€GRU ç­‰ç­‰ï¼Œä»è€Œåœ¨æ—¶é—´åºåˆ—å»ºæ¨¡ä¸Šè¿›è¡Œæ›´å¤šæ›´ä¸°å¯Œçš„ä¼˜åŒ–ã€‚2.2. è¯å‘é‡æ¨¡å‹é’ˆå¯¹ NNLM çš„ç¬¬äºŒä¸ªé—®é¢˜ï¼Œå› æ­¤å…¶ç»å†äº†å°†è¿‘ 10 å¹´çš„å·¦å³æ‰è½¬å˜ä¸ºæˆ‘ä»¬æ‰€ç†ŸçŸ¥çš„ word2vecã€‚Mikolov æ³¨æ„åˆ°ï¼ŒåŸå§‹çš„NNLMæ¨¡å‹çš„è®­ç»ƒå…¶å®å¯ä»¥æ‹†åˆ†æˆä¸¤ä¸ªæ­¥éª¤ï¼šç”¨ä¸€ä¸ªç®€å•æ¨¡å‹è®­ç»ƒå‡ºè¿ç»­çš„è¯å‘é‡ï¼›åŸºäºè¯å‘é‡çš„è¡¨è¾¾ï¼Œè®­ç»ƒä¸€ä¸ªè¿ç»­çš„Ngramç¥ç»ç½‘ç»œæ¨¡å‹ã€‚è€ŒNNLMæ¨¡å‹çš„è®¡ç®—ç“¶é¢ˆä¸»è¦æ˜¯åœ¨ç¬¬äºŒæ­¥ã€‚å¦‚æœæˆ‘ä»¬åªæ˜¯æƒ³å¾—åˆ°wordçš„è¯å‘é‡ï¼Œæ˜¯ä¸æ˜¯å¯ä»¥å¯¹ç¬¬äºŒæ­¥é‡Œçš„ç¥ç»ç½‘ç»œæ¨¡å‹è¿›è¡Œç®€åŒ–å‘¢ï¼Ÿå°±è¿™æ ·ï¼Œä»–åœ¨ 2013 å¹´ä¸€å£æ°”æ¨å‡ºäº†ä¸¤ç¯‡ paperï¼Œå¹¶å¼€æºäº†ä¸€æ¬¾è®¡ç®—è¯å‘é‡çš„å·¥å…· â€”â€” è‡³æ­¤ï¼Œword2vec æ¨ªç©ºå‡ºä¸–ï¼Œä¸»è§’é—ªäº®ç™»åœºã€‚è¯å‘é‡æ¨¡å‹è¦åšçš„äº‹æƒ…æ˜¯ï¼šå­¦ä¹ ä¸€ä¸ªä»é«˜ç»´ç¨€ç–ç¦»æ•£å‘é‡åˆ°ä½ç»´ç¨ å¯†è¿ç»­å‘é‡çš„æ˜ å°„ã€‚è¯¥æ˜ å°„çš„ç‰¹ç‚¹æ˜¯ï¼Œè¿‘ä¹‰è¯å‘é‡çš„æ¬§æ°è·ç¦»æ¯”è¾ƒå°ï¼Œè¯å‘é‡ä¹‹é—´çš„åŠ å‡æ³•æœ‰å®é™…ç‰©ç†æ„ä¹‰ã€‚word2vec åŒ…å«ä¸¤ä¸ªæ¨¡å‹      å¦‚æœæ˜¯ç”¨ä¸€ä¸ªè¯è¯­ä½œä¸ºè¾“å…¥ï¼Œæ¥é¢„æµ‹å®ƒå‘¨å›´çš„ä¸Šä¸‹æ–‡ï¼Œé‚£è¿™ä¸ªæ¨¡å‹å«åšã€Skip-gram æ¨¡å‹ã€        å¦‚æœæ˜¯æ‹¿ä¸€ä¸ªè¯è¯­çš„ä¸Šä¸‹æ–‡ä½œä¸ºè¾“å…¥ï¼Œæ¥é¢„æµ‹è¿™ä¸ªè¯è¯­æœ¬èº«ï¼Œåˆ™æ˜¯ ã€CBoW æ¨¡å‹ï¼ˆContinues Bag-of-Words Modelï¼‰ã€  2.2.1. CBoWåœ¨ä¸¤ä¸ªæ¨¡å‹ä¸­ï¼ŒCBoW ä¸ä¹‹å‰çš„ NNLM æ›´ä¸ºç›¸ä¼¼ï¼Œç®€å•æ¦‚æ‹¬å…¶æ€è·¯å°±æ˜¯ï¼šè¾“å…¥ä¸­é—´è¯å‰åå…± $C$ä¸ªè¯ï¼Œé¢„æµ‹ä¸­é—´è¯ï¼Œåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­è®­ç»ƒå‡ºæˆ‘ä»¬éœ€è¦çš„è¯å‘é‡çŸ©é˜µã€‚å…¶æ¨¡å‹ç»“æ„å¦‚ä¸‹å›¾æ‰€ç¤ºä¸‹é¢è®²è§£ä¸€ä¸‹è¯¥æ¨¡å‹ç»“æ„ï¼š  å›¾ä¸­ $[x_{1k},â€¦,x_{Ck}]$ è¡¨ç¤ºç¬¬ $k$ ä¸ªä¸­å¿ƒè¯çš„å‰å $C$ ä¸ªä¸Šä¸‹æ–‡çš„ one-hot å‘é‡  å°† one-hot å‘é‡è¾“å…¥å­˜æ”¾è¯å‘é‡çš„çŸ©é˜µ $W_{V\\times N}$è¿›è¡ŒæŸ¥è¡¨ï¼Œ$V$ ä¸ºè¯è¡¨çš„å¤§å°ï¼Œ$N$ ä¸ºè¯å‘é‡çš„ç»´åº¦  å°†æŸ¥è¡¨å¾—åˆ°çš„ä¸Šä¸‹æ–‡å‘é‡ç›´æ¥è¿›è¡Œæ±‚å’Œï¼Œå†é€šè¿‡ä¸€ä¸ª $N\\times V$ çš„çŸ©é˜µæ˜ å°„åˆ°è¾“å‡ºå±‚å¯ä»¥çœ‹å‡ºï¼ŒCBoW ä¸ NNLM çš„ä¸»è¦ä¸åŒä¸º  ç§»é™¤äº† NNLM ä¸­çš„éšå±‚ç»“æ„ï¼ˆtanhï¼‰ï¼›  ç›´æ¥å°† embedding layer çš„æŸ¥è¡¨ç»“æœç´¯åŠ æ±‚å’Œï¼ˆNNLM æ˜¯æ‹¼æ¥ï¼‰  å°†ä¸‹æ–‡å•è¯çº³å…¥ä¸Šä¸‹æ–‡ç¯å¢ƒï¼ŒçœŸæ­£è€ƒè™‘äº† contextï¼ˆNNLMçš„è¾“å…¥ä¸¥æ ¼æ¥è¯´ä¸ºä¸Šæ–‡æ–‡æœ¬ï¼‰2.2.2. Skip-gramCBoW æ¨¡å‹ä¾ç„¶æ˜¯ä» context å¯¹ target word çš„é¢„æµ‹ä¸­å­¦ä¹ åˆ°è¯å‘é‡çš„è¡¨è¾¾ã€‚åè¿‡æ¥ï¼Œæˆ‘ä»¬èƒ½å¦ä» target word å¯¹context çš„é¢„æµ‹ä¸­å­¦ä¹ åˆ° word vector å‘¢ï¼Ÿç­”æ¡ˆæ˜¾ç„¶æ˜¯å¯ä»¥çš„ï¼šè¿™ä¾¿æ˜¯ Skip-gram æ¨¡å‹ã€‚å…¶æ¨¡å‹ç»“æ„ä¸ CBoW æ¨¡å‹å¤§åŒå°å¼‚ï¼Œä¹ŸåŒ…æ‹¬è¾“å…¥å±‚ã€éšå±‚ï¼ˆå…¶å®æ˜¯å¤šä½™çš„ï¼ŒåŠ ä¸Šè¯¥å±‚ä»¥ä¾¿ä¸ä¸ CBoW æ¨¡å‹å¯¹æ¯”ï¼‰å’Œè¾“å‡ºå±‚ç»è¿‡ç¥ç»ç½‘ç»œéšå±‚çš„è®¡ç®—ï¼Œè¾“å…¥è¯ä¼šä»ä¸€ä¸ª $1\\times V$ çš„ one-hot å‘é‡å˜æˆ $1\\times N$ çš„å‘é‡ï¼Œå†è¢«è¾“å…¥åˆ°è¾“å‡ºå±‚ã€‚è¾“å‡ºå±‚æ˜¯ä¸€ä¸ª softmax å›å½’åˆ†ç±»å™¨ï¼Œå®ƒçš„æ¯ä¸ªç»“ç‚¹å°†ä¼šè¾“å‡ºä¸€ä¸ª 0 ~ 1 ä¹‹é—´çš„å€¼ï¼ˆæ¦‚ç‡ï¼‰ï¼Œè¿™äº›æ‰€æœ‰è¾“å‡ºå±‚ç¥ç»å…ƒç»“ç‚¹çš„æ¦‚ç‡ä¹‹å’Œä¸º 1 ã€‚Skip-gram æ¨¡å‹çš„æœ¬è´¨æ˜¯è®¡ç®—è¾“å…¥è¯çš„ input vector ä¸ç›®æ ‡è¯çš„ output vector ä¹‹é—´çš„ä½™å¼¦ç›¸ä¼¼åº¦ï¼Œå¹¶è¿›è¡Œ softmax å½’ä¸€åŒ–ã€‚æˆ‘ä»¬è¦å­¦ä¹ çš„æ¨¡å‹å‚æ•°æ­£æ˜¯è¿™ä¸¤ç±»è¯å‘é‡ã€‚2.2.3. ä¸¤ä¸ªæé€Ÿæ‰‹æ®µç„¶è€Œï¼Œæ¯å½“è®¡ç®—ä¸€ä¸ªè¯çš„æ¦‚ç‡éƒ½è¦å¯¹è¯å…¸é‡Œçš„ $V$ ä¸ªè¯è®¡ç®—ç›¸ä¼¼åº¦ï¼Œç„¶åè¿›è¡Œå½’ä¸€åŒ–ï¼Œè¿™åŸºæœ¬ä¸Šæ—¶ä¸ç°å®çš„ã€‚ä¸ºæ­¤ï¼ŒMikolov å¼•å…¥äº†ä¸¤ä¸ªæé€Ÿæ‰‹æ®µï¼š  å±‚æ¬¡ Softmaxï¼ˆHierarchical Softmaxï¼‰  è´Ÿé‡‡æ ·ï¼ˆNegative Samplingï¼‰æ™®éè®¤ä¸º Hierarchical Softmax å¯¹ä½é¢‘è¯æ•ˆæœè¾ƒå¥½ï¼›Negative Samplingå¯¹é«˜é¢‘è¯æ•ˆæœè¾ƒå¥½ï¼Œå‘é‡ç»´åº¦è¾ƒä½æ—¶æ•ˆæœæ›´å¥½ã€‚Hierarchical Softmax æ˜¯ word2vec ä¸­çš„ä¸€é¡¹å…³é”®æŠ€æœ¯ï¼Œç®€å•æ¥è¯´ï¼Œå…¶é€šè¿‡æ„é€ ä¸€ä¸ª Huffman æ ‘ï¼Œå°†å¤æ‚çš„å½’ä¸€åŒ–æ¦‚ç‡é—®é¢˜è½¬åŒ–ä¸ºä¸€ç³»åˆ—äºŒåˆ†ç±»çš„æ¡ä»¶æ¦‚ç‡ç›¸ä¹˜çš„å½¢å¼ã€‚Huffman ç¼–ç åˆç§°ä¸ºæœ€ä¼˜äºŒå‰æ ‘ï¼Œè¡¨ç¤ºä¸€ç§å¸¦æƒè·¯å¾„é•¿åº¦æœ€çŸ­çš„äºŒå‰æ ‘ã€‚å¸¦æƒè·¯å¾„é•¿åº¦ï¼ŒæŒ‡çš„å°±æ˜¯å¶å­ç»“ç‚¹çš„æƒå€¼ä¹˜ä»¥è¯¥ç»“ç‚¹åˆ°æ ¹ç»“ç‚¹çš„è·¯å¾„é•¿åº¦ã€‚è€Œæˆ‘ä»¬éœ€è¦æ„é€ çš„Huffmanæ ‘ç»“æ„ï¼Œæ˜¯ä»¥è¯è¡¨ä¸ºæ ¹ç»“ç‚¹ï¼Œæ¯ä¸€ä¸ªå­èŠ‚ç‚¹ä¸ºçˆ¶èŠ‚ç‚¹çš„ä¸ç›¸äº¤å­é›†ï¼Œè¯ä¸ºå¶èŠ‚ç‚¹çš„ç»“æ„ã€‚æˆ‘ä»¬å°†å¶èŠ‚ç‚¹çš„æƒå€¼è½¬åŒ–ä¸ºè¯é¢‘ï¼Œåˆ™å¸¦æƒè·¯å¾„é•¿åº¦æŒ‡çš„å°±æ˜¯è¯é¢‘ä¹˜ä»¥è·¯å¾„çš„å¤§å°ï¼Œå¸¦æƒè·¯å¾„æœ€å°çš„æ¡ä»¶ä½¿å¾—æ„é€ å‡ºæ¥çš„éœå¤«æ›¼æ ‘ä¸­ï¼Œé«˜é¢‘è¯ç¦»æ ¹ç»“ç‚¹æ›´è¿‘ï¼Œè€Œä½é¢‘è¯ç¦»æ ¹ç»“ç‚¹æ›´è¿œã€‚å…¶æ„é€ çš„Huffmanæ ‘å¦‚ä¸‹æ‰€ç¤ºï¼šåœ¨æ„å»ºHuffmanæ ‘çš„åŒæ—¶ï¼Œä¼šä¸ºæ¯ä¸€ä¸ªéå¶å­èŠ‚ç‚¹åˆå§‹åŒ–ä¸€ä¸ªå‘é‡ï¼Œè¯¥å‘é‡ç”¨äºä¸é¢„æµ‹å‘é‡æ±‚æ¡ä»¶æ¦‚ç‡ï¼Œå‡è®¾æˆ‘ä»¬çš„æ ¹ç»“ç‚¹è¡¨ç¤ºåŸå§‹å­—å…¸Dï¼Œåˆ™ç¬¬äºŒå±‚çš„ä¸¤ä¸ªå­èŠ‚ç‚¹è¡¨ç¤ºDçš„ä¸¤ä¸ªå­é›†D1å’ŒD2ï¼Œåˆ™åœ¨ç»™å®šcontextçš„æ¡ä»¶ä¸‹ï¼Œç›®æ ‡è¯wtå±äºD1çš„æ¡ä»¶æ¦‚ç‡å¯ä»¥è½¬æ¢ä¸ºä¸€ä¸ªäºŒåˆ†ç±»çš„é€»è¾‘å›å½’å‡½æ•°ï¼š\\[p(\\omega_t \\in D_i\\vert context) = \\frac{1}{1+e^{-U_{D_{root}} \\cdot V_{\\omega_t}}}\\]å½“èµ°åˆ°ä¸€ä¸ªå­èŠ‚ç‚¹åï¼Œæˆ‘ä»¬åˆç”¨ç±»ä¼¼çš„æ–¹æ³•å†å¯¹å…¶è¿›è¡ŒäºŒåˆ†ç±»ï¼Œå¾—åˆ°ä¸‹ä¸€ä¸ªäºŒåˆ†ç±»çš„æ¡ä»¶æ¦‚ç‡ã€‚å‡è®¾æ¯å½“æˆ‘ä»¬å°†å…¶åˆ†ä¸ºå·¦å­èŠ‚ç‚¹æ—¶è®°ä¸º0ï¼Œå°†å…¶åˆ†ä¸ºå³å­èŠ‚ç‚¹æ—¶è®°ä¸º1ï¼Œåˆ™å¯ä»¥å°†æœ€åçš„è·¯å¾„çš„ç”¨0ï¼Œ1ç»„åˆçš„äºŒå‰æ ‘ç¼–ç è¡¨ç¤ºï¼Œç›¸åº”çš„ä¼¼ç„¶å‡½æ•°ä¸º\\[p(w_t\\vert context)=p(D_1=1\\vert context)p(D_2=0\\vert D_1=1)...p(w_t\\vert D_k=1)\\]è¿™æ ·ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æœ€å¤§åŒ–è¿™ä¸ªä¼¼ç„¶å‡½æ•°æ¥æ±‚è§£äºŒå‰æ ‘ä¸Šçš„å‚æ•°â€”â€”éæ¯ä¸€ä¸ªå¶èŠ‚ç‚¹ä¸Šçš„å‘é‡ï¼Œç”¨æ¥è®¡ç®—æ¸¸èµ°åˆ°æŸä¸€ä¸ªå­èŠ‚ç‚¹çš„æ¦‚ç‡ã€‚å±‚æ¬¡Softmaxæ˜¯ä¸€ä¸ªå¾ˆå·§å¦™çš„æ¨¡å‹ã€‚å®ƒé€šè¿‡æ„é€ ä¸€é¢—äºŒå‰æ ‘ï¼Œå°†ç›®æ ‡æ¦‚ç‡çš„è®¡ç®—å¤æ‚åº¦ä»æœ€åˆçš„ $V$ é™ä½åˆ°äº† $log_2V$ çš„é‡çº§ã€‚ä¸è¿‡ä»˜å‡ºçš„ä»£ä»·æ˜¯äººä¸ºå¢å¼ºäº†è¯ä¸è¯ä¹‹é—´çš„è€¦åˆæ€§ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªè¯å‡ºç°çš„æ¡ä»¶æ¦‚ç‡çš„å˜åŒ–ï¼Œä¼šå½±å“åˆ°å…¶è·¯å¾„ä¸Šæ‰€æœ‰éå¶èŠ‚ç‚¹çš„æ¦‚ç‡å˜åŒ–ï¼Œé—´æ¥åœ°å¯¹å…¶ä»–è¯å‡ºç°çš„æ¡ä»¶æ¦‚ç‡å¸¦æ¥ä¸åŒç¨‹åº¦çš„å½±å“ã€‚å› æ­¤ï¼Œæ„é€ ä¸€é¢—æœ‰æ„ä¹‰çš„äºŒå‰æ ‘å°±æ˜¾å¾—ååˆ†é‡è¦ã€‚å®è·µè¯æ˜ï¼Œåœ¨å®é™…çš„åº”ç”¨ä¸­ï¼ŒåŸºäº Huffman ç¼–ç çš„äºŒå‰æ ‘å¯ä»¥æ»¡è¶³å¤§éƒ¨åˆ†åº”ç”¨åœºæ™¯çš„éœ€æ±‚ã€‚Negative Sampling ç®—æ³•æ”¹é€ çš„æ˜¯æ¨¡å‹çš„ä¼¼ç„¶å‡½æ•°ï¼Œä¸æ”¹é€ æ¨¡å‹è¾“å‡ºæ¦‚ç‡çš„ Hierarchical Softmax ç®—æ³•ä¸åŒã€‚å…¶æ€æƒ³æ¥æºäºä¸€ç§å«åšå™ªå£°å¯¹æ¯”ä¼°è®¡ï¼ˆNoise-Contrastive Estimationï¼‰çš„ç®—æ³•ã€‚ä»¥Skip-gramæ¨¡å‹ä¸ºä¾‹ï¼Œå…¶åŸå§‹çš„ä¼¼ç„¶å‡½æ•°å¯¹åº”ç€ä¸€ä¸ªå¤šé¡¹åˆ†å¸ƒã€‚åœ¨ç”¨æœ€å¤§ä¼¼ç„¶æ³•æ±‚è§£è¿™ä¸ªä¼¼ç„¶å‡½æ•°æ—¶ï¼Œæˆ‘ä»¬å¾—åˆ°ä¸€ä¸ª cross-entropy çš„æŸå¤±å‡½æ•°ï¼š\\[J(\\theta) = -\\frac{1}{T}\\sum_{t=1}^T\\sum_{-c\\leq j\\leq c,j\\neq 0} log p(\\omega_{t+j}\\vert \\omega_t)\\]$p(\\omega_{t+j}\\vert \\omega_t)$ æ˜¯æ•´ä¸ªå­—å…¸å½’ä¸€åŒ–äº†çš„æ¦‚ç‡ã€‚åœ¨ NCE ç®—æ³•ä¸­ï¼Œæˆ‘ä»¬æ„é€ äº†è¿™æ ·ä¸€ä¸ªé—®é¢˜ï¼šå¯¹äºä¸€ç»„è®­ç»ƒæ ·æœ¬ï¼Œæˆ‘ä»¬æƒ³çŸ¥é“ï¼Œç›®æ ‡è¯çš„é¢„æµ‹ï¼Œæ˜¯æ¥è‡ªäº context çš„é©±åŠ¨ï¼Œè¿˜æ˜¯ä¸€ä¸ªäº‹å…ˆå‡å®šçš„èƒŒæ™¯å™ªå£°çš„é©±åŠ¨ï¼Ÿæ˜¾ç„¶ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ä¸€ä¸ªé€»è¾‘å›å½’çš„å‡½æ•°æ¥å›ç­”è¿™ä¸ªé—®é¢˜\\[p(D=1\\vert \\omega,context)=\\frac{p(\\omega\\vert context)}{p(\\omega\\vert context)+kp_n(\\omega)}=Ïƒ(logp(\\omega\\vert context)âˆ’logkp_n(\\omega))\\]è¿™ä¸ªå¼å­ç»™å‡ºäº†ä¸€ä¸ªç›®æ ‡è¯ $\\omega$ æ¥è‡ªäº context é©±åŠ¨çš„æ¦‚ç‡ã€‚å…¶ä¸­ï¼Œ$k$ æ˜¯ä¸€ä¸ªå…ˆéªŒå‚æ•°ï¼Œè¡¨æ˜å™ªå£°çš„é‡‡æ ·é¢‘ç‡ã€‚$p(\\omega\\vert context)$ æ˜¯ä¸€ä¸ªéå½’ä¸€åŒ–çš„æ¦‚ç‡åˆ†å¸ƒï¼Œå¯ä»¥çœ‹ä½œæ˜¯ $softmax$ å½’ä¸€åŒ–å‡½æ•°ä¸­çš„åˆ†å­éƒ¨åˆ†ã€‚$p_n(\\omega)$ åˆ™æ˜¯èƒŒæ™¯å™ªå£°çš„è¯åˆ†å¸ƒï¼Œé€šå¸¸é‡‡ç”¨è¯çš„ unigram åˆ†å¸ƒã€‚è€Œ $\\sigma(\\cdot)$ æ˜¯æˆ‘ä»¬ç†Ÿæ‚‰çš„ $sigmoid$ å‡½æ•°ã€‚åœ¨ Mikolov è®ºæ–‡ä¸­çš„è´Ÿé‡‡æ ·ç®—æ³•ï¼Œæ˜¯ NCE çš„ç®€åŒ–ç‰ˆæœ¬ã€‚ç®€å•æ¥è¯´ï¼Œå…¶æ­£è´Ÿé‡‡æ ·è¿‡ç¨‹å…·æœ‰ä»¥ä¸‹ä¸¤ä¸ªæ­¥éª¤ï¼š  é¦–å…ˆç¡®å®šæ­£æ ·æœ¬ï¼Œé€šè¿‡è®¡ç®—ä¸­å¿ƒè¯ä¸ä¸Šä¸‹æ–‡ä¸­è¯çš„å…¶ä½™å¼¦ç›¸ä¼¼åº¦ï¼Œå†ç”¨ä¸€ä¸ª $sigmoid$ å‡½æ•°æ¥åˆ¤æ–­\\(p(D=1\\vert \\omega_o,\\omega_i)=\\sigma(U_o\\cdot V_i)\\)  é‡‡æ ·è¯å…¸ä¸­ä¸åœ¨ä¸­å¿ƒè¯ä¸Šä¸‹æ–‡ä¸­çš„è¯çš„è¯ä½œä¸ºè´Ÿæ ·æœ¬ï¼Œé‡‡æ ·é¢‘ç‡ç”±è¯¥è¯åœ¨è¯­æ–™åº“ä¸­å‡ºç°çš„é¢‘ç‡æœ‰å…³ï¼Œä½œè€…ç»™å‡ºäº†ä¸€ä¸ªç»éªŒå…¬å¼\\(p(\\omega_i) = \\frac{f(\\omega_i)^{3/4}}{\\sum_{j=0}^nf(\\omega_j)^{3/4}}\\)å…¶ä¸­ï¼Œ$f(\\omega_i)$ æ˜¯è¯¥è¯åœ¨è¯­æ–™åº“ä¸­å‡ºç°çš„é¢‘ç‡ï¼Œä¸€å…±é‡‡æ · $k$ ä¸ªè¯ã€‚ç»è¿‡è¿™æ ·çš„é‡‡æ ·åï¼Œå¾—åˆ°ä¸€ä¸ªæ–°æ•°æ®é›†ã€‚å…¶ä¸­ï¼Œlabel æ ‡è®°äº†æ•°æ®çš„æ¥æºï¼ˆæ­£ä¾‹è¢«æ ‡è®°ä¸º 1ï¼Œè´Ÿä¾‹è¢«æ ‡è®°ä¸º 0ï¼‰ã€‚åœ¨è¿™ä¸ªæ–°çš„æ•°æ®é›†ä¸Šï¼Œæˆ‘ä»¬ä»…éœ€è¦ä»é‡‡æ ·ç»“æœä¸­è®¡ç®—å½’ä¸€åŒ–æ¦‚ç‡åˆ†å¸ƒï¼Œä»è€Œå¤§å¤§ç®€åŒ–è®¡ç®—è¿‡ç¨‹ã€‚å±€é™æ€§æ€»çš„æ¥è¯´ï¼Œword2vecé€šè¿‡åµŒå…¥ä¸€ä¸ªçº¿æ€§çš„æŠ•å½±çŸ©é˜µï¼ˆprojection matrixï¼‰ï¼Œå°†åŸå§‹çš„one-hotå‘é‡æ˜ å°„ä¸ºä¸€ä¸ªç¨ å¯†çš„è¿ç»­å‘é‡ï¼Œå¹¶é€šè¿‡ä¸€ä¸ªè¯­è¨€æ¨¡å‹çš„ä»»åŠ¡å»å­¦ä¹ è¿™ä¸ªå‘é‡çš„æƒé‡ï¼Œè€Œè¿™ä¸ªè¿‡ç¨‹å¯ä»¥çœ‹ä½œæ˜¯æ— ç›‘ç£æˆ–ç§°ä¸ºè‡ªç›‘ç£çš„ï¼Œå…¶è¯å‘é‡çš„è®­ç»ƒç»“æœä¸è¯­æ–™åº“æ˜¯ç´§å¯†ç›¸å…³çš„ï¼Œå› æ­¤é€šå¸¸ä¸åŒçš„åº”ç”¨åœºæ™¯éœ€è¦ç”¨è¯¥åœºæ™¯ä¸‹çš„è¯­æ–™åº“å»è®­ç»ƒè¯å‘é‡æ‰èƒ½åœ¨ä¸‹æ¸¸ä»»åŠ¡ä¸­è·å¾—æœ€å¥½çš„æ•ˆæœã€‚è¿™ä¸€æ€æƒ³åæ¥è¢«å¹¿æ³›åº”ç”¨äºåŒ…æ‹¬word2vecåœ¨å†…çš„å„ç§NLPæ¨¡å‹ä¸­ï¼Œä»æ­¤ä¹‹åä¸å•å•æ˜¯è¯å‘é‡ï¼Œæˆ‘ä»¬ä¹Ÿæœ‰äº†å¥å‘é‡ã€æ–‡æ¡£å‘é‡ï¼Œä»Word Embeddingèµ°å‘äº†World Embeddingçš„æ–°æ—¶ä»£ã€‚word2vecéå¸¸ç»å…¸ï¼Œä½†ä¹Ÿæœ‰å…¶æ˜æ˜¾çš„å±€é™æ€§ï¼Œå…¶ä¸»è¦åœ¨ä»¥ä¸‹å‡ ä¸ªæ–¹é¢ï¼š  åœ¨æ¨¡å‹è®­ç»ƒçš„è¿‡ç¨‹ä¸­ä»…ä»…è€ƒè™‘contextä¸­çš„å±€éƒ¨è¯­æ–™ï¼Œæ²¡æœ‰è€ƒè™‘åˆ°å…¨å±€ä¿¡æ¯ï¼›  å¯¹äºè‹±æ–‡è¯­æ–™ï¼Œå¯¹äºä»€ä¹ˆæ˜¯è¯ï¼Œæ€æ ·åˆ†è¯å¹¶ä¸æ˜¯é—®é¢˜ï¼ˆä½†ä¸ªè¯å°±æ˜¯ç‹¬ç«‹çš„ä¸ªä½“ï¼‰ã€‚è€Œå¯¹äºä¸­æ–‡è€Œè¨€ï¼Œæˆ‘ä»¬åœ¨è®­ç»ƒè¯å‘é‡ä¹‹å‰é¦–å…ˆè¦è§£å†³åˆ†è¯çš„é—®é¢˜ï¼Œè€Œåˆ†è¯çš„æ•ˆæœåœ¨å¾ˆå¤šæƒ…å†µä¸‹å°†ä¼šä¸¥é‡å½±å“è¯å‘é‡çš„è´¨é‡ï¼ˆå¦‚åˆ†è¯ç²’åº¦ç­‰ï¼‰ï¼Œå› æ­¤ï¼Œä»æŸäº›æ–¹é¢æ¥è¯´word2vecå¯¹ä¸­æ–‡ä¸æ˜¯é‚£ä¹ˆçš„å‹å¥½ï¼›  åœ¨ 2018 å¹´ä»¥å‰ï¼Œå¯¹äºword2vecåŠå…¶ä¸€ç³»åˆ—å…¶ä»–çš„è¯å‘é‡æ¨¡å‹éƒ½æœ‰ä¸€ä¸ªç›¸åŒçš„ç‰¹ç‚¹ï¼šå…¶embeddingçŸ©é˜µåœ¨è®­ç»ƒå®Œæˆåä¾¿å·²ç»æ˜¯å›ºå®šäº†çš„ï¼Œè¿™æ ·æˆ‘ä»¬å¯ä»¥è½»æ˜“ä»ç½‘ä¸Šè·å–åˆ°å¤§é‡é¢„è®­ç»ƒå¥½çš„è¯å‘é‡å¹¶å¿«é€Ÿåº”ç”¨åˆ°æˆ‘ä»¬è‡ªå·±ä»»åŠ¡ä¸­ã€‚ä½†ä»å¦ä¸€ä¸ªè§’åº¦æ¥è¯´ï¼Œå¯¹äºåŒä¸€ä¸ªè¯ï¼Œåœ¨ä»»æ„ä¸€ä¸ªå¥å­ï¼Œä»»æ„ä¸€ä¸ªç¯å¢ƒä¸‹çš„è¯å‘é‡éƒ½æ˜¯å›ºå®šçš„ï¼Œè¿™å¯¹äºä¸€äº›æ­§ä¹‰è¯æ¥è¯´æ˜¯å­˜åœ¨è¾ƒå¤§é—®é¢˜çš„ï¼Œè¿™ä¹Ÿæ˜¯é™åˆ¶ç±»ä¼¼word2vecã€Gloveç­‰è¯å‘é‡å·¥å…·æ€§èƒ½çš„ä¸€ä¸ªå¾ˆé‡è¦çš„é—®é¢˜ã€‚2.2.4. åç»­å‘å±•ä¼ ç»Ÿæ„ä¹‰ä¸Šæ¥è®²ï¼Œè¯å‘é‡æ¨¡å‹æ˜¯ä¸€ä¸ªå·¥å…·ï¼Œå¯ä»¥æŠŠçœŸå®ä¸–ç•ŒæŠ½è±¡å­˜åœ¨çš„æ–‡å­—è½¬æ¢æˆå¯ä»¥è¿›è¡Œæ•°å­¦å…¬å¼æ“ä½œçš„å‘é‡ï¼Œè€Œå¯¹è¿™äº›å‘é‡çš„æ“ä½œï¼Œæ‰æ˜¯ NLP çœŸæ­£è¦åšçš„ä»»åŠ¡ã€‚å› è€ŒæŸç§æ„ä¹‰ä¸Šï¼ŒNLP ä»»åŠ¡åˆ†æˆä¸¤éƒ¨åˆ†ï¼Œé¢„è®­ç»ƒäº§ç”Ÿè¯å‘é‡ï¼Œå¯¹è¯å‘é‡æ“ä½œï¼ˆä¸‹æ¸¸å…·ä½“NLPä»»åŠ¡ï¼‰ã€‚ä» word2vec åˆ° ELMo åˆ° BERTï¼Œåšçš„å…¶å®ä¸»è¦æ˜¯æŠŠä¸‹æ¸¸å…·ä½“ NLP ä»»åŠ¡çš„æ´»é€æ¸ç§»åˆ°é¢„è®­ç»ƒäº§ç”Ÿè¯å‘é‡ä¸Šã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªå¤§ä½“æ¦‚æ‹¬ï¼Œå…·ä½“è§£é‡Šåé¢ä¼šå†™åˆ°ã€‚ã€‚  word2vec $\\rightarrow$ ELMoï¼šç»“æœï¼šä¸Šä¸‹æ–‡æ— å…³çš„ static å‘é‡å˜æˆä¸Šä¸‹æ–‡ç›¸å…³çš„ dynamic å‘é‡ï¼Œæ¯”å¦‚è‹¹æœåœ¨ä¸åŒè¯­å¢ƒ vector ä¸åŒã€‚æ“ä½œï¼šencoder æ“ä½œè½¬ç§»åˆ°é¢„è®­ç»ƒäº§ç”Ÿè¯å‘é‡è¿‡ç¨‹å®ç°ã€‚  ELMo $\\rightarrow$ BERTï¼šç»“æœï¼šè®­ç»ƒå‡ºçš„ word-level å‘é‡å˜æˆ sentence-level çš„å‘é‡ï¼Œä¸‹æ¸¸å…·ä½“ NLP ä»»åŠ¡è°ƒç”¨æ›´æ–¹ä¾¿ï¼Œä¿®æ­£äº† ELMo æ¨¡å‹çš„æ½œåœ¨é—®é¢˜ã€‚æ“ä½œï¼šä½¿ç”¨å¥å­çº§è´Ÿé‡‡æ ·è·å¾—å¥å­è¡¨ç¤º/å¥å¯¹å…³ç³»ï¼ŒTransformer æ¨¡å‹ä»£æ›¿ LSTM æå‡è¡¨è¾¾å’Œæ—¶é—´ä¸Šçš„æ•ˆç‡ï¼Œmasked LM è§£å†³ â€œè‡ªå·±çœ‹åˆ°è‡ªå·±â€ çš„é—®é¢˜ã€‚3. æ€»ä½“ç»“æ„BERTçš„ç½‘ç»œæ¶æ„ä½¿ç”¨çš„æ˜¯ã€ŠAttention is all you needã€‹ä¸­æå‡ºçš„å¤šå±‚ Transformer ç»“æ„ï¼Œå…¶æœ€å¤§çš„ç‰¹ç‚¹æ˜¯æŠ›å¼ƒäº†ä¼ ç»Ÿçš„ RNN å’Œ CNNï¼Œé€šè¿‡ Attention æœºåˆ¶å°†ä»»æ„ä½ç½®çš„ä¸¤ä¸ªå•è¯çš„è·ç¦»è½¬æ¢æˆ 1ï¼Œæœ‰æ•ˆçš„è§£å†³äº† NLP ä¸­æ£˜æ‰‹çš„é•¿æœŸä¾èµ–é—®é¢˜ã€‚è¯¦ç»†å¯å‚è€ƒæ­¤å¤„ã€‚4. å‚è€ƒæ–‡çŒ®[1] å¤§å¸ˆå…„. BERTè¯¦è§£[1] ä¸ä¼šåœçš„èœ—ç‰›. å›¾è§£ä»€ä¹ˆæ˜¯ Transformer[2] rumor. ã€NLPã€‘Transformeræ¨¡å‹åŸç†è¯¦è§£[3] _zhang_bei_. è‡ªç„¶è¯­è¨€å¤„ç†ä¸­çš„Transformerå’ŒBERT[4] Amirhossein Kazemnejad. Transformer Architecture: The Positional Encoding"
  },
  
  {
    "title": "æ·±åº¦å­¦ä¹ æ–‡ç« é˜…è¯»ï¼ˆTransformerï¼‰",
    "url": "/posts/deep-learning-Transformer/",
    "categories": "Academic, Paper",
    "tags": "deep learning",
    "date": "2020-11-12 17:04:19 +0800",
    





    
    "snippet": "æœ¬æ–‡ä¸»è¦ä»‹ç» seq2seq learning ä¸­çš„ Transformer æ¨¡å‹ï¼Œç”±è°·æ­Œæå‡ºã€‚å»ºè®®å‰åºé˜…è¯» Encoder-Decoderã€‚  1. ç®€ä»‹  2. æ€»ä½“ç»“æ„  3. Encoder          3.1. input      3.2. positional encoding      3.3. multi-head attention                 ...",
    "content": "æœ¬æ–‡ä¸»è¦ä»‹ç» seq2seq learning ä¸­çš„ Transformer æ¨¡å‹ï¼Œç”±è°·æ­Œæå‡ºã€‚å»ºè®®å‰åºé˜…è¯» Encoder-Decoderã€‚  1. ç®€ä»‹  2. æ€»ä½“ç»“æ„  3. Encoder          3.1. input      3.2. positional encoding      3.3. multi-head attention                  3.3.1. self-attention          3.3.2. scaled dot-product attention          3.3.3. multi-head attention                    3.4. æ®‹å·®è¿æ¥        4. Decoder          4.1. encoder-decoder attention      4.2. masked multi-head attention      4.3. output        è®­ç»ƒ  5. å‚è€ƒæ–‡çŒ®1. ç®€ä»‹  Ashish Vaswani, Noam Shazeer, Niki Parmar, Jakob Uszkoreit, Llion Jones, Aidan N. Gomez, Lukasz Kaiser, Illia Polosukhin. Attention Is All You Need[J]. arXiv preprint arXiv:1706.03762v5 [cs.CL], 2017.Transformer æ¥è‡ª Google å›¢é˜Ÿ 2017 å¹´çš„æ–‡ç«  ã€ŠAttenion Is All You Needã€‹ï¼ˆhttps://arxiv.org/abs/1706.03762 ï¼‰ï¼Œè¯¥æ–‡ç« çš„ç›®çš„ï¼šå‡å°‘è®¡ç®—é‡å¹¶ä¸”æé«˜å¹¶è¡Œæ•ˆç‡ï¼ŒåŒæ—¶ä¸å‡å¼±æœ€ç»ˆçš„å®éªŒæ•ˆæœã€‚Transformer åœ¨æœºå™¨ç¿»è¯‘ä»»åŠ¡ä¸Šçš„è¡¨ç°è¶…è¿‡äº† RNNã€CNNï¼Œåªç”¨ encoder-decoder å’Œ attention æœºåˆ¶å°±èƒ½è¾¾åˆ°å¾ˆå¥½çš„æ•ˆæœï¼Œæœ€å¤§çš„ä¼˜ç‚¹æ˜¯å¯ä»¥é«˜æ•ˆåœ°å¹¶è¡ŒåŒ–ã€‚è‡ª attention æœºåˆ¶æå‡ºåï¼ŒåŠ å…¥ attention çš„ seq2seq æ¨¡å‹åœ¨å„ä¸ªä»»åŠ¡ä¸Šéƒ½æœ‰äº†æå‡ï¼Œæ‰€ä»¥ç°åœ¨çš„ seq2seq æ¨¡å‹æŒ‡çš„éƒ½æ˜¯ç»“åˆ RNN å’Œ attention çš„æ¨¡å‹ã€‚ä¹‹å google åˆæå‡ºäº†è§£å†³ seq2seq é—®é¢˜çš„ Transformer æ¨¡å‹ï¼Œç”¨å…¨ attention çš„ç»“æ„ä»£æ›¿äº† LSTMï¼Œåœ¨ç¿»è¯‘ä»»åŠ¡ä¸Šå–å¾—äº†æ›´å¥½çš„æˆç»©ã€‚2. æ€»ä½“ç»“æ„æ¨¡å‹ç»“æ„å¦‚ä¸‹å›¾æ‰€ç¤ºå’Œå¤§å¤šæ•° seq2seq æ¨¡å‹ä¸€æ ·ï¼Œtransformer çš„ç»“æ„ä¹Ÿæ˜¯ç”± encoder å’Œ decoder ç»„æˆã€‚Transformer çš„ encoder ç”± 6 ä¸ªç¼–ç å™¨å åŠ ç»„æˆï¼Œdecoder ä¹Ÿç”± 6 ä¸ªè§£ç å™¨ç»„æˆï¼Œåœ¨ç»“æ„ä¸Šéƒ½æ˜¯ç›¸åŒçš„ï¼Œä½†å®ƒä»¬ä¸å…±äº«æƒé‡ã€‚å›¾ä¸­å·¦è¾¹çš„éƒ¨åˆ†å°±æ˜¯ Encoderï¼Œç”± 6 ä¸ªç›¸åŒçš„ layer ç»„æˆï¼Œlayer æŒ‡çš„å°±æ˜¯ä¸Šå›¾å·¦ä¾§çš„å•å…ƒï¼Œæœ€å·¦è¾¹æœ‰ä¸ª â€œNxâ€ï¼Œè¿™é‡Œæ˜¯ $x=6$ ä¸ªã€‚ç±»ä¼¼çš„ï¼Œé€”ä¸­å³è¾¹çš„éƒ¨åˆ†å°±æ˜¯ Decoderï¼ŒåŒæ ·ç”± 6 ä¸ªç›¸åŒçš„ layer ç»„æˆã€‚ä»é¡¶å±‚çœ‹ï¼ŒTransformer å°±æ˜¯ä¸€ä¸ª Encoder-Decoder æ¡†æ¶çš„ä¸€ç§å®ç°ã€‚åœ¨ç¼–ç ç«¯å’Œè§£ç ç«¯ï¼Œåˆ†åˆ«å †å äº† 6 ä¸ªç¼–ç å™¨ / è§£ç å™¨ã€‚6 è¿™ä¸ªæ•°å­—å¹¶æ²¡ç”±ä»€ä¹ˆç‰¹åˆ«ç†ç”±ï¼Œä¹Ÿå¯ä»¥æ¢æˆå…¶å®ƒæ•°å­—ã€‚ç¼–ç å™¨å’Œè§£ç å™¨çš„å†…éƒ¨ç»“æ„å¤§åŒå°å¼‚ï¼Œéƒ½åŒ…å«ä¸€ä¸ª Self-Attention æ¨¡å—å’Œä¸€ä¸ª Feed Forward æ¨¡å—ï¼Œä¸åŒçš„æ˜¯è§£ç å™¨éƒ¨åˆ†ä¸­é—´è¿˜å¢åŠ äº†ä¸€ä¸ª Encoder-Decoder Attention æ¨¡å—ã€‚3. Encoderä¸‹é¢å°†ç›®å…‰èšç„¦åˆ° Encoderï¼Œå®ƒç”±ä¸¤ä¸ª sub-layer ç»„æˆï¼Œåˆ†åˆ«æ˜¯  multi-head self-attention mechanism  fully connected feed-forward networkEncoder çš„æ•°æ®æµé€šè¿‡ç¨‹å¦‚ä¸‹  Input ç»è¿‡ embedding åï¼Œè¦åš positional encoding  ç„¶åæ˜¯ Multi-head attention  å†ç»è¿‡ position-wise Feed Forward  æ¯ä¸ªå­å±‚ä¹‹é—´æœ‰æ®‹å·®è¿æ¥åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å¼€å§‹çœ‹åˆ° Transformer çš„ä¸€ä¸ªå…³é”®æ€§è´¨ï¼Œå³æ¯ä¸ªä½ç½®çš„å•è¯åœ¨ encoder ä¸­éƒ½æœ‰è‡ªå·±çš„è·¯å¾„ï¼Œself-attention å±‚ä¸­çš„è¿™äº›è·¯å¾„ä¹‹é—´å­˜åœ¨ä¾èµ–å…³ç³»ï¼Œç„¶è€Œåœ¨ feed-forward å±‚ä¸å…·æœ‰é‚£äº›ä¾èµ–å…³ç³»ï¼Œè¿™æ ·å„ç§è·¯å¾„åœ¨æµè¿‡ feed-forward å±‚æ—¶å¯ä»¥å¹¶è¡Œæ‰§è¡Œã€‚å¹¶ä¸”ï¼Œè¿™é‡Œæ¯ä¸ªå•è¯å¯¹åº”çš„å‰é¦ˆç¥ç»ç½‘ç»œï¼ˆfeed-forwardï¼‰éƒ½æ˜¯ä¸€æ ·çš„ã€‚3.1. inputé¦–å…ˆä½¿ç”¨åµŒå…¥ç®—æ³•å°†è¾“å…¥çš„ wordï¼ˆ$x$ï¼‰ è½¬æ¢ä¸º embedding vectorï¼ˆ$\\hat x$ï¼‰ï¼Œè¿™ä¸ªè½¬æ¢ä»…åœ¨æœ€ä¸‹æ–¹ç¬¬ä¸€ä¸ª Encoder ä¹‹å‰å‘ç”Ÿã€‚åœ¨ NLP ä»»åŠ¡ä¸­ï¼Œå‡è®¾æ¯ä¸ªå•è¯éƒ½è½¬åŒ–ä¸º $d_{model}=512$ ç»´çš„å‘é‡ï¼Œç”¨ä¸‹å›¾ä¸­çš„ 4 ä¸ªæ¡†å¹¶æ’åœ¨ä¸€èµ·è¡¨ç¤ºã€‚å¯¹äºå…¶å®ƒ Encoder è€Œè¨€ï¼ŒåŒæ ·æ˜¯è¾“å…¥ 512 ç»´çš„å‘é‡ï¼Œåªä¸è¿‡ç¬¬ä¸€ä¸ª Encoder è¾“å…¥çš„æ˜¯è¯åµŒå…¥å‘é‡ï¼Œè€Œå…¶å®ƒ Encoder è¾“å…¥å…¶ä¸‹æ–¹ Encoder çš„è¾“å‡ºå‘é‡ã€‚åŒ…å«å„ä¸ªè¯å‘é‡çš„åˆ—è¡¨é•¿åº¦æ˜¯ä¸€ä¸ªè¶…å‚æ•°ï¼Œä¸€èˆ¬è®¾ä¸ºè®­ç»ƒæ•°æ®é›†ä¸­æœ€é•¿å¥å­çš„é•¿åº¦ã€‚3.2. positional encodingåœ¨æ•°æ®é¢„å¤„ç†çš„éƒ¨åˆ†ï¼Œç”±äº Transformer æŠ›å¼ƒäº†å·ç§¯ï¼ˆconvolutionï¼‰å’Œå¾ªç¯ï¼ˆrecurrenceï¼‰ï¼Œä¸ºäº†ä½¿å¾—æ¨¡å‹å…·å¤‡åˆ©ç”¨å¥å­åºåˆ—é¡ºåºçš„èƒ½åŠ›ï¼Œå¿…é¡»è¦åœ¨è¯å‘é‡ä¸­æ’å…¥ä¸€äº›ç›¸å¯¹æˆ–ç»å¯¹ä½ç½®ä¿¡æ¯ã€‚åœ¨RNNï¼ˆLSTMï¼ŒGRUï¼‰ä¸­ï¼Œæ—¶é—´æ­¥é•¿çš„æ¦‚å¿µæŒ‰é¡ºåºç¼–ç ï¼Œå› ä¸ºè¾“å…¥/è¾“å‡ºæµä¸€æ¬¡ä¸€ä¸ªã€‚ å¯¹äº Transformerï¼Œä½œè€…å°†æ—¶é—´ç¼–ç ä¸ºæ­£å¼¦æ³¢ï¼Œä½œä¸ºé™„åŠ çš„é¢å¤–è¾“å…¥ã€‚ è¿™æ ·çš„ä¿¡å·è¢«æ·»åŠ åˆ°è¾“å…¥å’Œè¾“å‡ºä»¥è¡¨ç¤ºæ—¶é—´çš„æµé€ã€‚ä¸‹é¢çš„è¿æ¥è¯¦ç»†é˜è¿°äº† positional encoding çš„æ•°å­¦åŸç†ã€‚  Amirhossein Kazemnejad. Transformer Architecture: The Positional EncodingPositional Encoding æ˜¯ä¸€ç§è€ƒè™‘è¾“å…¥åºåˆ—ä¸­å•è¯é¡ºåºçš„æ–¹æ³•ã€‚Encoder ä¸ºæ¯ä¸ªè¾“å…¥è¯å‘é‡æ·»åŠ äº†ä¸€ä¸ªç»´åº¦ä¸è¯å‘é‡ä¸€è‡´ï¼ˆ$d_{model}=512$ï¼‰çš„ä½ç½®å‘é‡ $PE$ï¼Œå–å€¼èŒƒå›´ä»‹äº -1 å’Œ 1 ä¹‹é—´ã€‚è¿™äº›ä½ç½®å‘é‡ç¬¦åˆä¸€ç§ç‰¹å®šæ¨¡å¼ï¼Œå¯ä»¥ç”¨æ¥ç¡®å®šæ¯ä¸ªå•è¯çš„ä½ç½®ï¼Œæˆ–è€…ç”¨æ¥æä¾›ä¿¡æ¯ä»¥è¡¡é‡åºåˆ—ä¸­ä¸åŒå•è¯ä¹‹é—´çš„è·ç¦»ã€‚ä½œè€…æå‡ºä¸¤ç§ Positional Encoding çš„æ–¹æ³•  å›ºå®šæ–¹æ³•ï¼šç”¨ä¸åŒé¢‘ç‡çš„ $sine$ å’Œ $cosine$ å‡½æ•°ç›´æ¥è®¡ç®—  å­¦ä¹ æ–¹æ³•ï¼šå­¦ä¹ å‡ºä¸€ä»½ positional embeddingç»è¿‡å®éªŒï¼ˆConvolutional Sequence to Sequence Learningï¼‰å‘ç°ä¸¤è€…çš„ç»“æœä¸€æ ·ï¼Œæ‰€ä»¥æœ€åé€‰æ‹©äº†ç¬¬ä¸€ç§æ–¹æ³•ã€‚\\[\\begin{aligned}PE_{(pos,2i)} &amp;= sin(pos / 10000^{2i/d_{model}})\\\\PE_{(pos,2i+1)} &amp;= cos(pos / 10000^{2i/d_{model}})\\end{aligned}\\]å…¶ä¸­ï¼Œ $pos$ æ˜¯è¯åœ¨å¥å­ä¸­çš„ä½ç½®ï¼›$i$ æ˜¯ä½ç½®å‘é‡çš„ç»´åº¦ã€‚æ¯ä¸ªä½ç½®å‘é‡çš„åˆ†é‡å¯¹åº”ä¸€ä¸ªæ­£å¼¦æˆ–ä½™å¼¦å‡½æ•°ã€‚  Amirhossein Kazemnejad. Transformer Architecture: The Positional Encoding  ä¸ºä»€ä¹ˆä¼šæƒ³åˆ°ç”¨æ­£å¼¦/ä½™å¼¦å‡½æ•°æ¥åˆ»ç”»ä½ç½®/é¡ºåºï¼Ÿå‡è®¾ä½ æƒ³ç”¨äºŒè¿›åˆ¶è¡¨ç¤ºä¸€ä¸ªæ•°å­—ï¼Œä¼šå¦‚ä¸‹å›¾æ‰€ç¤ºå¯ä»¥å‘ç°ä¸åŒä½ä¹‹é—´çš„å˜åŒ–ç‡ã€‚æœ€ä½æœ‰æ•ˆä½ï¼ˆLSBï¼‰åœ¨æ¯ä¸ªæ•°å­—ä¸Šäº¤æ›¿ï¼Œç¬¬äºŒä½ä½åœ¨æ¯ä¸¤ä¸ªæ•°å­—ä¸Šæ—‹è½¬ï¼Œä¾æ­¤ç±»æ¨ã€‚  ä½†æ˜¯ä½¿ç”¨äºŒè¿›åˆ¶å€¼æ¥ç¼–ç æµ®ç‚¹æ•°å¾ˆæµªè´¹ç©ºé—´ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å®ƒä»¬çš„è¿ç»­æµ®åŠ¨å¯¹è±¡-æ­£å¼¦å‡½æ•°ã€‚å®é™…ä¸Šï¼Œå®ƒä»¬ç­‰æ•ˆäºäº¤æ›¿ä½çš„æ“ä½œã€‚  æœ€ç»ˆå¯ä»¥å¾—åˆ°å¦‚ä¸‹å›¾æ‰€ç¤ºçš„ä½ç½®ç¼–ç   ä¸ºå•¥è¦åŒæ—¶ç”¨ $sin$ å’Œ $cos$ ï¼ŸAmirhossein ä¸ªäººè®¤ä¸ºï¼Œä»…é€šè¿‡åŒæ—¶ä½¿ç”¨æ­£å¼¦å’Œä½™å¼¦ï¼Œæ‰å¯ä»¥å°† $sin(x + k)$ å’Œ $cos(x + k)$ è¡¨ç¤ºä¸º$sin(x)$ å’Œ $cos(x)$ çš„çº¿æ€§å˜æ¢ã€‚ä¼¼ä¹ä¸èƒ½å¯¹å•ä¸ªæ­£å¼¦æˆ–ä½™å¼¦æ‰§è¡Œç›¸åŒçš„æ“ä½œã€‚ä¸‹é¢è¯¦ç»†åˆ†æä¸€ä¸‹ä½ç½®å‘é‡çš„æ•°å­¦å½¢å¼ã€‚ä»ç»´åº¦çš„è§’åº¦æ¥çœ‹ï¼Œ$i=0$ æ—¶ç¬¬ä¸€ä¸ªç»´åº¦ç”±æ³¢é•¿ä¸º $2\\pi$ çš„æ­£ä½™å¼¦å‡½æ•°æ„æˆã€‚ä¾æ¬¡å¾€åï¼Œç¬¬ $i$ ä¸ªç»´åº¦å¯¹åº”çš„æ­£ä½™å¼¦å‡½æ•°çš„æ³¢é•¿é€æ¸å˜é•¿ï¼ˆ$10000^{2i/d_{model}}$ï¼‰ã€‚æœ€ç»ˆæ³¢é•¿ä» $2\\pi$ åˆ° $10000\\cdot 2\\pi$ã€‚ä½œè€…é€‰æ‹©æ­£ä½™å¼¦å‡½æ•°çš„åŸå› ï¼Œæ˜¯å› ä¸ºä½œè€…è®¤ä¸ºæ­£ä½™å¼¦å‡½æ•°èƒ½å¤Ÿè®©æ¨¡å‹è½»æ¾å­¦ä¹ ç›¸å¯¹ä½ç½®çš„å‚ä¸ï¼Œå› ä¸ºå¯¹äºä»»ä½•å›ºå®šçš„åç§»é‡ $k$ï¼Œä½ç½®å‘é‡ $PE_{pos+k}$ å¯ä»¥è¡¨ç¤ºä¸º $PE_{pos}$ çš„çº¿æ€§å‡½æ•°\\[\\begin{aligned}sin(PE_{pos+k}) &amp;= sin(PE_{pos})cos(PE_k)+cos(PE_{pos})sin(PE_k)\\\\cos(PE_{pos+k}) &amp;= cos(PE_{pos})cos(PE_k)-sin(PE_{pos})sin(PE_k)\\\\\\end{aligned}\\]è¿™ç§æ–¹æ³•ç›¸æ¯”å­¦ä¹ è€Œè¨€è¿˜æœ‰ä¸€ä¸ªå¥½å¤„ï¼Œå¦‚æœé‡‡ç”¨å­¦ä¹ åˆ°çš„ positional embeddingï¼ˆä¸ªäººè®¤ä¸ºï¼Œæ²¡çœ‹è®ºæ–‡ï¼‰ä¼šåƒè¯å‘é‡ä¸€æ ·å—é™äºè¯å…¸å¤§å°ã€‚ä¹Ÿå°±æ˜¯åªèƒ½å­¦ä¹ åˆ° â€œä½ç½®2å¯¹åº”çš„å‘é‡æ˜¯ (1,1,1,2) â€ è¿™æ ·çš„è¡¨ç¤ºã€‚è€Œç”¨æ­£ä½™å¼¦å‡½æ•°æ˜æ˜¾ä¸å—åºåˆ—é•¿åº¦çš„é™åˆ¶ï¼Œä¹Ÿå°±æ˜¯å¯ä»¥åº”å¯¹æ¯”è®­ç»ƒæ—¶æ‰€ç”¨åˆ°åºåˆ—çš„æ›´é•¿çš„åºåˆ—ã€‚å½“ç„¶ï¼Œæ­£ä½™å¼¦å¹¶ä¸æ˜¯ä½ç½®ç¼–ç çš„å”¯ä¸€æ–¹æ³•ï¼Œåªæ˜¯è¿™ä¸ªæ–¹æ³•èƒ½å¤Ÿæ‰©å±•åˆ°çœ‹ä¸è§çš„åºåˆ—é•¿åº¦å¤„ï¼Œä¾‹å¦‚å½“æˆ‘ä»¬è¦ç¿»è¯‘ä¸€ä¸ªå¥å­ï¼Œè¿™ä¸ªå¥å­çš„é•¿åº¦æ¯”æˆ‘ä»¬è®­ç»ƒé›†ä¸­çš„ä»»ä½•ä¸€ä¸ªå¥å­éƒ½é•¿æ—¶ã€‚å°†ä¸Šè¿° positional embedding å¯è§†åŒ–åçš„å›¾å¦‚ä¸‹æ‰€ç¤ºï¼ˆå›¾ä¸­å‡è®¾ $d_{model}=64$ï¼Œ$l_{sequence}=10$ï¼‰æœ€åå°† encoding åçš„æ•°æ®ä¸ embedding æ•°æ®æ±‚å’Œï¼ŒåŠ å…¥ç›¸å¯¹ä½ç½®ä¿¡æ¯ã€‚æ•°å­¦ä¸Šï¼Œå°† $PE+wordvec$ ä½œä¸ºè¾“å…¥ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå‡è®¾ $wordvec$ çš„ç»´åº¦ä¸ºå››ä¸ªæ ¼å­ï¼Œé‚£ä¹ˆå®é™…çš„ positional encoding è¿‡ç¨‹å¦‚ä¸‹æ‰€ç¤º  Amirhossein Kazemnejad. Transformer Architecture: The Positional Encoding  ä¸ºä»€ä¹ˆç”¨æ±‚å’Œï¼Œè€Œä¸æ˜¯ç”¨æ‹¼æ¥ï¼Ÿå³ä½¿æ˜¯ Amirhossein ä¹Ÿæ²¡æ‰¾å‡ºèƒŒåçš„ç†è®ºä¸€å¥ï¼Œæ ¹æ®ä»–çš„æ¨æ–­ï¼Œå› ä¸ºæ±‚å’Œæ¯”æ‹¼æ¥èŠ‚çº¦æ¨¡å‹å‚æ•°ï¼Œå› æ­¤é—®é¢˜ä¹Ÿè½¬åŒ–ä¸º â€œæ±‚å’Œæœ‰ä»€ä¹ˆå¼Šç«¯ä¹ˆï¼Ÿâ€ Amirhossein è¡¨ç¤ºæ²¡å•¥å¼Šç«¯ã€‚3.3. multi-head attention3.3.1. self-attentionä¾‹å¦‚æˆ‘ä»¬è¦ç¿»è¯‘ï¼šâ€The animal didnâ€™t cross the street because it was too tiredâ€ è¿™å¥è¯ã€‚è¿™å¥è¯ä¸­çš„ â€œitâ€ æ˜¯æŒ‡ä»€ä¹ˆï¼Ÿå®ƒæŒ‡çš„æ˜¯ street è¿˜æ˜¯ animalï¼Ÿè¿™å¯¹äººç±»æ¥è¯´æ˜¯ä¸€ä¸ªç®€å•çš„é—®é¢˜ï¼Œä½†å¯¹ç®—æ³•æ¥è¯´å¹¶ä¸ç®€å•ã€‚è€Œ self-attention è®©ç®—æ³•çŸ¥é“è¿™é‡Œçš„ it æŒ‡çš„æ˜¯ animal ã€‚å½“æ¨¡å‹åœ¨å¤„ç†æ¯ä¸ªå•è¯æ—¶ï¼Œself-attention å¯ä»¥å¸®åŠ©æ¨¡å‹æŸ¥çœ‹ input åºåˆ—ä¸­çš„å…¶ä»–ä½ç½®ï¼Œå¯»æ‰¾ç›¸å…³çš„çº¿ç´¢ï¼Œæ¥è¾¾åˆ°æ›´å¥½çš„ç¼–ç æ•ˆæœã€‚å®ƒçš„ä½œç”¨å°±æ˜¯å°†å¯¹å…¶ä»–ç›¸å…³å•è¯çš„â€œunderstandingâ€èå…¥æˆ‘ä»¬å½“å‰æ­£åœ¨å¤„ç†çš„å•è¯ä¸­ã€‚RNN å¯ä»¥é€šè¿‡éšå±‚çŠ¶æ€å°†å…¶å·²å¤„ç†çš„å…ˆå‰å•è¯/å‘é‡çš„è¡¨ç¤ºä¸æ­£åœ¨å¤„ç†çš„å½“å‰å•è¯/å‘é‡ç›¸ç»“åˆï¼Œè€Œ self-attention æ˜¯ Transformer å°†å…¶ä»–ç›¸å…³å•è¯çš„ â€œç†è§£â€ èå…¥æˆ‘ä»¬å½“å‰æ­£åœ¨å¤„ç†çš„å•è¯æ‰€ä½¿ç”¨çš„æ–¹æ³•ã€‚ä¸‹å›¾å±•ç¤ºäº†åœ¨ç¬¬äº”ä¸ª Encoder ä¸­ï¼ˆæœ€é¡¶å±‚çš„ Encoderï¼‰ å°†å¤§éƒ¨åˆ†æ³¨æ„åŠ›æ”¾åœ¨äº† â€œanimalâ€ ä¸”å°†å…¶è¡¨è¾¾èå…¥äº†å¯¹ â€œitâ€ çš„ç¼–ç ã€‚ä¸Šå›¾ä¸Šæ–¹çš„å…«ä¸ªä¸åŒé¢œè‰²çš„æ–¹å—è¡¨ç¤ºä¸åŒçš„ attention headï¼Œåæ–‡ä¼šè®²è§£ã€‚è¿™é‡Œä»¥ç¬¬äºŒä¸ªï¼ˆæ©™è‰²ï¼‰attention head ä¸ºä¾‹å±•ç¤ºäº†å…¶æ³¨æ„åŠ›çš„åˆ†å¸ƒã€‚  è¿™æ˜¯ä¸€ç§åŒå‘æ³¨æ„ï¼ˆä¹Ÿæ˜¯å”¯ä¸€ä¸€ç§åŒå‘æ³¨æ„åŠ›æœºåˆ¶ï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆå®ƒæ˜¯BERTä¸­ä½¿ç”¨çš„å”¯ä¸€æ³¨æ„åŠ›ç±»å‹ï¼‰ï¼Œå…¶ä¸­æ¯ä¸ªå•è¯éƒ½å½¼æ­¤å…³è”ã€‚ å®ƒç¡®å®æ•è·äº†ä¸€ä¸ªå¥å­ä¸­çš„åŒä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œç”šè‡³bi-LSTMä¹Ÿæ— æ³•æ•è·ï¼ˆå› ä¸ºbi-LSTMå°†Forward ARå’ŒBackward ARçš„ç»“æœç»“åˆåœ¨ä¸€èµ·ï¼Œè€Œä¸æ˜¯åœ¨å…¶æ ¸å¿ƒç”ŸæˆåŒä¸Šä¸‹æ–‡ä¿¡æ¯ã€‚ è¿™ä¹Ÿæ˜¯ä»æœ¬è´¨ä¸Šæœ‰äº›äººè®¤ä¸ºELMoåµŒå…¥ä¸æ˜¯çœŸæ­£çš„åŒå‘çš„åŸå› ï¼‰3.3.2. scaled dot-product attentioné¦–å…ˆç”¨å‘é‡æ¥æè¿°å¦‚ä½•å®ç° self-attentionã€‚è¿™é‡Œé‡‡ç”¨ scaled dot-product attention æ¥è®¡ç®— self-attentionã€‚  ç¬¬ä¸€æ­¥ï¼Œæ ¹æ®æ¯ä¸€ä¸ªè¾“å…¥çš„ word embedding ï¼ˆ$X \\in \\mathbb R^{d_{model}}$ï¼‰ ç”Ÿæˆä¸‰ä¸ªå‘é‡ï¼šQuery vectorï¼ˆ$Q\\in \\mathbb R^{d_k}$ï¼‰, Key vectorï¼ˆ$K\\in \\mathbb R^{d_k}$ï¼‰, Value vectorï¼ˆ$V\\in \\mathbb R^{d_v}$ï¼‰ã€‚è¿™ä¸‰ä¸ªå‘é‡æ˜¯ç”± word embedding åˆ†åˆ«ä¹˜ä»¥ä¸‰ä¸ªçŸ©é˜µå¾—åˆ°çš„ã€‚è¿™ä¸‰ä¸ªæƒé‡çŸ©é˜µï¼ˆ$W^Q \\in \\mathbb R^{d_{model}\\times d_k},W^K \\in \\mathbb R^{d_{model}\\times d_k},W^V \\in \\mathbb R^{d_{model}\\times d_v}$ï¼‰æ˜¯éœ€è¦åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­è¿›è¡Œè®­ç»ƒçš„ã€‚æ³¨æ„æ–°ç”Ÿæˆçš„ä¸‰ä¸ªå‘é‡çš„ç»´åº¦ï¼ˆ$d_k=64$ï¼‰å°äº word embedding çš„ç»´åº¦ï¼ˆ$d_{model}=512$ï¼‰ã€‚ç„¶è€Œï¼Œå®ƒä»¬çš„ç»´åº¦ä¸å¿…ä¸€å®šè¦æ›´å°ï¼Œåœ¨è¿™é‡Œæ˜¯ä½œè€…åšå‡ºçš„ä¸€ç§æ¶æ„é€‰æ‹©ï¼Œä½¿å¾—åé¢è®¡ç®— multi-head attention æ—¶åœ¨ç»å¤§å¤šæ•°æƒ…å†µä¸‹æ›´ç¨³å®šã€‚ä¸ºä»€ä¹ˆè¦äº§ç”Ÿè¿™ä¸‰ä¸ªå‘é‡å‘¢ï¼Ÿå› ä¸ºå®ƒä»¬æ˜¯è®¡ç®—å’Œè€ƒè™‘æ³¨æ„åŠ›çš„ä¸€ç§æœ‰ç”¨çš„æŠ½è±¡ã€‚ç»§ç»­å¾€ä¸‹é˜…è¯»ï¼Œçœ‹åˆ°æ³¨æ„åŠ›å¦‚ä½•è®¡ç®—æ—¶ï¼Œå°±ä¼šå‘ç°è¿™äº›å‘é‡çš„ä½œç”¨ã€‚  æŸ¥è¯¢ï¼Œé”®å’Œå€¼çš„æ¦‚å¿µæ¥è‡ªæ£€ç´¢ç³»ç»Ÿã€‚ä¾‹å¦‚ï¼Œå½“æ‚¨é”®å…¥æŸ¥è¯¢ä»¥åœ¨YouTubeä¸Šæœç´¢æŸäº›è§†é¢‘æ—¶ï¼Œæœç´¢å¼•æ“å°†é’ˆå¯¹æ•°æ®åº“ä¸­ä¸å€™é€‰è§†é¢‘ç›¸å…³çš„ä¸€ç»„é”®ï¼ˆè§†é¢‘æ ‡é¢˜ï¼Œè¯´æ˜ç­‰ï¼‰æ˜ å°„æ‚¨çš„æŸ¥è¯¢ï¼Œç„¶åå‘æ‚¨æ˜¾ç¤ºæœ€åŒ¹é…çš„è§†é¢‘ï¼ˆå€¼ï¼‰ã€‚  ç¬¬äºŒæ­¥ï¼Œè®¡ç®—ä¸€ä¸ªå¾—åˆ†ã€‚å¦‚æœè¦è®¡ç®—ç¬¬ä¸€ä¸ªè¯çš„ â€œThinkingâ€ çš„ self-attentionï¼Œæˆ‘ä»¬éœ€è¦åœ¨è¾“å…¥å¥å­çš„æ¯ä¸ªå•è¯ä¸Šå¯¹è¿™ä¸ªå•è¯æ‰“åˆ†ã€‚è¿™ä¸ªåˆ†æ•°å†³å®šäº†å½“æˆ‘ä»¬åœ¨æŸä¸ªä½ç½®ç¼–ç ä¸€ä¸ªå•è¯æ—¶ï¼Œå¯¹è¾“å…¥å¥å­å…¶ä»–éƒ¨åˆ†çš„å…³æ³¨ç¨‹åº¦ï¼ˆä¹Ÿå³å¥å­å…¶å®ƒéƒ¨åˆ†å¯¹è¯¥è¯çš„å½±å“ï¼‰ã€‚é‡‡ç”¨ç‚¹ä¹˜ $Q$ å’Œ $K$ çš„æ–¹å¼äº§ç”Ÿå¯¹åº”å•è¯çš„åˆ†æ•°ï¼Œå› æ­¤åˆ†æ•°æ˜¯ä¸ªæ ‡é‡ã€‚æ¯”å¦‚å¦‚æœæˆ‘ä»¬è€ƒè™‘ â€œThinkingâ€ å¯¹ç¬¬ä¸€ä¸ªä½ç½®ï¼ˆè‡ªèº«ï¼‰çš„ self-attentionï¼Œé‚£ä¹ˆå°±è®¡ç®— $q_1\\cdot k_1$ï¼Œè€ƒè™‘ç¬¬äºŒä¸ªè¯å¯¹ â€œThinkingâ€ çš„ self-attention åˆ™è®¡ç®— $q_1\\cdot k_2$ã€‚  æ¯å½“éœ€è¦æŸ¥æ‰¾ä¸¤ä¸ªå‘é‡ï¼ˆæŸ¥è¯¢ $Q$ å’Œé”® $K$ï¼‰ä¹‹é—´çš„ç›¸ä¼¼æ€§æ—¶ï¼Œæˆ‘ä»¬åªéœ€è·å–å®ƒä»¬çš„ç‚¹ç§¯å³å¯ã€‚ä¸ºäº†æ‰¾åˆ°ç¬¬ä¸€ä¸ªå•è¯çš„ç›¸ä¼¼æ€§è¾“å‡ºï¼Œæˆ‘ä»¬åªè€ƒè™‘ç¬¬ä¸€ä¸ªå•è¯çš„è¡¨ç¤ºå½¢å¼ $Q_i$ï¼Œå¹¶å°†å…¶ä¸è¾“å…¥ä¸­æ¯ä¸ªå•è¯çš„è¡¨ç¤ºå½¢å¼ $K_j$ å–ç‚¹ç§¯ã€‚è¿™æ ·ï¼Œæˆ‘ä»¬å°±å¯ä»¥çŸ¥é“è¾“å…¥ä¸­æ¯ä¸ªå•è¯ç›¸å¯¹äºç¬¬ä¸€ä¸ªå•è¯çš„å…³ç³»ã€‚      ç¬¬ä¸‰æ­¥ï¼Œå°†åˆ†æ•°é™¤ä»¥ 8 ï¼ˆKey vector é•¿åº¦ 64 çš„å¹³æ–¹æ ¹ï¼Œå¯ä»¥ä½¿å¾—æ¢¯åº¦è®¡ç®—æ›´ç¨³å®šï¼Œå½“ç„¶ä¹Ÿå¯ä»¥ç”¨å…¶å®ƒæ•°å­—ï¼Œä½†æ˜¯é»˜è®¤ç”¨å¹³æ–¹æ ¹ï¼‰ã€‚æ³¨æ„ï¼Œæ ‡å‡†çš„ dot-product attention æ²¡æœ‰è¿™ä¸€æ­¥ï¼Œä½œè€…åŠ äº†è¿™ä¸€æ­¥åå› æ­¤ç§°ä¸º scaled dot-product attention ã€‚        ç¬¬å››æ­¥ï¼Œå°†ç®—å¾—çš„åˆ†æ•°ä¼ å…¥ softmaxï¼Œå°†å…¶å½’ä¸€åŒ–ä¸ºå’Œä¸º 1 çš„æ­£æ•°ã€‚å½’ä¸€åŒ–åçš„åˆ†æ•°ä»£è¡¨å¥å­ä¸­çš„æ¯ä¸€ä¸ªè¯å¯¹å½“å‰æŸä¸ªä½ç½®çš„è¡¨è¾¾é‡ã€‚å¾ˆæ˜æ˜¾ï¼Œå½“å‰ä½ç½®æ‰€åœ¨çš„è¯çš„å½’ä¸€åŒ–åˆ†æ•°è‚¯å®šæœ€é«˜ï¼Œä½†æœ‰æ—¶å€™æ³¨æ„ä¸å½“å‰è¯ç›¸å…³çš„å¦ä¸€ä¸ªè¯æ˜¯æœ‰ç”¨çš„ã€‚    å¾—åˆ°ç›¸ä¼¼æ€§åï¼Œé‡‡ç”¨ softmax å½’ä¸€åŒ–ï¼Œå¾—åˆ°æ¯ä¸ªå•è¯ç›¸å¯¹ç¬¬ä¸€ä¸ªå•è¯çš„ï¼ˆé‡è¦æ€§/æ³¨æ„åŠ›ï¼‰æƒé‡ã€‚      ç¬¬äº”æ­¥ï¼Œå°† value vector ï¼ˆ$V$ï¼‰ä¸å‰é¢è®¡ç®—å¾—åˆ°çš„å½’ä¸€åŒ–åˆ†æ•°æŒ‰ä½ç›¸ä¹˜ï¼ˆä¸ºæ±‚å’Œåšå‡†å¤‡ï¼‰ã€‚è¿™é‡Œçš„ç›´è§‰æ˜¯ï¼Œä¿ç•™å…³æ³¨è¯çš„ value å€¼ï¼Œå‰Šå¼±éç›¸å…³è¯çš„ value å€¼ï¼ˆä¾‹å¦‚ï¼Œé€šè¿‡å°†å®ƒä»¬ä¹˜ä»¥åƒ 0.001 è¿™æ ·çš„å°æ•°å­—ï¼‰ã€‚    ç¬¬å…­æ­¥ï¼Œå¯¹æ‰€æœ‰åŠ æƒåçš„ value vectors ï¼ˆ$V$ï¼‰æ±‚å’Œï¼Œå¾—åˆ°å½“å‰ä½ç½®ï¼ˆå›¾ä¾‹å¯¹ç¬¬ä¸€ä¸ªè¯ï¼‰çš„ self-attention è¾“å‡ºã€‚  å°†æƒé‡ï¼ˆsoftmaxï¼‰ä¸ç›¸åº”çš„è¡¨ç¤º $V$ ç›¸ä¹˜ï¼Œç„¶åå°†å®ƒä»¬åŠ èµ·æ¥ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¯¹ç¬¬ä¸€ä¸ªå•è¯çš„æœ€ç»ˆè¡¨ç¤º $Z_i$ å°†æ˜¯æ‰€æœ‰è¾“å…¥å•è¯çš„ $V$ çš„åŠ æƒæ€»å’Œï¼Œæ¯ä¸ªè¾“å…¥å•è¯å‡é€šè¿‡ç›¸å¯¹äºç¬¬ä¸€ä¸ªå•è¯çš„ç›¸ä¼¼æ€§ï¼ˆé‡è¦æ€§ï¼‰åŠ æƒã€‚ä»æ•°å­¦å…¬å¼çš„è§’åº¦æ¥çœ‹ï¼Œå¯¹äºæŸä¸ªå…·ä½“ä½ç½®çš„è¯ï¼Œé¦–å…ˆæ¯”è¾ƒå…¶ $Q$ å’Œæ¯ä¸ªä½ç½® $i$ çš„è¯çš„ $K$ çš„ç›¸ä¼¼åº¦ï¼Œç›¸ä¼¼åº¦å‡½æ•°è®¾ä¸º $f$ é‚£ä¹ˆæœ‰\\[f(Q,K_i),\\ i=1,2,...\\]å…·ä½“çš„ç›¸ä¼¼åº¦å‡½æ•°åŒ…æ‹¬ä»¥ä¸‹å››ç§  ç‚¹ä¹˜ï¼š$f(Q,K_i) = QK_i^T / \\sqrt{d_k}$  æƒé‡ï¼š$f(Q,K_i) = QWK_i^T / \\sqrt{d_k}$ç„¶åé€šè¿‡ $softmax$ æ¥è®¡ç®—æƒé‡\\[\\omega_i = softmax(f(Q,K_i)) = \\frac{e^{f(Q,K_i)}}{\\sum_{i=1}^m e^{f(Q,K_i)}},\\ i=1,2,...\\]åœ¨å®é™…çš„å®ç°ä¸­ï¼Œæ­¤è®¡ç®—ä»¥çŸ©é˜µå½¢å¼è¿›è¡Œï¼Œä»¥åŠ å¿«å¤„ç†é€Ÿåº¦ã€‚ä½œè€…å°†æ•´ä¸ªå¥å­çš„æ‰€æœ‰è¯åºåˆ—æ‰“åŒ…æˆä¸€ä¸ªçŸ©é˜µ $Q$ï¼Œkeys å’Œ values ç±»ä¼¼æ‰“åŒ…æˆçŸ©é˜µ $K, V$ã€‚ä¸ä¸Šé¢çš„å‘é‡å½¢å¼ç±»ä¼¼ï¼ŒçŸ©é˜µå½¢å¼çš„ attention è®¡ç®—ç»“æœè¾“å‡ºä¸º\\[Attention(Q,K,V) = \\omega_iV,\\ i=1,2,...\\]å…¶ä¸­ç„¶åæŒ‰è¡Œæ±‚ softmaxï¼Œæ¯è¡Œå’Œä¸º 1å¾—åˆ° softmax çŸ©é˜µä¹‹åå¯ä»¥å’Œ $V$ ç›¸ä¹˜ï¼Œå¾—åˆ°æœ€ç»ˆçš„è¾“å‡º $Z$ä¸Šå›¾ä¸­ softmax çŸ©é˜µçš„ç¬¬ 1 è¡Œè¡¨ç¤ºå•è¯ 1 ä¸å…¶ä»–æ‰€æœ‰å•è¯çš„ attention ç³»æ•°ï¼Œæœ€ç»ˆå•è¯ 1 çš„è¾“å‡º $Z_1$ ç­‰äºæ‰€æœ‰å•è¯ $i$ çš„å€¼ $V_i$ æ ¹æ® attention ç³»æ•°çš„æ¯”ä¾‹åŠ åœ¨ä¸€èµ·å¾—åˆ°ã€‚æœ€ç»ˆå¾—åˆ°çš„ $Z \\in \\mathbb R^{l_{seq}\\times d_v}$ æ˜¯è¯¥å¥å­ä¸­æ‰€æœ‰å•è¯å¯¹å½“å‰è¯¥å•è¯çš„å€¼ $V$ çš„åŠ æƒå’Œç¼–ç ï¼ŒåŒ…å«äº†æ¯ä¸ªå•è¯å¯¹å…¶çš„é‡è¦æ€§ï¼ˆæ³¨æ„åŠ›ï¼‰ã€‚å°†å…¶ä¸ RNN æˆ– LSTM è¿›è¡Œæ¯”è¾ƒï¼š  RNN æˆ–è€… LSTM çš„éšå˜é‡åªåŒ…å«å¥å­å‰åŠéƒ¨åˆ†çš„å†å²ä¿¡æ¯ï¼Œä¸”æ—¶é—´ç‰‡ $t$ çš„è®¡ç®—ä¾èµ– $t-1$ æ—¶åˆ»çš„è®¡ç®—ç»“æœï¼Œè¿™æ ·é™åˆ¶äº†æ¨¡å‹çš„å¹¶è¡Œèƒ½åŠ›ï¼›  LSTM åªèƒ½ç¼“è§£è€Œæ— æ³•å½»åº•è§£å†³é•¿æœŸä¾èµ–ï¼›  BiLSTM åœ¨æ•æ‰ä¸Šä¸‹æ–‡ä¿¡æ¯æ—¶ï¼Œåªæ˜¯ç®€å•çš„å°†å‰å‘çš„LSTMå’Œåå‘çš„LSTMè¿›è¡Œæ‹¼æ¥ï¼Œæ²¡æœ‰å¾ˆå¥½çš„èåˆä¸Šä¸‹æ–‡çš„ä¿¡æ¯ï¼›ï¼ˆå³ä½¿æ˜¯BiLSTM åŒå‘æ¨¡å‹ï¼Œä¹Ÿåªæ˜¯åœ¨ loss å¤„åšä¸€ä¸ªç®€å•çš„ç›¸åŠ ï¼Œä¹Ÿå°±æ˜¯è¯´å®ƒæ˜¯æŒ‰é¡ºåºåšæ¨ç†çš„ï¼Œæ²¡åŠæ³•è€ƒè™‘å¦ä¸€ä¸ªæ–¹å‘çš„æ•°æ®ï¼‰æ•´ä¸ª self-attention çš„è®¡ç®—æµç¨‹å›¾å¦‚ä¸‹å›¾æ‰€ç¤ºé™¤äº† scaled dot-product attention å¤–ï¼Œä½œè€…è¿˜æåˆ°ä¸€ç§è®¡ç®— self-attention çš„æ–¹å¼ï¼Œå³ additive attentionã€‚è¯¥æ–¹å¼ç”¨ä¸€ä¸ªå•éšå±‚çš„å‰é¦ˆç¥ç»ç½‘ç»œæ¥è®¡ç®—é€‚åº”åº¦å‡½æ•°ï¼Œä¸ scaled dot-product attention ç›¸æ¯”å…·æœ‰ç›¸è¿‘çš„è®¡ç®—å¤æ‚åº¦ï¼Œä½†æ›´æ…¢ä¸”ç¨³å®šæ€§æ›´å·®ï¼ˆå› ä¸º dot-product å¯ä»¥éƒ¨ç½²ä¸ºé«˜åº¦ä¼˜åŒ–çš„çŸ©é˜µä¹˜æ³•ä»£ç ï¼‰ã€‚3.3.3. multi-head attentionself-attention æ˜¯å•å¤´çš„ï¼Œå•å¤´æ³¨æ„åŠ›èƒ½å¤Ÿå°†æ³¨æ„åŠ›é›†ä¸­åœ¨ç‰¹å®šçš„ä¸€ç»„å•è¯ä¸Šã€‚å¦‚æœæˆ‘ä»¬æƒ³æ‹¥æœ‰å¤šä¸ªé›†åˆï¼Œæ¯ä¸ªé›†åˆå¯¹ä¸åŒçš„å•è¯é›†åˆç»™äºˆä¸åŒçš„å…³æ³¨å‘¢ï¼Ÿè™½ç„¶åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œ$Z$ åŒ…å«äº†ä¸€ç‚¹ç‚¹å…¶ä»–ä½ç½®çš„ç¼–ç ï¼Œä½†å½“å‰ä½ç½®çš„å•è¯è¿˜æ˜¯å ä¸»è¦ä½œç”¨ã€‚å½“æˆ‘ä»¬æƒ³çŸ¥é“ â€œThe animal didnâ€™t cross the street because it was too tiredâ€ ä¸­ it çš„å«ä¹‰æ—¶ï¼Œè¿™æ—¶å°±éœ€è¦å…³æ³¨åˆ°å…¶ä»–ä½ç½®ã€‚è¿™ä¸ªæœºåˆ¶ä¸ºæ³¨æ„å±‚æä¾›äº†å¤šä¸ª â€œè¡¨ç¤ºå­ç©ºé—´â€ã€‚é™¤äº†ä½¿ç”¨å‚æ•°ä¸º $d_{model}$ è¡Œ $d_{k}=d_{v}=d_{model}/h=64$ åˆ—çš„ $Q,K,V$ å‘é‡å¤–ï¼Œä½œè€…è¿˜å¢åŠ äº†ä¸€ä¸ª multi-headed æœºåˆ¶ï¼Œå¯ä»¥æå‡æ³¨æ„åŠ›å±‚çš„æ€§èƒ½ã€‚å®ƒä½¿å¾—æ¨¡å‹å¯ä»¥å…³æ³¨ä¸åŒä½ç½®ã€‚å…¶ä¸­ $h=8$ ä¸ºå¤šå¤´çš„å¤´æ•°ã€‚ç»è¿‡ multi-headed ï¼Œæˆ‘ä»¬ä¼šå¾—åˆ°å’Œ heads æ•°ç›®ä¸€æ ·å¤šçš„ Query / Key / Value æƒé‡çŸ©é˜µç»„ï¼ˆ$W_i^Q,W_i^K,W_i^V$ï¼‰ã€‚è®ºæ–‡ä¸­ç”¨äº† 8 ä¸ªï¼Œé‚£ä¹ˆæ¯ä¸ªencoder/decoder æˆ‘ä»¬éƒ½ä¼šå¾—åˆ° 8 ä¸ªé›†åˆã€‚è¿™äº›é›†åˆéƒ½æ˜¯éšæœºåˆå§‹åŒ–çš„ï¼Œç»è¿‡è®­ç»ƒä¹‹åï¼Œæ¯ä¸ªé›†åˆä¼šå°† input embeddings æŠ•å½±åˆ°ä¸åŒçš„è¡¨ç¤ºå­ç©ºé—´ä¸­ã€‚\\[\\begin{aligned}MultiHead(Q,K,V) = Concat(head_1,...,head_h)W^O\\\\where\\ head_i = Attention(QW^Q_i,KW^K_i,VW^V_i)\\end{aligned}\\]å…¶ä¸­ï¼Œ$W^Q_i,W^K_i \\in \\mathbb R^{d_{model}\\times d_k}$ï¼Œ$W^V_i \\in \\mathbb R^{d_{model}\\times d_v}$ï¼Œ$W^O\\in \\mathbb R^{hd_v\\times d_{model}}$ã€‚ä½œè€…ä½¿ç”¨ $h=8$ å¯ä»¥é™ä½æ¯ä¸ªå¤´çš„æƒé‡çŸ©é˜µç»´åº¦ï¼Œè¿™æ ·åœ¨ç±»ä¼¼äºå•å¤´æ³¨æ„åŠ›è®¡ç®—ä»£ä»·ï¼ˆ$d_{model}=512$ï¼‰çš„å‰æä¸‹å¾—ä»¥ä½¿ç”¨å¤šå¤´æ³¨æ„åŠ›ã€‚ç®€å•æ¥è¯´ï¼Œå°±æ˜¯éšæœºåˆå§‹åŒ–å®šä¹‰ $h=8$ ç»„æƒé‡çŸ©é˜µï¼Œæ¯ä¸ªå•è¯ä¼šåš 8 æ¬¡ä¸Šé¢çš„ self-attention çš„è®¡ç®—ï¼Œè¿™æ ·æ¯ä¸ªå•è¯ä¼šå¾—åˆ° 8 ä¸ªä¸åŒçš„åŠ æƒæ±‚å’Œ $z_i,\\ i=0,1,â€¦,7$ ã€‚ä¸ºäº†å’Œåç»­å‰é¦ˆå±‚å¯¹æ¥ï¼ˆå®ƒéœ€è¦ä¸€ä¸ªçŸ©é˜µï¼Œæ¯ä¸ªè¡Œå‘é‡ä»£è¡¨ä¸€ä¸ªè¯ï¼Œè€Œä¸æ˜¯å…«ä¸ªçŸ©é˜µï¼‰ï¼Œä½œè€…å°†å¾—åˆ°çš„ 8 ä¸ªçŸ©é˜µè¿›è¡Œæ‹¼æ¥ï¼Œç„¶åä¹˜ä»¥ä¸€ä¸ªé™„åŠ æƒé‡çŸ©é˜µ $W^O$ï¼Œä»è€Œå°†å…¶å‹ç¼©åˆ°ä¸€ä¸ª $Z$ çŸ©é˜µã€‚å¯ä»¥çœ‹åˆ°ï¼Œæ­£å¦‚ä¸Šæ–‡æ‰€è¯´ï¼Œmulti-head attention é€šè¿‡æœ€ç»ˆçš„å‘é‡æ‹¼æ¥å°†è¾“å‡º $Z$ é‡æ–°æ¢å¤åˆ°äº†ä¸è¾“å…¥ $X$ ç›¸åŒçš„ç»´åº¦ï¼Œ$X,Z \\in \\mathbb R^{l_{seq}\\times d_{model}}$ã€‚æœ€ç»ˆçš„å®Œæ•´æµç¨‹å¦‚ä¸‹å›¾æ‰€ç¤ºå°†æ‰€æœ‰ 8 ä¸ª attention heads çš„ç»“æœæ”¾åˆ°ä¸€å¼ å›¾ä¸­å±•ç¤ºï¼Œå¦‚ä¸‹æ•´ä¸ª multi-headed attention çš„æµç¨‹å›¾å¦‚ä¸‹å›¾æ‰€ç¤º3.4. æ®‹å·®è¿æ¥å®é™…ä¸Šï¼Œå¯¹äº encoder ä¸­çš„ä¸¤ä¸ªæ¨¡å—ï¼ˆself-attention å’Œ feed-forwardï¼‰ï¼Œå‡åŒ…å«ä¸€ä¸ªæ®‹å·®è¿æ¥ã€‚æ®‹å·®é€šè¿‡ä¸€ä¸ª Add-Normalize å±‚ä¸æ­£å¸¸è¾“å‡ºè¿›è¡Œè®¡ç®—ã€‚å°† self-attention æ¨¡å—åé¢çš„ add-norm å±‚å±•å¼€æ¥çœ‹ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤º  å¤§å¸ˆå…„. æ¨¡å‹ä¼˜åŒ–ä¹‹Layer NormalizationBatch Normalization (BN) å¹¶ä¸é€‚ç”¨äºRNNç­‰åŠ¨æ€ç½‘ç»œå’Œbatchsizeè¾ƒå°çš„æ—¶å€™æ•ˆæœä¸å¥½ã€‚Layer Normalizationï¼ˆLNï¼‰çš„æå‡ºæœ‰æ•ˆçš„è§£å†³BNçš„è¿™ä¸¤ä¸ªé—®é¢˜ã€‚LNå’ŒBNä¸åŒç‚¹æ˜¯å½’ä¸€åŒ–çš„ç»´åº¦æ˜¯äº’ç›¸å‚ç›´çš„ï¼Œå¦‚å›¾1æ‰€ç¤ºã€‚åœ¨å›¾1ä¸­ $N$ è¡¨ç¤ºæ ·æœ¬è½´ï¼Œ$C$ è¡¨ç¤ºé€šé“è½´ï¼Œ$F$ æ˜¯æ¯ä¸ªé€šé“çš„ç‰¹å¾æ•°é‡ã€‚BN å¦‚å³ä¾§æ‰€ç¤ºï¼Œå®ƒæ˜¯å–ä¸åŒæ ·æœ¬çš„åŒä¸€ä¸ªé€šé“çš„ç‰¹å¾åšå½’ä¸€åŒ–ï¼›LN åˆ™æ˜¯å¦‚å·¦ä¾§æ‰€ç¤ºï¼Œå®ƒå–çš„æ˜¯åŒä¸€ä¸ªæ ·æœ¬çš„ä¸åŒé€šé“åšå½’ä¸€åŒ–ã€‚  æ®‹å·®è¿æ¥åœ¨ decoder ä¸­åŒæ ·å­˜åœ¨ã€‚å‡è®¾ä¸€ä¸ª 2 å±‚å †å çš„ transformerï¼Œå¦‚ä¸‹å›¾æ‰€ç¤º4. Decoderdecoder ç›¸æ¯” encoder é‡‡ç”¨çš„æ˜¯ masked multi-head attentionï¼Œå¤šäº†ä¸€ä¸ª encoder-decoder attentionï¼Œæœ€åè¿˜è¦ç»è¿‡ä¸€ä¸ª linear å’Œ softmax è¾“å‡ºæ¦‚ç‡ã€‚4.1. encoder-decoder attentionè¾“å…¥åºåˆ—ç»è¿‡ encoder å¾—åˆ°è¾“å‡º $Z$ã€‚åŒæ—¶æ³¨æ„åˆ°ï¼Œæœ€ä¸Šå±‚çš„ encoder çš„è¾“å‡ºè¿˜åŒ…æ‹¬ 8 ç»„ attention æƒé‡çŸ©é˜µ $K_{encdec}$ å’Œ $V_{encdec}$ï¼Œè¿™äº›çŸ©é˜µä¼šç”¨äºæ¯ä¸ª decoder çš„ encoder-decoder attention å±‚ï¼Œå¸®åŠ©è§£ç å™¨èšç„¦åœ¨è¾“å…¥åºåˆ—ä¸­åˆé€‚çš„ä½ç½®ã€‚æ³¨æ„ $K,V$ çŸ©é˜µæœ‰ 8 ç»„ï¼Œå®ƒä»¬ç›´æ¥å…¨éƒ¨ç”¨äº encoder-decoder attention ä¸­ï¼Œå› ä¸ºå…¶ä¹Ÿæ˜¯ä¸€ä¸ª multi-headedã€‚é‡å¤è¿™ä¸ªè¿‡ç¨‹ï¼Œç›´åˆ° decoder å®Œæˆäº†è¾“å‡ºï¼Œæ¯ä¸ªæ—¶é—´æ­¥çš„è¾“å‡ºéƒ½åœ¨ä¸‹ä¸€ä¸ªæ—¶é—´æ­¥æ—¶å–‚å…¥ç»™æœ€åº•éƒ¨çš„ decoderï¼ŒåŒæ ·ï¼Œåœ¨è¿™äº› decoder çš„è¾“å…¥ä¸­ä¹ŸåŠ å…¥äº†ä½ç½®ç¼–ç ï¼Œæ¥è¡¨ç¤ºæ¯ä¸ªå­—çš„ä½ç½®ã€‚Encoder-Decoder Attention å±‚çš„å·¥ä½œæ–¹å¼ä¸ multiheaded self-attention ç±»ä¼¼ï¼Œåªæ˜¯å®ƒç”¨ä¸‹é¢çš„å±‚åˆ›å»ºå…¶ Queries çŸ©é˜µï¼Œä»ç¼–ç å™¨æ ˆçš„è¾“å‡ºä¸­è·å– Keys å’Œ Values çŸ©é˜µã€‚4.2. masked multi-head attentionmask attention æ˜¯ decoder çš„ self-attention å±‚ä½¿ç”¨çš„ï¼Œä¹Ÿæ˜¯ decoder å’Œ encoder çš„ self-attention å±‚å”¯ä¸€ä¸åŒçš„åœ°æ–¹ã€‚ä½œè€…ä¸ºäº†ä¿æŠ¤ decoder çš„ auto-regressive å±æ€§ï¼Œéœ€è¦é€šè¿‡ mask çš„æ–¹å¼æ¥é˜»æ­¢ decoder ä¸­å·¦å‘çš„ä¿¡æ¯æµã€‚æˆ‘ä»¬çŸ¥é“ auto-regressive çš„åŸºæœ¬æ€æƒ³æ˜¯ä¸‹ä¸€ä¸ªè§‚æµ‹å€¼çº¦ç­‰äºå‰ m ä¸ªè§‚æµ‹å€¼çš„æŸç§çº¿æ€§åŠ æƒå’Œã€‚æ‰€ä»¥å n ä¸ªå€¼ï¼ˆè¿™é‡Œå¯¹åº”ä¸Šé¢æåˆ°çš„å·¦å‘ä¿¡æ¯æµï¼‰æ˜¯æ²¡æœ‰æ„ä¹‰çš„ï¼Œæ‰€ä»¥ä½œè€…é€šè¿‡ mask çš„æ–¹å¼ï¼Œå°†å n ä¸ªå€¼ï¼Œä¹Ÿå°±æ˜¯ decoder ä¸­self-attention å±‚çš„ scaled dot-product é˜¶æ®µçš„å½“å‰å¤„ç†è¯çš„åé¢ä½ç½®çš„è¯çš„ scaled dot-product ç»“æœéƒ½è®¾ç½®æˆè´Ÿæ— ç©·ã€‚encoder: You are a great man!decoder:         ä½  â–¡ â–¡ â–¡ â–¡           ä½ æ˜¯ â–¡ â–¡ â–¡         ä½ æ˜¯ä¸ª â–¡ â–¡         ä½ æ˜¯ä¸ªç‰› â–¡         ä½ æ˜¯ä¸ªç‰›äººå…·ä½“è€Œè¨€ï¼Œåœ¨è§£ç å™¨ä¸­ self attention çš„ softmax æ­¥éª¤ä¹‹å‰ï¼Œéœ€è¦å°†æœªæ¥çš„ä½ç½®è®¾ç½®ä¸º -inf æ¥å±è”½è¿™äº›ä½ç½®ï¼Œè¿™æ ·åšæ˜¯ä¸ºäº† self attention å±‚åªèƒ½å…³æ³¨è¾“å‡ºåºåˆ—ä¸­é å‰çš„ä¸€äº›ä½ç½®ï¼Œç›¸å½“äºè§£ç æ—¶ä¸è®©å…¶çŸ¥é“å½“å‰è¯ä¹‹åçš„è¯ã€‚è¿™æ ·ï¼Œ-inf ç»è¿‡ softmax ä¹‹åå°±ä¼šè¢«ç½®ä¸º 0ï¼Œä»è€Œä¿è¯ä»…å½“å‰è¯åŠå‰é¢çš„è¯å‘é‡çš„æ¦‚ç‡å’Œä¸º 1ã€‚æ³¨æ„ä¸‹å›¾ä¸­ ã€Mask(opt.)ã€‘ç¯èŠ‚ã€‚4.3. outputè§£ç å™¨æœ€åè¾“å‡ºçš„æ˜¯ä¸€ä¸ªå‘é‡ï¼Œå¦‚ä½•æŠŠå®ƒå˜æˆä¸€ä¸ªå•è¯ï¼Œè¿™å°±è¦é å®ƒåé¢çš„çº¿æ€§å±‚å’Œ softmax å±‚ã€‚çº¿æ€§å±‚å°±æ˜¯ä¸€ä¸ªå¾ˆç®€å•çš„å…¨è¿æ¥ç¥ç»ç½‘ç»œï¼Œå°†è§£ç å™¨è¾“å‡ºçš„å‘é‡æ˜ å°„æˆä¸€ä¸ªæ›´é•¿çš„å‘é‡ã€‚ä¾‹å¦‚æˆ‘ä»¬æœ‰ 10,000 ä¸ªæ— é‡å¤çš„å•è¯ï¼Œé‚£ä¹ˆæœ€åè¾“å‡ºçš„å‘é‡å°±æœ‰ä¸€ä¸‡ç»´ï¼Œæ¯ä¸ªä½ç½®ä¸Šçš„å€¼ä»£è¡¨äº†ç›¸åº”å•è¯çš„åˆ†æ•°ã€‚softmax å±‚å°†è¿™ä¸ªåˆ†æ•°è½¬æ¢ä¸ºäº†æ¦‚ç‡ï¼Œæˆ‘ä»¬é€‰æ‹©æ¦‚ç‡æœ€å¤§çš„æ‰€å¯¹åº”çš„å•è¯ï¼Œå°±æ˜¯å½“å‰æ—¶é—´æ­¥çš„è¾“å‡ºã€‚è®­ç»ƒæˆ‘ä»¬ç”¨ä¸€ä¸ªç®€å•çš„ä¾‹å­æ¥ç¤ºèŒƒè®­ç»ƒï¼Œè¾“å…¥æ˜¯ â€œje suis Ã©tudiantâ€ï¼ŒæœŸæœ›è¾“å‡ºæ˜¯ â€œi am a studentâ€ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸‹ï¼Œæˆ‘ä»¬æœŸæœ›æ¨¡å‹è¾“å‡ºè¿ç»­çš„æ¦‚ç‡åˆ†å¸ƒæ»¡è¶³å¦‚ä¸‹æ¡ä»¶ï¼š  æ¯ä¸ªæ¦‚ç‡åˆ†å¸ƒéƒ½ä¸è¯è¡¨åŒç»´åº¦ã€‚  ç¬¬ä¸€ä¸ªæ¦‚ç‡åˆ†å¸ƒå¯¹ â€œiâ€ å…·æœ‰æœ€é«˜çš„é¢„æµ‹æ¦‚ç‡å€¼ã€‚  ç¬¬äºŒä¸ªæ¦‚ç‡åˆ†å¸ƒå¯¹ â€œamâ€ å…·æœ‰æœ€é«˜çš„é¢„æµ‹æ¦‚ç‡å€¼ã€‚  ä¸€ç›´åˆ°ç¬¬äº”ä¸ªè¾“å‡ºæŒ‡å‘ â€œEOSâ€ æ ‡è®°ã€‚ä½†æ˜¯ç”±äºæ¨¡å‹æœªè®­ç»ƒæ˜¯éšæœºåˆå§‹åŒ–çš„ï¼Œä¸å¤ªå¯èƒ½å°±æ˜¯æœŸæœ›çš„è¾“å‡ºã€‚å¦‚ä½•å¯¹æ¯”ä¸¤ä¸ªæ¦‚ç‡åˆ†å¸ƒå‘¢ï¼Ÿç®€å•é‡‡ç”¨ cross-entropyæˆ–è€… Kullback-Leibler divergence ä¸­çš„ä¸€ç§ã€‚åœ¨è¶³å¤Ÿå¤§çš„è®­ç»ƒé›†ä¸Šè®­ç»ƒè¶³å¤Ÿæ—¶é—´ä¹‹åï¼Œæˆ‘ä»¬æœŸæœ›äº§ç”Ÿçš„æ¦‚ç‡åˆ†å¸ƒå¦‚ä¸‹æ‰€ç¤ºï¼šç°åœ¨ï¼Œå› ä¸ºæ¨¡å‹æ¯æ­¥åªäº§ç”Ÿä¸€ç»„è¾“å‡ºï¼Œå‡è®¾æ¨¡å‹é€‰æ‹©æœ€é«˜æ¦‚ç‡ï¼Œæ‰”æ‰å…¶ä»–çš„éƒ¨åˆ†ï¼Œè¿™æ˜¯ç§äº§ç”Ÿé¢„æµ‹ç»“æœçš„æ–¹æ³•ï¼Œå«åšgreedy è§£ç ã€‚å¦å¤–ä¸€ç§æ–¹æ³•æ˜¯beam searchï¼Œæ¯ä¸€æ­¥ä»…ä¿ç•™æœ€å¤´éƒ¨é«˜æ¦‚ç‡çš„ä¸¤ä¸ªè¾“å‡ºï¼Œæ ¹æ®è¿™ä¿©è¾“å‡ºå†é¢„æµ‹ä¸‹ä¸€æ­¥ï¼Œå†ä¿ç•™å¤´éƒ¨é«˜æ¦‚ç‡çš„ä¸¤ä¸ªè¾“å‡ºï¼Œé‡å¤ç›´åˆ°é¢„æµ‹ç»“æŸã€‚top_beamsæ˜¯è¶…å‚å¯è¯•éªŒè°ƒæ•´ã€‚5. å‚è€ƒæ–‡çŒ®[1] Jay Alammar. The Illustrated Transformer[1] ä¸ä¼šåœçš„èœ—ç‰›. å›¾è§£ä»€ä¹ˆæ˜¯ Transformer[2] rumor. ã€NLPã€‘Transformeræ¨¡å‹åŸç†è¯¦è§£[3] _zhang_bei_. è‡ªç„¶è¯­è¨€å¤„ç†ä¸­çš„Transformerå’ŒBERT[4] Amirhossein Kazemnejad. Transformer Architecture: The Positional Encoding"
  },
  
  {
    "title": "ç§‘ç ”Tipsï¼ˆæ•°å­¦ç¬¦å·ï¼‰",
    "url": "/posts/research-tips-math-symbols/",
    "categories": "Tutorial, Writing",
    "tags": "other",
    "date": "2020-11-09 10:01:19 +0800",
    





    
    "snippet": "æœ¬æ–‡åˆ—ä¸¾äº†å¸¸ç”¨æ•°å­¦ç¬¦å·ä»¥ä¾›å¹³æ—¶æŸ¥è¯¢ï¼ŒåŒ…æ‹¬å¸Œè…Šå­—æ¯ã€äºŒå…ƒå…³ç³»ç¬¦ã€äºŒå…ƒè¿ç®—ç¬¦ã€‚  1. å¸½å­å’Œé‹å­  2. ç©ºæ ¼  3. å¸Œè…Šå­—æ¯  4. äºŒå…ƒå…³ç³»ç¬¦  5. äºŒå…ƒè¿ç®—ç¬¦  6. å¤§å°ºå¯¸è¿ç®—ç¬¦  7. ç®­å¤´  8. å…¶å®ƒç¬¦å·      9. çŸ©é˜µ  1. å¸½å­å’Œé‹å­            å‘½ä»¤      æ•ˆæœ                  \\hat{A}      $\\hat{A}$    ...",
    "content": "æœ¬æ–‡åˆ—ä¸¾äº†å¸¸ç”¨æ•°å­¦ç¬¦å·ä»¥ä¾›å¹³æ—¶æŸ¥è¯¢ï¼ŒåŒ…æ‹¬å¸Œè…Šå­—æ¯ã€äºŒå…ƒå…³ç³»ç¬¦ã€äºŒå…ƒè¿ç®—ç¬¦ã€‚  1. å¸½å­å’Œé‹å­  2. ç©ºæ ¼  3. å¸Œè…Šå­—æ¯  4. äºŒå…ƒå…³ç³»ç¬¦  5. äºŒå…ƒè¿ç®—ç¬¦  6. å¤§å°ºå¯¸è¿ç®—ç¬¦  7. ç®­å¤´  8. å…¶å®ƒç¬¦å·      9. çŸ©é˜µ  1. å¸½å­å’Œé‹å­            å‘½ä»¤      æ•ˆæœ                  \\hat{A}      $\\hat{A}$              \\widehat{A}      $\\widehat{A}$              \\tilde{A}      $\\tilde{A}$              \\widetilde{A}      $\\widetilde{A}$              \\overline{A}      $\\overline{A}$              \\underline{A}      $\\underline{A}$              \\overbrace{A-B}^{hat}      $\\overbrace{A-B}^{hat}$              \\underbrace{A-B}_{foot}      $\\underbrace{A-B}_{foot}$              \\sum_{i=1}      $ \\sum_{i=1} $              \\sum\\limits_{i=1}      $ \\sum\\limits_{i=1} $              \\mathop{max}_z      $ \\mathop{max}_z$              \\mathop{max}\\limits_z      $ \\mathop{max}\\limits_z$              \\mathop{\\rm max}\\limits_z      $\\mathop{\\rm max}\\limits_z$      2. ç©ºæ ¼            å‘½ä»¤      æ•ˆæœ      è§£é‡Š                  a \\qquad bmmb      $a \\qquad bmmb$      é—´éš”ä¸¤ä¸ª $m$ çš„å®½åº¦              a \\quad bmmb      $a \\quad bmb$      é—´éš”ä¸€ä¸ª $m$ çš„å®½åº¦              a \\ bmb      $a \\ bmb$      é—´éš” 1/3 ä¸ª $m$ çš„å®½åº¦              a \\; bmb      $a \\; bmb$      é—´éš” 2/7 ä¸ª $m$ çš„å®½åº¦              a \\, bmb      $a \\, bmb$      é—´éš” 1/6 ä¸ª $m$ çš„å®½åº¦              abmb      $abmb$      æ²¡æœ‰é—´éš”              a\\!bmb      $a!bmb$      ç¼©è¿› 1/6 ä¸ª $m$ çš„å®½åº¦ï¼ˆæµè§ˆå™¨å¯èƒ½æ¸²æŸ“å¼‚å¸¸ï¼‰      3. å¸Œè…Šå­—æ¯            å¤§å†™å‘½ä»¤      å¤§å†™      å°å†™å‘½ä»¤      å°å†™                  \\Alpha      $\\Alpha$      \\alpha      $\\alpha$              \\Beta      $\\Beta$      \\beta      $\\beta$              \\Gamma      $\\Gamma$      \\gamma      $\\gamma$              \\Delta      $\\Delta$      \\delta      $\\delta$              \\Epsilon      $\\Epsilon$      \\epsilon,\\varepsilon      $\\epsilon,\\varepsilon$              \\Zeta      $\\Zeta$      \\zeta      $\\zeta$              \\Eta      $\\Eta$      \\eta      $\\eta$              \\Theta      $\\Theta$      \\theta      $\\theta$              \\Iota      $\\Iota$      \\iota      $\\iota$              \\Kappa      $\\Kappa$      \\kappa      $\\kappa$              \\Lambda      $\\Lambda$      \\lambda      $\\lambda$              \\Mu      $\\Mu$      \\mu      $\\mu$              \\Xi      $\\Xi$      \\xi      $\\xi$              \\Rho      $\\Rho$      \\rho,\\varrho      $\\rho,\\varrho$              \\Sigma      $\\Sigma$      \\sigma      $\\sigma$              \\Tau      $\\Tau$      \\tau      $\\tau$              \\Upsilon      $\\Upsilon$      \\upsilon      $\\upsilon$              \\Phi      $\\Phi$      \\phi,\\varphi      $\\phi,\\varphi$              \\Chi      $\\Chi$      \\chi      $\\chi$              \\Psi      $\\Psi$      \\psi      $\\psi$              \\Omega      $\\Omega$      \\omega      $\\omega$      4. äºŒå…ƒå…³ç³»ç¬¦            å‘½ä»¤      ç¬¦å·      Â       å‘½ä»¤      ç¬¦å·      Â       å‘½ä»¤      ç¬¦å·                  \\leq, \\le      $\\leq$      Â       \\geq, \\ge      $\\geq$      Â       \\equiv      $\\equiv$              \\ll      $\\ll$      Â       \\gg      $\\gg$      Â       \\doteq      $\\doteq$              \\prec      $\\prec$      Â       \\succ      $\\succ$      Â       \\sim      $\\sim$              \\preceq      $\\preceq$      Â       \\succeq      $\\succeq$      Â       \\simeq      $\\simeq$              \\subset      $\\subset$      Â       \\supset      $\\supset$      Â       \\approx      $\\approx$              \\subseteq      $\\subseteq$      Â       \\supseteq      $\\supseteq$      Â       \\cong      $\\cong$              \\in      $\\in$      Â       \\ni,\\owns      $\\ni$      Â       \\propto      $\\propto$              \\vdash      $\\vdash$      Â       \\dashv      $\\dashv$      Â       \\models      $\\models$              \\mid      $\\mid$      Â       \\parallel      $\\parallel$      Â       \\perp      $\\perp$              \\smile      $\\smile$      Â       \\frown      $\\frown$      Â       \\asymp      $\\asymp$              :      $:$      Â       \\notin      $\\notin$      Â       \\neq,\\ne      $\\neq$      æ³¨æ„ï¼Œæœ‰ 3 ä¸ªæ¯”è¾ƒç‰¹æ®Šçš„å…³ç³»ç¬¦ï¼Œåœ¨ä½¿ç”¨æ—¶éœ€è¦æ·»åŠ  latexsym å®åŒ…ï¼š            å‘½ä»¤      ç¬¦å·      Â       å‘½ä»¤      ç¬¦å·      Â       å‘½ä»¤      ç¬¦å·                  \\sqsubseteq      $\\sqsubseteq$      Â       \\sqsupseteq      $\\sqsupseteq$      Â       \\bowtie      $\\bowtie$      5. äºŒå…ƒè¿ç®—ç¬¦            å‘½ä»¤      ç¬¦å·      Â       å‘½ä»¤      ç¬¦å·      Â       å‘½ä»¤      ç¬¦å·                  \\pm      $\\pm$      Â       \\mp      $\\mp$      Â       \\triangleleft      $\\triangleleft$              \\cdot      $\\cdot$      Â       \\div      $\\div$      Â       \\triangleright      $\\triangleright$              \\times      $\\times$      Â       \\setminus      $\\setminus$      Â       \\star      $\\star$              \\cup      $\\cup$      Â       \\cap      $\\cap$      Â       \\ast      $\\ast$              \\sqcup      $\\sqcup$      Â       \\sqcap      $\\sqcap$      Â       \\circ      $\\circ$ (ä¸Šæ ‡å¯ä½œåº¦$^{\\circ}$)              \\vee, \\lor      $\\vee$      Â       \\wedge, \\land      $\\wedge$      Â       \\bullet      $\\bullet$              \\oplus      $\\oplus$      Â       \\ominus      $\\ominus$      Â       \\diamond      $\\diamond$              \\odot      $\\odot$      Â       \\oslash      $\\oslash$      Â       \\uplus      $\\uplus$              \\otimes      $\\otimes$      Â       \\bigcirc      $\\bigcirc$      Â       \\amalg      $\\amalg$              \\bigtriangleup      $\\bigtriangleup$      Â       \\bigtriangledown      $\\bigtriangledown$      Â       \\dagger      $\\dagger$              \\ddagger      $\\ddagger$      Â       \\wr      $\\wr$      Â       Â       Â       å…¶ä¸­ï¼Œæœ‰ 4 ä¸ªç‰¹æ®Šç¬¦å·éœ€è¦æ·»åŠ  latexsym å®åŒ…ï¼š            å‘½ä»¤      ç¬¦å·      Â       å‘½ä»¤      ç¬¦å·                  \\lhd      $\\lhd$      Â       \\rhd      $\\rhd$              \\unlhd      $\\unlhd$      Â       \\unrhd      $\\unrhd$      6. å¤§å°ºå¯¸è¿ç®—ç¬¦            å‘½ä»¤      ç¬¦å·      Â       å‘½ä»¤      ç¬¦å·      Â       å‘½ä»¤      ç¬¦å·                  \\sum      $\\sum$      Â       \\bigcup      $\\bigcup$      Â       \\bigvee      $\\bigvee$              \\prod      $\\prod$      Â       \\bigcap      $\\bigcap$      Â       \\bigwedge      $\\bigwedge$              \\coprod      $\\coprod$      Â       \\bigsqcup      $\\bigsqcup$      Â       \\biguplus      $\\biguplus$              \\bigoplus      $\\bigoplus$      Â       \\bigotimes      $\\bigotimes$      Â       \\bigodot      $\\bigodot$              \\int      $\\int$      Â       \\oint      $\\oint$      Â       Â       Â       7. ç®­å¤´            å‘½ä»¤      ç¬¦å·      Â       å‘½ä»¤      ç¬¦å·      Â       å‘½ä»¤      ç¬¦å·                  \\leftarrow, \\gets      $\\leftarrow$      Â       \\longleftarrow      $\\longleftarrow$      Â       \\uparrow      $\\uparrow$              \\rightarrow, \\to      $\\rightarrow$      Â       \\longrightarrow      $\\longrightarrow$      Â       \\downarrow      $\\downarrow$              \\leftrightarrow      $\\leftrightarrow$      Â       \\longleftrightarrow      $\\longleftrightarrow$      Â       \\updownarrow      $\\updownarrow$              \\Leftarrow      $\\Leftarrow$      Â       \\Longleftarrow      $\\Longleftarrow$      Â       \\Uparrow      $\\Uparrow$              \\Rightarrow      $\\Rightarrow$      Â       \\Longrightarrow      $\\Longrightarrow$      Â       \\Downarrow      $\\Downarrow$              \\Leftrightarrow      $\\Leftrightarrow$      Â       \\Longleftrightarrow      $\\Longleftrightarrow$      Â       \\Updownarrow      $\\Updownarrow$              \\mapsto      $\\mapsto$      Â       \\longmapsto      $\\longmapsto$      Â       \\nearrow      $\\nearrow$              \\hookleftarrow      $\\hookleftarrow$      Â       \\hookrightarrow      $\\hookrightarrow$      Â       \\searrow      $\\searrow$              \\leftharpoonup      $\\leftharpoonup$      Â       \\rightharpoonup      $\\rightharpoonup$      Â       \\swarrow      $\\swarrow$              \\leftharpoondown      $\\leftharpoondown$      Â       \\rightharpoondown      $\\rightharpoondown$      Â       \\nwarrow      $\\nwarrow$              \\rightleftharpoons      $\\rightleftharpoons$      Â       \\iff      $\\iff$      Â       \\      $\\backslash$      å…¶ä¸­ï¼Œæœ‰ 1 ä¸ªç‰¹æ®Šç¬¦å·éœ€è¦æ·»åŠ  latexsym å®åŒ…ï¼š            å‘½ä»¤      ç¬¦å·                  \\leadsto      $\\leadsto$      8. å…¶å®ƒç¬¦å·            å‘½ä»¤      ç¬¦å·      Â       å‘½ä»¤      ç¬¦å·      Â       å‘½ä»¤      ç¬¦å·                  \\cdots      $\\cdots$      Â       \\vdots      $\\vdots$      Â       \\ddots      $\\ddots$              \\hbar      $\\hbar$      Â       \\ell      $\\ell$      Â       \\Re      $\\Re$              \\aleph      $\\aleph$      Â       \\forall      $\\forall$      Â       \\partial      $\\partial$              \\nabla      $\\nabla$      Â       \\infty      $\\infty$      Â       \\empty      $\\empty$              \\bot      $\\bot$      Â       \\top      $\\top$      Â       \\varnothing      $\\varnothing$              \\flat      $\\flat$      Â       \\natural      $\\natural$      Â       \\sharp      $\\sharp$              \\prime      $\\prime$      Â       \\exists      $\\exists$      Â       \\angle      $\\angle$      9. çŸ©é˜µæ— éœ€ \\begin{aligned} çš„å†™æ³•ï¼ša=\\begin{matrix}1 &amp; 2 \\\\3 &amp; 4 \\\\\\end{matrix}a=\\begin{bmatrix}1 &amp; 2 \\\\3 &amp; 4 \\\\\\end{bmatrix}a=\\begin{pmatrix}1 &amp; 2 \\\\3 &amp; 4 \\\\\\end{pmatrix}a=\\begin{Bmatrix}1 &amp; 2 \\\\3 &amp; 4 \\\\\\end{Bmatrix}a=\\begin{vmatrix}1 &amp; 2 \\\\3 &amp; 4 \\\\\\end{vmatrix}a=\\begin{Vmatrix}1 &amp; 2 \\\\3 &amp; 4 \\\\\\end{Vmatrix}\\[a=\\begin{matrix}1 &amp; 2 \\\\3 &amp; 4 \\\\\\end{matrix},\\ a=\\begin{bmatrix}1 &amp; 2 \\\\3 &amp; 4 \\\\\\end{bmatrix},\\ a=\\begin{pmatrix}1 &amp; 2 \\\\3 &amp; 4 \\\\\\end{pmatrix},\\ a=\\begin{Bmatrix}1 &amp; 2 \\\\3 &amp; 4 \\\\\\end{Bmatrix},\\ a=\\begin{vmatrix}1 &amp; 2 \\\\3 &amp; 4 \\\\\\end{vmatrix},\\ a=\\begin{Vmatrix}1 &amp; 2 \\\\3 &amp; 4 \\\\\\end{Vmatrix}\\]æ–¹ç¨‹ç»„å¯¹é½çš„å†™æ³•ï¼ˆ{l}-left,{c}-center,{r}-rightï¼‰ï¼š\\left\\{\\begin{array}{l}\\dot x_1(t) = x_2(t)\\\\\\dot x_2(t) = x_1(t){\\rm cos}x_2(t)-x_3(t)\\\\\\dot x_3(t) = x_1(t)x_3(t) + (1+\\varepsilon {\\rm sin}x_3(t))u(t)\\end{array}\\right.\\(\\left\\{\\begin{array}{l}\\dot x_1(t) = x_2(t)\\\\\\dot x_2(t) = x_1(t){\\rm cos}x_2(t)-x_3(t)\\\\\\dot x_3(t) = x_1(t)x_3(t) + (1+\\varepsilon {\\rm sin}x_3(t))u(t)\\end{array}\\right.\\)æ–¹ç¨‹ç»„å¯¹é½çš„çŸ©é˜µå†™æ³•ï¼ˆå±…ä¸­å¯¹é½ï¼‰ï¼š\\left\\{\\begin{matrix}\\dot x_1(t) = x_2(t)\\\\\\dot x_2(t) = x_1(t){\\rm cos}x_2(t)-x_3(t)\\\\\\dot x_3(t) = x_1(t)x_3(t) + (1+\\varepsilon {\\rm sin}x_3(t))u(t)\\end{matrix}\\right.\\(\\left\\{\\begin{matrix}\\dot x_1(t) = x_2(t)\\\\\\dot x_2(t) = x_1(t){\\rm cos}x_2(t)-x_3(t)\\\\\\dot x_3(t) = x_1(t)x_3(t) + (1+\\varepsilon {\\rm sin}x_3(t))u(t)\\end{matrix}\\right.\\)"
  },
  
  {
    "title": "ç§‘ç ”Tipsï¼ˆé¢œè‰²ç è¡¨ï¼‰",
    "url": "/posts/research-tips-color-table/",
    "categories": "Tutorial, Writing",
    "tags": "other",
    "date": "2020-11-09 10:01:19 +0800",
    





    
    "snippet": "æœ¬æ–‡åˆ—ä¸¾äº†å¸¸ç”¨é¢œè‰²ç è¡¨ä»¥ä¾›å¹³æ—¶æŸ¥è¯¢ï¼ŒåŒ…æ‹¬rgbç¼–ç ï¼Œ16è¿›åˆ¶ç¼–ç ã€‚1. é¢œè‰²ç è¡¨é¢œè‰²ååå…­è¿›åˆ¶RGBAliceBlue#F0F8FFrgb(240, 248, 255)AntiqueWhite#FAEBD7rgb(250, 235, 215)Aqua#00FFFFrgb(0, 255, 255)Aquamarine#7FFFD4rgb(127, 255, 212)Azure#F0FFFFrg...",
    "content": "æœ¬æ–‡åˆ—ä¸¾äº†å¸¸ç”¨é¢œè‰²ç è¡¨ä»¥ä¾›å¹³æ—¶æŸ¥è¯¢ï¼ŒåŒ…æ‹¬rgbç¼–ç ï¼Œ16è¿›åˆ¶ç¼–ç ã€‚1. é¢œè‰²ç è¡¨é¢œè‰²ååå…­è¿›åˆ¶RGBAliceBlue#F0F8FFrgb(240, 248, 255)AntiqueWhite#FAEBD7rgb(250, 235, 215)Aqua#00FFFFrgb(0, 255, 255)Aquamarine#7FFFD4rgb(127, 255, 212)Azure#F0FFFFrgb(240, 255, 255)Beige#F5F5DCrgb(245, 245, 220)Bisque#FFE4C4rgb(255, 228, 196)Black#000000rgb(0, 0, 0)BlanchedAlmond#FFEBCDrgb(255, 235, 205)Blue#0000FFrgb(0, 0, 255)BlueViolet#8A2BE2rgb(138, 43, 226)Brown#A52A2Argb(165, 42, 42)BurlyWood#DEB887rgb(222, 184, 135)CadetBlue#5F9EA0rgb(95, 158, 160)Chartreuse#7FFF00rgb(127, 255, 0)Chocolate#D2691Ergb(210, 105, 30)Coral#FF7F50rgb(255, 127, 80)CornflowerBlue#6495EDrgb(100, 149, 237)Cornsilk#FFF8DCrgb(255, 248, 220)Crimson#DC143Crgb(220, 20, 60)Cyan#00FFFFrgb(0, 255, 255)DarkBlue#00008Brgb(0, 0, 139)DarkCyan#008B8Brgb(0, 139, 139)DarkGoldenRod#B8860Brgb(184, 134, 11)DarkGray#A9A9A9rgb(169, 169, 169)DarkGreen#006400rgb(0, 100, 0)DarkKhaki#BDB76Brgb(189, 183, 107)DarkMagenta#8B008Brgb(139, 0, 139)DarkOliveGreen#556B2Frgb(85, 107, 47)Darkorange#FF8C00rgb(255, 140, 0)DarkOrchid#9932CCrgb(153, 50, 204)DarkRed#8B0000rgb(139, 0, 0)DarkSalmon#E9967Argb(233, 150, 122)DarkSeaGreen#8FBC8Frgb(143, 188, 143)DarkSlateBlue#483D8Brgb(72, 61, 139)DarkSlateGray#2F4F4Frgb(47, 79, 79)DarkTurquoise#00CED1rgb(0, 206, 209)DarkViolet#9400D3rgb(148, 0, 211)DeepPink#FF1493rgb(255, 20, 147)DeepSkyBlue#00BFFFrgb(0, 191, 255)DimGray#696969rgb(105, 105, 105)DodgerBlue#1E90FFrgb(30, 144, 255)Feldspar#D19275rgb(209, 146, 117)FireBrick#B22222rgb(178, 34, 34)FloralWhite#FFFAF0rgb(255, 250, 240)ForestGreen#228B22rgb(34, 139, 34)Fuchsia#FF00FFrgb(255, 0, 255)Gainsboro#DCDCDCrgb(220, 220, 220)GhostWhite#F8F8FFrgb(248, 248, 255)Gold#FFD700rgb(255, 215, 0)GoldenRod#DAA520rgb(218, 165, 32)Gray#808080rgb(128, 128, 128)Green#008000rgb(0, 128, 0)GreenYellow#ADFF2Frgb(173, 255, 47)HoneyDew#F0FFF0rgb(240, 255, 240)HotPink#FF69B4rgb(255, 105, 180)IndianRed#CD5C5Crgb(205, 92, 92)Indigo#4B0082rgb(75, 0, 130)Ivory#FFFFF0rgb(255, 255, 240)Khaki#F0E68Crgb(240, 230, 140)Lavender#E6E6FArgb(230, 230, 250)LavenderBlush#FFF0F5rgb(255, 240, 245)LawnGreen#7CFC00rgb(124, 252, 0)LemonChiffon#FFFACDrgb(255, 250, 205)LightBlue#ADD8E6rgb(173, 216, 230)LightCoral#F08080rgb(240, 128, 128)LightCyan#E0FFFFrgb(224, 255, 255)LightGoldenRodYellow#FAFAD2rgb(250, 250, 210)LightGrey#D3D3D3rgb(211, 211, 211)LightGreen#90EE90rgb(144, 238, 144)LightPink#FFB6C1rgb(255, 182, 193)LightSalmon#FFA07Argb(255, 160, 122)LightSeaGreen#20B2AArgb(32, 178, 170)LightSkyBlue#87CEFArgb(135, 206, 250)LightSlateBlue#8470FFrgb(132, 112, 255)LightSlateGray#778899rgb(119, 136, 153)LightSteelBlue#B0C4DErgb(176, 196, 222)LightYellow#FFFFE0rgb(255, 255, 224)Lime#00FF00rgb(0, 255, 0)LimeGreen#32CD32rgb(50, 205, 50)Linen#FAF0E6rgb(250, 240, 230)Magenta#FF00FFrgb(255, 0, 255)Maroon#800000rgb(128, 0, 0)MediumAquaMarine#66CDAArgb(102, 205, 170)MediumBlue#0000CDrgb(0, 0, 205)MediumOrchid#BA55D3rgb(186, 85, 211)MediumPurple#9370D8rgb(147, 112, 216)MediumSeaGreen#3CB371rgb(60, 179, 113)MediumSlateBlue#7B68EErgb(123, 104, 238)MediumSpringGreen#00FA9Argb(0, 250, 154)MediumTurquoise#48D1CCrgb(72, 209, 204)MediumVioletRed#C71585rgb(199, 21, 133)MidnightBlue#191970rgb(25, 25, 112)MintCream#F5FFFArgb(245, 255, 250)MistyRose#FFE4E1rgb(255, 228, 225)Moccasin#FFE4B5rgb(255, 228, 181)NavajoWhite#FFDEADrgb(255, 222, 173)Navy#000080rgb(0, 0, 128)OldLace#FDF5E6rgb(253, 245, 230)Olive#808000rgb(128, 128, 0)OliveDrab#6B8E23rgb(107, 142, 35)Orange#FFA500rgb(255, 165, 0)OrangeRed#FF4500rgb(255, 69, 0)Orchid#DA70D6rgb(218, 112, 214)PaleGoldenRod#EEE8AArgb(238, 232, 170)PaleGreen#98FB98rgb(152, 251, 152)PaleTurquoise#AFEEEErgb(175, 238, 238)PaleVioletRed#D87093rgb(216, 112, 147)PapayaWhip#FFEFD5rgb(255, 239, 213)PeachPuff#FFDAB9rgb(255, 218, 185)Peru#CD853Frgb(205, 133, 63)Pink#FFC0CBrgb(255, 192, 203)Plum#DDA0DDrgb(221, 160, 221)PowderBlue#B0E0E6rgb(176, 224, 230)Purple#800080rgb(128, 0, 128)Red#FF0000rgb(255, 0, 0)RosyBrown#BC8F8Frgb(188, 143, 143)RoyalBlue#4169E1rgb(65, 105, 225)SaddleBrown#8B4513rgb(139, 69, 19)Salmon#FA8072rgb(250, 128, 114)SandyBrown#F4A460rgb(244, 164, 96)SeaGreen#2E8B57rgb(46, 139, 87)SeaShell#FFF5EErgb(255, 245, 238)Sienna#A0522Drgb(160, 82, 45)Silver#C0C0C0rgb(192, 192, 192)SkyBlue#87CEEBrgb(135, 206, 235)SlateBlue#6A5ACDrgb(106, 90, 205)SlateGray#708090rgb(112, 128, 144)Snow#FFFAFArgb(255, 250, 250)SpringGreen#00FF7Frgb(0, 255, 127)SteelBlue#4682B4rgb(70, 130, 180)Tan#D2B48Crgb(210, 180, 140)Teal#008080rgb(0, 128, 128)Thistle#D8BFD8rgb(216, 191, 216)Tomato#FF6347rgb(255, 99, 71)Turquoise#40E0D0rgb(64, 224, 208)Violet#EE82EErgb(238, 130, 238)VioletRed#D02090rgb(208, 32, 144)Wheat#F5DEB3rgb(245, 222, 179)White#FFFFFFrgb(255, 255, 255)WhiteSmoke#F5F5F5rgb(245, 245, 245)Yellow#FFFF00rgb(255, 255, 0)YellowGreen#9ACD32rgb(154, 205, 50)"
  },
  
  {
    "title": "æ·±åº¦å­¦ä¹ æ–‡ç« é˜…è¯»ï¼ˆFuzzy-LSTMï¼‰",
    "url": "/posts/deep-learning-FLSTM/",
    "categories": "Academic, Paper",
    "tags": "fuzzy, deep learning",
    "date": "2020-11-04 15:51:19 +0800",
    





    
    "snippet": "æœ¬æ–‡ä»‹ç»äº† å°† Fuzzy å’Œ LSTM ç»“åˆç”¨äºäºŒç»´å¹³é¢è¡ŒåŠ¨è½¨è¿¹é¢„æµ‹çš„æ–¹æ³•ï¼Œç”± Mingxiao Li äº 2020 å¹´æå‡ºï¼Œæé«˜é¢„æµ‹ç²¾åº¦ï¼Œæœ‰æ•ˆå­¦ä¹ å‘¨æœŸæ€§æ—¶ç©ºè§„å¾‹ã€‚  1. å¼•è¨€  2. é—®é¢˜æè¿°  3. æ–¹æ³•          3.1. æ¨¡ç³Šè½¨è¿¹ç”Ÿæˆ                  3.1.1. æ¨¡ç³Šç©ºé—´åˆ†å‰²          3.1.2. æ¨¡ç³Šè½¨è¿¹è®¡ç®—                ...",
    "content": "æœ¬æ–‡ä»‹ç»äº† å°† Fuzzy å’Œ LSTM ç»“åˆç”¨äºäºŒç»´å¹³é¢è¡ŒåŠ¨è½¨è¿¹é¢„æµ‹çš„æ–¹æ³•ï¼Œç”± Mingxiao Li äº 2020 å¹´æå‡ºï¼Œæé«˜é¢„æµ‹ç²¾åº¦ï¼Œæœ‰æ•ˆå­¦ä¹ å‘¨æœŸæ€§æ—¶ç©ºè§„å¾‹ã€‚  1. å¼•è¨€  2. é—®é¢˜æè¿°  3. æ–¹æ³•          3.1. æ¨¡ç³Šè½¨è¿¹ç”Ÿæˆ                  3.1.1. æ¨¡ç³Šç©ºé—´åˆ†å‰²          3.1.2. æ¨¡ç³Šè½¨è¿¹è®¡ç®—                    3.2. æ¨¡ç³Š LSTM      3.3. TrjPre-LSTM å»ºæ¨¡        4. ç®—ä¾‹ç ”ç©¶  5. å‚è€ƒæ–‡çŒ®1. å¼•è¨€  Mingxiao Li, Feng Lu, Hengcai Zhang &amp; Jie Chen  Predicting future locations of moving objects with deep fuzzy-LSTM networks  TRANSPORTMETRICA A: TRANSPORT SCIENCE. 2020, VOL. 16, NO. 1, 119â€“136åŸºäºè¿åŠ¨çŠ¶æ€å¾®åˆ†ã€åŸºäºé¢‘ç‡æ¨¡å¼æŒ–æ˜ã€åŸºäºæœºå™¨å­¦ä¹ ï¼Œä¸‰ç§è¿åŠ¨ä½ç½®é¢„æµ‹æ–¹æ³•ã€‚åŸºäºæœºå™¨å­¦ä¹ çš„æ–¹æ³•å·²ç»ç§°ä¸ºä¸»æµã€‚ç›®å‰çš„è½¨è¿¹é¢„æµ‹å­˜åœ¨ä¸¤ä¸ªå±€é™æ€§ï¼š  è€ƒè™‘å­˜å‚¨å®¹é‡çš„åˆ¶çº¦ï¼Œå¤§é‡è¿åŠ¨ä½ç½®ä¿¡æ¯å¾ˆéš¾å­˜å‚¨ï¼Œä¸€èˆ¬å°†æ•°å­—åœ°å›¾åˆ’åˆ†ä¸ºç½‘æ ¼æˆ–è€…ç±»ã€‚è¿™æ ·ï¼Œæ—¶åºä½ç½®è½¨è¿¹å°±å¯ä»¥è½¬å˜ä¸ºä¸€ç³»åˆ—æ—¶åºç½‘æ ¼ç¼–å·ã€‚è¿™æ ·åšçš„å¼Šç«¯åœ¨äºï¼Œä¸¥æ ¼çš„è¾¹ç•Œçº¦æŸå¯èƒ½ä¼šå¯¼è‡´åŸæœ¬ä¸¤ä¸ªååˆ†ç›¸è¿‘çš„è½¨è¿¹å› ä¸ºå½’å±çš„ç½‘æ ¼ä¸åŒè€Œå®Œå…¨ä¸åŒã€‚å¦‚å›¾æ‰€ç¤º  åŸå¸‚å±…æ°‘çš„è¿è¡Œè½¨è¿¹å­˜åœ¨å¼ºçƒˆçš„å‘¨æœŸæ€§ç‰¹å¾ï¼Œæ¯”å¦‚äººä»¬åœ¨è¿ç»­å·¥ä½œæ—¥æ—©é«˜å³°çš„æ™¨è·‘è½¨è¿¹å¯èƒ½æ¯å¤©éƒ½å¾ˆç±»ä¼¼ã€‚ä½œè€…å‘ç°ç»å¤§å¤šæ•°è½¨è¿¹é¢„æµ‹æ¨¡å‹åªå…³æ³¨æœ€è¿‘çš„è¿åŠ¨æ¨¡å¼ï¼ŒåŸºæœ¬éƒ½ç”¨æœ€è¿‘çš„å†å²è½¨è¿¹æ¥åšé¢„æµ‹ï¼Œå¿½ç•¥äº†å‘¨æœŸæ€§è¿åŠ¨æ¨¡å¼ã€‚ä¸ºäº†è§£å†³ä¸Šè¿°é—®é¢˜ï¼Œä½œè€…æå‡ºäº†ä¸€ä¸ªæ–°å‹é¢„æµ‹æ¨¡å‹ï¼ŒåŸºäºæ·±åº¦æ¨¡ç³Š LSTM æ¨¡å‹ï¼ˆTrjPre-FLSTMï¼‰ã€‚è´¡çŒ®ç‚¹å¦‚ä¸‹  å¼•å…¥æ¨¡ç³Šç©ºé—´åˆ†å‰²æ–¹æ³•ï¼Œäº§è¯æ¨¡ç³Šè½¨è¿¹ï¼Œè§£å†³ä¸¥æ ¼è¾¹ç•Œçº¦æŸã€‚å¤§å¹…åº¦æé«˜è½¨è¿¹é¢„æµ‹çš„ç²¾åº¦å’Œå¯é æ€§ã€‚  æå‡ºäº†ä¸€ç§æ”¹è¿›çš„ LSTM ç»†èƒç»“æ„ï¼šfuzzy-LSTMï¼Œèƒ½å¤Ÿå¾ˆå¥½çš„é€‚åº”æ¨¡ç³Šç©ºé—´åˆ’åˆ†ï¼Œæœ‰æ•ˆå­¦ä¹ é•¿æ—¶é—´çš„å†å²è½¨è¿¹ä¸­çš„æ—¶ç©ºæ¨¡å¼ã€‚  è€ƒè™‘åˆ°äººè¿åŠ¨çš„è¿ç»­æ€§å’Œå‘¨æœŸæ€§ç‰¹ç‚¹ï¼Œä½œè€…æå‡ºçš„æ¨¡å‹åœ¨é¢„æµ‹è½¨è¿¹æ—¶åŒæ—¶è€ƒè™‘äº†æ—¶é—´ç›¸è¿‘å’Œå‘¨æœŸè¿åŠ¨æ¨¡å¼ï¼Œæé«˜äº†é¢„æµ‹ç²¾åº¦ã€‚  ç”¨çœŸå®è¿ç»­çš„è¿åŠ¨äº¤æµä¿¡å·æ•°æ®åº“ï¼Œä¸æœ€æ–°æ–¹æ³• NLPMM å’Œ naive LSTM è¿›è¡Œæ¯”è¾ƒï¼Œå…·å¤‡ä¼˜åŠ¿ã€‚2. é—®é¢˜æè¿°è½¨è¿¹è¢«è¡¨ç¤ºä¸ºä½ç½®çš„æ—¶é—´åºåˆ—\\[Traj = (p_1,t_1),(p_2,t_2),...,(p_n,t_n)\\]å…¶ä¸­ $t_i$ æ—¶æ—¶é—´ï¼Œ$p_i$ æ—¶ç»çº¬åº¦ä¿¡æ¯ $(x_i, y_i)$ã€‚å°†ç©ºé—´åˆ’åˆ†ä¸ºè‹¥å¹²å•å…ƒåï¼Œè½¨è¿¹å¯è¢«è¡¨ç¤ºä¸º\\[G_{Traj} = (s_1,t_1),(s_2,t_2),...,(s_n,t_n)\\]å…¶ä¸­ï¼Œ$s_i$ æ˜¯ä½ç½® $p_i$ æ‰€åœ¨çš„ç½‘æ ¼å•å…ƒçš„ç¼–å·ã€‚ç›¸åº”çš„ï¼Œè½¨è¿¹é¢„æµ‹é—®é¢˜å¯ä»¥è½¬åŒ–ä¸ºåºåˆ—ç”Ÿæˆä»»åŠ¡ï¼Œç›®æ ‡æ˜¯æ ¹æ®å·²æœ‰çš„çŸ¥è¯†ï¼Œè®¡ç®—å‡ºä¸‹ä¸€ä¸ªæœ€å¯èƒ½çš„å•å…ƒã€‚3. æ–¹æ³•é‡‡ç”¨ TrjPre LSTM çš„é¢„æµ‹è¿‡ç¨‹å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚3.1. æ¨¡ç³Šè½¨è¿¹ç”Ÿæˆ3.1.1. æ¨¡ç³Šç©ºé—´åˆ†å‰²é¦–å…ˆä»‹ç»æ¨¡ç³Šè½¨è¿¹ï¼ˆfuzzy trajectoryï¼‰ã€‚æ ¹æ®æ¨¡ç³Šé›†ç†è®ºå’Œå‰äººç ”ç©¶ï¼Œä½œè€…å°†ä¼ ç»Ÿçš„ç½‘æ ¼ç»†èƒåˆ’åˆ†ä¸ºç²¾ç¡®åŒºåŸŸï¼ˆcrisp zoneï¼‰å’Œä¸­é—´åŒºåŸŸï¼ˆintermediate zoneï¼‰ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚å½“ä½ç½®åæ ‡ $p_i$ ä½äºç²¾ç¡®åŒºåŸŸä¸­æ—¶ï¼Œè¯¥åæ ‡å³å±äºè¯¥åŒºåŸŸæ‰€åœ¨çš„ç½‘æ ¼ã€‚ä¸­é—´åŒºåŸŸç›¸å½“äºä¸€ä¸ªæ¨¡ç³ŠåŒºåŸŸï¼Œå½“ä½ç½®åæ ‡ä½äºè¯¥åŒºåŸŸæ—¶ï¼Œå®ƒå±äºæœ€è¿‘çš„å››ä¸ªç½‘æ ¼ã€‚å‡è®¾ç½‘æ ¼æ–¹å—çš„è¾¹é•¿ä¸º $l$ï¼Œç²¾ç¡®åŒºåŸŸåŠå¾„ä¸º $r$ï¼Œæœ‰ $l &gt; r$ã€‚ä½ç½®åæ ‡ $p_i$ è·ç¦»ç½‘æ ¼ä¸­å¿ƒ $s_j$ çš„è·ç¦»ä¸º $x_{ij}$\\[x_{ij} = \\vert p_i - s_j \\vert \\in [0,\\sqrt 2 l]\\]$x_{ij}=0$ è¡¨ç¤ºä½ç½®åæ ‡ä½äºç½‘æ ¼ $j$ ä¸­å¿ƒï¼Œ$x_{ij}$ çš„å–å€¼ä¸Šç•Œå¯å€ŸåŠ©ä¸‹å›¾é˜é‡Šã€‚å›¾ä¸­ï¼Œçº¢è‰²çš„ä½ç½®åæ ‡å±äºå››ä¸ªç›¸é‚»ç½‘æ ¼å†…ï¼Œè€Œç»¿è‰²çš„åæ ‡ä½ç½®å·²ç»ä¸å±äºå›¾ä¸­æ‰€ç¤ºçš„å››ä¸ªç›¸é‚»ç½‘æ ¼äº†ã€‚å¯ä»¥çœ‹å‡ºï¼Œä½ç½®åæ ‡è·ç¦»ç½‘æ ¼ä¸­å¿ƒæœ€è¿œä¸è¶…è¿‡ $\\sqrt 2 \\cdot l$ï¼Œå³å›¾ä¸­ç²‰è‰²æ–¹å½¢çš„å¯¹è§’ç‚¹è·ç¦»ã€‚è®¾è®¡åŸºäºè·ç¦»çš„éš¶å±åº¦å‡½æ•°å¦‚ä¸‹\\[\\begin{aligned}M_{i,j}^{temp} = \\left\\{\\begin{matrix}&amp;1\\quad &amp;d \\leq r\\\\ &amp;e^{-(x_{ij}-r)} \\quad &amp; d &gt; r\\end{matrix}\\right.\\end{aligned}\\]\\[M_{i,j} = \\frac{M_{i,j}^{temp}}{\\sum_{j}M_{i,j}^{temp}}\\]å…¶ä¸­ $M_{i,j}^{temp}$ æ˜¯ä¸´æ—¶éš¶å±åº¦å‡½æ•°ï¼Œ$M_{i,j}$ æ˜¯æœ€ç»ˆçš„éš¶å±åº¦å‡½æ•°ï¼Œç¬¬äºŒä¸ªå¼å­è¿›è¡Œäº†ä¸€ä¸ªå½’ä¸€åŒ–æ“ä½œã€‚éœ€è¦æé†’çš„æ˜¯ï¼Œä½œè€…å‡å®šå¦‚æœåæ ‡è½åœ¨äº†ç²¾ç¡®åŒºåŸŸï¼Œé‚£ä¹ˆå…¶åªå±äºè¯¥åŒºåŸŸä¸­å¿ƒä¸”éš¶å±åº¦ä¸º 1ï¼Œè€Œä¸å†è¿›è¡Œå½’ä¸€åŒ–æ“ä½œã€‚æ¢å¥è¯è¯´ï¼Œåªæœ‰è½åœ¨ä¸­é—´åŒºåŸŸçš„ä½ç½®åæ ‡æ‰éœ€è¦è¿›è¡Œä¸Šè¿°éš¶å±åº¦å‡½æ•°è®¡ç®—ã€‚è¿™ä¸ªåœ¨åé¢çš„ç®—æ³•ä¼ªä»£ç ä¸­å¯ä»¥çœ‹å‡ºæ¥ã€‚å€ŸåŠ©æ¨¡ç³Šé›†çš„æ¦‚å¿µæ¥å®šä¹‰æ¨¡ç³Šè½¨è¿¹ä½ç½®ï¼š$F_Loc_{p_i} =N_Loc_{p_i},M_Loc_{p_i}$ã€‚å…¶ä¸­ $N_Loc_{p_i}$ æ˜¯ä½ç½®åæ ‡çš„ä¸´è¿‘ç½‘æ ¼é›†åˆï¼Œ$M_Loc_{p_i}$ æ˜¯ç›¸åº”çš„éš¶å±åº¦ã€‚é‚£ä¹ˆå¯¹äºå‰é¢å›¾ä¸­çš„ä½ç½®åæ ‡ç‚¹ $p_1,p_2$ï¼Œå…¶æ¨¡ç³Šè½¨è¿¹ä½ç½®ä¸º\\[\\begin{aligned}F\\_Loc_{p_1} &amp;= (s_3), (1)\\\\F\\_Loc_{p_2} &amp;= (s_1, s_2, s_3, s_4), (0.2,0.25, 0.25, 0.3)\\end{aligned}\\]è¿›è¡Œæ¨¡ç³ŠåŒºåŸŸåˆ’åˆ†å’Œæ±‚è§£æ¨¡ç³Šè½¨è¿¹ä½ç½®çš„ç®—æ³•ä¼ªä»£ç å¦‚ä¸‹æ‰€ç¤º&lt;font color=#FF0000&gt;å¾ˆå¥‡æ€ªçš„æ˜¯ï¼Œä½œè€…åŸæ–‡çš„ä¼ªä»£ç ä¸­ï¼Œå½“ä½ç½®åæ ‡å¤„äºä¸­é—´åŒºåŸŸæ—¶ï¼ˆä¹Ÿå°±æ˜¯ä»£ç ä¸­çš„ ELSE éƒ¨åˆ†ï¼‰ï¼Œå¹¶æ²¡æœ‰ç»™å‡ºå¦‚ä½•è®¡ç®— $N_Loc_{p_i}$ çš„ã€‚&lt;/font&gt;æ³¨æ„ï¼$r$ çš„é€‰å–å¯¹æ¨¡ç³Šç©ºé—´åˆ’åˆ†å½±å“å¾ˆå¤§ã€‚å¦‚æœ  é€‰æ‹©ä¸€ä¸ªè¾ƒå°çš„ $r$ å¾ˆéš¾å¸®åŠ©æ•æ‰è½å…¥ä¸­é—´åŒºåŸŸçš„ä½ç½®ç‚¹ï¼Œå¦‚æœé€‰æ‹©å¾ˆå¤§çš„ $r$ ä¼šé™ä½é è¿‘ç½‘æ ¼ä¸­å¿ƒçš„ä¸åŒè½¨è¿¹ä½ç½®çš„ç›¸ä¼¼åº¦ï¼Œè¿˜ä¼šå¢åŠ è®¡ç®—ä»£ä»·ã€‚$r$ çš„å–å€¼å¯ä»¥å€ŸåŠ©è½¨è¿¹ä½ç½®åæ ‡çš„åˆ†å¸ƒæ¥æ ‡å®šã€‚3.1.2. æ¨¡ç³Šè½¨è¿¹è®¡ç®—å®šä¹‰æ¨¡ç³Šè½¨è¿¹ä¸º\\[F\\_Traj_i = N\\_seq_{Traji},M\\_seq_{Traji}\\]å…¶ä¸­ï¼Œ$N_seq_{Traji}$ æ˜¯è½¨è¿¹ä¸­æ¯ä¸ªä½ç½®åæ ‡ $N_Loc_{p_i}$ çš„ç¬›å¡å°”ä¹˜ç§¯ï¼ˆç›´ç§¯ï¼‰ï¼Œç›¸åº”çš„ $M_seq_{Traji}$ æ˜¯åæ ‡å¯¹åº”é‚»è¿‘ç½‘æ ¼çš„ç©ºé—´éš¶å±åº¦çš„ä¹˜ç§¯ã€‚é‚£ä¹ˆå¯¹äºåŒ…å« $n$ ä¸ªåæ ‡ç‚¹çš„è½¨è¿¹ $S_{seq_m} = N_seq_{Traji}$ æ˜¯ä¸€ä¸ª $4^n$ é¡¹åºåˆ—ï¼ˆ$n$ ä¸ªä½ç½®åæ ‡ï¼Œæ¯ä¸ªä½ç½®åæ ‡é‚»è¿‘ 4 ä¸ªç½‘æ ¼å•å…ƒï¼Œç›´ç§¯ï¼‰å‡è®¾çœŸå®è½¨è¿¹ $Traj_1 = (p_1, p_2)$ï¼Œé‚£ä¹ˆå¯¹åº”çš„æ¨¡ç³Šè½¨è¿¹ $F_Traj_1 = ( s_3s_2,s_3s_1,s_3s_3,s_3s_4 ),( 0.25,0.3,0.2,0.25 )$ã€‚è®¡ç®—æ¨¡ç³Šè½¨è¿¹çš„ç®—æ³•å¦‚ä¸‹  é¦–å…ˆæ ¹æ®ç®—æ³• 1 è®¡ç®—å‡ºæ¯ä¸ªè½¨è¿¹ä½ç½®çš„ç©ºé—´éš¶å±åº¦ï¼ˆline 2-5ï¼‰ã€‚  ç„¶åè®¡ç®—é‚»åŸŸç½‘æ ¼å•å…ƒåºåˆ—é›†ï¼Œé‡‡ç”¨ç›´ç§¯çš„å½¢å¼è®¡ç®—ï¼ˆline 6ï¼‰ã€‚  ç›¸åº”çš„éš¶å±åº¦åºåˆ—é€šè¿‡çŸ©é˜µä¹˜æ³•çš„å½¢å¼è®¡ç®—ï¼ˆline 7-12ï¼‰ã€‚&lt;font color=#FF0000&gt;ä»ç®—æ³•å’Œæè¿°ä¸Šå¾ˆéš¾çœ‹æ‡‚ï¼Œå¤§æ¦‚ç†è§£äº†ä¸‹ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚&lt;/font&gt;åºåˆ— $S_{ij}$ çš„ç¬¬ä¸€ä¸ªä¸‹æ ‡ $i$ è¡¨ç¤ºè½¨è¿¹åæ ‡ç‚¹çš„ç¼–å·ï¼Œä» 1 åˆ° $n$ ã€‚ç¬¬äºŒä¸ªä¸‹æ ‡ $j$ è¡¨ç¤ºè½¨è¿¹åæ ‡ç‚¹çš„å‘¨å›´å››ä¸ªé‚»è¿‘ç½‘æ ¼å•å…ƒç¼–å·ï¼Œ1-å·¦ä¸‹ï¼Œ2-å³ä¸‹ï¼Œ3-å³ä¸Šï¼Œ4-å·¦ä¸Š çš„é¡ºåº ã€‚å‰é¢å·²ç»åˆ†æè¿‡ä¸€å…±æœ‰ $4^n$ ä¸­å¯èƒ½çš„æ¨¡ç³Šè½¨è¿¹åºåˆ—ï¼Œæ¯”å¦‚å…¶ä¸­ä¸€ä¸ªæ¨¡ç³Šè½¨è¿¹åºåˆ—ä¸º\\[S_{11}S_{22}S_{34}S_{43}...S_{n1} = åæ ‡1å·¦ä¸‹ - åæ ‡2å³ä¸‹ - åæ ‡3å·¦ä¸Š - åæ ‡4å³ä¸Š...åæ ‡nå·¦ä¸‹\\]æ³¨æ„åˆ°ï¼Œæ¯ä¸ªåæ ‡å¯¹äºé‚»è¿‘å››ä¸ªç½‘æ ¼å•å…ƒéƒ½å¯ä»¥æ ¹æ® ç®—æ³•1 è®¡ç®—å‡ºç›¸åº”çš„éš¶å±åº¦ï¼Œé‚£ä¹ˆå¯¹äºä¸€ä¸ªå…·ä½“çš„æ¨¡ç³Šè½¨è¿¹åºåˆ—ï¼Œå…¶éš¶å±åº¦å°±æ˜¯æ¯ä¸ªåæ ‡ä¸å…¶æŸä¸ªæ–¹å‘é‚»è¿‘ç½‘æ ¼å•å…ƒçš„éš¶å±åº¦çš„ä¹˜ç§¯ã€‚3.2. æ¨¡ç³Š LSTMä½œè€…å¯¹ LSTM å•å…ƒè¿›è¡Œäº†æ”¹è¿›ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚å°†éš¶å±åº¦é›†åˆ $M_seq_{Traj_i}$ ä½œä¸ºæƒé‡çŸ©é˜µï¼Œå°†æ¨¡ç³Šè½¨è¿¹åºåˆ—ä½œä¸ºè¾“å…¥ã€‚ç»è¿‡è®­ç»ƒï¼Œæ¯ä¸ªä½ç½®åæ ‡çš„é‚»è¿‘ç½‘æ ¼å•å…ƒçš„æƒé‡éƒ½èƒ½å¾—åˆ°æ›´æ–°ã€‚ä¸Šé¢çš„ LSTM å•å…ƒä¾ç„¶åŒ…å«ä¸‰ä¸ªé—¨ï¼Œé—å¿˜é—¨ï¼Œè¾“å…¥é—¨ï¼Œè¾“å‡ºé—¨ã€‚LSTM å•å…ƒçš„çŠ¶æ€å­˜å‚¨ç€å†å²ä¿¡æ¯ï¼Œå½“æ–°è½¨è¿¹è¾“å…¥æ—¶ï¼Œé—å¿˜é—¨å†³å®šç§»é™¤å“ªäº›ä¿¡æ¯ã€‚å¯ä»¥é€šè¿‡ä¸‹é¢çš„å¼å­è¡¨ç¤º\\[f_t = \\sigma(M\\_seq_{Traj_t}\\cdot W_f\\cdot [h_{t-1},N\\_seq_{Traj_t}]+ b_f)\\]å…¶ä¸­ï¼Œ$\\sigma$ è¡¨ç¤º $sigmoid$ æ¿€æ´»å‡½æ•°ã€‚$f_t$ è¡¨ç¤ºé—å¿˜é—¨å±‚ã€‚$N_seq_{Traj_t}$ æ˜¯å½“å‰é‚»è¿‘ç½‘æ ¼å•å…ƒåºåˆ—è¾“å…¥ï¼Œ$M_seq_{Traj_t}$ æ˜¯å½“å‰é‚»è¿‘ç½‘æ ¼å•å…ƒåºåˆ—çš„éš¶å±åº¦ï¼Œ$h_{t -1}$ æ˜¯ä¸Šä¸€æ—¶åˆ»çš„è¾“å‡ºï¼Œ$W_f$ æ˜¯é—å¿˜é—¨å±‚çš„æƒé‡çŸ©é˜µï¼Œ$b_f$ æ˜¯é—å¿˜é—¨å±‚çš„åå·®ã€‚  å¯ä»¥å‚è€ƒä¼ ç»Ÿçš„ LSTM å•å…ƒå’Œå…¬å¼ä¾¿äºæ¯”å¯¹ã€‚è¿™é‡Œå°†å…¬å¼åˆ—å†™å¦‚ä¸‹ï¼š\\[\\boldsymbol f_t = \\sigma(\\boldsymbol W_f\\cdot[\\boldsymbol h_{t-1}, \\boldsymbol x_t]^T + \\boldsymbol b_f)\\]ä¸‹ä¸€æ­¥å†³å®šæ–°çš„æ¨¡ç³Šè½¨è¿¹å¦‚ä½•å­˜è¿› LSTM å•å…ƒã€‚è¿™è¦åˆ†ä¸¤æ­¥è¿›è¡Œï¼Œè¾“å…¥é—¨å†³å®šä»€ä¹ˆå€¼æ›´æ–°ï¼Œtanh å‡½æ•°äº§ç”Ÿä¸€ä¸ªæ–°çš„å€™é€‰å‘é‡ï¼Œå¦‚ä¸‹å¼æ‰€ç¤º\\[\\begin{aligned}i_t &amp;= \\sigma(M\\_seq_{Traj_t}\\cdot W_i\\cdot [h_{t-1},N\\_seq_{Traj_t}]+ b_i)\\\\\\tilde{C}_t &amp;= tanh(M\\_seq_{Traj_t}\\cdot W_c\\cdot [h_{t-1},N\\_seq_{Traj_t}]+ b_c)\\\\\\end{aligned}\\]  ç›¸åº”çš„ä¼ ç»Ÿçš„ LSTM å•å…ƒå’Œå…¬å¼ä¸º\\[\\begin{aligned}\\boldsymbol i_t &amp;= \\sigma(\\boldsymbol W_i\\cdot[\\boldsymbol h_{t-1}, \\boldsymbol x_t]^T + \\boldsymbol b_f)\\\\\\tilde {\\boldsymbol c_t} &amp;=\\sigma(\\boldsymbol W_c\\cdot[\\boldsymbol h_{t-1}, \\boldsymbol x_t]^T + \\boldsymbol b_f)\\end{aligned}\\]ä¸ä¼ ç»Ÿ LSTM ç›¸åŒï¼Œæ›´æ–°ç»†èƒçŠ¶æ€ $C_t$\\[C_t = f_t \\odot c_{t-1} + i_t \\odot \\tilde {\\boldsymbol c_t}\\]æœ€åï¼Œæ›´æ–° LSTM å•å…ƒçš„è¾“å‡º\\[\\begin{aligned}o_t &amp;= \\sigma(M\\_seq_{Traj_t}\\cdot W_o\\cdot [h_{t-1},N\\_seq_{Traj_t}]+ b_o)\\\\h_t &amp;= o_t\\odot tanh(C_t)\\\\\\end{aligned}\\]$\\odot$ ä¸ºé€å…ƒç´ ç›¸ä¹˜ï¼ˆelementwise productï¼‰ã€‚3.3. TrjPre-LSTM å»ºæ¨¡ä½œè€…å°†æ•´ä¸ªè½¨è¿¹åˆ’åˆ†ä¸ºå›ºå®šé•¿åº¦çš„å­è½¨è¿¹ï¼Œç„¶åå¯¹æ¯æ¡å­è½¨è¿¹è®¡ç®—éš¶å±åº¦ã€‚ä¸ºäº†å…¼é¡¾å‘¨æœŸæ€§å’Œæœ€è¿‘çš„è¿åŠ¨æ¨¡å¼ï¼Œå­è½¨è¿¹ä»¬è¢«åˆ’åˆ†æˆä¸¤ç±»ï¼šä¸€ç±»æ˜¯é è¿‘é¢„æµ‹ç‚¹çš„ç›¸è¿‘è½¨è¿¹ï¼Œä¸€ç±»æ˜¯å…¶å®ƒæ—¥æœŸç›¸ä¼¼æ—¶åˆ»çš„è½¨è¿¹ã€‚ç»™å®šé¢„æµ‹ç‚¹ $p_t$ å’Œæ—¶é—´ç‰‡æ®µ $q$ ï¼ˆåœ¨æ–‡ç« ä¸­å–ä¸ºä¸€å¤©ï¼‰ï¼Œé è¿‘é¢„æµ‹ç‚¹çš„ç›¸è¿‘è½¨è¿¹ä¸º $seq_t^{close} = {p_{t-m},â€¦,p_{t-2},p_{t-1}}$ è€Œå‘¨æœŸæ€§è½¨è¿¹ä¸º $seq_t^{period} = {p_{t-mq},â€¦,p_{t-2q},p_{t-1*q}}$ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºä¸Šå›¾ç»™å‡ºäº† TrjPre-LSTM æ–¹æ³•çš„æ¶æ„ï¼Œä¸»è¦ç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼Œåˆ†åˆ«å»ºæ¨¡è¿‘æœŸæ—¶é—´çš„å½±å“å’Œå‘¨æœŸæ€§å½±å“ã€‚äºŒè€…å…±ç”¨ä¸€ä¸ªç¥ç»ç½‘ç»œç»“æ„ï¼ŒäºŒè€…çš„è¾“å‡ºé€šè¿‡æ±‚å’Œèåˆåœ¨ä¸€èµ·ã€‚æœ€åçš„ç»“æœé€šè¿‡ä¸€ä¸ª softmax å±‚è½¬åŒ–ä¸ºå›ºå®šç»´åº¦çš„å‘é‡ï¼ˆè¿™ç§æ“ä½œåœ¨å¤šåˆ†ç±»é—®é¢˜ä¸­è¢«å¤§é‡é‡‡ç”¨ï¼‰ã€‚é‡‡ç”¨è·¨ç±»äº¤å‰ç†µä½œä¸ºæŸå¤±å‡½æ•°ã€‚4. ç®—ä¾‹ç ”ç©¶ä½¿ç”¨ç§»åŠ¨ç”µè¯ä¿¡å·æ•°æ®åº“ï¼Œ10 ä¸‡ä¸ªç”¨æˆ·ï¼Œ15 å¤©å…±è®¡ 150 ä¸‡æ¡è½¨è¿¹ã€‚å°†ç½‘æ ¼åˆ’åˆ†ä¸º $1km \\times 1 km$ï¼Œç²¾ç¡®åŒºåŸŸåŠå¾„ $r=0.45km$ã€‚åœ¨ i7-3770 @3.4GHz å’Œ 116 GB å†…å­˜ Windows 7 çš„ PC ä¸Šè¿›è¡Œå®éªŒã€‚TrjPre-FLSTM é‡‡ç”¨ Python å®ç°ã€‚ç»™å®šä¸€æ¡è½¨è¿¹ $Traj_k = p_1,p_2,â€¦,p_n$ å’Œä¸€æ¡é¢„æµ‹è½¨è¿¹ $Traj_kâ€™=p_1â€™,p_2â€™,â€¦,p_nâ€™$ï¼Œé¢„æµ‹ç²¾åº¦å®šä¹‰å¦‚ä¸‹\\[\\begin{aligned}H_{(p_i,p_i')}=\\left\\{\\begin{matrix}1&amp;\\quad if \\vert p_i-p_i' \\vert \\leq \\gamma \\\\ 0&amp;\\quad else\\end{matrix}\\right.\\\\Acc = \\frac{\\sum_{i=1}^m H_{(p_i,p_i')}}{\\vert Traj' \\vert}\\end{aligned}\\]å…¶ä¸­ï¼Œ$\\vert p_i-p_iâ€™ \\vert$ æ˜¯çœŸå®åæ ‡ç‚¹ $p_i$ å’Œé¢„æµ‹åæ ‡ç‚¹ $p_iâ€™$ çš„æ¬§å¼è·ç¦»ï¼Œ$\\gamma$ æ˜¯è·ç¦»é—¨é™ï¼Œ$\\vert Trajâ€™ \\vert$ æ˜¯é¢„æµ‹è½¨è¿¹çš„é•¿åº¦ã€‚ç»™å®šå¤šæ¡è½¨è¿¹çš„é¢„æµ‹ç»“æœ $Results = Acc_1, Acc_2,â€¦,Acc_m$ï¼Œé¢„æµ‹ç²¾åº¦çš„æ ‡å‡†å·®å®šä¹‰ä¸º\\[Stdev=\\sqrt{\\frac{\\sum_{(i=1)}^m(Acc_i-\\bar{Acc})^2}{m-1}}\\]å…¶ä¸­ $\\bar{Acc}$ æ˜¯é¢„æµ‹ç²¾åº¦çš„å¹³å‡å€¼ã€‚ç”±äºç½‘æ ¼è¾¹é•¿ $1km$ï¼Œæˆ‘ä»¬å®šä¹‰ $\\gamma = 1km$ã€‚5. å‚è€ƒæ–‡çŒ®æ— ã€‚"
  },
  
  {
    "title": "æ—¥å¸¸tipsæ‰‹å†Œï¼ˆRimeè¾“å…¥æ³•ï¼‰",
    "url": "/posts/rime-shift-switch-zh-en/",
    "categories": "Diary",
    "tags": "other",
    "date": "2020-10-30 22:06:49 +0800",
    





    
    "snippet": "æœ¬æ–‡è®°å½•ä¸ªäººç§‘ç ”ç”Ÿæ´»ä¸­çš„å„ç§å°tipså’Œé‡åˆ°çš„é—®é¢˜åŠå…¶è§£å†³æ–¹æ¡ˆï¼Œç•™ä½œæé†’æŸ¥é˜…ã€‚  1. Rime è¾“å…¥æ³•          1.1. åŸºç¡€é…ç½®      1.2. çš®è‚¤è®¾ç½®      1.3. ç‰¹æ®Šç¬¦å·å¿«é€Ÿè¾“å…¥      1.4. shift ç›´æ¥ä¸Šå±ä¸”åˆ‡æ¢ä¸­è‹±æ–‡        2. å‚è€ƒæ–‡çŒ®1. Rime è¾“å…¥æ³•1.1. åŸºç¡€é…ç½®XNOM. 30åˆ†é’Ÿæå®š è‡ªç”±è¾“å…¥æ³•RIMEç®€æ˜é…ç½®æŒ‡å—  ...",
    "content": "æœ¬æ–‡è®°å½•ä¸ªäººç§‘ç ”ç”Ÿæ´»ä¸­çš„å„ç§å°tipså’Œé‡åˆ°çš„é—®é¢˜åŠå…¶è§£å†³æ–¹æ¡ˆï¼Œç•™ä½œæé†’æŸ¥é˜…ã€‚  1. Rime è¾“å…¥æ³•          1.1. åŸºç¡€é…ç½®      1.2. çš®è‚¤è®¾ç½®      1.3. ç‰¹æ®Šç¬¦å·å¿«é€Ÿè¾“å…¥      1.4. shift ç›´æ¥ä¸Šå±ä¸”åˆ‡æ¢ä¸­è‹±æ–‡        2. å‚è€ƒæ–‡çŒ®1. Rime è¾“å…¥æ³•1.1. åŸºç¡€é…ç½®XNOM. 30åˆ†é’Ÿæå®š è‡ªç”±è¾“å…¥æ³•RIMEç®€æ˜é…ç½®æŒ‡å—      Rime çš„å„ç§é…ç½®ï¼Œå‡æ˜¯ç”± .yaml æ–‡ä»¶æ‰€å®šä¹‰ã€‚yaml æ˜¯ä¸€ç§æ ‡è®°è¯­è¨€ã€‚.yaml æ–‡ä»¶å®é™…ä¸Šæ˜¯æ–‡æœ¬æ–‡æ¡£ã€‚å¯ä½¿ç”¨è®°äº‹æœ¬ã€æˆ– Emeditor ç­‰è¿›è¡Œç¼–è¾‘ã€‚        å¯¹ Rime è¿›è¡Œè‡ªå®šä¹‰ï¼Œæ˜¯é€šè¿‡å¯¹ .custom.yaml æ–‡ä»¶ä¿®æ”¹è¾¾æˆã€‚ä¸åŒçš„ .custom.yaml æ–‡ä»¶ï¼Œæ§åˆ¶ä¸åŒçš„åŠŸèƒ½å®ç°ã€‚.custom.yaml å®é™…ä¸Šæ˜¯ç›¸å½“äºå¯¹ .yaml æ–‡ä»¶æ‰“è¡¥ä¸ï¼Œåœ¨é‡æ–°éƒ¨ç½²åï¼Œä¼šå°† .custom.yaml ä¸­çš„å†…å®¹å†™å…¥ .yaml æ–‡ä»¶ä¸­ï¼Œå®Œæˆè‡ªå®šã€‚          ä¾‹ä¸€ï¼šweasel.yaml æ˜¯å¸¸è§„è®¾ç½®ï¼Œä¸»è¦æ§åˆ¶æ‰˜ç›˜å›¾æ ‡ã€å€™é€‰è¯æ¨ªç«–æ’åˆ—ã€ç•Œé¢é…è‰²ç­‰ç­‰åŠŸèƒ½ã€‚é‚£ä¹ˆï¼Œæˆ‘ä»¬éœ€è¦å®šåˆ¶ç•Œé¢é…è‰²ï¼Œåªéœ€åœ¨ weasel.custom.yaml ä¸­ä¿®æ”¹ï¼Œé‡æ–°éƒ¨ç½²åå°±å¯å®ç°ã€‚      ä¾‹äºŒï¼šdefault.yaml æ˜¯é»˜è®¤è®¾ç½®ï¼Œä¸»è¦æ§åˆ¶å¿«æ·é”®ã€æŒ‰é”®ä¸Šå±ç­‰ç­‰ã€‚åŒæ ·ï¼Œä½œä¿®æ”¹å°±ç¼–è¾‘ default.custom.yaml æ–‡ä»¶å³å¯ã€‚      ä¾‹ä¸‰ï¼šä»¥ä¸Šæ˜¯å…¨å±€è®¾ç½®ï¼Œäº¦å³ä¸è®ºä½¿ç”¨ä½•ç§è¾“å…¥æ–¹æ¡ˆï¼Œå‡èµ·ä½œç”¨ã€‚double_pinyin_flypy.custom.yaml è¿™ç§åˆ™æ˜¯è¾“å…¥æ³•æ–¹æ¡ˆè®¾ç½®ã€‚ä¸»è¦å®ç°ç‰¹æ®Šæ ‡ç‚¹ç¬¦å·ã€è¯åº“ç­‰åŠŸèƒ½ã€‚æ˜¯é’ˆå¯¹ç‰¹å®šè¾“å…¥æ–¹æ¡ˆçš„é…ç½®ã€‚      å¯è§ï¼Œæˆ‘ä»¬ç»å¤§éƒ¨åˆ†çš„è‡ªå®šï¼Œéƒ½åªéœ€ä¿®æ”¹å¯¹åº”çš„ .custom.yaml æ–‡ä»¶å³å¯ã€‚  æ‰€æœ‰è‡ªå®šä¿®æ”¹ï¼Œéƒ½å¿…é¡»é‡æ–°éƒ¨ç½²ã€‚åœ¨å¼€å§‹èœå•å¯ä»¥æ‰¾åˆ°ã€å°ç‹¼æ¯«ã€‘é‡æ–°éƒ¨ç½²ã€‚1.2. çš®è‚¤è®¾ç½®XNOM. 30åˆ†é’Ÿæå®š è‡ªç”±è¾“å…¥æ³•RIMEç®€æ˜é…ç½®æŒ‡å—æ‰“å¼€ weasel.custom.yaml æ–‡ä»¶ï¼Œè‹¥æ²¡æœ‰ï¼Œåˆ™æ–°å»ºã€‚æ‰€æœ‰è‡ªå®šä¹‰é¡¹å‡åœ¨ patch: ä¸‹ï¼Œæ³¨æ„ç¼©è¿›customization:  distribution_code_name: Weasel  distribution_version: 0.14.3  generator: \"Weasel::UIStyleSettings\"  modified_time: \"Mon Jul 13 11:31:05 2020\"  rime_version: 1.5.3patch:  \"style/color_scheme\": google # çš®è‚¤é£æ ¼  \"style/layout/border_width\": 0  \"style/layout/border\": 0  \"style/horizontal\": true #æ¨ªæ’æ˜¾ç¤ºå€™é€‰è¯  \"style/font_face\": Microsoft YaHei # å€™é€‰è¯å­—ä½“  \"style/font_point\": 12 # å€™é€‰è¯å­—å·ä¸€ä¸ªæ¨¡ä»¿ Windows 10 è‡ªå¸¦çš„å¾®è½¯æ‹¼éŸ³çš®è‚¤çš„è®¾ç½®å¦‚ä¸‹ï¼Œä»¥ä¾›ä¿®æ”¹å°è¯•å‚è€ƒï¼šcustomization:  distribution_code_name: Weasel  distribution_version: 0.14.3  generator: \"Weasel::UIStyleSettings\"  modified_time: \"Thu Jun 27 17:32:21 2019\"  rime_version: 1.5.3patch:  \"style/display_tray_icon\": true  \"style/horizontal\": true #æ¨ªæ’æ˜¾ç¤º  \"style/font_face\": \"Microsoft YaHei\" #å­—ä½“  \"style/font_point\": 13 #å­—ä½“å¤§å°  \"style/inline_preedit\": true # åµŒå…¥å¼å€™é€‰çª—å•è¡Œæ˜¾ç¤º  \"style/layout/border_width\": 0  \"style/layout/border\": 0  \"style/layout/margin_x\": 12 #å€™é€‰å­—å·¦å³è¾¹è·  \"style/layout/margin_y\": 12 #å€™é€‰å­—ä¸Šä¸‹è¾¹è·  \"style/layout/hilite_padding\": 12 #å€™é€‰å­—èƒŒæ™¯è‰²è‰²å—é«˜åº¦ è‹¥æƒ³å€™é€‰å­—èƒŒæ™¯è‰²å—æ— è¾¹ç•Œå¡«å……å€™é€‰æ¡†ï¼Œä»…éœ€å…¶é«˜åº¦å’Œå€™é€‰å­—ä¸Šä¸‹è¾¹è·ä¸€è‡´å³å¯  \"style/layout/hilite_spacing\": 3 # åºå·å’Œå€™é€‰å­—ä¹‹é—´çš„é—´éš”  \"style/layout/spacing\": 10 #ä½œç”¨ä¸æ˜  \"style/layout/candidate_spacing\": 24 # å€™é€‰å­—é—´éš”  \"style/layout/round_corner\": 0 #å€™é€‰å­—èƒŒæ™¯è‰²å—åœ†è§’å¹…åº¦  \"style/color_scheme\": Micosoft  \"preset_color_schemes/Micosoft\":    name: \"Micosoft\"    author: \"XNOM\"    back_color: 0xffffff #å€™é€‰æ¡† èƒŒæ™¯è‰²    border_color: 0xD77800 #å€™é€‰æ¡† è¾¹æ¡†é¢œè‰²    text_color: 0x000000 #å·²é€‰æ‹©å­— æ–‡å­—é¢œè‰²    hilited_text_color: 0x000000 #å·²é€‰æ‹©å­—å³ä¾§æ‹¼éŸ³ æ–‡å­—é¢œè‰²    hilited_back_color: 0xffffff #å·²é€‰æ‹©å­—å³ä¾§æ‹¼éŸ³ èƒŒæ™¯è‰²    hilited_candidate_text_color: 0xffffff #å€™é€‰å­—é¢œè‰²    hilited_candidate_back_color: 0xD77800 #å€™é€‰å­—èƒŒæ™¯è‰²    candidate_text_color: 0x000000 #æœªå€™é€‰å­—é¢œè‰²1.3. ç‰¹æ®Šç¬¦å·å¿«é€Ÿè¾“å…¥ç™¾åº¦è´´å§. å°ç‹¼æ¯«è¾“å…¥æ³•æ€ä¹ˆè¾“å…¥å¸Œè…Šå­—æ¯å’Œæ•°å­¦ç¬¦å·é¦–å…ˆç¡®å®šä½¿ç”¨çš„æ‹¼éŸ³æ–¹æ¡ˆï¼Œæ¯”å¦‚å¦‚æœä½¿ç”¨ luna_pinyin_simp ï¼ˆæ˜æœˆæ‹¼éŸ³ç®€åŒ–å­—ï¼‰æ–¹æ¡ˆï¼Œé‚£ä¹ˆæ–°å»º lunar_pinyin_simp.custom.yaml é…ç½®æ–‡ä»¶ï¼Œå†™å…¥ï¼špatch:  \"punctuator/import_preset\" : symbols  \"recognizer/patterns/punct\": \"^/([A-Z|a-z]*|[0-9]|10)$\"ç„¶åå°ç‹¼æ¯«æ–‡ä»¶å¤¹é‡Œç‚¹å‡» å°ç‹¼æ¯«é‡æ–°éƒ¨ç½²ï¼Œå³å¯ã€‚é€šè¿‡ / é”®é…åˆç¼©å†™å®ç°å¿«é€Ÿè¾“å…¥ã€‚æ³¨æ„ä½¿ç”¨é”®ç›˜çš„ ? é”®å”¤èµ·ï¼Œè€Œä¸æ˜¯å°é”®ç›˜çš„ / é”®ã€‚  è¾“å…¥ /xl ç›´æ¥ç»™å‡ºå¸Œè…Šå­—æ¯ï¼Œå¦‚ $\\alpha$ ç­‰ã€‚  è¾“å…¥ /sx ç›´æ¥ç»™å‡ºå¸¸ç”¨æ•°å­¦ç¬¦å·ï¼Œå¦‚ Â±, Ã· ç­‰ã€‚  è¾“å…¥ /jh ç›´æ¥ç»™å‡ºä¸€äº›ç‰¹æ®Šç¬¦å·ï¼Œå¦‚ â– ï¼Œâ–¡ï¼Œâ–£ï¼Œâ–¥ ç­‰ã€‚1.4. shift ç›´æ¥ä¸Šå±ä¸”åˆ‡æ¢ä¸­è‹±æ–‡Xeon-Shao. å°ç‹¼æ¯«ï¼ˆRimeï¼‰è¾“å…¥æ³•è®¾ç½®Shiftç›´æ¥ä¸Šå±è‹±æ–‡å­—ç¬¦å¹¶åˆ‡æ¢ä¸ºè‹±æ–‡çŠ¶æ€æ–¹æ³•å°ç‹¼æ¯«é»˜è®¤è¾“å…¥æ–¹å¼ä¸‹ï¼Œå·¦Shifté”®åªåˆ‡æ¢ä¸ºè‹±æ–‡ï¼Œå³Shifté”®ç›´æ¥ä¸Šå±ä¸­æ–‡ã€‚è¿™å¯¹äºç”¨æƒ¯äº†æœç‹—çš„äººæ¥è¯´åœ¨è¿›è¡Œä¸­è‹±æ–‡æ··è¾“çš„æ—¶å€™ç»å¸¸å‡ºé”™ï¼Œç‰¹åˆ«å½±å“æ•ˆç‡ï¼Œæ¥ä¸‹æ¥æä¾›æ–¹æ³•è§£å†³è¿™ä¸ªé—®é¢˜ã€‚  å¼€å§‹èœå•ä¸­ï¼Œæ‰¾åˆ°å°ç‹¼æ¯«çš„æ–‡ä»¶å¤¹ï¼Œæ‰“å¼€ â€œç”¨æˆ·èµ„æ–™æ–‡ä»¶å¤¹â€ï¼Œå¦‚æœæœ‰ weasel.custom.yamlï¼Œåˆ™å¤åˆ¶ä¸€ä»½ï¼Œå¤åˆ¶åçš„æ–‡ä»¶é‡å‘½åä¸º default.custom.yamlï¼›å¦‚æœæ²¡æœ‰ï¼Œåˆ™è‡ªå·±æ–°å»ºæ–‡ä»¶å‘½åä¸º default.custom.yamlï¼Œå¹¶å°†å†…å®¹ä¿®æ”¹ä¸ºå¦‚ä¸‹ï¼šcustomization:  distribution_code_name: Weasel  distribution_version: 0.12.0  generator: \"Weasel::UIStyleSettings\"  modified_time: \"Thu Nov 15 09:43:07 2018\"  rime_version: 1.3.2patch:  \"ascii_composer/switch_key/Shift_L\": commit_code  å°ç‹¼æ¯«æ–‡ä»¶å¤¹é‡Œç‚¹å‡» â€œå°ç‹¼æ¯«é‡æ–°éƒ¨ç½²â€ï¼›Shift_L: commit_code çš„æ„æ€æ˜¯ï¼šå…¶ä¸­ L æŒ‡ Leftï¼Œå·¦çš„æ„æ€ã€‚commit- æäº¤ã€‚codeï¼ ä»£ç ã€‚ å½“æˆ‘ä»¬è¾“å…¥ä¸€æ®µæ–‡å­—æœªä¸Šå±ä¹‹å‰ï¼ŒæŒ‰æ­¤é”®åå­—ç¬¦å°†è¢«å°†ç›´æ¥ä¸Šå±ã€‚2. å‚è€ƒæ–‡çŒ®æ— ã€‚"
  },
  
  {
    "title": "æ·±åº¦å­¦ä¹ åŸºç¡€ï¼ˆæ¦‚ç‡ä¸ç»Ÿè®¡ï¼‰",
    "url": "/posts/deep-learning-probability-basic/",
    "categories": "Academic, Knowledge",
    "tags": "statistics",
    "date": "2020-10-30 10:46:19 +0800",
    





    
    "snippet": "æœ¬æ–‡ä¸»è¦ä»‹ç»æ¦‚ç‡ä¸ç»Ÿè®¡çš„ç›¸å…³çŸ¥è¯†ï¼ŒåŒ…æ‹¬æ¦‚ç‡çš„åŸºæœ¬æ¦‚å¿µï¼Œä¼¼ç„¶å‡½æ•°ï¼Œå…¨æ¦‚ç‡ï¼Œæ¡ä»¶æ¦‚ç‡ï¼Œè´å¶æ–¯å…¬å¼ï¼Œä¿¡æ¯ç†µç­‰æ¦‚å¿µçš„ä»‹ç»ã€‚  1. åŸºæœ¬æ¦‚å¿µ          1.1. æ¦‚ç‡å®šä¹‰      1.2. éšæœºå˜é‡      1.3. æ¦‚ç‡åˆ†å¸ƒä¸æ¦‚ç‡å¯†åº¦      1.4. æ¦‚ç‡å’Œç»Ÿè®¡      1.5. æ¦‚ç‡å‡½æ•°ä¸ä¼¼ç„¶å‡½æ•°      1.6. æå¤§ä¼¼ç„¶ä¼°è®¡        2. æ¦‚ç‡          2...",
    "content": "æœ¬æ–‡ä¸»è¦ä»‹ç»æ¦‚ç‡ä¸ç»Ÿè®¡çš„ç›¸å…³çŸ¥è¯†ï¼ŒåŒ…æ‹¬æ¦‚ç‡çš„åŸºæœ¬æ¦‚å¿µï¼Œä¼¼ç„¶å‡½æ•°ï¼Œå…¨æ¦‚ç‡ï¼Œæ¡ä»¶æ¦‚ç‡ï¼Œè´å¶æ–¯å…¬å¼ï¼Œä¿¡æ¯ç†µç­‰æ¦‚å¿µçš„ä»‹ç»ã€‚  1. åŸºæœ¬æ¦‚å¿µ          1.1. æ¦‚ç‡å®šä¹‰      1.2. éšæœºå˜é‡      1.3. æ¦‚ç‡åˆ†å¸ƒä¸æ¦‚ç‡å¯†åº¦      1.4. æ¦‚ç‡å’Œç»Ÿè®¡      1.5. æ¦‚ç‡å‡½æ•°ä¸ä¼¼ç„¶å‡½æ•°      1.6. æå¤§ä¼¼ç„¶ä¼°è®¡        2. æ¦‚ç‡          2.1. æ¡ä»¶æ¦‚ç‡å…¬å¼      2.2. å…¨æ¦‚ç‡å…¬å¼      2.3. æ¦‚ç‡çš„ä¸¤å¤§å­¦æ´¾      2.4. è´å¶æ–¯å…¬å¼        3. ç†µ          3.1. è‡ªä¿¡æ¯      3.2. ä¿¡æ¯ç†µ      3.3. ç›¸å¯¹ç†µï¼ˆKLæ•£åº¦ï¼‰      3.4. äº¤å‰ç†µ      3.5. softmax å‡½æ•°        4. å‚è€ƒæ–‡çŒ®1. åŸºæœ¬æ¦‚å¿µ1.1. æ¦‚ç‡å®šä¹‰æ¡ä»¶æ¦‚ç‡ï¼š$P(A\\vert B)$ åœ¨æŸæ¡ä»¶ä¸‹äº‹ä»¶å‘ç”Ÿçš„æ¦‚ç‡ã€‚å…ˆéªŒæ¦‚ç‡ï¼šæŒ‡æ ¹æ®ä»¥å¾€ç»éªŒå’Œåˆ†æå¾—åˆ°çš„æ¦‚ç‡ï¼Œå¦‚å…¨æ¦‚ç‡å…¬å¼ï¼Œå®ƒå¾€å¾€ä½œä¸ºâ€ç”±å› æ±‚æœâ€é—®é¢˜ä¸­çš„â€å› â€å‡ºç°çš„æ¦‚ç‡ã€‚åéªŒæ¦‚ç‡ï¼šå·²çŸ¥åŸåˆ†å¸ƒï¼Œåœ¨å®é™…å‘ç”ŸæŸäº‹ä»¶æ—¶,æ˜¯åŸå…ˆæŸæƒ…å†µçš„å¯èƒ½æ€§ã€‚åéªŒæ¦‚ç‡æ˜¯ä¿¡æ¯ç†è®ºçš„åŸºæœ¬æ¦‚å¿µä¹‹ä¸€ã€‚åéªŒæ¦‚ç‡æ˜¯æŒ‡åœ¨å¾—åˆ°â€œç»“æœâ€çš„ä¿¡æ¯åé‡æ–°ä¿®æ­£çš„æ¦‚ç‡ï¼Œæ˜¯â€œæ‰§æœå¯»å› â€é—®é¢˜ä¸­çš„â€æœâ€ã€‚å…ˆéªŒæ¦‚ç‡ä¸åéªŒæ¦‚ç‡æœ‰ä¸å¯åˆ†å‰²çš„è”ç³»ï¼ŒåéªŒæ¦‚ç‡çš„è®¡ç®—è¦ä»¥å…ˆéªŒæ¦‚ç‡ä¸ºåŸºç¡€ã€‚äº‹æƒ…è¿˜æ²¡æœ‰å‘ç”Ÿï¼Œè¦æ±‚è¿™ä»¶äº‹æƒ…å‘ç”Ÿçš„å¯èƒ½æ€§çš„å¤§å°ï¼Œæ˜¯å…ˆéªŒæ¦‚ç‡ã€‚äº‹æƒ…å·²ç»å‘ç”Ÿï¼Œè¦æ±‚è¿™ä»¶äº‹æƒ…å‘ç”Ÿçš„åŸå› æ˜¯ç”±æŸä¸ªå› ç´ å¼•èµ·çš„å¯èƒ½æ€§çš„å¤§å°ï¼Œæ˜¯åéªŒæ¦‚ç‡ã€‚åéªŒæ¦‚ç‡æ˜¯ä¸€ç§æ¡ä»¶æ¦‚ç‡ã€‚ä¸€ç§è§£é‡Šè®¤ä¸ºï¼Œæ¡ä»¶æ¦‚ç‡æ˜¯ä¸ªæ•°å­¦åç§°ï¼ŒåéªŒæ¦‚ç‡æ˜¯å»ºæ¨¡çš„æ—¶å€™èµ‹äºˆäº†ä¸€å®šçš„æ„ä¹‰ã€‚ä¸€èˆ¬çš„æ¡ä»¶æ¦‚ç‡ï¼Œæ¡ä»¶å’Œäº‹ä»¶å¯ä»¥æ˜¯ä»»æ„çš„ï¼›å¯¹äºåéªŒæ¦‚ç‡ï¼Œå®ƒé™å®šäº†äº‹ä»¶ä¸ºéšå˜é‡å–å€¼ï¼Œè€Œæ¡ä»¶ä¸ºè§‚æµ‹ç»“æœã€‚è”åˆæ¦‚ç‡ï¼š$P(AB)$ï¼Œè¡¨ç¤ºä¸¤ä¸ªäº‹ä»¶å…±åŒå‘ç”Ÿçš„æ¦‚ç‡ã€‚è¾¹ç¼˜æ¦‚ç‡ï¼šæ˜¯æŸä¸ªäº‹ä»¶å‘ç”Ÿçš„æ¦‚ç‡ï¼Œè€Œä¸å…¶å®ƒäº‹ä»¶æ— å…³ã€‚åœ¨è”åˆæ¦‚ç‡ä¸­ï¼ŒæŠŠæœ€ç»ˆç»“æœä¸­ä¸éœ€è¦çš„é‚£äº›äº‹ä»¶åˆå¹¶æˆå…¶äº‹ä»¶çš„å…¨æ¦‚ç‡è€Œæ¶ˆå¤±ï¼ˆå¯¹ç¦»æ•£éšæœºå˜é‡ç”¨æ±‚å’Œå¾—å…¨æ¦‚ç‡ï¼Œå¯¹è¿ç»­éšæœºå˜é‡ç”¨ç§¯åˆ†å¾—å…¨æ¦‚ç‡ï¼‰ã€‚è¿™ç§°ä¸ºè¾¹ç¼˜åŒ–ï¼ˆmarginalizationï¼‰ã€‚$A$ çš„è¾¹ç¼˜æ¦‚ç‡è¡¨ç¤ºä¸º $P(A)$ï¼Œ$B$ çš„è¾¹ç¼˜æ¦‚ç‡è¡¨ç¤ºä¸º $P(B)$ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨è¿™äº›å®šä¹‰ä¸­ $A$ ä¸ $B$ ä¹‹é—´ä¸ä¸€å®šæœ‰å› æœæˆ–è€…æ—¶é—´é¡ºåºå…³ç³»ã€‚$A$ å¯èƒ½ä¼šå…ˆäº $B$ å‘ç”Ÿï¼Œä¹Ÿå¯èƒ½ç›¸åï¼Œä¹Ÿå¯èƒ½äºŒè€…åŒæ—¶å‘ç”Ÿã€‚$A$ å¯èƒ½ä¼šå¯¼è‡´ $B$ çš„å‘ç”Ÿï¼Œä¹Ÿå¯èƒ½ç›¸åï¼Œä¹Ÿå¯èƒ½äºŒè€…ä¹‹é—´æ ¹æœ¬å°±æ²¡æœ‰å› æœå…³ç³»ã€‚1.2. éšæœºå˜é‡äº§å“ç»ç†é©¬å¿ ä¿¡. åº”è¯¥å¦‚ä½•ç†è§£æ¦‚ç‡åˆ†å¸ƒå‡½æ•°å’Œæ¦‚ç‡å¯†åº¦å‡½æ•°ï¼Ÿ  å¾®ç§¯åˆ†æ˜¯ç ”ç©¶å˜é‡çš„æ•°å­¦ï¼Œæ¦‚ç‡è®ºä¸æ•°ç†ç»Ÿè®¡æ˜¯ç ”ç©¶éšæœºå˜é‡çš„æ•°å­¦ã€‚  ç ”ç©¶ä¸€ä¸ªéšæœºå˜é‡ï¼Œä¸åªæ˜¯è¦çœ‹å®ƒèƒ½å–å“ªäº›å€¼ï¼Œæ›´é‡è¦çš„æ˜¯å®ƒå–å„ç§å€¼çš„æ¦‚ç‡å¦‚ä½•ã€‚éšæœºå˜é‡ï¼ˆrandom variableï¼‰è¡¨ç¤ºéšæœºè¯•éªŒå„ç§ç»“æœçš„å®å€¼å•å€¼å‡½æ•°ã€‚éšæœºäº‹ä»¶ä¸è®ºä¸æ•°é‡æ˜¯å¦ç›´æ¥æœ‰å…³ï¼Œéƒ½å¯ä»¥æ•°é‡åŒ–ï¼Œå³éƒ½èƒ½ç”¨æ•°é‡åŒ–çš„æ–¹å¼è¡¨è¾¾ã€‚éšæœºäº‹ä»¶æ•°é‡åŒ–çš„å¥½å¤„æ˜¯å¯ä»¥ç”¨æ•°å­¦åˆ†æçš„æ–¹æ³•æ¥ç ”ç©¶éšæœºç°è±¡ã€‚ä¾‹å¦‚æŸä¸€æ—¶é—´å†…å…¬å…±æ±½è½¦ç«™ç­‰è½¦ä¹˜å®¢äººæ•°ï¼Œç”µè¯äº¤æ¢å°åœ¨ä¸€å®šæ—¶é—´å†…æ”¶åˆ°çš„å‘¼å«æ¬¡æ•°ï¼Œç¯æ³¡çš„å¯¿å‘½ç­‰ç­‰ï¼Œéƒ½æ˜¯éšæœºå˜é‡çš„å®ä¾‹ã€‚æŒ‰ç…§éšæœºå˜é‡å¯èƒ½å–å¾—çš„å€¼ï¼Œå¯ä»¥æŠŠå®ƒä»¬åˆ†ä¸ºä¸¤ç§åŸºæœ¬ç±»å‹ï¼š  ç¦»æ•£å‹éšæœºå˜é‡ï¼šéšæœºå˜é‡çš„å€¼å¯ä»¥é€ä¸ªåˆ—ä¸¾ã€‚          ç¦»æ•£å‹éšæœºå˜é‡é€šå¸¸ä¾æ®æ¦‚ç‡è´¨é‡å‡½æ•°åˆ†ç±»ï¼Œä¸»è¦åˆ†ä¸ºï¼šä¼¯åŠªåˆ©éšæœºå˜é‡ã€äºŒé¡¹éšæœºå˜é‡ã€å‡ ä½•éšæœºå˜é‡å’Œæ³Šæ¾éšæœºå˜é‡ã€‚      ç¦»æ•£å‹éšæœºå˜é‡çš„æœŸæœ›ä¸º $\\mathbb E[X] = \\sum_{x:p(x)&gt;0}xp(x)$ã€‚        è¿ç»­å‹éšæœºå˜é‡ï¼šéšæœºå˜é‡çš„å–å€¼æ— æ³•é€ä¸ªåˆ—ä¸¾ã€‚          æœ‰å‡ ä¸ªé‡è¦çš„è¿ç»­éšæœºå˜é‡å¸¸å¸¸å‡ºç°åœ¨æ¦‚ç‡è®ºä¸­ï¼Œå¦‚ï¼šå‡åŒ€éšæœºå˜é‡ã€æŒ‡æ•°éšæœºå˜é‡ã€ä¼½é©¬éšæœºå˜é‡å’Œæ­£æ€éšæœºå˜é‡ã€‚      è¿ç»­å‹éšæœºå˜é‡çš„æœŸæœ›ä¸º $\\mathbb E[X] = \\int_{-\\infty}^{+\\infty}xf(x)dx$ï¼ˆä¸€é˜¶çŸ©ï¼‰ã€‚ã€Œè§åæ–‡æ¨å¯¼ã€      1.3. æ¦‚ç‡åˆ†å¸ƒä¸æ¦‚ç‡å¯†åº¦  å¯¹äºç¦»æ•£å‹éšæœºå˜é‡ï¼Œå…¶æ¦‚ç‡å¯ä»¥ç”¨æ¦‚ç‡åˆ†å¸ƒåˆ—è¡¨æ¥æè¿°ã€‚å¦‚ä¸¤ä¸ªç¦»æ•£å‹éšæœºå˜é‡ $x$ çš„æ¦‚ç‡åˆ†å¸ƒåˆ—è¡¨å¯ä»¥è¡¨è¿°ä¸º\\(\\begin{bmatrix}x\\\\ P(x)\\end{bmatrix} = \\begin{bmatrix}x_1 &amp; x_2\\\\ 0.99 &amp; 0.01\\end{bmatrix}\\)è§£è¯»ä¸ºï¼š$x$ å–å€¼ä¸º $x_1$ çš„æ¦‚ç‡ $P(x=x_1) = 0.99$ï¼Œå–å€¼ä¸º $x_2$ çš„æ¦‚ç‡ $P(x=x_2) = 0.01$ã€‚æ¦‚ç‡åˆ†å¸ƒå‡½æ•°ï¼ˆç´¯ç§¯æ¦‚ç‡å‡½æ•°ï¼‰æ˜¯æè¿°éšæœºå˜é‡å–å€¼åˆ†å¸ƒè§„å¾‹çš„æ•°å­¦è¡¨ç¤ºã€‚æ¦‚ç‡åˆ†å¸ƒå‡½æ•°æ˜¯éšæœºå˜é‡ç‰¹æ€§çš„è¡¨å¾ï¼Œå®ƒå†³å®šäº†éšæœºå˜é‡å–å€¼çš„åˆ†å¸ƒè§„å¾‹ï¼Œåªè¦å·²çŸ¥äº†æ¦‚ç‡åˆ†å¸ƒå‡½æ•°ï¼Œå°±å¯ä»¥ç®—å‡ºéšæœºå˜é‡è½äºæŸå¤„çš„æ¦‚ç‡ã€‚å¯¹äºç¦»æ•£å‹éšæœºå˜é‡ï¼Œæ¦‚ç‡åˆ†å¸ƒå‡½æ•°å®šä¹‰ä¸º\\[F(x) = P(x\\leq x_i)=\\sum_{x\\leq x_i} P(x_i)\\]å¯¹äºè¿ç»­å‹éšæœºå˜é‡ï¼Œè®¾å˜é‡ $x$ çš„å–å€¼åŒºé—´ä¸º $(a,b)$ï¼Œå…¶æ¦‚ç‡åˆ†å¸ƒå‡½æ•°ä¸º\\[F(x) = P(a&lt;x&lt;b) = F(b) - F(a)\\]å¼•å…¥ â€œæ¦‚ç‡å¯†åº¦å‡½æ•° $f(x)$â€ çš„æ¦‚å¿µï¼Œå®šä¹‰ä¸ºæ¦‚ç‡åˆ†å¸ƒå‡½æ•°çš„å¯¼æ•°ï¼Œæ˜¯ä¸€ä¸ªæè¿°è¿™ä¸ªéšæœºå˜é‡çš„è¾“å‡ºå€¼ï¼Œåœ¨æŸä¸ªç¡®å®šçš„å–å€¼ç‚¹é™„è¿‘çš„å¯èƒ½æ€§çš„å‡½æ•°ã€‚å³\\[f(x) = F'(x) = \\mathop{lim}\\limits_{\\Delta x\\rightarrow 0}\\frac{F(x+\\Delta x) - F(x)}{\\Delta x}\\]æ¦‚ç‡å¯†åº¦å‡½æ•°çš„æ€§è´¨æœ‰  $f(x) \\geq 0$  $\\int_{-\\infty}^{+\\infty} f(x)dx=1$éšæœºå˜é‡çš„å–å€¼è½åœ¨æŸä¸ªåŒºåŸŸä¹‹å†…çš„æ¦‚ç‡åˆ™ä¸ºæ¦‚ç‡å¯†åº¦å‡½æ•°åœ¨è¿™ä¸ªåŒºåŸŸä¸Šçš„ç§¯åˆ†ã€‚å½“æ¦‚ç‡å¯†åº¦å‡½æ•°å­˜åœ¨çš„æ—¶å€™ï¼Œæ¦‚ç‡åˆ†å¸ƒå‡½æ•°æ˜¯æ¦‚ç‡å¯†åº¦å‡½æ•°çš„ç§¯åˆ†ã€‚å¯¹äºè¿ç»­å‹éšæœºå˜é‡ï¼Œå…¶æ¦‚ç‡åˆ†å¸ƒå‡½æ•°ä¸º\\[F(x) = \\int_{-\\infty}^{x_i} f(x)dx\\]é‚£ä¹ˆå‰é¢è¿ç»­å‹éšæœºå˜é‡ $x\\in(a,b)$ çš„æ¦‚ç‡åˆ†å¸ƒå‡½æ•°ä¸º\\[F(x) = P(a&lt;x&lt;b) = F(b) - F(a) =\\int_{a}^{b} f(x)dx\\]è¿ç»­å‹éšæœºå˜é‡ $X$ çš„æœŸæœ› $\\mathbb E(X)$ ä¸º\\[\\mathbb E(X) = \\int_{-\\infty}^{+\\infty}xf(x)dx\\]å¯ä»¥é€šè¿‡å°†æ¦‚ç‡å¯†åº¦å‡½æ•°åˆ’åˆ†ä¸º $n$ ä¸ªå°åŒºé—´ï¼Œå¯¹æ¯ä¸ªå°åŒºé—´æ±‚æ¦‚ç‡åˆ†å¸ƒè¡¨ï¼Œå½“å°åŒºé—´ä¸ªæ•° $n \\rightarrow +\\infty$ æ—¶ï¼Œ$max(\\Delta x_i)\\rightarrow 0$ï¼Œå€ŸåŠ©å¯¹ç¦»æ•£å‹éšæœºå˜é‡çš„æœŸæœ›æ±‚æé™ï¼Œå¾—åˆ°ä¸Šè¿°å®šä¹‰å¼ã€‚å³\\[\\mathbb E(X) = \\mathop{lim}\\limits_{n\\rightarrow+\\infty}\\sum_{i=1}^n x_if(x_i)\\Delta x_i =  \\int_{-\\infty}^{+\\infty}xf(x)dx\\]1.4. æ¦‚ç‡å’Œç»Ÿè®¡æ¦‚ç‡ï¼ˆprobabiltyï¼‰å’Œç»Ÿè®¡ï¼ˆstatisticsï¼‰çœ‹ä¼¼ä¸¤ä¸ªç›¸è¿‘çš„æ¦‚å¿µï¼Œå…¶å®ç ”ç©¶çš„é—®é¢˜åˆšå¥½ç›¸åã€‚æ¦‚ç‡ç ”ç©¶çš„é—®é¢˜æ˜¯ï¼Œå·²çŸ¥ä¸€ä¸ªæ¨¡å‹å’Œå‚æ•°ï¼Œæ€ä¹ˆå»é¢„æµ‹è¿™ä¸ªæ¨¡å‹äº§ç”Ÿçš„ç»“æœçš„ç‰¹æ€§ï¼ˆä¾‹å¦‚å‡å€¼ï¼Œæ–¹å·®ï¼Œåæ–¹å·®ç­‰ç­‰ï¼‰ã€‚ ä¸¾ä¸ªä¾‹å­ï¼Œæˆ‘æƒ³ç ”ç©¶æ€ä¹ˆå…»çŒªï¼ˆæ¨¡å‹æ˜¯çŒªï¼‰ï¼Œæˆ‘é€‰å¥½äº†æƒ³å…»çš„å“ç§ã€å–‚å…»æ–¹å¼ã€çŒªæ£šçš„è®¾è®¡ç­‰ç­‰ï¼ˆé€‰æ‹©å‚æ•°ï¼‰ï¼Œæˆ‘æƒ³çŸ¥é“æˆ‘å…»å‡ºæ¥çš„çŒªå¤§æ¦‚èƒ½æœ‰å¤šè‚¥ï¼Œè‚‰è´¨æ€ä¹ˆæ ·ï¼ˆé¢„æµ‹ç»“æœï¼‰ã€‚ç»Ÿè®¡ç ”ç©¶çš„é—®é¢˜åˆ™ç›¸åã€‚ç»Ÿè®¡æ˜¯ï¼Œæœ‰ä¸€å †æ•°æ®ï¼Œè¦åˆ©ç”¨è¿™å †æ•°æ®å»é¢„æµ‹æ¨¡å‹å’Œå‚æ•°ã€‚ä»ä»¥çŒªä¸ºä¾‹ã€‚ç°åœ¨æˆ‘ä¹°åˆ°äº†ä¸€å †è‚‰ï¼Œé€šè¿‡è§‚å¯Ÿå’Œåˆ¤æ–­ï¼Œæˆ‘ç¡®å®šè¿™æ˜¯çŒªè‚‰ï¼ˆè¿™å°±ç¡®å®šäº†æ¨¡å‹ã€‚åœ¨å®é™…ç ”ç©¶ä¸­ï¼Œä¹Ÿæ˜¯é€šè¿‡è§‚å¯Ÿæ•°æ®æ¨æµ‹æ¨¡å‹æ˜¯ï¼åƒé«˜æ–¯åˆ†å¸ƒçš„ã€æŒ‡æ•°åˆ†å¸ƒçš„ã€æ‹‰æ™®æ‹‰æ–¯åˆ†å¸ƒçš„ç­‰ç­‰ï¼‰ï¼Œç„¶åï¼Œå¯ä»¥è¿›ä¸€æ­¥ç ”ç©¶ï¼Œåˆ¤å®šè¿™çŒªçš„å“ç§ã€è¿™æ˜¯åœˆå…»çŒªè¿˜æ˜¯è·‘å±±çŒªè¿˜æ˜¯ç½‘æ˜“çŒªï¼Œç­‰ç­‰ï¼ˆæ¨æµ‹æ¨¡å‹å‚æ•°ï¼‰ã€‚ä¸€å¥è¯æ€»ç»“ï¼šæ¦‚ç‡æ˜¯å·²çŸ¥æ¨¡å‹å’Œå‚æ•°ï¼Œæ¨æ•°æ®ã€‚ç»Ÿè®¡æ˜¯å·²çŸ¥æ•°æ®ï¼Œæ¨æ¨¡å‹å’Œå‚æ•°ã€‚ç»Ÿè®¡é¢†åŸŸæœ‰ä¸¤ä¸ªåŸºæœ¬æ¦‚å¿µï¼šæå¤§ä¼¼ç„¶ä¼°è®¡ å’Œ æå¤§åéªŒæ¦‚ç‡ä¼°è®¡ã€‚å®ƒä»¬éƒ½æ˜¯ç”¨æ¥æ¨æµ‹å‚æ•°çš„æ–¹æ³•ã€‚ä¸ºä»€ä¹ˆä¼šå­˜åœ¨ç€ä¸¤ç§ä¸åŒæ–¹æ³•å‘¢ï¼Ÿ è¿™éœ€è¦ç†è§£æ¦‚ç‡çš„ä¸¤ä¸ªå­¦æ´¾ã€‚ï¼ˆå¾ˆå¥‡æ€ªçš„ä¸€ç‚¹åœ¨äºï¼Œä¸¤ä¸ªä¼°è®¡æ˜¯å±äºç»Ÿè®¡é¢†åŸŸï¼Œä½†æ˜¯ç¡®éœ€è¦ç†è§£æ¦‚ç‡çš„ä¸¤ä¸ªå­¦æ´¾ï¼‰1.5. æ¦‚ç‡å‡½æ•°ä¸ä¼¼ç„¶å‡½æ•°ä¼¼ç„¶ï¼ˆlikelihoodï¼‰è¿™ä¸ªè¯å…¶å®å’Œæ¦‚ç‡ï¼ˆprobabilityï¼‰æ˜¯å·®ä¸å¤šçš„æ„æ€ï¼ŒColinså­—å…¸è¿™ä¹ˆè§£é‡Šï¼šThe likelihood of something happening is how likely it is to happen. ä½ æŠŠlikelihoodæ¢æˆprobabilityï¼Œè¿™è§£é‡Šä¹Ÿè¯»å¾—é€šã€‚ä½†æ˜¯åœ¨ç»Ÿè®¡é‡Œé¢ï¼Œä¼¼ç„¶å‡½æ•°å’Œæ¦‚ç‡å‡½æ•°å´æ˜¯ä¸¤ä¸ªä¸åŒçš„æ¦‚å¿µï¼ˆå…¶å®ä¹Ÿå¾ˆç›¸è¿‘å°±æ˜¯äº†ï¼‰ã€‚å¯¹äº $P(x\\vert \\theta)$ï¼Œè¾“å…¥æœ‰2ä¸ªï¼š$x$ è¡¨ç¤ºæŸä¸€å…·ä½“çš„æ•°æ®ï¼Œ$\\theta$ è¡¨ç¤ºæ¨¡å‹å‚æ•°ã€‚      å¦‚æœ $\\theta$ æ˜¯å·²çŸ¥çš„ï¼Œ$x$ æ˜¯å˜é‡ï¼Œè¿™ä¸ªå‡½æ•°å«åšæ¦‚ç‡å‡½æ•°ï¼Œå®ƒæè¿°å¯¹äºä¸åŒæ ·æœ¬ç‚¹ $x$ï¼Œå…¶å‡ºç°çš„æ¦‚ç‡æ˜¯å¤šå°‘ã€‚        å¦‚æœ $x$ æ˜¯å·²çŸ¥çš„ï¼Œ$\\theta$ æ˜¯å˜é‡ï¼Œè¿™ä¸ªå‡½æ•°å«åšä¼¼ç„¶å‡½æ•°ï¼Œå®ƒæè¿°å¯¹äºä¸åŒçš„æ¨¡å‹å‚æ•°ï¼Œå‡ºç° $x$ è¿™ä¸ªæ ·æœ¬ç‚¹çš„æ¦‚ç‡æ˜¯å¤šå°‘ã€‚  å¤§æ¦‚ç›´è§‚çš„ç†è§£ä¸€ä¸‹ï¼Œå‡è®¾æŸç»„æ•°æ® $x$ æœä»æ­£æ€åˆ†å¸ƒï¼Œå…¶æ¦‚ç‡å¯†åº¦å‡½æ•°ä¸º\\[f(x)=\\frac{1}{\\sqrt{2\\pi}\\sigma}e^{-\\frac{(x-\\mu)^2}{2\\sigma^2}}\\]  è¯´åˆ°è¿™é‡Œï¼Œæ’ä¸€ä¸ªå•¼ç¬‘çš†éçš„äº‹æƒ…ï¼Œåœ¨æ¨å…ç ”ç©¶ç”Ÿé¢è¯•æ—¶ï¼Œä¸€å¸®æ•™æˆå¤§ä½¬ä»¬çªç„¶æ¶è¶£å‘³æƒ³å‡ºè¿™ä¹ˆä¸€ä¸ªé¢è¯•é¢˜ â€œé«˜æ–¯åˆ†å¸ƒå’Œæ­£æ€åˆ†å¸ƒæ˜¯ä»€ä¹ˆå…³ç³»ï¼Ÿâ€ï¼Œç­”æ¡ˆæ˜¯ï¼šâ€œå®ƒä»¬æ˜¯ä¸€ä¸ªä¸œè¥¿â€ã€‚ç»“æœåœ¨é¢è¯•æœŸé—´ï¼Œå¤§ä½¬ä»¬çœŸçš„å¯¹å¥½å‡ ä¸ªå­¦ç”Ÿéƒ½é—®äº†è¿™ä¸ªé—®é¢˜ã€‚å°´å°¬çš„æ˜¯ï¼Œåªæœ‰ä¸€ä¸ªå­¦ç”ŸçŠ¹çŠ¹è±«è±«çš„å›å¤è¯´ï¼šâ€œå®ƒä»¬å¥½è±¡æ˜¯ä¸€ä¸ªä¸œè¥¿æŠŠâ€¦â€  å¦‚æœæˆ‘ä»¬å·²çŸ¥åˆ†å¸ƒçš„å‚æ•° $\\theta = [\\mu,\\sigma]$ çš„å…·ä½“å–å€¼ï¼Œé‚£ä¹ˆ $P(x\\vert \\theta)$ å°±æ˜¯å–åˆ°æ•°æ® $x$ çš„æ¦‚ç‡ã€‚  å¦‚æœæˆ‘ä»¬ä¸çŸ¥é“åˆ†å¸ƒçš„å‚æ•°ï¼Œè€Œæ˜¯é€šè¿‡ä¸€æ¬¡é‡‡æ ·å¾—åˆ°æ•°æ® $x$ï¼Œé‚£ä¹ˆ $P(x\\vert \\theta)$ æè¿°çš„å°±æ˜¯å¯¹äºä¸åŒçš„æ¨¡å‹å‚æ•°ï¼Œå‡ºç°æ•°æ® $x$ è¿™ä¸ªæ ·æœ¬ç‚¹çš„æ¦‚ç‡ã€‚æ³¨æ„åˆ°ï¼Œä¸Šé¢ä¸¤ç§ä¸åŒçš„è§£è¯»ä¸æ¦‚ç‡çš„ä¸¤ä¸ªå­¦æ´¾ç´§å¯†ç›¸è”ã€‚1.6. æå¤§ä¼¼ç„¶ä¼°è®¡  å¿†è‡». ä¸€æ–‡ææ‡‚æå¤§ä¼¼ç„¶ä¼°è®¡æ‹“å­£. äº¤å‰ç†µä¸æœ€å¤§ä¼¼ç„¶ä¼°è®¡è´ºå‹‡ï¼Œæ˜æ°ç§€ç¼–è‘—ï¼æ¦‚ç‡è®ºä¸æ•°ç†ç»Ÿè®¡ï¼æ­¦æ±‰ï¼šæ­¦æ±‰å¤§å­¦å‡ºç‰ˆç¤¾ï¼Œ2012.08ï¼š216-217æå¤§ä¼¼ç„¶ä¼°è®¡ï¼ˆMaximum likelihood estimation, MLEï¼‰ï¼Œæ˜¯å»ºç«‹åœ¨æå¤§ä¼¼ç„¶åŸç†çš„åŸºç¡€ä¸Šçš„ä¸€ä¸ªç»Ÿè®¡æ–¹æ³•ã€‚é€šä¿—ç†è§£æ¥è¯´ï¼Œå°±æ˜¯åˆ©ç”¨å·²çŸ¥çš„æ ·æœ¬ç»“æœä¿¡æ¯ï¼Œåæ¨æœ€å…·æœ‰å¯èƒ½ï¼ˆæœ€å¤§æ¦‚ç‡ï¼‰å¯¼è‡´è¿™äº›æ ·æœ¬ç»“æœå‡ºç°çš„æ¨¡å‹å‚æ•°å€¼ã€‚åœ¨ç°å®ä¸–ç•Œçš„ç ”ç©¶ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é¦–å…ˆå‡å®šæŸäº›è¢«ç ”ç©¶å¯¹è±¡çš„æ¦‚ç‡åˆ†å¸ƒæœä»æŸç§åˆ†å¸ƒå½¢æ€ï¼Œä¾‹å¦‚äºŒé¡¹åˆ†å¸ƒã€æ­£æ€åˆ†å¸ƒã€æŒ‡æ•°åˆ†å¸ƒï¼Œä½†å¯¹äºç›¸åº”åˆ†å¸ƒä¸­çš„å…·ä½“å‚æ•°çš„å–å€¼å´æ— ä»çŸ¥æ™“ï¼Œæ­¤æ—¶æˆ‘ä»¬å¯ä»¥å€ŸåŠ©ä»æ€»ä½“ä¸­æŠ½æ ·çš„æ–¹å¼ï¼Œå¯¹æ€»ä½“çš„æ¦‚ç‡åˆ†å¸ƒçš„å‚æ•°è¿›è¡Œä¸€ä¸ªç‚¹å¯¹ç‚¹çš„ä¼°è®¡ã€‚  ä¸€ç§ç›´è§‚çš„ç†è§£ï¼šè®¾ç”²ç®±ä¸­æœ‰ 99 ä¸ªç™½çƒï¼Œ1 ä¸ªé»‘çƒï¼›ä¹™ç®±ä¸­æœ‰ 1 ä¸ªç™½çƒï¼99 ä¸ªé»‘çƒã€‚ç°éšæœºå–å‡ºä¸€ç®±ï¼Œå†ä»æŠ½å–çš„ä¸€ç®±ä¸­éšæœºå–å‡ºä¸€çƒã€‚å‡è®¾å–å‡ºçš„ç»“æœæ˜¯é»‘çƒï¼Œç”±äºè¿™ä¸€é»‘çƒä»ä¹™ç®±æŠ½å–çš„æ¦‚ç‡æ¯”ä»ç”²ç®±æŠ½å–çš„æ¦‚ç‡å¤§å¾—å¤šï¼Œè¿™æ—¶æˆ‘ä»¬è‡ªç„¶æ›´å¤šåœ°ç›¸ä¿¡è¿™ä¸ªé»‘çƒæ˜¯å–è‡ªä¹™ç®±çš„ã€‚æå¤§ä¼¼ç„¶ä¼°è®¡ä¸­é‡‡æ ·éœ€æ»¡è¶³ä¸€ä¸ªé‡è¦çš„å‡è®¾ï¼Œå°±æ˜¯æŠ½æ ·æ ·æœ¬é›† $X$ å½“ä¸­çš„æ ·æœ¬ $x_1,x_2,â€¦,x_n$ å½¼æ­¤ç‹¬ç«‹åŒåˆ†å¸ƒã€‚ä¸€èˆ¬è¯´æ¥ï¼Œäº‹ä»¶ $x_i$ å‘ç”Ÿçš„æ¦‚ç‡ä¸æœªçŸ¥çš„æ¨¡å‹å‚æ•° $\\theta$ æœ‰å…³ï¼Œå‚æ•° $\\theta$ çš„å–å€¼ä¸åŒï¼Œåˆ™äº‹ä»¶ $x_i$ å‘ç”Ÿçš„æ¦‚ç‡ $P(x_i\\vert \\theta)$ ä¹Ÿä¸åŒã€‚å½“æˆ‘ä»¬åœ¨ä¸€æ¬¡è¯•éªŒä¸­äº‹ä»¶ $x_i$ å‘ç”Ÿäº†ï¼Œåˆ™è®¤ä¸ºæ­¤æ—¶çš„ $\\theta$ å€¼åº”æ˜¯çš„ä¸€åˆ‡å¯èƒ½å–å€¼ä¸­ä½¿ $P(x_i\\vert \\theta)$ è¾¾åˆ°æœ€å¤§çš„é‚£ä¸€ä¸ªï¼Œæå¤§ä¼¼ç„¶ä¼°è®¡æ³•å°±æ˜¯è¦é€‰å–è¿™æ ·çš„å€¼ä½œä¸ºå‚æ•° $\\theta$ çš„ä¼°è®¡å€¼ï¼Œä½¿æ‰€é€‰å–çš„æ ·æœ¬åœ¨è¢«é€‰çš„æ€»ä½“ä¸­å‡ºç°çš„å¯èƒ½æ€§ä¸ºæœ€å¤§ã€‚å¯¹äºæ ·æœ¬é›† $X$ï¼Œç”±äºæ ·æœ¬ä¹‹é—´å½¼æ­¤ç‹¬ç«‹ä¸”æœä»å‚æ•°ä¸º $\\theta$ çš„åˆ†å¸ƒï¼Œé‚£ä¹ˆå–å¾—ä»»æ„ä¸€ä¸ªæ ·æœ¬ $x_i$ çš„æ¦‚ç‡å¯ä»¥è¡¨ç¤ºä¸º $P(x_i \\vert \\theta)$ï¼Œå› è€Œå–å¾—å½“å‰è¿™ä¸ªæ ·æœ¬é›†çš„æ¦‚ç‡ä¸ºï¼š\\[P(X) = P(x_1\\vert \\theta)P(x_2\\vert \\theta)...P(x_n\\vert \\theta)\\]ç”±äºåœ¨æŠ½æ ·åä¼šå¾—åˆ°æ€»ä½“çš„ä¸€ä¸ªè§‚æµ‹ï¼Œå› æ­¤ç›¸åº”çš„æ¦‚ç‡åœ¨å…·ä½“çš„æ ·æœ¬é›†ä¸­éƒ½æ˜¯å·²çŸ¥çš„ï¼Œä¸Šé¢è¿™ä¸ªå‡½æ•°åˆ™å¯ä»¥çœ‹ä½œåœ¨ä¸åŒçš„å‚æ•° $\\theta$ çš„å–å€¼ä¸‹ï¼Œå–å¾—å½“å‰è¿™ä¸ªæ ·æœ¬é›†çš„æ¦‚ç‡ï¼Œä¹Ÿå³å¯èƒ½æ€§ï¼ˆlikelihoodï¼‰ï¼Œå› æ­¤å°†å…¶ç§°ä¸ºå‚æ•° $\\theta$ ç›¸å¯¹äºæ ·æœ¬é›† $X$ çš„ä¼¼ç„¶å‡½æ•°ï¼ˆlikelihood functionï¼‰ï¼Œè®°ä¸º $L(\\theta)$ï¼Œå³æœ‰\\[\\begin{aligned}L(\\theta) &amp; = L(x_1,x_2,...,x_n\\vert \\theta)\\\\&amp;= P(x_1\\vert \\theta)P(x_2\\vert \\theta)...P(x_n\\vert \\theta)\\\\&amp;= \\prod P(x_i\\vert \\theta), i=1,2,...,n\\end{aligned}\\]å¯¹äºæŠ½æ ·å¾—åˆ°æ ·æœ¬é›† $X$ è¿™ä¸ªæ—¢æˆäº‹å®ï¼Œæˆ‘ä»¬è®¤ä¸ºè¿™å°±æ˜¯æœ€è¯¥å‘ç”Ÿçš„ç»“æœï¼Œä¹Ÿå³æ‰€æœ‰å¯èƒ½çš„ç»“æœä¸­æ¦‚ç‡æœ€å¤§çš„é‚£ä¸€ä¸ªï¼Œè¿™å°±æ˜¯æœ€å¤§ä¼¼ç„¶ä¼°è®¡çš„å‘½åç”±æ¥ã€‚æ­¤æ—¶ï¼Œæˆ‘ä»¬éœ€è¦å¯»æ‰¾çš„å°±æ˜¯é‚£ä¸ªä½¿ä¼¼ç„¶å‡½æ•°å–å¾—æœ€å¤§å€¼çš„ $\\theta$ å€¼\\[{\\rm argmax}\\ L(\\theta) = {\\rm max}_\\theta L(\\theta)\\]${\\rm argmax} f(x)$ æ˜¯ä½¿å¾—å‡½æ•° $f(x)$ å–å¾—å…¶æœ€å¤§å€¼çš„æ‰€æœ‰è‡ªå˜é‡ $x$ çš„é›†åˆã€‚æ€»ç»“èµ·æ¥ï¼Œåˆ©ç”¨æœ€å¤§ä¼¼ç„¶å‡½æ•°æ±‚è§£æ€»ä½“å‚æ•°çš„ä¼°è®¡å€¼çš„ä¸€èˆ¬æ­¥éª¤ä¸ºï¼š  è·å–ä¼¼ç„¶å‡½æ•°  å¯¹ä¼¼ç„¶å‡½æ•°å–è‡ªç„¶å¯¹æ•°  å°†å¯¹æ•°ä¼¼ç„¶å‡½æ•°æ±‚ï¼ˆåï¼‰å¯¼æ•°ï¼Œä»¤å…¶ä¸º 0ï¼Œå¾—åˆ°ä¼¼ç„¶æ–¹ç¨‹  æ±‚è§£ä¼¼ç„¶æ–¹ç¨‹ï¼Œå¾—åˆ°çš„ä¸€ä¸ªæˆ–å¤šä¸ªæ•°å€¼ï¼Œå³ä¸ºæ€»ä½“å‚æ•°çš„æœ€å¤§ä¼¼ç„¶ä¼°è®¡å€¼ç”±äºåœ¨è®¡ç®—å½“ä¸­ï¼Œå¤šä¸ªæ¦‚ç‡çš„ä¹˜æ³•æœ€ç»ˆä¼šå¾—åˆ°ä¸€ä¸ªéå¸¸å°çš„å€¼ï¼Œä»è€Œå¯èƒ½é€ æˆä¸‹æº¢ï¼ˆunderflowï¼‰ï¼Œå› æ­¤ä¸€èˆ¬ä¼šå¯¹ä¼¼ç„¶å‡½æ•°å–ä¸€ä¸ªå¯¹æ•°ï¼Œå°†è¿ç»­ä¹˜æ³•è½¬åŒ–ä¸ºåŠ æ³•\\[{\\rm argmax}\\ log L(\\theta) = {\\rm argmax}\\  log \\prod P(x_i\\vert \\theta) = {\\rm argmax}\\  \\sum_{i=1}^n logP(x_i\\vert \\theta), i=1,2,...,n\\]å†è¿›ä¸€æ­¥ï¼ŒåŠ ä¸€ä¸ªè´Ÿå·ï¼Œé—®é¢˜è½¬åŒ–ä¸º\\[{\\rm argmin}\\  [-log L(\\theta)] = {\\rm argmin}\\  \\sum_{i=1}^n [-logP(x_i\\vert \\theta)], i=1,2,...,n\\]å› ä¸ºå½“é‡æ–°ç¼©æ”¾ä»£ä»·å‡½æ•°æ—¶ argmin ä¸ä¼šæ”¹å˜ï¼Œæˆ‘ä»¬å¯ä»¥é™¤ä»¥ $n$ å¾—åˆ°å’Œè®­ç»ƒæ•°æ®ç»éªŒåˆ†å¸ƒ $P$ ç›¸å…³çš„æœŸæœ›ä½œä¸ºå‡†åˆ™\\[{\\rm argmin}\\ \\mathbb E_P [-logP(X\\vert \\theta)]\\]ä»¤ $Q(X) = P(X\\vert \\theta)$ ä¸Šå¼è½¬åŒ–ä¸º\\[{\\rm argmin}\\ \\mathbb E_P [-log Q(X)]\\]åé¢åœ¨ä»‹ç» KL æ•£åº¦å’Œäº¤å‰ç†µæ—¶ä¼šå‘ç°ï¼Œä»»ä½•ä¸€ä¸ªè´Ÿå¯¹æ•°ä¼¼ç„¶ç»„æˆçš„æŸå¤±éƒ½æ˜¯å®šä¹‰åœ¨è®­ç»ƒé›†ä¸Šçš„ç»éªŒåˆ†å¸ƒå’Œå®šä¹‰åœ¨æ¨¡å‹ä¸Šçš„çœŸå®åˆ†å¸ƒä¹‹é—´çš„äº¤å‰ç†µã€‚ä¸¾ä¸€ä¸ªä¾‹å­ï¼šå‡å®šè¢«ç ”ç©¶å¯¹è±¡çš„æ€»ä½“æœä»äºŒé¡¹åˆ†å¸ƒï¼Œå¦‚æœçŸ¥é“äº†åŸºç¡€çš„ (0ï¼Œ1) åˆ†å¸ƒä¸­ç»“æœæŒ‡å®šä¸º 1 æ—¶çš„æ¦‚ç‡ $p$ï¼Œä¹Ÿå°±çŸ¥é“äº†è¿™ä¸ªåˆ†å¸ƒå½¢æ€çš„å…¨éƒ¨ã€‚  å‡å¦‚æœ‰ä¸€ä¸ªç½å­ï¼Œé‡Œé¢æœ‰é»‘ç™½ä¸¤ç§é¢œè‰²çš„çƒï¼Œæ•°ç›®å¤šå°‘ä¸çŸ¥ï¼Œä¸¤ç§é¢œè‰²çš„æ¯”ä¾‹ä¹Ÿä¸çŸ¥ã€‚æˆ‘ä»¬æƒ³çŸ¥é“ç½ä¸­ç™½çƒå’Œé»‘çƒçš„æ¯”ä¾‹ï¼Œä½†æˆ‘ä»¬ä¸èƒ½æŠŠç½ä¸­çš„çƒå…¨éƒ¨æ‹¿å‡ºæ¥æ•°ã€‚ç°åœ¨æˆ‘ä»¬å¯ä»¥æ¯æ¬¡ä»»æ„ä»å·²ç»æ‘‡åŒ€çš„ç½ä¸­æ‹¿ä¸€ä¸ªçƒå‡ºæ¥ï¼Œè®°å½•çƒçš„é¢œè‰²ï¼Œç„¶åæŠŠæ‹¿å‡ºæ¥çš„çƒå†æ”¾å›ç½ä¸­ã€‚è¿™ä¸ªè¿‡ç¨‹å¯ä»¥é‡å¤ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨è®°å½•çš„çƒçš„é¢œè‰²æ¥ä¼°è®¡ç½ä¸­é»‘ç™½çƒçš„æ¯”ä¾‹ã€‚å‡å¦‚åœ¨å‰é¢çš„ä¸€ç™¾æ¬¡é‡å¤è®°å½•ä¸­ï¼Œæœ‰ä¸ƒåæ¬¡æ˜¯ç™½çƒï¼Œè¯·é—®ç½ä¸­ç™½çƒæ‰€å çš„æ¯”ä¾‹æœ€æœ‰å¯èƒ½æ˜¯å¤šå°‘ï¼Ÿ  å¾ˆå¤šäººé©¬ä¸Šå°±æœ‰ç­”æ¡ˆäº†ï¼š70%ã€‚è€Œå…¶åçš„ç†è®ºæ”¯æ’‘æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ  æˆ‘ä»¬å‡è®¾ç½ä¸­ç™½çƒçš„æ¯”ä¾‹æ˜¯ $p$ï¼Œé‚£ä¹ˆé»‘çƒçš„æ¯”ä¾‹å°±æ˜¯ $1-p$ï¼Œè¿™é‡Œ $p$ å°±æ˜¯æ¨¡å‹å‚æ•°ã€‚å› ä¸ºæ¯æŠ½ä¸€ä¸ªçƒå‡ºæ¥ï¼Œåœ¨è®°å½•é¢œè‰²ä¹‹åï¼Œæˆ‘ä»¬æŠŠæŠ½å‡ºçš„çƒæ”¾å›äº†ç½ä¸­å¹¶æ‘‡åŒ€ï¼Œæ‰€ä»¥æ¯æ¬¡æŠ½å‡ºæ¥çš„çƒçš„é¢œè‰²æœä»åŒä¸€ç‹¬ç«‹åˆ†å¸ƒã€‚  è¿™é‡Œæˆ‘ä»¬æŠŠä¸€æ¬¡æŠ½å‡ºæ¥çƒçš„é¢œè‰²ç§°ä¸ºä¸€æ¬¡æŠ½æ ·ã€‚é¢˜ç›®ä¸­åœ¨ä¸€ç™¾æ¬¡æŠ½æ ·ä¸­ï¼Œä¸ƒåæ¬¡æ˜¯ç™½çƒçš„,ä¸‰åæ¬¡ä¸ºé»‘çƒäº‹ä»¶çš„æ¦‚ç‡æ˜¯ï¼š\\(P(æ ·æœ¬ç»“æœ|Model)\\)å¦‚æœç¬¬ä¸€æ¬¡æŠ½è±¡çš„ç»“æœè®°ä¸º $x_1$ï¼Œç¬¬äºŒæ¬¡æŠ½æ ·çš„ç»“æœè®°ä¸º $x_2$â€¦ï¼Œé‚£ä¹ˆæ ·æœ¬ç»“æœä¸º $(x_1,x_2,â€¦,x_{100})$ã€‚è¿™æ ·ï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ°å¦‚ä¸‹è¡¨è¾¾å¼ï¼š\\(\\begin{aligned}P(æ ·æœ¬ç»“æœ|Model)&amp;= P(x_1,x_2,â€¦,x_{100}|Model)\\\\&amp;= P(x_1|M)P(x_2|M)\\cdots P(x_{100}|M)\\\\&amp;= p^{70}(1-p)^{30}\\end{aligned}\\)ä¸Šé¢å°±æ˜¯è§‚å¯Ÿæ ·æœ¬ç»“æœå‡ºç°çš„æ¦‚ç‡å‡½æ•°äº†ã€‚é‚£ä¹ˆï¼Œå¦‚ä½•æ±‚å‡ºæ¨¡å‹å‚æ•° $p$ å‘¢ï¼Ÿä¸åŒçš„ $p$ ä¼šç›´æ¥å¯¼è‡´ä¸Šé¢æ¦‚ç‡å‡½æ•°çš„ä¸åŒã€‚æ¯”å¦‚:      $p=0.5$ï¼ˆé»‘50%ç™½50%ï¼‰æ—¶ $p^{70}(1-p)^{30}=7.8\\times 10^{-31}$    $p=0.7$ ï¼ˆé»‘70%ç™½30%ï¼‰æ—¶ $p^{70}(1-p)^{30}=2.95\\times 10^{-27}$                      é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œæ—¢ç„¶æœ‰æ— æ•°ç§åˆ†å¸ƒå¯ä»¥é€‰æ‹©ï¼Œæå¤§ä¼¼ç„¶ä¼°è®¡åº”è¯¥æŒ‰ç…§ä»€ä¹ˆåŸåˆ™å»é€‰å–è¿™ä¸ªåˆ†å¸ƒå‘¢ï¼Ÿç­”æ¡ˆæ˜¯ï¼Œè®©è¿™ä¸ªæ ·æœ¬ç»“æœå‡ºç°çš„å¯èƒ½æ€§æœ€å¤§ï¼Œæ—¢ç„¶äº‹æƒ…å·²ç»å‘ç”Ÿäº†ï¼Œä¸ºä»€ä¹ˆä¸è®©è¿™ä¸ªå‡ºç°çš„ç»“æœçš„å¯èƒ½æ€§æœ€å¤§å‘¢ï¼Ÿè¿™ä¹Ÿå°±æ˜¯æœ€å¤§ä¼¼ç„¶ä¼°è®¡çš„æ ¸å¿ƒã€‚è½¬åŒ–ä¸ºæ•°å­¦é—®é¢˜ï¼Œå°±æ˜¯ä½¿å¾— $P(æ ·æœ¬ç»“æœ        Model)=p^{70}(1-p)^{30}$ çš„å€¼æœ€å¤§ã€‚              å¦‚ä½•æ±‚æå€¼å‘¢ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥å°†æ¦‚ç‡å‡½æ•°çœ‹æˆæ˜¯ $p$ çš„æ–¹ç¨‹ï¼Œå¯¹å…¶æ±‚å¯¼ï¼Œå¯¼æ•°ä¸º 0 çš„ç‚¹å°±æ˜¯æå€¼ç‚¹ï¼\\(\\begin{aligned}f'(p) &amp;= {\\rm d}(p^{70}(1-p)^{30})/{\\rm d}p\\\\&amp;= 70\\cdot p^{69}(1-p)^{30}-p^{70}\\cdot 30\\cdot(1-p)^{29}\\\\&amp;= 70\\cdot p^{69}\\cdot(1-p)^{29}[1-p-3/7\\cdot p] = 0\\\\\\end{aligned}\\)å³\\(\\begin{aligned}1 - 10/7 \\cdot p = 0\\end{aligned}\\)å¯æ±‚å‡º $p=0.7$ï¼Œä¸æˆ‘ä»¬ä¸€å¼€å§‹è®¤ä¸ºçš„ 70% æ˜¯ä¸€è‡´çš„ã€‚å†ä¸¾å¦å¤–ä¸€ä¸ªä¾‹å­  å‡è®¾æˆ‘ä»¬è¦ç»Ÿè®¡å…¨å›½äººæ°‘çš„å¹´å‡æ”¶å…¥ï¼Œé¦–å…ˆå‡è®¾è¿™ä¸ªæ”¶å…¥æœä»æœä»æ­£æ€åˆ†å¸ƒï¼Œä½†æ˜¯è¯¥åˆ†å¸ƒçš„å‡å€¼ä¸æ–¹å·®æœªçŸ¥ã€‚æˆ‘ä»¬æ²¡æœ‰äººåŠ›ä¸ç‰©åŠ›å»ç»Ÿè®¡å…¨å›½æ¯ä¸ªäººçš„æ”¶å…¥ã€‚æˆ‘ä»¬å›½å®¶æœ‰10å‡ äº¿äººå£å‘¢ï¼Ÿé‚£ä¹ˆå²‚ä¸æ˜¯æ²¡æœ‰åŠæ³•äº†ï¼Ÿ  ä¸ä¸ä¸ï¼Œæœ‰äº†æå¤§ä¼¼ç„¶ä¼°è®¡ä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥é‡‡ç”¨å˜›ï¼æˆ‘ä»¬æ¯”å¦‚é€‰å–ä¸€ä¸ªåŸå¸‚ï¼Œæˆ–è€…ä¸€ä¸ªä¹¡é•‡çš„äººå£æ”¶å…¥ï¼Œä½œä¸ºæˆ‘ä»¬çš„è§‚å¯Ÿæ ·æœ¬ç»“æœã€‚ç„¶åé€šè¿‡æœ€å¤§ä¼¼ç„¶ä¼°è®¡æ¥è·å–ä¸Šè¿°å‡è®¾ä¸­çš„æ­£æ€åˆ†å¸ƒçš„å‚æ•°ã€‚  æœ‰äº†å‚æ•°çš„ç»“æœåï¼Œæˆ‘ä»¬å°±å¯ä»¥çŸ¥é“è¯¥æ­£æ€åˆ†å¸ƒçš„æœŸæœ›å’Œæ–¹å·®äº†ã€‚ä¹Ÿå°±æ˜¯æˆ‘ä»¬é€šè¿‡äº†ä¸€ä¸ªå°æ ·æœ¬çš„é‡‡æ ·ï¼Œåè¿‡æ¥çŸ¥é“äº†å…¨å›½äººæ°‘å¹´æ”¶å…¥çš„ä¸€ç³»åˆ—é‡è¦çš„æ•°å­¦æŒ‡æ ‡é‡ï¼  é‚£ä¹ˆæˆ‘ä»¬å°±çŸ¥é“äº†æå¤§ä¼¼ç„¶ä¼°è®¡çš„æ ¸å¿ƒå…³é”®å°±æ˜¯å¯¹äºä¸€äº›æƒ…å†µï¼Œæ ·æœ¬å¤ªå¤šï¼Œæ— æ³•å¾—å‡ºåˆ†å¸ƒçš„å‚æ•°å€¼ï¼Œå¯ä»¥é‡‡æ ·å°æ ·æœ¬åï¼Œåˆ©ç”¨æå¤§ä¼¼ç„¶ä¼°è®¡è·å–å‡è®¾ä¸­åˆ†å¸ƒçš„å‚æ•°å€¼ã€‚2. æ¦‚ç‡2.1. æ¡ä»¶æ¦‚ç‡å…¬å¼æ¡ä»¶æ¦‚ç‡æ˜¯æŒ‡äº‹ä»¶ $A$ åœ¨äº‹ä»¶ $B$ å‘ç”Ÿçš„æ¡ä»¶ä¸‹å‘ç”Ÿçš„æ¦‚ç‡ã€‚è‹¥åªæœ‰ä¸¤ä¸ªäº‹ä»¶ $A$ï¼Œ$B$ï¼Œé‚£ä¹ˆæ¡ä»¶æ¦‚ç‡è¡¨ç¤ºä¸ºï¼š$P(A\\vert B)$ï¼Œè¯»ä½œ â€œ$A$ åœ¨ $B$ å‘ç”Ÿçš„æ¡ä»¶ä¸‹å‘ç”Ÿçš„æ¦‚ç‡â€ã€‚\\[P(A\\vert B) = \\frac{P(AB)}{P(B)}\\]å…¶ä¸­ï¼Œ$P(AB)$ æ˜¯ä¸¤ä¸ªäº‹ä»¶çš„è”åˆæ¦‚ç‡ï¼Œ$P(B)$ æ˜¯äº‹ä»¶ $B$ çš„è¾¹ç¼˜æ¦‚ç‡ã€‚ä¸€ç§ä¸å‡†ç¡®çš„ç†è§£æ–¹å¼ï¼Œ$P(AB)$ æ˜¯ $A,B$ åŒæ—¶å‘ç”Ÿçš„æ¦‚ç‡ï¼Œ$P(B)$ æ˜¯ $B$ å‘ç”Ÿçš„æ¦‚ç‡ã€‚æˆ‘ä»¬è¦æ±‚å·²çŸ¥ $B$ å‘ç”Ÿå $A$ å‘ç”Ÿçš„æ¦‚ç‡ï¼Œç›¸å½“äº B çš„å‘ç”Ÿä¸å¦ä¸å†æ˜¯ä¸€ä¸ªä¸ç¡®å®šçš„æ¦‚ç‡ï¼Œè€Œæ˜¯ç¡®å®šçš„æ¡ä»¶ã€‚ç”±äºä¸åŒäº‹ä»¶åŒæ—¶å‘ç”Ÿçš„æ¦‚ç‡æ˜¯ç”¨ä¹˜ç§¯çš„å½¢å¼æ¥è¡¨ç¤ºï¼Œåä¹‹æŸä¸ªäº‹ä»¶ä»æ¦‚ç‡å˜ä¸ºå·²ç»å‘ç”Ÿå°±ç”¨é™¤æ³•æ¥è¡¨ç¤ºï¼Œé‚£ä¹ˆå°±åº”è¯¥ç”¨ $P(AB)$ é™¤ä»¥ $P(B)$ æ¥å¾—åˆ°è¿™ä¹ˆä¸ªæ¡ä»¶æ¦‚ç‡ã€‚å¦ä¸€ç§ç†è§£æ–¹å¼ï¼Œå°†ç­‰å¼åšä¸€ä¸ªå˜æ¢\\[P(B)P(A\\vert B) = P(AB)\\]ä¹Ÿå°±æ˜¯è¯´ï¼Œ$A,B$ åŒæ—¶å‘ç”Ÿçš„æ¦‚ç‡ï¼Œç­‰äº $B$ å‘ç”Ÿçš„æ¦‚ç‡ï¼Œä¹˜ä»¥ $B$ å‘ç”Ÿï¼ˆä½œä¸ºæ¡ä»¶ï¼‰å $A$ å‘ç”Ÿçš„æ¦‚ç‡ã€‚è¿™ç»™æˆ‘ä»¬ä¸€ä¸ªå¯ç¤ºï¼Œå³äº¤æ¢ $A,B$ çš„é¡ºåºï¼Œç­‰å¼ä¾ç„¶æˆç«‹\\[P(B)P(A\\vert B) = P(AB) = P(BA) = P(A)P(B\\vert A)\\]2.2. å…¨æ¦‚ç‡å…¬å¼è®¾ $B_1,â€¦,A_n$ æ˜¯æ ·æœ¬ç©ºé—´ $S$ çš„ä¸€ä¸ªå®Œå¤‡äº‹ä»¶ç»„ï¼Œå³  $B_1,â€¦,B_n$ ä¸¤ä¸¤ä¸ç›¸å®¹ï¼š$B_i \\cap B_j = \\varnothing\\quad (i\\neq j)$  $B_i \\cupâ€¦\\cup B_n = S$æ¯ä¸€æ¬¡è¯•éªŒä¸­ï¼Œå®Œå¤‡äº‹ä»¶ç»„ä¸­æœ‰ä¸”ä»…æœ‰ä¸€ä¸ªäº‹ä»¶å‘ç”Ÿã€‚å®Œå¤‡äº‹ä»¶ç»„æ„æˆæ ·æœ¬ç©ºé—´çš„ä¸€ä¸ªåˆ’åˆ†ã€‚å…¨æ¦‚ç‡å…¬å¼ã€‚å®šç†ï¼šè®¾å®éªŒ $E$ çš„æ ·æœ¬ç©ºé—´ä¸º $S$ï¼Œ$B_1, B_2,â€¦,B_n$ ä¸º $S$ çš„ä¸€ä¸ªåˆ’åˆ†ï¼ˆå®Œå¤‡äº‹ä»¶ç»„ï¼‰ï¼Œä¸” $P(B_i)&gt;0\\quad i=1,2,â€¦n$ï¼Œ$A$ ä¸º $E$ çš„ä¸€ä¸ªäº‹ä»¶ï¼Œåˆ™\\[\\begin{aligned}P(A) &amp;= P(B_1)P(A\\vert B_1)+P(B_2)P(A\\vert B_2)+...+P(B_n)P(A\\vert B_n)\\\\&amp;= \\sum_{i=1}^n P(B_i)P(A\\vert B_i)\\end{aligned}\\]å…¶æ¨å¯¼è¿‡ç¨‹å¦‚ä¸‹ï¼Œå¦‚å›¾ï¼š\\[\\begin{aligned}A &amp;= AS = A(B_1\\cup B_2\\cup ... \\cup B_n)\\\\&amp;= AB_1\\cup AB_2\\cup ... \\cup AB_n \\quad (AB_iä¸¤ä¸¤äº’æ–¥)\\\\P(A) &amp;= P(AB_1\\cup AB_2\\cup ... \\cup AB_n)\\\\&amp;=P(AB_1) + P(AB_2) + ... + P(AB_n)\\end{aligned}\\]æ ¹æ®æ¡ä»¶æ¦‚ç‡å…¬å¼\\[P(AB_i) = P(A)P(B_i\\vert A) = P(B_i)P(A\\vert B_i)\\]å¸¦å…¥æœ‰\\[P(A) = \\sum_{i=1}^n P(B_i)P(A\\vert B_i)\\]å³ä¸ºå…¨æ¦‚ç‡å…¬å¼ã€‚å…¨æ¦‚ç‡å…¬å¼çš„æ„ä¹‰1ï¼šå°†å¤æ‚çš„äº‹ä»¶ $A$ åˆ’åˆ†ä¸ºæ¯”è¾ƒç®€å•çš„äº‹ä»¶ $AB_1,â€¦,AB_n$ï¼Œå†ç»“åˆåŠ æ³•å’Œä¹˜æ³•è®¡ç®— $A$ çš„ï¼ˆè¾¹ç¼˜ï¼‰æ¦‚ç‡ã€‚å…¨æ¦‚ç‡å…¬å¼çš„æ„ä¹‰2ï¼šäº‹ä»¶ $A$ çš„å‘ç”Ÿå¯èƒ½æœ‰å„ç§åŸå›  $B_i\\quad (i=1,2,â€¦,n)$ï¼Œå¦‚æœ $A$ æ˜¯ç”± $B_i$ å¼•èµ·ï¼Œåˆ™æ­¤æ—¶ $A$ å‘ç”Ÿçš„ï¼ˆæ¡ä»¶ï¼‰æ¦‚ç‡ä¸º\\[P(AB_i) = P(B_i)P(A\\vert B_i)\\]è‹¥æ¯ä¸ªåŸå› éƒ½å¯èƒ½å¯¼è‡´ $A$ çš„å‘ç”Ÿï¼Œé‚£ä¹ˆ $A$ å‘ç”Ÿçš„æ¦‚ç‡æ˜¯å…¨éƒ¨åŸå› å¼•èµ·å…¶å‘ç”Ÿçš„æ¦‚ç‡çš„ç»¼åˆï¼Œå³ä¸ºå…¨æ¦‚ç‡å…¬å¼ã€‚å› æ­¤å¯ä»¥æŠŠå…¨æ¦‚ç‡å…¬å¼çœ‹æˆæ˜¯ â€œç”±åŸå› æ¨ç»“æœâ€ã€‚æ¯ä¸€ä¸ªåŸå› å¯¹ç»“æœçš„å‘ç”Ÿç”±ä¸€å®šçš„ä½œç”¨ï¼Œç»“æœå‘ç”Ÿçš„å¯èƒ½æ€§ä¸å„ç§åŸå› çš„ä½œç”¨å¤§å°æœ‰å…³ï¼Œå…¨æ¦‚ç‡å…¬å¼è¡¨è¾¾äº†å®ƒä»¬ä¹‹é—´çš„å…³ç³»ã€‚2.3. æ¦‚ç‡çš„ä¸¤å¤§å­¦æ´¾å¯¹äºæ¦‚ç‡çœ‹æ³•ä¸åŒçš„ä¸¤å¤§æ´¾åˆ«é¢‘ç‡å­¦æ´¾ä¸è´å¶æ–¯æ´¾ã€‚ä»–ä»¬çœ‹å¾…ä¸–ç•Œçš„è§†è§’ä¸åŒï¼Œå¯¼è‡´ä»–ä»¬å¯¹äºäº§ç”Ÿæ•°æ®çš„æ¨¡å‹å‚æ•°çš„ç†è§£ä¹Ÿä¸åŒã€‚      é¢‘ç‡å­¦æ´¾          ä»–ä»¬è®¤ä¸ºä¸–ç•Œæ˜¯ç¡®å®šçš„ã€‚ä»–ä»¬ç›´æ¥ä¸ºäº‹ä»¶æœ¬èº«å»ºæ¨¡ï¼Œä¹Ÿå°±æ˜¯è¯´äº‹ä»¶åœ¨å¤šæ¬¡é‡å¤å®éªŒä¸­è¶‹äºä¸€ä¸ªç¨³å®šçš„å€¼ $p$ï¼Œé‚£ä¹ˆè¿™ä¸ªå€¼å°±æ˜¯è¯¥äº‹ä»¶çš„æ¦‚ç‡ã€‚      ä»–ä»¬è®¤ä¸ºæ¨¡å‹å‚æ•°æ˜¯ä¸ªå®šå€¼ï¼Œå¸Œæœ›é€šè¿‡ç±»ä¼¼è§£æ–¹ç¨‹ç»„çš„æ–¹å¼ä»æ•°æ®ä¸­æ±‚å¾—è¯¥æœªçŸ¥æ•°ã€‚è¿™å°±æ˜¯é¢‘ç‡å­¦æ´¾ä½¿ç”¨çš„å‚æ•°ä¼°è®¡æ–¹æ³•ï¼šæå¤§ä¼¼ç„¶ä¼°è®¡ï¼ˆMLEï¼‰ï¼Œè¿™ç§æ–¹æ³•å¾€å¾€åœ¨å¤§æ•°æ®é‡çš„æƒ…å†µä¸‹å¯ä»¥å¾ˆå¥½çš„è¿˜åŸæ¨¡å‹çš„çœŸå®æƒ…å†µã€‚      é¢‘ç‡æ´¾æŠŠéœ€è¦æ¨æ–­çš„æ¨¡å‹å‚æ•° $\\theta$ çœ‹åšæ˜¯å›ºå®šçš„æœªçŸ¥å¸¸æ•°ï¼Œå³å‚æ•° $\\theta$ è™½ç„¶æ˜¯æœªçŸ¥çš„ï¼Œä½†æœ€èµ·ç æ˜¯ç¡®å®šçš„ä¸€ä¸ªå€¼ï¼ŒåŒæ—¶ï¼Œæ ·æœ¬ $X$ æ˜¯éšæœºçš„ï¼Œæ‰€ä»¥é¢‘ç‡æ´¾é‡ç‚¹ç ”ç©¶æ ·æœ¬ç©ºé—´ï¼Œå¤§éƒ¨åˆ†çš„æ¦‚ç‡è®¡ç®—éƒ½æ˜¯é’ˆå¯¹æ ·æœ¬ $X$ çš„åˆ†å¸ƒï¼›            è´å¶æ–¯æ´¾          ä»–ä»¬è®¤ä¸ºä¸–ç•Œæ˜¯ä¸ç¡®å®šçš„ï¼Œå› è·å–çš„ä¿¡æ¯ä¸åŒè€Œå¼‚ã€‚å‡è®¾å¯¹ä¸–ç•Œå…ˆæœ‰ä¸€ä¸ªé¢„å…ˆçš„ä¼°è®¡ï¼Œç„¶åé€šè¿‡è·å–çš„ä¿¡æ¯æ¥ä¸æ–­è°ƒæ•´ä¹‹å‰çš„é¢„ä¼°è®¡ã€‚ ä»–ä»¬ä¸è¯•å›¾å¯¹äº‹ä»¶æœ¬èº«è¿›è¡Œå»ºæ¨¡ï¼Œè€Œæ˜¯ä»æ—è§‚è€…çš„è§’åº¦æ¥è¯´ã€‚å› æ­¤å¯¹äºåŒä¸€ä¸ªäº‹ä»¶ï¼Œä¸åŒçš„äººæŒæ¡çš„å…ˆéªŒä¸åŒçš„è¯ï¼Œé‚£ä¹ˆä»–ä»¬æ‰€è®¤ä¸ºçš„äº‹ä»¶çŠ¶æ€ä¹Ÿä¼šä¸åŒã€‚      ä»–ä»¬è®¤ä¸ºæ¨¡å‹å‚æ•°æºè‡ªæŸç§æ½œåœ¨åˆ†å¸ƒï¼Œå¸Œæœ›ä»æ•°æ®ä¸­æ¨çŸ¥è¯¥åˆ†å¸ƒã€‚å¯¹äºæ•°æ®çš„è§‚æµ‹æ–¹å¼ä¸åŒæˆ–è€…å‡è®¾ä¸åŒï¼Œé‚£ä¹ˆæ¨çŸ¥çš„è¯¥å‚æ•°ä¹Ÿä¼šå› æ­¤è€Œå­˜åœ¨å·®å¼‚ã€‚è¿™å°±æ˜¯è´å¶æ–¯æ´¾è§†è§’ä¸‹ç”¨æ¥ä¼°è®¡å‚æ•°çš„å¸¸ç”¨æ–¹æ³•ï¼šæœ€å¤§åéªŒæ¦‚ç‡ä¼°è®¡ï¼ˆMAPï¼‰ï¼Œè¿™ç§æ–¹æ³•åœ¨å…ˆéªŒå‡è®¾æ¯”è¾ƒé è°±çš„æƒ…å†µä¸‹æ•ˆæœæ˜¾è‘—ï¼Œéšç€æ•°æ®é‡çš„å¢åŠ ï¼Œå…ˆéªŒå‡è®¾å¯¹äºæ¨¡å‹å‚æ•°çš„ä¸»å¯¼ä½œç”¨ä¼šé€æ¸å‰Šå¼±ï¼Œç›¸åçœŸå®çš„æ•°æ®æ ·ä¾‹ä¼šå¤§å¤§å æ®æœ‰åˆ©åœ°ä½ã€‚æç«¯æƒ…å†µä¸‹ï¼Œæ¯”å¦‚æŠŠå…ˆéªŒå‡è®¾å»æ‰ï¼Œæˆ–è€…å‡è®¾å…ˆéªŒæ»¡è¶³å‡åŒ€åˆ†å¸ƒçš„è¯ï¼Œé‚£å¥¹å’Œæå¤§ä¼¼ç„¶ä¼°è®¡å°±å¦‚å‡ºä¸€è¾™äº†ã€‚      è´å¶æ–¯å­¦æ´¾è®¤ä¸ºï¼Œæ¨¡å‹å‚æ•° $\\theta$ æ˜¯éšæœºå˜é‡ï¼Œè€Œæ ·æœ¬ $X$ æ˜¯å›ºå®šçš„ï¼Œç”±äºæ ·æœ¬æ˜¯å›ºå®šçš„ï¼Œæ‰€ä»¥ä»–ä»¬é‡ç‚¹ç ”ç©¶çš„æ˜¯å‚æ•° $\\theta$ çš„åˆ†å¸ƒã€‚      è´å¶æ–¯å­¦æ´¾çš„åˆ›å§‹äººï¼Œæ‰˜é©¬æ–¯Â·è´å¶æ–¯ï¼ˆThomas Bayesï¼‰ï¼Œå‘è¡¨äº†ä¸€ç¯‡åä¸ºã€ŠAn essay towards solving a problem in the doctrine of chancesã€‹ï¼Œç¿»è¯‘è¿‡æ¥åˆ™æ˜¯ã€Šæœºé‡ç†è®ºä¸­ä¸€ä¸ªé—®é¢˜çš„è§£ã€‹ã€‚è¿™ç¯‡è®ºæ–‡å‘è¡¨åï¼Œåœ¨å½“æ—¶å¹¶æœªäº§ç”Ÿå¤šå°‘å½±å“ï¼Œåœ¨20ä¸–çºªåï¼Œè¿™ç¯‡è®ºæ–‡æ‰é€æ¸è¢«äººä»¬æ‰€é‡è§†ã€‚è´å¶æ–¯æ´¾æ—¢ç„¶æŠŠ $\\theta$ çœ‹åšæ˜¯ä¸€ä¸ªéšæœºå˜é‡ï¼Œæ‰€ä»¥è¦è®¡ç®— $\\theta$ çš„åˆ†å¸ƒï¼Œä¾¿å¾—äº‹å…ˆçŸ¥é“ $\\theta$ çš„æ— æ¡ä»¶åˆ†å¸ƒï¼Œå³åœ¨æœ‰æ ·æœ¬ä¹‹å‰ï¼ˆæˆ–è§‚å¯Ÿåˆ° $X$ ä¹‹å‰ï¼‰ï¼Œ $\\theta$ æœ‰ç€æ€æ ·çš„åˆ†å¸ƒå‘¢ï¼Ÿæ¯”å¦‚å¾€å°çƒæ¡Œä¸Šæ‰”ä¸€ä¸ªçƒï¼Œè¿™ä¸ªçƒè½ä¼šè½åœ¨ä½•å¤„ï¼Ÿå¦‚æœæ˜¯ä¸åä¸å€šçš„æŠŠçƒæŠ›å‡ºå»ï¼Œé‚£ä¹ˆæ­¤çƒè½åœ¨å°çƒæ¡Œä¸Šçš„ä»»ä¸€ä½ç½®éƒ½æœ‰ç€ç›¸åŒçš„æœºä¼šï¼Œå³çƒè½åœ¨å°çƒæ¡Œä¸ŠæŸä¸€ä½ç½®çš„æ¦‚ç‡æœä»å‡åŒ€åˆ†å¸ƒã€‚è¿™ç§åœ¨å®éªŒä¹‹å‰å®šä¸‹çš„å±äºåŸºæœ¬å‰ææ€§è´¨çš„åˆ†å¸ƒç§°ä¸ºå…ˆéªŒåˆ†å¸ƒï¼Œæˆ–çš„æ— æ¡ä»¶åˆ†å¸ƒã€‚è‡³æ­¤ï¼Œè´å¶æ–¯åŠè´å¶æ–¯æ´¾æå‡ºäº†ä¸€ä¸ªæ€è€ƒé—®é¢˜çš„å›ºå®šæ¨¡å¼ï¼š\\[å…ˆéªŒåˆ†å¸ƒ \\pi(\\theta) + æ ·æœ¬ä¿¡æ¯x \\Rightarrow åéªŒåˆ†å¸ƒ \\pi(\\theta \\vert x)\\]2.4. è´å¶æ–¯å…¬å¼  ä¸€ç§å½¢å¼è®¾ $B_1,â€¦,B_n$ æ˜¯æ ·æœ¬ç©ºé—´ $S$ çš„ä¸€ä¸ªå®Œå¤‡äº‹ä»¶ç»„ï¼Œåˆ™å¯¹ä»»ä¸€äº‹ä»¶ $A$ï¼Œ$P(A)&gt;0$ï¼Œæœ‰\\[P(B_i\\vert A) = \\frac{P(B_i)P(A\\vert B_i)}{P(A)}=\\frac{P(B_i)P(A\\vert B_i)}{\\sum_{j=1}^n P(B_j)P(A\\vert B_j)}\\]è´å¶æ–¯å…¬å¼çš„æ¨å¯¼å¯ä»¥é€šè¿‡æ¡ä»¶æ¦‚ç‡å…¬å¼å¾—åˆ°\\[\\begin{aligned}P(A\\vert B_i) &amp;= \\frac{P(AB_i)}{P(B_i)} \\quad &amp;(æ¡ä»¶æ¦‚ç‡å…¬å¼)\\\\\\Rightarrow  P(AB_i) &amp;= P(B_i)P(A\\vert B_i) \\quad &amp;(ç§»é¡¹)\\\\\\Rightarrow  P(A)P(B_i\\vert A) &amp;= P(B_i)P(A\\vert B_i) \\quad &amp;(æ¡ä»¶æ¦‚ç‡å…¬å¼)\\\\\\Rightarrow  P(B_i\\vert A) &amp;= \\frac{P(B_i)P(A\\vert B_i)}{P(A)} \\quad &amp;(ç§»é¡¹)\\end{aligned}\\]ä¸€ç§ç›´è§‚çš„ç†è§£ï¼šå‡è®¾ $B_1,â€¦,B_n$ æ˜¯å‘ç”Ÿæ—¶é—´ $A$ çš„å„ç§åŸå› ï¼Œé‚£ä¹ˆå·²çŸ¥äº‹ä»¶ $A$ å·²ç»å‘ç”Ÿäº†ï¼Œé—®æ˜¯åŸå›  $B_i$ å¯¼è‡´çš„æ¦‚ç‡ $P(B_i \\vert A)$ æ˜¯å¤šå°‘ï¼Ÿ  å¦ä¸€ç§å½¢å¼ä½¿ç”¨å¦ä¸€å¥—å­—æ¯ä½“ç³»ï¼š  $H$ï¼šhypothesisï¼Œå‡è®¾ï¼Œè§„å¾‹  $E$ï¼ševidenceï¼Œè¯æ®ï¼Œç°è±¡ï¼Œæ•°æ®é‚£ä¹ˆè´å¶æ–¯çš„æ¨ç†è¿‡ç¨‹å¯ä»¥è¡¨è¾¾ä¸ºï¼šé€šè¿‡ä¸æ–­æ”¶é›†è¯æ® $E$ æ¥å®Œå–„å‡è®¾ $H$ ã€‚é‚£ä¹ˆè´å¶æ–¯å…¬å¼å¯ä»¥æè¿°ä¸º\\[P(H\\vert E) = \\frac{P(H)P(E\\vert H)}{P(E)} = P(H)\\frac{P(E\\vert H)}{P(E)}\\]å› æ­¤è´å¶æ–¯å…¬å¼å®é™…ä¸Šé˜è¿°çš„æ˜¯å¦‚ä¸‹äº‹å®\\[æ–°ä¿¡æ¯Eå‡ºç°åå‡è®¾Hçš„æ¦‚ç‡ = H çš„æ¦‚ç‡\\times æ–°ä¿¡æ¯å¸¦æ¥çš„è°ƒæ•´\\]å¯ä»¥ç†è§£ä¸ºï¼Œæ–°è§‚å¯Ÿåˆ°çš„æ ·æœ¬ä¿¡æ¯å°†ä¿®æ­£äººä»¬ä»¥å‰å¯¹äº‹ç‰©çš„è®¤çŸ¥ã€‚å¯¹äºä¸€ä¸ªåœºæ™¯ï¼Œå¯èƒ½æœ‰å‡ ç§ä¸åŒçš„è§„å¾‹æ¥è§£é‡Šï¼Œæ ¹æ®å¯¹åœºæ™¯çš„ä¸€äº›ç°è±¡çš„è§‚æµ‹ï¼Œå¦‚ä½•çŸ¥é“å„ç§å¯èƒ½çš„è§„å¾‹åœ¨èƒŒåå‘ç”Ÿä½œç”¨çš„æ¦‚ç‡ï¼Ÿè¿™ä¸ªé—®é¢˜å°±æ˜¯å¦‚ä½•æ±‚è§£ $P(è§„å¾‹H\\vertç°è±¡E)$ã€‚            ç›´æ¥å»è®¡ç®—æœ‰éš¾åº¦ï¼Œä½†æ˜¯å¦‚æœæˆ‘ä»¬çŸ¥é“åœ¨æŸä¸ªè§„å¾‹ $H$ ä¸‹ï¼Œä¸åŒç°è±¡ $E$ å‘ç”Ÿçš„æ¦‚ç‡ $P(ç°è±¡E      è§„å¾‹H)$ï¼Œå’Œæ¯ä¸ªè§„å¾‹å‘ç”Ÿçš„æ¦‚ç‡ $P(è§„å¾‹H)$ï¼Œå’Œä¸åŒç°è±¡å‘ç”Ÿçš„æ¦‚ç‡ $P(ç°è±¡E)$ï¼Œå°±å¯ä»¥é€šè¿‡å·²çŸ¥æ•°æ®æ±‚è§£ã€‚è´å¶æ–¯å°±æ˜¯å‘Šè¯‰æ€ä¹ˆç”¨è¿™äº›çŸ¥é“çš„çŸ¥è¯†å»è®¡ç®—ç°è±¡åé¢çš„è§„å¾‹å‘ç”Ÿçš„æ¦‚ç‡ã€‚        ç¬¬ä¸‰ç§å½¢å¼é©¬åŒå­¦. å¦‚ä½•ç†è§£è´å¶æ–¯æ¨æ–­å’Œbetaåˆ†å¸ƒï¼Ÿå‡è®¾å®éªŒæ•°æ® $X\\vert p$ æœä»äºŒé¡¹åˆ†å¸ƒï¼ˆæ¯”å¦‚æŠ›ç¡¬å¸ï¼‰\\[\\underbrace{f(p\\vert X=k)}_{åéªŒåˆ†å¸ƒ}=\\frac{\\overbrace{P(X=k\\vert p)}^{å®éªŒæ•°æ®}\\overbrace{f(p)}^{å…ˆéªŒåˆ†å¸ƒ}}{\\underbrace{P(X=k)}_{å¸¸æ•°}}\\]å…¶ä¸­ $k$ ä¸ºæ­£é¢çš„æ¬¡æ•°ã€‚åˆ†æ¯ä¸å®éªŒæ•°æ®æ— å…³ï¼Œå¯ä»¥è§†ä½œå¸¸æ•°ã€‚3. ç†µã€Šä¿¡æ¯è®ºï¼šåŸºç¡€ç†è®ºä¸åº”ç”¨ã€‹3.1. è‡ªä¿¡æ¯åœ¨ä¿¡æ¯ä¼ è¾“çš„ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæ”¶ä¿¡è€…è·å¾—çš„ä¿¡æ¯é‡ç­‰äºä¿¡æ¯ä¼ è¾“å‰åä¸ç¡®å®šæ€§çš„å‡å°‘é‡\\[è·å¾—çš„ä¿¡æ¯é‡ = ä¸ç¡®å®šæ€§çš„å‡å°‘é‡ = æ”¶ä¿¡å‰æŸäº‹ä»¶å‘ç”Ÿçš„ä¸ç¡®å®šæ€§ - æ”¶ä¿¡åæŸäº‹ä»¶å‘ç”Ÿçš„ä¸ç¡®å®šæ€§\\]å‡è®¾æ— å™ªå£°ï¼Œä¿¡é“ä¼ è¾“ä¸å¤±çœŸï¼Œå› æ­¤æ”¶åˆ°æ¶ˆæ¯åæŸäº‹ä»¶å‘ç”Ÿçš„ä¸ç¡®å®šæ€§å®Œå…¨æ¶ˆé™¤ï¼Œå³\\[è·å¾—çš„ä¿¡æ¯é‡ = ä¸ç¡®å®šæ€§çš„å‡å°‘é‡ = æ”¶ä¿¡å‰æŸäº‹ä»¶å‘ç”Ÿçš„ä¸ç¡®å®šæ€§ = ä¿¡æºè¾“å‡ºæŸæ¶ˆæ¯ä¸­å«æœ‰çš„ä¿¡æ¯é‡\\]äº‹ä»¶å‘ç”Ÿçš„ä¸ç¡®å®šæ€§ä¸äº‹ä»¶å‘ç”Ÿçš„æ¦‚ç‡æœ‰å…³ã€‚äº‹ä»¶å‘ç”Ÿçš„æ¦‚ç‡è¶Šå¤§ï¼Œè¯¥äº‹ä»¶å‘ç”Ÿåèƒ½å¤Ÿæä¾›çš„ä¿¡æ¯å°±è¶Šå°‘ï¼Œä¸ç¡®å®šæ€§å°±è¶Šå°ã€‚å¯¹äºå‘ç”Ÿæ¦‚ç‡ç­‰äº 1 çš„äº‹ä»¶ï¼ˆå¿…ç„¶äº‹ä»¶ï¼‰ï¼Œæä¾›ä¸äº†ä»»ä½•ä¿¡æ¯ï¼Œå°±ä¸å­˜åœ¨ä¸ç¡®å®šæ€§ã€‚å› æ­¤ï¼ŒæŸäº‹ä»¶å‘ç”Ÿæ‰€å«æœ‰çš„ä¿¡æ¯é‡å°±åº”è¯¥æ˜¯è¯¥äº‹ä»¶å‘ç”Ÿå…ˆéªŒæ¦‚ç‡çš„å‡½æ•°ã€‚\\[I(a_i) = f(P(a_i))\\]å¼ä¸­ï¼Œ$P(a_i)$ æ˜¯äº‹ä»¶ $a_i$ å‘ç”Ÿçš„å…ˆéªŒæ¦‚ç‡ï¼Œ$I(a_i)$ è¡¨ç¤ºäº‹ä»¶ $a_i$ å‘ç”Ÿæ‰€å«æœ‰çš„ä¿¡æ¯é‡ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸º $a_i$ çš„è‡ªä¿¡æ¯ã€‚ä¸‹é¢åˆ†æè‡ªä¿¡æ¯ä¸å…ˆéªŒæ¦‚ç‡ä¹‹é—´å‡½æ•°å…³ç³» $f$ çš„å…·ä½“å½¢å¼ã€‚  ä¸€ç§å½¢è±¡ç†è§£ï¼šäº‹ä»¶å‘ç”Ÿæ¦‚ç‡è¶Šå¤§ï¼Œå‘ç”Ÿåèƒ½å¤Ÿæä¾›çš„ä¿¡æ¯å°±è¶Šå°‘ï¼ˆè€å‘ç”Ÿæ²¡å•¥ä»·å€¼ï¼Œè·å¾—ä¸äº†ä»€ä¹ˆä¿¡æ¯ï¼‰ï¼Œé‚£ä¹ˆä¸ç¡®å®šæ€§å°±è¶Šå°ï¼Œè‡ªä¿¡æ¯å°±å°ã€‚åä¹‹ï¼Œå¦‚æœäº‹ä»¶å‘ç”Ÿæ¦‚ç‡è¶Šå°ï¼Œä¸€æ—¦å‘ç”Ÿäº†æä¾›çš„ä¿¡æ¯é‡å°±å¾ˆå¤§ï¼Œå‘ç”Ÿåæ¶ˆé™¤çš„ä¸ç¡®å®šæ€§å°±å¾ˆå¤§ï¼Œè‡ªä¿¡æ¯é‡å°±å¤§ã€‚å› æ­¤ï¼Œæ¦‚ç‡å’Œä¿¡æ¯é‡å¯èƒ½æ˜¯è´Ÿç›¸å…³çš„ã€‚æ ¹æ®å®¢è§‚äº‹å®å’Œäººä»¬çš„ä¹ æƒ¯æ¦‚å¿µï¼Œä¸ç¡®å®šæ€§å‡½æ•° $f$ åº”è¯¥æ»¡è¶³å¦‚ä¸‹çš„æ¡ä»¶ï¼š  å‡å‡½æ•°ï¼š$f$ æ˜¯ $P$ çš„å•è°ƒé€’å‡å‡½æ•°ï¼Œ          $P(a_i)=1$ æ—¶ $f(P_i)=0$ï¼Œ      $P(a_i)=0$ æ—¶ $f(P_i)=\\infty$        å¯åŠ æ€§ï¼šä¸¤ä¸ªç‹¬ç«‹æ¶ˆæ¯æ‰€äº§ç”Ÿçš„ä¸ç¡®å®šæ€§åº”ç­‰äºå„è‡ªä¸ç¡®å®šæ€§ä¹‹å’Œï¼Œ$f(P_1,P_2)=f(P_1)+f(P_2)$  ç”±äºäº‹ä»¶ $P_1,P_2$ æ˜¯ç‹¬ç«‹ä¸ç›¸å…³çš„ï¼Œå› æ­¤ $P(1,2)=P_1P_2$ã€‚åŒæ—¶æ»¡è¶³è¿™ 3 ä¸ªæ¡ä»¶çš„å‡½æ•° $f$ æ˜¯è´Ÿå¯¹æ•°å‡½æ•°ï¼Œå³\\[f(P) = {\\rm log}\\frac{1}{P} = -{\\rm log}P\\quad P \\in [0,1]\\]å‡½æ•°å›¾åƒå¦‚ä¸‹å›¾æ‰€ç¤ºäº‹ä»¶å‘ç”Ÿå‰ï¼Œ$f$ è¡¨ç¤ºäº‹ä»¶å‘ç”Ÿçš„ä¸ç¡®å®šæ€§ï¼›äº‹ä»¶å‘ç”Ÿåï¼Œ$f$ è¡¨ç¤ºäº‹ä»¶æ‰€å«æœ‰ï¼ˆæ‰€æä¾›ï¼‰çš„ä¿¡æ¯é‡ã€‚è‡ªä¿¡æ¯é‡‡ç”¨çš„å•ä½å–å†³äºå¯¹æ•°æ‰€é€‰çš„åº•ã€‚ç”±äºæ¦‚ç‡ $P$ï¼ˆä½œä¸ºè‡ªå˜é‡ï¼‰ æ˜¯å°äº 1 çš„æ­£æ•°ï¼Œåˆæ ¹æ®å®é™…æƒ…å†µè‡ªä¿¡æ¯ä¹Ÿå¿…ç„¶æ˜¯æ­£æ•°ï¼Œæ‰€ä»¥å¯¹æ•°çš„åº•åº”é€‰å–ä¸ºå¤§äº 1 çš„ä»»æ„æ•°ã€‚ä¿¡æ¯è®ºä¸­ä¸€èˆ¬å– 2 ä¸ºåº•ï¼Œåˆ™æ‰€å¾—çš„ä¿¡æ¯é‡å•ä½ä¸º æ¯”ç‰¹ï¼ˆbitï¼Œbinary unitï¼‰ã€‚æœºå™¨å­¦ä¹ ä¸­ä¸€èˆ¬å– $e$ ä¸ºåº•çš„è‡ªç„¶å¯¹æ•°ï¼Œä¿¡æ¯é‡å•ä½ä¸º å¥ˆç‰¹ï¼ˆnat, nature unitï¼‰ã€‚å¦‚æœå– 10ä¸ºåº•ï¼Œä¿¡æ¯é‡å•ä½ä¸º å“ˆç‰¹ï¼ˆhart, Hartley çš„ç¼©å†™ï¼Œçºªå¿µä»–é¦–å…ˆæå‡ºç”¨å¯¹æ•°æ¥åº¦é‡ä¿¡æ¯ï¼‰ã€‚å– 2 ä¸ºåº•æ—¶å¯ä»¥ç•¥å»ä¸å†™ã€‚å¦‚æœ $P(a_i)=0.5$ï¼Œåˆ™ $f(P)=1$ æ¯”ç‰¹ã€‚æ‰€ä»¥ 1 æ¯”ç‰¹ä¿¡æ¯é‡å°±æ˜¯ä¸¤ä¸ªäº’ä¸ç›¸å®¹çš„ç­‰å¯èƒ½äº‹ä»¶ä¹‹ä¸€å‘ç”Ÿæ—¶æä¾›çš„ä¿¡æ¯é‡ã€‚æ³¨æ„ï¼Œè¿™é‡Œçš„æ¯”ç‰¹æ—¶æŠ½è±¡çš„ä¿¡æ¯é‡å•ä½ï¼Œä¸è®¡ç®—æœºæœ¯è¯­ä¸­çš„æ¯”ç‰¹å«ä¹‰ä¸åŒï¼Œå®ƒä»£è¡¨äºŒå…ƒæ•°å­—ï¼ˆbinary digitsï¼‰ã€‚è¿™ä¸¤ç§æ¦‚å¿µä¹‹é—´çš„å…³ç³»æ˜¯ï¼Œæ¯ä¸ªäºŒå…ƒæ•°å­—æ‰€èƒ½æä¾›çš„æœ€å¤§å¹³å‡ä¿¡æ¯é‡ä¸º 1 æ¯”ç‰¹ã€‚3.2. ä¿¡æ¯ç†µå‰é¢å®šä¹‰çš„è‡ªä¿¡æ¯æ˜¯æŸä¸€ä¿¡æºå‘å‡ºæŸä¸€æ¶ˆæ¯æ‰€å«æœ‰çš„ä¿¡æ¯é‡ã€‚å¦‚æœå‘å‡ºçš„æ¶ˆæ¯ä¸åŒï¼Œæ‰€å«æœ‰çš„ä¿¡æ¯é‡ä¹Ÿå°±ä¸åŒã€‚å› æ­¤ï¼Œè‡ªä¿¡æ¯æ˜¯ä¸€ä¸ªéšæœºå˜é‡ï¼Œä¸èƒ½ç”¨æ¥ä½œä¸ºæ•´ä¸ªä¿¡æºçš„ä¿¡æ¯æµ‹åº¦ã€‚æˆ‘ä»¬å®šä¹‰è‡ªä¿¡æ¯çš„æ•°å­¦æœŸæœ›ä¸ºä¿¡æºçš„å¹³å‡è‡ªä¿¡æ¯é‡ã€‚ä¿¡æºä¸€èˆ¬åŒ…æ‹¬å¤šç§ä¿¡å·ï¼Œå¦‚æœè€ƒè™‘è¿™ä¸ªä¿¡æºæ‰€æœ‰å¯èƒ½å‘ç”Ÿæƒ…å†µçš„å¹³å‡ä¸ç¡®å®šæ€§ï¼Œå‡è®¾ä¿¡æºæ¶ˆæ¯æœ‰ $n$ ç§å–å€¼ï¼š$x_1,â€¦,x_i,â€¦,x_n$ï¼Œå¯¹åº”æ¦‚ç‡ä¸ºï¼š$P(x_1),â€¦,P(x_i),â€¦,P(x_n)$ï¼Œä¸”å„ç§æ¶ˆæ¯çš„å‡ºç°å½¼æ­¤ç‹¬ç«‹ã€‚è¿™æ—¶ï¼Œä¿¡æºçš„å¹³å‡ä¸ç¡®å®šæ€§åº”å½“ä¸ºå•ä¸ªæ¶ˆæ¯ä¸ç¡®å®šæ€§ $-{\\rm log}P(x_i)$ çš„æ•°å­¦æœŸæœ›ï¼ˆ$\\mathbb E$ï¼‰ï¼Œå¯ç§°ä¸ºä¿¡æ¯ç†µ\\[H(X) = \\mathbb E[-{\\rm log} P(x_i)] = -\\sum_{i=1}^n P(x_i){\\rm log} P(x_i)\\]ä¿¡æ¯ç†µï¼šä¿¡æºçš„å¹³å‡ä¸ç¡®å®šæ€§ï¼Œä¸ºå•ä¸ªæ¶ˆæ¯ä¸ç¡®å®šæ€§çš„æ•°å­¦æœŸæœ›ï¼ˆç»Ÿè®¡å¹³å‡å€¼ï¼‰ã€‚1948å¹´ï¼ŒC.E.Shannonï¼ˆé¦™å†œï¼‰æå‡ºäº† â€œä¿¡æ¯ç†µâ€ çš„æ¦‚å¿µï¼Œæ‰è§£å†³äº†å¯¹ä¿¡æ¯çš„é‡åŒ–åº¦é‡é—®é¢˜ã€‚ä¿¡æ¯ç†µè¿™ä¸ªè¯æ˜¯é¦™å†œä»çƒ­åŠ›å­¦ä¸­å€Ÿç”¨è¿‡æ¥çš„ã€‚çƒ­åŠ›å­¦ä¸­çš„çƒ­ç†µæ˜¯è¡¨ç¤ºåˆ†å­çŠ¶æ€æ··ä¹±ç¨‹åº¦çš„ç‰©ç†é‡ã€‚å¯¹äºè¿ç»­åˆ†å¸ƒï¼Œä¿¡æ¯ç†µçš„è¡¨ç¤ºå¦‚ä¸‹ï¼ˆè¿ç»­å‹éšæœºå˜é‡çš„æ•°å­¦æœŸæœ›ï¼‰\\[H(X) = \\mathbb E[-{\\rm log} P(x)] = -\\int_x P(x){\\rm log} P(x) {\\rm d}x\\]é¦™å†œç”¨ä¿¡æ¯ç†µçš„æ¦‚å¿µæ¥æè¿°ä¿¡æºçš„å¹³å‡ä¸ç¡®å®šåº¦ï¼Œç›¸å½“äºæ¯ä¸ªæ¶ˆæ¯æ‰€æä¾›çš„å¹³å‡ä¿¡æ¯é‡ã€‚ä¾‹å¦‚ï¼Œä¸¤ä¸ªä¿¡æºåˆ†åˆ«ä¸º\\[\\begin{bmatrix}X\\\\ P(x)\\end{bmatrix} = \\begin{bmatrix}a_1 &amp; a_2\\\\ 0.99 &amp; 0.01\\end{bmatrix},\\quad \\begin{bmatrix}Y\\\\ P(y)\\end{bmatrix} = \\begin{bmatrix}b_1 &amp; b_2\\\\ 0.5 &amp; 0.5\\end{bmatrix}\\]ä¸¤ä¸ªä¿¡æºçš„ä¿¡æ¯ç†µåˆ†åˆ«ä¸º\\[\\begin{aligned}  H(X) &amp;= -0.99{\\rm log} 0.99-0.01{\\rm log} 0.01 = 0.08 (bit/info)\\\\  H(Y) &amp;= -0.5{\\rm log} 0.5-0.5{\\rm log} 0.5 = 1 (bit/info)\\end{aligned}\\]å¯è§ï¼Œä¿¡æº $Y$ çš„å¹³å‡ä¸ç¡®å®šæ€§å¤§ã€‚æˆ‘ä»¬è§‚å¯Ÿä¿¡æº $Y$ï¼Œå®ƒçš„ä¸¤ä¸ªè¾“å‡ºæ¶ˆæ¯æ˜¯ç­‰å¯èƒ½æ€§çš„ï¼Œæ‰€ä»¥åœ¨æ²¡æœ‰è¾“å‡ºå‰çŒœæµ‹è¾“å‡ºå“ªä¸ªæ¶ˆæ¯çš„ä¸ç¡®å®šæ€§è¦å¤§ã€‚åä¹‹ï¼Œå¯¹äºä¿¡æº $X$ï¼Œç”±äºäº‹ä»¶ $a_1$ å‡ºç°çš„æ¦‚ç‡è¿œè¶…äº‹ä»¶ $a_2$ï¼Œè™½ç„¶å…·æœ‰ä¸ç¡®å®šæ€§ï¼Œä½†æ˜¯å¤§è‡´çŒœæµ‹äº‹ä»¶ $a_1$ ä¼šå‡ºç°ã€‚ä¸¾ä¸ªä¾‹å­è¯´æ˜ä¿¡æ¯ç†µçš„ä½œç”¨ã€‚  èµŒé©¬æ¯”èµ›ï¼Œæœ‰4åŒ¹é©¬ ${ A, B, C, D}$ï¼Œè·èƒœæ¦‚ç‡åˆ†åˆ«ä¸º ${ 1/2, 1/4, 1/8, 1/8 }$ï¼Œå°†å“ªä¸€åŒ¹é©¬è·èƒœè§†ä¸ºéšæœºå˜é‡Xå±äº ${ A, B, C, D }$ ã€‚å‡å®šæˆ‘ä»¬éœ€è¦ç”¨å°½å¯èƒ½å°‘çš„äºŒå…ƒé—®é¢˜æ¥ç¡®å®šéšæœºå˜é‡ X çš„å–å€¼ã€‚ä¾‹å¦‚ï¼Œé—®é¢˜1ï¼šAè·èƒœäº†å—ï¼Ÿã€€é—®é¢˜2ï¼šBè·èƒœäº†å—ï¼Ÿã€€é—®é¢˜3ï¼šCè·èƒœäº†å—ï¼Ÿæœ€åæˆ‘ä»¬å¯ä»¥é€šè¿‡æœ€å¤š3ä¸ªäºŒå…ƒé—®é¢˜ï¼Œæ¥ç¡®å®šå–å€¼ï¼š      å¦‚æœX = Aï¼Œé‚£ä¹ˆéœ€è¦é—®1æ¬¡ï¼ˆé—®é¢˜1ï¼šæ˜¯ä¸æ˜¯Aï¼Ÿï¼‰ï¼Œæ¦‚ç‡ä¸º1/2    å¦‚æœX = Bï¼Œé‚£ä¹ˆéœ€è¦é—®2æ¬¡ï¼ˆé—®é¢˜1ï¼šæ˜¯ä¸æ˜¯Aï¼Ÿé—®é¢˜2ï¼šæ˜¯ä¸æ˜¯Bï¼Ÿï¼‰ï¼Œæ¦‚ç‡ä¸º1/4    å¦‚æœX = Cï¼Œé‚£ä¹ˆéœ€è¦é—®3æ¬¡ï¼ˆé—®é¢˜1ï¼Œé—®é¢˜2ï¼Œé—®é¢˜3ï¼‰ï¼Œæ¦‚ç‡ä¸º1/8    å¦‚æœX = Dï¼Œé‚£ä¹ˆéœ€è¦é—®3æ¬¡ï¼ˆé—®é¢˜1ï¼Œé—®é¢˜2ï¼Œé—®é¢˜3ï¼‰ï¼Œæ¦‚ç‡ä¸º1/8  åœ¨äºŒè¿›åˆ¶è®¡ç®—æœºä¸­ï¼Œä¸€ä¸ªæ¯”ç‰¹ä¸º 0 æˆ– 1ï¼Œå…¶å®å°±ä»£è¡¨äº†ä¸€ä¸ªäºŒå…ƒé—®é¢˜çš„å›ç­”ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸€ä¸ª 2 æ¯”ç‰¹çš„æ•°å­—æ¥å®Œæˆä¸Šé¢çš„èµŒé©¬ç»“æœï¼š00 - Aè·èƒœï¼Œ  01 - Bè·èƒœï¼Œ  10 - Cè·èƒœï¼Œ  11 - Dè·èƒœç„¶è€Œï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨éå‡åŒ€åˆ†å¸ƒè¿™ä¸ªç‰¹ç‚¹ï¼Œä½¿ç”¨æ›´çŸ­çš„ç¼–ç æ¥æè¿°æ›´å¯èƒ½çš„äº‹ä»¶ï¼Œä½¿ç”¨æ›´é•¿çš„ç¼–ç æ¥æè¿°ä¸å¤ªå¯èƒ½çš„äº‹ä»¶ã€‚æˆ‘ä»¬å¸Œæœ›è¿™æ ·åšèƒ½å¤Ÿå¾—åˆ°ä¸€ä¸ªæ›´çŸ­çš„å¹³å‡ç¼–ç é•¿åº¦ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„ç¼–ç ä¸²ï¼ˆå“ˆå¤«æ›¼ç¼–ç ï¼‰ï¼š0 - Aè·èƒœ,   10 - Bè·èƒœ,   110 - Cè·èƒœ,   111 - Dè·èƒœæ­¤æ—¶ï¼Œä¼ è¾“çš„ç¼–ç çš„å¹³å‡é•¿åº¦å°±æ˜¯ï¼š\\[1/2\\times 1bit + 1/4\\times 2bit + 1/8\\times 3bit + 1/8\\times 3bit = \\frac{7}{4}bits = 1.75bits\\]å›åˆ°ä¿¡æ¯ç†µçš„å®šä¹‰ï¼Œä¼šå‘ç°é€šè¿‡ä¹‹å‰çš„ä¿¡æ¯ç†µå…¬å¼ï¼Œç¥å¥‡åœ°å¾—åˆ°äº†\\[H(N) = \\frac{1}{2}\\cdot {\\rm log}(2)+\\frac{1}{4}\\cdot {\\rm log}(4)+\\frac{1}{8}\\cdot {\\rm log}(8)+\\frac{1}{8}\\cdot {\\rm log}(8) =\\frac{1}{2}+\\frac{2}{4}+\\frac{3}{8}+\\frac{3}{8} = \\frac{7}{4} bits\\]ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨è®¡ç®—æœºä¸­ï¼Œæˆ‘ä»¬ç»™å“ªä¸€åŒ¹é©¬å¤ºå† è¿™ä¸ªäº‹ä»¶è¿›è¡Œç¼–ç ï¼Œæ‰€éœ€è¦çš„å¹³å‡ç é•¿ä¸º 1.75 ä¸ªæ¯”ç‰¹ã€‚æ‰€ä»¥ï¼Œä¿¡æ¯ç†µ $H(X)$ å¯ä»¥çœ‹åšå¯¹ä¿¡æº $X$ ä¸­çš„æ ·æœ¬è¿›è¡Œç¼–ç æ‰€éœ€è¦çš„ç¼–ç é•¿åº¦çš„æœŸæœ›å€¼ï¼ŒåŒæ—¶ä¹Ÿè¡¨æ˜ï¼Œä¿¡æ¯ç†µæ˜¯ä¼ è¾“ä¸€ä¸ªéšæœºå˜é‡çŠ¶æ€å€¼æ‰€éœ€çš„æ¯”ç‰¹ä½ä¸‹ç•Œï¼ˆæœ€çŸ­å¹³å‡ç¼–ç é•¿åº¦ï¼‰ã€‚3.3. ç›¸å¯¹ç†µï¼ˆKLæ•£åº¦ï¼‰ç›¸å¯¹ç†µï¼Œrelative entropy = Kullback-Leibler divergenceï¼Œç”¨äºè¡¡é‡ä¸¤ä¸ªæ¦‚ç‡åˆ†å¸ƒä¹‹é—´çš„å·®å¼‚ã€‚è®¾ $P(x)$ å’Œ $Q(x)$ æ˜¯ç¦»æ•£éšæœºå˜é‡ $X$ ä¸­å–å€¼çš„ä¸¤ä¸ªæ¦‚ç‡åˆ†å¸ƒã€‚å…¶ä¸­ï¼Œ$P(x)$ ä¸ºæˆ‘ä»¬å¾€å¾€ä¸èƒ½æµ‹å¾—çš„çœŸå®åˆ†å¸ƒï¼Œè€Œ $Q(x)$ æ˜¯æˆ‘ä»¬å¯ä»¥æµ‹å¾—çš„é¢„æµ‹åˆ†å¸ƒã€‚å¯¹äº $P(x)$ è€Œè¨€ï¼Œå…¶ä¿¡æ¯ç†µä¸º\\[H(P) = -\\int P(x){\\rm log}P(x)\\]å¯¹äº $Q(x)$ è€Œè¨€ï¼Œç”±äºå…¶æ ·æœ¬æ¥è‡ªçœŸå®åˆ†å¸ƒ $P(x)$ï¼Œå› æ­¤å…¶ä¿¡æ¯ç†µä¸­çš„æ¦‚ç‡ä¾ç„¶ä¸º $P(X)$ï¼Œåˆ™å…¶ä¿¡æ¯ç†µä¸º\\[H(P,Q) = -\\int P(x){\\rm log}Q(x)\\]ä¸ºäº†è¡¡é‡äºŒè€…çš„å·®å¼‚ï¼Œå®šä¹‰ ç›¸å¯¹ç†µ ä¸º\\[\\begin{aligned}KL(P\\Vert Q) &amp;= -\\int P(x){\\rm log}Q(x) - [-\\int P(x){\\rm log} P(x)]\\\\&amp;= - \\int P(x){\\rm log}\\frac{Q(x)}{P(x)}\\end{aligned}\\]ç›¸å¯¹ç†µåˆè¢«ç§°ä¸º KL æ•£åº¦ã€‚      ç”±äº $P(x)$ å’Œ $Q(x)$ åœ¨å…¬å¼ä¸­çš„åœ°ä½ä¸æ˜¯ç›¸ç­‰çš„ï¼Œæ‰€ä»¥ $KL(P\\Vert Q)\\not\\equiv KL(Q\\Vert P)$ã€‚        å½“ï¼Œ$P(x) = Q(x)$æ—¶ï¼Œ$KL(P\\Vert Q) = 0$ã€‚è‹¥ $P(x)$ å’Œ $Q(x)$ æœ‰å·®å¼‚ï¼Œ$KL(P\\Vert Q) &gt; 0$ã€‚  KL æ•£åº¦çš„éè´Ÿæ€§è¯æ˜ï¼Œåˆ©ç”¨äº†è´ŸæŒ‡æ•°å‡½æ•°æ˜¯ä¸¥æ ¼å‡¸å‡½æ•°çš„æ€§è´¨ï¼Œè¯æ˜è¿‡ç¨‹å¦‚ä¸‹ï¼š  é¦–å…ˆï¼Œ$-log()$ å‡½æ•°æ˜¯ä¸Šå‡¹å‡½æ•°ï¼Œå¦‚ä¸‹é¢çš„ç¤ºæ„å›¾æ‰€ç¤ºæ ¹æ® Jensen ä¸ç­‰å¼ï¼š$f(\\mathbb E(x))\\leq \\mathbb E(f(x))$æ ¹æ®å«éšéšæœºå˜é‡çš„ Jensen ä¸ç­‰å¼ï¼š$f(\\mathbb E[\\xi(z)])\\leq \\mathbb E[f(\\xi(z))]$ä»¤ $f(\\cdot) = -log(\\cdot)$ï¼Œä»¤ $\\xi(z) = \\frac{Q(x)}{P(x)}$ï¼Œå¸¦å…¥ä¸Šå¼å¾—\\(\\begin{aligned}\\mathbb E_x[f(\\xi(x))] &amp;\\geq f(\\mathbb E_x[\\xi (x)])\\\\\\mathbb E_x[-log(\\frac{Q(x)}{P(x)})] &amp;\\geq -log(E_x[\\frac{Q(x)}{P(x)}]))\\\\-\\int log(\\frac{Q(x)}{P(x)}) P(x){\\rm d}x &amp;\\geq -log(\\int \\frac{Q(x)}{P(x)}P(x){\\rm d}x)\\\\-\\int log(\\frac{Q(x)}{P(x)}) P(x){\\rm d}x &amp;\\geq -log(\\int Q(x){\\rm d}x)=-log(1)=0\\\\\\end{aligned}\\)3.4. äº¤å‰ç†µéåœ°èƒ¡è¯´. è¯¦è§£æœºå™¨å­¦ä¹ ä¸­çš„ç†µã€æ¡ä»¶ç†µã€ç›¸å¯¹ç†µå’Œäº¤å‰ç†µKL æ•£åº¦å¯ä»¥ç”¨æ¥è¯„ä¼°ä¸¤ä¸ªåˆ†å¸ƒçš„å·®å¼‚ç¨‹åº¦ï¼Œå‡è®¾æœªçŸ¥çœŸå®åˆ†å¸ƒä¸º $P(x)$ï¼Œå·²çŸ¥ä¼°è®¡åˆ†å¸ƒä¸º $Q(x)$ï¼Œæ ¹æ®å…¶å®šä¹‰\\[\\begin{aligned}KL(P\\Vert Q) &amp;= -\\int P(x){\\rm log}Q(x) - [-\\int P(x){\\rm log} P(x)]\\\\&amp;= H(P,Q) - H(P)\\end{aligned}\\]æ³¨æ„åˆ°ï¼Œåä¸€é¡¹ $H(P)$ æ˜¯æœªçŸ¥çœŸå®åˆ†å¸ƒçš„ä¿¡æ¯ç†µï¼Œå¯¹äºä¸€ä¸ªç¡®å®šçš„æœªçŸ¥åˆ†å¸ƒè€Œè¨€æ˜¯ä¸ªå¸¸æ•°ã€‚å› æ­¤ï¼Œåœ¨å®é™…åº”ç”¨ä¸­æˆ‘ä»¬åªå…³å¿ƒå‰ä¸€é¡¹çš„å–å€¼ï¼Œå‰ä¸€é¡¹ $H(P,Q)$ æˆ‘ä»¬ç§°ä¸º äº¤å‰ç†µã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ°å¦‚ä¸‹çš„ç­‰å¼\\[ç›¸å¯¹ç†µï¼ˆKLæ•£åº¦ï¼‰ = äº¤å‰ç†µ - ä¿¡æ¯ç†µ\\]æ ¹æ®å‰é¢ $KL æ•£åº¦\\geq 0$ çš„æ€§è´¨ï¼Œæˆ‘ä»¬å¯ä»¥çŸ¥é“ï¼Œ$äº¤å‰ç†µ \\geq ä¿¡æ¯ç†µ$ã€‚åœ¨æœºå™¨å­¦ä¹ ä¸­ï¼Œæˆ‘ä»¬å¸Œæœ›åœ¨è®­ç»ƒæ•°æ®ä¸Šæ¨¡å‹å­¦åˆ°çš„åˆ†å¸ƒ $Q(x)$ å’ŒçœŸå®æ•°æ®çš„åˆ†å¸ƒ  $P(x)$ è¶Šæ¥è¿‘è¶Šå¥½ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ä½¿å…¶ç›¸å¯¹ç†µæœ€å°ã€‚ä½†æ˜¯æˆ‘ä»¬æ²¡æœ‰çœŸå®æ•°æ®çš„åˆ†å¸ƒï¼Œæ‰€ä»¥åªèƒ½å¸Œæœ›æ¨¡å‹å­¦åˆ°çš„åˆ†å¸ƒ $Q(x)$ å’Œè®­ç»ƒæ•°æ®çš„åˆ†å¸ƒ $P_t(x)$ å°½é‡ç›¸åŒã€‚å‡è®¾è®­ç»ƒæ•°æ®æ˜¯ä»æ€»ä½“ä¸­ç‹¬ç«‹åŒåˆ†å¸ƒé‡‡æ ·çš„ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥é€šè¿‡æœ€å°åŒ–è®­ç»ƒæ•°æ®çš„ç»éªŒè¯¯å·®æ¥é™ä½æ¨¡å‹çš„æ³›åŒ–è¯¯å·®ã€‚å³ï¼š  å¸Œæœ›å­¦åˆ°çš„æ¨¡å‹çš„åˆ†å¸ƒå’ŒçœŸå®åˆ†å¸ƒä¸€è‡´ï¼Œ$Q(x) \\simeq P(x)$  ä½†æ˜¯çœŸå®åˆ†å¸ƒä¸å¯çŸ¥ï¼Œå‡è®¾è®­ç»ƒæ•°æ®æ˜¯ä»çœŸå®æ•°æ®ä¸­ç‹¬ç«‹åŒåˆ†å¸ƒé‡‡æ ·çš„ï¼Œ$P_t(x) \\simeq P(x)$  å› æ­¤ï¼Œæˆ‘ä»¬å¸Œæœ›å­¦åˆ°çš„æ¨¡å‹åˆ†å¸ƒè‡³å°‘å’Œè®­ç»ƒæ•°æ®çš„åˆ†å¸ƒä¸€è‡´ï¼Œ$Q(x) \\simeq P_t(x)$æ ¹æ®ä¹‹å‰çš„æè¿°ï¼Œæœ€å°åŒ–è®­ç»ƒæ•°æ®ä¸Šçš„åˆ†å¸ƒ $P_t(x)$ ä¸æœ€å°åŒ–æ¨¡å‹åˆ†å¸ƒ $Q(x)$ çš„å·®å¼‚ç­‰ä»·äºæœ€å°åŒ–ç›¸å¯¹ç†µï¼Œå³ ${\\rm minimize}\\ [KL(P_t(x)\\vert \\vert Q(x))]$ã€‚æ­¤æ—¶ï¼Œ$P_t(x)$ å°±æ˜¯ $KL(p\\vert \\vert q)$ ä¸­çš„ $p$ï¼Œå³çœŸå®åˆ†å¸ƒï¼Œ$Q(x)$ å°±æ˜¯ $q$ã€‚åˆå› ä¸ºè®­ç»ƒæ•°æ®çš„åˆ†å¸ƒ $p$ æ˜¯ç»™å®šçš„ï¼Œæ‰€ä»¥æ±‚ $KL(p\\vert \\vert q)$ ç­‰ä»·äºæ±‚ $H(p,q)$ã€‚å¾—è¯ï¼Œäº¤å‰ç†µå¯ä»¥ç”¨æ¥è®¡ç®—å­¦ä¹ æ¨¡å‹åˆ†å¸ƒä¸è®­ç»ƒåˆ†å¸ƒä¹‹é—´çš„å·®å¼‚ã€‚å®é™…ä¸Šï¼Œç”±äº $P(x)$ æ˜¯å·²çŸ¥\\[{\\rm minimize}\\ H(p,q) = {\\rm minimize}\\ [-\\int P(x){\\rm log}Q(x)] = {\\rm minimize}\\ \\mathbb E_p[-log Q(x)]\\]ä»»ä½•ä¸€ä¸ªè´Ÿå¯¹æ•°ä¼¼ç„¶ç»„æˆçš„æŸå¤±éƒ½æ˜¯å®šä¹‰åœ¨è®­ç»ƒé›†ä¸Šçš„ç»éªŒåˆ†å¸ƒå’Œå®šä¹‰åœ¨æ¨¡å‹ä¸Šçš„çœŸå®åˆ†å¸ƒä¹‹é—´çš„äº¤å‰ç†µã€‚  ccj_zj. å¤šåˆ†ç±»é—®é¢˜ä¸­çš„äº¤å‰ç†µ  äº¤å‰ç†µæ˜¯ç›´æ¥è¡¡é‡ä¸¤ä¸ªåˆ†å¸ƒï¼Œæˆ–è€…è¯´ä¸¤ä¸ªmodelä¹‹é—´çš„å·®å¼‚ã€‚è€Œä¼¼ç„¶å‡½æ•°åˆ™æ˜¯è§£é‡Šä»¥modelçš„è¾“å‡ºä¸ºå‚æ•°çš„æŸåˆ†å¸ƒæ¨¡å‹å¯¹æ ·æœ¬é›†çš„è§£é‡Šç¨‹åº¦ã€‚å› æ­¤ï¼Œå¯ä»¥è¯´è¿™ä¸¤è€…æ˜¯â€œåŒè²Œä¸åŒæºâ€ï¼Œä½†æ˜¯â€œæ®Šé€”åŒå½’â€å•¦ã€‚3.5. softmax å‡½æ•°$n$ åˆ†ç±»é—®é¢˜ çš„ softmax å‡½æ•°å®šä¹‰å¦‚ä¸‹\\[\\hat y_i = P(z_i) = \\frac{e^{z_i}}{\\sum_{j=1}^n e^{z_j}}\\]å‡è®¾æŸä¸ªè®­ç»ƒæ ·æœ¬ç»è¿‡ç¥ç»ç½‘ç»œååˆ°è¾¾ softmax å±‚ä¹‹å‰çš„è¾“å‡ºå‘é‡ä¸º $z=[ 1, 5, 3 ]$, é‚£ä¹ˆç»è¿‡ softmax å‡½æ•°åçš„æ¦‚ç‡åˆ†åˆ«ä¸º $\\hat y=[0.015,0.866,0.117]$ã€‚å‡è®¾æœŸæœ›è¾“å‡ºæ ‡ç­¾ä¸º $y = [0,1,0]$ï¼Œé‚£ä¹ˆäº¤å‰ç†µæŸå¤±å‡½æ•°å¯ä»¥å®šä¹‰ä¸º\\[L(\\hat y, y) = -\\sum_{j=1}^3 y_j {\\rm ln} \\hat{y}_j\\]ç”±äºåœ¨åˆ†ç±»é—®é¢˜ä¸­ï¼ŒæœŸæœ›è¾“å‡ºæ ‡ç­¾æ˜¯ one-hot å‹å˜é‡ã€‚ä¸å¤±ä¸€èˆ¬æ€§ï¼Œå‡è®¾ç¬¬ $j$ ä¸ªåˆ†é‡ä¸º 1 ï¼Œåˆ™æŸå¤±å‡½æ•°ä¸º\\[L(\\hat y, y) = - {\\rm ln} \\hat{y}_j\\ (y_j = 1)\\]è¿›è¡Œæ¢¯åº¦ä¸‹é™æ—¶ï¼Œæ ¹æ®é“¾å¼æ³•åˆ™\\[\\frac{\\partial L}{\\partial \\omega} = \\frac{\\partial L}{\\partial \\hat y_j}\\frac{\\partial \\hat y_j}{\\partial z_i}\\frac{\\partial z_i}{\\partial \\omega_k}\\]å…¶ä¸­\\[\\frac{\\partial L}{\\partial \\hat y_j} = -\\frac{1}{\\hat y_j}\\]è€Œ $\\frac{\\partial z_i}{\\partial \\omega_k}$ æ ¹æ®ç½‘ç»œå…·ä½“å½¢å¼ï¼Œä¸€èˆ¬æ¯”è¾ƒå¥½æ±‚ã€‚å› æ­¤ï¼Œé‡ç‚¹åœ¨äºæ±‚è§£ä¸­é—´çš„åå¯¼é¡¹ï¼Œéœ€è¦åˆ†æƒ…å†µè®¨è®º$j=i$ æ—¶ï¼Œè¡¨æ˜åå‘ä¼ æ’­è‡³åŒæ ·ä¸‹æ ‡çš„ä¸Šä¸€å±‚èŠ‚ç‚¹ï¼š\\[\\begin{aligned}{\\rm if}\\quad j&amp;=i:\\\\\\frac{\\partial \\hat y_j}{\\partial z_i}&amp;=\\frac{\\partial \\hat y_i}{\\partial z_i}\\\\&amp;=\\frac{\\partial }{\\partial z_i}(\\frac{e^{z_i}}{\\sum_{k} e^{z_k}})\\\\&amp;=\\frac{(e^{z_i})'\\cdot \\sum_{k} e^{z_k}-e^{z_i}\\cdot e^{z_i}}{(\\sum_{k} e^{z_k})^2}\\quad(åˆ†å¼å‡½æ•°æ±‚å¯¼æ³•åˆ™)\\\\&amp;=\\frac{e^{z_i}}{\\sum_{k} e^{z_k}} - \\frac{e^{z_i}}{\\sum_{k} e^{z_k}}\\frac{e^{z_i}}{\\sum_{k} e^{z_k}}\\\\&amp;= \\hat y_j(1-\\hat y_j)\\end{aligned}\\]æ­¤æ—¶\\[\\frac{\\partial L}{\\partial z_j} = -\\frac{1}{\\hat y_j} \\cdot \\hat y_j(1-\\hat y_j) = \\hat y_j - 1\\]å¯ä»¥çœ‹å‡ºå½¢å¼éå¸¸ç®€å•ï¼Œåªè¦æ­£å‘æ±‚ä¸€æ¬¡å¾—å‡ºç»“æœï¼Œç„¶ååå‘ä¼ æ¢¯åº¦çš„æ—¶å€™ï¼Œå°†ç»“æœå‡ 1 å³å¯ã€‚$j\\neq i$ æ—¶ï¼Œè¡¨æ˜åå‘ä¼ æ’­è‡³ä¸åŒä¸‹æ ‡çš„ä¸Šä¸€å±‚èŠ‚ç‚¹ï¼š\\[\\begin{aligned}{\\rm if}\\quad j&amp;\\neq i:\\\\\\frac{\\partial \\hat y_j}{\\partial z_i}&amp;=\\frac{\\partial }{\\partial z_i}(\\frac{e^{z_j}}{\\sum_{k} e^{z_k}})\\\\&amp;=\\frac{ {\\rm d} e^{z_j}/{\\rm d} e^{z_i}\\cdot \\sum_{k} e^{z_k}-e^{z_j}\\cdot e^{z_i} }{(\\sum_{k} e^{z_k})^2}\\\\&amp;=\\frac{0\\cdot \\sum_{k} e^{z_k}-e^{z_j}\\cdot e^{z_i}}{(\\sum_{k} e^{z_k})^2}\\\\&amp;=-\\frac{e^{z_j}}{\\sum_{k} e^{z_k}}\\frac{e^{z_i}}{\\sum_{k} e^{z_k}}\\\\&amp;= -\\hat y_j\\hat y_i\\end{aligned}\\]æ­¤æ—¶\\[\\frac{\\partial L}{\\partial z_j} = -\\frac{1}{\\hat y_j} \\cdot (-\\hat y_j\\hat y_i) = \\hat y_i\\]å½¢å¼åŒæ ·éå¸¸ç®€å•ï¼Œåªè¦æ­£å‘æ±‚ä¸€æ¬¡å¾—å‡ºç»“æœï¼Œç„¶ååå‘ä¼ æ¢¯åº¦çš„æ—¶å€™ï¼Œå°†å®ƒç»“æœä¿å­˜å³å¯ã€‚è¿˜æ˜¯ä¸Šé¢çš„ä¾‹å­ï¼Œå‡è®¾è¾“å‡ºå‘é‡ä¸º $z=[ 1, 5, 3 ]$, é‚£ä¹ˆç»è¿‡ softmax å‡½æ•°åçš„æ¦‚ç‡åˆ†åˆ«ä¸º $\\hat y=[0.015,0.866,0.117]$ï¼Œäº¤å‰ç†µæŸå¤±å‡½æ•°å¯¹ $z$ çš„ç¯‡å¯¼æ•°ä¸º $\\hat yâ€™=[0.015,0.866-1,0.117] = [0.015,-0.134,0.117]$ã€‚å¯ä»¥çœ‹å‡ºï¼Œsoftmax é…åˆ äº¤å‰ç†µæŸå¤±å‡½æ•° å¯ä»¥ä½¿å¾—æ¢¯åº¦ä¸‹é™éå¸¸ç®€å•ã€‚4. å‚è€ƒæ–‡çŒ®[1] äº§å“ç»ç†é©¬å¿ ä¿¡. åº”è¯¥å¦‚ä½•ç†è§£æ¦‚ç‡åˆ†å¸ƒå‡½æ•°å’Œæ¦‚ç‡å¯†åº¦å‡½æ•°ï¼Ÿ[2] å¿†è‡». ä¸€æ–‡ææ‡‚æå¤§ä¼¼ç„¶ä¼°è®¡[3] é©¬åŒå­¦. å¦‚ä½•ç†è§£è´å¶æ–¯æ¨æ–­å’Œbetaåˆ†å¸ƒï¼Ÿ[4] éåœ°èƒ¡è¯´. è¯¦è§£æœºå™¨å­¦ä¹ ä¸­çš„ç†µã€æ¡ä»¶ç†µã€ç›¸å¯¹ç†µå’Œäº¤å‰ç†µ"
  },
  
  {
    "title": "æ·±åº¦å­¦ä¹ åŸºç¡€ï¼ˆEncoder-Decoderï¼‰",
    "url": "/posts/deep-learning-encoder-decoder/",
    "categories": "Academic, Knowledge",
    "tags": "deep learning",
    "date": "2020-10-28 10:51:19 +0800",
    





    
    "snippet": "æœ¬æ–‡ä¸»è¦ä»‹ç»è‡ªç„¶è¯­è¨€å¤„ç†ï¼ˆNatural Language Processï¼ŒNLPï¼‰çš„åŸºç¡€ï¼Œç„¶åä»‹ç» Encoder-Decoderï¼ˆç¼–ç -è§£ç ï¼‰æ¡†æ¶å’Œ Attention æœºåˆ¶ã€‚  1. NLP ä»‹ç»          1.1. æ–‡æœ¬è¡¨ç¤º      1.2. è®­ç»ƒæ€æƒ³        2. Encoder-Decoder          2.1. RNN E-D              ...",
    "content": "æœ¬æ–‡ä¸»è¦ä»‹ç»è‡ªç„¶è¯­è¨€å¤„ç†ï¼ˆNatural Language Processï¼ŒNLPï¼‰çš„åŸºç¡€ï¼Œç„¶åä»‹ç» Encoder-Decoderï¼ˆç¼–ç -è§£ç ï¼‰æ¡†æ¶å’Œ Attention æœºåˆ¶ã€‚  1. NLP ä»‹ç»          1.1. æ–‡æœ¬è¡¨ç¤º      1.2. è®­ç»ƒæ€æƒ³        2. Encoder-Decoder          2.1. RNN E-D                  2.1.1. å®ç°          2.1.2. ç»“æ„          2.1.3. åˆ†æ                    2.2. attention model                  2.2.1. attention score          2.2.2. attention weights          2.2.3. attention vector          2.2.4. æ€»ç»“                      3. å‚è€ƒæ–‡çŒ®1. NLP ä»‹ç»1.1. æ–‡æœ¬è¡¨ç¤ºè¦å¤„ç† NLPï¼ˆNatural Language Processingï¼Œè‡ªç„¶è¯­è¨€å¤„ç†ï¼‰é—®é¢˜ï¼Œé¦–å…ˆè¦è§£å†³æ–‡æœ¬çš„è¡¨ç¤ºé—®é¢˜ã€‚è™½ç„¶æˆ‘ä»¬äººå»çœ‹æ–‡æœ¬ï¼Œèƒ½å¤Ÿæ¸…æ¥šæ˜ç™½æ–‡æœ¬ä¸­çš„ç¬¦å·è¡¨è¾¾ä»€ä¹ˆå«ä¹‰ï¼Œä½†æ˜¯è®¡ç®—æœºåªèƒ½åšæ•°å­¦è®¡ç®—ï¼Œéœ€è¦å°†æ–‡æœ¬è¡¨ç¤ºæˆè®¡ç®—æœºå¯ä»¥å¤„ç†çš„å½¢å¼ã€‚æœ€å¼€å§‹çš„æ–¹æ³•æ˜¯é‡‡ç”¨ one hotã€‚one-hot ç¼–ç æ˜¯ä¸€ç§æœ€æ™®é€šå¸¸è§çš„è¡¨ç¤ºç¦»æ•£æ•°æ®çš„è¡¨ç¤ºï¼Œé¦–å…ˆæˆ‘ä»¬è®¡ç®—å‡ºéœ€è¦è¡¨ç¤ºçš„ç¦»æ•£æˆ–ç±»åˆ«å˜é‡çš„æ€»ä¸ªæ•° $N$ï¼Œç„¶åå¯¹äºæ¯ä¸ªå˜é‡ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç”¨ $N-1$ ä¸ª 0 å’Œå•ä¸ª 1 ç»„æˆçš„å‘é‡æ¥è¡¨ç¤ºæ¯ä¸ªç±»åˆ«ã€‚æ¯”å¦‚ï¼Œæˆ‘ä»¬å‡è®¾è‹±æ–‡ä¸­å¸¸ç”¨çš„å•è¯æœ‰ $N=30000$ ä¸ªï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±ç”¨ä¸€ä¸ª 30000 ç»´çš„å‘é‡è¡¨ç¤ºè¿™ä¸ªè¯ï¼Œæ‰€æœ‰ä½ç½®éƒ½ç½®0ã€‚å½“æˆ‘ä»¬æƒ³è¡¨ç¤º apple è¿™ä¸ªè¯æ—¶ï¼Œå°±åœ¨å¯¹åº”ä½ç½®è®¾ç½®1ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºDict =    append apple hello look world ... [30000 words]V_apple = [0,    1,    0,    0,   0, ...] 1*30000 dimè¿™æ ·åšæœ‰ä¸¤ä¸ªå¾ˆæ˜æ˜¾çš„ç¼ºç‚¹ï¼š  é«˜ç»´ç¨€ç–ï¼šå¯¹äºå…·æœ‰éå¸¸å¤šç±»å‹çš„ç±»åˆ«å˜é‡ï¼Œå˜æ¢åçš„å‘é‡ç»´æ•°è¿‡äºå·¨å¤§ï¼Œä¸”è¿‡äºç¨€ç–ã€‚  å‘é‡æ²¡æœ‰ä»»ä½•å«ä¹‰ï¼Œæ˜ å°„ä¹‹é—´å®Œå…¨ç‹¬ç«‹ï¼Œå¹¶ä¸èƒ½è¡¨ç¤ºå‡ºä¸åŒç±»åˆ«ä¹‹é—´çš„å…³ç³»ã€‚ã€‚åæ¥å‡ºç°äº†è¯å‘é‡ï¼ˆword embeddingï¼‰ï¼Œç”¨ä¸€ä¸ªä½ç»´ç¨ å¯†çš„å‘é‡å»è¡¨ç¤ºä¸€ä¸ªè¯ï¼Œå¦‚ä¸‹æ‰€ç¤ºapple = [0.2649816874, 0.14916784874, -1.51968714,...]é€šå¸¸è¿™ä¸ªå‘é‡çš„ç»´åº¦åœ¨å‡ ç™¾åˆ°ä¸Šåƒä¹‹é—´ï¼Œç›¸æ¯” one hot å‡ åƒå‡ ä¸‡çš„ç»´åº¦å°±ä½äº†å¾ˆå¤šã€‚è¯ä¸è¯ä¹‹é—´å¯ä»¥é€šè¿‡ç›¸ä¼¼åº¦æˆ–è€…è·ç¦»æ¥è¡¨ç¤ºå…³ç³»ï¼Œç›¸å…³çš„è¯å‘é‡ç›¸ä¼¼åº¦æ¯”è¾ƒé«˜ï¼Œæˆ–è€…è·ç¦»æ¯”è¾ƒè¿‘ï¼Œä¸ç›¸å…³çš„è¯å‘é‡ç›¸ä¼¼åº¦ä½ï¼Œæˆ–è€…è·ç¦»æ¯”è¾ƒè¿œï¼Œè¿™æ ·è¯å‘é‡æœ¬èº«å°±æœ‰äº†å«ä¹‰ã€‚æ–‡æœ¬çš„è¡¨ç¤ºé—®é¢˜å°±å¾—åˆ°äº†è§£å†³ã€‚  åˆ˜æ–¯å¦. æ€ä¹ˆå½¢è±¡ç†è§£ embedding è¿™ä¸ªæ¦‚å¿µï¼Ÿ  è¿™ä¸ªæ¦‚å¿µåœ¨æ·±åº¦å­¦ä¹ é¢†åŸŸæœ€åŸåˆçš„åˆ‡å…¥ç‚¹æ˜¯æ‰€è°“çš„ Manifold Hypothesisï¼ˆæµå½¢å‡è®¾ï¼‰ã€‚æµå½¢å‡è®¾æ˜¯æŒ‡â€œè‡ªç„¶çš„åŸå§‹æ•°æ®æ˜¯ä½ç»´çš„æµå½¢åµŒå…¥äº(embedded in)åŸå§‹æ•°æ®æ‰€åœ¨çš„é«˜ç»´ç©ºé—´â€ã€‚é‚£ä¹ˆï¼Œæ·±åº¦å­¦ä¹ çš„ä»»åŠ¡å°±æ˜¯æŠŠé«˜ç»´åŸå§‹æ•°æ®ï¼ˆå›¾åƒï¼Œå¥å­ï¼‰æ˜ å°„åˆ°ä½ç»´æµå½¢ï¼Œä½¿å¾—é«˜ç»´çš„åŸå§‹æ•°æ®è¢«æ˜ å°„åˆ°ä½ç»´æµå½¢ä¹‹åå˜å¾—å¯åˆ†ï¼Œè€Œè¿™ä¸ªæ˜ å°„å°±å«åµŒå…¥ï¼ˆEmbeddingï¼‰ã€‚æ¯”å¦‚ Word Embeddingï¼Œå°±æ˜¯æŠŠå•è¯ç»„æˆçš„å¥å­æ˜ å°„åˆ°ä¸€ä¸ªè¡¨å¾å‘é‡ã€‚ä½†åæ¥ä¸çŸ¥å’‹å›äº‹ï¼Œå¼€å§‹æŠŠä½ç»´æµå½¢çš„è¡¨å¾å‘é‡å«åš embeddingï¼Œå…¶å®æ˜¯ä¸€ç§è¯¯ç”¨ 0.0  å¦‚æœæŒ‰ç…§ç°åœ¨æ·±åº¦å­¦ä¹ ç•Œé€šç”¨çš„ç†è§£ï¼ˆå…¶å®æ˜¯åç¦»äº†åŸæ„çš„ï¼‰ï¼Œembedding å°±æ˜¯ä»åŸå§‹æ•°æ®æå–å‡ºæ¥çš„ featureï¼Œä¹Ÿå°±æ˜¯é‚£ä¸ªé€šè¿‡ç¥ç»ç½‘ç»œæ˜ å°„ä¹‹åçš„ä½ç»´å‘é‡ã€‚  ä¸€å¥è¯è§£é‡Šï¼šembedding çš„åŸæ„æ˜¯æ˜ å°„è¿‡ç¨‹ï¼Œç°åœ¨è¯¯ç”¨ä¸ºæ˜ å°„åçš„ä½ç»´ç‰¹å¾å…³äº embedding çš„æ›´å¤šç†è§£å¯ä»¥å‚è€ƒï¼šEthan. Embedding çš„ç†è§£è¯å‘é‡å¯ä»¥é€šè¿‡ä¸€äº›æ— ç›‘ç£çš„æ–¹æ³•å­¦ä¹ å¾—åˆ°ï¼Œæ¯”å¦‚ CBOW æˆ–è€… Skip-Gram ç­‰ï¼Œå¯ä»¥é¢„å…ˆåœ¨è¯­æ–™åº“ä¸Šè®­ç»ƒå‡ºè¯å‘é‡ï¼Œä»¥ä¾›åç»­çš„ä½¿ç”¨ã€‚é¡ºä¾¿æä¸€å¥ï¼Œåœ¨å›¾åƒä¸­å°±ä¸å­˜åœ¨è¡¨ç¤ºæ–¹æ³•çš„å›°æ‰°ï¼Œå› ä¸ºå›¾åƒæœ¬èº«å°±æ˜¯æ•°å€¼çŸ©é˜µï¼Œè®¡ç®—æœºå¯ä»¥ç›´æ¥å¤„ç†ã€‚1.2. è®­ç»ƒæ€æƒ³NLP ä¸­æœ‰å„ç§å„æ ·çš„ä»»åŠ¡ï¼Œæ¯”å¦‚åˆ†ç±»ï¼ˆClassificationï¼‰ï¼Œé—®ç­”ï¼ˆQAï¼‰ï¼Œå®ä½“å‘½åè¯†åˆ«ï¼ˆNERï¼‰ç­‰ã€‚å¯¹äºè¿™äº›ä¸åŒçš„ä»»åŠ¡ï¼Œæœ€æ—©çš„åšæ³•æ˜¯æ ¹æ®æ¯ç±»ä»»åŠ¡å®šåˆ¶ä¸åŒçš„æ¨¡å‹ï¼Œè¾“å…¥é¢„è®­ç»ƒå¥½çš„ embeddingï¼Œç„¶ååˆ©ç”¨ç‰¹å®šä»»åŠ¡çš„æ•°æ®é›†å¯¹æ¨¡å‹è¿›è¡Œè®­ç»ƒï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚è¿™é‡Œå­˜åœ¨çš„é—®é¢˜å°±æ˜¯ï¼Œä¸æ˜¯æ¯ä¸ªç‰¹å®šä»»åŠ¡éƒ½æœ‰å¤§é‡çš„æ ‡ç­¾æ•°æ®å¯ä¾›è®­ç»ƒï¼Œå¯¹äºé‚£äº›æ•°æ®é›†éå¸¸å°çš„ä»»åŠ¡ï¼Œææ€•å°±éš¾ä»¥å¾—åˆ°ä¸€ä¸ªç†æƒ³çš„æ¨¡å‹ã€‚æˆ‘ä»¬çœ‹ä¸€ä¸‹å›¾åƒé¢†åŸŸæ˜¯å¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜çš„ã€‚å›¾åƒåˆ†ç±»æ˜¯è®¡ç®—æœºè§†è§‰ä¸­æœ€åŸºæœ¬çš„ä»»åŠ¡ï¼Œå½“æˆ‘è¦è§£å†³ä¸€ä¸ªå°æ•°æ®é›†çš„å›¾åƒåˆ†ç±»ä»»åŠ¡æ—¶ï¼Œè¯¥æ€ä¹ˆåšï¼ŸCVé¢†åŸŸå·²ç»æœ‰äº†ä¸€å¥—æˆç†Ÿçš„è§£å†³æ–¹æ¡ˆã€‚æˆ‘ä¼šç”¨ä¸€ä¸ªé€šç”¨çš„ç½‘ç»œæ¨¡å‹ï¼Œæ¯”å¦‚Vggï¼ŒResNetæˆ–è€…GoogleNetï¼Œåœ¨ImageNetä¸Šåšé¢„è®­ç»ƒï¼ˆpre-trainingï¼‰ã€‚ImageNetæœ‰1400ä¸‡å¼ æœ‰æ ‡æ³¨çš„å›¾ç‰‡ï¼ŒåŒ…å«1000ä¸ªç±»åˆ«ï¼Œè¿™æ ·çš„æ•°æ®è§„æ¨¡è¶³ä»¥è®­ç»ƒå‡ºä¸€ä¸ªè§„æ¨¡åºå¤§çš„æ¨¡å‹ã€‚åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­ï¼Œæ¨¡å‹ä¼šä¸æ–­çš„å­¦ä¹ å¦‚ä½•æå–ç‰¹å¾ï¼Œåº•å±‚çš„CNNç½‘ç»œç»“æ„ä¼šæå–è¾¹ç¼˜ï¼Œè§’ï¼Œç‚¹ç­‰é€šç”¨ç‰¹å¾ï¼Œæ¨¡å‹è¶Šå¾€ä¸Šèµ°ï¼Œæå–çš„ç‰¹å¾ä¹Ÿè¶ŠæŠ½è±¡ï¼Œä¸ç‰¹å®šçš„ä»»åŠ¡æ›´åŠ ç›¸å…³ã€‚å½“å®Œæˆé¢„è®­ç»ƒä¹‹åï¼Œæ ¹æ®æˆ‘è‡ªå·±çš„åˆ†ç±»ä»»åŠ¡ï¼Œè°ƒæ•´æœ€ä¸Šå±‚çš„ç½‘ç»œç»“æ„ï¼Œç„¶ååœ¨å°æ•°æ®é›†é‡Œå¯¹æ¨¡å‹è¿›è¡Œè®­ç»ƒã€‚åœ¨è®­ç»ƒæ—¶ï¼Œå¯ä»¥å›ºå®šä½åº•å±‚çš„æ¨¡å‹å‚æ•°åªè®­ç»ƒé¡¶å±‚çš„å‚æ•°ï¼Œä¹Ÿå¯ä»¥å¯¹æ•´ä¸ªæ¨¡å‹è¿›è¡Œè®­ç»ƒï¼Œè¿™ä¸ªè¿‡ç¨‹å«åšå¾®è°ƒï¼ˆfine-tuningï¼‰ï¼Œæœ€ç»ˆå¾—åˆ°ä¸€ä¸ªå¯ç”¨çš„æ¨¡å‹ã€‚æ€»ç»“ä¸€ä¸‹ï¼Œæ•´ä¸ªè¿‡ç¨‹åŒ…æ‹¬ä¸¤æ­¥:  æ‹¿ä¸€ä¸ªé€šç”¨æ¨¡å‹åœ¨ImageNetä¸Šåšé¢„è®­ç»ƒï¼ˆpre-trainingï¼‰  é’ˆå¯¹ç‰¹å®šä»»åŠ¡è¿›è¡Œå¾®è°ƒï¼ˆfine-tuningï¼‰å¦‚æ­¤å°±å¯ä»¥å®Œç¾è§£å†³äº†ç‰¹å®šä»»åŠ¡æ•°æ®ä¸è¶³çš„é—®é¢˜ã€‚è¿˜æœ‰ä¸€ä¸ªå¥½å¤„æ˜¯ï¼Œå¯¹äºå„ç§å„æ ·çš„ä»»åŠ¡éƒ½ä¸å†éœ€è¦ä»å¤´å¼€å§‹è®­ç»ƒç½‘ç»œï¼Œå¯ä»¥ç›´æ¥æ‹¿é¢„è®­ç»ƒå¥½çš„ç»“æœè¿›è¡Œå¾®è°ƒï¼Œæ—¢å‡å°‘äº†è®­ç»ƒè®¡ç®—é‡çš„è´Ÿæ‹…ï¼Œä¹Ÿå‡å°‘äº†äººå·¥æ ‡æ³¨æ•°æ®çš„è´Ÿæ‹…ã€‚NLPé¢†åŸŸä¹Ÿå¼•å…¥äº†è¿™ç§åšæ³•ï¼Œç”¨ä¸€ä¸ªé€šç”¨æ¨¡å‹ï¼Œåœ¨éå¸¸å¤§çš„è¯­æ–™åº“ä¸Šè¿›è¡Œé¢„è®­ç»ƒï¼Œç„¶ååœ¨ç‰¹å®šä»»åŠ¡ä¸Šè¿›è¡Œå¾®è°ƒï¼ŒBERT å°±æ˜¯è¿™å¥—æ–¹æ¡ˆçš„é›†å¤§æˆè€…ã€‚BERTä¸æ˜¯ç¬¬ä¸€ä¸ªï¼Œä½†ç›®å‰ä¸ºæ­¢ï¼Œæ˜¯æ•ˆæœæœ€å¥½çš„æ–¹æ¡ˆã€‚BERTç”¨äº†ä¸€ä¸ªå·²æœ‰çš„æ¨¡å‹ç»“æ„ï¼Œæå‡ºäº†ä¸€æ•´å¥—çš„é¢„è®­ç»ƒæ–¹æ³•å’Œå¾®è°ƒæ–¹æ³•ï¼Œæˆ‘ä»¬åœ¨åæ–‡ä¸­å†è¿›è¡Œè¯¦ç»†çš„æè¿°ã€‚2. Encoder-Decoderåœ¨ä¹‹å‰è´´å­å…³äº RNN / LSTM çš„è®¨è®ºä¸­ï¼Œæˆ‘ä»¬å‡è€ƒè™‘çš„æ˜¯è¾“å…¥è¾“å‡ºåºåˆ—ç­‰é•¿çš„é—®é¢˜ï¼Œç„¶è€Œåœ¨å®é™…ä¸­å´å¤§é‡å­˜åœ¨è¾“å…¥è¾“å‡ºåºåˆ—é•¿åº¦ä¸ç­‰çš„æƒ…å†µï¼Œå¦‚æœºå™¨ç¿»è¯‘ã€è¯­éŸ³è¯†åˆ«ã€é—®ç­”ç³»ç»Ÿç­‰ã€‚è¿™æ—¶æˆ‘ä»¬ä¾¿éœ€è¦è®¾è®¡ä¸€ç§æ˜ å°„å¯å˜é•¿åºåˆ—è‡³å¦ä¸€ä¸ªå¯å˜é•¿åºåˆ—çš„RNNç½‘ç»œç»“æ„ï¼ŒEncoder-Decoderæ¡†æ¶å‘¼ä¹‹æ¬²å‡ºã€‚vieo. encoder-decoderæ¨¡å‹Encoder-Decoderï¼ˆç¼–ç -è§£ç ï¼‰æ˜¯æ·±åº¦å­¦ä¹ ä¸­éå¸¸å¸¸è§çš„ä¸€ä¸ªæ¨¡å‹æ¡†æ¶ï¼Œæ¯”å¦‚æ— ç›‘ç£ç®—æ³•çš„ auto-encoding å°±æ˜¯ç”¨ç¼–ç -è§£ç çš„ç»“æ„è®¾è®¡å¹¶è®­ç»ƒçš„ï¼›æ¯”å¦‚è¿™ä¸¤å¹´æ¯”è¾ƒçƒ­çš„ image caption çš„åº”ç”¨ï¼Œå°±æ˜¯ CNN-RNN çš„ç¼–ç -è§£ç æ¡†æ¶ï¼›å†æ¯”å¦‚ç¥ç»ç½‘ç»œæœºå™¨ç¿»è¯‘ NMT æ¨¡å‹ï¼Œå¾€å¾€å°±æ˜¯LSTM-LSTM çš„ç¼–ç -è§£ç æ¡†æ¶ã€‚å› æ­¤ï¼Œå‡†ç¡®çš„è¯´ï¼ŒEncoder-Decoder å¹¶ä¸æ˜¯ä¸€ä¸ªå…·ä½“çš„æ¨¡å‹ï¼Œè€Œæ˜¯ä¸€ç±»æ¡†æ¶ã€‚Encoder å’Œ Decoder éƒ¨åˆ†å¯ä»¥æ˜¯ä»»æ„çš„æ–‡å­—ï¼Œè¯­éŸ³ï¼Œå›¾åƒï¼Œè§†é¢‘æ•°æ®ï¼Œæ¨¡å‹å¯ä»¥é‡‡ç”¨ CNNï¼ŒRNNï¼ŒBiRNNã€LSTMã€GRU ç­‰ç­‰ã€‚æ‰€ä»¥åŸºäº Encoder-Decoderï¼Œæˆ‘ä»¬å¯ä»¥è®¾è®¡å‡ºå„ç§å„æ ·çš„åº”ç”¨ç®—æ³•ã€‚Encoder-Decoderæ¡†æ¶æœ‰ä¸€ä¸ªæœ€æ˜¾è‘—çš„ç‰¹å¾å°±æ˜¯å®ƒæ˜¯ä¸€ä¸ª End-to-End å­¦ä¹ çš„ç®—æ³•ã€‚  End-to-End ï¼ˆç«¯åˆ°ç«¯ï¼‰å­¦ä¹ ï¼šæ‰“ä¸€ä¸ªæ¯”æ–¹ï¼Œä¸€ä¸ªç¨‹åºä¸ºäº†ä»è¾“å…¥å¾—åˆ°è¾“å‡ºï¼Œéœ€è¦åŒ…æ‹¬å¾ˆå¤šåŠŸèƒ½å‡½æ•°ï¼Œä¸€ä¸ªåšæ³•æ˜¯ä¸€ä¸ªä¸ªå®ç°è¿™ä¸ªå‡½æ•°ï¼Œç„¶åç»„æˆä¸€ä¸ªç¨‹åºï¼ˆéç«¯åˆ°ç«¯ï¼‰ï¼Œå¦ä¸€ä¸ªåšæ³•æ˜¯åªå†™ä¸€ä¸ªå‡½æ•°ä»è¾“å…¥ä¸€æ­¥åˆ°ä½ç»™å‡ºè¾“å‡ºï¼ˆç«¯åˆ°ç«¯ï¼‰ã€‚åœ¨ä¼ ç»Ÿç¼–ç¨‹é¢†åŸŸï¼Œåè€…ä¸€èˆ¬æ˜¯è‚¯å®šä¼šå—åˆ°é„™è§†ã€‚ä½†æ˜¯åœ¨æ·±åº¦å­¦ä¹ é¢†åŸŸï¼Œæ›´å®½æ³›çš„è¯´å¯å¾®åˆ†ç¼–ç¨‹é¢†åŸŸï¼Œåè€…æœ‰æå¤§çš„æ„ä¹‰ï¼Œå®ƒæŠŠæ‰€æœ‰æ¨¡å—æ”¾åœ¨ä¸€èµ·ï¼Œå¯ä»¥å½“æˆä¸€ä¸ªæ•´ä½“æ¥è®­ç»ƒï¼Œåœ¨å‰å‘æ¨ç†çš„æ—¶å€™ï¼Œå¯ä»¥ä¸€æ¬¡æ€§å¾—åˆ°ä½ æƒ³è¦çš„ç»“æœã€‚è¿™æ ·åšæœ‰ä»€ä¹ˆæ„ä¹‰ï¼Ÿè¯¯å·®ç†è®ºå‘Šè¯‰æˆ‘ä»¬è¯¯å·®ä¼ æ’­çš„é€”å¾„æœ¬èº«ä¼šå¯¼è‡´è¯¯å·®çš„ç´¯ç§¯ï¼Œå¤šä¸ªé˜¶æ®µä¸€å®šä¼šå¯¼è‡´è¯¯å·®ç´¯ç§¯ï¼Œe2eè®­ç»ƒèƒ½å‡å°‘è¯¯å·®ä¼ æ’­çš„é€”å¾„ï¼Œè”åˆä¼˜åŒ–ã€‚ç›¸å¯¹äºæ·±åº¦å­¦ä¹ ï¼Œä¼ ç»Ÿæœºå™¨å­¦ä¹ çš„æµç¨‹å¾€å¾€ç”±å¤šä¸ªç‹¬ç«‹çš„æ¨¡å—ç»„æˆï¼Œæ¯”å¦‚åœ¨ä¸€ä¸ªå…¸å‹çš„è‡ªç„¶è¯­è¨€å¤„ç†ï¼ˆNatural Language Processingï¼‰é—®é¢˜ä¸­ï¼ŒåŒ…æ‹¬åˆ†è¯ã€è¯æ€§æ ‡æ³¨ã€å¥æ³•åˆ†æã€è¯­ä¹‰åˆ†æç­‰å¤šä¸ªç‹¬ç«‹æ­¥éª¤ï¼Œæ¯ä¸ªæ­¥éª¤æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„ä»»åŠ¡ï¼Œå…¶ç»“æœçš„å¥½åä¼šå½±å“åˆ°ä¸‹ä¸€æ­¥éª¤ï¼Œä»è€Œå½±å“æ•´ä¸ªè®­ç»ƒçš„ç»“æœï¼Œè¿™æ˜¯éç«¯åˆ°ç«¯çš„ã€‚è€Œæ·±åº¦å­¦ä¹ æ¨¡å‹åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­ï¼Œä»è¾“å…¥ç«¯ï¼ˆè¾“å…¥æ•°æ®ï¼‰åˆ°è¾“å‡ºç«¯ä¼šå¾—åˆ°ä¸€ä¸ªé¢„æµ‹ç»“æœï¼Œä¸çœŸå®ç»“æœç›¸æ¯”è¾ƒä¼šå¾—åˆ°ä¸€ä¸ªè¯¯å·®ï¼Œè¿™ä¸ªè¯¯å·®ä¼šåœ¨æ¨¡å‹ä¸­çš„æ¯ä¸€å±‚ä¼ é€’ï¼ˆåå‘ä¼ æ’­ï¼‰ï¼Œæ¯ä¸€å±‚çš„è¡¨ç¤ºéƒ½ä¼šæ ¹æ®è¿™ä¸ªè¯¯å·®æ¥åšè°ƒæ•´ï¼Œç›´åˆ°æ¨¡å‹æ”¶æ•›æˆ–è¾¾åˆ°é¢„æœŸçš„æ•ˆæœæ‰ç»“æŸï¼Œè¿™æ˜¯ç«¯åˆ°ç«¯çš„ã€‚ä»¥æ–‡æœ¬-æ–‡æœ¬çš„ä¾‹å­ä½œä¸ºä»‹ç»ï¼Œè¿™æ ·çš„æ¨¡å‹å¾€å¾€ç”¨åœ¨æœºå™¨ç¿»è¯‘ä¸­ï¼Œæ¯”å¦‚å°†æ³•è¯­ç¿»è¯‘æˆè‹±è¯­ã€‚è¿™æ ·çš„æ¨¡å‹ä¹Ÿè¢«å«åš Sequence to Sequence learningï¼ˆSequence2Sequenceï¼‰ã€‚æ‰€è°“ç¼–ç ï¼Œå°±æ˜¯å°†è¾“å…¥åºåˆ—è½¬åŒ–æˆä¸€ä¸ªå›ºå®šé•¿åº¦çš„å‘é‡ï¼›è§£ç ï¼Œå°±æ˜¯å°†ä¹‹å‰ç”Ÿæˆçš„å›ºå®šå‘é‡å†è½¬åŒ–æˆè¾“å‡ºåºåˆ—ã€‚è¿™é‡Œå¤ä¹ ä¸‹ Sequence2Sequence ä»»åŠ¡åˆ°åº•æ˜¯ä»€ä¹ˆï¼Œæ‰€è°“çš„ Sequence2Sequence ä»»åŠ¡ä¸»è¦æ˜¯æ³›æŒ‡ä¸€äº› Sequence åˆ° Sequence çš„æ˜ å°„é—®é¢˜ï¼ŒSequence åœ¨è¿™é‡Œå¯ä»¥ç†è§£ä¸ºä¸€ä¸ªå­—ç¬¦ä¸²åºåˆ—ï¼Œå½“æˆ‘ä»¬åœ¨ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸²åºåˆ—åï¼Œå¸Œæœ›å¾—åˆ°ä¸ä¹‹å¯¹åº”çš„å¦ä¸€ä¸ªå­—ç¬¦ä¸²åºåˆ—ï¼ˆå¦‚ç¿»è¯‘åçš„å­—ç¬¦ä¸²ã€æˆ–è€…å¦‚è¯­ä¹‰ä¸Šå¯¹åº”çš„å­—ç¬¦ä¸²ï¼‰æ—¶ï¼Œè¿™ä¸ªä»»åŠ¡å°±å¯ä»¥ç§°ä¸º Sequence2Sequence äº†ã€‚åœ¨ç°åœ¨çš„æ·±åº¦å­¦ä¹ é¢†åŸŸå½“ä¸­ï¼Œé€šå¸¸çš„åšæ³•æ˜¯å°†è¾“å…¥çš„æº Sequence ç¼–ç åˆ°ä¸€ä¸ªä¸­é—´çš„ context å½“ä¸­ï¼Œè¿™ä¸ª context æ˜¯ä¸€ä¸ªç‰¹å®šé•¿åº¦çš„ç¼–ç ï¼ˆå¯ä»¥ç†è§£ä¸ºä¸€ä¸ªå‘é‡ï¼Œæˆ–è€…å°±æ˜¯å‰é¢å·²ç»è¢«è¯¯ç”¨çš„ embeddingï¼‰ï¼Œç„¶åå†é€šè¿‡è¿™ä¸ª context è¿˜åŸæˆä¸€ä¸ªè¾“å‡ºçš„ç›®æ ‡ Sequenceã€‚Encoder-Decoder æ¡†æ¶å¯ä»¥è¿™ä¹ˆç›´è§‚åœ°å»ç†è§£ï¼šå¯ä»¥æŠŠå®ƒçœ‹ä½œé€‚åˆå¤„ç†ç”±ä¸€ä¸ªå¥å­ï¼ˆæˆ–ç¯‡ç« ï¼‰ç”Ÿæˆå¦å¤–ä¸€ä¸ªå¥å­ï¼ˆæˆ–ç¯‡ç« ï¼‰çš„é€šç”¨å¤„ç†æ¨¡å‹ã€‚å¯¹äºå¥å­å¯¹ ${X,Y}$ï¼Œæˆ‘ä»¬çš„ç›®æ ‡æ˜¯ç»™å®šè¾“å…¥å¥å­ $X$ï¼ŒæœŸå¾…é€šè¿‡ Encoder-Decoder æ¡†æ¶æ¥ç”Ÿæˆç›®æ ‡å¥å­ $Y$ã€‚$X$ å’Œ $Y$ å¯ä»¥æ˜¯åŒä¸€ç§è¯­è¨€ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸¤ç§ä¸åŒçš„è¯­è¨€ã€‚è€Œ $X$ å’Œ $Y$ åˆ†åˆ«ç”±å„è‡ªçš„å•è¯åºåˆ—æ„æˆï¼š\\[\\begin{aligned}X = \\{x_1,x_2,...,x_m\\}\\\\Y = \\{y_1,y_2,...,y_n\\}\\end{aligned}\\]Encoder å¯¹è¾“å…¥å¥å­ $X$ è¿›è¡Œç¼–ç ï¼Œå°†è¾“å…¥å¥å­é€šè¿‡éçº¿æ€§å˜æ¢è½¬åŒ–ä¸ºä¸­é—´è¯­ä¹‰è¡¨ç¤º $c$\\[c = \\mathcal F(x_1,x_2,...x_m)\\]Decoder æ ¹æ®å¥å­ $X$ çš„ä¸­é—´è¯­ä¹‰è¡¨ç¤º $c$ å’Œä¹‹å‰å·²ç»ç”Ÿæˆçš„å†å²ä¿¡æ¯ $y_1,y_2,â€¦,y_{i-1}$ æ¥ç”Ÿæˆiæ—¶åˆ»è¦ç”Ÿæˆçš„å•è¯ $y_i$\\[y_i = \\mathcal G(c,y_1,y_2,...,y_{i-1})\\]æ¯ä¸ª $y_i$ éƒ½ä¾æ¬¡è¿™ä¹ˆäº§ç”Ÿï¼Œé‚£ä¹ˆçœ‹èµ·æ¥å°±æ˜¯æ•´ä¸ªç³»ç»Ÿæ ¹æ®è¾“å…¥å¥å­ $X$ ç”Ÿæˆäº†ç›®æ ‡å¥å­ $Y$ã€‚æ•´ä¸ªç¼–ç -è§£ç é˜¶æ®µçš„ç›®æ ‡æ˜¯å°†è¾“å…¥ $c$ è½¬æ¢æˆç›®æ ‡åºåˆ— $Y$ï¼Œå³æœ€å¤§åŒ–å¦‚ä¸‹çš„æ¡ä»¶æ¦‚ç‡\\[{\\rm max}_\\theta \\frac{1}{N} \\sum_{n=1}^N logP_\\theta(\\boldsymbol y_n\\vert \\boldsymbol x_n)\\]å…¶ä¸­ï¼Œ$\\theta$ æ˜¯æ¨¡å‹çš„å‚æ•°é›†åˆï¼Œæ¯ä¸€ä¸ª $(\\boldsymbol x_n,\\boldsymbol y_n)$ å¯¹éƒ½æ˜¯ä¸€ä¸ªè®­ç»ƒé›†ã€‚2.1. RNN E-D2.1.1. å®ç°  å‚è€ƒï¼šå­¦æœ¯çŠ¶æ€æŠ½å¥–å™¨. æ·±åº¦å­¦ä¹ ï¼ˆBOTæ–¹å‘ï¼‰ å­¦ä¹ ç¬”è®°ï¼ˆ2ï¼‰ RNN Encoder-Decoder åŠ LSTM å­¦ä¹ å¼ ä¿Šæ—åšå®¢. ä½¿ç”¨Encoder-Decoderæ¨¡å‹è‡ªåŠ¨ç”Ÿæˆå¯¹è”çš„æ€è·¯æœ€ç»å…¸çš„ Encoder-Decoder å®ç°æ–¹å¼ï¼Œå³ç”¨ RNN æ¥å®ç°ã€‚åœ¨RNN Encoder-Decoder çš„å·¥ä½œå½“ä¸­ï¼Œæˆ‘ä»¬ç”¨ä¸€ä¸ª RNN å»æ¨¡æ‹Ÿå¤§è„‘çš„è¯»å…¥åŠ¨ä½œï¼Œç”¨ä¸€ä¸ªç‰¹å®šé•¿åº¦çš„ç‰¹å¾å‘é‡å»æ¨¡æ‹Ÿæˆ‘ä»¬çš„è®°å¿†ï¼Œç„¶åå†ç”¨å¦å¤–ä¸€ä¸ª RNN å»æ¨¡æ‹Ÿå¤§è„‘æ€è€ƒå¾—åˆ°ç­”æ¡ˆçš„åŠ¨ä½œï¼Œå°†ä¸‰è€…ç»„ç»‡èµ·æ¥åˆ©ç”¨å°±æˆäº†ä¸€ä¸ªå¯ä»¥å®ç° Sequence2Sequence å·¥ä½œçš„â€œæ¨¡æ‹Ÿå¤§è„‘â€äº†ã€‚å…³äº RNN çš„ä»‹ç»è¿™é‡Œä¸åšå±•å¼€ï¼Œè¯¦è§ å¦ä¸€ä¸ªå¸–å­ã€‚ä¸‹é¢ä»¥å¯¹è”ä¸ºä¾‹é‡‡ç”¨ RNN æ¥é˜è¿°ç”Ÿæˆè¿‡ç¨‹ï¼Œé‚£ä¹ˆæ¶æ„å›¾å¦‚ä¸‹å›¾æ‰€ç¤ºåªéœ€è¦æ‰¾åˆ°å¤§é‡çš„å¯¹è”æ•°æ®å¯¹è¿™ä¸ªæ¨¡å‹è¿›è¡Œè®­ç»ƒï¼Œé‚£ä¹ˆå³å¯åˆ©ç”¨è¿™ä¸ªæ¨¡å‹ï¼Œè¾“å…¥ä¸Šè”ï¼Œæœºå™¨è‡ªåŠ¨äº§ç”Ÿä¸‹è”äº†ã€‚å…·ä½“å®ç°æ–¹å¼å¦‚ä¸‹  ç¬¬ä¸€æ­¥ï¼šæ ¹æ®è¯­å¥é¡ºåºï¼Œä¾æ¬¡å°†è¾“å…¥ $X$ çš„æ¯ä¸€ä¸ªè¯ $x_t$ éƒ½ç»è¿‡ä¸€ä¸ª embedding å±‚è¿›è¡Œç¼–ç ï¼ˆæ¯”å¦‚é€šè¿‡ word2vecï¼‰ï¼Œå¾—åˆ° word embeddingï¼Œç„¶åå°†å…¶è¾“å…¥ RNNï¼Œå¾—åˆ°ç¬¬ $t$ æ—¶åˆ»çš„éšå±‚çŠ¶æ€ $h_t$ã€‚åœ¨ RNN ä¸­ï¼Œå½“å‰æ—¶é—´çš„éšè—çŠ¶æ€æ˜¯ç”±ä¸Šä¸€æ—¶é—´çš„çŠ¶æ€å’Œå½“å‰æ—¶é—´è¾“å…¥å†³å®šçš„ï¼Œä¹Ÿå°±æ˜¯\\[h_t = f(h_{t-1},x_t)\\]  ç¬¬äºŒæ­¥ï¼šè¾“å…¥å®Œ $X$ è·å¾—äº†å„ä¸ªæ—¶é—´æ®µçš„éšè—å±‚ä»¥åï¼Œå†å°†éšè—å±‚çš„ä¿¡æ¯æ±‡æ€»ï¼Œç”Ÿæˆæœ€åçš„è¯­ä¹‰å‘é‡ $c$\\[c = q(h_1, h_2, ..., h_m)\\]ä¸€ç§ç®€å•çš„æ–¹æ³•æ˜¯ï¼Œç›´æ¥å°†æœ€åçš„éšè—å±‚ä½œä¸ºè¯­ä¹‰å‘é‡ $c$ï¼Œå³\\[c = h_m\\]  ç¬¬ä¸‰æ­¥ï¼Œå°† $c$ ä½œä¸º Decoder çš„åˆå§‹éšå±‚ï¼Œè¾“å…¥ [EOS]ï¼ˆåº”è¯¥ä¸º [SOS] æˆ–è€… [BOS]ï¼Œå›¾ä¸­æœ‰è¯¯ï¼‰ ç”Ÿæˆç¬¬ä¸€ä¸ªè¾“å‡ºè¯å‘é‡ï¼ŒRNN çš„éšå±‚ä¹Ÿè¢«æ›´æ–°ä¸º $H1$ã€‚[SOS] Start Of Sentence / [BOS] Begin of Sentenceï¼Œæ˜¯ä¸€ä¸ªèµ·å§‹ç¬¦å·ï¼Œä½œä¸ºç”Ÿæˆå¥å­çš„èµ·ç‚¹ï¼Œè¿™ä¸ªèµ·å§‹ç¬¦å·ç»è¿‡ embedding å±‚ï¼Œè¾“å…¥ RNN å¾—åˆ°ç¼–ç è¡¨ç¤ºï¼Œç„¶åå°†è¡¨ç¤ºå‘é‡é€šè¿‡ softmaxï¼Œå¾—åˆ°ç”Ÿæˆçš„è¯å‡ºç°çš„æ¦‚ç‡ï¼Œé€‰å‡ºæ¯”å¦‚æ¦‚ç‡æœ€é«˜çš„é‚£ä¸ªè¯ä½œä¸ºè¾“å‡ºç»“æœã€‚  ç¬¬å››æ­¥ï¼Œå¦‚æ­¤åå¤ï¼Œå°†ä¸Šä¸€æ¬¡è¾“å‡ºçš„è¯ä½œä¸ºä¸‹ä¸€æ¬¡çš„è¾“å…¥ï¼Œç»è¿‡ embeddingï¼Œsoftmaxï¼Œå¾—åˆ°æœ¬æ¬¡é¢„æµ‹è¾“å‡ºçš„è¯å‘é‡æ¦‚ç‡ï¼Œå¹¶ä¸”ç”¨äºä¸‹ä¸€æ¬¡è¾“å…¥ï¼ŒåŒæ—¶æ›´æ–° RNN éšå±‚ã€‚ä½¿ç”¨æˆ‘ä»¬æœŸæœ›ç”Ÿæˆçš„å¥å­ï¼ˆè®­ç»ƒ pair ä¸­çš„ $Y$ï¼‰ä¸­çš„è¯æŒ‰ç…§åŒæ ·çš„æ–¹å¼å¤„ç†ï¼Œæ¯æ¬¡å¤„ç†éƒ½ä¼šäº§ç”Ÿä¸€ä¸ªè¯çš„æ¦‚ç‡å‘é‡ã€‚æˆ‘ä»¬å¸Œæœ›çš„æ˜¯ï¼Œäº§ç”Ÿçš„è¯çš„æ¦‚ç‡å‘é‡æ¥è¿‘ä¸‹ä¸€æ­¥å®é™…è¾“å…¥çš„è¯çš„ one-hot è¡¨ç¤ºï¼Œæ‰€ä»¥æˆ‘ä»¬ä¼šè®¡ç®—ç”Ÿæˆçš„è¯çš„æ¦‚ç‡å‘é‡æ„æˆçš„å¼ é‡ä¸æˆ‘ä»¬æœŸæœ›çš„è¯æ„æˆçš„ one-hot ç¼–ç å¼ é‡çš„æŸå¤±ï¼ˆäº¤å‰ç†µä¹‹ç±»çš„ï¼‰ã€‚ç„¶ååˆ©ç”¨ä¼˜åŒ–ç®—æ³•å‡å°æŸå¤±ã€‚è§£ç é˜¶æ®µå¯ä»¥çœ‹åšç¼–ç çš„é€†è¿‡ç¨‹ã€‚$t$ æ—¶åˆ»ï¼Œé¦–å…ˆæ›´æ–° Decoder çš„éšå±‚çŠ¶æ€\\[H_t = f(H_{t-1},y_{t-1})\\]è¿™ä¸ªé˜¶æ®µï¼Œæˆ‘ä»¬è¦æ ¹æ®ç»™å®šçš„è¯­ä¹‰å‘é‡ $c$ å’Œä¹‹å‰å·²ç»ç”Ÿæˆçš„è¾“å‡ºåºåˆ— $y_1,y_2,â€¦,y_{tâˆ’1}$ æ¥é¢„æµ‹ä¸‹ä¸€ä¸ªè¾“å‡ºçš„å•è¯ $y_t$ï¼Œè€Œè§£ç è¾“å‡ºæŸä¸ªè¯ $y_t$ çš„æ¦‚ç‡\\[P(y_t)=p(y_t \\vert \\{y_1, y_2, ..., y_{t-1}\\},c) = g(y_{t-1},H_{t})\\]ä» æ•´ä¸ªå†å²è§’åº¦ æ¥çœ‹ï¼Œ$t$ æ—¶åˆ»è¾“å‡ºçš„å•è¯ $y_t$ æ˜¯ $1$ åˆ° $t-1$ æ—¶åˆ»çš„è¾“å‡º $y_1,â€¦,y_{t-1}$ å’Œè¯­ä¹‰å‘é‡ $c$ ä¸€èµ·ä½œä¸ºæ¡ä»¶çš„åŸºç¡€ä¸Šå¾—åˆ°çš„ã€‚ä» å‰ä¸€æ—¶åˆ»è§’åº¦ æ¥çœ‹ï¼Œ$y_t$ æ˜¯å‰ä¸€æ—¶åˆ» $t-1$ çš„è¾“å‡º $y_{t-1}$ å’Œéšå±‚å‘é‡ $H_t$ ä¸€èµ·ä½œä¸ºæ¡ä»¶çš„åŸºç¡€ä¸Šå¾—åˆ°çš„ï¼ˆæ­¤æ—¶ $y_1,â€¦,y_{t-2}$ è¢«ç¼–ç è¿›äº† $H_{t-1}$ï¼Œ $H_{t-1}$ å’Œ $y_{t-1}$ ä¸€èµ·å¾—åˆ° $H_t$ï¼‰ã€‚  ç¬¬äº”æ­¥ï¼Œç†è®ºä¸Š Decoder å¯ä»¥æ— é™çš„è¿›è¡Œä¸‹å»ï¼Œä½†æ˜¯ä¸€èˆ¬åªéœ€è¦æŸä¸€æ®µè¾“å‡ºï¼Œå› æ­¤åœ¨è¾“å‡ºä¸€ä¸ªç»“æŸæ ‡å·åï¼Œè¿›è¡Œæˆªæ–­ã€‚å¯¹äºæ•´ä¸ªè¾“å‡ºåºåˆ— $y$ï¼Œæˆ‘ä»¬éœ€è¦ä½¿å¾—å®é™…è¾“å‡ºä¸æœŸæœ›è¾“å‡ºå°½å¯èƒ½çš„å»åˆï¼Œé—®é¢˜å°±è½¬åŒ–ä¸º\\[{\\rm max}_\\theta P(y) = {\\rm max}_\\theta  \\prod_{t=1}^n P(y_t) = {\\rm max}_\\theta \\sum_{t=1}^n{\\rm ln}P(y_t)\\]è¿™ä¸ªå¼å­æ˜¯ä¸€ä¸ªæ¡ä»¶æ¦‚ç‡çš„è¿ä¹˜ï¼Œç›¸å½“äºæœ€å¤§ä¼¼ç„¶ä¼°è®¡ã€‚å³æ‰¾åˆ°ä¸€ç»„å‚æ•° $\\theta$ï¼Œä½¿å¾—ä» $t=1$ æ—¶åˆ»åˆ° $t=T$ æ—¶åˆ»è¾“å‡ºçš„å•è¯çš„æ¦‚ç‡æ˜¯æ ·æœ¬æœŸæœ›è¾“å‡ºæ¦‚ç‡çš„æœ€å¤§ä¼¼ç„¶ï¼Ÿ2.1.2. ç»“æ„ä¸‹é¢åˆ†æé‡‡ç”¨å¤šå±‚ LSTM æ„å»ºçš„ Encoder-Decoder çš„ç½‘ç»œç»“æ„ã€‚é¦–å…ˆç»™å‡º Encoder çš„ç½‘ç»œç»“æ„  inputï¼šå•è¯çš„ one-hot å‘é‡ï¼Œè¿™ä¸ªå‘é‡çš„ç»´åº¦ä¸å­—å…¸å®¹é‡æœ‰å…³ï¼Œæ¯”å¦‚å­—å…¸é‡Œæœ‰ 1000 ä¸ªå¸¸ç”¨å•è¯ï¼Œé‚£ä¹ˆå‘é‡ç»´åº¦å°±æ˜¯ 1000ï¼›  embeddingï¼šå¯¹ input è¿›è¡Œ word2vec æ“ä½œï¼Œå°†å…¶è½¬åŒ–ä¸ºç¨ å¯†çš„ä½ç»´å‘é‡ï¼Œå¾—åˆ° embedded_inputï¼›  MultiLayer_LSTMï¼šå¤šå±‚ LSTM ï¼›  hidden_stateï¼šéšå±‚çŠ¶æ€ï¼Œç»´åº¦æ˜¯è‡ªå®šä¹‰çš„ï¼Œæ‰¿è½½ç€è¾“å…¥è¯çš„ä¿¡æ¯ã€‚å½“å‰æ—¶åˆ»çš„ hidden_state å°†è¢«å­˜å‚¨ä½œä¸ºå†å²ä¿¡æ¯ï¼›  outputï¼šè¾“å‡ºï¼Œå…¶å®æˆ‘ä»¬ä¸å…³å¿ƒï¼›  prev_hidden_stateï¼šåœ¨ä¸‹ä¸€æ—¶åˆ»æ ¹æ®è¾“å…¥å‘é‡ embedded_input æ›´æ–°ä¸º hidden_stateï¼Œå³å­˜å‚¨äº†ä¸‹ä¸€æ—¶åˆ»è¾“å…¥è¯çš„ä¿¡æ¯ã€‚å½“è¾“å…¥åºåˆ—åˆ°åº•æ—¶ï¼Œä¸€èˆ¬å–æœ€åä¸€æ¬¡æ›´æ–°çš„ hidden_state ä½œä¸ºè¯­ä¹‰å‘é‡ $c$ï¼Œä¼ ç»™ Decoderã€‚ä¸‹é¢ç»™å‡º Decoder çš„ç½‘ç»œç»“æ„Decoder ä¸ Encoder å”¯ä¸€å…³è”çš„å°±æ˜¯éšå±‚å˜é‡ hidden_stateã€‚Encoder å¾—åˆ°çš„è¯­ä¹‰å‘é‡ $c$ ä½œä¸º Decoder çš„ hidden_state çš„åˆå€¼ã€‚  inputï¼šå•è¯çš„ one-hot å‘é‡ã€‚åœ¨åˆå§‹æ—¶åˆ»ä¸ºè‡ªå®šä¹‰çš„å¼€å§‹æ ‡å¿— [SOS] æˆ–è€… [GO] ç­‰ã€‚  embeddingï¼šå¯¹ input è¿›è¡Œ word2vec æ“ä½œï¼Œå°†å…¶è½¬åŒ–ä¸ºç¨ å¯†çš„ä½ç»´å‘é‡ï¼Œå¾—åˆ° embedded_inputï¼›  MultiLayer_LSTMï¼šå¤šå±‚ LSTM ï¼›  hidden_stateï¼šå®é™…ä¸Šhidden_state åº”è¯¥ä½äº LSTM ä¸ Dense_Layer ä¹‹é—´ï¼›  Dense_Layerï¼šå…¨è¿æ¥å±‚ï¼Œå°†å¾—åˆ°çš„ hidden_state æ˜ å°„æˆä¸€ä¸ªç»´åº¦ä¸å­—å…¸ç›¸å…³çš„å‘é‡ï¼ˆæ¯”å¦‚ 1000 ç»´ï¼‰ã€‚å› æ­¤è¿™ä¸ªè¿‡ç¨‹ä¹Ÿå«ç»´åº¦æ˜ å°„ã€‚ç”Ÿæˆçš„ hidden_state å·²ç»åŒ…å«äº†å¾…ç”Ÿæˆçš„è¯çš„ä¿¡æ¯äº†ï¼Œä½†æ˜¯è¦ç”Ÿæˆå…·ä½“çš„è¯ï¼Œæˆ‘ä»¬è¿˜éœ€è¦çŸ¥é“ç›®æ ‡è¯­è¨€ä¸­æ¯ä¸ªè¯çš„æ¡ä»¶æ¦‚ç‡ $p(y_i|s_i)$ï¼Œå¦‚æœ $s_i$ çš„ç»´åº¦å°±æ˜¯ç›®æ ‡è¯­è¨€çš„è¯å…¸å¤§å°ï¼Œé‚£ä¹ˆä½¿ç”¨ softmax å°±å¯ä»¥ç®—å‡ºæ¯ä¸ªè¯çš„æ¦‚ç‡ï¼Œä½†æ˜¯ $s_i$ çš„ç»´åº¦ä¹Ÿå±äºæ¨¡å‹çš„ä¸€ä¸ªå‚æ•°ï¼Œé€šå¸¸æ˜¯ä¸ä¼šç­‰äºç›®æ ‡è¯­è¨€è¯å…¸çš„å¤§å°çš„ã€‚å› æ­¤å†å¢åŠ ä¸€ä¸ªå…¨è¿æ¥å±‚ï¼Œå°† $s_i$ æ˜ å°„ä¸ºç»´åº¦ç­‰äºè¯å…¸å¤§å° $N$ çš„å‘é‡ $v_i$ï¼ˆoutput_logitsï¼‰ï¼Œæ¯ä¸ªç»´åº¦ä»£è¡¨ä¸€ä¸ªè¯ï¼Œä½¿ç”¨ softmax è®¡ç®—å‡ºæ¯ä¸ªè¯çš„æ¦‚ç‡ã€‚  output_logitsï¼šç»è¿‡ç»´åº¦æ˜ å°„å¾—åˆ°çš„è¾“å‡ºå‘é‡ $v_i$ï¼›  softmaxï¼šå¯¹è¾“å‡ºå‘é‡è¿›è¡Œæ¦‚ç‡å±‚é¢çš„å½’ä¸€åŒ–ï¼Œå¾—åˆ° outputã€‚åœ¨å­¦ä¹ è®­ç»ƒæ—¶ï¼Œä¸æœŸæœ›çš„ one-hot å½¢å¼çš„ output ä¹‹é—´å¯ä»¥è®¡ç®—äº¤å‰ç†µã€‚åœ¨æ¨ç†æµ‹è¯•æ—¶ï¼Œæ ¹æ® softmax çš„ç»“æœé€‰æ‹©æ¦‚ç‡æœ€é«˜çš„è¯ä½œä¸ºé¢„æµ‹è¾“å‡ºå’Œä¸‹ä¸€æ—¶åˆ»çš„è¾“å…¥ã€‚æœ‰æ—¶ä¸ºäº†ç®€ä¾¿èµ·è§ä¹Ÿç›´æ¥ç”¨ argmax å¾—åˆ°å–å€¼æœ€å¤§çš„é‚£ä¸ªç»´åº¦å¯¹åº”çš„è¯ä½œä¸ºè¾“å‡ºï¼Œä¸”ä½œä¸ºä¸‹ä¸€æ—¶åˆ»çš„è¾“å…¥ï¼Œå¦‚ä¸‹å›¾ã€‚2.1.3. åˆ†æä¸¾ä¸ªæ —å­ï¼šæˆ‘ä»¬å¸Œæœ›Decoderèƒ½å¤Ÿç”Ÿæˆè¿™æ ·ä¸€å¥è¯ â€œå¼ ä¸‰æœ‰å¾ˆå¤šå„¿å­â€ã€‚å½“ decoder æ¥æ”¶ EOS ä½œä¸ºèµ·å§‹è¯åï¼Œç»è¿‡ embeddingï¼ŒRNNï¼Œsoftmax åç”Ÿæˆäº†ä¸€ä¸ªæ¦‚ç‡å‘é‡ï¼Œè¿™ä¸ªæ¦‚ç‡å‘é‡è¡¨è¾¾äº†è¯è¡¨ä¸­æ¯ä¸ªè¯ä½œä¸ºç”Ÿæˆè¯çš„æ¦‚ç‡ã€‚å› ä¸ºdecoderæ²¡æœ‰ç»è¿‡è®­ç»ƒï¼Œæ‰€ä»¥æ¦‚ç‡æœ€å¤§è¯å¾ˆå¯èƒ½ä¸æ˜¯â€œå¼ â€ï¼Œè€Œæ˜¯å…¶ä»–è¯ï¼Œæˆ‘ä»¬å¸Œæœ›çš„çŠ¶å†µå°±æ˜¯è¿™ä¸ªæ¦‚ç‡å‘é‡å°±æ˜¯â€œå¼ â€çš„ one-hot è¡¨ç¤ºï¼Œé‚£ä¹ˆå®é™…ç”Ÿæˆçš„æ¦‚ç‡å‘é‡å’Œå®é™…çš„æ¦‚ç‡å‘é‡ä¹‹é—´å°±å­˜åœ¨æŸå¤±ï¼ˆè¯¯å·®ï¼‰ã€‚åŒæ ·çš„ï¼Œæˆ‘ä»¬ä¸‹ä¸€æ­¥ä¼šæŠŠ â€œå¼ â€ è¾“å…¥åˆ° decoder ä¸­ï¼Œå¸Œæœ›ç»è¿‡ä¸€ç³»åˆ—å¤„ç†å decoder èƒ½å¤Ÿç”Ÿæˆâ€œä¸‰â€çš„ one-hotï¼Œè€Œå®é™…ç”Ÿæˆçš„æ¦‚ç‡å‘é‡ä¹Ÿæ˜¯å­˜åœ¨åå·®ï¼Œå°±è¿™æ ·æˆ‘ä»¬æŠŠæ•´ä¸ªå¥å­è¾“å…¥åˆ° decoder ä¸­ï¼Œå°±å¯ä»¥å¾—åˆ°æ•´ä¸ªå¥å­çš„åå·®ï¼Œæˆ‘ä»¬ä¸‹é¢å°±é€šè¿‡ä¼˜åŒ–æ¥å‡å°è¿™ä¸ªåå·®ã€‚Encoder-Decoder æ¨¡å‹è™½ç„¶éå¸¸ç»å…¸ï¼Œä½†æ˜¯å±€é™æ€§ä¹Ÿéå¸¸å¤§ã€‚æœ€å¤§çš„å±€é™æ€§å°±åœ¨äºç¼–ç å’Œè§£ç ä¹‹é—´çš„å”¯ä¸€è”ç³»å°±æ˜¯ä¸€ä¸ªå›ºå®šé•¿åº¦çš„è¯­ä¹‰å‘é‡ $c$ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œç¼–ç å™¨è¦å°†æ•´ä¸ªåºåˆ—çš„ä¿¡æ¯å‹ç¼©è¿›ä¸€ä¸ªå›ºå®šé•¿åº¦çš„å‘é‡ä¸­å»ã€‚ä½†æ˜¯è¿™æ ·åšæœ‰ä¸¤ä¸ªå¼Šç«¯ï¼Œä¸€æ˜¯è¯­ä¹‰å‘é‡åªæ˜¯å¯¹æ•´ä¸ªåºåˆ—çš„æ¦‚æ‹¬ï¼Œæ— æ³•å®Œå…¨è¡¨ç¤ºæ•´ä¸ªåºåˆ—çš„ä¿¡æ¯ï¼›äºŒæ˜¯å…ˆè¾“å…¥çš„å†…å®¹æºå¸¦çš„ä¿¡æ¯ä¼šè¢«åè¾“å…¥çš„ä¿¡æ¯ç¨€é‡Šæ‰ï¼Œæˆ–è€…è¯´ï¼Œè¢«è¦†ç›–äº†ã€‚è¾“å…¥åºåˆ—è¶Šé•¿ï¼Œè¿™ä¸ªç°è±¡å°±è¶Šä¸¥é‡ã€‚è¿™å°±ä½¿å¾—åœ¨è§£ç çš„æ—¶å€™ä¸€å¼€å§‹å°±æ²¡æœ‰è·å¾—è¾“å…¥åºåˆ—è¶³å¤Ÿçš„ä¿¡æ¯ï¼Œ é‚£ä¹ˆè§£ç çš„å‡†ç¡®åº¦è‡ªç„¶ä¹Ÿå°±è¦æ‰“ä¸ªæŠ˜æ‰£äº†ã€‚2.2. attention modelAttention Model å³æ³¨æ„åŠ›æœºåˆ¶ï¼Œä¹Ÿç§°ä¸ºå¯¹é½æ¨¡å‹(alignment model)ï¼Œæ˜¯ä¸ºäº†è§£å†³å›ºå®šé•¿åº¦çš„è¯­ä¹‰å‘é‡å­˜åœ¨çš„å¼Šç«¯çš„ã€‚Attention-based æ¡†æ¶ä¸ä¼ ç»Ÿçš„ Encoder-Decoder æ¡†æ¶çš„å·®å¼‚åœ¨äºï¼Œè¯­ä¹‰å‘é‡ $c$ å¹¶éå›ºå®šä¸å˜çš„ï¼Œè€Œæ˜¯éšç€ Decoder ç«¯ä¸åŒæ—¶åˆ»çš„è¾“å‡ºè€Œæ”¹å˜ã€‚åœ¨ç¿»è¯‘ä»»åŠ¡ä¸­ï¼Œå‡†å¤‡ç”Ÿæˆæ¯ä¸ªæ–°çš„è¯çš„ç¿»è¯‘æ—¶ï¼Œè¿™ä¸ªæœºåˆ¶å¯ä»¥å°†æ³¨æ„åŠ›é›†ä¸­åœ¨è¾“å…¥çš„æŸä¸ªæˆ–æŸå‡ ä¸ªè¯ä¸Šï¼Œé‡ç‚¹å…³æ³¨è¿™å‡ ä¸ªè¯ï¼Œå¯ä»¥æƒ³è±¡æˆæ˜¯å°†ä»–ä»¬ä¸å¾…ç”Ÿæˆçš„ç¿»è¯‘è¿›è¡Œå¯¹é½ï¼Œä½¿å¾—ç¿»è¯‘æ›´ç²¾å‡†ã€‚åœ¨å¯¹è”ä»»åŠ¡ä¸­ï¼ŒEncoder-Decoder æ¡†æ¶åŠ ä¸Š Attention åº”è¯¥ä¼šæ˜¾è‘—æå‡äº§ç”Ÿä¸‹è”çš„è´¨é‡ï¼ŒåŸå› è¿˜æ˜¯å› ä¸ºå®ƒæ˜¯è¦æ±‚ä¸¥æ ¼å¯¹ä»—çš„ï¼Œæ‰€ä»¥åœ¨ç”Ÿæˆä¸‹è”æŸä¸ªå­—çš„æ—¶å€™ï¼Œæ‰¾åˆ°å¯¹åº”ä¸Šè”ç›¸åº”å­—ä½œä¸ºç”Ÿæˆçš„é‡ç‚¹å‚è€ƒä¿¡æ¯æ— ç–‘æ˜¯éå¸¸é‡è¦çš„ã€‚æ¯”å¦‚çœ‹åˆ°ä¸Šè”çš„â€œä¸‰â€å­—ï¼ŒAttentionæ¨¡å‹ä½¿å¾—ä¸‹è”äº§ç”Ÿå¯¹åº”å­— â€œä¸€â€ çš„æ—¶å€™é‡ç‚¹å‚è€ƒä¸Šè”çš„ â€œä¸‰â€ è¿™ä¸ªå­—ï¼Œåº”è¯¥çŸ¥é“å¯¹åº”çš„åº”è¯¥æ˜¯ä¸€ä¸ªæ•°å­—å‹æ±‰å­—ã€‚ä¸‹å›¾æ˜¯åŠ ä¸Š Attention æ¨¡å‹çš„ç¤ºæ„å›¾ã€‚å¢åŠ  attention æœºåˆ¶åï¼ŒDecoder è¿‡ç¨‹å¯ä»¥æ‹†åˆ†æˆå¦‚ä¸‹å‡ ä¸ªéƒ¨åˆ†2.2.1. attention score  Sophia$. Seq2Seq Attentionè¾“å…¥è¾“å‡ºç»´åº¦åˆ†æ-æœ€è¯¦ç»†  DownUp. æ·±åº¦å­¦ä¹ æ–¹æ³•ï¼ˆä¹ï¼‰ï¼šè‡ªç„¶è¯­è¨€å¤„ç†ä¸­çš„Attention Modelæ³¨æ„åŠ›æ¨¡å‹  Bahdanau et al.. NEURAL MACHINE TRANSLATION BY JOINTLY LEARNING TO ALIGN AND TRANSLATEattention score è¡¨å¾åŸå§‹è¾“å…¥åºåˆ— $x_t$ å¯¹å³å°†ç”Ÿæˆçš„ç›®æ ‡è¯ $y_i$ çš„å½±å“èƒ½åŠ›ã€‚æ ¹æ®æ­¤æ—¶æ¯ä¸ªè¾“å…¥è¯çš„ score å¤§å°ï¼Œå°±å¯ä»¥çŸ¥é“åº”è¯¥ä½¿ç”¨å“ªä¸ªè¯ä¸å½“å‰çš„ $y_i$ è¿›è¡Œå¯¹é½ã€‚å‚è€ƒå‰é¢çš„å¯¹è”ç¼–ç -è§£ç ç¤ºæ„å›¾ï¼Œæˆ‘ä»¬çŸ¥é“ $H_2$ æ˜¯ç¬¬ä¸‰ä¸ªè§£ç æ—¶åˆ»çš„éšå«çŠ¶æ€ï¼ˆç¬¬ä¸€ä¸ªè§£ç æ—¶åˆ» $H_0 = c$ï¼‰ã€‚ä»ä¸Šå¸è§†è§’æ¥çœ‹ï¼Œä¸ $H_2$ æœ€ç›¸å…³çš„éƒ¨åˆ†åº”è¯¥æ˜¯ â€œä¸‰â€ å¯¹åº”çš„ç¼–ç çŠ¶æ€ $h_3$ã€‚å› æ­¤ï¼Œåªè¦ç½‘ç»œåœ¨ç¬¬ä¸‰ä¸ªè§£ç æ—¶åˆ»æ—¶ï¼Œå°†æ³¨æ„åŠ›é›†ä¸­äº $h_3$ å°±ç®—è¾¾æˆç›®çš„äº†ã€‚æ›´åŠ ä¸€èˆ¬çš„æ³¨æ„åŠ›æ¨¡å‹ç¤ºæ„å›¾å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚å·²çŸ¥è¾“å…¥åºåˆ— $X_1, X_2,â€¦,X_T$ï¼Œåœ¨ç¬¬ $t$ æ—¶åˆ»è¾“å‡º $y_t$ æ—¶ï¼Œæˆ‘ä»¬å¸Œæœ›ç›¸åº”çš„è¯­ä¹‰å˜é‡ $c$ ä¸å†æ˜¯å›ºå®šçš„ï¼Œè€Œæ˜¯ä¸å½“å‰æ—¶åˆ»è¾“å‡ºæŒ‚é’©ï¼Œå³ $C_t$ã€‚å½“å‰æ—¶åˆ»çš„ $C_t$ ä¸€èˆ¬æ˜¯è¾“å…¥åºåˆ—éšå±‚çŠ¶æ€çš„åŠ æƒå’Œï¼Œå…¶ä¸­æƒé‡ä¸º attention weightsï¼Œè®°ä½œ $\\alpha_{tj}$ã€‚æ³¨æ„åŠ›æƒé‡ä¸è¾“å…¥è¾“å‡ºçš„åŒ¹é…ç¨‹åº¦æœ‰å…³ï¼Œè¿™ä¸ªåŒ¹é…åº¦å°±æ˜¯æ³¨æ„åŠ›å¾—åˆ†ï¼ˆattention scoreï¼‰ã€‚åŒ¹é…åº¦çš„æ•°å­¦è¡¨ç¤ºå¦‚ä¸‹\\[e_{ij} = score(s_{i-1},h_j)\\]å¼ä¸­ $e_{ij}$ è¡¡é‡äº†ç¬¬ $j$ ä¸ªè¾“å…¥ä¸ç¬¬ $i$ ä¸ªè¾“å‡ºçš„åŒ¹é…åº¦ã€‚$s_{i-1} = H_{i-1}$ æ˜¯è¾“å‡º $y_i$ å‰çš„éšå±‚ï¼Œ$h_j$ æ˜¯ç¬¬ $j$ ä¸ªæ—¶åˆ»è¾“å…¥çš„éšå±‚ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼ŒåŒ¹é…åº¦åŸºäºè¾“å…¥è¾“å‡ºçš„éšå±‚æ¥è®¡ç®—ã€‚åŒ¹é…åº¦çš„è®¡ç®—æœ‰ä¸¤ç§æ–¹å¼\\[\\begin{aligned}e_{ij} = score(s_{i-1},h_j) = \\left\\{ \\begin{matrix}s_{i-1}^T W h_j \\quad &amp;[Luong's\\ multiplicative\\ style]\\\\v^T tanh(U s_{t-1}+V h_j)\\quad &amp;[Bahdanau's\\ additive\\ style]\\end{matrix} \\right.\\end{aligned}\\]åœ¨è®ºæ–‡ [Bahdanau et al., 2015] ä¸­ï¼Œ åŒ¹é…åº¦è¢«ç§°ä¸ºæ ¡å‡†æ¨¡å‹ï¼ˆalignment modelï¼‰ã€‚å…¶ä¸­ $W, v, U, V$ æ˜¯æƒé‡çŸ©é˜µï¼Œå¯ä»¥ä¸æ•´ä¸ªæ¨¡å‹å…±åŒè®­ç»ƒã€‚ä¸åŒè®ºæ–‡ä¸­çš„ $e_{ij}$ è®¡ç®—æ–¹æ³•ä¸åŒã€‚2.2.2. attention weightså¯¹åŒ¹é…åº¦å¾—åˆ†è¿›è¡Œå½’ä¸€åŒ–ï¼ˆé‡‡ç”¨ softmaxï¼‰å¯ä»¥å¾—åˆ°ä¸€ä¸ª $[0,1]$ ä¹‹é—´çš„å€¼ï¼Œå³ä¸ºæ³¨æ„åŠ›æƒé‡ï¼ˆattention weights ï¼‰\\[\\alpha_{ij} = \\frac{esp(e_{ij})}{\\sum_{j=1}^T esp(e_{ij})}\\]2.2.3. attention vectoré‚£ä¹ˆå¯¹äºæ¯ä¸€æ—¶åˆ»çš„è¾“å‡º $y_i$ï¼Œå¯¹åº”çš„è¯­ä¹‰å‘é‡ $C_i$ å¯ä»¥è¡¨ç¤ºä¸º\\[C_i = \\sum_{j=1}^T \\alpha_{ij}h_j\\]æ³¨æ„ï¼Œè™½ç„¶ $s_i$ ä»…ä»…åªä¸ $h_j$ æœ€ä¸ºç›¸å…³ï¼Œä½†åŒæ ·ä¹Ÿå—å…¶å®ƒç¼–ç çŠ¶æ€çš„å½±å“ï¼ˆä¾‹å¦‚åˆ°å¥å‹å¤æ‚çš„æ—¶å€™ï¼‰ã€‚ä½†æ˜¯ï¼Œè‹¥æ˜¯æ¢äº†åº”ç”¨åœºæ™¯ï¼Œåªè¿›è¡Œå¯¹åº”æƒé‡ä¹˜ä»¥å¯¹åº”éšå«çŠ¶æ€ï¼Œä¸è¿›è¡Œç´¯åŠ ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚åœ¨åŸå§‹çš„ Decoder ä¸­ï¼Œè¯­ä¹‰å‘é‡ $c$ ä»…ä½œä¸ºåˆå§‹æ—¶åˆ»çš„è§£ç éšå±‚ã€‚è€Œåœ¨æ³¨æ„åŠ›æœºåˆ¶ä¸‹ï¼Œæˆ‘ä»¬å°†è¯­ä¹‰å‘é‡ $C_i$ ä¸ Decoder ç«¯çš„éšå±‚ $s_{i-1}$ è¿›è¡Œå‘é‡æ‹¼æ¥ $[C_i, s_{i-1}]$ï¼Œå¾—åˆ°æ³¨æ„åŠ›å‘é‡ï¼ˆattention vectorï¼‰ï¼Œæ¥ç”Ÿæˆè¾“å‡ºè¯çš„æ¦‚ç‡åˆ†å¸ƒã€‚2.2.4. æ€»ç»“runze Zheng. åœ¨Encoder-Decoderæ¡†æ¶ä¸­åŠ å…¥Attentionæœºåˆ¶åœ¨ Encoder-Decoder æ¡†æ¶ä¸­åŠ å…¥ Attention æœºåˆ¶åçš„æ¨¡å‹å¯æ€»ç»“ä¸ºå¦‚ä¸‹å…¬å¼\\[\\begin{aligned}e_{ij} &amp;= score(s_{i-1},h_j)\\\\\\alpha_{ij} &amp;= \\frac{esp(e_{ij})}{\\sum_{j=1}^T esp(e_{ij})}\\\\C_i &amp;= \\sum_{j=1}^T \\alpha_{ij}h_j\\\\s_i &amp;= f(s_{i-1},y_{i-1},C_i)\\\\P(y_i\\vert y_1,y_2,...,y_{i-1},c) &amp;= softmax(y_{i-1},s_{i})\\end{aligned}\\]3. å‚è€ƒæ–‡çŒ®[1] åˆ˜æ–¯å¦. æ€ä¹ˆå½¢è±¡ç†è§£ embedding è¿™ä¸ªæ¦‚å¿µï¼Ÿ[2] Ethan. Embedding çš„ç†è§£[3] vieo. encoder-decoderæ¨¡å‹[4] å­¦æœ¯çŠ¶æ€æŠ½å¥–å™¨. æ·±åº¦å­¦ä¹ ï¼ˆBOTæ–¹å‘ï¼‰ å­¦ä¹ ç¬”è®°ï¼ˆ2ï¼‰ RNN Encoder-Decoder åŠ LSTM å­¦ä¹ [5] DownUp. æ·±åº¦å­¦ä¹ æ–¹æ³•ï¼ˆä¹ï¼‰ï¼šè‡ªç„¶è¯­è¨€å¤„ç†ä¸­çš„Attention Modelæ³¨æ„åŠ›æ¨¡å‹[6] _zhang_bei_. è‡ªç„¶è¯­è¨€å¤„ç†ä¸­çš„Transformerå’ŒBERT[7] runze Zheng. åœ¨Encoder-Decoderæ¡†æ¶ä¸­åŠ å…¥Attentionæœºåˆ¶"
  },
  
  {
    "title": "PyTorchåŸºç¡€ï¼ˆå¼ é‡ï¼‰",
    "url": "/posts/pytorch-basic-1/",
    "categories": "Tutorial, Coding",
    "tags": "python, deep learning",
    "date": "2020-10-26 15:22:19 +0800",
    





    
    "snippet": "æœ¬æ–‡ä¸»è¦è®°å½•è‡ªå·±å­¦ä¹  PyTorch è¿‡ç¨‹ä¸­æ¶‰åŠçš„ä¸€äº›åŸºç¡€çŸ¥è¯†ã€‚  1. å¼ é‡ç»´åº¦          1.1. shape å±æ€§      1.2. size() æˆå‘˜å‡½æ•°        2. å¼ é‡æ¯”è¾ƒ          2.1. max        3. å‚è€ƒæ–‡çŒ®1. å¼ é‡ç»´åº¦1.1. shape å±æ€§è¾“å…¥import torch# dim=2,shape=[2,3],éšæœºç”ŸæˆTenso...",
    "content": "æœ¬æ–‡ä¸»è¦è®°å½•è‡ªå·±å­¦ä¹  PyTorch è¿‡ç¨‹ä¸­æ¶‰åŠçš„ä¸€äº›åŸºç¡€çŸ¥è¯†ã€‚  1. å¼ é‡ç»´åº¦          1.1. shape å±æ€§      1.2. size() æˆå‘˜å‡½æ•°        2. å¼ é‡æ¯”è¾ƒ          2.1. max        3. å‚è€ƒæ–‡çŒ®1. å¼ é‡ç»´åº¦1.1. shape å±æ€§è¾“å…¥import torch# dim=2,shape=[2,3],éšæœºç”ŸæˆTensora = torch.FloatTensor(2, 3)print(a.shape)print(a.shape[0])print(a.shape[1])è¾“å‡ºä¸ºtorch.Size([2, 3])231.2. size() æˆå‘˜å‡½æ•°è¾“å…¥import torch# dim=2,shape=[2,3],éšæœºç”ŸæˆTensora = torch.FloatTensor(2, 3)print(a.size())print(a.size(0))print(a.size(1))è¾“å‡ºä¸ºtorch.Size([2, 3])232. å¼ é‡æ¯”è¾ƒ2.1. maxä¸æŒ‡å®šç»´åº¦æ—¶ï¼Œè¿”å›ä¸€ä¸ªå¼ é‡ï¼Œä¸ºè¾“å…¥æ•°æ®ä¸­çš„æœ€å¤§å€¼&gt;&gt;&gt; a = torch.randn(1, 3)&gt;&gt;&gt; a    tensor([[ 0.6763,  0.7445, -2.2369]])&gt;&gt;&gt; torch.max(a)    tensor(0.7445)æŒ‡å®šç»´åº¦æ—¶ï¼Œè¿”å›ä¸€ä¸ª tupleï¼ŒåŒ…å«æ²¿ç€è¯¥ç»´åº¦çš„æœ€å¤§å€¼å’Œå¯¹åº”çš„åºå·ã€‚&gt;&gt;&gt; a = torch.randn(4, 4)&gt;&gt;&gt; atensor([[-1.2360, -0.2942, -0.1222,  0.8475],        [ 1.1949, -1.1127, -2.2379, -0.6702],        [ 1.5717, -0.9207,  0.1297, -1.8768],        [-0.6172,  1.0036, -0.6060, -0.2432]])&gt;&gt;&gt; torch.max(a, dim=1)torch.return_types.max(values=tensor([0.8475, 1.1949, 1.5717, 1.0036]), indices=tensor([3, 0, 0, 1]))å¯¹äºäºŒç»´å¼ é‡ï¼Œdim=0 æ²¿åˆ—æ±‚æœ€å¤§ï¼ˆè·¨è¡Œé—´æ¯”è¾ƒï¼‰ï¼Œdim=1 æ²¿è¡Œæ±‚æœ€å¤§ï¼ˆè·¨åˆ—é—´æ¯”è¾ƒï¼‰ã€‚å¯¹äºä¸‰ç»´å¼ é‡ï¼Œæ„æˆä¸º (é€šé“ï¼Œè¡Œï¼Œåˆ—)ï¼Œé‚£ä¹ˆdim=0 é€šé“é—´æ¯”è¾ƒæ±‚æœ€å¤§ï¼Œdim=1 è·¨è¡Œé—´æ¯”è¾ƒæ±‚æœ€å¤§ï¼Œdim=2 è·¨åˆ—é—´æ¯”è¾ƒæ±‚æœ€å¤§ã€‚import torch a = torch.randn(2,3,4) #éšæœºç”Ÿæˆæ•°ç»„max_0=torch.max(a,dim=0) #é’ˆå¯¹ç¬¬1ä¸ªå…ƒç´ â€œ2â€ï¼Œå¯¹åº”çš„æ˜¯é€šé“max_1=torch.max(a,dim=1) #é’ˆå¯¹ç¬¬2ä¸ªå…ƒç´ â€œ3â€ï¼Œå¯¹åº”çš„æ˜¯è¡Œmax_2=torch.max(a,dim=2) #é’ˆå¯¹ç¬¬2ä¸ªå…ƒç´ â€œ4â€ï¼Œå¯¹åº”çš„æ˜¯åˆ—print(\"a:\\n\", a)print(\"************************************************\")print(\"max(a)_0:\", max_0)  #dim=0,é€šé“é—´è¿›è¡Œæ¯”è¾ƒï¼Œæ‰€ä»¥è¿”å›æ¯ä¸€å¼ ç‰¹å¾å›¾ï¼ŒåŒä¸€åƒç´ ä½ç½®ä¸Šçš„æœ€å¤§å€¼print(\"max(a)_1:\", max_1)  #dim=1ï¼Œè¡Œä¸è¡Œä¹‹é—´è¿›è¡Œæ¯”è¾ƒï¼Œæ‰€ä»¥è¿”å›æ¯ä¸€å¼ ç‰¹å¾å›¾ï¼Œæ¯ä¸€åˆ—çš„æœ€å¤§å€¼print(\"max(a)_2:\", max_2)  #dim=2ï¼Œåˆ—ä¸åˆ—ä¹‹é—´è¿›è¡Œæ¯”è¾ƒï¼Œæ‰€ä»¥è¿”å›æ¯ä¸€å¼ ç‰¹å¾å›¾ï¼Œæ¯ä¸€è¡Œçš„æœ€å¤§å€¼ &lt;&lt;a: tensor([[[ 0.5323,  1.5229, -0.6122,  0.6054],         [ 1.2424, -1.6005,  0.0779,  0.9227],         [-0.6340, -0.5770, -0.1672,  0.3598]],         [[-0.3770, -0.4992,  1.8444, -1.1040],         [ 1.2238,  0.7283, -1.6462,  0.0325],         [-0.3555, -0.2599,  1.5741,  1.0683]]])************************************************max(a)_0: (tensor([[ 0.5323,  1.5229,  1.8444,  0.6054],        [ 1.2424,  0.7283,  0.0779,  0.9227],        [-0.3555, -0.2599,  1.5741,  1.0683]]), tensor([[ 0,  0,  1,  0],        [ 0,  1,  0,  0],        [ 1,  1,  1,  1]]))max(a)_1: (tensor([[ 1.2424,  1.5229,  0.0779,  0.9227],        [ 1.2238,  0.7283,  1.8444,  1.0683]]), tensor([[ 1,  0,  1,  1],        [ 1,  1,  0,  2]]))max(a)_2: (tensor([[ 1.2424,  1.5229,  0.0779,  0.9227],        [ 1.2238,  0.7283,  1.8444,  1.0683]]), tensor([[ 1,  0,  1,  1],ä¹Ÿå°±æ˜¯è¯´ï¼Œdim å‚æ•°æ˜¯æŒ‰ç…§å¼ é‡ç»´åº¦ä»å·¦åˆ°å³ã€ä»å¤–åˆ°å†…çš„é¡ºåºè¿›è¡Œæ¯”è¾ƒçš„ã€‚3. å‚è€ƒæ–‡çŒ®[1] æ¢¦å¹¶ä¸é¥è¿œ. 4.3Pythonæ•°æ®å¤„ç†ç¯‡ä¹‹Matplotlibç³»åˆ—(ä¸‰)â€”plt.plot().[2] æˆ‘çš„æ˜å¤©ä¸æ˜¯æ¢¦. pythonä½¿ç”¨matplotlib:subplotç»˜åˆ¶å¤šä¸ªå­å›¾."
  },
  
  {
    "title": "å¤©æ–‡å­¦åŸºç¡€ï¼ˆæ—¶é—´å’Œå†æ³•ï¼‰",
    "url": "/posts/astronomy-basic-time-calender/",
    "categories": "Academic, Knowledge",
    "tags": "astronomy",
    "date": "2020-10-20 21:00:19 +0800",
    





    
    "snippet": "æœ¬æ–‡ä»‹ç»äº†å¤©æ–‡å­¦ä¸­åŸºæœ¬çš„æ—¶é—´å’Œå†æ³•çŸ¥è¯†ã€‚  1. èƒŒæ™¯          1.1. å›½é™…åœ°çƒè‡ªè½¬å’Œå‚è€ƒç³»æœåŠ¡      1.2. å›½é™…å¤©æ–‡å­¦è”åˆä¼š        2. æ—¶é—´          2.1. å¤ªé˜³æ—¶      2.2. æ’æ˜Ÿæ—¶      2.3. æ ¼æ—å°¼æ²»æ ‡å‡†æ—¶é—´ï¼ˆGMTï¼‰      2.4. ä¸–ç•Œæ—¶ï¼ˆUTï¼‰      2.5. åŸå­æ—¶ï¼ˆTAIï¼‰      2.6. åè°ƒä¸–ç•Œæ—¶ï¼ˆU...",
    "content": "æœ¬æ–‡ä»‹ç»äº†å¤©æ–‡å­¦ä¸­åŸºæœ¬çš„æ—¶é—´å’Œå†æ³•çŸ¥è¯†ã€‚  1. èƒŒæ™¯          1.1. å›½é™…åœ°çƒè‡ªè½¬å’Œå‚è€ƒç³»æœåŠ¡      1.2. å›½é™…å¤©æ–‡å­¦è”åˆä¼š        2. æ—¶é—´          2.1. å¤ªé˜³æ—¶      2.2. æ’æ˜Ÿæ—¶      2.3. æ ¼æ—å°¼æ²»æ ‡å‡†æ—¶é—´ï¼ˆGMTï¼‰      2.4. ä¸–ç•Œæ—¶ï¼ˆUTï¼‰      2.5. åŸå­æ—¶ï¼ˆTAIï¼‰      2.6. åè°ƒä¸–ç•Œæ—¶ï¼ˆUTCï¼‰      2.7. GPSæ—¶é—´      2.8. å†ä¹¦æ—¶      2.9. åŠ›å­¦æ—¶      2.10. åœ°çƒæ—¶      2.11. å„æ—¶é—´çš„è½¬æ¢å…³ç³»        3. å†æ³•          3.1. å„’ç•¥å†ï¼ˆJulian calendarï¼‰      3.2. æ ¼é‡Œé«˜åˆ©å†ï¼ˆGregory Calendarï¼‰      3.3. å„’ç•¥è®°æ—¥æ³•ï¼ˆJulian Dayï¼‰      3.4. å„’ç•¥æ—¥æ•°ï¼ˆJDNï¼‰      3.5. å„’ç•¥æ—¥ï¼ˆJDï¼‰      3.6. ç®€åŒ–çš„å„’ç•¥æ—¥      3.7. æ ‡å‡†å†å…ƒï¼ˆJ2000.0ï¼‰      3.8. ç”±æ ¼é‡Œå†è®¡ç®—å„’ç•¥æ—¥JD      3.9. ç”±æ ¼é‡Œå†ç®—ç®€åŒ–çš„å„’ç•¥æ—¥      3.10. è®¡ç®—æ ‡å‡†å†å…ƒèµ·çš„å„’ç•¥æ—¥      3.11. è®¡ç®—æ ‡å‡†å†å…ƒèµ·çš„å„’ç•¥ä¸–çºª        4. å‚è€ƒæ–‡çŒ®1. èƒŒæ™¯1.1. å›½é™…åœ°çƒè‡ªè½¬å’Œå‚è€ƒç³»æœåŠ¡å›½é™…åœ°çƒè‡ªè½¬å’Œå‚è€ƒç³»æœåŠ¡ï¼ˆInternational Earth Rotation and Reference System, IERSï¼‰ï¼ˆå®˜ç½‘ï¼šhttps://www.iers.org/IERS/EN/Home/home_node.html ï¼‰çš„ä¸»è¦ç›®æ ‡æ˜¯é€šè¿‡æä¾›å›½é™…é™†ç©ºå‚è€ƒç³»ç»Ÿçš„å…¥å£æ¥ä¸ºå¤©æ–‡å­¦ã€æµ‹åœ°å­¦å’Œåœ°çƒç‰©ç†å­¦çš„ç ”ç©¶å›¢ä½“æœåŠ¡ã€‚è¯¥ç½‘ç«™æä¾›äº†æœ‰å…³å›½é™…åœ°çƒè‡ªè½¬æœåŠ¡ä¸­å¿ƒçš„ä»»åŠ¡ã€æœºæ„è®¾ç½®ã€æˆå‘˜ä»¥åŠç›¸å…³äº§å“çš„è¯¦ç»†ä¿¡æ¯ï¼ŒåŒæ—¶è¿˜æä¾›äº†é€šå‘å…¶æ•°æ®åº“å’Œå…¬å‘Šä¸­çš„è§‚æµ‹æ•°æ®ä¸ç ”ç©¶ç»“æœçš„å…¥å£ã€‚å›½é™…åœ°çƒè‡ªè½¬æœåŠ¡(International Earth Rotation Service-ç®€ç§°IERS)ç”±å›½é™…å¤§åœ°æµ‹é‡å­¦å’Œåœ°çƒç‰©ç†å­¦è”åˆä¼šåŠä¸å›½é™…å¤©æ–‡å­¦è”åˆä¼šè”åˆåˆ›åŠï¼Œç”¨ä»¥å–ä»£å›½é™…æ—¶é—´å±€(BIH)çš„åœ°çƒè‡ªè½¬éƒ¨åˆ†å’ŒåŸæœ‰çš„å›½é™…æç§»æœåŠ¡(IPMS)ã€‚1.2. å›½é™…å¤©æ–‡å­¦è”åˆä¼šå›½é™…å¤©æ–‡å­¦è”åˆä¼šï¼ˆInternational Astronomical Union, IAUï¼‰ï¼ˆå®˜ç½‘ï¼šhttps://www.iau.org/ ï¼‰æ˜¯ä¸–ç•Œå„å›½å¤©æ–‡å­¦æœ¯å›¢ä½“è”åˆç»„æˆçš„éæ”¿åºœæ€§å­¦æœ¯ç»„ç»‡ï¼Œå…¶å®—æ—¨æ˜¯ç»„ç»‡å›½é™…å­¦æœ¯äº¤æµï¼Œæ¨åŠ¨å›½é™…åä½œï¼Œä¿ƒè¿›å¤©æ–‡å­¦çš„å‘å±•ã€‚å›½é™…å¤©æ–‡å­¦è”åˆä¼šäº1919å¹´7æœˆåœ¨å¸ƒé²å¡å°”æˆç«‹ã€‚å¤©æ–‡å­¦è”ç›Ÿæœ‰73ä¸ªæˆå‘˜å›½ï¼Œå…¶ä¸­åŒ…æ‹¬ä¸“ä¸šå¤©æ–‡å­¦ç ”ç©¶è¾¾åˆ°è¾ƒé«˜ç¨‹åº¦çš„å¤§å¤šæ•°å›½å®¶ã€‚å¤©æ–‡å­¦è”ç›Ÿçš„ä¸€ä¸ªä¸»è¦ä»äº‹åœ°é¢å’Œç©ºé—´å¤©æ–‡å­¦å„å­¦ç§‘çš„10528 å¤šåæˆå‘˜çš„ç›´æ¥å‚ä¸ã€‚2. æ—¶é—´2.1. å¤ªé˜³æ—¶å¤ªé˜³æ—¶ï¼ˆSolar timeï¼‰æ˜¯ä¸€ç§ä»¥åœ°çƒè‡ªè½¬ä¸ºåŸºç¡€çš„æ—¶é—´è®¡é‡ç³»ç»Ÿï¼Œä»¥åœ°çƒç›¸å¯¹äºå¤ªé˜³çš„è‡ªè½¬å‘¨æœŸä¸ºåŸºå‡†ï¼Œç”¨å¤ªé˜³å¯¹äºè¯¥åœ°å­åˆåœˆçš„æ—¶è§’æ¥é‡åº¦ï¼ŒåŸºç¡€æ—¶é—´å•ä½ä¸ºå¤ªé˜³æ—¥ã€‚å¤ªé˜³æ—¶çš„åˆå§‹æ—¶åˆ»ï¼Œä»¥å¤ªé˜³åœ¨è¯¥åœ°ä¸‹ä¸­å¤©ç¬é—´ä½œä¸ºå¤ªé˜³æ—¶é›¶æ—¶ã€‚å¤ªé˜³æ—¶çš„ç±»å‹åˆ†åˆ«ä¸ºçœŸå¤ªé˜³æ—¶ï¼ˆapparent solar timeæˆ–sundial timeï¼‰å’Œå¹³å¤ªé˜³æ—¶ï¼ˆmean solar timeæˆ–clock timeï¼‰ã€‚åœ°çƒè¡¨é¢æ´»åŠ¨çš„äººä»¬ï¼Œä¹ æƒ¯ä»¥å¤ªé˜³åœ¨å¤©çƒä¸Šçš„ä½ç½®æ¥ç¡®å®šæ—¶é—´ï¼Œå› æ­¤å°†å¤ªé˜³è¿ç»­ä¸¤æ¬¡ç»è¿‡ä¸Šä¸­å¤©çš„æ—¶é—´é—´éš”ç§°ä¸ºçœŸå¤ªé˜³æ—¥ï¼Œåœ°æ–¹çœŸå¤ªé˜³æ—¥12æ—¶ä¸ºå¤ªé˜³åœ¨è¯¥åœ°ä¸Šä¸­å¤©ç¬æ—¶ã€‚ç„¶è€Œï¼Œåœ°çƒç»•å¤ªé˜³å…¬è½¬è¿åŠ¨çš„è½¨é“æ˜¯æ¤­åœ†ï¼Œå¤ªé˜³ä½äºè¯¥æ¤­åœ†çš„ä¸€ä¸ªç„¦ç‚¹ä¸Šï¼Œæ‰€ä»¥åœ°çƒåœ¨è½¨é“ä¸Šåšçš„æ˜¯ä¸ç­‰é€Ÿè¿åŠ¨ï¼ŒçœŸå¤ªé˜³å‘¨æ—¥è§†è¿åŠ¨çš„é€Ÿåº¦æ˜¯ä¸å‡åŒ€çš„ï¼Œä¸æ˜“é€‰åšè®¡æ—¶å•ä½ã€‚ä¸ºäº†å¾—åˆ°ä»¥çœŸå¤ªé˜³å‘¨æ—¥è§†è¿åŠ¨ä¸ºåŸºç¡€è€Œåˆå…‹æœå…¶ä¸å‡åŒ€æ€§çš„æ—¶é—´è®¡é‡ç³»ç»Ÿï¼Œäººä»¬å¼•å…¥äº†å¹³å¤ªé˜³æ—¥çš„æ¦‚å¿µã€‚å¤©æ–‡å­¦ä¸Šå‡å®šç”±ä¸€ä¸ªå¤ªé˜³ï¼ˆå¹³å¤ªé˜³ï¼‰åœ¨å¤©èµ¤é“ä¸Šï¼ˆè€Œä¸æ˜¯åœ¨é»„èµ¤é“ä¸Šï¼‰ä½œç­‰é€Ÿè¿è¡Œï¼Œå…¶é€Ÿåº¦ç­‰äºè¿è¡Œåœ¨é»„èµ¤é“ä¸ŠçœŸå¤ªé˜³çš„å¹³å‡é€Ÿåº¦ï¼Œè¿™ä¸ªå‡æƒ³çš„å¤ªé˜³è¿ç»­ä¸¤æ¬¡ä¸Šä¸­å¤©çš„æ—¶é—´é—´éš”ï¼Œå«åšä¸€ä¸ªå¹³å¤ªé˜³æ—¥ã€‚è¿™ä¹Ÿç›¸å½“äºæŠŠä¸€å¹´ä¸­çœŸå¤ªé˜³æ—¥çš„å¹³å‡ç§°ä¸ºå¹³å¤ªé˜³æ—¥ï¼Œå¹¶ä¸”æŠŠ1/24å¹³å¤ªé˜³æ—¥å–ä¸º1å¹³å¤ªé˜³æ—¶ã€‚äººä»¬æ—¥å¸¸ç”Ÿæ´»ä¸­ä½¿ç”¨çš„â€œæ—¥â€å’Œâ€œæ—¶â€ï¼Œå°±æ˜¯å¹³å¤ªé˜³æ—¥å’Œå¹³å¤ªé˜³æ—¶çš„ç®€ç§°ã€‚å¹³å¤ªé˜³æ—¶çš„åŸºæœ¬å•ä½æ˜¯å¹³å¤ªé˜³æ—¥ï¼Œ1å¹³å‡å¤ªé˜³æ—¥ç­‰äº24å¹³å‡å¤ªé˜³å°æ—¶ï¼Œ1å¹³å‡å¤ªé˜³å°æ—¶ç­‰äº86400å¹³å‡å¤ªé˜³ç§’ã€‚2.2. æ’æ˜Ÿæ—¶æ’æ˜Ÿæ—¶ï¼ˆSidereal timeï¼‰æ˜¯ä¸€ç§ä»¥åœ°çƒè‡ªè½¬ä¸ºåŸºç¡€çš„æ—¶é—´è®¡é‡ç³»ç»Ÿï¼Œä»¥åœ°çƒç›¸å¯¹äºæ’æ˜Ÿçš„è‡ªè½¬å‘¨æœŸä¸ºåŸºå‡†ã€‚æ’æ˜Ÿæ—¶åŸºç¡€æ—¶é—´å•ä½ä¸ºæ’æ˜Ÿæ—¥ï¼Œå°†æ˜¥åˆ†ç‚¹ç›¸ç»§ä¸¤æ¬¡ç»è¿‡ä¸Šä¸­å¤©çš„æ—¶é—´é—´éš”ç§°ä¸ºæ’æ˜Ÿæ—¥ï¼Œå¹¶ä»¥æ˜¥åˆ†ç‚¹åœ¨è¯¥åœ°ä¸Šä¸­å¤©çš„ç¬é—´ä½œä¸ºè¿™ä¸ªè®¡é‡ç³»ç»Ÿçš„èµ·ç‚¹ï¼Œå³æ’æ˜Ÿæ—¶é›¶æ—¶ã€‚ç”±äºåœ°çƒçš„ç« åŠ¨ï¼Œæ˜¥åˆ†ç‚¹åœ¨å¤©çƒä¸Šå¹¶ä¸å›ºå®šï¼Œè€Œæ˜¯ä»¥18.6å¹´çš„å‘¨æœŸå›´ç»•ç€å¹³å‡æ˜¥åˆ†ç‚¹æ‘†åŠ¨ã€‚å› æ­¤æ’æ˜Ÿæ—¶åˆåˆ†ä¸ºçœŸæ’æ˜Ÿæ—¶å’Œå¹³æ’æ˜Ÿæ—¶ã€‚çœŸæ’æ˜Ÿæ—¶æ˜¯é€šè¿‡ç›´æ¥æµ‹é‡å­åˆçº¿ä¸å®é™…çš„æ˜¥åˆ†ç‚¹ä¹‹é—´çš„æ—¶è§’è·å¾—çš„ï¼Œå¹³æ’æ˜Ÿæ—¶åˆ™å¿½ç•¥äº†åœ°çƒçš„ç« åŠ¨ã€‚çœŸæ’æ˜Ÿæ—¶ä¸å¹³æ’æ˜Ÿæ—¶ä¹‹é—´çš„å·®å¼‚æœ€å¤§å¯è¾¾çº¦0.4ç§’ã€‚å—åˆ°åœ°çƒå…¬è½¬çš„å½±å“ï¼Œä¸€ä¸ªæ’æ˜Ÿæ—¥çš„é•¿åº¦è¦æ¯”ä¸€ä¸ªå¤ªé˜³æ—¥çš„é•¿åº¦ç•¥çŸ­ï¼Œä¸€ä¸ªå¹³æ’æ˜Ÿæ—¥çº¦ç­‰äº23æ—¶56åˆ†4.09ç§’å¹³å¤ªé˜³æ—¶ã€‚ä»»ä½•ç»™å®šåœ°ç‚¹çš„æ’æ˜Ÿæ—¶å°†æ¯”å½“åœ°æ°‘ç”¨æ—¶é—´æ¯24å°æ—¶å¢åŠ çº¦4åˆ†é’Ÿï¼Œç›´åˆ°ä¸€å¹´è¿‡å»åï¼Œä¸è¿‡å»çš„å¤ªé˜³æ—¥æ•°ç›¸æ¯”ï¼Œæ’æ˜Ÿæ—¶è¦å¤šä¸€ä¸ªæ’æ˜Ÿæ—¥ã€‚2.3. æ ¼æ—å°¼æ²»æ ‡å‡†æ—¶é—´ï¼ˆGMTï¼‰æ ¼æ—å°¼æ²»æ ‡å‡†æ—¶é—´ï¼ˆGreenwich Mean Time, GMTï¼‰æ˜¯è‹±å›½ä¼¦æ•¦æ ¼æ—å°¼æ²» å½“åœ°çš„å¹³å¤ªé˜³æ—¶ï¼Œä»¥å¹³å­å¤œä½œä¸º0æ—¶å¼€å§‹ã€‚å†å²ä¸Šæ ¼æ—å°¼æ²»æ ‡å‡†æ—¶é—´çš„å®šä¹‰å’Œè®¡ç®—è¾ƒä¸ºæ··ä¹±ã€‚æ¯”å¦‚ï¼Œå¤©æ–‡å­¦é¢†åŸŸå¸¸ä»¥æ­£åˆ12æ—¶ä½œä¸ºæ ¼æ—å°¼æ²»æ ‡å‡†æ—¶é—´å¼€å§‹çš„è®¡ç®—æ–¹æ³•ï¼Œä¹Ÿæœ‰åœ°æ–¹å°†å…¶ä½œä¸ºåè°ƒä¸–ç•Œæ—¶UTC+0çš„åˆ«åã€‚åœ¨å¯¼èˆªé¢†åŸŸï¼ŒGMTå¸¸å¸¸è¢«è®¤ä¸ºä¸UT1ç­‰åŒã€‚æ­£å› ä¸ºå¦‚æ­¤æ··ä¹±çš„å®šä¹‰ä¸ä½¿ç”¨ï¼Œæ ¼æ—å°¼æ²»æ ‡å‡†æ—¶é—´ä¸å¯ä»¥è¢«å•ç‹¬ä½œä¸ºç²¾ç¡®çš„æ—¶é—´æ ‡å‡†ã€‚1935å¹´ï¼Œå›½é™…å¤©æ–‡å­¦è”åˆä¼šæ¨èä½¿ç”¨â€œä¸–ç•Œæ—¶â€ä¸€è¯ï¼Œä½œä¸ºæ¯”æ ¼æ—å¨æ²»æ ‡å‡†æ—¶é—´æ›´ç²¾ç¡®çš„æœ¯è¯­ï¼Œç”¨ä»¥æŒ‡ä»£ä»¥å¹³å­å¤œä½œä¸º0æ—¶å¼€å§‹çš„æ ¼æ—å°¼æ²»æ ‡å‡†æ—¶é—´ã€‚ä½†åœ¨ä¸€äº›åº”ç”¨ä¸­ï¼ˆè‹±å›½å¹¿æ’­å…¬å¸å›½é™…é¢‘é“ã€è‹±å›½æ°”è±¡å±€ã€è‹±å›½çš‡å®¶æµ·å†›ã€ä¸­ä¸œå¹¿æ’­ä¸­å¿ƒç­‰ï¼‰ï¼Œæ ¼æ—å¨æ²»æ ‡å‡†æ—¶é—´ä¸€è¯åœ¨æ°‘ç”¨è®¡æ—¶æ–¹é¢ä¸€ç›´æ²¿ç”¨è‡³ä»Šã€‚2.4. ä¸–ç•Œæ—¶ï¼ˆUTï¼‰ä¸–ç•Œæ—¶ï¼ˆUniversal Time, UTï¼‰æ˜¯ä¸€ç§ä»¥åœ°çƒè‡ªè½¬ä¸ºåŸºç¡€çš„æ—¶é—´è®¡é‡ç³»ç»Ÿã€‚ä¸–ç•Œæ—¶ç†è®ºä¸Šé€šè¿‡è§‚æµ‹å¤ªé˜³çš„æ—¥è¿åŠ¨æ¥å®šä¹‰ï¼Œä½†ç”±äºç²¾ç¡®è§‚æµ‹å¤ªé˜³ååˆ†å›°éš¾ï¼Œå› æ­¤å¾€å¾€é€€è€Œæ±‚å…¶æ¬¡ï¼Œä½¿ç”¨é•¿åŸºçº¿å¹²æ¶‰æµ‹é‡æ³•ç¡®å®šé¥è¿œç±»æ˜Ÿä½“ä½ç½®ã€å¯¹æœˆçƒå’Œäººé€ å«æ˜Ÿè¿›è¡Œæ¿€å…‰æµ‹è·ã€ä»¥åŠå¯¹GPSå«æ˜Ÿè¿›è¡Œè½¨é“ç¡®å®šæ¥è®¡ç®—ã€‚ä¸–ç•Œæ—¶åŒ…å«å››ä¸ªç‰ˆæœ¬ï¼ŒåŒºåˆ«åœ¨äºåŒ…å«ä¸åŒçš„ä¿®æ­£é¡¹è°ƒæ•´æ¥æ¥è¿‘å¤ªé˜³æ—¶ã€‚ä¸–ç•Œæ—¶çš„å››ä¸ªç‰ˆæœ¬å®šä¹‰å¦‚ä¸‹ï¼š      UT0ï¼šUT0æ˜¯é€šè¿‡å¤©æ–‡å¤ªè§‚æµ‹æ’æ˜Ÿæˆ–æ²³å¤–å°„ç”µæºçš„æ—¥è¿åŠ¨ä»¥åŠå¯¹æœˆçƒå’Œäººé€ åœ°çƒå«æ˜Ÿçš„æµ‹è·è§‚æµ‹ç¡®å®šçš„ä¸–ç•Œæ—¶ã€‚UT0ä¸åŒ…å«ä»»ä½•æ ¡æ­£ï¼Œå¹¶ä¸”å·²ä¸å†å¸¸ç”¨ï¼›        UT1ï¼šUT1æ˜¯åœ¨UT0çš„åŸºç¡€ä¸Šå¢åŠ åœ°çƒæç§»ä¿®æ­£åå¾—åˆ°çš„ï¼Œæ˜¯ä¸–ç•Œæ—¶çš„ä¸»è¦å½¢å¼ã€‚åœ¨ç¡®å®šUT0æ—¶ï¼Œå‡å®šå¤©æ–‡å°çš„ä½ç½®åœ¨åœ°çƒå‚è€ƒç³»ï¼ˆå¦‚å›½é™…åœ°çƒå‚è€ƒç³»ï¼‰ä¸­åæ ‡å›ºå®šã€‚ä½†æ˜¯ï¼Œåœ°çƒè‡ªè½¬è½´çš„ä½ç½®å¹¶ä¸å›ºå®šï¼Œè€Œæ˜¯åœ¨åœ°çƒè¡¨é¢æ¼‚ç§»ï¼Œå³æç§»ã€‚å› æ­¤ï¼Œå®šä¹‰UT1æ—¶è€ƒè™‘å¹¶å¢åŠ äº†æç§»ä¿®æ­£ï¼›        UT1Rï¼šUT1Ræ˜¯åœ¨UT1çš„åŸºç¡€ä¸Šå¢åŠ å‘¨æœŸæ€§æ½®æ±å˜åŒ–ä¿®æ­£åå¾—åˆ°çš„ï¼Œå®ƒåŒ…æ‹¬62ä¸ªä¿®æ­£é¡¹ï¼Œå‘¨æœŸä»5.6å¤©åˆ°18.6å¹´ä¸ç­‰ï¼›        UT2ï¼šæ˜¯åœ¨UT1çš„åŸºç¡€ä¸Šå¢åŠ å­£èŠ‚æ€§å˜åŒ–ä¿®æ­£åå¾—åˆ°çš„ï¼Œå·²ç»ä¸å†å¸¸ç”¨ã€‚  ä¸–ç•Œæ—¶æ›¾é•¿æœŸè¢«è®¤ä¸ºæ˜¯ç¨³å®šå‡åŒ€çš„æ—¶é—´è®¡é‡ç³»ç»Ÿï¼Œå†å²ä¸Šå¾—åˆ°å¹¿æ³›åº”ç”¨ã€‚åæ–‡å¦‚æ— ç‰¹åˆ«è¯´æ˜ï¼Œä¸–ç•Œæ—¶å‡æŒ‡çš„æ˜¯UT1ã€‚2.5. åŸå­æ—¶ï¼ˆTAIï¼‰1955å¹´é“¯åŸå­é’Ÿçš„å‘æ˜ï¼Œæä¾›äº†ä¸€ç§æ¯”å¤©æ–‡è§‚æµ‹æ›´ç¨³å®šä¸”æ›´æ–¹ä¾¿çš„æˆæ—¶æœºåˆ¶ã€‚1967å¹´ç¬¬13å±Šå›½é™…è®¡é‡å¤§ä¼šä¸Šé€šè¿‡ä¸€é¡¹å†³è®®ï¼Œç»™å‡ºäº†æ–°çš„å›½é™…å•ä½â€œç§’â€çš„å®šä¹‰ï¼Œä¸€ç§’ä¸ºé“¯-133åŸå­åŸºæ€ä¸¤ä¸ªè¶…ç²¾ç»†èƒ½çº§é—´è·ƒè¿è¾å°„æŒ¯è¡9192631770å‘¨æ‰€æŒç»­çš„æ—¶é—´ï¼Œå…¶ç¨³å®šåº¦å¯ä»¥è¾¾åˆ°{10}^{-14}ä»¥ä¸Šã€‚åŸå­æ—¶ï¼ˆTemps Atomique Internationalï¼ŒTAæˆ–TAIï¼‰å°±æ˜¯æ ¹æ®ä¸Šè¿°ç§’çš„å®šä¹‰ç¡®å®šçš„ä¸€ç§æ–°çš„å›½é™…å‚ç…§æ—¶æ ‡ï¼Œå…¶åˆå§‹æ—¶é—´ä¸º1958å¹´1æœˆ1æ—¥ä¸–ç•Œæ—¶0æ—¶ï¼Œå³åœ¨è¿™ä¸€ç¬é—´TAå’ŒUT1é‡åˆ ã€‚ç›®å‰ï¼Œå›½é™…åŸå­æ—¶ç”±å›½é™…è®¡é‡å±€æ”¶é›†50å¤šä¸ªå›½400å¤šä¸ªå®éªŒå®¤çš„åŸå­é’Ÿæ¯”å¯¹å’Œæ—¶å·å‘æ’­èµ„æ–™è¿›è¡Œç»¼åˆå¤„ç†åå»ºç«‹ï¼Œå¯å‚è€ƒï¼š  Bureau International des Poids et Mesures (BIPM) Time Departmentâ€. Report of the International Association of Geodesy 2011-2013. http://iag.dgfi.tum.de/fileadmin/IAG-docs/Travaux2013/08_BIPM.pdfå„ä¸ªå›½å®¶ä¸ºäº†æ»¡è¶³å„ä¸ªè¡Œä¸šå¯¹å®æ—¶æ—¶é—´ä¿¡å·çš„éœ€è¦ï¼Œå»ºç«‹å„å›½çš„å®æ—¶çš„æ—¶é—´å°ºåº¦â€”â€”åœ°æ–¹åŸå­æ—¶TAï¼ˆkï¼‰ï¼Œkä¸ºå®éªŒå®¤ä»£å·ã€‚TAï¼ˆJATCï¼‰æ˜¯ç”±å›½å®¶æˆæ—¶ä¸­å¿ƒè”åˆå›½å†…å…¶ä»–å•ä½æˆç«‹ç»¼åˆåŸå­æ—¶å§”å‘˜ä¼šï¼ˆJoint Atomic Time Commissionï¼‰è´Ÿè´£å»ºç«‹çš„ç‹¬ç«‹åœ°æ–¹åŸå­æ—¶å°ºåº¦ï¼Œ1987å¹´èµ·å‚åŠ å›½é™…åŸå­æ—¶TAIè®¡ç®—ï¼Œä»æœªä¸­æ–­ã€‚2.6. åè°ƒä¸–ç•Œæ—¶ï¼ˆUTCï¼‰Cåè°ƒä¸–ç•Œæ—¶ï¼ˆè‹±è¯­Coordinated Universal Timeï¼Œæ³•è¯­Temps Universel CoordonnÃ©ï¼ŒäºŒè€…å¦¥ååç®€ç§°UTCï¼‰æ˜¯æœ€ä¸»è¦çš„ä¸–ç•Œæ—¶é—´æ ‡å‡†ï¼Œå…¶ä»¥åŸå­æ—¶ç§’é•¿ä¸ºåŸºç¡€ï¼Œä½œä¸ºæ ¼æ—å°¼æ²»æ ‡å‡†æ—¶é—´çš„æ›¿ä»£ï¼Œåœ¨æ—¶åˆ»ä¸Šå°½é‡æ¥è¿‘äºæ ¼æ—å°¼æ²»æ ‡å‡†æ—¶é—´ï¼ˆä¹Ÿå³ä¸–ç•Œæ—¶UT1ï¼‰ã€‚è™½ç„¶å›½é™…åŸå­æ—¶æ›´ä¸ºç²¾å¯†ï¼Œä½†åœ¨å®é™…åº”ç”¨ä¸­äººä»¬å¸Œæœ›æ—¶é—´ç³»ç»Ÿæ›´åŠ æ¥è¿‘ä¸–ç•Œæ—¶ï¼Œå› ä¸ºå…¶æ›´åŠ è´´è¿‘äººä»¬æ—¥å¸¸æ„Ÿå®˜ä¸Šçš„æ—¶é—´æµé€ã€‚å› æ­¤ï¼Œ1972å¹´æå‡ºåè°ƒä¸–ç•Œæ—¶çš„æŠ˜ä¸­æ—¶æ ‡ï¼Œå®ƒæ—¢ä¿æŒæ—¶é—´å°ºåº¦çš„å‡åŒ€æ€§ï¼Œåˆèƒ½è¿‘ä¼¼åœ°åæ˜ åœ°çƒè‡ªè½¬çš„å˜åŒ–ã€‚åè°ƒä¸–ç•Œæ—¶ç”±å›½é™…è®¡é‡å±€ï¼ˆBureau International des Poids et Mesuresï¼ŒBIPMï¼‰ç»´æŠ¤ã€‚ç”±äºåè°ƒä¸–ç•Œæ—¶ä¸ä¸–ç•Œæ—¶çš„æ—¶é—´å•ä½çš„ä¸ä¸€è‡´æ€§ï¼ŒäºŒè€…ä¹‹å·®é€å¹´ç§¯ç´¯ï¼Œä¾¿é‡‡ç”¨è·³ç§’ï¼ˆé—°ç§’ï¼‰çš„æ–¹æ³•ä½¿äºŒè€…çš„æ—¶åˆ»ç›¸å·®ä¸è¶…è¿‡1ç§’ã€‚1972å¹´ï¼Œå›½é™…è®¡é‡å¤§ä¼šå†³å®šï¼Œå½“ä¸–ç•Œæ—¶ä¸åè°ƒä¸–ç•Œæ—¶ä¹‹é—´æ—¶åˆ»ç›¸å·®è¶…è¿‡0.9ç§’æ—¶ï¼Œå°±åœ¨åè°ƒä¸–ç•Œæ—¶ä¸ŠåŠ ä¸Šæˆ–å‡å»1ç§’ï¼Œä»¥å°½é‡æ¥è¿‘ä¸–ç•Œæ—¶ï¼Œè¿™å°±æ˜¯é—°ç§’ã€‚é—°ç§’ä¸€èˆ¬åœ¨12æœˆ31æ—¥æˆ–6æœˆ30æ—¥æœ«åŠ å…¥ã€‚å…·ä½“æ—¥æœŸç”±å›½é™…åœ°çƒè‡ªè½¬æœåŠ¡ç»„ç»‡ï¼ˆ1ERSï¼‰å®‰æ’äº•é€šå‘Šã€‚ç”±äºå‡ åå¹´æ¥åœ°çƒè‡ªè½¬æ­£åœ¨é€æ¸å˜æ…¢ï¼Œå›½é™…è®¡æ—¶æœºæ„ä¸€å…±å®è¡Œäº†äºŒåå¤šæ¬¡é—°ç§’æ“ä½œï¼Œç¡®ä¿æˆ‘ä»¬åè°ƒä¸–ç•Œæ—¶ä¸åœ°çƒè‡ªè½¬é€Ÿåº¦ç›¸åŒ¹é…ï¼Œæˆªè‡³ç›®å‰åè°ƒä¸–ç•Œæ—¶å·²ç»æ­£é—°ç§’37ç§’ã€‚å›½å®¶æˆæ—¶ä¸­å¿ƒæ¯æœˆå‡ä¼šå‘å¸ƒã€Šæ—¶é—´é¢‘ç‡å…¬æŠ¥ã€‹ï¼Œå…¶ä¸­åŒ…å«åè°ƒä¸–ç•Œæ—¶å’ŒåŸå­æ—¶ä¹‹é—´çš„æ—¶å·®ï¼Œå¯åœ¨çŸ¥ç½‘æŸ¥çœ‹å’Œä¸‹è½½ã€2ã€‘ã€‚ä»¥2021å¹´12æœˆ31æ—¥ä¸ºä¾‹ï¼ŒåŸå­æ—¶å’Œåè°ƒä¸–ç•Œæ—¶ä¹‹å·®ä¸º\\[\\begin{aligned}&amp;\\rm UTC = UT1 + DUT1 = UT1+37s+63.901us\\\\&amp;(DUT1 &lt; 0.9s)\\end{aligned}\\]ç»è¿‡é—°ç§’è°ƒæ•´ä¹‹åï¼Œåè°ƒä¸–ç•Œæ—¶ä¸ä¸–ç•Œæ—¶çš„å·®å€¼ç§°ä¸ºDUT1ï¼Œå¯ä»¥ä»ç¾å›½å›½å®¶æ ‡å‡†ä¸æŠ€æœ¯ç ”ç©¶é™¢ï¼ˆNational Institute of Standards and Technologyï¼ŒNISTï¼‰è·å¾—ã€1ã€‘ï¼Œä»¥2021å¹´12æœˆ31æ—¥ä¸ºä¾‹ï¼Œå·®å€¼ä¸º\\[\\rm DUT1 = UT1-UTC = -110.4ms\\]ä¹Ÿå¯ä»¥é€šè¿‡IERSå®˜ç½‘ä¿æŒæ›´æ–°çš„ Bulletin D æ¥æŸ¥è¯¢æœ€æ–°çš„DUT1ï¼Œä»¥2021å¹´12æœˆ31æ—¥ä¸ºä¾‹ï¼ŒæŸ¥è¯¢å¾—åˆ°çš„ç»“æœä¸º\\[\\rm DUT1 = -0.1s\\]UTCä¸TAIçš„å·®å€¼ç”±IERSä¿æŒæ›´æ–°çš„ Bulletin C æ¥æŸ¥è¯¢ï¼Œä»¥2021å¹´12æœˆ31æ—¥ä¸ºä¾‹ï¼ŒæŸ¥è¯¢å¾—åˆ°çš„ç»“æœä¸º\\[\\rm UTC-TAI=-37s\\]  IERS Bulletin å‘å¸ƒç½‘å€ï¼šhttps://www.iers.org/IERS/EN/Publications/Bulletins/bulletins.htmlåŒ—äº¬æ—¶é—´ä¸º $\\rm UTC^{+8}$ï¼Œä¸ $\\rm UTC$ çš„å…³ç³»ä¸º\\[\\rm UTC^{+8} = UTC + 8\\]2.7. GPSæ—¶é—´GPSæ—¶é—´ï¼Œä¹Ÿå°±æ˜¯GPSåŸå­æ—¶ï¼Œå‚ç…§ç¾å›½æµ·å†›å¤©æ–‡å°ï¼ˆUnited States Naval Observatoryï¼ŒUSNOï¼‰çš„ä¸»æ—¶é’Ÿï¼ˆMain Clockï¼ŒMCï¼‰ä¸ºåŸºå‡†ã€‚GPSæ—¶é—´çš„åˆå§‹åŸç‚¹å®šä¹‰ä¸ºåœ¨1980å¹´1æœˆ6æ—¥0ç‚¹ä¸ä¸–ç•Œåè°ƒæ—¶ç›¸ç­‰ï¼Œä»¥åæŒ‰åŸå­æ—¶ç§’é•¿ç´¯ç§¯è®¡æ—¶ä¸”ä¸åŒ…å«é—°ç§’ã€‚GPSæ—¶é—´è·ŸUTCæ—¶é—´ä¹‹å·®ä¸ºç§’çš„æ•´å€æ•°ã€‚GPSå¯¼èˆªé‡‡ç”¨GPSæ—¶é—´ï¼Œè®¡é‡å•ä½ä¸ºGPSå‘¨å’ŒGPSç§’ã€‚ç”±äº1980å¹´1æœˆ6æ—¥ï¼Œåè°ƒä¸–ç•Œæ—¶å·²ç»æ­£é—°ç§’19ç§’ï¼Œå› æ­¤æˆªè‡³ç›®å‰ï¼ˆ2021å¹´12æœˆ31æ—¥ï¼‰GPSæ—¶ä¸ä¸–ç•Œåè°ƒæ—¶çš„æ—¶å·®ä¸º18ç§’ã€‚2.8. å†ä¹¦æ—¶å‰é¢æ‰€è¿°çš„å¤ªé˜³æ—¶ã€æ’æ˜Ÿæ—¶å’Œä¸–ç•Œæ—¶éƒ½æ˜¯ä»¥åœ°çƒè‡ªè½¬ä¸ºåŸºç¡€çš„æ—¶é—´è®¡é‡ç³»ç»Ÿã€‚ç„¶è€Œï¼Œåœ°çƒè‡ªè½¬ä¸€ç›´åœ¨å˜ç¼“ï¼Œè€Œä¸”å˜ç¼“è§„å¾‹éš¾ä»¥é¢„æµ‹ï¼Œè¿™ä½¿åœ°çƒè‡ªè½¬ä¸ºåŸºç¡€çš„æ—¶é—´è®¡é‡ç³»ç»Ÿæ˜¯ä¸€ç§ä¸å‡åŒ€çš„æ—¶é—´ç³»ç»Ÿã€‚ä½†æ˜¯ï¼Œå¤©æ–‡å­¦å®¶ä»¬éœ€è¦ä¸€ä¸ªæ›´åŠ å‡åŒ€çš„æ—¶é—´æ ‡å°ºæ¥è¿›è¡Œç²¾ç¡®è®¡ç®—ï¼ˆè™½ç„¶UTCæ˜¯ä¸€ç§å‡åŒ€çš„æ—¶é—´è®¡é‡ç³»ç»Ÿï¼Œä½†å®ƒéœ€è¦éšæ—¶é€šè¿‡è·³ç§’æ¥ä¿æŒä¸ä¸–ç•Œæ—¶çš„ä¸€è‡´ï¼Œè¿™ç§ä¸è¿ç»­æ€§ä½¿å…¶æ— æ³•ç”¨äºå¤©æ–‡è®¡ç®—ï¼‰ã€‚1958å¹´ï¼Œå›½é™…å¤©æ–‡å­¦è”åˆä¼šå†³è®®ï¼Œè‡ª1960å¹´å¼€å§‹ç”¨å†ä¹¦æ—¶ï¼ˆEphemeral Timeï¼ŒETï¼‰ä»£æ›¿ä¸–ç•Œæ—¶ä½œä¸ºåŸºæœ¬çš„æ—¶é—´è®¡é‡ç³»ç»Ÿï¼Œå¹¶è§„å®šä¸–ç•Œå„å›½å¤©æ–‡å¹´å†çš„å¤ªé˜³ã€æœˆçƒã€è¡Œæ˜Ÿå†è¡¨ï¼Œéƒ½ä»¥å†ä¹¦æ—¶ä¸ºå‡†è¿›è¡Œè®¡ç®—ã€‚å†ä¹¦æ—¶åŸºäºåœ°çƒå…¬è½¬å®šä¹‰ï¼Œå†ä¹¦æ—¶ç§’çš„å®šä¹‰ä¸º1900å¹´1æœˆ0æ—¥12æ—¶æ­£å›å½’å¹´é•¿åº¦çš„1/31556925.9747ï¼ˆä¹Ÿå°±æ˜¯å¹³å¤ªé˜³æ—¶çš„1ç§’ï¼‰ã€‚å†ä¹¦æ—¶å¯ä»¥é€šè¿‡å¯¹å¤ªé˜³ã€æœˆçƒæˆ–å…¶ä»–è¡Œæ˜Ÿçš„è§‚æµ‹äºŒè·å¾—ã€‚ç›¸æ¯”äºåœ°çƒè‡ªè½¬ï¼Œåœ°çƒå…¬è½¬è¦ç¨³å®šçš„å¤šï¼Œä½†ä»ç„¶ä¸æ˜¯ä¸¥æ ¼å‡åŒ€çš„è¿åŠ¨ï¼Œåªèƒ½è¾¾åˆ° $10^{-10}s$ çº§åˆ«ã€‚ç”±äºå†ä¹¦æ—¶çš„æµ‹å®šç²¾åº¦è¾ƒä½ï¼Œ1967å¹´èµ·å·²ç”¨åŸå­æ—¶ä»£æ›¿å†ä¹¦æ—¶ä½œä¸ºåŸºæœ¬çš„æ—¶é—´è®¡é‡ç³»ç»Ÿï¼Œä½†å½“æ—¶åœ¨å¤©æ–‡å†è¡¨ä¸Šä»ç”¨å†ä¹¦æ—¶ã€‚1976å¹´ç¬¬åå…­å±Šå›½é™…å¤©æ–‡å­¦è”åˆä¼šå†³è®®ï¼Œä»1984å¹´èµ·å¤©æ–‡è®¡ç®—å’Œå†è¡¨ä¸Šæ‰€ç”¨çš„æ—¶é—´å•ä½ï¼Œä¹Ÿéƒ½ä»¥åŸå­æ—¶ç§’ä¸ºåŸºç¡€ï¼ˆåŠ›å­¦æ—¶ï¼‰ã€‚2.9. åŠ›å­¦æ—¶ç”±äºå†ä¹¦æ—¶æ‰€ç”¨çš„åŸºå‡†åœ°çƒè¿åŠ¨çš„ç†è®ºæ¡†æ¶æ˜¯ç‰›é¡¿åŠ›å­¦ï¼Œæ ¹æ®å¹¿ä¹‰ç›¸å¯¹è®ºå¯çŸ¥ï¼Œåœ¨ä»¥å¤ªé˜³ä¸ºä¸­å¿ƒçš„åæ ‡ç³»å’Œä»¥åœ°çƒä¸ºä¸­å¿ƒçš„åæ ‡ç³»ä¸­æ—¶é—´å°†ä¼šä¸åŒã€‚å› æ­¤ï¼Œåœ¨1979å¹´å›½é™…å¤©æ–‡å­¦è”åˆä¼šç¬¬17å±Šå¤§ä¼šåˆ†åˆ«å®šä¹‰äº†ä¸¤ä¸ªæ–°çš„ç›¸å¯¹è®ºæ—¶é—´æ ‡å‡†ï¼šå¤ªé˜³ç³»è´¨å¿ƒåŠ›å­¦æ—¶ï¼ˆBarycentric Dynamical Timeï¼ŒTDBï¼‰å’Œåœ°çƒåŠ›å­¦æ—¶ï¼ˆTerrestrial Dynamical Timeï¼ŒTDTï¼‰ã€‚è´¨å¿ƒåŠ›å­¦æ—¶å’Œåœ°çƒåŠ›å­¦æ—¶å¯ä»¥çœ‹ä½œæ˜¯å†ä¹¦æ—¶åˆ†åˆ«åœ¨ä¸¤ä¸ªåæ ‡ç³»ä¸­çš„ç»§æ‰¿ã€‚å›½é™…å¤©æ–‡å­¦è”åˆä¼šï¼ˆIAUï¼‰è§„å®šTDTä¸TDBä¹‹é—´çš„å¹³å‡é’Ÿé€Ÿç›¸ç­‰ï¼ŒäºŒè€…ä¹‹å·®ä¸å­˜åœ¨é•¿æœŸé¡¹ï¼Œåªå­˜åœ¨å‘¨æœŸæ€§å·®å¼‚ï¼Œä¸”è¿™ç§å‘¨æœŸæ€§å·®å¼‚æ˜¯ç”±äºç›¸å¯¹è®ºæ•ˆåº”è€Œå¼•èµ·çš„ã€‚TDTä¸»è¦ç”¨äºç»™å‡ºå¤©ä½“åœ¨åº•è–ªåæ ‡ç³»ä¸­çš„è§†ä½ç½®ï¼Œè®¡ç®—å¤©ä½“åœ¨åœ°å¿ƒåæ ‡ç³»ä¸­çš„æ–¹ç¨‹ä¸­çš„æ—¶é—´å˜é‡ä¹Ÿåº”è¯¥ä½¿ç”¨TDTã€‚æœˆçƒã€å¤ªé˜³ã€è¡Œæ˜Ÿçš„å†è¡¨åˆ™ä»¥TDBä¸ºæ—¶é—´å˜é‡ï¼Œå²å·®ã€ç« åŠ¨è®¡ç®—å…¬å¼ä¹Ÿæ˜¯ä»¥TDBä¸ºæ—¶é—´å˜é‡çš„ã€‚TDBå’ŒTDTçš„å¼•å…¥å¹¶æ²¡æœ‰å®Œå…¨è§£å†³æ—¶é—´åŸºå‡†é¢ä¸´çš„é—®é¢˜ï¼Œåè€Œå‡ºç°äº†å¾ˆå¤šäº‰è®®ï¼Œå¦‚ï¼š1ï¼‰å¯¹â€œåŠ¨åŠ›å­¦â€ï¼ˆDynamicalï¼‰ä¸€è¯å¦‚ä½•è§£é‡Šï¼Ÿï¼›2ï¼‰TDTè¢«å®šä¹‰ä¸ºâ€œTAIç†æƒ³åŒ–å½¢å¼â€çš„æ—¶å€™æ˜¯åæ ‡æ—¶ï¼Œä½†åœ¨æŸäº›æƒ…å†µä¸‹åˆè¢«è§£é‡Šæˆæ˜¯åœ¨åœ°å¿ƒçš„æœ¬å¾æ—¶ï¼›ç­‰ç­‰ã€‚2.10. åœ°çƒæ—¶ä¸ºäº†è§£å†³å¼•å…¥ $\\rm TDB$ å’Œ $\\rm TDT$ å­˜åœ¨çš„é—®é¢˜ï¼Œ1991å¹´å›½é™…å¤©æ–‡å­¦è”åˆä¼šç¬¬21å±Šå¤§ä¼šåšå‡ºå†³è®®ï¼Œå®šä¹‰åœ°çƒæ—¶ï¼ˆTerrestrial Timeï¼ŒTTï¼‰å–ä»£ $\\rm TDT$ ä½œä¸ºè§†åœ°å¿ƒå†è¡¨çš„æ—¶é—´å˜é‡ï¼ŒåŒæ—¶å®šä¹‰äº†ç›¸å¯¹è®ºæ¡†æ¶ä¸‹çš„å¤ªé˜³ç³»ä¹‹å¿ƒå¤©çƒå‚è€ƒç³»ï¼ˆBCRSï¼‰å’Œåœ°çƒè´¨å¿ƒå¤©çƒå‚è€ƒç³»ï¼ˆGCRSï¼‰ã€‚åœ°çƒæ—¶çš„ç§’é•¿ä¸åŸå­æ—¶ç›¸åŒï¼Œæ—¶é—´åŸç‚¹å®šä¹‰ä¸ºåœ¨åŸå­æ—¶1977å¹´1æœˆ1æ—¥00:00:00ç¬é—´ï¼Œåœ°çƒæ—¶çš„è¯»æ•°ä¸º1977å¹´1æœˆ1æ—¥00:00:32.184ã€‚ $\\rm TT$ ä¸ $\\rm TDT$ çš„ç§’é•¿å’Œæ—¶é—´åŸç‚¹ç›¸åŒï¼Œå¯ä»¥è®¤ä¸ºæ˜¯ç­‰ä»·çš„ã€‚ä¸è¿‡TTæ›´åŠ æ˜ç¡®ä¸ºä¸€ç§åæ ‡æ—¶ï¼Œä»è€Œè§£å†³äº†TDTå®šä¹‰åœ¨æ—¶é—´æ€§è´¨æ–¹é¢çš„ä¸ç¡®å®šæ€§ã€‚å³\\[\\rm TT = TAI + 32.184s\\]$\\rm TT$ ä¸ $\\rm UT1$ ä¹‹é—´çš„æ—¶å·® $\\rm \\Delta T$ å¯æœ‰ç¾å›½æµ·å†›å¤©æ–‡å°å‘å¸ƒçš„historic_deltat.dataã€deltat.dataã€deltat.predsä¸‰ä¸ªæ•°æ®æ–‡ä»¶æä¾›ï¼ˆåŒ…æ‹¬1657-2023å¹´é—´çš„å…·ä½“æ•°å€¼ï¼‰ï¼Œä¸”å®šæœŸå¯¹æ•°æ®è¿›è¡Œæ›´æ–°ã€‚è¿˜å¯ä»¥ç”±IERSå‘å¸ƒçš„ EOP 08 C04 æ¨¡å‹ä¸­çš„  $\\rm DUT1$ ã€IERS Bulletin C ä¸­çš„ LeapSecond æ•°æ®ç»è®¡ç®—åå¾—åˆ°\\[\\rm \\Delta T=TT-UT1=LeapSecond+32.184-DUT1\\]$\\rm TDB$ å’Œ $\\rm TT$ ä¹‹é—´æ²¡æœ‰é•¿æœŸæ¼‚ç§»ï¼Œåªæœ‰å‘¨æœŸé¡¹å˜åŒ–ï¼Œå³\\[\\rm TDB = TT + 0.001658sin(M)+0.000014sin(2M)+\\frac{V_e(X-X_0)}{c^2}\\]å…¶ä¸­ï¼Œ$M$ ä¸ºåœ°çƒç»•æ—¥å…¬è½¬çš„å¹³è¿‘ç‚¹è§’ï¼Œ$V_e$ ä¸ºåœ°çƒè´¨å¿ƒåœ¨å¤ªé˜³ç³»è´¨å¿ƒåæ ‡ç³»ä¸­çš„å…¬è½¬é€Ÿåº¦çŸ¢é‡ï¼Œ$X_0$ ä¸ºåœ°å¿ƒåœ¨å¤ªé˜³ç³»è´¨å¿ƒåæ ‡ç³»ä¸­çš„ä½ç½®çŸ¢é‡ï¼Œ$X$ ä¸ºåœ°é¢é’Ÿåœ¨å¤ªé˜³ç³»è´¨å¿ƒåæ ‡ç³»ä¸­çš„ä½ç½®çŸ¢é‡ï¼Œ$X-X_0$ å®é™…ä¸Šå°±æ˜¯åœ¨å¤ªé˜³ç³»è´¨å¿ƒåæ ‡ç³»ä¸‹åœ°é¢é’Ÿç›¸å¯¹äºåœ°å¿ƒçš„ä½ç½®çŸ¢é‡ï¼Œ$c$ ä¸ºçœŸç©ºå…‰é€Ÿã€‚å¯ä»¥é‡‡ç”¨ $\\rm TT$ ä»£æ›¿ $\\rm TDB$ï¼Œå› ä¸ºäºŒè€…ä¹‹é—´çš„å·®å¸¦æ¥çš„å½±å“å¯ä»¥å¿½ç•¥ä¸è®¡ã€‚æ‰€ä»¥è™½ç„¶ JPL æ˜Ÿå†ä½¿ç”¨ TDB ï¼Œä½†æ˜¯å¯ä»¥ç›´æ¥ç”¨ TT æ¥ä»£æ›¿ã€‚å‚è€ƒï¼šèµµç‰æ™–ã€Šæ·±ç©ºæ¢æµ‹ä¸­çš„è½¨é“è®¾è®¡å’Œè½¨é“åŠ›å­¦ã€‹2.11. å„æ—¶é—´çš„è½¬æ¢å…³ç³»å‚è€ƒï¼šèµµç‰æ™–ã€Šæ·±ç©ºæ¢æµ‹ä¸­çš„è½¨é“è®¾è®¡å’Œè½¨é“åŠ›å­¦ã€‹3. å†æ³•3.1. å„’ç•¥å†ï¼ˆJulian calendarï¼‰å„’ç•¥å†ï¼ˆJulian calendarï¼‰æ˜¯ç”±ç½—é©¬å…±å’Œå›½ç‹¬è£å®˜å„’ç•¥Â·å‡¯æ’’é‡‡çº³åŸƒåŠäºšå†å±±å¤§çš„æ•°å­¦å®¶å…¼å¤©æ–‡å­¦å®¶ç´¢è¥¿ç´å°¼çš„è®¡ç®—åï¼Œäºå…¬å…ƒå‰45å¹´1æœˆ1æ—¥èµ·æ‰§è¡Œçš„å–ä»£æ—§ç½—é©¬å†æ³•çš„ä¸€ç§å†æ³•ã€‚å„’ç•¥å†ä¸­ï¼Œä¸€å¹´è¢«åˆ’åˆ†ä¸º12ä¸ªæœˆï¼Œå¤§å°æœˆäº¤æ›¿ï¼›å››å¹´ä¸€é—°ï¼Œå¹³å¹´365æ—¥ï¼Œé—°å¹´366æ—¥ä¸ºåœ¨å½“å¹´äºŒæœˆåº•å¢åŠ ä¸€é—°æ—¥ï¼Œå¹´å¹³å‡é•¿åº¦ä¸º365.25æ—¥ã€‚ç”±äºå®é™…ä½¿ç”¨è¿‡ç¨‹ä¸­ç´¯ç§¯çš„è¯¯å·®éšç€æ—¶é—´è¶Šæ¥è¶Šå¤§ï¼Œ1582å¹´æ•™çš‡æ ¼é‡Œé«˜åˆ©åä¸‰ä¸–é¢å¸ƒã€æ¨è¡Œäº†ä»¥å„’ç•¥å†ä¸ºåŸºç¡€æ”¹å–„è€Œæ¥çš„æ ¼é‡Œå†ï¼Œå³å…¬å†ã€‚3.2. æ ¼é‡Œé«˜åˆ©å†ï¼ˆGregory Calendarï¼‰æ˜¯ç”±æ„å¤§åˆ©åŒ»ç”Ÿå…¼å“²å­¦å®¶ Aloysius Lilius å¯¹å„’ç•¥å†åŠ ä»¥æ”¹é©è€Œåˆ¶æˆçš„ä¸€ç§å†æ³•â€”â€”ã€Šæ ¼é‡Œå†ã€‹ã€‚1582å¹´ï¼Œæ—¶ä»»ç½—é©¬æ•™çš‡çš„æ ¼åˆ—é«˜åˆ©åä¸‰ä¸–äºˆä»¥æ‰¹å‡†é¢è¡Œã€‚æ ¼é‡Œå†å³ä¸ºç°è¡Œçš„å…¬å†ï¼Œæ—¥æœŸåŒ…æ‹¬å¹´ã€æœˆã€æ—¥ã€‚æ ¼é‡Œå† + UTC å³ä¸ºæ—¥å¸¸çš„æ—¥æœŸæ—¶é—´çš„å®šä¹‰ã€‚3.3. å„’ç•¥è®°æ—¥æ³•ï¼ˆJulian Dayï¼‰Julian Dayï¼Œå„’ç•¥è®°æ—¥æ³•æ˜¯åœ¨å„’ç•¥å‘¨æœŸå†…ä»¥è¿ç»­çš„æ—¥æ•°è®¡ç®—æ—¶é—´çš„è®¡æ—¶æ³•ï¼Œæ˜¯ä¸€ç§ä¸ç”¨å¹´æœˆçš„é•¿æœŸè®°æ—¥æ³•ã€‚ç”± Joseph Justus Scaliger å‘æ˜ï¼Œä¸ºäº†å°†æ‰€æœ‰å†å²æ—¥æœŸç”¨ä¸€ä¸ªç³»ç»Ÿè¡¨è¿°ï¼Œå¤©æ–‡å­¦å®¶ç»å¸¸ç”¨JDæ¥èµ‹äºˆæ¯å¤©ä¸€ä¸ªå”¯ä¸€çš„æ•°å­—ï¼Œæ–¹ä¾¿è¿½æœ”æ—¥æœŸã€‚  https://en.wikipedia.org/wiki/Julian_day Julian day is the continuous count of days since the beginning of the Julian Period and is used primarily by astronomers, and in software for easily calculating elapsed days between two events (e.g. food production date and sell by date).[1]3.4. å„’ç•¥æ—¥æ•°ï¼ˆJDNï¼‰Julian Day Numberï¼ŒæŒ‡ä»UT1æ—¶æ­£åˆå¼€å§‹çš„ä¸€æ•´å¤©ï¼Œæ˜¯ä¸€ä¸ªæ•´æ•°ã€‚  https://en.wikipedia.org/wiki/Julian_day The Julian Day Number (JDN) is the integer assigned to a whole solar day in the Julian day count starting from noon Universal time, with Julian day number 0 assigned to the day starting at noon on Monday, January 1, 4713 BC, proleptic Julian calendar (November 24, 4714 BC, in the proleptic Gregorian calendar),[2][3][4] a date at which three multi-year cycles started (which are: Indiction, Solar, and Lunar cycles) and which preceded any dates in recorded history.[5] For example, the Julian day number for the day starting at 12:00 UT on January 1, 2000, was 2 451 545.[6]JDN0 æŒ‡å®šä¸ºï¼š  æ ¼é‡Œå†4714BCçš„11æœˆ24æ—¥UT1æ—¶12:00:00å¼€å§‹çš„24å°æ—¶æˆ–  å„’ç•¥å†4713BCçš„1æœˆ1æ—¥UT1æ—¶12:00:00å¼€å§‹çš„24å°æ—¶ã€‚ä¾‹å¦‚ï¼Œæ ¼é‡Œå†2000å¹´1æœˆ1æ—¥UT1æ—¶12:00:00å¼€å§‹çš„JDNæ˜¯2451545ã€‚3.5. å„’ç•¥æ—¥ï¼ˆJDï¼‰Julian Dateï¼ŒJD ç­‰äº JDN åŠ ä¸Šä» UT1 æ—¶ 12 æ—¶èµ·çš„å°æ•°æ—¥éƒ¨åˆ†ã€‚2013å¹´1æœˆ1æ—¥UT1æ—¶00:30:00.000ï¼ŒJD = 2456293.5208332020å¹´3æœˆ30æ—¥UTCæ—¶01:35:00.000ï¼ŒJD = 2458937.62847= 2020å¹´3æœˆ30æ—¥UT1æ—¶01:35:00.100å†å²ä¸Šï¼Œå„’ç•¥æ—¥åŸºäº $\\rm GMT$ æ¥è®°å½•ï¼Œè‡ª1997æ¥ï¼ŒIAUå»ºè®®ä»¥ $\\rm TT$ ä¸ºå•ä½è®°å½•JDã€‚Seidelmann æŒ‡å‡ºå„’ç•¥æ—¥æœŸå¯ä»¥ä¸å›½é™…åŸå­æ—¶ï¼ˆ$\\rm TAI$ï¼‰ã€åœ°çƒæ—¶é—´ï¼ˆ$\\rm TT$ï¼‰ã€åè°ƒè´¨å¿ƒæ—¶é—´ï¼ˆ$\\rm TCB$ï¼‰ã€åè°ƒä¸–ç•Œæ—¶ï¼ˆ$\\rm UTC$ï¼‰ä¸€èµ·ä½¿ç”¨ï¼Œå½“å·®å¼‚æ˜¾è‘—æ—¶ï¼Œåº”æŒ‡ç¤ºåˆ»åº¦ã€‚é€šè¿‡å°†ä¸­åˆåçš„å°æ—¶ã€åˆ†é’Ÿå’Œç§’æ•°è½¬æ¢ä¸ºç­‰æ•ˆçš„å°æ•°éƒ¨åˆ†ï¼Œå¯ä»¥æ‰¾åˆ°ä¸€å¤©ä¸­çš„å°æ•°éƒ¨åˆ†ã€‚  https://en.wikipedia.org/wiki/Julian_day The Julian date (JD) of any instant is the Julian day number plus the fraction of a day since the preceding noon in Universal Time. Julian dates are expressed as a Julian day number with a decimal fraction added.[7] For example, the Julian Date for 00:30:00.0 UT January 1, 2013, is 2 456 293.520 833.[8]Current value is as of 01:35, Monday, March 30, 2020 (UTC)  Historically, Julian dates were recorded relative to Greenwich Mean Time (GMT) (later, Ephemeris Time), but since 1997 the International Astronomical Union has recommended that Julian dates be specified in Terrestrial Time.[12] Seidelmann indicates that Julian dates may be used with International Atomic Time (TAI), Terrestrial Time (TT), Barycentric Coordinate Time ( $\\rm TCB$ ), or Coordinated Universal Time (UTC) and that the scale should be indicated when the difference is significant.[13] The fraction of the day is found by converting the number of hours, minutes, and seconds after noon into the equivalent decimal fraction. Time intervals calculated from differences of Julian Dates specified in non-uniform time scales, such as UTC, may need to be corrected for changes in time scales (e.g. leap seconds).[7]3.6. ç®€åŒ–çš„å„’ç•¥æ—¥ç”±äºå„’ç•¥æ—¥çš„æ•´æ•°éƒ¨åˆ†è¿‡é•¿ï¼Œä¸ºäº†ä¾¿äºä½¿ç”¨ï¼Œ1957å¹´å²å¯†æ¾å¤©ä½“ç‰©ç†å¤©æ–‡å°ï¼Œå°†å„’ç•¥æ—¥è¿›è¡Œäº†ç®€åŒ–ï¼Œå¹¶å°†å…¶å‘½åä¸ºç®€åŒ–å„’ç•¥æ—¥ï¼Œå…¶å®šä¹‰ä¸ºï¼šMJD=JD-2400000.5ã€‚JD2400000æ˜¯1858å¹´11æœˆ16æ—¥ä¸­åˆ12æ—¶ï¼Œå› ä¸ºJDä»ä¸­åˆå¼€å§‹è®¡ç®—ï¼Œæ‰€ä»¥ç®€åŒ–å„’ç•¥æ—¥çš„å®šä¹‰ä¸­å¼•å…¥åç§»é‡0.5ï¼Œè¿™æ„å‘³ç€MJD0ç›¸å½“äº1858å¹´11æœˆ17æ—¥0æ—¶ã€‚æ¯ä¸€ä¸ªç®€åŒ–å„’ç•¥æ—¥éƒ½åœ¨ä¸–ç•Œæ—¶åˆå¤œå¼€å§‹å’Œç»“æŸã€‚ç®€åŒ–å„’ç•¥æ—¥æœ‰ä¸¤ä¸ªç›®çš„ï¼š1) æ—¥æœŸä»åˆå¤œè€Œä¸æ˜¯ä¸­åˆå¼€å§‹ï¼›2) å„’ç•¥æ—¥çš„æ•´æ•°éƒ¨åˆ†ç”±7ä½æ•°å‡ä¸º5ä½æ•°ï¼ŒèŠ‚çœè®¡ç®—æœºå‚¨å­˜ç©ºé—´ã€‚3.7. æ ‡å‡†å†å…ƒï¼ˆJ2000.0ï¼‰æ ‡å‡†å†å…ƒï¼ˆJ2000.0ï¼‰æ˜¯å¤©æ–‡å­¦ä¸Šä½¿ç”¨çš„å†å…ƒï¼Œå‰ç¼€Jè¡¨ç¤ºæ˜¯ä¸€ä¸ªå„’ç•¥çºªå…ƒã€‚1994å¹´IAUå†³è®®æ˜ç¡®äº†æ–°çš„æ ‡å‡†å†å…ƒä¸º  2000å¹´1æœˆ1æ—¥ TTæ—¶  12:00:00= 2000å¹´1æœˆ1æ—¥ TAIæ—¶ 11:59:27.816= 2000å¹´1æœˆ1æ—¥ UTCæ—¶ 11:58:55.816è®°ä¸º J2000.0ã€‚3.8. ç”±æ ¼é‡Œå†è®¡ç®—å„’ç•¥æ—¥JDé¦–å…ˆæ ¹æ®æ—¥æœŸæ—¶é—´å¾—åˆ°å¹´ $Y$ï¼Œæœˆ $M$ï¼Œæ—¥ $D$ç„¶åè°ƒæ•´ $Y$ å’Œ $M$\\[\\begin{aligned}\\left\\{\\begin{matrix}&amp;M = M+2, Y = Y - 1&amp;\\quad(M&lt;3)\\\\ &amp;M = M, Y = Y&amp;\\quad(M\\geq3)\\end{matrix}\\right.\\end{aligned}\\]æ¢å¥è¯è¯´ï¼Œå¦‚æœæ—¥æœŸåœ¨ 1 æœˆæˆ–è€… 2 æœˆï¼Œåˆ™è¢«çœ‹ä½œæ—¶å‰ä¸€å¹´çš„ 13 æœˆæˆ– 14 æœˆã€‚ç„¶åè®¡ç®—è¾…åŠ©ç³»æ•° $A$ å’Œ $B$\\[\\begin{aligned}A &amp;= floor(Y/100)\\\\B &amp;= 2-A+floor(A/4)\\end{aligned}\\]ç„¶åè®¡ç®— JD\\[JD=floor(365.25\\times (Y+4716))+floor(30.6001\\times(M+1))+D+B-1524.5\\]è®¡æ—¶é—´ä¸ºæ—¶ $H$ï¼Œåˆ† $N$ï¼Œç§’ $S$ï¼Œæ¯«ç§’ $MS$ï¼Œå¾®ç§’ $US$ï¼Œå°†å…¶è½¬æ¢ä¸ºå¤©ä¸ºå•ä½ï¼Œå åŠ åˆ° JD\\[JD = JD + H/24 + N / 1440 + S/86400 + MS / 86400000 + US / 86400000000\\]ç‰¹åˆ«åœ°ï¼ŒJ2000.0 è¢«å®šä¹‰ä¸º2000å¹´1æœˆ1.5æ—¥ï¼ˆTTæ—¶ï¼‰ï¼Œåˆ™J2000.0 çš„å„’ç•¥æ—¥ä¸º\\[JD_{J2000.0} = 2451545.0\\quad TT\\]ç”±äºå„’ç•¥æ—¥JDæ˜¯ä¸€ä¸ªæ•´æ•°éƒ¨åˆ†å’Œå°æ•°éƒ¨åˆ†å‡å¾ˆé•¿çš„doubleï¼ŒæŒ‰ç…§æœ¬èŠ‚ç›´æ¥è®¡ç®—å¾—åˆ°çš„JDï¼Œå…¶å°æ•°éƒ¨åˆ†çš„æœ‰æ•ˆä½æ•°ä¼šè¢«æ•´æ•°éƒ¨åˆ†æŒ¤å è€Œä¸è¶³15ä½ï¼Œè¿™åœ¨å„’ç•¥æ—¥è½¬ä¸ºæ ¼é‡Œå†æ—¥æœŸæ—¶é—´æ—¶ä¼šå‡ºç°ç²¾åº¦æŸå¤±ï¼Œå¯¼è‡´æ—¶é—´ä¸­çš„æ¯«ç§’å’Œå¾®ç§’æ•°æ®ä¸å¯¹ã€‚å› æ­¤ï¼Œä¸å»ºè®®ç›´æ¥é‡‡ç”¨æœ¬èŠ‚çš„è®¡ç®—æ–¹æ³•è®¡ç®—JDï¼Œè€Œæ˜¯é‡‡ç”¨ç±»ä¼¼IAUçš„sofaç¨‹åºåŒ…çš„æ–¹æ³•ï¼Œè®¡ç®—ç®€åŒ–çš„å„’ç•¥æ—¥MJDï¼Œå¹¶åœ¨è®¡ç®—è¿‡ç¨‹ä¸­åˆ†åˆ«è®¡ç®—æ•´æ•°éƒ¨åˆ†å’Œå°æ•°éƒ¨åˆ†ã€‚åŒæ—¶ï¼Œå»ºè®®å°†å„’ç•¥æ—¥çš„å®šä¹‰ï¼Œä»åŸå…ˆçš„ä¸€ä¸ªdoubleå˜ä¸ºä¸€ä¸ªstructï¼ŒstructåŒ…å«ä¸¤ä¸ªdoubleå³æ•´æ•°éƒ¨åˆ†doubleå’Œå°æ•°éƒ¨åˆ†doubleã€‚ç›¸åº”çš„ä¿®æ”¹æ‰€æœ‰ä»¥JDä½œä¸ºå½¢å‚çš„å‡½æ•°ã€‚è‹¥éœ€è¦å®Œæ•´çš„JDï¼Œåˆ™å°†æ•´æ•°éƒ¨åˆ†å’Œå°æ•°éƒ¨åˆ†ç›¸åŠ å³å¯ã€‚3.9. ç”±æ ¼é‡Œå†ç®—ç®€åŒ–çš„å„’ç•¥æ—¥å‚è€ƒ sofa ç¨‹åº iauCal2jd.c ã€‚3.10. è®¡ç®—æ ‡å‡†å†å…ƒèµ·çš„å„’ç•¥æ—¥è®¡ç®—å½“å‰æ—¶åˆ»çš„ JD_Current_UTCå°†å…¶è½¬åŒ–ä¸º TT æ—¶JD_Current_TT = JD_Current_UTC + 64.184 / 86400.0è®¡ç®— J2000.0 æ—¶åˆ»çš„ JD_J2000_TTï¼ˆå› ä¸º J2000.0 æœ¬èº«å°±å®šä¹‰åœ¨TTä¸‹ï¼‰ä½œå·®ï¼Œå¾—åˆ° JD_FromJ2000JD_FromJ2000 = JD_Current_TT â€“ JD_J2000_TT3.11. è®¡ç®—æ ‡å‡†å†å…ƒèµ·çš„å„’ç•¥ä¸–çºªJulianCentry = JDFromJ2000 / 365.25 / 100å…¶ä¸­365.25æ˜¯å„’ç•¥å¹´ã€‚4. å‚è€ƒæ–‡çŒ®æ— ã€‚"
  },
  
  {
    "title": "å¤©æ–‡å­¦åŸºç¡€ï¼ˆJPLæ˜Ÿå†ï¼‰",
    "url": "/posts/astronomy-basic-JPL-ephemeris/",
    "categories": "Academic, Knowledge",
    "tags": "astronomy",
    "date": "2020-10-18 21:49:19 +0800",
    





    
    "snippet": "æœ¬æ–‡ä»‹ç»äº† JPL ï¼ˆç¾å›½å–·æ°”å®éªŒå®¤ï¼‰çš„æ˜Ÿå†ï¼ˆDE405ï¼‰çš„åŸºæœ¬æ¦‚å¿µï¼Œæ•°æ®ç»„ç»‡æ–¹å¼ï¼Œä»¥åŠå…·ä½“çš„è¡Œæ˜Ÿæ•°æ®æŸ¥è¯¢æ–¹æ³•ã€‚  1. JPLæ˜Ÿå†          1.1. æ¦‚å¿µ      1.2. ç‰ˆæœ¬      1.3. ç®—æ³•        2. è¡Œæ˜Ÿä½ç½®è®¡ç®—          2.1. åŸºæœ¬æ¦‚å¿µ      2.2. DE405çš„ç»“æ„      2.3. DE405çš„è®¡ç®—      2.4. åœ°çƒå¤ª...",
    "content": "æœ¬æ–‡ä»‹ç»äº† JPL ï¼ˆç¾å›½å–·æ°”å®éªŒå®¤ï¼‰çš„æ˜Ÿå†ï¼ˆDE405ï¼‰çš„åŸºæœ¬æ¦‚å¿µï¼Œæ•°æ®ç»„ç»‡æ–¹å¼ï¼Œä»¥åŠå…·ä½“çš„è¡Œæ˜Ÿæ•°æ®æŸ¥è¯¢æ–¹æ³•ã€‚  1. JPLæ˜Ÿå†          1.1. æ¦‚å¿µ      1.2. ç‰ˆæœ¬      1.3. ç®—æ³•        2. è¡Œæ˜Ÿä½ç½®è®¡ç®—          2.1. åŸºæœ¬æ¦‚å¿µ      2.2. DE405çš„ç»“æ„      2.3. DE405çš„è®¡ç®—      2.4. åœ°çƒå¤ªé˜³çŸ¢é‡è®¡ç®—        3. å‚è€ƒæ–‡çŒ®1. JPLæ˜Ÿå†1.1. æ¦‚å¿µJPL planetary ephemerides are generally created to support spacecraft missions to the planets. Selected ephemerides are recommended for more general use.JPLæ˜Ÿå†è¡¨ç»™å‡ºäº†å¤ªé˜³ã€æœˆçƒå’Œä¹å¤§è¡Œæ˜Ÿè¿‡å»å’Œå°†æ¥çš„ä½ç½®ä¿¡æ¯ï¼Œå¹¶ä¸”æ˜¯å¼€æ”¾å¯ä½¿ç”¨çš„ã€‚JPLæ˜Ÿå†è¡¨åœ¨20ä¸–çºª60å¹´ä»£ç”±å–·æ°”æ¨è¿›å®éªŒå®¤å»ºç«‹ï¼Œæœ€åˆç”¨ä½œè¡Œæ˜Ÿæ¢æµ‹å¯¼èˆªçš„ç›®çš„ï¼Œéšç€è§‚æµ‹æŠ€æœ¯çš„ä¸æ–­æé«˜ï¼Œæ–°çš„è§‚æµ‹æ•°æ®ä¸æ–­è·å¾—ï¼ŒJPLæ˜Ÿå†è¡¨ä»åœ¨ä¸æ–­ä¿®æ­£å’Œå®Œå–„ã€‚JPLæ˜Ÿå†è¡¨æ˜¯å¯¹æè¿°å¤ªé˜³ç³»åŠ¨åŠ›å­¦ç³»ç»Ÿçš„å¾®åˆ†æ–¹ç¨‹ç»„è¿›è¡Œæ•°å€¼ç§¯åˆ†çš„ç»“æœï¼Œå› æ­¤å®ƒçš„å»ºç«‹åŸºäºä¸¤ä¸ªå‡è®¾ï¼š1.å¾®åˆ†æ–¹ç¨‹ç»„ç²¾ç¡®ä»£è¡¨äº†å·²çŸ¥çš„åŠ¨åŠ›å­¦å®šå¾‹ï¼Œè‡³å°‘åœ¨ç›®å‰è§‚æµ‹ç²¾åº¦ä¸‹æ˜¯å¦‚æ­¤ï¼›2.æ•°å€¼ç§¯åˆ†ç¨‹åºç²¾åº¦è¶³å¤Ÿé«˜ã€‚åœ¨è¿™ä¸¤ä¸ªå‡è®¾çš„å‰æä¸‹ï¼Œå¯ä»¥æ„å»ºä¸€ä¸ªåŠ¨åŠ›å­¦ç³»ç»Ÿï¼Œå®ƒä¸å¤ªé˜³ç³»åŠ¨åŠ›å­¦ç³»ç»Ÿæ˜¯å¦ä¸€è‡´è¿˜éœ€è¦çœ‹åˆå§‹æ¡ä»¶å’Œå‚æ•°æ˜¯å¦ä¸€è‡´ï¼Œåˆå§‹æ¡ä»¶å’Œå‚æ•°é€šè¿‡è§‚æµ‹æ•°æ®æ¥è¿›è¡Œæœ€å°äºŒä¹˜æ‹Ÿå’Œã€‚è§‚æµ‹æ•°æ®åŒ…æ‹¬ï¼šè¡Œæ˜Ÿæ¢æµ‹é£èˆ¹çš„æµ‹è·æ•°æ®ã€é›·è¾¾è¡Œæ˜Ÿæµ‹è·æ•°æ®ã€æœˆçƒæ¿€å…‰æµ‹è·ã€å…‰å­¦è§‚æµ‹çš„æµ‹è§’æ•°æ®å’Œä¸€äº›æœ€æ–°çš„æµ‹é‡æ‰‹æ®µã€‚JPLæ˜Ÿå†è¡¨ä¸ºäº†ç²¾ç¡®çš„è¡¨ç¤ºé•¿æ—¶é—´èŒƒå›´å†…çš„å¤©ä½“ä½ç½®ï¼ŒæŠŠé•¿æ—¶é—´èŒƒå›´ï¼ˆæ•°ç™¾å¹´ï¼‰åˆ†æˆçŸ­çš„æ—¶é—´åŒºé—´ï¼ˆæ•°å¤©ï¼‰ï¼Œå¯¹äºæ¯ä¸ªçŸ­çš„æ—¶é—´åŒºé—´ï¼Œå®ƒæä¾›ä¸€ç»„åˆ‡æ¯”é›ªå¤«æ’å€¼ç³»æ•°ï¼Œè¦è®¡ç®—æŸä¸€æ—¶åˆ»çš„å¤©ä½“ä½ç½®ï¼Œé¦–å…ˆæ‰¾åˆ°è¿™ä¸ªçŸ­çš„æ—¶é—´åŒºé—´ï¼Œå¾—åˆ°åˆ‡æ¯”é›ªå¤«æ’å€¼ç³»æ•°ï¼Œç„¶åæ ¹æ®åˆ‡æ¯”é›ªå¤«æ’å€¼å…¬å¼è®¡ç®—å¤©ä½“ä½ç½®ã€‚1.2. ç‰ˆæœ¬The latest JPL ephemeris with fully consistent treatment of planetary and lunar laser ranging data is DE430 (Folkner et al 2014). The dynamical model for DE430 includes a frictional damping between the fluid core and the elastic mantle. This damping term is not suitable for extrapolation more than several centuries into the past. In order to cover a longer time span, the ephmeris DE431 was integrated without the lunar core/mantle damping term. The positions of the planets for DE431 agree with the positions on DE430 to within one meter over the time covered by DE430. For the Moon DE431 differs from DE430 mainly in the estimated tidal damping term causing a difference in along-track position of the Moon of 20 meters 100 years from the present and growing quadratically for times more thna 100 years from present.1.3. ç®—æ³•The JPL planetary ephemerides are saved as files of Chebyshev polynomials fit to the Cartesian positions and velocities of the planets, Sun, and Moon, typically in 32-day intervals. The positions are integrated in astronomical units (au), but with polynomials stored in units of kilometers. The integration time units are days of barycentric dynamical time (TDB). Prior to DE430, the value of the astronomical unit was estimated from measurements of planetary orbits using the Gaussian gravitational constant k. Starting with DE430, the astronomical units has been fixed to the value 149597870.700 km as adopted by the International Astronomical Union in 2012.ã€Šé«˜å¥. æ—¥æœˆã€è¡Œæ˜Ÿä½ç½®è®¡ç®—ã€‹ï¼šJPL-DE405ç»™å‡ºçš„æ˜¯ç¬æ—¶æ—¥æœˆå’Œè¡Œæ˜Ÿåœ¨ICRSä¸‹çš„ä½ç½®å’Œé€Ÿåº¦http://en.wikipedia.org/wiki/Jet_Propulsion_Laboratory_Development_Ephemeris  DE405 was released in 1998. It added several yearsâ€™ extra data from telescopic, radar, spacecraft, and VLBI observations (of the Galileo spacecraft at Jupiter, in particular). The method of modeling the asteroidsâ€™ perturbations was improved, although the same number of asteroids were modeled. The ephemeris was more accurately oriented onto the ICRF. DE405 covered 1600 to 2200 to full precision.2. è¡Œæ˜Ÿä½ç½®è®¡ç®—2.1. åŸºæœ¬æ¦‚å¿µå·²çŸ¥æŸä¸€ç¬æ—¶æ—¶åˆ»ï¼ˆæ ¼é‡Œå†æ—¥æœŸ+UTCæ—¶åˆ»ï¼‰è½¬æ¢æˆå„’ç•¥æ—¥ï¼ˆå„’ç•¥çºªå…ƒï¼‰è¾“å…¥ JPL-DE405ï¼Œå¾—åˆ° ICRS ï¼ˆBCRSï¼‰ä¸‹çš„å¤ªé˜³ã€æœˆçƒã€å„å¤§è¡Œæ˜Ÿçš„ä½ç½®å’Œé€Ÿåº¦ç„¶åè½¬è‡³ ITRS æˆ– J2000 ä¸‹ã€‚ä¸¤ä¸ªå…³é”®ç‚¹ï¼š  JPLæŸ¥è¡¨è®¡ç®—  ICRSåˆ°ITRSæˆ–J2000çš„åæ ‡å˜æ¢ã€‚2.2. DE405çš„ç»“æ„æ ¹æ®åˆ›å»ºæ—¶é—´ä¸åŒ JPL æ˜Ÿå†è¡¨æœ‰å¤šä¸ªç‰ˆæœ¬ï¼Œè¿™é‡Œé‡‡ç”¨ DE405ï¼Œå®ƒæ˜¯ 1997 å¹´åˆ›å»ºçš„ï¼ŒåŒ…æ‹¬ä» 1599 å¹´åˆ° 2201 å¹´å¤ªé˜³ç³»ä¹å¤§è¡Œæ˜Ÿå’Œæœˆçƒçš„ä½ç½®ã€‚DE405 çš„æ–‡ä»¶åŒ…æ‹¬å¤´æ–‡ä»¶ header.405 å’Œç³»æ•°æ–‡ä»¶ ascp****.405 ï¼Œ**** ä»£è¡¨ç³»æ•°æ–‡ä»¶çš„èµ·å§‹æ—¶é—´ï¼Œæ¯ä¸ªç³»æ•°æ–‡ä»¶åŒ…å« 20 å¹´å¤©ä½“ä½ç½®åˆ‡æ¯”é›ªå¤«æ’å€¼ç³»æ•°ï¼Œä¾‹å¦‚ä» 2000 å¹´åˆ° 2020 å¹´çš„ç³»æ•°åŒ…å«åœ¨æ–‡ä»¶ ascp2000.405 é‡Œã€‚DE405 çš„å¤´æ–‡ä»¶ header.405 åŒ…å«äº† DE405 çš„æ•°æ®ä¿¡æ¯ã€å¤©æ–‡å¸¸æ•°å’Œæ•°æ®ç´¢å¼•ã€‚æ•°æ®ç´¢å¼•æ˜¯ä¸€ä¸ª 3 è¡Œ 13 åˆ—çš„è¡¨ï¼Œæ¯åˆ—æ•°æ®ä»£è¡¨ä¸€ä¸ªå¤©ä½“çš„ä½ç½®æ•°æ®åœ¨æ•°æ®å—å†…çš„ä½ç½®ï¼Œä¾æ¬¡ä¸ºæ°´æ˜Ÿã€é‡‘æ˜Ÿã€åœ°æœˆç³»ç»Ÿã€ç«æ˜Ÿã€æœ¨æ˜Ÿã€åœŸæ˜Ÿã€å¤©ç‹æ˜Ÿã€æµ·ç‹æ˜Ÿã€å†¥ç‹æ˜Ÿã€æœˆçƒã€å¤ªé˜³ï¼Œç¬¬12åˆ—æ•°æ®ä»£è¡¨ç« åŠ¨è§’ï¼ˆnutationsï¼‰ï¼ŒåŒ…å«ä¸¤ä¸ªè§’åº¦ï¼šé»„ç»ç« åŠ¨ $\\Psi$ å’Œäº¤è§’ç« åŠ¨ $\\epsilon$ ï¼Œç¬¬13åˆ—æ•°æ®ä»£è¡¨å²å·®å‚æ•°ï¼ŒåŒ…å«ä¸‰ä¸ªæ¬§æ‹‰è§’ï¼š$\\zeta, z, \\theta$ ã€‚æ¯åˆ—çš„ç¬¬ä¸€è¡ŒæŒ‡ç¤ºè¯¥å¤©ä½“æ•°æ®åœ¨æ•°æ®å—çš„èµ·å§‹ä½ç½®ï¼Œç¬¬äºŒè¡Œè¡¨ç¤ºåˆ‡æ¯”é›ªå¤«å¤šé¡¹å¼çš„é˜¶æ•°ï¼Œç¬¬ä¸‰è¡Œè¡¨ç¤ºè¯¥å¤©ä½“çš„æ•°æ®è¢«åˆ’åˆ†æˆå‡ ä¸ªå­åŒºé—´ã€‚ä¸‹è¡¨å±•ç¤ºçš„ DE421 ä¸ DE405 çš„æ•°æ®ç»“æ„ç›¸åŒï¼Œæœ€åä¸€åˆ—æ˜¯æ•°æ®çš„ç»´åº¦ï¼ˆ 3 è¡¨ç¤ºä¸‰è½´ï¼‰ã€‚ä¾‹å¦‚æ°´æ˜Ÿçš„æ•°æ®ç´¢å¼•ä¸º3ã€14ã€4ï¼Œå…¶ä¸­ï¼š  æ•°å­— 3 è¡¨ç¤ºæ°´æ˜Ÿçš„æ•°æ®ä»æ•°æ®å—å†…ç¬¬ 3 ä¸ªæ•°æ®å¼€å§‹ï¼Œ  æ•°å­— 14 ä¸ºåˆ‡æ¯”é›ªå¤«å¤šé¡¹å¼é˜¶æ•°ï¼Œå³æ¯è½´ä½ç½®ç”¨ 14 ä¸ªåˆ‡æ¯”é›ªå¤«ç³»æ•°è¡¨ç¤ºï¼Œå…±æœ‰ $x$ã€$y$ã€$z$ ä¸‰è½´çš„ç³»æ•°ï¼Œ  æ•°å­— 4 ä¸ºåˆ’åˆ†çš„å­åŒºé—´ä¸ªæ•°ï¼Œç”±äºæ˜Ÿä½“è¿åŠ¨å‘¨æœŸä¸åŒï¼Œåˆ’åˆ†çš„å­åŒºé—´ä¸ªæ•°ä¹Ÿä¸ä¸€æ ·ï¼Œå‘¨æœŸè¾ƒçŸ­ï¼Œè¿åŠ¨ä¸è§„åˆ™çš„æ˜Ÿä½“å­åŒºé—´ä¸ªæ•°è¾ƒå¤šï¼ˆå…¶ä¸­æœˆçƒæœ€å¤šä¸º8ä¸ªå­åŒºé—´ï¼‰ï¼ŒåŒæ ·çš„æ—¶é—´å†…è¡¨ç¤ºä½ç½®çš„æ•°æ®é‡ä¹Ÿå¤§æ°´æ˜Ÿåœ¨ 32 å¤©å†…è¡¨ç¤ºä½ç½®çš„æ•°æ®ä¸ªæ•°ä¸º $14\\times 4\\times 3=168$ ä¸ªï¼Œç­‰å¼ä¸­çš„ 3 ä»£è¡¨ä¸‰ä¸ªè½´ã€‚ç³»æ•°æ–‡ä»¶ ascp2000.405 åˆ™ç”±è‹¥å¹²ä¸ªæ•°æ®å—ç»„æˆï¼Œæ¯ä¸ªæ•°æ®å—ä¸º 32 å¤©çš„æ•°æ®ã€‚DE405 çš„æ•°æ®ä¿¡æ¯åŒ…æ‹¬èµ·å§‹æ—¶é—´ã€ç»“æŸæ—¶é—´ã€æ•°æ®å—çš„ä¸ªæ•°ã€æ¯ä¸ªæ•°æ®å—çš„æ•°æ®ä¸ªæ•°ã€æ•°æ®å—çš„æ—¶é—´é•¿åº¦ï¼›å¤©æ–‡å¸¸æ•°åŒ…æ‹¬å…‰é€Ÿã€å¤©æ–‡å•ä½ã€åœ°æœˆè´¨é‡æ¯”ç­‰ï¼›æ•°æ®ç´¢å¼•ç”¨æ¥æŒ‡ç¤ºæŸä¸€å¤©ä½“çš„æ•°æ®åœ¨æ•°æ®å—å†…çš„ä½ç½®ã€‚ç³»æ•°æ–‡ä»¶ ascp2000.405 ç”± 229 ä¸ªæ•°æ®å—ç»„æˆï¼Œæ¯ä¸ªæ•°æ®å—ä»£è¡¨ 32 å¤©ï¼ŒåŒ…å« 1018 ä¸ªæ•°æ®ã€‚æ¯ä¸ªæ•°æ®å—ç¬¬ä¸€è¡Œæ˜¯æ ‡å·å’Œæ•°æ®ä¸ªæ•°ï¼Œä»ç¬¬äºŒè¡Œå¼€å§‹ï¼Œæ¯ä¸‰ä¸ªæ•°æ®ä¸€è¡Œï¼Œç¬¬ä¸€ä¸ªæ•°æ®æ˜¯æ•°æ®å—èµ·å§‹æ—¶é—´ï¼Œç¬¬äºŒä¸ªæ•°æ®æ˜¯æ•°æ®å—ç»ˆæ­¢æ—¶é—´ï¼Œç„¶åä¾æ¬¡æ˜¯æ°´æ˜Ÿã€é‡‘æ˜Ÿç­‰çš„ä½ç½®æ•°æ®å’Œç« åŠ¨ã€å²å·®æ•°æ®ã€‚ä¸€ä¸ªå®Œæ•´çš„DEæ˜Ÿå†è¡¨ç»“æ„å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚æŸä¸ªæ•°æ®å—å†…çš„æ•°æ®å¦‚ä¸‹è¡¨æ‰€ç¤ºã€‚æŸä¸ªæ•°æ®å—å†…æ°´æ˜Ÿå­å—çš„æ—¶é—´è·¨åº¦å¦‚ä¸‹è¡¨æ‰€ç¤ºã€‚æŸæ•°æ®å—å†…æ°´æ˜Ÿå­å—çš„å„ä¸ªæ•°æ®çš„å«ä¹‰å¦‚ä¸‹è¡¨æ‰€ç¤ºã€‚2.3. DE405çš„è®¡ç®—JPL æ˜Ÿå†é‡‡ç”¨å„’ç•¥æ—¥å½¢å¼çš„ TDB æ—¶åˆ»ä½œä¸ºæ’å€¼æ—¶åˆ»ï¼ŒåŒç²¾åº¦æ•°ï¼Œå¯ç”¨ TT ä»£æ›¿ï¼Œç²¾åº¦æŸå¤±å¯å¿½ç•¥ã€‚JPL æ˜Ÿå†é‡‡ç”¨ ICRS å‚è€ƒç³»ï¼ŸDE405é‡‡ç”¨çš„åæ ‡ç³»æ˜¯ä»¥å¤ªé˜³ç³»è´¨å¿ƒä¸ºåŸç‚¹ï¼ŒJ2000åœ°çƒå¹³èµ¤é“é¢ä¸º $xy$ å¹³é¢ï¼Œ J2000 å¹³æ˜¥åˆ†ç‚¹æ–¹å‘ä¸º $x$ æ–¹å‘çš„ç›´è§’åæ ‡ç³»ã€‚æ’å€¼å¾—åˆ°çš„ä½ç½®åæ ‡æ˜¯åœ¨è¿™ä¸ªåæ ‡ç³»ä¸‹çš„å€¼ï¼ˆé™¤æœˆçƒå¤–ï¼Œæœˆçƒåæ ‡ä»¥åœ°å¿ƒä¸ºåŸç‚¹ï¼‰ã€‚è¦å¾—åˆ°å…¶å®ƒåæ ‡ç³»ä¸‹å¤©ä½“ä½ç½®çš„è¡¨ç¤ºï¼Œéœ€è¦è¿›è¡Œåæ ‡çš„å¹³ç§»å’Œæ—‹è½¬å˜åŒ–ï¼Œåœ¨è½¨é“åŠ¨åŠ›å­¦ä¸­ä½¿ç”¨çš„æƒ¯æ€§åæ ‡ç³»ä¸€èˆ¬ä»¥åœ°çƒè´¨å¿ƒä¸ºåŸç‚¹ï¼ŒJ2000 åœ°çƒå¹³èµ¤é“ä¸º $xy$ é¢å’Œå¹³æ˜¥åˆ†ç‚¹æ–¹å‘ä¸º $x$ æ–¹å‘ï¼Œä» DE405 çš„åæ ‡è½¬æ¢åˆ°åœ°å¿ƒæƒ¯æ€§åæ ‡ç³»ï¼Œåªéœ€è¦è¿›è¡Œåæ ‡å¹³ç§»ã€‚DE405çš„æ—¶é—´å•ä½ä¸ºæ—¥ï¼Œ$1 day = 86400 s(SI)$ï¼Œè·ç¦»å•ä½ä¸º kmï¼Œé€Ÿåº¦å•ä½ä¸º km/dayã€‚2.4. åœ°çƒå¤ªé˜³çŸ¢é‡è®¡ç®—ç”±äº JPL æ˜Ÿå†åªç»™å‡ºäº†åœ°æœˆç³»ç»Ÿçš„åæ ‡å’Œæœˆçƒçš„åæ ‡ï¼Œéœ€è¦é€šè¿‡å‡ ä½•æ–¹å¼ç®—å‡ºåœ°çƒçš„ä½ç½®åæ ‡ã€‚ç¥­å‡ºä¸å¿ç›´è§†çš„è‰å›¾ã€‚å¦‚å›¾æ‰€ç¤ºï¼Œå‡è®¾ $x$ ä¸ºåœ°çƒè´¨å¿ƒæŒ‡å‘åœ°æœˆç³»è´¨å¿ƒï¼ˆåœ°æœˆç³»ç»Ÿè´¨å¿ƒï¼‰çš„çŸ¢é‡ï¼Œ$m_e,m_m$ åˆ†åˆ«ä¸ºåœ°çƒå’Œæœˆçƒè´¨é‡ï¼Œ$P_m$ ä¸ºä»¥åœ°çƒä¸­å¿ƒä¸ºåŸç‚¹çš„æœˆçƒåæ ‡ï¼ˆæ˜Ÿå†æŸ¥è¯¢å¯å¾—ï¼‰ï¼Œé‚£ä¹ˆæœ‰\\(x=\\frac{m_m}{m_m+m_e}P_m=\\frac{1}{1+\\frac{m_e}{m_m}}P_m\\)å…¶ä¸­ï¼Œ$m_e/m_m=0.813005600000000044\\times 10^2$ æ˜¯åœ°æœˆè´¨é‡æ¯”ã€‚é‚£ä¹ˆï¼Œåœ°çƒçŸ¢é‡ $P_e=P_{em}-x$ï¼Œä»¥åœ°çƒä¸ºä¸­å¿ƒçš„å¤ªé˜³çŸ¢é‡ $SunVec=x+P_s-P_{em}$ã€‚å…¶ä¸­ï¼Œ$P_s$ ä¸ºæ˜Ÿå†æŸ¥è¯¢å¾—åˆ°çš„å¤ªé˜³ä½ç½®çŸ¢é‡ã€‚3. å‚è€ƒæ–‡çŒ®[1] é«˜å¥. ã€Šæ—¥æœˆã€è¡Œæ˜Ÿä½ç½®è®¡ç®—ã€‹.[2] Wikipedia. JPL Ephemeris."
  },
  
  {
    "title": "æ·±åº¦å­¦ä¹ åŸºç¡€ï¼ˆLSTMï¼‰",
    "url": "/posts/deep-learning-LSTM/",
    "categories": "Academic, Knowledge",
    "tags": "deep learning",
    "date": "2020-10-04 10:39:19 +0800",
    





    
    "snippet": "æœ¬æ–‡ä»‹ç»äº† LSTM ï¼ˆé•¿çŸ­æ—¶è®°å¿†ç½‘ç»œï¼‰çš„åŸºæœ¬æ¦‚å¿µï¼Œä»¥åŠæ­£/åå‘ä¼ æ’­çš„æ¨å¯¼è¿‡ç¨‹ï¼Œç„¶ååˆ†æäº† LSTM å¦‚ä½•å…‹æœ RNN çš„æ¢¯åº¦æ¶ˆå¤±é—®é¢˜ï¼Œæœ€åä»‹ç»äº† PyTorch çš„ LSTM æ¨¡å—çš„å®ç°ã€‚  1. LSTM          1.1. æ¦‚å¿µ      1.2. æ¨¡å‹      1.3. å‰å‘ä¼ æ’­      1.4. å¦‚ä½•è§£å†³æ¢¯åº¦æ¶ˆå¤±      1.5. å¦‚ä½•è§£å†³æ¢¯åº¦çˆ†ç‚¸        2....",
    "content": "æœ¬æ–‡ä»‹ç»äº† LSTM ï¼ˆé•¿çŸ­æ—¶è®°å¿†ç½‘ç»œï¼‰çš„åŸºæœ¬æ¦‚å¿µï¼Œä»¥åŠæ­£/åå‘ä¼ æ’­çš„æ¨å¯¼è¿‡ç¨‹ï¼Œç„¶ååˆ†æäº† LSTM å¦‚ä½•å…‹æœ RNN çš„æ¢¯åº¦æ¶ˆå¤±é—®é¢˜ï¼Œæœ€åä»‹ç»äº† PyTorch çš„ LSTM æ¨¡å—çš„å®ç°ã€‚  1. LSTM          1.1. æ¦‚å¿µ      1.2. æ¨¡å‹      1.3. å‰å‘ä¼ æ’­      1.4. å¦‚ä½•è§£å†³æ¢¯åº¦æ¶ˆå¤±      1.5. å¦‚ä½•è§£å†³æ¢¯åº¦çˆ†ç‚¸        2. å®é™…æ¡ˆä¾‹          2.1. LSTM çš„ PyTorch ç±»      2.2. LSTM å®ç° MNIST è¯†åˆ«        3. å¸¸è§é”™è¯¯          3.1. CUDNN_STATUS_BAD_PARAM        4. å‚è€ƒæ–‡çŒ®1. LSTM1.1. æ¦‚å¿µé•¿çŸ­æœŸè®°å¿†ï¼ˆLong short-term memory, LSTMï¼‰æ˜¯ä¸€ç§ç‰¹æ®Šçš„RNNï¼ˆGers et al.,2000; Hochreiter et al., 1997ï¼‰ï¼Œä¸»è¦æ˜¯ä¸ºäº†è§£å†³é•¿åºåˆ—è®­ç»ƒè¿‡ç¨‹ä¸­çš„æ¢¯åº¦æ¶ˆå¤±å’Œæ¢¯åº¦çˆ†ç‚¸é—®é¢˜ã€‚ç®€å•æ¥è¯´ï¼Œå°±æ˜¯ç›¸æ¯”æ™®é€šçš„RNNï¼ŒLSTMèƒ½å¤Ÿåœ¨æ›´é•¿çš„åºåˆ—ä¸­æœ‰æ›´å¥½çš„è¡¨ç°ã€‚LSTM ä¸ RNN çš„ä¸»è¦è¾“å…¥è¾“å‡ºåŒºåˆ«å¦‚ä¸‹å›¾æ‰€ç¤º1.2. æ¨¡å‹LSTM ç½‘ç»œçš„å¾ªç¯å•å…ƒç»“æ„å¦‚ä¸‹å›¾æ‰€ç¤ºå…¶ä¸­ï¼ŒLSTM å¼•å…¥ä¸‰ä¸ªé—¨æ¥æ§åˆ¶ä¿¡æ¯çš„ä¼ é€’ï¼Œåˆ†åˆ«ä¸ºé—å¿˜é—¨ $\\boldsymbol{f}_t$ã€è¾“å…¥é—¨ $\\boldsymbol{i}_t$ã€è¾“å‡ºé—¨ $\\boldsymbol{o}_t$ã€‚ä¸‰ä¸ªé—¨çš„ä½œç”¨æ˜¯ï¼š  é—å¿˜é—¨ $\\boldsymbol{f}t$ æ§åˆ¶ä¸Šä¸€ä¸ªæ—¶åˆ»çš„å†…éƒ¨çŠ¶æ€ $\\boldsymbol{c}{t-1}$ éœ€è¦é—å¿˜å¤šå°‘ä¿¡æ¯ï¼›  è¾“å…¥é—¨ $\\boldsymbol{i}_t$ æ§åˆ¶å½“å‰æ—¶åˆ»çš„å€™é€‰çŠ¶æ€ $\\boldsymbol{c}_t$ æœ‰å¤šå°‘ä¿¡æ¯éœ€è¦ä¿å­˜ï¼›  è¾“å‡ºé—¨ $\\boldsymbol{o}_t$ æ§åˆ¶å½“å‰æ—¶åˆ»çš„å†…éƒ¨çŠ¶æ€ $\\boldsymbol{c}_t$ æœ‰å¤šå°‘ä¿¡æ¯éœ€è¦è¾“å‡ºç»™å¤–éƒ¨çŠ¶æ€ $\\boldsymbol{h}_t$ã€‚1.3. å‰å‘ä¼ æ’­ä¸‰ä¸ªé—¨çš„è®¡ç®—æ–¹å¼ä¸ºï¼š\\[\\begin{aligned}\\boldsymbol{f}_t &amp;= \\sigma(\\boldsymbol W_f \\boldsymbol{h}_{t-1} + \\boldsymbol{U}_f \\boldsymbol{x}_t + \\boldsymbol{b}_f)=\\sigma([\\boldsymbol W_f, \\boldsymbol{U}_f]\\cdot[\\boldsymbol{h}_{t-1}, \\boldsymbol{x}_t]^T + \\boldsymbol{b}_f)\\\\\\boldsymbol{i}_t &amp;= \\sigma(\\boldsymbol W_i \\boldsymbol{h}_{t-1} + \\boldsymbol{U}_i \\boldsymbol{x}_t + \\boldsymbol{b}_i)=\\sigma([\\boldsymbol W_i, \\boldsymbol{U}_i]\\cdot[\\boldsymbol{h}_{t-1}, \\boldsymbol{x}_t]^T + \\boldsymbol{b}_f)\\\\\\boldsymbol{o}_t &amp;= \\sigma(\\boldsymbol W_o \\boldsymbol{h}_{t-1} + \\boldsymbol{U}_o \\boldsymbol{x}_t + \\boldsymbol{b}_o)=\\sigma([\\boldsymbol W_o, \\boldsymbol{U}_o]\\cdot[\\boldsymbol{h}_{t-1}, \\boldsymbol{x}_t]^T + \\boldsymbol{b}_f)\\\\\\end{aligned}\\]å…¶ä¸­ï¼Œ$\\sigma$ ä¸º $sigmoid$ æ¿€æ´»å‡½æ•°ï¼Œè¾“å‡ºåŒºé—´ä¸º $[0,1]$ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒLSTM ç½‘ç»œä¸­çš„â€œé—¨â€æ˜¯ä¸€ç§â€œè½¯â€é—¨ï¼Œå–å€¼åœ¨ $[0,1]$ ä¹‹é—´ï¼Œè¡¨ç¤ºä»¥ä¸€å®šçš„æ¯”ä¾‹å…è®¸ä¿¡æ¯é€šè¿‡ã€‚æ³¨æ„åˆ°ï¼Œç­‰å¼å³è¾¹åŒ…å«ä¸€ä¸ªå¯¹ $\\boldsymbol{h}_{t-1}$ å’Œ $\\boldsymbol{x}_t$ å‘é‡æ‹¼æ¥çš„æ“ä½œï¼Œç›¸åº”çš„å‚æ•°ä¹Ÿå› æ­¤è¿›è¡Œäº†æ‹¼æ¥ã€‚ç›¸æ¯” RNNï¼ŒLSTM å¼•å…¥äº†ä¸€ä¸ªæ–°çš„çŠ¶æ€ï¼Œç§°ä¸ºç»†èƒçŠ¶æ€ï¼ˆcell stateï¼‰ï¼Œè¡¨ç¤ºä¸º $\\boldsymbol{c}_t$ï¼Œä¸“é—¨è¿›è¡Œç°è¡Œçš„å¾ªç¯ä¿¡æ¯ä¼ é€’ï¼ŒåŒæ—¶è¾“å‡ºï¼ˆéçº¿æ€§åœ°ï¼‰è¾“å‡ºä¿¡æ¯ç»™éšå±‚çŠ¶æ€ $\\boldsymbol{h}_t\\in \\mathbb{R}^D$ã€‚è®¡ç®—å…¬å¼å¦‚ä¸‹\\[\\begin{aligned}\\boldsymbol{c}_t &amp;= \\tanh(\\boldsymbol W_c \\boldsymbol{h}_{t-1} + \\boldsymbol{U}_c \\boldsymbol{x}_t + \\boldsymbol{b}_c)=\\tanh([\\boldsymbol W_c, \\boldsymbol{U}_c]\\cdot[\\boldsymbol{h}_{t-1}, \\boldsymbol{x}_t]^T + \\boldsymbol{b}_f)\\\\\\boldsymbol{c}_t &amp;= \\boldsymbol{f}_t \\odot \\boldsymbol{c}_{t-1} + \\boldsymbol{i}_t \\odot \\boldsymbol{c}_t\\\\\\boldsymbol{h}_t &amp;= \\boldsymbol{o}_t \\odot \\tanh(\\boldsymbol{c}_t)\\end{aligned}\\]å…¶ä¸­ï¼Œ  $\\boldsymbol{c}_t\\in\\mathbb{R}^D$ æ˜¯é€šè¿‡éçº¿æ€§å‡½æ•°ï¼ˆ$\\tanh$ï¼‰å¾—åˆ°çš„å€™é€‰çŠ¶æ€ï¼Œ  $\\boldsymbol{c}_{t-1}$ æ˜¯ä¸Šä¸€æ—¶åˆ»çš„è®°å¿†å•å…ƒï¼Œ  $\\odot$ æ˜¯å‘é‡çš„å…ƒç´ ä¹˜ç§¯ã€‚åœ¨æ¯ä¸ªæ—¶åˆ»ï¼ŒLSTM ç½‘ç»œçš„ç»†èƒçŠ¶æ€ $\\boldsymbol{c}_t$ è®°å½•äº†æˆªè‡³å½“å‰æ—¶åˆ»çš„å†å²ä¿¡æ¯ã€‚æ ¹æ®ä¸åŒçš„é—¨çŠ¶æ€å–å€¼ï¼Œå¯ä»¥å®ç°ä¸åŒçš„åŠŸèƒ½ã€‚å½“ $\\boldsymbol{f}_t = 0,\\boldsymbol{i}_t = 1$ æ—¶ï¼Œè®°å¿†å•å…ƒå°†å†å²ä¿¡æ¯æ¸…ç©ºï¼Œå¹¶å°†å€™é€‰çŠ¶æ€å‘é‡ $\\boldsymbol{c}_t$ å†™å…¥ï¼Œä½†æ­¤æ—¶è®°å¿†å•å…ƒ $\\boldsymbol{c}_t$ ä¾ç„¶å’Œä¸Šä¸€æ—¶åˆ»çš„å†å²ä¿¡æ¯ç›¸å…³ã€‚å½“$\\boldsymbol{f}_t = 1,\\boldsymbol{i}_t = 0$ æ—¶ï¼Œè®°å¿†å•å…ƒå°†å¤åˆ¶ä¸Šä¸€æ—¶åˆ»çš„å†…å®¹ï¼Œä¸å†™å…¥æ–°çš„ä¿¡æ¯ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒLSTM ä¸­çš„ $\\boldsymbol{c}_t$ å¯¹åº”äºä¼ ç»Ÿ RNN ä¸­çš„ $\\boldsymbol{h}_t$ï¼Œé€šå¸¸æ˜¯ä¸Šä¸€ä¸ªä¼ è¿‡æ¥çš„å†å²çŠ¶æ€ä¹˜ä»¥é—å¿˜é—¨ååŠ ä¸Šä¸€äº›æ–°ä¿¡æ¯å¾—åˆ°ï¼Œå› æ­¤æ›´æ–°æ¯”è¾ƒç¼“æ…¢ã€‚è€Œ LSTM ä¸­çš„ $\\boldsymbol{h}_t$ åˆ™å˜åŒ–å‰§çƒˆçš„å¤šï¼Œåœ¨ä¸åŒçš„æ—¶åˆ»ä¸‹çš„å–å€¼å¾€å¾€åŒºåˆ«å¾ˆå¤§ã€‚å†æ¬¡è¿›è¡Œç»´åº¦åˆ†æï¼Œ$\\boldsymbol{h}_t,\\boldsymbol{c}_t,\\boldsymbol{i}_t,\\boldsymbol{f}_t,\\boldsymbol{o}_t \\in \\mathbb R^D$ ä¸” $\\boldsymbol{b}_f,\\boldsymbol{b}_i,\\boldsymbol{b}_o,\\boldsymbol{b}_c \\in \\mathbb R^D$ï¼Œ$\\boldsymbol{x}_t\\in \\mathbb R^M$ï¼Œé‚£ä¹ˆ $\\boldsymbol W_f,\\boldsymbol W_i,\\boldsymbol W_o,\\boldsymbol W_c \\in \\mathbb R^{D\\times M}$ï¼Œ $\\boldsymbol{U}_f,\\boldsymbol{U}_i,\\boldsymbol{U}_o,\\boldsymbol{U}_c \\in \\mathbb R^{D\\times D}$ã€‚åˆ™ä¸Šé¢æ‰€æœ‰å¼å­å¯ç®€æ´æè¿°ä¸º\\[\\begin{aligned}\\begin{bmatrix} \\boldsymbol{c}_t\\\\  \\boldsymbol{o}_t\\\\ \\boldsymbol{i}_t\\\\ \\boldsymbol{f}_t \\end{bmatrix}=\\begin{bmatrix} \\tanh\\\\  \\sigma\\\\ \\sigma\\\\ \\sigma \\end{bmatrix}\\left( \\boldsymbol W\\begin{bmatrix} \\boldsymbol{h}_{t-1}\\\\  \\boldsymbol{x}_t\\end{bmatrix}+\\boldsymbol b \\right)\\end{aligned}\\]å…¶ä¸­\\[\\begin{aligned}\\boldsymbol W &amp;=\\begin{bmatrix} \\boldsymbol W_c &amp; \\boldsymbol{U}_c\\\\  \\boldsymbol W_o &amp; \\boldsymbol{U}_o\\\\ \\boldsymbol W_i &amp; \\boldsymbol{U}_i\\\\  \\boldsymbol W_f &amp; \\boldsymbol{U}_f\\end{bmatrix} \\in \\mathbb R^{4D\\times (D+M)}\\\\\\boldsymbol b &amp;= \\begin{bmatrix} \\boldsymbol{b}_c\\\\  \\boldsymbol{b}_o\\\\ \\boldsymbol{b}_i\\\\ \\boldsymbol{b}_f \\end{bmatrix}\\in \\mathbb R^{4D}\\end{aligned}\\]å¾ªç¯ç¥ç»ç½‘ç»œä¸­çš„éšçŠ¶æ€ $\\boldsymbol h$ å­˜å‚¨äº†å†å²ä¿¡æ¯ï¼Œå¯ä»¥çœ‹ä½œä¸€ç§è®°å¿†ï¼ˆMemoryï¼‰ã€‚åœ¨ç®€å•å¾ªç¯ç½‘ç»œä¸­ï¼ŒéšçŠ¶æ€æ¯ä¸ªæ—¶åˆ»éƒ½ä¼šè¢«é‡å†™ï¼Œå› æ­¤å¯ä»¥çœ‹ä½œä¸€ç§çŸ­æœŸè®°å¿†ï¼ˆShort-Term Memoryï¼‰ã€‚åœ¨ç¥ç»ç½‘ç»œä¸­ï¼Œé•¿æœŸè®°å¿†ï¼ˆLong-Term Memoryï¼‰å¯ä»¥çœ‹ä½œç½‘ç»œå‚æ•°ï¼Œéšå«äº†ä»è®­ç»ƒæ•°æ®ä¸­å­¦åˆ°çš„ç»éªŒï¼Œå…¶æ›´æ–°å‘¨æœŸè¦è¿œè¿œæ…¢äºçŸ­æœŸè®°å¿†ã€‚è€Œåœ¨ LSTM ç½‘ç»œä¸­ï¼Œè®°å¿†å•å…ƒ $\\boldsymbol c$ å¯ä»¥åœ¨æŸä¸ªæ—¶åˆ»æ•æ‰åˆ°æŸä¸ªå…³é”®ä¿¡æ¯ï¼Œå¹¶æœ‰èƒ½åŠ›å°†æ­¤å…³é”®ä¿¡æ¯ä¿å­˜ä¸€å®šçš„æ—¶é—´é—´éš”ã€‚è®°å¿†å•å…ƒ $\\boldsymbol c$ ä¸­ä¿å­˜ä¿¡æ¯çš„ç”Ÿå‘½å‘¨æœŸè¦é•¿äºçŸ­æœŸè®°å¿† $\\boldsymbol h$ï¼Œä½†åˆè¿œè¿œçŸ­äºé•¿æœŸè®°å¿†ï¼Œé•¿çŸ­æœŸè®°å¿†æ˜¯æŒ‡é•¿çš„â€œçŸ­æœŸè®°å¿†â€ã€‚å› æ­¤ç§°ä¸ºé•¿çŸ­æœŸè®°å¿†ï¼ˆLong Short-Term Memoryï¼‰ã€‚1.4. å¦‚ä½•è§£å†³æ¢¯åº¦æ¶ˆå¤±LSTMå¦‚ä½•æ¥é¿å…æ¢¯åº¦å¼¥æ•£å’Œæ¢¯åº¦çˆ†ç‚¸ï¼ŸLSTM é€šè¿‡å¼•å…¥é—¨æœºåˆ¶ï¼ŒæŠŠçŸ©é˜µä¹˜æ³•å˜æˆäº† element-wise çš„ Hadamard productï¼ˆå“ˆè¾¾ç›ç§¯ï¼Œé€å…ƒç´ ç›¸ä¹˜ï¼‰ã€‚è¿™æ ·åšåï¼Œç»†èƒçŠ¶æ€ $\\boldsymbol{c}_t$ ï¼ˆå¯¹åº”äº RNN ä¸­çš„éšçŠ¶æ€ $\\boldsymbol{h}_t$ï¼‰çš„æ›´æ–°å…¬å¼å˜ä¸º\\[\\boldsymbol{c}_t = \\boldsymbol{f}_t \\odot \\boldsymbol{c}_{t-1} + \\boldsymbol{i}_t \\odot \\tanh(\\boldsymbol W_c \\boldsymbol{h}_{t-1} + \\boldsymbol{U}_c \\boldsymbol{x}_t + \\boldsymbol{b}_c)\\]è¿›ä¸€æ­¥æ¨å¯¼\\[\\begin{aligned}\\frac{\\partial \\boldsymbol L}{\\partial \\boldsymbol{c}_{t-1}} &amp;= \\frac{\\partial L}{\\partial c_t}\\frac{\\partial c_t}{\\partial c_{t-1}} = \\frac{\\partial L}{\\partial c_t} \\odot diag(f_t+\\cdots)\\end{aligned}\\]å…¬å¼é‡Œå…¶ä½™çš„é¡¹ä¸é‡è¦ï¼Œè¿™é‡Œå°±ç”¨çœç•¥å·ä»£æ›¿äº†ã€‚å¯ä»¥çœ‹å‡ºå½“ $f_t=1$ æ—¶ï¼Œå°±ç®—å…¶ä½™é¡¹å¾ˆå°ï¼Œæ¢¯åº¦ä»ç„¶å¯ä»¥å¾ˆå¥½åœ°ä¼ å¯¼åˆ°ä¸Šä¸€ä¸ªæ—¶åˆ»ï¼Œæ­¤æ—¶å³ä½¿å±‚æ•°è¾ƒæ·±ä¹Ÿä¸ä¼šå‘ç”Ÿ Gradient Vanish çš„é—®é¢˜ï¼›å½“ $f_t=0$ æ—¶ï¼Œå³ä¸Šä¸€æ—¶åˆ»çš„ä¿¡å·ä¸å½±å“åˆ°å½“å‰æ—¶åˆ»ï¼Œåˆ™æ­¤é¡¹ä¹Ÿä¼šä¸º0ã€‚$f_t$ åœ¨è¿™é‡Œæ§åˆ¶ç€æ¢¯åº¦ä¼ å¯¼åˆ°ä¸Šä¸€æ—¶åˆ»çš„è¡°å‡ç¨‹åº¦ï¼Œä¸å®ƒ Forget Gate çš„åŠŸèƒ½ä¸€è‡´ã€‚è¿™æ ·çš„æ–¹å¼æœ¬è´¨ä¸Šç±»ä¼¼ Highway Network æˆ–è€… ResNetï¼ˆæ®‹å·®è¿æ¥ï¼‰ï¼Œä½¿å¾—æ¢¯åº¦çš„ä¿¡æ¯å¯ä»¥â€œè´¯ç©¿â€æ—¶é—´çº¿ï¼Œç¼“è§£æ¢¯åº¦æ¶ˆæ•£ã€‚è¿™é‡Œéœ€è¦å¼ºè°ƒçš„æ˜¯ï¼šLSTMä¸æ˜¯è®©æ‰€æœ‰è¿œè·ç¦»çš„æ¢¯åº¦å€¼éƒ½ä¸ä¼šæ¶ˆæ•£ï¼Œè€Œæ˜¯åªè®©å…·æœ‰æ—¶åºå…³é”®ä¿¡æ¯ä½ç½®çš„æ¢¯åº¦å¯ä»¥ä¸€ç›´ä¼ é€’ã€‚å¦ä¸€æ–¹é¢ï¼Œä»…åœ¨ $c_t$ é€šè·¯ä¸Šç¼“è§£äº†æ¢¯åº¦æ¶ˆå¤±é—®é¢˜ï¼Œè€Œåœ¨ $h_t$ é€šè·¯ä¸Šæ¢¯åº¦æ¶ˆå¤±ä¾ç„¶å­˜åœ¨ã€‚1.5. å¦‚ä½•è§£å†³æ¢¯åº¦çˆ†ç‚¸å…³äºæ¢¯åº¦çˆ†ç‚¸é—®é¢˜ï¼š $f_t$ å·²ç»åœ¨ $[0,1]$ èŒƒå›´ä¹‹å†…äº†ã€‚è€Œä¸”æ¢¯åº¦çˆ†ç‚¸çˆ†ç‚¸ä¹Ÿæ˜¯ç›¸å¯¹å®¹æ˜“è§£å†³çš„é—®é¢˜ï¼Œå¯ä»¥ç”¨æ¢¯åº¦è£å‰ª(gradient clipping)æ¥è§£å†³ï¼šåªè¦è®¾å®šé˜ˆå€¼ï¼Œå½“æå‡ºæ¢¯åº¦è¶…è¿‡æ­¤é˜ˆå€¼ï¼Œå°±è¿›è¡Œæˆªå–å³å¯ã€‚å¦ä¸€ç§è§£è¯»å‚è§ [1] ã€‚2. å®é™…æ¡ˆä¾‹2.1. LSTM çš„ PyTorch ç±»å®˜æ–¹æ–‡æ¡£é“¾æ¥åœ¨æ­¤ï¼ˆhttps://pytorch.org/docs/stable/generated/torch.nn.LSTM.html ï¼‰CLASStorch.nn.LSTM(*args, **kwargs)å‚æ•°åˆ—è¡¨å¦‚ä¸‹      input_size â€“ The number of expected features in the input x        hidden_size â€“ The number of features in the hidden state h        num_layers â€“ Number of recurrent layers. E.g., setting num_layers=2 would mean stacking two LSTMs together to form a stacked LSTM, with the second LSTM taking in outputs of the first LSTM and computing the final results. Default: 1        bias â€“ If False, then the layer does not use bias weights b_ih and b_hh. Default: True        batch_first â€“ If True, then the input and output tensors are provided as (batch, seq, feature). Default: False        dropout â€“ If non-zero, introduces a Dropout layer on the outputs of each LSTM layer except the last layer, with dropout probability equal to dropout. Default: 0        bidirectional â€“ If True, becomes a bidirectional LSTM. Default: False  æˆ‘ä»¬å†æ¬¡å°† LSTM çš„å‰å‘ä¼ æ’­åˆ—å†™å¦‚ä¸‹ä¾¿äºæ¯”å¯¹\\[\\begin{aligned}\\boldsymbol{f}_t &amp;= \\sigma(\\boldsymbol W_f \\boldsymbol{h}_{t-1} + \\boldsymbol{U}_f \\boldsymbol{x}_t + \\boldsymbol{b}_f)\\\\\\boldsymbol{i}_t &amp;= \\sigma(\\boldsymbol W_i \\boldsymbol{h}_{t-1} + \\boldsymbol{U}_i \\boldsymbol{x}_t + \\boldsymbol{b}_i)\\\\\\boldsymbol{o}_t &amp;= \\sigma(\\boldsymbol W_o \\boldsymbol{h}_{t-1} + \\boldsymbol{U}_o \\boldsymbol{x}_t + \\boldsymbol{b}_o)\\\\\\boldsymbol{c}_t &amp;= \\tanh(\\boldsymbol W_c \\boldsymbol{h}_{t-1} + \\boldsymbol{U}_c \\boldsymbol{x}_t + \\boldsymbol{b}_c)\\\\\\boldsymbol{c}_t &amp;= \\boldsymbol{f}_t \\odot \\boldsymbol{c}_{t-1} + \\boldsymbol{i}_t \\odot \\boldsymbol{c}_t\\\\\\boldsymbol{h}_t &amp;= \\boldsymbol{o}_t \\odot \\tanh(\\boldsymbol{c}_t)\\end{aligned}\\]å‰é¢æˆ‘ä»¬å·²ç»å‡è®¾ï¼Œ$\\boldsymbol{h}_t,\\boldsymbol{c}_t,\\boldsymbol{i}_t,\\boldsymbol{f}_t,\\boldsymbol{o}_t \\in \\mathbb R^D$ ä¸” $\\boldsymbol{b}_f,\\boldsymbol{b}_i,\\boldsymbol{b}_o,\\boldsymbol{b}_c \\in \\mathbb R^D$ï¼Œ$\\boldsymbol{x}_t\\in \\mathbb R^M$ï¼Œé‚£ä¹ˆ $\\boldsymbol W_f,\\boldsymbol W_i,\\boldsymbol W_o,\\boldsymbol W_c \\in \\mathbb R^{D\\times M}$ï¼Œ $\\boldsymbol{U}_f,\\boldsymbol{U}_i,\\boldsymbol{U}_o,\\boldsymbol{U}_c \\in \\mathbb R^{D\\times D}$ã€‚input_size å°±æ˜¯è¾“å…¥å±‚ç»´åº¦ $M$ï¼Œæ¯”å¦‚æŸä¸ªè¯æˆ–è€…æŸå¼ å›¾çš„ embedding dim ï¼ˆç‰¹å¾ç»´åº¦ï¼‰ã€‚hidden_size å°±æ˜¯éšå±‚ $h_t$ çš„ç»´åº¦ $D$ã€‚num_layers æ˜¯ LSTM å †å çš„å±‚æ•°ã€‚LSTM å¯ä»¥æŒ‰ç…§ä¸‹å›¾çš„å½¢å¼è¿›è¡Œå †å ã€‚batch_first æ˜¯ä¸€ä¸ªå¯é€‰å‚æ•°ï¼ŒæŒ‡å®šæ˜¯å¦å°† batch_size ä½œä¸ºè¾“å…¥è¾“å‡ºå¼ é‡çš„ç¬¬ä¸€ä¸ªç»´åº¦ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™è¾“å…¥å’Œè¾“å…¥çš„ç»´åº¦é¡ºåºä¸ºï¼ˆbatch_sizeï¼Œ seq_lengthï¼Œinput_sizeï¼‰ï¼Œå¦åˆ™ï¼Œè¾“å…¥å’Œè¾“å‡ºçš„é»˜è®¤ç»´åº¦é¡ºåºæ˜¯ï¼ˆseq_length, batch_size, input_sizeï¼‰ã€‚2.2. LSTM å®ç° MNIST è¯†åˆ«æ³¨æ„ï¼Œåæ–‡ä¸­çš„æ‰€æœ‰ä»£ç å‡ä¸ºç‰‡æ®µï¼Œå…¨éƒ¨å‡‘åœ¨ä¸€èµ·æ—¶æ— æ³•ç›´æ¥è¿è¡Œçš„ï¼æ—¨åœ¨è¾…åŠ©è¿›è¡Œç†è§£ã€‚è€ƒè™‘åˆ°ç½‘ç»œæ¯ä¸€æ—¶åˆ»è¾“å…¥çš„æ˜¯ä¸€ä¸ª vectorï¼Œæˆ‘ä»¬å¯ä»¥å‡è®¾è¿™ä¸ª vector å¯¹åº”çš„æ˜¯ å›¾åƒçš„ä¸€è¡Œï¼Œæœ‰å¤šå°‘è¡Œå°±å¯¹åº”å¤šå°‘æ—¶åˆ»ï¼Œé‚£æœ€åä¸€ä¸ªæ—¶åˆ»è¾“å…¥çš„æ˜¯æœ€åä¸€è¡Œã€‚æœ€åè¾“å‡ºçš„ $h_t$ å®é™…ä¸Šå°±æ˜¯è¯¥å›¾åƒå¯¹åº”çš„ç±»åˆ«ã€‚MNIST æ‰‹å†™æ•°å­—å›¾ç‰‡å¤§å°ä¸º 28*28ï¼Œé‚£ä¹ˆå¯ä»¥å°†æ¯å¼ å›¾ç‰‡çœ‹ä½œé•¿ä¸º28çš„åºåˆ—ï¼Œåºåˆ—ä¸­çš„æ¯ä¸ªå…ƒç´ çš„ç‰¹å¾ç»´åº¦æ˜¯28ï¼Œè¿™æ ·å°±å°†å›¾ç‰‡å˜æˆäº†ä¸€ä¸ªåºåˆ—ã€‚é‚£ä¹ˆæœ‰input_size = 28 # image widthsequence_size = 28 # image height (time step)hidden_size = 100 # user definedoutput_size = 10 # 10 classes of number from 0 to 9num_layers = 2 # user definedå…¶ä¸­ hidden_size å’Œ num_layers å‡ç”±ç”¨æˆ·è‡ªå®šä¹‰ã€‚ç„¶åæˆ‘ä»¬å¼€å§‹æ„å»º LSTM ç½‘ç»œçš„ç±»ã€‚class MNIST_LSTM(nn.Module):    def __init__(self, input_size, hidden_size, num_layers, output_dim):        super(MNIST_LSTM,self).__init__()        self.lstm = nn.LSTM(            input_size,            hidden_size,            num_layers,            batch_first=True)        # fully connect        self.fc = nn.Linear(hidden_dim, output_dim)    def forward(self, x):        # x -     [batch_size, sequence_dim, input_dim]        # r_out - [batch_size, sequence_dim, hidden_size]        # h_n -   [layer_dim, batch_size, hidden_size]        # h_c -   [layer_dim, batch_size, hidden_size]        r_out, (h_n, h_c) = self.lstm(x, None)        # out -   [batch_size, output_size]        out = self.fc(r_out[:,-1,:])        return outåœ¨ç½‘ç»œåˆå§‹åŒ–æ—¶ï¼Œæˆ‘ä»¬å¼•å…¥äº†å®šä¹‰çš„ 4 ä¸ªå½¢å‚ input_size, hidden_size, num_layers, output_sizeï¼Œç¡®å®šç½‘ç»œçš„ç»“æ„ä¸­çš„è¾“å…¥ç»´åº¦ï¼Œéšå±‚ç¥ç»å…ƒä¸ªæ•°ï¼Œéšå±‚å±‚æ•°ï¼Œè¾“å‡ºç»´åº¦ã€‚ç„¶åï¼ŒæŒ‰ç…§ä¸Šé¢å®šä¹‰çš„ç»“æ„å®šä¹‰ä¸€ä¸ª torch å®˜æ–¹æä¾›çš„ torch.nn.LSTM å•å…ƒï¼Œå¹¶ä¸”è®¾å®šå…¶ batch_first=Trueï¼Œå³å°†æ•°æ®çš„æ‰¹æ•°æ”¾åˆ°è¾“å…¥è¾“å‡ºå‘é‡çš„ç¬¬ä¸€ä¸ªç»´åº¦ã€‚æœ€åï¼Œå®šä¹‰ä¸€ä¸ªå…¨è¿æ¥å±‚ï¼Œå°†éšå±‚ä¿¡æ¯æ˜ å°„åˆ°è¾“å‡ºç»´åº¦ã€‚åœ¨å®šä¹‰ç½‘ç»œå‰å‘ä¼ æ’­æ—¶ï¼Œé¦–å…ˆç»™ LSTM ä¼ å…¥è¾“å…¥å‘é‡ x å’Œ åˆå§‹éšå±‚å‘é‡ (h_n,h_c)ã€‚æ­¤å¤„ x ç»´åº¦ä¸º [batch_size, sequence_size, input_size]ï¼Œåˆå§‹éšå±‚å‘é‡ä¸º Noneï¼Œå³è¡¨ç¤ºåˆå§‹æ—¶åˆ»éšå±‚å‘é‡å‡ä¸º 0 ã€‚ç»è¿‡å‰å‘ä¼ æ’­ï¼ŒLSTM å•å…ƒçš„è¾“å‡ºä¸º r_out, (h_n, h_c)ã€‚å…¶ä¸­  r_out ä¹Ÿå°±æ˜¯ä¸Šé¢å›¾ä¸­çš„ output ä¿å­˜äº†æœ€åä¸€å±‚ï¼Œæ¯ä¸ª time step çš„è¾“å‡º hï¼Œå¦‚æœæ˜¯åŒå‘ LSTMï¼Œæ¯ä¸ª time step çš„è¾“å‡º h = [hæ­£å‘, hé€†å‘] (åŒä¸€ä¸ª time step çš„æ­£å‘å’Œé€†å‘çš„hè¿æ¥èµ·æ¥)ã€‚          æ‰€ä»¥ r_out æ— éœ€å±‚ç»´åº¦ä¿¡æ¯ï¼Œè€ŒåŒ…å«æ—¶é—´åºåˆ—ä¿¡æ¯ï¼Œå…¶ç»´åº¦ä¸º [batch_size, sequence_size, output_size]ï¼›      å¦‚æœ num_layers=1ï¼Œlstm åªæœ‰ä¸€å±‚ï¼Œåˆ™ r_out ä¸ºæ¯ä¸ª time step çš„è¾“å‡ºã€‚        h_n ä¿å­˜äº†æ¯ä¸€å±‚ï¼Œæœ€åä¸€ä¸ªtime step çš„è¾“å‡º hï¼Œå¦‚æœæ˜¯åŒå‘LSTMï¼Œå•ç‹¬ä¿å­˜å‰å‘å’Œåå‘çš„æœ€åä¸€ä¸ª time step çš„è¾“å‡º hã€‚          æ‰€ä»¥ h_n åŒ…å«å±‚ç»´åº¦ä¿¡æ¯ï¼Œæ— éœ€æ—¶é—´åºåˆ—ä¿¡æ¯ï¼Œå…¶ç»´åº¦ä¸º [layer_size, batch_size, hidden_size]ï¼›æ³¨æ„åˆ° batch_first=True ä¸ä¼šå½±å“åˆ° h_nï¼Œå› æ­¤ç¬¬ä¸€ä¸ªç»´åº¦æ˜¯å±‚ä¸ªæ•°ï¼›      å¦‚æœ num_layers=1ï¼Œlstm åªæœ‰ä¸€å±‚ï¼Œåˆ™ h_n ä¸ºæœ€åä¸€ä¸ª time step çš„è¾“å‡ºã€‚        c_n ä¸ h_n ä¸€è‡´ï¼Œåªæ˜¯å®ƒä¿å­˜çš„æ˜¯ c çš„å€¼ã€‚ç»§ç»­ç»è¿‡å…¨è¿æ¥å±‚ï¼Œè¾“å…¥ r_out è¾“å‡º out ï¼š  r_out[:,-1,:] è¡¨ç¤ºè¯»å– r_out ç¬¬äºŒç»´çš„å€’æ•°ç¬¬ä¸€ä¸ªå…ƒç´ å¯¹åº”çš„å…¶ä½™ç»´åº¦æ•°æ®ã€‚ç”±äº r_out çš„ç¬¬äºŒç»´æ˜¯ sequence_size ä¹Ÿå°±æ˜¯ time stepï¼Œå€’æ•°ç¬¬ä¸€ä¸ªå…ƒç´ å¯¹åº”çš„å…¶ä½™ç»´åº¦æ•°æ®ä¹Ÿå°±æ˜¯æœ€åä¸€ä¸ªæ—¶åˆ»çš„æ•°æ® [batch_size, hidden_size]ï¼›  å½“ layer_size = 1 æ—¶ï¼Œr_out[:,-1,:] = h_n[-1,:,:]ï¼›  ç»è¿‡å…¨è¿æ¥å±‚ï¼Œå¾—åˆ° batch ä¸­æ¯å¼ å›¾ç‰‡çš„æœ€ç»ˆåˆ†ç±»ç»“æœ [batch_size, output_size]ã€‚æœ€åè®¾è®¡è®­ç»ƒå’Œæµ‹è¯•ç¯èŠ‚ã€‚def main():    root = \"./mnist/MNIST/raw/\"    train_mean = 0.1307    train_std = 0.3081    batch_size = 64    test_batch_size = 50    kwargs = {'num_workers': 2, 'pin_memory': True} if use_cuda else {}    transform = transforms.Compose([        transforms.ToTensor(),        transforms.Normalize((train_mean,), (train_std,))        ])    train_loader = torch.utils.data.DataLoader(        DATA(root, train=True, transform=transform),        batch_size=batch_size, shuffle=True, **kwargs)    test_loader = torch.utils.data.DataLoader(        DATA(root, train=False, transform=transform),        batch_size=test_batch_size, shuffle=True, **kwargs)    model = MNIST_LSTM(input_size, hidden_size, layer_num, output_size)    if use_cuda:        model.to(device)    lossfcn = nn.CrossEntropyLoss()    learning_rate = 0.01    optimizer = torch.optim.SGD(model.parameters(), lr=learning_rate)    loss_list = []    accuracy_list = []    iteration_list = []    EPOCHS = 20    iter = 0    for epoch in range(1,EPOCHS+1):        print(\"EPOCH: {}\".format(epoch))        loss = 999.0        for batchidx, (images, labels) in enumerate(train_loader):            model.train()            # ä¸€ä¸ªbatch è½¬æ¢ä¸ºRNNçš„è¾“å…¥ç»´åº¦            images = images.view(-1, sequence_size, input_size)            images = images.requires_grad_()            labels = labels.long() # cross entropy requires a long scalar            # ç§»å…¥GPU            if use_cuda:                images, labels = images.to(device), labels.to(device)            # æ¢¯åº¦æ¸…é›¶            optimizer.zero_grad()            # å‰å‘ä¼ æ’­            output = model(images)            # è®¡ç®—æŸå¤±            loss = lossfcn(output, labels)            # åå‘ä¼ æ’­            loss.backward()            # æ›´æ–°å‚æ•°            optimizer.step()            iter += 1            # æ‰“å°è®­ç»ƒä¿¡æ¯            if batchidx % 50 == 0:                print(\"batch index: {}, images: {}/{}+[{}], loss: {}\".format(                    batchidx,                    batchidx*batch_size,                    train_loader.dataset.data.shape[0],batch_size,                    loss.data.cpu().numpy()))        # æ¨¡å‹éªŒè¯        model.eval()        correct = 0.0        total = 0.0        # è¿­ä»£æµ‹è¯•é›†ï¼Œè·å–æ•°æ®ï¼Œé¢„æµ‹        with torch.no_grad():            for images, labels in test_loader:                images = images.view(-1, sequence_size, input_size).to(device)                # æ¨¡å‹é¢„æµ‹                output = model(images)                # è·å–é¢„æµ‹æ¦‚ç‡æœ€å¤§å€¼çš„ä¸‹æ ‡                _, predict = torch.max(output.data, axis=1)                # ç»Ÿè®¡æµ‹è¯•é›†çš„å¤§å°                total += labels.size(0)                # ç»Ÿè®¡é¢„æµ‹æ­£ç¡®çš„æ•°é‡                if use_cuda:                    predict, labels = predict.to(device), labels.to(device)                correct += (predict == labels).sum()            accuracy = correct / total * 100            # ä¿å­˜accuracyï¼Œlossï¼Œiteration            loss_list.append(loss.data)            accuracy_list.append(accuracy)            iteration_list.append(iter)            # æ‰“å°ä¿¡æ¯            print(\"iter: {}, Loss: {}, Accu: {}%\".format(iter, loss.item(), accuracy))            print()if __name__ == '__main__':    main()æ³¨æ„ï¼Œä¸Šè¿°ä»£ç å¹¶æ²¡æœ‰é‡‡ç”¨ä¸€èˆ¬æ•™ç¨‹ä¸­çš„ä½¿ç”¨ Pytorch ä»£ç ç›´æ¥ä¸‹è½½å¹¶ä½¿ç”¨ MNIST æ•°æ®é›†ï¼Œè€Œæ˜¯å°†æ•°æ®é›†ä¸‹è½½å¥½åï¼Œæå–å‡ºå…¶ä¸­æ‰€æœ‰å›¾ç‰‡ï¼Œä¿å­˜åœ¨ raw æ–‡ä»¶å¤¹ä¸­ï¼Œç„¶åæ„é€ ä¸€ä¸ª DataLoader ç±»å‹çš„ DATA æ¥å®ç°æ•°æ®åŠ è½½ï¼Œè¿™æ ·å¯ä»¥ä¾¿äºæˆ‘ä»¬ä¹‹åå°†ç½‘ç»œè¿ç§»è‡³è‡ªå·±çš„æ•°æ®é›†ä¸Šè®­ç»ƒã€‚ä¸ºäº†ä¾¿äºæ¯”è¾ƒï¼Œè¿™é‡Œç»™å‡ºä¸€æ®µå€ŸåŠ© torchvision.datasets ç›´æ¥ä¸‹è½½å’ŒåŠ è½½ MNIST æ•°æ®é›†çš„ä»£ç # MNIST Datasettrain_dataset = torchvision.datasets.MNIST(root='./data/',                                           train=True,                                            transform=transforms.ToTensor(),                                           download=True)test_dataset = torchvision.datasets.MNIST(root='./data/',                                          train=False,                                           transform=transforms.ToTensor())# Data Loader (Input Pipeline)train_loader = torch.utils.data.DataLoader(dataset=train_dataset,                                           batch_size=batch_size,                                            shuffle=True)test_loader = torch.utils.data.DataLoader(dataset=test_dataset,                                          batch_size=batch_size,                                           shuffle=False)æœ€ç»ˆä¹Ÿå¾—åˆ°äº†ç”¨äºè®­ç»ƒå’Œæµ‹è¯•çš„ train_loader, test_loaderã€‚å…¶ä¸­  root='./data/' è¡¨æ˜å°†ä¸‹è½½çš„æ•°æ®é›†å­˜æ”¾äºä»£ç åŒçº§è·¯å¾„ä¸‹çš„ data æ–‡ä»¶å¤¹ï¼›  train=true è¡¨æ˜ä¸‹è½½çš„æ•°æ®é›†æ˜¯ç”¨äºè®­ç»ƒçš„æ•°æ®é›†ï¼›  transform=transforms.ToTensor() è¡¨æ˜å¯¹ä¸‹è½½çš„æ•°æ®é›†è¿›è¡Œä¸€ä¸ªæ•°æ®å¤„ç†æ“ä½œï¼šToTensor(object) Convert a numpy.ndarray (H x W x C) in the range [0, 255] to a torch.FloatTensor of shape (C x H x W) in the range [0.0, 1.0].  download=True è¡¨æ˜å¦‚æœæ£€æµ‹åˆ° root ä¸‹æ²¡æœ‰æ•°æ®é›†æ—¶è‡ªåŠ¨ä¸‹è½½æ•°æ®æ‰€æœ‰æ•°æ®ï¼ŒåŒ…æ‹¬è®­ç»ƒæ•°æ®å’Œæµ‹è¯•æ•°æ®ï¼Œå› æ­¤åœ¨ train=True æ—¶è®¾ç½®ä¸€æ¬¡å³å¯ã€‚PyTorch å®˜æ–¹ç»™å‡ºçš„åŸºäº CNN çš„ MNIST æ‰‹å†™æ•°å­—è¯†åˆ«ä»£ç åœ¨æ­¤ï¼ˆhttps://github.com/pytorch/examples/blob/master/mnist/main.py ï¼‰ï¼Œä»¥ä¾›å‚è€ƒã€‚æ³¨æ„åˆ°ä¸Šè¿°é“¾æ¥çš„ä»£ç ä¸­ï¼Œé™¤äº† ToTensor() ä¹‹å¤–è¿˜ç”¨åˆ°äº†å¦ä¸€ä¸ªè½¬æ¢ï¼ŒNormalize() å¦‚ä¸‹ï¼štransform=transforms.Compose([                           transforms.ToTensor(),                           transforms.Normalize((0.1307,), (0.3081,))                       ])æ€»ç»“è€Œè¨€ï¼ŒToTensor() èƒ½å¤ŸæŠŠç°åº¦èŒƒå›´ä» 0-255 å˜æ¢åˆ° 0-1 ä¹‹é—´ï¼Œè€Œåé¢çš„ transform.Normalize() åˆ™æŠŠ 0-1 æ•°æ®æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼šimage=(image-mean)/stdå¦‚æœå– mean=0.5, std=0.5 é‚£ä¹ˆ Normalize æŠŠ 0-1 æ•°æ®å˜æ¢åˆ° (-1,1)ï¼Œå·ç§°å¯ä»¥åŠ å¿«æ¨¡å‹æ”¶æ•›é€Ÿåº¦ [2]ã€‚å½“ç„¶æ­¤å¤„MNISTåº”ç”¨æ—¶ mean=0.1307, std=0.3081 ã€‚å½“ seed=0 æ—¶ï¼Œå³use_cuda = torch.cuda.is_available()device = torch.device('cuda:0' if use_cuda else 'cpu')seed = 0torch.manual_seed(seed)if use_cuda:    torch.cuda.manual_seed(seed)20 æ¬¡è¿­ä»£åçš„è®­ç»ƒç»“æœå¦‚ä¸‹......EPOCH: 20batch index: 0, images: 0/60000+[64], loss: 0.14547616243362427batch index: 50, images: 3200/60000+[64], loss: 0.04679613187909126batch index: 100, images: 6400/60000+[64], loss: 0.05385994166135788batch index: 150, images: 9600/60000+[64], loss: 0.044658079743385315batch index: 200, images: 12800/60000+[64], loss: 0.08235453814268112batch index: 250, images: 16000/60000+[64], loss: 0.12099026888608932batch index: 300, images: 19200/60000+[64], loss: 0.04762731492519379batch index: 350, images: 22400/60000+[64], loss: 0.07588448375463486batch index: 400, images: 25600/60000+[64], loss: 0.03385855257511139batch index: 450, images: 28800/60000+[64], loss: 0.056658919900655746batch index: 500, images: 32000/60000+[64], loss: 0.10723046958446503batch index: 550, images: 35200/60000+[64], loss: 0.029729364439845085batch index: 600, images: 38400/60000+[64], loss: 0.21459335088729858batch index: 650, images: 41600/60000+[64], loss: 0.023649774491786957batch index: 700, images: 44800/60000+[64], loss: 0.2532099485397339batch index: 750, images: 48000/60000+[64], loss: 0.044361311942338943batch index: 800, images: 51200/60000+[64], loss: 0.08944762498140335batch index: 850, images: 54400/60000+[64], loss: 0.22417518496513367batch index: 900, images: 57600/60000+[64], loss: 0.1285378485918045iter: 18760, Loss: 0.034618619829416275, Accu: 97.50999450683594%æ³¨æ„ï¼Œå¦‚æœä¸æ”¹å˜ seed é‚£ä¹ˆé‡å¤å¤šæ¬¡è®­ç»ƒçš„ç»“æœä¸ä¼šå˜ã€‚éšæœºæ•°ç§å­å½±å“ç¥ç»ç½‘ç»œåˆå§‹å‚æ•°çš„éšæœºåˆå§‹åŒ–å–å€¼ã€‚3. å¸¸è§é”™è¯¯3.1. CUDNN_STATUS_BAD_PARAMåœ¨ LSTM çš„ forward è¿‡ç¨‹ä¸­ï¼Œä¸‹è¿°è¯­å¥def forward(self, x):    r_out, (h_n, h_c) = self.lstm(x, None)æç¤º RuntimeErrorå‘ç”Ÿå¼‚å¸¸: RuntimeErrorcuDNN error: CUDNN_STATUS_BAD_PARAM  File \"xxx.py\", line xx, in forward    r_out, (h_n, h_c) = self.lstm(x, None)å‚è€ƒæ­¤å¤„ï¼ˆhttps://blog.csdn.net/daixiangzi/article/details/107671246 ï¼‰æ ¸å¿ƒé—®é¢˜åœ¨äºï¼ŒLSTM çš„ forward è¦æ±‚è¾“å…¥æ•°æ®çš„ç±»å‹ä¸º float32ï¼Œè€Œåœ¨å®é™…ä»£ç ä¸­æˆ‘ä»¬å°†å…¶è¾“å…¥ä¸ºäº†float64æˆ–è€…å…¶å®ƒç±»å‹çš„æ•°æ®ã€‚å› æ­¤éœ€è¦åœ¨è¾“å…¥æ¨¡å‹è®­ç»ƒä¹‹å‰è¿›è¡Œæ•°æ®è½¬æ¢å³å¯è§£å†³é—®é¢˜trainX, trainY = trainX.to(torch.float32), trainY.to(torch.float32)4. å‚è€ƒæ–‡çŒ®[1] è°“ä¹‹å°ä¸€. LSTMå¦‚ä½•è§£å†³RNNå¸¦æ¥çš„æ¢¯åº¦æ¶ˆå¤±é—®é¢˜.[2] å°ç ”ä¸€æš. pytorchçš„transformä¸­ToTensoræ¥ç€Normalize."
  },
  
  {
    "title": "æ·±åº¦å­¦ä¹ åŸºç¡€ï¼ˆRNNï¼‰",
    "url": "/posts/deep-learning-RNN/",
    "categories": "Academic, Knowledge",
    "tags": "deep learning",
    "date": "2020-09-29 09:43:19 +0800",
    





    
    "snippet": "æœ¬æ–‡ä»‹ç»äº† RNN ï¼ˆå¾ªç¯ç¥ç»ç½‘ç»œï¼‰çš„åŸºæœ¬æ¦‚å¿µï¼Œä»¥åŠæ­£/åå‘ä¼ æ’­çš„æ¨å¯¼è¿‡ç¨‹ã€‚æœ€ååˆ†æäº† RNN çš„æ¢¯åº¦æ¶ˆå¤±å’Œæ¢¯åº¦çˆ†ç‚¸é—®é¢˜ã€‚  1. RNN          1.1. æ¦‚å¿µ      1.2. æ¨¡å‹      1.3. å‰å‘ä¼ æ’­      1.4. åå‘ä¼ æ’­      1.5. æ¢¯åº¦æ¶ˆå¤±      1.6. æ¢¯åº¦çˆ†ç‚¸        2. å‚è€ƒæ–‡çŒ®1. RNN1.1. æ¦‚å¿µåœ¨å‰é¦ˆç¥ç»ç½‘ç»œä¸­ï¼Œä¿¡...",
    "content": "æœ¬æ–‡ä»‹ç»äº† RNN ï¼ˆå¾ªç¯ç¥ç»ç½‘ç»œï¼‰çš„åŸºæœ¬æ¦‚å¿µï¼Œä»¥åŠæ­£/åå‘ä¼ æ’­çš„æ¨å¯¼è¿‡ç¨‹ã€‚æœ€ååˆ†æäº† RNN çš„æ¢¯åº¦æ¶ˆå¤±å’Œæ¢¯åº¦çˆ†ç‚¸é—®é¢˜ã€‚  1. RNN          1.1. æ¦‚å¿µ      1.2. æ¨¡å‹      1.3. å‰å‘ä¼ æ’­      1.4. åå‘ä¼ æ’­      1.5. æ¢¯åº¦æ¶ˆå¤±      1.6. æ¢¯åº¦çˆ†ç‚¸        2. å‚è€ƒæ–‡çŒ®1. RNN1.1. æ¦‚å¿µåœ¨å‰é¦ˆç¥ç»ç½‘ç»œä¸­ï¼Œä¿¡æ¯ä¼ é€’æ˜¯å•å‘çš„[1]ã€‚å‰é¦ˆç¥ç»ç½‘ç»œå¯ä»¥çœ‹ä½œä¸€ä¸ªå¤æ‚çš„å‡½æ•°ï¼Œæ¯æ¬¡è¾“å…¥éƒ½æ˜¯ç‹¬ç«‹çš„ï¼Œå³ç½‘ç»œçš„è¾“å‡ºåªä¾èµ–äºå½“å‰çš„è¾“å…¥ï¼ä½†æ˜¯åœ¨å¾ˆå¤šç°å®ä»»åŠ¡ä¸­ï¼Œç½‘ç»œçš„è¾“å‡ºä¸ä»…å’Œå½“å‰æ—¶åˆ»çš„è¾“å…¥ç›¸å…³ï¼Œä¹Ÿå’Œå…¶è¿‡å»ä¸€æ®µæ—¶é—´çš„è¾“å‡ºç›¸å…³ã€‚æ­¤å¤–ï¼Œå‰é¦ˆç½‘ç»œéš¾ä»¥å¤„ç†æ—¶åºæ•°æ®ï¼Œæ¯”å¦‚è§†é¢‘ã€è¯­éŸ³ã€æ–‡æœ¬ç­‰ï¼æ—¶åºæ•°æ®çš„é•¿åº¦ä¸€èˆ¬æ˜¯ä¸å›ºå®šçš„ï¼Œè€Œå‰é¦ˆç¥ç»ç½‘ç»œè¦æ±‚è¾“å…¥å’Œè¾“å‡ºçš„ç»´æ•°éƒ½æ˜¯å›ºå®šçš„ï¼Œä¸èƒ½ä»»æ„æ”¹å˜ï¼å› æ­¤ï¼Œå½“å¤„ç†è¿™ä¸€ç±»å’Œæ—¶åºæ•°æ®ç›¸å…³çš„é—®é¢˜æ—¶ï¼Œå°±éœ€è¦ä¸€ç§èƒ½åŠ›æ›´å¼ºçš„æ¨¡å‹ï¼å¾ªç¯ç¥ç»ç½‘ç»œï¼ˆRecurrent Neural Networkï¼ŒRNNï¼‰æ˜¯ä¸€ç±»å…·æœ‰çŸ­æœŸè®°å¿†èƒ½åŠ›çš„ç¥ç»ç½‘ç»œï¼åœ¨å¾ªç¯ç¥ç»ç½‘ç»œä¸­ï¼Œç¥ç»å…ƒä¸ä½†å¯ä»¥æ¥å—å…¶ä»–ç¥ç»å…ƒçš„ä¿¡æ¯ï¼Œä¹Ÿå¯ä»¥æ¥å—è‡ªèº«çš„ä¿¡æ¯ï¼Œå½¢æˆå…·æœ‰ç¯è·¯çš„ç½‘ç»œç»“æ„ï¼å’Œå‰é¦ˆç¥ç»ç½‘ç»œç›¸æ¯”ï¼Œå¾ªç¯ç¥ç»ç½‘ç»œæ›´åŠ ç¬¦åˆç”Ÿç‰©ç¥ç»ç½‘ç»œçš„ç»“æ„ï¼å¾ªç¯ç¥ç»ç½‘ç»œå·²ç»è¢«å¹¿æ³›åº”ç”¨åœ¨è¯­éŸ³è¯†åˆ«ã€è¯­è¨€æ¨¡å‹ä»¥åŠè‡ªç„¶è¯­è¨€ç”Ÿæˆç­‰ä»»åŠ¡ä¸Šã€‚RNN ç”¨äºåˆ†ç±»çš„ç®€å•ä¾‹å­å‚è€ƒï¼š  æ ¹æ®äººååˆ¤æ–­å›½å®¶ï¼šå­—ç¬¦çº§ RNN å¯¹å•è¯åˆ†ç±»ã€‚è¾“å…¥äººåå•è¯ï¼Œå°†æ¯ä¸ªå­—ç¬¦è¿›è¡Œç¼–ç åè¯»å–ï¼ˆone-hotï¼‰ï¼Œåœ¨æ¯ä¸€æ­¥è¾“å‡ºé¢„æµ‹å’Œâ€œéšè—çŠ¶æ€â€ï¼Œå°†å…¶å…ˆå‰çš„éšè—çŠ¶æ€è¾“å…¥è‡³ä¸‹ä¸€æ—¶åˆ»ã€‚å°†æœ€ç»ˆæ—¶åˆ»è¾“å‡ºä½œä¸ºé¢„æµ‹ç»“æœï¼Œå³è¡¨ç¤ºè¯¥è¯å±äºå“ªä¸ªç±»ï¼ˆå“ªä¸ªå›½å®¶çš„äººåï¼‰ã€‚  æ ¹æ®å¥å­åˆ¤æ–­è¯­è¨€ï¼šå•è¯çº§ RNN å¯¹å¥å­åˆ†ç±»ã€‚è¾“å…¥ä¸€ä¸ªå¥å­ï¼Œå°†æ¯ä¸ªå•è¯è¿›è¡Œç¼–ç åè¯»å–ï¼ˆword2vecï¼‰ï¼Œåœ¨æ¯ä¸€æ­¥è¾“å‡ºé¢„æµ‹å’Œâ€œéšè—çŠ¶æ€â€ï¼Œå°†å…¶å…ˆå‰çš„éšè—çŠ¶æ€è¾“å…¥è‡³ä¸‹ä¸€æ—¶åˆ»ã€‚å°†æœ€ç»ˆæ—¶åˆ»è¾“å‡ºä½œä¸ºé¢„æµ‹ç»“æœï¼Œå³è¡¨ç¤ºè¯¥è¯å±äºå“ªä¸ªç±»ï¼ˆå“ªä¸ªå›½å®¶çš„è¯­è¨€ï¼‰ã€‚ä¸Šè¿°ä¾‹å­ä¸­ï¼Œè¾“å…¥æ˜¯å¯¹ å­—ç¬¦ / å•è¯ åºåˆ—çš„ç¼–ç ï¼Œç¼–ç æ–¹å¼å¯ä»¥æ˜¯ one-hot å½¢å¼ä¹Ÿå¯ä»¥é‡‡ç”¨ word2vec æ–¹æ³•ã€‚æœŸæœ›è¾“å‡ºä¸€èˆ¬æ˜¯ä¸€ä¸ª one-hot å‘é‡ï¼Œæ¯”å¦‚ 10 ç§å›½å®¶ / è¯­è¨€ï¼Œé¢„æµ‹è¾“å‡ºä¸€èˆ¬æ˜¯ä¸€ä¸ªå¤šåˆ†ç±»æ¦‚ç‡ç»“æœã€‚1.2. æ¨¡å‹å¾ªç¯ç¥ç»ç½‘ç»œï¼ˆRecurrent Neural Networkï¼ŒRNNï¼‰é€šè¿‡ä½¿ç”¨å¸¦è‡ªåé¦ˆçš„ç¥ç»å…ƒï¼Œèƒ½å¤Ÿå¤„ç†ä»»æ„é•¿åº¦çš„æ—¶åºæ•°æ®ã€‚ç»™å®šä¸€ä¸ªè¾“å…¥åºåˆ— $\\boldsymbol x_{1:T} = (\\boldsymbol x_1,â€¦,\\boldsymbol x_t,â€¦,\\boldsymbol x_T)$ï¼Œé€šè¿‡ä¸‹é¢çš„å…¬å¼æ›´æ–°éšå±‚æ´»æ€§å€¼ $\\boldsymbol h_t$ï¼š\\[\\boldsymbol h_t = f(\\boldsymbol h_{t-1},\\boldsymbol x_t)\\]å…¶ä¸­ï¼Œ$\\boldsymbol h_0 = 0$ï¼Œ$f(\\cdot)$ æ˜¯éçº¿æ€§å‡½æ•°ï¼Œå¯ä»¥æ˜¯ä¸€ä¸ªå‰é¦ˆç½‘ç»œã€‚ç½‘ç»œç»“æ„å¦‚ä¸‹å›¾æ‰€ç¤ºä»æ•°å­¦ä¸Šè®²ï¼Œä¸Šè¿°å…¬å¼å¯ä»¥å ªç§°ä¸€ä¸ªåŠ¨åŠ›ç³»ç»Ÿï¼Œå› æ­¤éšå±‚æ´»æ€§å€¼åœ¨å¾ˆå¤šæ–‡çŒ®ä¸­ä¹Ÿç§°ä¸ºéšçŠ¶æ€ï¼ˆhidden stateï¼‰ã€‚ç”±äºå¾ªç¯ç¥ç»ç½‘ç»œå…·æœ‰çŸ­æœŸè®°å¿†èƒ½åŠ›ï¼Œå› æ­¤å…¶è®¡ç®—èƒ½åŠ›ååˆ†å¼ºå¤§ï¼Œå¯ä»¥è¿‘ä¼¼ä»»æ„éçº¿æ€§åŠ¨åŠ›ç³»ç»Ÿï¼ˆç¨‹åºï¼‰ï¼Œç›¸æ¯”è¾ƒè€Œè¨€ï¼Œå‰é¦ˆç¥ç»ç½‘ç»œå¯ä»¥æ¨¡æ‹Ÿä»»ä½•è¿ç»­å‡½æ•°ã€‚1.3. å‰å‘ä¼ æ’­å¦‚æœæˆ‘ä»¬æŠŠæ¯ä¸ªæ—¶åˆ»çš„çŠ¶æ€éƒ½çœ‹ä½œå‰é¦ˆç¥ç»ç½‘ç»œçš„ä¸€å±‚ï¼Œå¾ªç¯ç¥ç»ç½‘ç»œå¯ä»¥çœ‹ä½œåœ¨æ—¶é—´ç»´åº¦ä¸Šæƒå€¼å…±äº«çš„ç¥ç»ç½‘ç»œã€‚ä¸€ä¸ªç®€å•çš„å¾ªç¯ç¥ç»ç½‘ç»œæŒ‰æ—¶é—´å±•å¼€åå¦‚ä¸‹å›¾æ‰€ç¤ºä»¤ $\\boldsymbol x_t \\in \\mathbb R^M$ ä¸º $t$ æ—¶åˆ»çš„ç½‘ç»œè¾“å…¥å‘é‡ï¼Œåˆ™åœ¨è¯¥æ—¶åˆ»çš„ç½‘ç»œéšçŠ¶æ€ $\\boldsymbol h_t \\in \\mathbb R^D$ å’Œç½‘ç»œè¾“å‡º $\\boldsymbol y_t \\in \\mathbb R^N$ çš„æ›´æ–°å…¬å¼ä¸º\\[\\begin{aligned}\\boldsymbol h_t &amp;= f(\\boldsymbol U \\boldsymbol h_{t-1} + \\boldsymbol W \\boldsymbol x_t + \\boldsymbol b)\\\\\\boldsymbol y_t &amp;= g(\\boldsymbol V \\boldsymbol h_t + \\boldsymbol c)\\end{aligned}\\]å…¶ä¸­ $\\boldsymbol U \\in \\mathbb R^{D\\times D}$ æ˜¯çŠ¶æ€-çŠ¶æ€æƒé‡çŸ©é˜µï¼Œ$\\boldsymbol W \\in \\mathbb R^{D\\times M}$ æ˜¯çŠ¶æ€-è¾“å…¥æƒé‡çŸ©é˜µï¼Œ$\\boldsymbol b \\in \\mathbb R^D, \\boldsymbol c \\in \\mathbb R^N$ æ˜¯åç½®å‘é‡ï¼Œ$\\boldsymbol V \\in \\mathbb R^{N\\times D}$ æ˜¯çŠ¶æ€-è¾“å‡ºæƒé‡çŸ©é˜µï¼Œ$f(\\cdot)$ æ˜¯æ¿€æ´»å‡½æ•°ï¼Œå¦‚ $sigmoid$ æˆ– $tanh$ å‡½æ•°ï¼Œ$g(\\cdot)$ ä¹Ÿæ˜¯æ¿€æ´»å‡½æ•°ï¼Œå¦‚ $softmax$ æˆ– $purlin$ å‡½æ•°ã€‚æ³¨æ„åˆ°ï¼Œç¬¬äºŒä¸ªæ–¹ç¨‹çš„å…·ä½“å½¢å¼ä¸æ¨¡å‹çš„å…·ä½“ä½¿ç”¨æ–¹å¼æœ‰å…³ï¼Œæ¯”å¦‚å…¶ä¸­çš„å¸¸æ•°é¡¹ $\\boldsymbol c$ çš„æœ‰æ— ï¼Œæ¿€æ´»å‡½æ•° $g(\\cdot)$ çš„é€‰å–ç­‰ã€‚1.4. åå‘ä¼ æ’­æœ‰äº†RNNå‰å‘ä¼ æ’­ç®—æ³•çš„åŸºç¡€ï¼Œå°±å®¹æ˜“æ¨å¯¼å‡ºRNNåå‘ä¼ æ’­ç®—æ³•çš„æµç¨‹äº†ã€‚RNN åå‘ä¼ æ’­ç®—æ³•çš„æ€è·¯å’Œ DNN æ˜¯ä¸€æ ·çš„ï¼Œå³é€šè¿‡æ¢¯åº¦ä¸‹é™æ³•ä¸€è½®è½®çš„è¿­ä»£ï¼Œå¾—åˆ°åˆé€‚çš„RNNæ¨¡å‹å‚æ•° $\\boldsymbol U,\\boldsymbol W,\\boldsymbol V,\\boldsymbol b,\\boldsymbol c$ã€‚ç”±äºæˆ‘ä»¬æ˜¯åŸºäºæ—¶é—´åå‘ä¼ æ’­ï¼Œæ‰€ä»¥ RNN çš„åå‘ä¼ æ’­æœ‰æ—¶ä¹Ÿå«åš BPTT (back-propagation through time)ã€‚å½“ç„¶è¿™é‡Œçš„ BPTT å’Œ DNN çš„ BP ä¹Ÿæœ‰å¾ˆå¤§çš„ä¸åŒç‚¹ï¼Œå³è¿™é‡Œæ‰€æœ‰çš„ $\\boldsymbol U, \\boldsymbol W,\\boldsymbol V,\\boldsymbol b,\\boldsymbol c$ åœ¨åºåˆ—çš„å„ä¸ªä½ç½®æ˜¯å…±äº«çš„ï¼Œåå‘ä¼ æ’­æ—¶æˆ‘ä»¬æ›´æ–°çš„æ˜¯ç›¸åŒçš„å‚æ•°ã€‚RNNåå‘ä¼ æ’­è¿‡ç¨‹ä¸­ï¼Œéœ€è¦è®¡ç®— $\\boldsymbol U,\\boldsymbol W,\\boldsymbol V,\\boldsymbol b,\\boldsymbol c$ ç­‰å‚æ•°çš„æ¢¯åº¦ã€‚æ¸…æ™°èµ·è§ï¼Œæˆ‘ä»¬å°†å‰å‘ä¼ æ’­è¿‡ç¨‹æ•´ç†å¦‚ä¸‹\\[\\begin{aligned}\\boldsymbol a_t &amp;= \\boldsymbol W \\boldsymbol h_{t-1} + \\boldsymbol U \\boldsymbol x_t + \\boldsymbol b\\\\\\boldsymbol h_t &amp;= f(\\boldsymbol a_t)\\\\\\boldsymbol o_t &amp;= \\boldsymbol V \\boldsymbol h_t + \\boldsymbol c\\\\\\hat{\\boldsymbol y_t} &amp;= g(\\boldsymbol o_t)\\end{aligned}\\]åå‘ä¼ æ’­çš„å½¢è±¡çš„åˆ†æå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚é€”ä¸­ç»¿çº¿æ˜¯æ­£å‘ä¼ æ’­è¿‡ç¨‹ï¼Œçº¢çº¿æ˜¯åå‘ä¼ æ’­è¿‡ç¨‹ã€‚å¯ä»¥çœ‹å‡ºï¼Œåœ¨è¾“å‡ºç«¯çš„ $V,c$ å‚æ•°ä»…ä¸ $t$ æ—¶åˆ»çš„åå‘ä¼ æ’­é€šè·¯æœ‰å…³ï¼Œå› æ­¤åˆ†åˆ«æ±‚å¯¼æ•°åæ±‚å’Œå³å¯ã€‚è€Œè¾“å…¥ç«¯ $U,W,b$ å‚æ•°çš„æ¢¯åº¦å—åˆ°ä¸¤ä¸ªåå‘ä¼ æ’­é€šè·¯çš„å½±å“ï¼Œåˆ†åˆ«æ˜¯ $t$ æ—¶åˆ»çš„è¾“å‡ºç«¯åå‘é€šè·¯ï¼Œä»¥åŠ $t+1$ æ—¶åˆ»éšå±‚ä¿¡æ¯çš„åå‘é€šè·¯ã€‚ä¸ºäº†ç®€åŒ–æè¿°ï¼Œè¿™é‡Œçš„æŸå¤±å‡½æ•°æˆ‘ä»¬ä¸ºäº¤å‰ç†µæŸå¤±å‡½æ•°ï¼Œè¾“å‡ºçš„æ¿€æ´»å‡½æ•° $g(\\cdot)$ ä¸º softmax å‡½æ•°ã€‚å¯¹äº RNNï¼Œç”±äºåœ¨åºåˆ—çš„æ¯ä¸ªä½ç½®ï¼ˆä»»æ„ $t$ æ—¶åˆ»ï¼‰éƒ½æœ‰è¾“å‡º $\\hat y_t$ï¼Œä¹Ÿå³éƒ½æœ‰æŸå¤±å‡½æ•°ï¼Œå› æ­¤æœ€ç»ˆæŸå¤± $L$ ä¸º\\[\\boldsymbol L = \\sum_{t=1}^T \\boldsymbol L_t = \\sum_{t=1}^T \\left[ - \\boldsymbol y_t ln\\hat{\\boldsymbol y_t} \\right]\\]æ³¨æ„åˆ°ï¼Œå¯¹äºä»»æ„æ—¶åˆ» $t$ çš„æŸå¤±å‡½æ•° $\\boldsymbol L_t$ï¼Œåœ¨ $N$ åˆ†ç±»é—®é¢˜ä¸­å…¶ä¸æ¯ä¸ªç»´åº¦åˆ†é‡å‡æœ‰å…³ï¼Œå› æ­¤æŸå¤±å‡½æ•°å¯ä»¥è¿›ä¸€æ­¥å†™ä¸º\\[\\boldsymbol L = \\sum_{t=1}^T \\boldsymbol L_t = -\\sum_{t=1}^T\\sum_{j=1}^N y_{tj}{\\rm ln} \\hat{y_{tj}}\\]ä¸Šå¼å°±æ˜¯è´Ÿå¯¹æ•°ä¼¼ç„¶å‡½æ•°çš„å½¢å¼ã€‚é¦–å…ˆè®¡ç®—æ¯”è¾ƒç®€å•çš„ $V,c$ çš„æ¢¯åº¦ã€‚åœ¨è¾“å‡ºç«¯çš„ $V,c$ å‚æ•°ä»…ä¸ $t$ æ—¶åˆ»çš„åå‘ä¼ æ’­é€šè·¯æœ‰å…³ï¼Œå› æ­¤åˆ†åˆ«æ±‚å¯¼æ•°åæ±‚å’Œå³å¯ï¼Œæœ‰[1]\\[\\begin{aligned}\\frac{\\partial L}{\\partial \\boldsymbol c} &amp;= \\sum_{t=1}^T \\frac{\\partial \\boldsymbol L_t}{\\partial \\boldsymbol c}= \\sum_{t=1}^T \\frac{\\partial \\boldsymbol L_t}{\\partial \\hat{\\boldsymbol y_t}} \\frac{\\partial \\hat{\\boldsymbol y_t}}{\\partial \\boldsymbol o_t} \\frac{\\partial \\boldsymbol o_t}{\\partial \\boldsymbol c}\\\\&amp;= \\sum_{t=1}^T -(\\frac{\\boldsymbol y_t}{\\hat{\\boldsymbol y_t}})\\cdot softmax'\\cdot \\boldsymbol I\\\\\\end{aligned}\\]ç”±äº $softmaxâ€™$ éœ€è¦åˆ†æƒ…å†µè®¨è®ºï¼Œå½“ $j=i$ æ—¶ $softmaxâ€™ = \\hat y_j(1-\\hat y_j)$ï¼›å½“ $j\\neq i$ æ—¶ $softmaxâ€™ = \\hat y_j\\hat y_i$ï¼Œé‚£ä¹ˆæœ‰\\[\\begin{aligned}\\frac{\\partial L}{\\partial \\boldsymbol c}&amp;= \\sum_{t=1}^T \\sum_{j=1}^N -\\frac{y_{tj}}{\\hat y_{tj}}\\cdot\\left\\{\\begin{matrix}&amp;\\hat y_{tj}(1-\\hat y_{tj})\\quad &amp;j=i\\\\ &amp;\\hat y_{tj}\\hat y_{ti} \\quad &amp; j\\neq i\\end{matrix}\\right.\\\\&amp;= - \\sum_{t=1}^T \\sum_{j=1}^N \\left\\{\\begin{matrix}&amp;y_{tj}(1-\\hat y_{tj})\\quad &amp;j=i\\\\ &amp;y_{tj}\\hat y_{ti} \\quad &amp; j\\neq i\\end{matrix}\\right.\\\\\\end{aligned}\\]ç”±äº $\\boldsymbol y_{t} = [y_{t1},y_{t2},â€¦,y_{tj},â€¦,y_{tN}]$ æ˜¯ä¸€ä¸ª one-hot å‘é‡ï¼Œå‡è®¾ç¬¬ $j$ ä¸ªåˆ†é‡ $y_{tj} = 1$ï¼Œå¯ä»¥å°†ç¬¬äºŒä¸ªç´¯åŠ ç¬¦å·æ¶ˆå»ï¼ˆå› ä¸ºå…¶å®ƒåˆ†é‡ä¸º 0ï¼Œä¸å½±å“ç´¯åŠ æ±‚å’Œï¼‰\\[\\begin{aligned}\\frac{\\partial L}{\\partial \\boldsymbol c}&amp;= - \\sum_{t=1}^T \\left\\{\\begin{matrix}&amp;[0,0,...,y_{tj}(1-\\hat y_{tj}),...,0]\\quad &amp;j=i\\\\ &amp;[0,0,...,y_{tj}\\hat y_{ti},...,0] \\quad &amp; j\\neq i\\end{matrix}\\right.\\quad (y_{tj} = 1)\\end{aligned}\\]è¿›ä¸€æ­¥åˆ†æ  $j=i:\\quad y_{tj}(1-\\hat y_{tj}) = 1-\\hat y_{tj} = y_{tj} - \\hat{y_{tj}}$  $j\\neq i:\\quad y_{tj}\\hat y_{ti} = \\hat y_{ti} = y_{tj} - \\hat{y_{tj}}$å¯ä»¥å‘ç°ï¼ŒäºŒè€…åœ¨å½¢å¼ä¸Šå¯ä»¥å†™æˆç»Ÿä¸€çš„å½¢å¼ $\\boldsymbol y_{tj} - \\hat {\\boldsymbol y_{tj}}$ï¼Œé‚£ä¹ˆæœ‰\\[\\begin{aligned}\\frac{\\partial L}{\\partial \\boldsymbol c} = - \\sum_{t=1}^T (\\boldsymbol y_{tj} - \\hat {\\boldsymbol y_{tj}}) =\\sum_{t=1}^T (\\hat {\\boldsymbol y_{tj}} - \\boldsymbol y_{tj})\\end{aligned}\\]é‚£ä¹ˆå¯¹ $\\boldsymbol V$ çš„åå¯¼ä¸º\\[\\begin{aligned}\\frac{\\partial L}{\\partial V} &amp;= \\sum_{t=1}^T \\frac{\\partial L_t}{\\partial c}= \\sum_{t=1}^T \\frac{\\partial \\boldsymbol L_t}{\\partial \\hat {\\boldsymbol y_t}} \\frac{\\partial \\hat {\\boldsymbol y_t}}{\\partial \\boldsymbol o_t} \\frac{\\partial \\boldsymbol o_t}{\\partial \\boldsymbol V}\\\\&amp;= \\sum_{t=1}^T (\\hat {\\boldsymbol y_t}-\\boldsymbol y_t)\\boldsymbol h_t\\end{aligned}\\]$\\boldsymbol U,\\boldsymbol W,\\boldsymbol b$ çš„æ¢¯åº¦è®¡ç®—å°±æ¯”è¾ƒå¤æ‚äº†ï¼Œè¯¯å·®ä¼ æ’­æºæ¥è‡ªäºä¸¤ä¸ªåå‘ä¼ æ’­é€šè·¯çš„æ–¹å‘ï¼Œåˆ†åˆ«æ˜¯ $t$ æ—¶åˆ»çš„è¾“å‡ºç«¯åå‘é€šè·¯ï¼Œä»¥åŠ $t+1$ æ—¶åˆ»éšå±‚ä¿¡æ¯çš„åå‘é€šè·¯ã€‚è¿™é‡Œå‡è®¾éšè—å±‚çš„æ¿€æ´»å‡½æ•° $f(\\cdot)$ ä¸º tanh å‡½æ•°ã€‚åœ¨è¿›ä¸€æ­¥æ±‚è§£å‰ï¼Œé¦–å…ˆè¦è€ƒè™‘çŸ©é˜µå¯¹å‘é‡æ±‚å¯¼çš„å¸ƒå±€ã€‚æ ¹æ®å¸ƒå±€çº¦å®šï¼ˆlayout conventionsï¼‰ï¼Œè°æ˜¯åˆ—å‘é‡å°±æ˜¯ä»€ä¹ˆå¸ƒå±€[2]ï¼š  åˆ†å­å¸ƒå±€ï¼ˆnumerator layoutï¼‰ï¼š åˆ†å­ä¸ºåˆ—å‘é‡ä¸”åˆ†æ¯ä¸ºè¡Œå‘é‡  åˆ†æ¯å¸ƒå±€ï¼ˆdenominator layoutï¼‰ï¼šåˆ†å­ä¸ºè¡Œå‘é‡ä¸”åˆ†æ¯ä¸ºåˆ—å‘é‡äºŒè€…ä½¿ç”¨å®Œå…¨ä¾æ®ä¹ æƒ¯è€Œå®šï¼ŒäºŒè€…ç»“æœä¹‹é—´å·®ä¸€ä¸ªè½¬ç½®ã€‚è¿™é‡Œè®¨è®ºäº†ä¸¤ç§å¸ƒå±€ä¸‹çš„ä¼˜åŠ£ã€‚å¦‚æœæˆ‘ä»¬é‡‡ç”¨åˆ†æ¯å¸ƒå±€ï¼ˆç‚¹æ­¤å‚è€ƒï¼‰ï¼Œå³åˆ†æ¯ä¿æŒåˆ—å‘é‡ï¼Œåˆ†å­æŒ‰è¡Œå‘é‡å±•å¼€ï¼Œé‚£ä¹ˆæœ‰\\[\\begin{aligned}\\frac{\\partial \\boldsymbol {Ax}}{\\partial \\boldsymbol x} &amp;= \\partial\\begin{bmatrix}A_{11} &amp;A_{12}&amp;\\cdots&amp;A_{1n}\\\\A_{21} &amp;A_{22}&amp;\\cdots&amp;A_{2n}\\\\\\vdots &amp;\\vdots&amp;\\ddots&amp;\\vdots\\\\A_{m1} &amp;A_{n2}&amp;\\cdots&amp;A_{mn}\\\\\\end{bmatrix}\\begin{bmatrix}x_1 \\\\x_2\\\\\\vdots\\\\x_n\\\\\\end{bmatrix} / \\partial \\boldsymbol x\\\\&amp;= \\begin{bmatrix}\\partial (A_{11}x_1 + A_{12} x_2 + \\cdots + A_{1n} x_n) &amp;\\cdots &amp;\\partial (A_{m1}x_1 + A_{m2} x_2 + \\cdots + A_{mn} x_n)\\\\\\end{bmatrix}/\\partial \\boldsymbol x\\quad &lt;row!&gt;\\\\&amp;= \\begin{bmatrix}\\partial (A_{11}x_1 + A_{12} x_2 + \\cdots + A_{1n} x_n)/\\partial \\boldsymbol x &amp;\\cdots &amp;\\partial (A_{m1}x_1 + A_{m2} x_2 + \\cdots + A_{mn} x_n)/\\partial \\boldsymbol x\\\\\\end{bmatrix}\\\\&amp;= \\begin{bmatrix}\\partial (A_{11}x_1 + A_{12} x_2 + \\cdots + A_{1n} x_n)/\\partial x_1 &amp; \\cdots &amp; \\partial (A_{m1}x_1 + A_{m2} x_2 + \\cdots + A_{mn} x_n)/\\partial x_1\\\\\\partial (A_{11}x_1 + A_{12} x_2 + \\cdots + A_{1n} x_n)/\\partial x_2 &amp; \\cdots &amp; \\partial (A_{m1}x_1 + A_{m2} x_2 + \\cdots + A_{mn} x_n)/\\partial x_2\\\\\\vdots &amp; \\cdots &amp; \\vdots\\\\\\partial (A_{11}x_1 + A_{12} x_2 + \\cdots + A_{1n} x_n)/\\partial x_n &amp; \\cdots &amp; \\partial (A_{m1}x_1 + A_{m2} x_2 + \\cdots + A_{mn} x_n)/\\partial x_n\\\\\\end{bmatrix}\\\\&amp;=\\begin{bmatrix}A_{11} &amp;A_{21}&amp;\\cdots&amp;A_{m1}\\\\A_{12} &amp;A_{22}&amp;\\cdots&amp;A_{m2}\\\\\\vdots &amp;\\vdots&amp;\\ddots&amp;\\vdots\\\\A_{1n} &amp;A_{2n}&amp;\\cdots&amp;A_{mn}\\\\\\end{bmatrix} = \\boldsymbol A^T\\end{aligned}\\]éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåˆ†æ¯å¸ƒå±€ä¸‹ï¼Œæ±‚å¯¼çš„é“¾å¼æ³•åˆ™çš„é¡ºåºæ˜¯åå‘çš„ï¼Œå‡è®¾ $\\boldsymbol u = \\boldsymbol u(\\boldsymbol x)$ï¼Œé‚£ä¹ˆ\\[\\frac{\\partial \\boldsymbol f(\\boldsymbol g(\\boldsymbol u)}{\\partial \\boldsymbol x}= \\frac{\\partial \\boldsymbol u}{\\partial \\boldsymbol x}\\frac{\\partial \\boldsymbol g}{\\partial \\boldsymbol u}\\frac{\\partial \\boldsymbol f}{\\partial \\boldsymbol g}\\]æˆ‘ä»¬å…ˆè®¡ç®—æœ€åæ—¶åˆ» $t=T$ çš„éšå±‚æ¢¯åº¦ï¼ˆåˆ†æ¯å¸ƒå±€é“¾å¼æ³•åˆ™æ–¹å‘ç›¸åï¼‰\\[\\frac{\\partial \\boldsymbol L}{\\partial \\boldsymbol h_T} = \\frac{\\partial \\boldsymbol o_T}{\\partial \\boldsymbol h_T} \\frac{\\partial \\boldsymbol L}{\\partial \\boldsymbol o_T}\\]å‰é¢æ±‚ $\\boldsymbol V, \\boldsymbol c$ çš„æ¢¯åº¦æ—¶å·²ç»æ±‚å‡º\\[\\frac{\\partial \\boldsymbol L}{\\partial \\boldsymbol o_T} = \\frac{\\partial \\boldsymbol L}{\\partial \\hat {\\boldsymbol y_T}}\\frac{\\partial \\hat {\\boldsymbol y_T}}{\\partial \\boldsymbol o_T} = \\hat {\\boldsymbol y_T}-\\boldsymbol y_T = \\nabla_{\\boldsymbol o_T}\\boldsymbol L\\]å‡å®š $\\boldsymbol {Vh}_T$ çš„ç»“æœæ˜¯åˆ—å‘é‡ï¼Œè€Œ $\\boldsymbol h_T$ ä¹Ÿæ˜¯åˆ—å‘é‡ï¼Œæ ¹æ®åˆ†æ¯å¸ƒå±€ï¼Œæœ‰\\[\\frac{\\partial \\boldsymbol L}{\\partial \\boldsymbol h_T} = \\frac{\\partial \\boldsymbol o_T}{\\partial \\boldsymbol h_T} \\nabla_{\\boldsymbol o_T}\\boldsymbol L = \\frac{\\partial \\boldsymbol {Vh}_T}{\\partial \\boldsymbol h_T} \\nabla_{\\boldsymbol o_T}\\boldsymbol L= \\boldsymbol V^T\\nabla_{\\boldsymbol o_T}\\boldsymbol L\\]å¯¹äº $T$ æ—¶åˆ»ä¹‹å‰çš„ä»»æ„æ—¶åˆ» $t$ï¼Œæ ¹æ®è¿­ä»£å…³ç³»ï¼Œ$\\boldsymbol h_t$ ä¸ $\\boldsymbol o_t$ å’Œ $\\boldsymbol h_{t+1}$ å‡æœ‰å…³ï¼Œå³\\[\\begin{aligned}\\boldsymbol h_{t+1} &amp;= f(\\boldsymbol a_{t+1}) =f(\\boldsymbol W \\boldsymbol h_t + \\boldsymbol U \\boldsymbol x_{t+1} + \\boldsymbol b)\\\\\\boldsymbol o_t &amp;= \\boldsymbol V \\boldsymbol h_t + \\boldsymbol c\\\\\\end{aligned}\\]å¯¹ä¸¤ä¸ªåå‘é€šè·¯æ–¹å‘çš„æ¢¯åº¦æ±‚å’Œï¼Œæœ‰ï¼ˆåˆ†æ¯å¸ƒå±€é“¾å¼æ³•åˆ™æ–¹å‘ç›¸åï¼‰\\[\\begin{aligned}\\frac{\\partial \\boldsymbol L}{\\partial \\boldsymbol h_t}&amp;=\\frac{\\partial \\boldsymbol h_{t+1}}{\\partial \\boldsymbol h_t}\\frac{\\partial \\boldsymbol L}{\\partial \\boldsymbol h_{t+1}} + \\frac{\\partial \\boldsymbol o_t}{\\partial \\boldsymbol h_t}\\frac{\\partial \\boldsymbol L_t}{\\partial \\boldsymbol o_t}\\\\&amp;=\\frac{\\partial \\boldsymbol h_{t+1}}{\\partial \\boldsymbol h_t}\\frac{\\partial \\boldsymbol L}{\\partial \\boldsymbol h_{t+1}} + \\boldsymbol V^T\\nabla_{\\boldsymbol o_t}\\boldsymbol L\\end{aligned}\\]ä¸‹é¢è€ƒå¯Ÿ $\\partial \\boldsymbol h_t / \\partial \\boldsymbol a_t$ï¼Œå› ä¸º $\\boldsymbol h_t, \\boldsymbol a_t$ å‡ä¸ºåˆ—å‘é‡ï¼Œè‹¥é‡‡ç”¨åˆ†æ¯å¸ƒå±€ï¼Œå°†åˆ†å­ $\\boldsymbol h_t$ çœ‹ä½œè¡Œå‘é‡å±•å¼€ï¼Œé‚£ä¹ˆ\\[\\begin{aligned}\\frac{\\partial \\boldsymbol h_t }{ \\partial \\boldsymbol a_t} &amp;= \\partial[h_1,h_2,\\cdots,h_D]/\\partial \\boldsymbol a_t\\quad&lt;row!&gt;\\\\&amp;=\\begin{bmatrix}\\partial h_1/\\partial a_1&amp;\\partial h_2/\\partial a_1&amp;\\cdots&amp;\\partial h_D/\\partial a_1\\\\\\partial h_1/\\partial a_2&amp;\\partial h_2/\\partial a_2&amp;\\cdots&amp;\\partial h_D/\\partial a_2\\\\\\vdots&amp;\\vdots&amp;\\ddots&amp;\\vdots\\\\\\partial h_1/\\partial a_D&amp;\\partial h_2/\\partial a_D&amp;\\cdots&amp;\\partial h_D/\\partial a_D\\\\\\end{bmatrix}\\\\&amp;= diag(f'(a_{t}))\\end{aligned}\\]å…¶ä¸­ $diag$ ä¸ºå¯¹è§’çº¿çŸ©é˜µï¼Œå› ä¸ºä¸‹æ ‡ä¸åŒçš„é¡¹åå¯¼ä¸º 0 ï¼Œåªæœ‰å¯¹è§’çº¿å…ƒç´ é 0 ã€‚è‹¥ $f(\\cdot)$ ä¸º $tanh$ å‡½æ•°ï¼Œæœ‰ $tanhâ€™=1-tanh^2$ï¼Œé‚£ä¹ˆ\\[\\frac{\\partial \\boldsymbol h_{t+1}}{\\partial \\boldsymbol a_{t+1}} = diag(tanh'(a_{t+1})) = diag(1-tanh(a_{t+1})^2) = diag(1-h_{t+1}^2)\\]é‚£ä¹ˆï¼ˆåˆ†æ¯å¸ƒå±€é“¾å¼æ³•åˆ™åå‘ï¼‰\\[\\frac{\\partial \\boldsymbol h_{t+1}}{\\partial \\boldsymbol h_t} = \\frac{\\partial \\boldsymbol a_{t+1}}{\\partial \\boldsymbol h_t} \\frac{\\partial \\boldsymbol h_{t+1}}{\\partial \\boldsymbol a_{t+1}} = W^T diag(1-h_{t+1}^2)\\]å¸¦å›éšå±‚æ¢¯åº¦å…¬å¼æœ‰\\[\\frac{\\partial \\boldsymbol L}{\\partial \\boldsymbol h_t} = \\boldsymbol W^T diag(1- h_{t+1}^2)\\cdot\\frac{\\partial \\boldsymbol L}{\\partial \\boldsymbol h_{t+1}} + \\boldsymbol V^T\\nabla_{\\boldsymbol o_t}\\boldsymbol L\\]ç¨ä½œæ•´ç†æœ‰\\[\\nabla_{\\boldsymbol h_t}\\boldsymbol L = \\boldsymbol W^T diag(1- h_{t+1}^2)\\cdot\\nabla_{\\boldsymbol h_{t+1}}\\boldsymbol L + \\boldsymbol V^T\\nabla_{\\boldsymbol o_t}\\boldsymbol L\\]å¯ä»¥çœ‹å‡ºï¼Œéšå±‚æ¢¯åº¦ $\\nabla_{\\boldsymbol h_t}\\boldsymbol L$ å¯ä»¥é‡‡ç”¨é€’å½’çš„æ–¹å¼æ±‚è§£ã€‚ä¸‹é¢å³å¯å†™å‡º $\\boldsymbol W,\\boldsymbol U,\\boldsymbol b$ çš„æ¢¯åº¦è¡¨è¾¾å¼ï¼ˆåˆ†æ¯å¸ƒå±€é“¾å¼æ³•åˆ™æ–¹å‘ç›¸åï¼‰\\[\\begin{aligned}\\frac{\\partial \\boldsymbol L}{\\partial \\boldsymbol b} &amp;= \\sum_t \\frac{\\partial \\boldsymbol a_t}{\\partial \\boldsymbol b}\\frac{\\partial \\boldsymbol h_t}{\\partial \\boldsymbol a_t}\\frac{\\partial \\boldsymbol L}{\\partial \\boldsymbol h_t} = \\sum_t \\boldsymbol I\\cdot diag(1-h_t^2)\\nabla_{\\boldsymbol h_t}\\boldsymbol L\\\\\\frac{\\partial \\boldsymbol L}{\\partial \\boldsymbol W} &amp;= \\sum_t \\frac{\\partial \\boldsymbol a_t}{\\partial \\boldsymbol W}\\frac{\\partial \\boldsymbol h_t}{\\partial \\boldsymbol a_t}\\frac{\\partial \\boldsymbol L}{\\partial \\boldsymbol h_t} = \\sum_t \\frac{\\partial \\boldsymbol a_t}{\\partial \\boldsymbol W}\\cdot diag(1-h_t^2)\\nabla_{\\boldsymbol h_t}\\boldsymbol L\\\\\\frac{\\partial \\boldsymbol L}{\\partial \\boldsymbol U} &amp;= \\sum_t \\frac{\\partial \\boldsymbol a_t}{\\partial \\boldsymbol U}\\frac{\\partial \\boldsymbol h_t}{\\partial \\boldsymbol a_t}\\frac{\\partial \\boldsymbol L}{\\partial \\boldsymbol h_t} = \\sum_t \\frac{\\partial \\boldsymbol a_t}{\\partial \\boldsymbol U}\\cdot diag(1-h_t^2)\\nabla_{\\boldsymbol h_t}\\boldsymbol L\\end{aligned}\\]å¯¹äº $\\boldsymbol W$ å’Œ $\\boldsymbol U$ï¼Œéœ€è¦è¿›ä¸€æ­¥åˆ†æ $\\boldsymbol a$ å¯¹çŸ©é˜µ $\\boldsymbol W, \\boldsymbol U$ çš„åå¯¼ã€‚å› ä¸º\\[\\boldsymbol a_t = \\boldsymbol W \\boldsymbol h_{t-1} + \\boldsymbol U \\boldsymbol x_t + \\boldsymbol b\\]ä»¥ $\\boldsymbol a$ å¯¹ $\\boldsymbol W$ çš„åå¯¼ä¸ºä¾‹ï¼Œé‡‡ç”¨åˆ†æ¯å¸ƒå±€ï¼Œå³æ±‚å¯¼è¿‡ç¨‹ä¸­çš„åˆ†æ¯ $\\boldsymbol W$ ä¿æŒä¸ºæ­£å¸¸çŸ©é˜µå½¢å¼ï¼Œè€Œå¯¹åˆ†å­ä¸­çš„ $\\boldsymbol W \\boldsymbol h$ æŒ‰è¡Œå‘é‡å±•å¼€ï¼Œæœ‰\\[\\begin{aligned}&amp;\\frac{\\partial \\boldsymbol a}{\\partial \\boldsymbol W} = \\frac{\\partial \\boldsymbol W \\boldsymbol h}{\\partial \\boldsymbol W}=\\partial\\begin{bmatrix}w_{11}&amp;w_{12}&amp;\\cdots&amp;w_{1D}\\\\w_{21}&amp;w_{22}&amp;\\cdots&amp;w_{2D}\\\\\\vdots&amp;\\vdots&amp;\\ddots&amp;\\vdots\\\\w_{D1}&amp;w_{D2}&amp;\\cdots&amp;w_{DD}\\end{bmatrix}\\begin{bmatrix}h_1\\\\h_2\\\\\\vdots\\\\h_D\\end{bmatrix}/ \\partial \\boldsymbol W\\\\&amp;=\\begin{bmatrix}w_{11}h_1+w_{12}h_2+\\cdots+w_{1D}h_D\\\\w_{21}h_1+w_{22}h_2+\\cdots+w_{2D}h_D\\\\\\vdots\\\\w_{D1}h_1+w_{D2}h_2+\\cdots+w_{DD}h_D\\\\\\end{bmatrix}^T/ \\partial \\boldsymbol W \\quad &lt;row!&gt;\\\\&amp;=\\begin{bmatrix}(w_{11}h_1+w_{12}h_2\\cdots+w_{1D}h_D)/\\partial w_{11}&amp;(w_{21}h_1+w_{22}h_2\\cdots+w_{2D}h_D)/\\partial w_{12}&amp;\\cdots&amp;(w_{D1}h_1+w_{D2}h_2\\cdots+w_{DD}h_D)/\\partial w_{1D}\\\\(w_{11}h_1+w_{12}h_2\\cdots+w_{1D}h_D)/\\partial w_{21}&amp;(w_{21}h_1+w_{22}h_2\\cdots+w_{2D}h_D)/\\partial w_{22}&amp;\\cdots&amp;(w_{D1}h_1+w_{D2}h_2\\cdots+w_{DD}h_D)/\\partial w_{2D}\\\\\\vdots&amp;\\vdots&amp;\\ddots&amp;\\vdots\\\\(w_{11}h_1+w_{12}h_2\\cdots+w_{1D}h_D)/\\partial w_{D1}&amp;(w_{21}h_1+w_{22}h_2\\cdots+w_{2D}h_D)/\\partial w_{D2}&amp;\\cdots&amp;(w_{D1}h_1+w_{D2}h_2\\cdots+w_{DD}h_D)/\\partial w_{DD}\\end{bmatrix}\\\\&amp;=\\begin{bmatrix}h_1&amp;0&amp;\\cdots&amp;0\\\\0&amp;h_2&amp;\\cdots&amp;0\\\\\\vdots&amp;\\vdots&amp;\\ddots&amp;\\vdots\\\\0&amp;0&amp;\\cdots&amp;h_D\\end{bmatrix}=diag (h^T)\\end{aligned}\\]å¯¹ $\\boldsymbol U$ çš„æ±‚å¯¼åŒç†ï¼Œæœ€ç»ˆæœ‰\\[\\frac{\\partial \\boldsymbol a_t}{\\partial \\boldsymbol W} = diag(h_{t-1}^T)\\quad\\quad\\quad \\frac{\\partial \\boldsymbol a_t}{\\partial \\boldsymbol U} = diag(x_t^T)\\]å…¶ä¸­ $\\boldsymbol h_t \\in \\mathbb R^D,\\boldsymbol x_t \\in \\mathbb R^M$ æ˜¯åˆ—å‘é‡ã€‚å¸¦å…¥ä¸Šé¢çš„$\\boldsymbol W,\\boldsymbol U,\\boldsymbol b$ çš„æ¢¯åº¦è¡¨è¾¾å¼ï¼Œæœ‰\\[\\begin{aligned}\\frac{\\partial \\boldsymbol L}{\\partial \\boldsymbol W} &amp;= \\sum_t \\frac{\\partial \\boldsymbol a_t}{\\partial \\boldsymbol W}\\frac{\\partial \\boldsymbol h_t}{\\partial \\boldsymbol a_t}\\frac{\\partial \\boldsymbol L}{\\partial \\boldsymbol h_t} = \\sum_t diag (h_{t-1}^T)\\cdot diag(1-h_t^2)\\nabla_{\\boldsymbol h_t}\\boldsymbol L = \\sum_t \\cdot diag(1-h_t^2)\\nabla_{\\boldsymbol h_t}\\boldsymbol L \\cdot \\boldsymbol h_{t-1}^T\\\\\\frac{\\partial \\boldsymbol L}{\\partial \\boldsymbol U} &amp;= \\sum_t \\frac{\\partial \\boldsymbol a_t}{\\partial \\boldsymbol U}\\frac{\\partial \\boldsymbol h_t}{\\partial \\boldsymbol a_t}\\frac{\\partial \\boldsymbol L}{\\partial \\boldsymbol h_t} = \\sum_t diag (x^T)\\cdot diag(1-h_t^2)\\nabla_{\\boldsymbol h_t}\\boldsymbol L = \\sum_t diag(1-h_t^2)\\nabla_{\\boldsymbol h_t}\\boldsymbol L \\cdot \\boldsymbol x^T\\end{aligned}\\]ä¸å‚è€ƒé“¾æ¥ [6]ï¼Œ[7] çš„ç»“æœç›¸åŒã€‚æœ€åå°† $\\boldsymbol h_{t-1}, \\boldsymbol x_t$ æåˆ°æœ«å°¾çš„æ“ä½œåº”è¯¥æ˜¯æˆç«‹çš„ï¼Œæ‡’å¾—æ¨å¯¼äº†â€¦â€¦ 0.01.5. æ¢¯åº¦æ¶ˆå¤±RNN å­˜åœ¨æ—¶é—´ç»´åº¦ä¸Šçš„æ¢¯åº¦æ¶ˆå¤±é—®é¢˜ã€‚ä¸ºäº†å…·ä½“è§£é‡Šæ¢¯åº¦æ¶ˆå¤±çš„åŸå› ï¼Œé¦–å…ˆå°†å‰é¢æ¨å¯¼å‡ºæ¥çš„ $t$ æ—¶åˆ»çš„ $\\boldsymbol L$ å¯¹éšå±‚ $\\boldsymbol h$ çš„æ¢¯åº¦é€’æ¨è¿‡ç¨‹åˆ—å†™å¦‚ä¸‹\\[\\nabla_{\\boldsymbol h_t}\\boldsymbol L = \\boldsymbol W^T diag(1- h_{t+1}^2)\\cdot\\nabla_{\\boldsymbol h_{t+1}}\\boldsymbol L + \\boldsymbol V^T\\nabla_{\\boldsymbol o_t}\\boldsymbol L\\]æ³¨æ„åˆ°ï¼Œ$diag(1- h_{t+1}^2) = tanh(\\boldsymbol h_{t+1})â€™$ï¼Œé‚£ä¹ˆä¸Šå¼å¯ä»¥æ”¹å†™ä¸º\\[\\nabla_{\\boldsymbol h_t}\\boldsymbol L = \\boldsymbol W^T tanh(\\boldsymbol h_{t+1})'\\cdot\\nabla_{\\boldsymbol h_{t+1}}\\boldsymbol L + \\boldsymbol V^T\\nabla_{\\boldsymbol o_t}\\boldsymbol L\\]é‚£ä¹ˆï¼Œå¯¹äº $t-1$ æ—¶åˆ»\\[\\begin{aligned}\\nabla_{\\boldsymbol h_{t-1}}\\boldsymbol L &amp;= \\boldsymbol W^T tanh(h_{t})'\\cdot\\nabla_{\\boldsymbol h_{t}}\\boldsymbol L + \\boldsymbol V^T\\nabla_{\\boldsymbol o_{t-1}}\\boldsymbol L\\\\&amp;=\\boldsymbol W^T tanh(h_{t})'\\cdot (\\boldsymbol W^T tanh(\\boldsymbol h_{t+1})'\\nabla_{\\boldsymbol h_{t+1}}\\boldsymbol L + \\boldsymbol V^T\\nabla_{\\boldsymbol o_t}\\boldsymbol L) + \\boldsymbol V^T\\nabla_{\\boldsymbol o_{t-1}}\\boldsymbol L\\\\&amp;=\\boldsymbol W^T tanh(h_{t})'\\cdot (\\boldsymbol W^T tanh(\\boldsymbol h_{t+1})'\\nabla_{\\boldsymbol h_{t+1}}\\boldsymbol L + \\boldsymbol V^T\\nabla_{\\boldsymbol o_t}\\boldsymbol L) + \\boldsymbol V^T\\nabla_{\\boldsymbol o_{t-1}}\\boldsymbol L\\\\&amp;=\\boldsymbol W^T tanh(h_{t})'\\cdot (\\boldsymbol W^T tanh(\\boldsymbol h_{t+1})'\\cdots(\\boldsymbol W^T tanh(\\boldsymbol h_T)'\\cdots) + \\boldsymbol V^T\\nabla_{\\boldsymbol o_t}\\boldsymbol L) + \\boldsymbol V^T\\nabla_{\\boldsymbol o_{t-1}}\\boldsymbol L\\\\\\end{aligned}\\]ç¨å¾®æ•´ç†å¹¶å±•å¼€ï¼Œä»¤ $\\boldsymbol W^T tanhâ€™(h) = WT$ è¡¨ç¤ºåŒ…å« $tanhâ€™$ çš„é¡¹ï¼Œ$\\boldsymbol V^T \\nabla_{\\boldsymbol o}\\boldsymbol L = \\nabla$ è¡¨ç¤ºä¸å«é«˜é˜¶æ¬¡æ–¹çš„é¡¹ï¼Œè¿›è¡Œç®€åŒ–æè¿°æœ‰ï¼ˆæ³¨æ„æ­¤å¤„ä¸ºç®€åŒ–æè¿°ï¼Œè¿ä¹˜è¡¨ç¤ºä¸ºæ¬¡æ–¹å…³ç³»ï¼Œç•¥å»äº†ä¸‹æ ‡ï¼‰\\[\\begin{aligned}\\nabla_{\\boldsymbol h_{t-1}}\\boldsymbol L &amp;= (WT)^{T-t+1}\\nabla_TL+(WT)^{T-t+2}\\nabla+(WT)^{T-t+3}\\nabla+...+(WT)^{1}\\nabla+\\nabla\\end{aligned}\\]è€Œå¯¹ $tanh$ åŠ  $tanâ€™h$  è¿›è¡Œç”»å›¾å¦‚ä¸‹å¯ä»¥çœ‹å‡ºï¼Œç”±äº $tanhâ€™$ çš„å€¼åŸŸåœ¨ $(0,1)$ ä¹‹é—´ï¼Œå¯¹äºè®­ç»ƒè¿‡ç¨‹å¤§éƒ¨åˆ†æƒ…å†µä¸‹ $tanhâ€™$ æ˜¯å°äº 1 çš„ã€‚è‹¥ $\\boldsymbol W^T$ çš„å–å€¼è¾ƒå°å¯¼è‡´ $WT = \\boldsymbol W^T tanhâ€™(h) &lt;1$ï¼Œå¤šé¡¹è¿ä¹˜ä¼šå¯¼è‡´æœ€ç»ˆçš„å€¼è¶‹è¿‘äº0ã€‚å› æ­¤ï¼Œéšç€ $t$ ä¸ $T$ çš„é€æ¸æ‹‰å¤§ï¼Œéšå±‚æ¢¯åº¦ä¸­åŒ…å«çš„ $WT$ é¡¹çš„æ¬¡æ–¹è¶Šæ¥è¶Šé«˜ï¼Œå…¶å–å€¼è¶Šæ¥è¶Šæ¥è¿‘ 0 ã€‚è¿™ä¼šå¯¼è‡´è¾ƒé•¿æ—¶é—´ $t$ å‰çš„æ¢¯åº¦é¡¹ $\\nabla_{\\boldsymbol h_{t-1}}\\boldsymbol L$ ä¸­çš„ç¬¬ä¸€é¡¹ååˆ†æ¥è¿‘ 0 ï¼Œå³å¯¼è‡´è¾ƒé•¿æ—¶é—´ $t$ å‰çš„ $\\boldsymbol L$ å¯¹å‚æ•°çš„æ¢¯åº¦é¡¹ä»…ä¸é‚£ä¸ªæ—¶åˆ»çš„è¾“å‡ºæœ‰å…³ï¼ˆä¸Šå¼ä¸­çš„ $\\nabla$ é¡¹ï¼‰ï¼Œè€Œä¸å†åŒ…å« $\\boldsymbol L$ çš„ä¿¡æ¯ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨æ—¶é—´ç»´åº¦ä¸Šè¾ƒå‰æ—¶åˆ»çš„æƒé‡æ— æ³•æ ¹æ®æœ€ç»ˆçš„ loss ä¿¡æ¯æ¥æ›´æ–°ã€‚RNN ä¸­å‚æ•°çš„æ¢¯åº¦è¢«è¿‘è·ç¦»æ¢¯åº¦ä¸»å¯¼ï¼Œå¯¼è‡´æ¨¡å‹éš¾ä»¥å­¦åˆ°è¿œè·ç¦»çš„ä¾èµ–å…³ç³»ã€‚æ³¨æ„ï¼ŒRNN ä¸­æ€»çš„æ¢¯åº¦æ˜¯ä¸ä¼šæ¶ˆå¤±çš„ã€‚å³ä¾¿æ¢¯åº¦è¶Šä¼ è¶Šå¼±ï¼Œé‚£ä¹Ÿåªæ˜¯è¿œè·ç¦»çš„æ¢¯åº¦æ¶ˆå¤±ï¼Œç”±äºè¿‘è·ç¦»çš„æ¢¯åº¦ä¸ä¼šæ¶ˆå¤±ï¼Œæ‰€æœ‰æ¢¯åº¦ä¹‹å’Œä¾¿ä¸ä¼šæ¶ˆå¤±ã€‚RNN æ¢¯åº¦æ¶ˆå¤±çš„æœ¬è´¨ï¼šç”±äºæ—¶é—´ç»´åº¦å…±äº«äº†å‚æ•°çŸ©é˜µï¼Œå¯¼è‡´è®¡ç®—éšæ€ $\\boldsymbol h_t$ çš„æ¢¯åº¦æ—¶ä¼šå¾ªç¯è®¡ç®—çŸ©é˜µä¹˜æ³•ï¼Œæ‰€ä»¥ BPTT ç®—æ³•æ±‚è§£æ¢¯åº¦æ—¶å‡ºç°äº†å‚æ•°çŸ©é˜µçš„ç´¯ä¹˜ï¼Œä½¿å¾—å½“æ—¶é—´å°ºåº¦è¿‡é•¿æ—¶çš„éšå±‚æ¢¯åº¦ä¸¢å¤±ã€‚1.6. æ¢¯åº¦çˆ†ç‚¸å¦ä¸€æ–¹é¢ï¼Œè‹¥ $\\boldsymbol W^T$ çš„å–å€¼è¾ƒå¤§ï¼Œå¯¼è‡´ $\\boldsymbol W tanh(\\boldsymbol h)$ çš„å€¼å¤§äº1ï¼Œé‚£ä¹ˆè¿ä¹˜çš„æ¯ä¸€é¡¹å‡å¤§äº1ï¼Œå°±ä¼šå¯¼è‡´æ¢¯åº¦çˆ†ç‚¸ç°è±¡ã€‚æ¢¯åº¦çˆ†ç‚¸ä¼šä½¿å¾—å­¦ä¹ ä¸ç¨³å®šï¼Œ å‚æ•°å˜åŒ–å¤ªå¤§å¯¼è‡´æ— æ³•è·å–æœ€ä¼˜å‚æ•°ã€‚2. å‚è€ƒæ–‡çŒ®[1]  åˆ˜å»ºå¹³Pinard. å¾ªç¯ç¥ç»ç½‘ç»œ(RNN)æ¨¡å‹ä¸å‰å‘åå‘ä¼ æ’­ç®—æ³•.[2]  ç»´åŸºç™¾ç§‘. çŸ©é˜µå¾®ç§¯åˆ†-å¸ƒå±€çº¦å®š.[3] ä»™å®ˆ. æ•°å­¦-çŸ©é˜µè®¡ç®—ï¼ˆ4ï¼‰ä¸¤ç§å¸ƒå±€.[4] è°“ä¹‹å°ä¸€. LSTMå¦‚ä½•è§£å†³RNNå¸¦æ¥çš„æ¢¯åº¦æ¶ˆå¤±é—®é¢˜.[5] thinkando. æœºå™¨å­¦ä¹ ä¸­çš„çŸ©é˜µã€å‘é‡æ±‚å¯¼.[6] Leoè“è‰². RNNæ­£å‘åŠåå‘ä¼ æ’­.[7] å°ç±³ç²¥. RNNçš„åå‘ä¼ æ’­-BPTT."
  },
  
  {
    "title": "æ·±åº¦å­¦ä¹ æ–‡ç« é˜…è¯»ï¼ˆFDNNï¼‰",
    "url": "/posts/deep-learning-FDNN/",
    "categories": "Academic, Paper",
    "tags": "fuzzy, deep learning",
    "date": "2020-09-28 09:43:19 +0800",
    





    
    "snippet": "FDNN äº2016å¹´ç”± Deng Yue æå‡ºï¼Œæ˜¯ä¸€ç§æ¨¡ç³Šæ·±åº¦ç¥ç»ç½‘ç»œçš„æ··åˆæ¶æ„ï¼Œåœ¨å›¾åƒåˆ†ç±»å’ŒåŒºåŸŸåˆ’åˆ†æ–¹é¢ä¼˜äºä¼ ç»Ÿçš„æ·±åº¦ç¥ç»ç½‘ç»œç­‰å¤šç§æ–¹æ³•ã€‚  1. ç½‘ç»œæ¶æ„          1.1. æ¨¡ç³Šé€»è¾‘è¡¨ç¤ºéƒ¨åˆ†      1.2. ç¥ç»è¡¨ç¤ºéƒ¨åˆ†      1.3. æ··åˆéƒ¨åˆ†      1.4. ä»»åŠ¡é©±åŠ¨éƒ¨åˆ†      1.5. æ€»ç»“        2. è®­ç»ƒ  3. å®éªŒ  4. å‚è€ƒæ–‡çŒ®1. ...",
    "content": "FDNN äº2016å¹´ç”± Deng Yue æå‡ºï¼Œæ˜¯ä¸€ç§æ¨¡ç³Šæ·±åº¦ç¥ç»ç½‘ç»œçš„æ··åˆæ¶æ„ï¼Œåœ¨å›¾åƒåˆ†ç±»å’ŒåŒºåŸŸåˆ’åˆ†æ–¹é¢ä¼˜äºä¼ ç»Ÿçš„æ·±åº¦ç¥ç»ç½‘ç»œç­‰å¤šç§æ–¹æ³•ã€‚  1. ç½‘ç»œæ¶æ„          1.1. æ¨¡ç³Šé€»è¾‘è¡¨ç¤ºéƒ¨åˆ†      1.2. ç¥ç»è¡¨ç¤ºéƒ¨åˆ†      1.3. æ··åˆéƒ¨åˆ†      1.4. ä»»åŠ¡é©±åŠ¨éƒ¨åˆ†      1.5. æ€»ç»“        2. è®­ç»ƒ  3. å®éªŒ  4. å‚è€ƒæ–‡çŒ®1. ç½‘ç»œæ¶æ„2016.ã€ŠA Hierarchical Fused Fuzzy Deep Neural Network for Data Classificationã€‹æ··åˆæ¶æ„ç”±å››éƒ¨åˆ†ç»„æˆï¼šæ¨¡ç³Šé€»è¾‘è¡¨ç¤ºéƒ¨åˆ†ï¼ˆé»‘è‰²ï¼‰ã€ç¥ç»è¡¨ç¤ºéƒ¨åˆ†ï¼ˆè“è‰²ï¼‰ã€æ··åˆéƒ¨åˆ†ï¼ˆç»¿è‰²ï¼‰ã€ä»»åŠ¡é©±åŠ¨éƒ¨åˆ†ï¼ˆçº¢è‰²ï¼‰ã€‚å‡è®¾ $l$ ä¸ºå±‚ç¼–å·ï¼Œ$a_i^{(l)}$ ä¸ºç¬¬ $l$ å±‚ç¬¬ $i$ ä¸ªç¥ç»å…ƒçš„è¾“å…¥ï¼Œ$o_i^{(l)}$ ä¸ºå¯¹åº”çš„è¾“å‡ºã€‚å‡è®¾æˆ‘ä»¬è¾“å…¥çš„å›¾åƒæœ‰ $k=15$ ä¸ªç±»åˆ«ï¼Œæ¯å¼ å›¾åƒæœ‰ $n=200$ ä¸ªç‰¹å¾ï¼Œé‚£ä¹ˆè¾“å…¥å±‚ç»´åº¦ä¸º200ï¼Œéš¶å±åº¦å‡½æ•°å±‚ç»´åº¦ä¸º $15\\times 200$ã€‚è¾“å‡ºå±‚ç»´åº¦ä¸º15ã€‚1.1. æ¨¡ç³Šé€»è¾‘è¡¨ç¤ºéƒ¨åˆ†è¾“å…¥å±‚çš„æ¯ä¸€ä¸ªç¥ç»å…ƒå‡äºå¤šä¸ªéš¶å±åº¦å‡½æ•°ç›¸è¿æ¥ï¼Œéš¶å±åº¦å‡½æ•°ç”¨æ¥è¡¨å¾ä»»æ„è¾“å…¥å…ƒç´ çš„è¯­è¨€æ ‡ç­¾ï¼Œè¿™é‡Œçš„è¾“å…¥å…ƒç´ å³è¾“å…¥å±‚çš„å•ä¸€ç¥ç»å…ƒï¼Œä¹Ÿå³è¾“å…¥å‘é‡çš„ä¸€ä¸ªç‰¹å¾ç»´åº¦ã€‚éš¶å±åº¦å‡½æ•°å±‚å°†è¾“å…¥è®¡ç®—ä¸ºå±äºæŸä¸ªæ¨¡ç³Šé›†çš„ç¨‹åº¦ã€‚æ–‡ä¸­é‡‡ç”¨é«˜æ–¯éš¶å±åº¦å‡½æ•°ï¼Œå°†ç¬¬ $i$ ä¸ªæ¨¡ç³Šç¥ç»å…ƒæ˜ å°„çš„ç¬¬ $k$ ä¸ªè¾“å…¥è½¬åŒ–ä¸ºæ¨¡ç³Šåº¦\\[o_i^{(l)} = u_i(a_k^{(l)})=e^{-\\frac{-(a_k^{(l)}-\\mu_i)^2}{\\sigma_i^2}},\\forall i\\]å¯¹äºè¾“å…¥çš„æ¯ä¸€ä¸ªç‰¹å¾ç»´åº¦ï¼ˆ$\\forall n$ï¼‰ï¼Œéš¶å±åº¦å‡½æ•°å±‚å‡ä¼šè®¡ç®—å…¶åœ¨æ¯ä¸ªç±»åˆ«ï¼ˆ$k$ï¼‰ä¸­çš„æ¨¡ç³Šåº¦ã€‚æ–‡ä¸­å‡å€¼ $\\mu$ å’Œæ–¹å·® $\\sigma$ çš„é€‰å–éµå¾ªå‰äººç ”ç©¶ï¼š  C.-T. Lin, C.-M. Yeh, S.-F. Liang, J.-F. Chung, and N. Kumar, â€œSupport-vector-based fuzzy neural network for pattern classification,â€ Fuzzy Systems, IEEE Transactions on, vol. 14, no. 1, pp. 31â€“41, 2006.  F.-J. Lin, C.-H. Lin, and P.-H. Shen, â€œSelf-constructing fuzzy neural network speed controller for permanent-magnet synchronous motor drive,â€ Fuzzy Systems, IEEE Transactions on, vol. 9, no. 5, pp. 751â€“759, 2001.ä»¥æŸä¸ªä¾‹å­ä¸ºä¾‹ï¼Œå‡è®¾è¾“å…¥çš„å›¾åƒæ˜¯ä¸€ä¸ªè‡ªè¡Œè½¦ï¼Œè¢«è½¬åŒ–ä¸ºä¸€ç»„ $n=6$ ç»´çš„ç‰¹å¾å‘é‡ï¼š{åœ†åœˆä¸ªæ•°ï¼Œé•¿ç›´çº¿ä¸ªæ•°ï¼Œé¢œè‰²ï¼Œç‰¹å¾1ï¼Œç‰¹å¾2ï¼Œç‰¹å¾3}ï¼Œåˆ™è¾“å…¥å±‚ï¼ˆInput layerï¼‰ä¸º 6 ä¸ªç¥ç»å…ƒã€‚å‡è®¾å›¾åƒçš„ç±»åˆ«ä¸º $k=4$ ç±»ï¼Œåˆ†åˆ«ä¸º {ç¯®çƒï¼Œæµ·æ»©ï¼Œè‡ªè¡Œè½¦ï¼Œæ˜¾ç¤ºå™¨}ï¼Œé‚£ä¹ˆå¯¹äºè¾“å…¥å±‚çš„æ¯ä¸ªç¥ç»å…ƒï¼ˆå›¾åƒç‰¹å¾å‘é‡çš„æ¯ä¸ªå…ƒç´ ï¼‰ï¼Œå…¶é’ˆå¯¹æ¯ä¸ªç±»åˆ«å‡å¯ä»¥è®¾è®¡ä¸€ä¸ªéš¶å±åº¦å‡½æ•°ï¼Œé‚£ä¹ˆéš¶å±åº¦å‡½æ•°æ€»å…±ä¸º $6\\times 4=24$ ä¸ªï¼Œä¹Ÿå³éš¶å±åº¦å‡½æ•°å±‚çš„ç¥ç»å…ƒä¸ªæ•°ä¸º $6\\times 4=24$ã€‚æ ¹æ®å¸¸è¯†ï¼Œå›¾åƒç‰¹å¾å‘é‡çš„ç¬¬ä¸€ä¸ªå…ƒç´ åœ†åœˆä¸ªæ•°ï¼Œå¯¹åº” 4 ä¸ªç±»åˆ«ä¸­çš„æœŸæœ›å–å€¼ä¸å¦¨è®¾ä¸º ${1,0.2,2,0}$ ï¼Œå› ä¸ºç¯®çƒä¸€èˆ¬å°± 1 ä¸ªåœ†åœˆï¼Œæµ·æ»©ä¸€èˆ¬æ²¡åœ†åœˆä½†æ˜¯ä¸æ’é™¤æœ‰çƒ­æ°”çƒæ··å…¥ï¼Œè‡ªè¡Œè½¦ä¸€èˆ¬æœ‰ 2 ä¸ªåœ†åœˆè½¦è½®ä½†æ˜¯ä¸æ’é™¤è¿˜æœ‰ç‹¬è½®è½¦å’Œä¸‰è½®è½¦ï¼Œæ˜¾ç¤ºå™¨ä¸€èˆ¬æ²¡æœ‰åœ†åœˆç‰¹å¾ã€‚é‚£ä¹ˆè¿™å››ä¸ªéš¶å±åº¦å‡½æ•°åˆ†åˆ«å¯èƒ½çš„å½¢çŠ¶ä¸ºï¼ˆè¯•å›¾ç”» 4 ä¸ªä¸åŒçš„é«˜æ–¯å‡½æ•°æœªæœï¼Œå¤§å®¶å‡‘æ´»çœ‹ï¼‰ï¼šå¯¹äºè¾“å…¥çš„è‡ªè¡Œè½¦å›¾åƒï¼Œå‡è®¾å…¶ç¬¬ä¸€ä¸ªç‰¹å¾å…ƒç´ çš„å€¼ï¼ˆé€šè¿‡å„ç§å›¾åƒç‰¹å¾æå–æ–¹æ³•å¤„ç†åï¼‰ä¸º 2.12ï¼Œç»è¿‡å››ä¸ªéš¶å±åº¦å‡½æ•°çš„è®¡ç®—åå–å€¼åˆ†åˆ«ä¸º {0.08, 0.14, 0.96, 0.02}ï¼Œå³ä¸ºéš¶å±åº¦å‡½æ•°å±‚çš„è¾“å‡ºï¼Œä¼ é€’åˆ°æ¨¡ç³Šè§„åˆ™å±‚ã€‚æ¨¡ç³Šè§„åˆ™å±‚æ‰§è¡Œæ¨¡ç³Š AND é€»è¾‘ï¼Œå®šä¹‰ä¸ºæ±‚è¿ä¹˜ï¼Œå‡è®¾ $\\Omega_i$ æ˜¯ç¬¬ $l-1$ å±‚æ‰€æœ‰ä¸ç¬¬ $l$ å±‚ç¬¬ $i$ ä¸ªç¥ç»å…ƒèŠ‚ç‚¹ç›¸è¿çš„ç¥ç»å…ƒï¼Œæœ‰ï¼š\\[o_i^{(l)} = \\prod_j o_j^{(l-1)},\\forall j\\in \\Omega_i\\]è¿ä¹˜åçš„ç»“æœä»ç„¶æ˜¯æ¨¡ç³Šåº¦ã€‚æ¨¡ç³Šè§„åˆ™å±‚çš„ç¥ç»å…ƒä¸ªæ•°ä¸ç±»åˆ«ä¸ªæ•° $k$ ç›¸åŒã€‚æ¥ç€ä¸¾ä¾‹ï¼Œä¾ç„¶æ˜¯è¾“å…¥è‡ªè¡Œè½¦çš„å›¾åƒï¼Œå…¶ 6 ä¸ªç‰¹å¾ç»´åº¦åˆ†åˆ«ç»è¿‡éš¶å±åº¦å‡½æ•°åï¼Œå¯¹åº”ç¬¬ä¸‰ç±»çš„æ¨¡ç³Šåº¦åº”è¯¥éƒ½å¾ˆé«˜ã€‚é‚£ä¹ˆç»è¿‡æ¨¡ç³Šè§„åˆ™å±‚å…¶è¿ä¹˜åï¼Œç¬¬ä¸‰ä¸ªç¥ç»å…ƒçš„å–å€¼ç›¸æ¯”å…¶å®ƒç¥ç»å…ƒè€Œè¨€æ˜¯ä¸€ä¸ªå¤§å€¼ï¼ˆæ¯”å¦‚ $0.96\\times 0.91\\times 0.82\\times 0.93\\gg0.1\\times0.2\\times0.12\\times0.23$ï¼‰ã€‚åä¹‹ï¼Œå¦‚æœè¾“å…¥ä¸€ä¸ªæ‰‹æœºçš„å›¾åƒï¼Œå…¶åœ¨å„æ–¹é¢ç‰¹å¾éƒ½æ¯”è¾ƒç¬¦åˆæ˜¾ç¤ºå™¨çš„ç‰¹å¾ï¼Œé‚£ä¹ˆå¯èƒ½åœ¨æ¨¡ç³Šè§„åˆ™å±‚ä¸Šç¬¬å››ä¸ªç¥ç»å…ƒçš„è¿ä¹˜ç»“æœè¾ƒå¤§ï¼Œä½†å› ä¸ºå®ƒåˆä¸æ˜¯ä¸€ä¸ªæ˜¾ç¤ºå™¨ï¼Œé‚£ä¹ˆå¯èƒ½å…¶è¿ä¹˜ç»“æœ $0.76\\times 0.82\\times 0.89\\times 0.75$ å¯èƒ½åˆå°äºè¾“å…¥æ˜¾ç¤ºå™¨å›¾åƒæ—¶çš„ç»“æœ $0.89\\times0.93\\times0.88\\times0.95$ã€‚1.2. ç¥ç»è¡¨ç¤ºéƒ¨åˆ†è¯¥éƒ¨åˆ†ç”¨æ¥å°†è¾“å…¥è½¬åŒ–ä¸ºæŸç§é«˜å±‚è¡¨è¾¾ï¼Œé‡‡ç”¨å…¨è¿æ¥ç¥ç»ç½‘ç»œï¼Œæ¿€æ´»å‡½æ•°ä¸ºSigmoidï¼Œå‚æ•°ä¸ºæƒé‡å’Œæ–¹å·® $\\theta^{(l)} = {\\boldsymbol w^{(l)},\\boldsymbol b^{(l)}}$ï¼Œæœ‰\\[o_i^{(l)} = \\frac{1}{1+e^{-a_i^{(l)}}},\\quad a_i^{(l)} = \\boldsymbol w_i^{(l)}\\boldsymbol o^{(l-1)} + \\boldsymbol b_i^{(l)}\\]1.3. æ··åˆéƒ¨åˆ†è¯¥éƒ¨åˆ†å—åˆ°å·²æœ‰ç ”ç©¶çš„å¯å‘ï¼Œé‡‡ç”¨ä¸€ä¸ªè¢«å¹¿æ³›ä½¿ç”¨çš„å¤šæ¨¡å‹æ··åˆç¥ç»ç½‘ç»œç»“æ„ï¼š  J. Ngiam, A. Khosla, M. Kim, J. Nam, H. Lee, and A. Y. Ng, â€œMultimodal deep learning,â€ in Proceedings of the 28th International Conference on Machine Learning (ICML-11), 2011, pp. 689â€“696.\\[\\begin{aligned}o_i^{(l)} &amp;= \\frac{1}{1+e^{-a_i^{(l)}}}\\\\a_i^{(l)} &amp;= (\\boldsymbol w_d)_i^{(l)}(\\boldsymbol o_d)^{(l-1)} + (\\boldsymbol w_f)_i^{(l)}(\\boldsymbol o_f)^{(l-1)} + \\boldsymbol b_i^{(l)}\\end{aligned}\\]å…¶ä¸­ï¼Œ$\\boldsymbol o_d$ è¡¨ç¤ºï¼ˆæ·±åº¦ï¼‰ç¥ç»è¡¨ç¤ºéƒ¨åˆ†çš„è¾“å‡ºï¼Œ$\\boldsymbol o_f$ è¡¨ç¤ºæ¨¡ç³Šé€»è¾‘è¡¨ç¤ºéƒ¨åˆ†çš„è¾“å‡ºï¼ŒäºŒè€…é€šè¿‡æƒé‡$\\boldsymbol w_d, \\boldsymbol w_f$ æ¥æ··åˆã€‚ç„¶åï¼Œæ··åˆåçš„ä¿¡æ¯ï¼Œé€šè¿‡ä¸ç¥ç»è¡¨ç¤ºéƒ¨åˆ†ç±»ä¼¼çš„å¤šå±‚å…¨è¿æ¥å±‚æ¥è¿›è¡Œæ›´æ·±åº¦çš„å˜æ¢ï¼Œè¾“å‡ºç»“æœç»“åˆäº†æ¨¡ç³Šåº¦å’Œç¥ç»è¡¨è¾¾ï¼Œè€Œä¸å†æ˜¯æ¨¡ç³Šåº¦ã€‚1.4. ä»»åŠ¡é©±åŠ¨éƒ¨åˆ†åœ¨è¯¥éƒ¨åˆ†ä¸­ï¼Œè®¾ç½®åˆ†ç±»å±‚ï¼Œå°†æ··åˆè¡¨è¾¾ä¿¡æ¯å¯¹åº”åˆ°ç›¸åº”çš„åˆ†ç±»ä¸­ï¼Œé‡‡ç”¨softmaxå‡½æ•°ã€‚å‡è®¾ $(\\boldsymbol f_i,y_i)$ æ˜¯ç¬¬ $i$ ä¸ªè¾“å…¥ä»¥åŠå…¶å¯¹åº”çš„æ ‡ç­¾ï¼Œ $\\pi_\\Theta(\\boldsymbol f_i)$ è¡¨ç¤º FDNN çš„å‰å‘ä¼ æ’­è¿‡ç¨‹ï¼Œé‚£ä¹ˆå¯¹äºç¬¬ $c$ ä¸ªé€šé“çš„ softmax å‡½æ•°çš„è®¡ç®—è¿‡ç¨‹å¦‚ä¸‹\\[\\hat y_{(ic)} = p(y_i\\vert\\boldsymbol f_i) = \\frac{e^{\\boldsymbol w_c\\pi_\\Theta(\\boldsymbol f_i)+b_c}}{\\sum_c e^{\\boldsymbol w_c\\pi_\\Theta(\\boldsymbol f_i)+b_c}}\\]å…¶ä¸­ï¼Œ$\\boldsymbol w_c, b_c$ åˆ†åˆ«ä¸ºç¬¬ $c$ ä¸ªç±»åˆ«çš„å›å½’ç³»æ•°å’Œå›å½’åå·®ï¼Œ$\\hat \\boldsymbol y=[\\hat y_{i1},\\cdots,\\hat y_{ik}]$ è¡¨ç¤º $k$ ç±»çš„é¢„æµ‹çš„æ ‡ç­¾è¾“å‡ºã€‚åœ¨ $m$ ä¸ªè®­ç»ƒæ ·æœ¬ä¸Šï¼Œé‡‡ç”¨ MSE ä½œä¸ºæŸå¤±å‡½æ•°\\[C = \\frac{1}{m}\\sum_i^m \\vert\\vert \\hat \\boldsymbol y_i-\\boldsymbol y_i \\vert\\vert_2^2\\]1.5. æ€»ç»“è™½ç„¶æœ‰å¤šç§å…¶å®ƒå¯é€‰æ–¹æ³•æ¥æå–æ·±åº¦æ··åˆä¿¡æ¯ï¼Œè¿™é‡Œä½œè€…ä»ç„¶å€¾å‘äºä½¿ç”¨æ¨¡ç³Šå­¦ä¹ ï¼ŒåŸå› æœ‰å¦‚ä¸‹ä¸‰ç‚¹ï¼š  æ¨¡ç³Šå­¦ä¹ å¯ä»¥æ–¹ä¾¿çš„é™ä½è¾“å…¥æ•°æ®çš„ä¸ç¡®å®šæ€§ï¼Œè¿™ç§é‡è¦çš„æ¨¡ç³Šåº¦é™ä½è¿½æ±‚æ˜¯æ¨¡ç³Šç³»ç»Ÿä¸å¯æˆ–ç¼ºçš„ç‰¹æ€§ï¼Œæ˜¯å…¶å®ƒå­¦ä¹ ç³»ç»Ÿæ— æ³•æ›¿ä»£çš„ã€‚  æ¨¡ç³Šå­¦ä¹ è‡ªç„¶ä¼šäº§ç”Ÿ $(0,1)$ èŒƒå›´å†…çš„è½¯é€»è¾‘å€¼ï¼ˆæ¨¡ç³Šè¡¨ç¤ºï¼‰ã€‚æ¨¡ç³Šé‡ï¼ˆåŸæ–‡fusionæœ‰è¯¯ï¼Œåº”ä¸ºfuzzyï¼‰å’Œç¥ç»è¾“å‡ºé‡åœ¨ç›¸åŒçš„èŒƒå›´å†…ï¼Œä½¿å¾—è¿™ä¸¤ç§è¾“å‡ºåœ¨èåˆéƒ¨åˆ†å¾ˆå®¹æ˜“èåˆã€‚  æ¨¡ç³Šå­¦ä¹ éƒ¨åˆ†å…è®¸ä»»åŠ¡é©±åŠ¨çš„å‚æ•°å­¦ä¹ ã€‚åœ¨è¿™é‡Œï¼Œé€šè¿‡åå‘ä¼ æ’­çš„æ™ºèƒ½æ•°æ®é©±åŠ¨å­¦ä¹ ï¼Œå¯ä»¥ä»£æ›¿ç²¾ç–²åŠ›ç«­çš„æ‰‹å·¥å‚æ•°è°ƒæ•´æ­¥éª¤ã€‚2. è®­ç»ƒæ¨¡å‹å¯ä»¥è¢«åˆ†ä¸ºæ¨¡ç³Šé€»è¾‘è¡¨ç¤ºéƒ¨åˆ†å’Œç¥ç»ç½‘ç»œéƒ¨åˆ†ï¼ˆåŒ…æ‹¬ç¥ç»è¡¨ç¤ºã€æ··åˆã€ä»»åŠ¡é©±åŠ¨éƒ¨åˆ†ï¼‰ï¼Œå¾…å­¦ä¹ çš„å‚æ•°ä¸ºæ¨¡ç³Šé€»è¾‘è¡¨ç¤ºéƒ¨åˆ†çš„ $\\mu, \\sigma$ ä»¥åŠç¥ç»ç½‘ç»œéƒ¨åˆ†çš„ $\\omega, b$ã€‚ä¸å¦¨å‡è®¾ï¼š\\[\\theta = [\\mu, \\sigma, \\omega, b]\\]å¯¹ä¸Šè¿°æ¨¡å‹è¿›è¡Œè®­ç»ƒä¸»è¦åŒ…æ‹¬ä¸¤ä¸ªæ­¥éª¤ï¼šåˆå§‹åŒ–å’Œå¾®è°ƒã€‚  é¦–å…ˆè¿›è¡Œåˆå§‹åŒ–ã€‚å¯¹äºç¥ç»éƒ¨åˆ†ï¼Œæ‰€æœ‰ç¥ç»å…ƒèŠ‚ç‚¹çš„ $b=0$ã€‚æƒé‡åœ¨ä»¥ä¸‹åŒºé—´å†…å‡åŒ€é‡‡æ ·éšæœºåˆå§‹åŒ–\\[\\omega_i^{(l)} \\sim U[-\\frac{1}{\\sqrt n^{(l-1)}},\\frac{1}{\\sqrt n^{(l-1)}}]\\]å…¶ä¸­ $U$ è¡¨ç¤ºå‡åŒ€åˆ†å¸ƒï¼Œ$n^{(l-1)}$ è¡¨ç¤ºç¬¬ $l-1$ å±‚çš„ç¥ç»å…ƒèŠ‚ç‚¹ä¸ªæ•°ã€‚å¯¹äºæ··åˆéƒ¨åˆ†ï¼Œ$n^{(l-1)}$ æ˜¯ä¸Šä¸€å±‚ä¹Ÿå³æ¨¡ç³Šè¡¨ç¤ºéƒ¨åˆ†çš„è¾“å‡ºå±‚å’Œç¥ç»è¡¨ç¤ºéƒ¨åˆ†çš„è¾“å‡ºå±‚çš„ç¥ç»å…ƒèŠ‚ç‚¹ä¸ªæ•°ä¹‹å’Œã€‚å¯¹äºæ¨¡ç³Šè¡¨ç¤ºéƒ¨åˆ†ï¼Œæ‰€æœ‰å±‚ï¼ˆå³éš¶å±åº¦å±‚å’Œæ¨¡ç³Šè§„åˆ™å±‚ï¼‰çš„æƒå€¼å‡ä¸º1ï¼ˆåç»­å­¦ä¹ ä¸­å›ºå®šä¸å˜ï¼Ÿï¼‰ã€‚éš¶å±åº¦å‡½æ•°å±‚çš„ç¥ç»å…ƒèŠ‚ç‚¹åŒ…æ‹¬ä¸¤ä¸ªçš„æœªçŸ¥å‚æ•°ï¼šç¬¬ $i$ ä¸ªæ¨¡ç³Šç¥ç»å…ƒèŠ‚ç‚¹çš„æ¨¡ç³Šä¸­å¿ƒ $\\mu_i$ å’Œæ¨¡ç³Šå®½åº¦ $\\sigma_i$ã€‚ä½œè€…æ ¹æ®è¾“å…¥æ•°æ®çš„ k-å‡å€¼èšç±»ç»“æœï¼ˆkä¸åˆ†ç±»æ•°ç›¸ç­‰ï¼‰ï¼Œé‡‡ç”¨ä¸‹é¢å‚è€ƒæ–‡çŒ®ä¸­çš„æ–¹æ³•åˆå§‹åŒ–è¿™äº›å‚æ•°ã€‚  N. Kasabov and Q. Song, â€œDenfis: dynamic evolving neural-fuzzy inference system and its application for time-series prediction,â€ Fuzzy Systems, IEEE Transactions on, vol. 10, no. 2, pp. 144â€“154, Apr 2002.  ç„¶åè¿›è¡Œå¾®è°ƒï¼ˆè®­ç»ƒï¼‰ã€‚ä½œè€…é‡‡ç”¨è‘—åçš„åå‘ä¼ æ’­ç®—æ³•æ¥è®¡ç®—æ‰€æœ‰å‚æ•°çš„æ¢¯åº¦ï¼Œä»è€Œè¿›è¡Œè®­ç»ƒ\\[\\frac{\\partial C}{\\partial \\theta^{(l)}} = \\sum_n (\\frac{\\partial C_n}{\\partial o_i^{(l)}})\\frac{\\partial o_i^{(l)}}{\\partial a_i^{(l)}}\\frac{\\partial a_i^{(l)}}{\\partial \\theta_i^{(l)}}\\]å…¶ä¸­ï¼Œç¬¬ä¸€é¡¹è¢«ç§°ä¸ºBPé¡¹ï¼Œåä¸¤é¡¹æ˜¯ä¸å±‚ç›¸å…³çš„æ±‚å¯¼é¡¹ã€‚ç¥ç»è¡¨ç¤ºéƒ¨åˆ†ã€æ··åˆéƒ¨åˆ†å’Œä»»åŠ¡é©±åŠ¨éƒ¨åˆ†çš„ç¥ç»å…ƒçš„åå‘ä¼ æ’­æ±‚å¯¼ï¼Œæ ¹æ®å‰é¢çš„å¼å­ï¼Œå› ä¸ºä½¿ç”¨çš„æ¿€æ´»å‡½æ•°å’Œå‚æ•°æ¯”è¾ƒç®€å•ï¼Œå› æ­¤æ±‚å¯¼å¾ˆç®€å•ã€‚æ¨¡ç³Šè¡¨ç¤ºéƒ¨åˆ†ï¼Œæ ¹æ®å‰é¢çš„å¼å­ï¼ŒåŒ…æ‹¬å‚æ•°å¯¹ $\\theta = (\\mu_i,\\sigma_i)$ ï¼ˆåŸæ–‡æœ‰è¯¯ï¼Œå†™ä¸ºäº† $\\theta = (m_i,\\sigma_i)$ï¼‰ï¼Œæ ¹æ®å‰é¢éš¶å±åº¦å‡½æ•°çš„å®šä¹‰ï¼Œå…¶å¯¹å‚æ•°çš„å¯¼æ•°ä¹Ÿå®¹æ˜“æ±‚å¾—ã€‚é‡‡ç”¨åŠ¨é‡æ¢¯åº¦ä¸‹é™æ³•è®­ç»ƒã€‚\\[\\begin{aligned}  v(t) &amp;= \\gamma v(t-1)+\\alpha\\frac{\\partial C}{\\partial \\theta^{(l)}}\\\\  \\theta^{(l)}(t+1) &amp;= \\theta^{(l)}(t)-v(t)\\end{aligned}\\]å…¶ä¸­ï¼Œ$v(t)$ æ˜¯é€Ÿåº¦å‘é‡ï¼Œç”±ä¸Šä¸€æ—¶åˆ»çš„é€Ÿåº¦å’Œå½“å‰çš„æ¢¯åº¦å†³å®šï¼Œ$t$ è¡¨ç¤ºè¿­ä»£è®¡æ•°ï¼Œ$\\gamma \\in [0,1]$ æ§åˆ¶ç”±ä¸Šä¸€æ—¶åˆ»æ¢¯åº¦è´¡çŒ®çš„ä¿¡æ¯çš„å½±å“å¤§å°ã€‚$\\alpha &lt; 1$ æ˜¯å­¦ä¹ ç‡ã€‚ä½œè€…å‚è€ƒå¦‚ä¸‹æ–‡çŒ®ï¼Œç»éªŒå®šç»™ä¸€ä¸ªè¾ƒå°çš„æ¢¯åº¦è®°å¿†ç³»æ•° $\\gamma=0.1$ å’Œå­¦ä¹ ç‡ $\\alpha = 0.05$ã€‚  I. Sutskever, J. Martens, G. Dahl, and G. Hinton, â€œOn the importance of initialization and momentum in deep learning,â€ in Proceedings of the 30th international conference on machine learning (ICML-13), 2013, pp. 1139â€“1147.ä¸ºè§£å†³è¿‡æ‹Ÿåˆé—®é¢˜ï¼Œä½œè€…é‡‡ç”¨äº† dropout ç­–ç•¥ï¼Œåœ¨æ¯æ¬¡è®­ç»ƒè¿­ä»£ä¸­éšæœºé€‰æ‹© $p\\%$ çš„ç¥ç»å…ƒï¼Œå®ƒä»¬çš„æ¢¯åº¦å°†ä¸ä¼šè¢«æ›´æ–°ã€‚3. å®éªŒä½œè€…è®¾è®¡äº†ä¸‰ä¸ªä¸åŒçš„ç½‘ç»œç»“æ„ C1ï¼ŒC2 å’Œ C3ï¼Œå¤æ‚ç¨‹åº¦é€æ¸å¢åŠ ã€‚            Â       Input      Fuzzy      Neural      Fusion      Output                  C1      $n$      $k\\times n$      $64(2)$      $64(2)$      $k$              C2      $n$      $k\\times n$      $128(2)$      $128(2)$      $k$              C3      $n$      $k\\times n$      $256(2)$      $256(2)$      $k$      ä½œè€…é‡‡ç”¨2ä¸ªåˆ†ç±»ä»»åŠ¡æ¥è¿›è¡Œå®éªŒï¼šè‡ªç„¶åœºæ™¯å›¾åƒåˆ†ç±»å’Œè‚¡ç¥¨èµ°åŠ¿é¢„æµ‹ã€‚è‡ªç„¶åœºæ™¯åˆ†ç±»ä¸­ï¼Œæ•°æ®é›†ä¸€å…±åŒ…å«4500ä¸ªè‡ªç„¶å›¾ç‰‡ï¼Œå…±15ä¸ªç±»ã€‚ä½œè€…é‡‡ç”¨ kernel assignment algorithm ä¸ºæ¯ä¸ªå›¾ç‰‡äº§ç”Ÿä¸€ä¸ªç›´æ–¹å›¾ä½œä¸ºç‰¹å¾æ¥åˆ†ç±»ã€‚æ¯å¼ å›¾åƒæœ€ç»ˆåŒ…æ‹¬200ä¸ªç å­—ï¼Œå› æ­¤ $k=15, n=200$ã€‚kernel assignment algorithm ç®—æ³•å‚è€ƒæ–‡çŒ®å¦‚ä¸‹  J. C. van Gemert, J.-M. Geusebroek, C. J. Veenman, and A. W. Smeulders, â€œKernel codebooks for scene categorization,â€ in Computer Visionâ€“ECCV 2008. Springer, 2008, pp. 696â€“709.è‚¡ç¥¨èµ°åŠ¿é¢„æµ‹ä¸­ï¼Œä»åˆ†ç±»çš„è§’åº¦ç†è§£ï¼Œå…¶ç›®æ ‡æ˜¯é¢„æµ‹è‚¡ç¥¨åœ¨æœªæ¥æŸä¸ªæ—¶é—´ $(t+\\mathcal H)$ çš„çŠ¶æ€æ˜¯æ¶¨ï¼Œè·Œï¼Œè¿˜æ˜¯æŒå¹³ã€‚å…¶ä¸­ $\\mathcal H$ æ˜¯é¢„æµ‹æ—¶é—´é—´éš”ã€‚ä½œè€…é‡‡ç”¨ä¸Šè¯é‡‘èæŒ‡æ•°æœŸè´§çš„é«˜é¢‘ tick è¡Œæƒ…æ•°æ®è¿›è¡Œåˆ†æï¼Œtick æ•°æ®æ¯ç§’æ›´æ–°2æ¬¡ï¼Œä¸€ä¸ªäº¤æ˜“æ—¥å¤šè¾¾ 32000 ä¸ª tick æ•°æ®ã€‚ä½œè€…å‚è€ƒå¦‚ä¸‹æ–‡çŒ®çš„æ–¹æ³•ï¼Œä»ä»·æ ¼ã€æˆäº¤é‡å’Œè®¢å•é‡ä¸­æå–å¤šä¸ªæŒ‡æ ‡ï¼Œå½’çº³ä¸ºä¸€ä¸ªé•¿å‘é‡ï¼ˆ$\\mathbb R^{76}$ï¼‰ï¼Œå„åˆ†é‡å…ƒç´ å½’ä¸€åŒ–åˆ° $[-1,1]$ åŒºé—´ã€‚å› æ­¤ $k=3, n=76$ã€‚æ›´è¿›ä¸€æ­¥ï¼Œè€ƒè™‘ä¸¤ç§é¢„æµ‹æ—¶é—´é—´éš”ï¼Œå³ $\\mathcal H = 5, \\mathcal H = 10$ï¼Œåˆ†åˆ«ä»£è¡¨ 5 å’Œ 10 ä¸ª tick é—´éš”ã€‚  Y. Deng, Y. Kong, F. Bao, and Q. Dai, â€œSparse coding-inspired optimal trading system for hft industry,â€ Industrial Informatics, IEEE Transactions on, vol. 11, no. 2, pp. 467â€“475, April 2015.4. å‚è€ƒæ–‡çŒ®æ— ã€‚"
  },
  
  {
    "title": "è‡ªé€‚åº”ç½‘ç»œæ¨¡ç³Šæ¨ç†ç³»ç»Ÿï¼ˆANFISï¼‰",
    "url": "/posts/deep-learning-ANFIS/",
    "categories": "Academic, Paper",
    "tags": "fuzzy, deep learning",
    "date": "2020-09-26 08:55:19 +0800",
    





    
    "snippet": "æœ¬æ–‡ä»‹ç»äº† 1993 å¹´å‘è¡¨çš„è‡ªé€‚åº”ç½‘ç»œæ¨¡ç³Šæ¨ç†ç³»ç»Ÿï¼ˆANFISï¼‰ï¼ŒAdaptive-Network-Based Fuzzy Inference Systemã€‚  1. åŸºç¡€çŸ¥è¯†          1.1. æ¨¡ç³Šæ¨ç†ç³»ç»Ÿ      1.2. è‡ªé€‚åº”ç½‘ç»œ      1.3. ANFIS ç»“æ„      1.4. ANFIS å­¦ä¹ ç®—æ³•        2. ç¨‹åºæ–‡ä»¶ç»„æˆ  3. membershi...",
    "content": "æœ¬æ–‡ä»‹ç»äº† 1993 å¹´å‘è¡¨çš„è‡ªé€‚åº”ç½‘ç»œæ¨¡ç³Šæ¨ç†ç³»ç»Ÿï¼ˆANFISï¼‰ï¼ŒAdaptive-Network-Based Fuzzy Inference Systemã€‚  1. åŸºç¡€çŸ¥è¯†          1.1. æ¨¡ç³Šæ¨ç†ç³»ç»Ÿ      1.2. è‡ªé€‚åº”ç½‘ç»œ      1.3. ANFIS ç»“æ„      1.4. ANFIS å­¦ä¹ ç®—æ³•        2. ç¨‹åºæ–‡ä»¶ç»„æˆ  3. membership.py          3.1. make_anfis()      3.2. make_gauss_mfs()      3.3. GaussMemFunc()        4. anfis.py          4.1. AnfisNet()      4.2. FuzzifyVariable ç±»      4.3. ConsequentLayer ç±»      4.4. PlainConsequentLayer ç±»        5. å‚è€ƒæ–‡çŒ®1. åŸºç¡€çŸ¥è¯†1.1. æ¨¡ç³Šæ¨ç†ç³»ç»ŸFuzzy Inference Systemï¼ˆFISï¼‰ï¼Œç”±äº”ä¸ªåŠŸèƒ½æ¨¡å—ç»„æˆï¼š  åŒ…å«è‹¥å¹²æ¨¡ç³Šif-thenè§„åˆ™çš„è§„åˆ™åº“ï¼›  å®šä¹‰å…³äºä½¿ç”¨æ¨¡ç³Šif-thenè§„åˆ™çš„æ¨¡ç³Šé›†çš„éš¶å±å‡½æ•°çš„æ•°æ®åº“ï¼›  åœ¨è§„åˆ™ä¸Šçš„æ‰§è¡Œæ¨ç†æ“ä½œçš„å†³ç­–å•å…ƒï¼›  å°†æ˜ç¡®è¾“å…¥è½¬åŒ–ä¸ºä¸è¯­è¨€ä»·å€¼åŒ¹é…çš„ç¨‹åº¦çš„æ¨¡ç³Šç•Œé¢ï¼›  å°†æ¨ç†å¾—åˆ°çš„æ¨¡ç³Šç»“æœè½¬åŒ–ä¸ºæ˜ç¡®è¾“å‡ºçš„å»æ¨¡ç³Šç•Œé¢ã€‚é€šå¸¸ï¼Œ1ã€2è¢«è”åˆç§°ä¸ºçŸ¥è¯†åº“ã€‚1.2. è‡ªé€‚åº”ç½‘ç»œè‡ªé€‚åº”ç½‘ç»œæ˜¯ä¸€ä¸ªç”±èŠ‚ç‚¹å’Œè¿æ¥èŠ‚ç‚¹çš„å®šå‘é“¾è·¯ç»„æˆçš„å¤šå±‚å‰é¦ˆç½‘ç»œï¼Œå…¶ä¸­æ¯ä¸ªèŠ‚ç‚¹å¯¹ä¼ å…¥çš„ä¿¡å·ä»¥åŠä¸æ­¤èŠ‚ç‚¹ç›¸å…³çš„ä¸€ç»„å‚æ•°æ‰§è¡Œä¸€ä¸ªç‰¹å®šçš„åŠŸèƒ½(èŠ‚ç‚¹å‡½æ•°)ã€‚è‡ªé€‚åº”ç½‘ç»œçš„ç»“æ„ä¸­åŒ…å«æœ‰å‚æ•°çš„æ–¹å½¢èŠ‚ç‚¹å’Œæ— å‚æ•°çš„åœ†å½¢èŠ‚ç‚¹ï¼Œè‡ªé€‚åº”ç½‘ç»œçš„å‚æ•°é›†æ˜¯æ¯ä¸ªè‡ªé€‚åº”èŠ‚ç‚¹çš„å‚æ•°é›†çš„ç»“åˆã€‚ä»–ä»¬çš„è¾“å‡ºä¾èµ–äºè¿™äº›èŠ‚ç‚¹ç›¸å…³çš„å‚æ•°ï¼Œå­¦ä¹ è§„åˆ™æŒ‡å®šå¦‚ä½•æ›´æ”¹è¿™äº›å‚æ•°ã€‚Jyh-Shing Roger Jang äº 1993 å¹´å‘è¡¨çš„ã€ŠANFIS : Adaptive-Network-Based Fuzzy Inference Systemã€‹ã€‚å½“æ—¶å¯¹äºå¤„ç†æ¨¡ç³Šä¸ç¡®å®šç³»ç»Ÿï¼Œä½¿ç”¨ä¼ ç»Ÿæ•°å­¦å·¥å…·çš„ç³»ç»Ÿå»ºæ¨¡å¹¶ä¸èƒ½å¾—åˆ°ä»¤äººæ»¡æ„çš„æ•ˆæœã€‚è€ƒè™‘é‡‡ç”¨æ¨¡ç³Šif-thenè§„åˆ™çš„æ¨¡ç³Šæ¨ç†ç³»ç»Ÿä¸éœ€è¦ç²¾ç¡®çš„å®šé‡åˆ†æå°±å¯ä»¥å¯¹äººçš„çŸ¥è¯†å’Œæ¨ç†è¿‡ç¨‹è¿›è¡Œå®šæ€§å»ºæ¨¡ï¼Œä½œè€…æå‡ºäº†ä¸€ç§åŸºäºè‡ªé€‚åº”ç½‘ç»œçš„æ¨¡ç³Šæ¨ç†ç³»ç»Ÿã€‚1.3. ANFIS ç»“æ„ANFISçš„æ¨¡å‹ç»“æ„ç”±è‡ªé€‚åº”ç½‘ç»œå’Œæ¨¡ç³Šæ¨ç†ç³»ç»Ÿåˆå¹¶è€Œæˆï¼Œåœ¨åŠŸèƒ½ä¸Šç»§æ‰¿äº†æ¨¡ç³Šæ¨ç†ç³»ç»Ÿçš„å¯è§£é‡Šæ€§çš„ç‰¹ç‚¹ä»¥åŠè‡ªé€‚åº”ç½‘ç»œçš„å­¦ä¹ èƒ½åŠ›ï¼Œèƒ½å¤Ÿæ ¹æ®å…ˆéªŒçŸ¥è¯†æ”¹å˜ç³»ç»Ÿå‚æ•°ï¼Œä½¿ç³»ç»Ÿçš„è¾“å‡ºæ›´è´´è¿‘çœŸå®çš„è¾“å‡ºã€‚ä¸ºç®€å•èµ·è§ï¼Œå‡å®šæ‰€è€ƒè™‘çš„æ¨¡ç³Šæ¨ç†ç³»ç»Ÿæœ‰2ä¸ªè¾“å…¥xå’Œyï¼Œå•ä¸ªè¾“å‡ºzã€‚å¯¹äºä¸€é˜¶ Takagi-Sugeno æ¨¡ç³Šæ¨¡å‹ï¼Œå¦‚æœå…·æœ‰ä»¥ä¸‹2æ¡æ¨¡ç³Šè§„åˆ™  rule 1: if $x$ is $A_1$ and $y$ is $B_1$ then $f_1=p_1x+q_1y+r_1$  rule 2: if $x$ is $A_2$ and y is $B_2$ then $f_2=p_2x+q_2y+r_2$é‚£ä¹ˆè¯¥ä¸€é˜¶T-Sæ¨¡ç³Šæ¨ç†ç³»ç»Ÿçš„ANFISç½‘ç»œç»“æ„å¦‚å›¾æ‰€ç¤ºè¾“å…¥xï¼Œyåœ¨ç¬¬ä¸€å±‚è¿›è¡Œæ¨¡ç³ŠåŒ–ï¼Œæ¨¡ç³ŠåŒ–çš„æ–¹æ³•ï¼šç”¨éš¶å±å‡½æ•°ï¼ˆmenbership functionsï¼ŒMFsï¼Œä¸€èˆ¬ä¸ºé’Ÿå½¢å‡½æ•°ï¼Œé’Ÿå½¢å‡½æ•°å‚æ•°ä¸ºå‰å‘å‚æ•°ï¼‰å¯¹è¾“å…¥ç‰¹å¾xï¼Œyè¿›è¡Œæ¨¡ç³ŠåŒ–æ“ä½œï¼Œå¾—åˆ°ä¸€ä¸ª[0,1]çš„éš¶å±åº¦ï¼ˆmenbership gradeï¼‰ï¼Œé€šå¸¸ç”¨muè¡¨ç¤ºã€‚åœ¨ç¬¬äºŒå±‚ï¼Œæ¯ä¸ªç‰¹å¾çš„éš¶å±åº¦muç›¸ä¹˜å¾—åˆ°æ¯ä¸ªè§„åˆ™çš„è§¦å‘å¼ºåº¦ï¼ˆfiring strengthï¼‰ã€‚ç¬¬ä¸‰å±‚å°†ä¸Šä¸€å±‚å¾—åˆ°çš„æ¯æ¡è§„åˆ™çš„è§¦å‘å¼ºåº¦åšå½’ä¸€åŒ–ï¼Œè¡¨å¾è¯¥è§„åˆ™åœ¨æ•´ä¸ªè§„åˆ™åº“ä¸­çš„è§¦å‘æ¯”é‡ï¼Œå³åœ¨æ•´ä¸ªæ¨ç†è¿‡ç¨‹ä¸­ä½¿ç”¨åˆ°è¿™æ¡è§„åˆ™çš„ç¨‹åº¦ï¼ˆç”¨æ¦‚ç‡ç†è§£ï¼‰ã€‚ç¬¬å››å±‚è®¡ç®—è§„åˆ™çš„ç»“æœï¼Œä¸€èˆ¬ç”±è¾“å…¥ç‰¹å¾çš„çº¿æ€§ç»„åˆç»™å‡ºï¼ˆå‡è®¾è¾“å…¥æœ‰nä¸ªç‰¹å¾ï¼Œ$f_i=c_0+c_1x_1+c_2x_2+â€¦+c_nx_n$ã€‚$c_0,c_1,â€¦,c_n$ä¸ºåå‘å‚æ•°ï¼‰ã€‚ç¬¬äº”å±‚å»æ¨¡ç³ŠåŒ–å¾—åˆ°ç¡®åˆ‡çš„è¾“å‡ºï¼Œæœ€ç»ˆçš„ç³»ç»Ÿè¾“å‡ºç»“æœä¸ºæ¯æ¡è§„åˆ™çš„ç»“æœçš„åŠ æƒå¹³å‡ï¼ˆæƒé‡ä¸ºè§„åˆ™çš„å½’ä¸€åŒ–è§¦å‘ç¨‹åº¦ï¼Œç†è§£ä¸ºè®¡ç®—æœŸæœ›ï¼‰ã€‚ANFIS is a way of presenting a fuzzy inference system (FIS) as a series of numeric layers so that it can be trained like a neural net.The canonical reference is the original paper by Jyh-Shing Roger Jang:  Jang, J.-S.R. (1993). â€œANFIS: adaptive-network-based fuzzy inference systemâ€. IEEE Transactions on Systems, Man and Cybernetics. 23 (3): 665â€“685. doi:10.1109/21.256541Note that it assumes a Takagi Sugeno Kang (TSK) style of defuzzification rather than the more usual Mamdani style.1.4. ANFIS å­¦ä¹ ç®—æ³•æ–‡ç« Wä¸­ç»™å‡ºçš„å­¦ä¹ ç®—æ³•ï¼ˆå‚æ•°æ›´æ–°æ–¹æ³•ï¼‰ä¸º LSE-GD æ··åˆå­¦ä¹ ç®—æ³•ã€‚å³æ›´æ–°å‚æ•°åŒæ—¶åœ¨å‰å‘ä¼ é€’å’Œåå‘ä¼ é€’ä¸­è¿›è¡Œã€‚åœ¨æ­£å‘ä¼ æ’­ä¸­ï¼Œæˆ‘ä»¬å›ºå®šå‰å‘å‚æ•°ï¼Œåœ¨è¾“å…¥ä¼ é€’åˆ°ç¬¬å››å±‚æ—¶ï¼Œé€šè¿‡æœ€å°äºŒä¹˜ä¼°è®¡ï¼ˆleast square estimateï¼ŒLSEï¼‰æ›´æ–°åå‘å‚æ•°ï¼Œåœ¨è¿™ç§å‰å‘å‚æ•°ï¼ˆéš¶å±åº¦å‡½æ•°çš„å‚æ•°ï¼‰å›ºå®šçš„å‰æä¸‹ï¼Œå¾—åˆ°çš„åå‘å‚æ•°ï¼ˆç¬¬å››è¹­çº¿æ€§ç»„åˆå‚æ•°ï¼‰ä¼°è®¡æ˜¯æœ€ä¼˜çš„ï¼Œè¿™æ ·ï¼Œæ··åˆå­¦ä¹ ç®—æ³•æ¯”å•çº¯çš„GDç®—æ³•è¦å¿«å¾ˆå¤šã€‚2. ç¨‹åºæ–‡ä»¶ç»„æˆANFISï¼ˆhttps://github.com/jfpower/anfis-pytorch ï¼‰The ANFIS framework is mainly in three files:      anfis.py This is where the layers of the ANFIS system are defined as Torch modules.        membership.py At the moment I only have Bell and Gaussian membership functions, but any others will go in here too.        experimental.py The experimental infrastructure to train and test the FIS, and to plot some graphs etc.  There are then some runnable examples:      jang_examples.py these are four examples from Jangâ€™s paper (based partly on the details in the paper, and particle on the example folders in his source code distribution).        vignette_examples.py these are three examples from the Vignette paper. Two of these use Gaussians rather than Bell MFs.  3. membership.pyå®šä¹‰äº†éš¶å±åº¦å‡½æ•°ã€‚3.1. make_anfis()def make_anfis(x, num_mfs=5, num_out=1, hybrid=True):    '''        Make an ANFIS model, auto-calculating the (Gaussian) MFs.        I need the x-vals to calculate a range and spread for the MFs.        Variables get named x0, x1, x2,... and y0, y1, y2 etc.    '''    num_invars = x.shape[1]    minvals, _ = torch.min(x, dim=0)    maxvals, _ = torch.max(x, dim=0)    ranges = maxvals-minvals    invars = []    for i in range(num_invars):        sigma = ranges[i] / num_mfs        mulist = torch.linspace(minvals[i], maxvals[i], num_mfs).tolist()        invars.append(('x{}'.format(i), make_gauss_mfs(sigma, mulist)))    outvars = ['y{}'.format(i) for i in range(num_out)]    model = AnfisNet('Simple classifier', invars, outvars, hybrid=hybrid)    return modelè¾“å…¥ x çš„åˆ—æ•°ä½œä¸ºè¾“å…¥çŠ¶æ€é‡çš„ä¸ªæ•°ï¼Œæ±‚ x è·¨è¡Œé—´æ¯”è¾ƒçš„æœ€å¤§å€¼å’Œæœ€å°å€¼ï¼ˆå³æ²¿ç€æ¯åˆ—æ±‚æœ€å¤§å€¼å’Œæœ€å°å€¼ï¼‰ minvals, maxvalsï¼Œå³å¯å¾—åˆ°è¾“å…¥å„ä¸ªçŠ¶æ€é‡çš„å–å€¼èŒƒå›´ rangesã€‚num_mfs ä¸ºéš¶å±åº¦å‡½æ•°çš„ä¸ªæ•°ã€‚å¯¹äºæ¯ä¸ªè¾“å…¥çŠ¶æ€é‡ï¼Œé‡‡ç”¨å–å€¼èŒƒå›´é™¤ä»¥ num_mfs æ¥åˆå§‹åŒ– sigmaï¼Œé‡‡ç”¨åœ¨å–å€¼èŒƒå›´å†…å‡åŒ€å– num_mfs ä¸ªç‚¹æ¥åˆå§‹åŒ– mulistã€‚ç”¨å¾—åˆ°çš„ sigma, mulist æ¥åˆå§‹åŒ–é«˜æ–¯éš¶å±åº¦å‡½æ•° make_gauss_mfs()ã€‚æœ€ç»ˆï¼Œå°†å¾—åˆ°çš„éš¶å±åº¦å‡½æ•°ï¼Œä¸ä¸€ä¸ªå­—ç¬¦ä¸² 'x{}'.format(i) ä¸€èµ·ï¼Œç»„æˆä¸€ä¸ªå…ƒç»„ï¼ˆtupleï¼‰ï¼Œæ·»åŠ åˆ°åˆ—è¡¨ invars ä¸­ä½œä¸ºåç»­å»ºç«‹ç½‘ç»œçš„è¾“å…¥ã€‚å‡è®¾è¾“å…¥çŠ¶æ€é‡ç»´åº¦ï¼ˆåˆ—æ•°ï¼‰ä¸º2ï¼Œåˆ™ invars çš„æˆå‘˜ä¸ºinvars[0] = ['x0', [GaussMembFunc(), GaussMembFunc(), GaussMembFunc()]]invars[1] = ['x1', [GaussMembFunc(), GaussMembFunc(), GaussMembFunc()]]outvars åˆ—è¡¨é€šè¿‡éå†è¾“å‡ºçŠ¶æ€é‡çš„ç»´åº¦æ¥å»ºç«‹ï¼Œæ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²åˆ—è¡¨ã€‚å‡è®¾è¾“å‡ºçŠ¶æ€é‡ç»´åº¦ä¸º3ï¼Œåˆ™ outvars çš„æˆå‘˜ä¸ºoutvars = ['y0', 'y1', 'y2']æœ€åï¼Œå°† invars å’Œ outvars  ä½œä¸ºå‚æ•°ä¼ å…¥ AnfisNet() å»ºç«‹ ANFIS ç½‘ç»œã€‚è½¬åˆ° AnfisNet() æŸ¥é˜…ã€‚3.2. make_gauss_mfs()def make_gauss_mfs(sigma, mu_list):    '''Return a list of gaussian mfs, same sigma, list of means'''    return [GaussMembFunc(mu, sigma) for mu in mu_list]make_gauss_mfs è¾“å…¥ sigma, mulist ï¼Œæ ¹æ® mulist çš„ä¸ªæ•°ï¼ˆä¹Ÿå°±æ˜¯ä¹‹å‰ make_anfis() å‡½æ•°ä¸­ä¼ å…¥çš„éš¶å±åº¦å‡½æ•°çš„ä¸ªæ•° num_mfsï¼‰ï¼Œè°ƒç”¨ GaussMembFunc()ï¼Œè¿”å›ä¸€ä¸ªæˆå‘˜ä¸º membership.GaussMembFunc ç±»å‹çš„åˆ—è¡¨ã€‚3.3. GaussMemFunc()class GaussMembFunc(torch.nn.Module):    '''        Gaussian membership functions, defined by two parameters:            mu, the mean (center)            sigma, the standard deviation.    '''    def __init__(self, mu, sigma):        super(GaussMembFunc, self).__init__()        self.register_parameter('mu', _mk_param(mu))        self.register_parameter('sigma', _mk_param(sigma))    def forward(self, x):        val = torch.exp(-torch.pow(x - self.mu, 2) / (2 * self.sigma**2))        return val    def pretty(self):        return 'GaussMembFunc {} {}'.format(self.mu, self.sigma)è¯¥å‡½æ•°åŒ…æ‹¬ mu, sigma ä¸¤ä¸ªå¯åå‘æ±‚å¯¼çš„å‚æ•°ï¼ŒåŒæ—¶åœ¨ foward ä¸­å®šä¹‰äº†å‡½æ•°çš„å‰å‘ä¼ æ’­è¡¨è¾¾å¼å¹¶è¿”å›å‡½æ•°å€¼ valï¼Œå³ä¸€ä¸ªé«˜æ–¯å‡½æ•°\\[val = e^{-\\frac{(x-\\mu)^2}{2\\sigma^2}}\\]4. anfis.pyå®šä¹‰äº† ANFIS çš„å±‚ã€‚4.1. AnfisNet()å®šä¹‰äº† 5 å±‚çš„ ANFIS ç½‘ç»œç±»å®¹å™¨ã€‚class AnfisNet(torch.nn.Module):    '''        This is a container for the 5 layers of the ANFIS net.        The forward pass maps inputs to outputs based on current settings,        and then fit_coeff will adjust the TSK coeff using LSE.    '''    def __init__(self, description, invardefs, outvarnames, hybrid=True):        super(AnfisNet, self).__init__()        self.description = description        self.outvarnames = outvarnames        self.hybrid = hybrid        varnames = [v for v, _ in invardefs]        mfdefs = [FuzzifyVariable(mfs) for _, mfs in invardefs]        self.num_in = len(invardefs)        self.num_rules = np.prod([len(mfs) for _, mfs in invardefs])        if self.hybrid:            cl = ConsequentLayer(self.num_in, self.num_rules, self.num_out)        else:            cl = PlainConsequentLayer(self.num_in, self.num_rules, self.num_out)        self.layer = torch.nn.ModuleDict(OrderedDict([            ('fuzzify', FuzzifyLayer(mfdefs, varnames)),            ('rules', AntecedentLayer(mfdefs)),            # normalisation layer is just implemented as a function.            ('consequent', cl),            # weighted-sum layer is just implemented as a function.            ]))åœ¨å‡½æ•°çš„åˆå§‹åŒ–ä¸­ï¼Œé¦–å…ˆå¯¹ invardefs è¿›è¡Œæ‹†åˆ†ï¼Œå‰é¢å·²çŸ¥invardefs[0] = ['x0', [GaussMembFunc(), GaussMembFunc(), GaussMembFunc()]]invardefs[1] = ['x1', [GaussMembFunc(), GaussMembFunc(), GaussMembFunc()]]è¿™é‡Œå°†å…¶æ‹†åˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†ï¼švarnames å’Œ mfdefs  varnames = ['x0', 'x1'] ä¸º invardefs çš„å‰åŠéƒ¨åˆ†  mfdefs æ˜¯ä¸€ä¸ªåˆ—è¡¨ï¼Œåˆ—è¡¨çš„æˆå‘˜ä¸º FuzzifyVariable ç±»ï¼ˆanfis.FuzzifyVariableï¼‰ï¼Œç±»çš„å½¢å‚è¾“å…¥ä¸º invardefs çš„ååŠéƒ¨åˆ†ï¼Œå³éš¶å±åº¦å‡½æ•°åˆ—è¡¨ï¼Œç»è¿‡ç±»åˆå§‹åŒ–åå¾—åˆ°å¦‚ä¸‹å½¢å¼çš„åˆ—è¡¨mfdefs = [FuzzifyVariable(  (mfdefs): ModuleDict(    (mf0): GaussMembFunc()    (mf1): GaussMembFunc()    (mf2): GaussMembFunc()  )),FuzzifyVariable(  (mfdefs): ModuleDict(    (mf0): GaussMembFunc()    (mf1): GaussMembFunc()    (mf2): GaussMembFunc()  ))]è·³è½¬åˆ° FuzzifyVariable() ç±» æŸ¥é˜…æ›´å¤šã€‚self.num_rules å°†æ‰€æœ‰éš¶å±åº¦å‡½æ•°ä¸ªæ•°åšå…ƒç´ ç§¯ï¼Œè¿™é‡Œ[len(mfs) for _, mfs in invardefs] = [3,3]np.prod[3,3] = 9ç„¶åå°†self.num_inï¼Œself.num_rulesï¼Œself.num_out ä½œä¸ºå‚æ•°ä¼ ç»™ PlainConsequentLayer() ç±»ã€‚ æœ€ç»ˆï¼Œå½¢æˆä¸€ä¸ªä¸‰å±‚ç½‘ç»œç»“æ„ self.layerã€‚å…¶ä¸­ï¼Œself.num_inï¼Œself.num_rules åœ¨å®ä¾‹åŒ– AnfisNet æ—¶ç¡®å®šï¼Œè€Œ self.num_out æ˜¯é€šè¿‡ä¸‹é¢ä»£ç æ ¹æ® self.outvarnames çš„é•¿åº¦å¾—åˆ°çš„    @property    def num_out(self):        return len(self.outvarnames)å…¶ä¸­ï¼Œ@property è£…é¥°å™¨[1] æŠŠ num_out çš„ getter æ–¹æ³•å˜æˆå±æ€§ï¼Œä½†æ˜¯æ²¡æœ‰å®šä¹‰ num_out.setter æ–¹æ³•ï¼Œä»è€Œå°† num_out å˜ä¸ºä¸€ä¸ª ç§æœ‰çš„åªè¯»å±æ€§ã€‚è¯¥å±æ€§æ— æ³•åœ¨å¤–éƒ¨è¿›è¡Œæ›´æ”¹ï¼Œè€Œæ˜¯åœ¨å®ä¾‹åŒ– AnfisNet æ—¶æ ¹æ® outvarnames è‡ªåŠ¨ç¡®å®šçš„ã€‚ä¸ä¹‹ç›¸åï¼Œcoeff å®šä¹‰æ—¶æ—¢åŒ…æ‹¬ @property åˆåŒ…æ‹¬ @coeff.setter æ–¹æ³•ï¼Œé‚£ä¹ˆ coeff å°±å¯ä»¥åœ¨å¤–éƒ¨è¿›è¡Œèµ‹å€¼æ›´æ”¹ã€‚    @property    def coeff(self):        return self.layer['consequent'].coeff    @coeff.setter    def coeff(self, new_coeff):        self.layer['consequent'].coeff = new_coeffè¿™æ ·åšçš„å¥½å¤„æ˜¯å¯ä»¥åœ¨èµ‹å€¼æ—¶è¿›è¡Œä¸€äº›å¤æ‚çš„æ“ä½œï¼Œæ¯”å¦‚ä¸Šè¿°ä»£ç ä¸­çš„ self.layer['consequent'].coeff = new_coeff æ“ä½œï¼Œæˆ–è€…å¦‚å‚è€ƒæ–‡çŒ® [1] ä¸­çš„å–å€¼ç±»å‹å’ŒèŒƒå›´çš„é™å®šæŠ¥é”™æç¤ºæ“ä½œã€‚    def fit_coeff(self, x, y_actual):        '''            Do a forward pass (to get weights), then fit to y_actual.            Does nothing for a non-hybrid ANFIS, so we have same interface.        '''        if self.hybrid:            self(x)            self.layer['consequent'].fit_coeff(x, self.weights, y_actual)    def input_variables(self):        '''            Return an iterator over this system's input variables.            Yields tuples of the form (var-name, FuzzifyVariable-object)        '''        return self.layer['fuzzify'].varmfs.items()    def output_variables(self):        '''            Return an list of the names of the system's output variables.        '''        return self.outvarnames    def extra_repr(self):        rstr = []        vardefs = self.layer['fuzzify'].varmfs        rule_ants = self.layer['rules'].extra_repr(vardefs).split('\\n')        for i, crow in enumerate(self.layer['consequent'].coeff):            rstr.append('Rule {:2d}: IF {}'.format(i, rule_ants[i]))            rstr.append(' '*9+'THEN {}'.format(crow.tolist()))        return '\\n'.join(rstr)    def forward(self, x):        '''            Forward pass: run x thru the five layers and return the y values.            I save the outputs from each layer to an instance variable,            as this might be useful for comprehension/debugging.        '''        self.fuzzified = self.layer['fuzzify'](x)        self.raw_weights = self.layer['rules'](self.fuzzified)        self.weights = F.normalize(self.raw_weights, p=1, dim=1)        self.rule_tsk = self.layer['consequent'](x)        # y_pred = self.layer['weighted_sum'](self.weights, self.rule_tsk)        y_pred = torch.bmm(self.rule_tsk, self.weights.unsqueeze(2))        self.y_pred = y_pred.squeeze(2)        return self.y_pred4.2. FuzzifyVariable ç±»class FuzzifyVariable(torch.nn.Module):    '''        Represents a single fuzzy variable, holds a list of its MFs.        Forward pass will then fuzzify the input (value for each MF).    '''    def __init__(self, mfdefs):        super(FuzzifyVariable, self).__init__()        if isinstance(mfdefs, list):  # No MF names supplied            mfnames = ['mf{}'.format(i) for i in range(len(mfdefs))]            mfdefs = OrderedDict(zip(mfnames, mfdefs))        self.mfdefs = torch.nn.ModuleDict(mfdefs)        self.padding = 0è¯¥ç±»çš„åˆå§‹åŒ–æ­¥éª¤å¦‚ä¸‹ï¼š  é€šè¿‡ isinstance() åˆ¤æ–­è¾“å…¥çš„ mfdefs æ˜¯å¦æ˜¯åˆ—è¡¨ï¼›  å¦‚æœæ˜¯ï¼Œåˆ™ç»™ mfdefs ä¸­çš„æ¯ä¸ªæˆå‘˜å–åä¸º mf{}.format(i)ï¼Œå¹¶å½¢æˆåˆ—è¡¨ mfnamesï¼›  é€šè¿‡ zip() å°† mfnames å’Œ mfdefs ç»„åˆæˆä¸€ä¸ªæˆå‘˜ä¸ºå…ƒç»„çš„åˆ—è¡¨ï¼ˆa list of tuplesï¼‰ï¼›  å°†ä¸Šè¿°åˆ—è¡¨ä¼ å…¥ OrderDict å¾—åˆ°æœ‰åºå­—å…¸ mfdefs  mfdefs ä¼ å…¥ torch.nn.ModuleDict() å¾—åˆ° self.mfdefsã€‚mfdefs = OrderedDict([    ('mf0', GaussMembFunc()),    ('mf1', GaussMembFunc()),    ('mf2', GaussMembFunc())])self.mfdefs = ModuleDict(  (mf0): GaussMembFunc()  (mf1): GaussMembFunc()  (mf2): GaussMembFunc())torch.nn.ModuleDict() è‡ªåŠ¨å°† mfdefs æ³¨å†Œä¸ºå‚æ•°ï¼ˆå¯è¢«åå‘ä¼ æ’­ä¸”å¯è¢«è¿ç§»åˆ°GPUä¸ŠåŠ é€Ÿè®¡ç®—ï¼‰ã€‚æ³¨æ„ï¼Œä¼ å…¥ torch.nn.ModuleDict() çš„ç±»å¿…é¡»æ˜¯ torch.nn.Module çš„å­ç±»ã€‚    @property    def num_mfs(self):        '''Return the actual number of MFs (ignoring any padding)'''        return len(self.mfdefs)    def members(self):        '''            Return an iterator over this variables's membership functions.            Yields tuples of the form (mf-name, MembFunc-object)        '''        return self.mfdefs.items()    def pad_to(self, new_size):        '''            Will pad result of forward-pass (with zeros) so it has new_size,            i.e. as if it had new_size MFs.        '''        self.padding = new_size - len(self.mfdefs)    def fuzzify(self, x):        '''            Yield a list of (mf-name, fuzzy values) for these input values.        '''        for mfname, mfdef in self.mfdefs.items():            yvals = mfdef(x)            yield(mfname, yvals)    def forward(self, x):        '''            Return a tensor giving the membership value for each MF.            x.shape: n_cases            y.shape: n_cases * n_mfs        '''        y_pred = torch.cat([mf(x) for mf in self.mfdefs.values()], dim=1)        if self.padding &gt; 0:            y_pred = torch.cat([y_pred,                                torch.zeros(x.shape[0], self.padding)], dim=1)        return y_pred4.3. ConsequentLayer ç±»class ConsequentLayer(torch.nn.Module):    '''        A simple linear layer to represent the TSK consequents.        Hybrid learning, so use MSE (not BP) to adjust coefficients.        Hence, coeffs are no longer parameters for backprop.    '''    def __init__(self, d_in, d_rule, d_out):        super(ConsequentLayer, self).__init__()        c_shape = torch.Size([d_rule, d_out, d_in+1])        self._coeff = torch.zeros(c_shape, dtype=dtype, requires_grad=True)    @property    def coeff(self):        '''            Record the (current) coefficients for all the rules            coeff.shape: n_rules * n_out * (n_in+1)        '''        return self._coeff    @coeff.setter    def coeff(self, new_coeff):        '''            Record new coefficients for all the rules            coeff: for each rule, for each output variable:                   a coefficient for each input variable, plus a constant        '''        assert new_coeff.shape == self.coeff.shape, \\            'Coeff shape should be {}, but is actually {}'\\            .format(self.coeff.shape, new_coeff.shape)        self._coeff = new_coeff4.4. PlainConsequentLayer ç±»ç»§æ‰¿è‡ª ConsequentLayer ç±»5. å‚è€ƒæ–‡çŒ®[1] luyuze95 åªé¡¾é£é›¨å…¼ç¨‹. pythonä¸­@propertyè£…é¥°å™¨çš„ä½¿ç”¨.[2] Rudolf Kruse. Fuzzy neural network.[3] Milan Mares. Fuzzy Sets.[4] L.A. Zadeh. Fuzzy sets.[5] Pranav Gajjewar. Understanding Fuzzy Neural Network using code and animation"
  },
  
  {
    "title": "æ·±åº¦å­¦ä¹ åŸºç¡€ï¼ˆFuzzyï¼ŒFNNï¼‰",
    "url": "/posts/deep-learning-fuzzy-basic/",
    "categories": "Academic, Knowledge",
    "tags": "fuzzy, deep learning",
    "date": "2020-09-25 08:55:19 +0800",
    





    
    "snippet": "æœ¬æ–‡ä»‹ç»äº†æ¨¡ç³Šçš„åŸºç¡€çŸ¥è¯†ï¼ŒåŒ…æ‹¬æ¨¡ç³Šé›†ï¼Œæ¨¡ç³Šé€»è¾‘ï¼Œæ¨¡ç³Šå†³ç­–ï¼Œæ¨¡ç³Šç¥ç»ç½‘ç»œï¼ˆFNNï¼‰ã€‚  1. åŸºç¡€çŸ¥è¯†          1.1. æ¨¡ç³Šé›†ä¸éš¶å±åº¦      1.2. æ¨¡ç³Šé›†è¿ç®—      1.3. æ¨¡ç³Šåº¦      1.4. æ¨¡ç³Šé€»è¾‘      1.5. æ¨¡ç³Šå†³ç­–        2. æ¨¡ç³Šç¥ç»ç½‘ç»œ  3. å‚è€ƒæ–‡çŒ®1. åŸºç¡€çŸ¥è¯†1.1. æ¨¡ç³Šé›†ä¸éš¶å±åº¦  A fuzzy set is a c...",
    "content": "æœ¬æ–‡ä»‹ç»äº†æ¨¡ç³Šçš„åŸºç¡€çŸ¥è¯†ï¼ŒåŒ…æ‹¬æ¨¡ç³Šé›†ï¼Œæ¨¡ç³Šé€»è¾‘ï¼Œæ¨¡ç³Šå†³ç­–ï¼Œæ¨¡ç³Šç¥ç»ç½‘ç»œï¼ˆFNNï¼‰ã€‚  1. åŸºç¡€çŸ¥è¯†          1.1. æ¨¡ç³Šé›†ä¸éš¶å±åº¦      1.2. æ¨¡ç³Šé›†è¿ç®—      1.3. æ¨¡ç³Šåº¦      1.4. æ¨¡ç³Šé€»è¾‘      1.5. æ¨¡ç³Šå†³ç­–        2. æ¨¡ç³Šç¥ç»ç½‘ç»œ  3. å‚è€ƒæ–‡çŒ®1. åŸºç¡€çŸ¥è¯†1.1. æ¨¡ç³Šé›†ä¸éš¶å±åº¦  A fuzzy set is a class of objects with a continuum of grades of membership. Such a set is characterized by a membership (characteristic) function which assigns to each object a grade of membership ranging between zero and one. â€”â€” Fuzzy sets by L.A. Zadeh, 1965æ¨¡ç³Šé›†æ˜¯ä¸€ç±»å…·æœ‰è¿ç»­éš¶å±åº¦çš„å¯¹è±¡ã€‚è¿™æ ·ä¸€ä¸ªé›†åˆå¯ä»¥ç”¨ä¸€ä¸ªæˆå‘˜ï¼ˆç‰¹å¾ï¼‰å‡½æ•°æ¥è¡¨å¾ï¼Œè¯¥å‡½æ•°ä¸ºæ¯ä¸ªå¯¹è±¡åˆ†é…0åˆ°1ä¹‹é—´çš„æˆå‘˜çº§åˆ«ã€‚  Fuzzy set is a mathematical model of vague qualitative or quantitative data, frequently generated by means of the natural language. â€”â€” Fuzzy Sets Milan Mares @ scholarpediaæ¨¡ç³Šé›†æ˜¯ä¸€ç§æ¨¡ç³Šçš„å®šæ€§æˆ–å®šé‡æ•°æ®çš„æ•°å­¦æ¨¡å‹ï¼Œç»å¸¸å€ŸåŠ©è‡ªç„¶è¯­è¨€ç”Ÿæˆã€‚è¯¥æ¨¡å‹æ˜¯åŸºäºç»å…¸çš„é›†åˆåŠå…¶ç‰¹å¾å‡½æ•°æ¦‚å¿µçš„æ¨å¹¿ã€‚  The attempts to use the computing technology for processing such models have pointed at the fact that the traditional probabilistic processing of uncertainty is not adequate to the properties of vagueness. Meanwhile the probability, roughly speaking, predicts the development of well defined factor (e.g., which side of a coin appears, which harvest we can expect, etc.), the fuzziness analyzes the uncertain classification of already existing and known factors, e.g., is a color â€œrather violetâ€ or â€œalmost blueâ€? â€œIs the patientâ€™s temperature a bit higher, or is it a fever?â€, etc. â€”â€” Fuzzy Sets Milan Mares @ scholarpediaåˆ©ç”¨è®¡ç®—æŠ€æœ¯å¤„ç†è¿™ç±»æ¨¡å‹çš„å°è¯•è¡¨æ˜ï¼Œä¼ ç»Ÿçš„ä¸ç¡®å®šæ€§æ¦‚ç‡å¤„ç†æ–¹æ³•ä¸è¶³ä»¥å¤„ç†æ¨¡ç³Šç‰¹æ€§ã€‚ç²—ç•¥åœ°è¯´ï¼Œæ¦‚ç‡ç”¨æ¥é¢„æµ‹å®šä¹‰æ˜ç¡®çš„å› ç´ çš„å‘å±•ï¼ˆä¾‹å¦‚ï¼Œç¡¬å¸çš„å“ªä¸€é¢å‡ºç°äº†ï¼Œæˆ‘ä»¬æœŸæœ›çš„æ”¶è·æƒ…å†µç­‰ï¼‰ï¼Œè€Œæ¨¡ç³Šæ€§åˆ†æå·²ç»å­˜åœ¨å’Œå·²çŸ¥çš„å› ç´ çš„ä¸ç¡®å®šåˆ†ç±»ï¼Œä¾‹å¦‚ï¼Œé¢œè‰²æ˜¯â€œç›¸å½“ç´«ç½—å…°è‰²â€è¿˜æ˜¯â€œå‡ ä¹è“è‰²â€ï¼Œç—…äººçš„ä½“æ¸©â€œæœ‰ç‚¹é«˜ï¼Œè¿˜æ˜¯å‘çƒ§ï¼Ÿâ€ç­‰ç­‰ã€‚  In classical set theory, the membership of elements in a set is assessed in binary terms according to a bivalent condition â€” an element either belongs or does not belong to the set. By contrast, fuzzy set theory permits the gradual assessment of the membership of elements in a set; this is described with the aid of a membership function valued in the real unit interval [0,â€‰1]. â€”â€” wikipediaåœ¨ç»å…¸é›†åˆè®ºä¸­ï¼Œä¸€ä¸ªé›†åˆä¸­å…ƒç´ çš„éš¶å±åº¦æ˜¯æ ¹æ®ä¸€ä¸ªäºŒä»·æ¡ä»¶ï¼ˆä¸€ä¸ªå…ƒç´ è¦ä¹ˆå±äºé›†åˆï¼Œè¦ä¹ˆä¸å±äºé›†åˆï¼‰ç”¨äºŒå…ƒé¡¹æ¥è¯„ä¼°ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œæ¨¡ç³Šé›†ç†è®ºå…è®¸é€æ­¥è¯„ä¼°é›†åˆä¸­å…ƒç´ çš„éš¶å±åº¦ï¼›è¿™æ˜¯å€ŸåŠ©äºä»¥å®æ•°å•ä½åŒºé—´ $[0,1]$ å–å€¼çš„éš¶å±å‡½æ•°æ¥æè¿°çš„ã€‚  ä»»ä½•ç§‘å­¦ç†è®ºéƒ½æœ‰å®ƒçš„ç ”ç©¶å¯¹è±¡ï¼Œè¿™äº›å¯¹è±¡æ„æˆä¸€ä¸ªä¸ç©ºçš„é›†åˆï¼Œç§°ä¸ºè®ºåŸŸã€‚åœ¨å½¢å¼ç§‘å­¦é‡Œï¼Œè®ºåŸŸï¼ˆæˆ–ç§°åšè®ºè¿°å…¨é›†ï¼‰ï¼Œæ˜¯æŒ‡åœ¨æŸäº›ç³»ç»ŸåŒ–çš„è®ºè¿°é‡Œçš„ä¸€äº›ä»¤äººæ„Ÿå…´è¶£çš„å˜æ•°ä¹‹ä¸Šï¼Œç”±å…¶ä¸­çš„å®ä½“æ‰€ç»„æˆçš„é›†åˆã€‚ç»™å®šä¸€ä¸ªè®ºåŸŸï¼ˆuniverse of discourseï¼‰ $U$ ï¼Œé‚£ä¹ˆä» $U$ åˆ°å•ä½åŒºé—´ $[0,1]$ çš„ä¸€ä¸ªæ˜ å°„ $\\mu_A:U\\rightarrow[0,1]$ ç§°ä¸º $U$ ä¸Šçš„ä¸€ä¸ªæ¨¡ç³Šé›†ã€‚  è¦æ³¨æ„ï¼Œä¸¥æ ¼åœ°è¯´ï¼Œæ¨¡ç³Šé›†æˆ–å­é›†æ˜¯æ˜ å°„æ‰€ç¡®å®šçš„åºå¯¹é›†ï¼Œä½†ç”±äºæ¨¡ç³Šå­é›†å®Œå…¨ç”±å…¶éš¶å±å‡½æ•°æ‰€ç¡®å®šï¼Œå› è€Œæˆ‘ä»¬ä¸åŒºåˆ†æ˜ å°„å’Œæ˜ å°„æ‰€ç¡®å®šçš„åºå¯¹é›†ï¼Œè€Œæ€»æ˜¯ç›´æ¥æŠŠæ¨¡ç³Šå­é›†å®šä¹‰ä¸ºä¸€ä¸ªæ»¡è¶³ä¸Šè¿°å®šä¹‰çš„æ˜ å°„ã€‚æ¨¡ç³Šé›†å¯ä»¥è®°ä¸º $A$ï¼Œæ˜ å°„ï¼ˆå‡½æ•°ï¼‰$\\mu(\\cdot)$ æˆ–ç®€è®°ä¸º $\\mu_A$ å«åšæ¨¡ç³Šé›† $A$ çš„éš¶å±åº¦å‡½æ•°ï¼ˆmembership functionï¼‰ã€‚å¯¹äºæ¯ä¸€ä¸ª $x\\in U$ ï¼Œ$\\mu_A(x)$ å«åšå…ƒç´  $x$ å¯¹æ¨¡ç³Šé›† $A$ çš„éš¶å±åº¦ã€‚ä¼ ç»Ÿé›†åˆåœ¨æ¨¡ç³Šé›†ç†è®ºä¸­é€šå¸¸ç§°ä½œâ€œæ˜ç¡®é›†ï¼ˆcrisp setï¼‰ï¼Œè€Œéš¶å±åº¦å‡½æ•°åªèƒ½å– 0 æˆ–è€… 1 æ—¶ï¼Œå¯¹åº”äºä¼ ç»Ÿé›†åˆçš„æŒ‡ç¤ºå‡½æ•°ï¼ˆindicator functionï¼‰ã€‚æ¨¡ç³Šé›†å¯ä»¥è¡¨ç¤ºä¸ºï¼š  è§£ææ³•ï¼šä¹Ÿå³ç»™å‡ºéš¶å±åº¦å‡½æ•°çš„å…·ä½“è¡¨è¾¾å¼ï¼ˆæˆ–è€…å¦‚ä¸Šå›¾çš„æ›²çº¿å½¢å¼ï¼‰ï¼›  Zadeh è®°æ³•ï¼š$A = \\frac{1}{x_1} + \\frac{0.7}{x_2} + \\frac{0}{x_3}$ï¼Œåˆ†æ¯æ˜¯è®ºåŸŸä¸­çš„å…ƒç´ ï¼Œåˆ†å­æ˜¯å¯¹åº”çš„éš¶å±åº¦ï¼›  ç»­å¶æ³•ï¼š$A = {(x_1,1),(x_2,0.7),(x_3,0)}$ï¼›  å‘é‡æ³•ï¼šåœ¨æœ‰é™è®ºåŸŸçš„åœºåˆï¼Œç»™è®ºåŸŸä¸­å…ƒç´ è§„å®šä¸€ä¸ªè¡¨è¾¾çš„é¡ºåºï¼Œé‚£ä¹ˆå¯ä»¥å°†ä¸Šè¿°åºå¶æ³•ç®€å†™ä¸ºéš¶å±åº¦çš„å‘é‡å¼ï¼Œå¦‚ $A=(1,0.7,0)$ã€‚ä¸€ä¸ªæ¨¡ç³Šé›†çš„å®ä¾‹ï¼Œå‡è®¾ $Age\\in[0,100]$ æ˜¯ä¸€ä¸ªè®ºåŸŸï¼Œï¼Œæˆ‘ä»¬å¯ä»¥å®šä¹‰ä¸¤ä¸ªæ¨¡ç³Šé›† young ï¼Œmidlifeï¼Œå’Œ oldã€‚å¯¹äºæ¨¡ç³Šé›† young å¯ä»¥å®šä¹‰ä¸ºä¸‹å›¾çš„å½¢å¼ã€‚å½“ç„¶ä¹Ÿå¯ä»¥å®šä¹‰ä¸ºå…¶å®ƒå½¢å¼ã€‚å¦ä¸€ä¸ªæ¨¡ç³Šé›†çš„å®ä¾‹ï¼šä¸€ä¸ªå¸¸ç”¨çš„éš¶å±åº¦å‡½æ•°ä¸ºé«˜æ–¯éš¶å±åº¦å‡½æ•°\\[A(x)=e^{-\\frac{-(x-\\mu)^2}{\\sigma^2}}\\]å…¶ä¸­ $\\mu, \\sigma$ åˆ†åˆ«ä¸ºé«˜æ–¯éš¶å±åº¦å‡½æ•°çš„ä¸­å¿ƒå’Œå®½åº¦ã€‚1.2. æ¨¡ç³Šé›†è¿ç®—é¦–å…ˆå»ºç«‹å…¬å…±å‡è®¾ï¼š$A,B,C\\sim U,\\forall x \\in U$  Standard fuzzy set operations are union, intersection and complementæ¨¡ç³Šé›†çš„å…³ç³»åŒ…æ‹¬ï¼šç›¸ç­‰ã€åŒ…å«ã€‚      è‹¥ $\\mu_A(x) = \\mu_B(x)$ï¼Œåˆ™ç§° $B$ å’Œ $A$ ç›¸ç­‰ï¼Œè®°ä¸º $A = B$ï¼›        è‹¥ $\\mu_A(x)\\leq \\mu_B(x)$ï¼Œåˆ™ç§° $B$ åŒ…å« $A$ï¼Œè®°ä¸º $A \\subseteq B$ã€‚  æ ‡å‡†çš„æ¨¡ç³Šé›†è¿ç®—åŒ…æ‹¬ï¼šäº¤ï¼ˆå–å°ï¼‰ã€å¹¶ï¼ˆå–å¤§ï¼‰ã€è¡¥ã€‚      æ¨¡ç³Šé›†çš„äº¤é›†å®šä¹‰ä¸ºå–æ¨¡ç³Šé›†ä¸­çš„æœ€å°å€¼ã€‚$C=A\\cap B:\\mu_C(x) = min{\\mu_A(x),\\mu_B(x)} = \\mu_A(x)\\land \\mu_B(x)$        æ¨¡ç³Šé›†çš„äº¤é›†å®šä¹‰ä¸ºå–æ¨¡ç³Šé›†ä¸­çš„æœ€å¤§å€¼ã€‚$C=A\\cup B:\\mu_C(x) = max{\\mu_A(x),\\mu_B(x)} = \\mu_A(x)\\lor \\mu_B(x)$        æ¨¡ç³Šé›†çš„äº¤é›†å®šä¹‰ä¸ºå–æ¨¡ç³Šé›†ä¸­çš„åå€¼ã€‚$C = A^C:\\mu_C(x) = \\mu_{A^C}(x) = 1-\\mu_A(x)$  ä¸‹é¢ç»™ä¸€ä¸ªå¹¶ï¼ˆå–å¤§ï¼‰å’Œäº¤ï¼ˆå–å°ï¼‰çš„ä¾‹å­ã€‚1.3. æ¨¡ç³Šåº¦ä¸€ä¸ªæ¨¡ç³Šé›† $A$ çš„æ¨¡ç³Šç¨‹åº¦çš„è¡¡é‡ï¼Œç›´è§‚å®šä¹‰å¦‚ä¸‹ï¼šè®¾æ˜ å°„ $D:F(U)\\rightarrow [0,1]$ æ»¡è¶³ä¸‹è¿°5ä¸ªæ€§è´¨ï¼š  æ¸…æ™°æ€§ï¼š$D(A) = 0$ å½“ä¸”ä»…å½“ $A\\in P(U)$ã€‚ï¼ˆç»å…¸é›†çš„æ¨¡ç³Šåº¦æ’ä¸º0ï¼‰  æ¨¡ç³Šæ€§ï¼š$D(A) = 1$ å½“ä¸”ä»…å½“ $\\forall x \\in U, A(x) = 0.5$ã€‚ï¼ˆéš¶å±åº¦éƒ½ä¸º 0.5 çš„æ¨¡ç³Šé›†æœ€æ¨¡ç³Šï¼‰  å•è°ƒæ€§ï¼š$\\forall x\\in U$ï¼Œå¦‚æœ $A(x)\\leq B(x) \\leq 0.5$ æˆ–è€… $A(x) \\geq B(x) \\geq 0.5$ï¼Œåˆ™ $D(A)\\leq D(B)$ã€‚ï¼ˆå…ƒç´ éš¶å±åº¦è¶Šé è¿‘ 0.5 çš„æ¨¡ç³Šé›†è¶Šæ¨¡ç³Šï¼‰  å¯¹ç§°æ€§ï¼š$\\forall A\\in F(U)$ï¼Œæœ‰ $D(A^c)=D(A)$ã€‚ï¼ˆè¡¥é›†çš„æ¨¡ç³Šåº¦ç›¸ç­‰ï¼‰  å¯åŠ æ€§ï¼š$D(A\\cup B) + D(A\\cap B) = D(A) + D(B)$ã€‚åˆ™ç§° $D$ æ˜¯å®šä¹‰åœ¨ $F(U)$ ä¸Šçš„æ¨¡ç³Šåº¦å‡½æ•°ï¼Œè€Œ $D(A)$ ä¸ºæ¨¡ç³Šé›† $A$ çš„æ¨¡ç³Šåº¦ã€‚å¯ä»¥è¯æ˜ï¼Œç¬¦åˆä¸Šè¿°å®šä¹‰çš„æ¨¡ç³Šåº¦æ˜¯å­˜åœ¨çš„ã€‚ä¸€ä¸ªå¸¸ç”¨æ¨¡ç³Šåº¦çš„å…¬å¼ï¼ˆåˆ†åˆ«é’ˆå¯¹æœ‰é™å’Œæ— é™è®ºåŸŸï¼‰ä¸º\\[\\begin{aligned}  D_p(A) &amp;= \\frac{2}{n^{1/p}}\\left( \\sum_{i=1}^n \\vert A(x_i) - A_{0.5}(x_i) \\vert^p \\right)^{1/p}\\\\  D(A) &amp;= \\int_{-\\infty}^{+\\infty}\\vert A(x)-A_{0.5}(x) \\vert dx\\end{aligned}\\]å…¶ä¸­ï¼Œ$p&gt;0$ æ˜¯å‚æ•°ï¼Œç§°ä¸º Minkowski æ¨¡ç³Šåº¦ã€‚ç‰¹åˆ«åœ°ï¼Œå½“ $p=1$ æ—¶ç§°ä¸º Hamming æ¨¡ç³Šåº¦æˆ–è€… Kaufmann æ¨¡ç³ŠæŒ‡æ ‡ã€‚å½“ $p=2$ æ—¶ç§°ä¸º Euclid æ¨¡ç³Šåº¦ã€‚1.4. æ¨¡ç³Šé€»è¾‘æ¨¡ç³Šé€»è¾‘æ˜¯å¯¹å¸ƒå°”é€»è¾‘çš„æ¨å¹¿ï¼Œé’ˆå¯¹éš¶å±åº¦è¿›è¡Œè®¡ç®—ã€‚æ¨¡ç³Šé€»è¾‘çš„å®šä¹‰å½¢å¼æœ‰å¾ˆå¤šç§ï¼Œæ¯”è¾ƒå¸¸è§çš„è¢«ç§°ä¸ºæ˜¯ Zadeh operatorsï¼Œå¦‚ä¸‹è¡¨æ‰€ç¤º            Boolean      Fuzzy                  AND(x,y)      MIN(x,y)              OR(x,y)      MAX(x,y)              NOT(x)      1-x      å¦ä¸€ç§ AND/OR ç®—å­åŸºäºä¹˜æ³•å®šä¹‰x AND y = x*yNOT x = 1-xHence,x OR y = NOT( AND ( NOT(x), NOT(y) ) )x OR y = 1-(1-x*(1-y))1.5. æ¨¡ç³Šå†³ç­–æœ€å¤§éš¶å±åº¦æ³•ï¼šå–æ¨ç†ç»“æœä¸­éš¶å±åº¦æœ€å¤§çš„ä¸€é¡¹ä½œä¸ºè¾“å‡ºã€‚ç®€å•æ˜“è¡Œï¼Œä½†æ˜¯å®Œå…¨æ´¾å‡ºäº†éš¶å±åº¦è¾ƒå°çš„å…¶å®ƒé‡çš„å½±å“å’Œä½œç”¨ï¼Œæ²¡æœ‰å……åˆ†åˆ©ç”¨æ¨ç†è¿‡ç¨‹å–å¾—ä¿¡æ¯ã€‚åŠ æƒå¹³å‡æ³•ï¼š\\[U = \\frac{\\sum_{i=1}^n\\mu(x_i)x_i}{\\sum_{i=1}^n\\mu(x_i)}\\]ä¸­ä½æ•°æ³•ï¼šè®ºåŸŸä¸ŠæŠŠéš¶å±åº¦å‡½æ•°æ›²çº¿ä¸æ¨ªåæ ‡å›´æˆçš„é¢ç§¯å¹³åˆ†ä¸ºä¸¤éƒ¨åˆ†çš„å…ƒç´ ï¼Œç§°ä¸ºæ¨¡ç³Šé›†ä¸­çš„ä¸­ä½æ•°ã€‚å°†ä¸­ä½æ•°ä½œä¸ºè¾“å‡ºã€‚ç”±äºæ¨¡ç³Šæ¨ç†ä¸éœ€è¦å¾ˆç²¾ç¡®ï¼Œå¯ä»¥ç›´æ¥å–é è¿‘ä¸­ä½æ•°çš„ä¸€ä¸ªç»“æœä½œä¸ºç»“æœã€‚ä¸­ä½æ•°æ³•ç›¸æ¯”æœ€å¤§éš¶å±åº¦æ³•åˆ©ç”¨äº†æ›´å¤šä¿¡æ¯ï¼Œä½†è®¡ç®—å¤æ‚ï¼Œç‰¹åˆ«æ˜¯éš¶å±åº¦å‡½æ•°è¿ç»­æ—¶è¿˜è¦è®¡ç®—ç§¯åˆ†ï¼Œå› æ­¤åº”ç”¨åœºåˆæ¯”åŠ æƒå¹³å‡æ³•å°‘ã€‚åŠ æƒå¹³å‡æ³•æ¯”ä¸­ä½æ•°æ³•å…·æœ‰æ›´ä½³çš„æ€§èƒ½ï¼Œæ›´å¥½çš„é™æ€æ€§èƒ½ï¼Œä½†æ˜¯ç›¸æ¯”ä¸­ä½æ•°æ³•çš„åŠ¨æ€æ€§èƒ½ç¨é€Šã€‚2. æ¨¡ç³Šç¥ç»ç½‘ç»œ  å°†æ¨¡ç³Šé€»è¾‘ç”¨äºç¥ç»ç½‘ç»œï¼šå°†æ¨¡ç³Šé›†åˆçš„æ¦‚å¿µåº”ç”¨äºç¥ç»ç½‘ç»œçš„è®¡ç®—å’Œå­¦ä¹ ï¼Œç”¨æ¨¡ç³ŠæŠ€æœ¯æé«˜ç¥ç»ç½‘ç»œçš„å­¦ä¹ æ€§èƒ½ï¼›  å°†ç¥ç»ç½‘ç»œç”¨äºæ¨¡ç³Šç³»ç»Ÿï¼š          ç”¨ç¥ç»ç½‘ç»œçš„å­¦ä¹ èƒ½åŠ›å®æ—¶è°ƒæ•´çŸ¥è¯†åº“ï¼Œåœ¨çº¿æå–æˆ–è°ƒæ•´æ¨¡ç³Šè§„åˆ™æˆ–å…¶å®ƒå‚æ•°ï¼›      ç”¨ç¥ç»ç½‘ç»œå®Œæˆæ¨¡ç³Šæ¨ç†è¿‡ç¨‹ã€‚        æ¨¡ç³Šç³»ç»Ÿå’Œç¥ç»ç½‘ç»œçš„å…¨é¢ç»“åˆï¼Œæ„é€ å®Œæ•´æ„ä¹‰ä¸Šçš„æ¨¡ç³Šç¥ç»ç½‘ç»œå’Œç®—æ³•ã€‚æ¨¡ç³Šç¥ç»ç½‘ç»œï¼ˆFuzzy Neural Network, FNNï¼‰ï¼ˆåˆç§°ä¸ºç¥ç»æ¨¡ç³Šç³»ç»Ÿï¼ŒNeuro-Fuzzy System, NFSï¼‰æ˜¯ä¸€ä¸ªå­¦ä¹ æœºï¼Œé€šè¿‡åˆ©ç”¨ç¥ç»ç½‘ç»œçš„è¿‘ä¼¼æŠ€æœ¯æ¥æ‰¾å¯»ä¸€ä¸ªæ¨¡ç³Šç³»ç»Ÿçš„å‚æ•°ï¼ˆå¦‚æ¨¡ç³Šé›†ï¼Œæ¨¡ç³Šè§„åˆ™ï¼‰ã€‚  A fuzzy neural network or neuro-fuzzy system is a learning machine that finds the parameters of a fuzzy system (i.e., fuzzy sets, fuzzy rules) by exploiting approximation techniques from neural networks.Fuzzy neural network â€”â€” Rudolf Kruse @ scholarpediaç¥ç»ç½‘ç»œæ§åˆ¶å’Œæ¨¡ç³Šæ§åˆ¶çš„ä¼˜åŠ£æ¯”è¾ƒå¦‚ä¸‹è¡¨æ‰€ç¤ºã€‚            Neural Networks      Fuzzy Systems                  no mathematical model necessary      no mathematical model necessary              learning from scratch      apriori knowledge essential              several learning algorithms      not capable to learn              black-box behavior      simple interpretation and implementation      ä»è¡¨ä¸­å¯ä»¥çœ‹å‡ºï¼Œå¦‚æœå°†äºŒè€…ç»“åˆï¼Œå¯ä»¥å……åˆ†å‘æŒ¥äºŒè€…çš„ä¼˜åŠ¿ï¼Œå¼¥è¡¥äºŒè€…çš„åŠ£åŠ¿ã€‚  é‡‡ç”¨åŸºäºç¥ç»ç½‘ç»œç†è®ºçš„æ•°æ®é©±åŠ¨å­¦ä¹ æ–¹æ³•ï¼Œå¯¹åŸºäºåº•å±‚æ¨¡ç³Šç³»ç»Ÿçš„ç¥ç»æ¨¡ç³Šç³»ç»Ÿè¿›è¡Œè®­ç»ƒã€‚è¿™ç§å¯å‘å¼ç®—æ³•åªè€ƒè™‘å±€éƒ¨ä¿¡æ¯å¼•èµ·åŸºæœ¬æ¨¡ç³Šç³»ç»Ÿçš„å±€éƒ¨å˜åŒ–ã€‚  å®ƒå¯ä»¥è¡¨ç¤ºä¸ºå­¦ä¹ è¿‡ç¨‹ä¸­ä»»ä½•æ—¶åˆ»ï¼ˆæ¯”å¦‚å­¦ä¹ å‰ï¼Œå­¦ä¹ ä¸­æˆ–å­¦ä¹ åï¼‰çš„æ¨¡ç³Šè§„åˆ™é›†ã€‚å› æ­¤ï¼Œç³»ç»Ÿå¯ä»¥æ ¹æ®æ¨¡ç³Šè§„åˆ™åœ¨æœ‰æ— å…ˆéªŒçŸ¥è¯†çš„æƒ…å†µä¸‹è¿›è¡Œåˆå§‹åŒ–ã€‚  å­¦ä¹ è¿‡ç¨‹å—åˆ°çº¦æŸï¼Œä»¥ä¿è¯åº•å±‚æ¨¡ç³Šç³»ç»Ÿçš„è¯­ä¹‰ç‰¹æ€§ã€‚  ç¥ç»æ¨¡ç³Šç³»ç»Ÿè¿‘ä¼¼äºä¸€ä¸ª n ç»´æœªçŸ¥å‡½æ•°ï¼Œè¯¥å‡½æ•°å¯ç”±è®­ç»ƒæ ·æœ¬éƒ¨åˆ†è¡¨ç¤ºã€‚å› æ­¤ï¼Œæ¨¡ç³Šè§„åˆ™å¯ä»¥è§£é‡Šä¸ºè®­ç»ƒæ•°æ®çš„æ¨¡ç³ŠåŸå‹ã€‚  ç¥ç»æ¨¡ç³Šç³»ç»Ÿè¢«è¡¨ç¤ºä¸ºç‰¹æ®Šçš„ä¸‰å±‚å‰é¦ˆç¥ç»ç½‘ç»œï¼š          ç¬¬ä¸€å±‚å¯¹åº”äºè¾“å…¥å˜é‡ã€‚      ç¬¬äºŒå±‚è±¡å¾ç€æ¨¡ç³Šè§„åˆ™ã€‚      ç¬¬ä¸‰å±‚è¡¨ç¤ºè¾“å‡ºå˜é‡ã€‚      æ¨¡ç³Šé›†è¢«è½¬æ¢ä¸ºï¼ˆæ¨¡ç³Šï¼‰è¿æ¥æƒã€‚        æœ‰äº›æ–¹æ³•è¿˜ä½¿ç”¨äº”å±‚ï¼Œå…¶ä¸­æ¨¡ç³Šé›†åˆ†åˆ«ç¼–ç ä¸ºç¬¬äºŒå±‚å’Œç¬¬å››å±‚çš„ç¥ç»å…ƒã€‚ä½†æ˜¯ï¼Œäº”å±‚æ¨¡å‹å¯ä»¥è½¬æ¢ä¸ºä¸‰å±‚ä½“ç³»ç»“æ„ã€‚          ç¬¬ä¸€å±‚ä¸ºè¾“å…¥å±‚ï¼Œç¼“å­˜è¾“å…¥ä¿¡å·ã€‚      ç¬¬äºŒå±‚ä¸ºæ¨¡ç³ŠåŒ–å±‚ï¼Œå¯¹è¾“å…¥ä¿¡å·è¿›è¡Œæ¨¡ç³ŠåŒ–ã€‚      ç¬¬ä¸‰å±‚ä¸ºæ¨¡ç³Šè§„åˆ™å±‚ã€‚      ç¬¬å››å±‚ä¸ºæ¨¡ç³Šå†³ç­–å±‚ï¼Œä¸»è¦é’ˆå¯¹æ»¡è¶³ä¸€å®šæ¡ä»¶çš„é‡è¿›è¡Œåˆ†ç±»å¹¶å°†æ¨¡ç³Šé‡å»æ¨¡ç³ŠåŒ–ã€‚      ç¬¬äº”å±‚ä¸ºè¾“å‡ºå±‚ï¼Œè¾“å‡ºè¿ç®—ç»“æœ      ä¸¤ç§å¸¸è§çš„ç¥ç»æ¨¡ç³Šæ¨¡å‹ï¼š  Mamdani æ¨¡å‹: ç€é‡ç ”ç©¶æ¨¡å‹çš„å¯è§£é‡Šæ€§  Takagi-Sugeno-Kang (TSK) æ¨¡å‹ï¼šç€é‡ç ”ç©¶æ¨¡å‹çš„ç²¾ç¡®ç¨‹åº¦Mamdani æ¨¡å‹çš„æ¨¡ç³Šè§„åˆ™ç¤ºæ„å¦‚ä¸‹ï¼šIF x1 is A1 and x2 is A2 and ... xn is An   THEN y = c1IF funding is adequate and staff is small   THEN risk is lowå¯ä»¥çœ‹å‡ºï¼ŒMamdani æ¨¡å‹çš„è¾“å‡ºï¼ˆåä»¶ï¼‰ä¸ºæ¨¡ç³Šé›†ï¼Œéœ€è¦åŠ ä¸Šè§£æ¨¡ç³Šçš„ç¯èŠ‚ã€‚TSK æ¨¡å‹çš„æ¨¡ç³Šè§„åˆ™ç¤ºæ„å¦‚ä¸‹ï¼šIF x1 is A1 and x2 is A2 and ... xn is An   THEN y = a0+a1*x1+...+an*xnIF funding is adequate and staff is small   THEN risk is 0.2å¯ä»¥çœ‹å‡ºï¼ŒTSK æ¨¡å‹çš„ THEN éƒ¨åˆ†æ˜¯æ¸…æ™°çš„ï¼Œå®ƒçš„è¾“å‡ºï¼ˆåä»¶ï¼‰æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œæ˜¯æ‰€æœ‰è¾“å…¥å˜é‡çš„çº¿æ€§ç»„åˆï¼Œå› æ­¤å…·æœ‰è¾ƒå¥½çš„å¯è§£é‡Šæ€§å’Œç²¾ç¡®æ€§ã€‚ä¸‰ç§ FNN çš„éƒ¨ç½² æ–¹å¼ï¼š  çœŸå®è¾“å…¥ï¼Œæ¨¡ç³Šæƒé‡  æ¨¡ç³Šè¾“å…¥ï¼ŒçœŸå®æƒé‡  æ¨¡ç³Šè¾“å…¥ï¼Œæ¨¡ç³Šæƒé‡3. å‚è€ƒæ–‡çŒ®æ— ã€‚"
  },
  
  {
    "title": "ç”µå½±ã€Šä¿¡æ¡ã€‹ä¸ªäººè§£æ",
    "url": "/posts/movie-tenet/",
    "categories": "Diary",
    "tags": "other",
    "date": "2020-09-10 13:31:19 +0800",
    





    
    "snippet": "è¯ºå…°çš„æ–°ç”µå½±ã€Šä¿¡æ¡ã€‹ï¼Œå‡­å€Ÿç¡¬æ ¸çš„ç§‘å¹»èƒŒæ™¯å’Œçƒ§è„‘çš„å‰§æƒ…å›è·¯ï¼ŒæˆåŠŸç»•æ™•äº†å¹¿å¤§è§‚å½±ç¾¤ä¼—ã€‚æœ¬æ–‡è¯•å›¾ä»ç”µå½±ä¸­çš„ç§‘å­¦æ¦‚å¿µå‡ºå‘ï¼Œä¸€æ­¥æ­¥è§£æç”µå½±å‰§æƒ…çš„æ—¶é—´çº¿ç´¢ã€‚  1. å‰è¨€  2. ç†µ          2.1. ç†µçš„å®šä¹‰      2.2. ç†µå¢å®šå¾‹      2.3. ç†µå‡çš„è¯¯åŒº      2.4. ç”µå½±ä¸­çš„ç†µå‡        3. æ—¶é—´æ—…è¡Œ          3.1. å¦‚ä½•ä»æœªæ¥å¸®åŠ©è‡ªå·±ï¼Ÿ     ...",
    "content": "è¯ºå…°çš„æ–°ç”µå½±ã€Šä¿¡æ¡ã€‹ï¼Œå‡­å€Ÿç¡¬æ ¸çš„ç§‘å¹»èƒŒæ™¯å’Œçƒ§è„‘çš„å‰§æƒ…å›è·¯ï¼ŒæˆåŠŸç»•æ™•äº†å¹¿å¤§è§‚å½±ç¾¤ä¼—ã€‚æœ¬æ–‡è¯•å›¾ä»ç”µå½±ä¸­çš„ç§‘å­¦æ¦‚å¿µå‡ºå‘ï¼Œä¸€æ­¥æ­¥è§£æç”µå½±å‰§æƒ…çš„æ—¶é—´çº¿ç´¢ã€‚  1. å‰è¨€  2. ç†µ          2.1. ç†µçš„å®šä¹‰      2.2. ç†µå¢å®šå¾‹      2.3. ç†µå‡çš„è¯¯åŒº      2.4. ç”µå½±ä¸­çš„ç†µå‡        3. æ—¶é—´æ—…è¡Œ          3.1. å¦‚ä½•ä»æœªæ¥å¸®åŠ©è‡ªå·±ï¼Ÿ      3.2. ç¥–çˆ¶æ‚–è®ºä¸æ—¶é—´æ—…è¡Œ      3.3. è‡ªå·±å’Œè‡ªå·±èƒ½å¦ç›¸è§ï¼Ÿ        4. æ—¶é—´é’³å½¢ä½œæˆ˜          4.1. è¿½è½¦æŠ¢å¤ºé’š241      4.2. æœ€ç»ˆå†³æˆ˜        5. å…¶å®ƒ          5.1. ç”µå½±æœ¬èº«çš„æ¢è®¨      5.2. Q/A      5.3. è¯ºå…°çš„ç”µå½±        6. å‚è€ƒæ–‡çŒ®1. å‰è¨€è¿™ä¸ªè®°å½•è´´çš„æœ¬æ„ï¼Œæ˜¯ç»™è‡ªå·±è§‚å½±åšä¸€ä¸ªæ€»ç»“ï¼Œä¸»è¦åŒ…æ‹¬å„ç§çŸ¥è¯†ã€æŠ€æœ¯ã€ç†è®ºçš„æ€»ç»“å’Œæ•´ç†ã€‚ç”µå½±æœ¬èº«çš„æ•…äº‹ã€æ‹æ‘„æ‰‹æ³•ã€å‰§æƒ…ã€æ¼”æŠ€ç­‰å†…å®¹ä¸æ˜¯é‡ç‚¹è®¨è®ºèŒƒå›´å“ˆ 0.0è¿™ä¸æ˜¯ä¸€ä¸ªå‰§æƒ…åˆ†æè´´ï¼Œè€Œæ›´åƒæ˜¯ä¸€ä¸ªç”µå½±èƒŒåçš„çŸ¥è¯†å’ŒæŠ€æœ¯è§£æï¼Œæ—¨åœ¨å¸®åŠ©äººä»¬æ›´åŠ å½¢è±¡å’Œæ·±å…¥çš„ç†è§£ç”µå½±ã€Šä¿¡æ¡ã€‹èƒŒåçš„çŸ¥è¯†å’Œç†è®ºã€‚ç”±äºä¸ªäººæ°´å¹³æ‰€é™ï¼Œå¸–å­ä¸­éš¾å…ä¼šå‡ºç°å„ç±»ç–å¿½å’Œé”™æ¼ï¼Œå¸Œæœ›å¤§å®¶æµ·æ¶µ 0.0å¦å¤–ï¼Œæœ¬è´´çš„é˜…è¯»å¯èƒ½éœ€è¦ä¸€å®šçš„æ•°å­¦ã€åŠ›å­¦ã€ç‰©ç†å­¦åŸºç¡€ï¼Œä»¥åŠä¸€å®šçš„æƒ³è±¡åŠ›å’Œé€»è¾‘æ¨ç†èƒ½åŠ›ã€‚2. ç†µ2.1. ç†µçš„å®šä¹‰ã€Œç†µã€æ˜¯ä¸€ä¸ªçƒ­åŠ›å­¦æ¦‚å¿µï¼Œæ˜¯çƒ­åŠ›å­¦ä¸­è¡¨å¾ç‰©è´¨çŠ¶æ€çš„å‚é‡ä¹‹ä¸€ï¼Œå…¶ç‰©ç†æ„ä¹‰æ˜¯ä½“ç³»æ··ä¹±ç¨‹åº¦çš„åº¦é‡ï¼Œåæ˜ è‡ªå‘è¿‡ç¨‹ä¸å¯é€†æ€§çš„ç‰©è´¨çŠ¶æ€å‚é‡ã€‚åœ¨çƒ­åŠ›å­¦ä¸­ï¼Œç†µæ˜¯ç³»ç»Ÿçš„çŠ¶æ€å‡½æ•°ï¼Œä¸€ä¸ªç³»ç»Ÿçš„ç†µç­‰äºè¯¥ç³»ç»Ÿåœ¨ä¸€å®šè¿‡ç¨‹ä¸­æ‰€å¸æ”¶ï¼ˆæˆ–è€—æ•£ï¼‰çš„çƒ­é‡é™¤ä»¥å®ƒçš„ç»å¯¹æ¸©åº¦ï¼Œå¦‚ä¸‹ã€‚\\[S = \\int dQ/T\\]å…¶ä¸­ï¼Œ$S$ è¡¨ç¤ºç†µï¼Œ$Q$ è¡¨ç¤ºçƒ­é‡ï¼Œ$T$ è¡¨ç¤ºæ¸©åº¦ã€‚2.2. ç†µå¢å®šå¾‹çƒ­åŠ›å­¦ç¬¬äºŒå®šå¾‹å®šä¹‰äº†çƒ­é‡ä¸èƒ½ä»ä½æ¸©çš„ç‰©ä½“è‡ªå‘åœ°è½¬ç§»åˆ°é«˜æ¸©çš„ç‰©ä½“ï¼Œä¹‹äºç†µæ¥è¯´å°±ç­‰äºä¸–ç•Œä¸Šçš„äº‹ç‰©éƒ½æ— æ³•è‡ªå‘åœ°è¶‹äºæœ‰åºï¼Œè€Œæ˜¯è¶Šæ¥è¶Šæ··ä¹±ã€‚è¿™å°±æ˜¯æ‰€è°“çš„ç†µå¢å®šå¾‹ã€‚ç®€è€Œè¨€ä¹‹ï¼Œç†µçš„å˜åŒ–æ°¸è¿œæ˜¯ä» æœ‰åº åˆ° æ— åº çš„çŠ¶æ€ï¼Œä»ä¸€ä¸ªè‡ªå‘è¿›è¡Œçš„è¿‡ç¨‹æ¥è€ƒå¯Ÿï¼šä¸¤ä¸ªå†·çƒ­ç¨‹åº¦ä¸åŒçš„ç‰©ä½“ç›¸äº’æ¥è§¦ï¼ˆæ¯”å¦‚ä¸¤æ¯æ°´ï¼‰ï¼Œçƒ­é‡ $Q$ ç”±é«˜æ¸©($T_1$)ç‰©ä½“ä¼ è‡³ä½æ¸©($T_2$)ç‰©ä½“ï¼Œé«˜æ¸©ç‰©ä½“çš„ç†µå‡å°‘ $dS_1=dQ/T_1$ï¼Œä½æ¸©ç‰©ä½“çš„ç†µå¢åŠ  $dS_2=dQ/T_2$ï¼ŒæŠŠä¸¤ä¸ªç‰©ä½“åˆèµ·æ¥å½“æˆä¸€ä¸ªç³»ç»Ÿæ¥çœ‹ï¼Œæœ‰ $dQ_1 = -dQ_2,\\quad T_1&gt;T_2$ï¼Œåˆ™ç†µçš„å˜åŒ–æ˜¯ $dS=dS_2-dS_1 &gt; 0$ï¼Œå³ç†µæ˜¯å¢åŠ çš„ã€‚ä¸¾å¦ä¸€ä¸ªä¾‹å­ï¼Œä¸€ä¸ªç‹¬ç«‹ä¸å—å¤–ç•Œå½±å“çš„å®¹å™¨ï¼Œé‡Œé¢æœ‰è§„å¾‹çš„é—´éš”ï¼Œéš”å¼€ç©ºæ°”åŒºé—´å’ŒçœŸç©ºåŒºé—´ï¼›ä¸€æ—¦æ’¤é™¤å®¹å™¨å†…éƒ¨æ‰€æœ‰é—´éš”ï¼Œæ•´ä¸ªå®¹å™¨å°±ä¼šå½¢æˆä¸€æ•´ä¸ªå‡åŒ€çš„çŠ¶æ€ã€‚è¿™æ˜¯ä¸€ä¸ªè‡ªç„¶çš„è¿‡ç¨‹ï¼Œä¹Ÿæ˜¯ç†µå¢çš„è¿‡ç¨‹ã€‚ï¼ˆå¦‚ä¸‹å›¾ï¼‰å…ˆæè¿°ä¸€ä¸‹å®¹å™¨å¼€å§‹çš„çŠ¶æ€ï¼šç©ºæ°”åŒºé—´å’ŒçœŸç©ºåŒºé—´æ˜¯æ˜ç¡®åˆ†å¼€çš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå­¤ç«‹ç³»ç»Ÿå±€éƒ¨çŠ¶æ€æ˜¯ä¸åŒçš„ï¼Œæˆ‘ä»¬è¯´è¿™æ˜¯â€œæœ‰åºçš„â€ã€‚å†æè¿°æœ€åå‡åŒ€çš„çŠ¶æ€ï¼šæœ€ç»ˆå®¹å™¨ä¸­ä»»ä½•ä¸€ä¸ªç‚¹çš„æ°”ä½“å¯†åº¦éƒ½ç›¸åŒï¼Œæ¸©åº¦ä¹Ÿç›¸åŒã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ•´ä¸ªå­¤ç«‹ç³»ç»Ÿå†…æ‰€æœ‰å±€éƒ¨çŠ¶æ€åˆ°å¤„éƒ½æ˜¯ç›¸åŒçš„ï¼Œæˆ‘ä»¬è¯´ç³»ç»Ÿå˜å¾—æ›´åŠ æ··ä¹±äº†ï¼Œä¹Ÿå°±æ˜¯â€œæ— åºçš„â€ã€‚å­¤ç«‹ç³»ç»Ÿæ€»æ˜¯è¶‹å‘äºç†µå¢ï¼Œæœ€ç»ˆè¾¾åˆ°ç†µçš„æœ€å¤§çŠ¶æ€ï¼Œä¹Ÿå°±æ˜¯ç³»ç»Ÿçš„æœ€æ··ä¹±æ— åºçŠ¶æ€ã€‚ä½ å¯ä»¥ç»§ç»­è¿½é—®ï¼šä¸ºä»€ä¹ˆå–æ¶ˆåŒºéš”ï¼Œç©ºæ°”ä¼šå‘æ²¡æœ‰ç©ºæ°”çš„çœŸç©ºç§»åŠ¨ï¼Ÿç©ºæ°”ç§»åŠ¨çš„åŠ¨åŠ›æˆ–è€…åŠ¨æœºåˆ°åº•æ˜¯ä»€ä¹ˆï¼Ÿè¿™ä¸ªé—®é¢˜ä»æœ¬è´¨æ¥çœ‹ï¼Œæ˜¯åœ¨é—®ï¼Œä¸ºä»€ä¹ˆè‡ªç„¶çŠ¶æ€ä¸‹å­¤ç«‹ç³»ç»Ÿæ€»æ˜¯ä»æœ‰åºå˜æˆæ— åºï¼Ÿå…¶å®è¿™ä¸ªé—®é¢˜æœ¬èº«ï¼Œå°±æ˜¯ç­”æ¡ˆæœ¬èº«ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œç­”æ¡ˆæ˜¯ç†µå¢å®šå¾‹ï¼šä¸–ç•Œå°±æ˜¯è¦ä»æœ‰åºå˜æ— åºã€‚å®‡å®™è¿åŠ¨çš„åŠ¨æœºï¼Œå°±æ˜¯è¦ä»æœ‰åºå˜æˆæ— åºï¼Œæ— åºæ˜¯ä¸€ä¸ªæœ€ç¨³å®šçš„çŠ¶æ€ã€‚æ‰€ä»¥ç©ºæ°”ï¼Œä¼šä»æœ‰ç©ºæ°”çš„åœ°æ–¹èµ°å‘æ²¡æœ‰ç©ºæ°”çš„åœ°æ–¹ï¼›çƒ­é‡ä¼šä»çƒ­é‡é«˜çš„åœ°æ–¹ï¼Œæµå‘çƒ­é‡ä½çš„åœ°æ–¹ï¼›æœ€ç»ˆè¾¾åˆ°ä¸€ä¸ªæ··ä¹±ä½†æ˜¯éå¸¸ç¨³å®šçš„çŠ¶æ€ã€‚2.3. ç†µå‡çš„è¯¯åŒºæœ‰äººä¼šè¯´ï¼Œå¦‚æœä»¥ç»çƒ­æˆ¿é—´å†…æ”¾ä¸€å·¥ä½œçš„ç”µå†°ç®±ä¸ºä¾‹ï¼Œå†°ç®±å†…æ¸©åº¦å˜ä½ï¼Œå†°ç®±å¤–çš„æˆ¿é—´å†…æ¸©åº¦å˜é«˜ï¼Œé‚£ä¹ˆè¿™ä¸ªç»çƒ­æˆ¿é—´ä¸å°±å®ç°äº†ç†µå‡äº†ä¹ˆï¼Ÿå®é™…ä¸Šï¼Œå†°ç®±éœ€è¦é€šç”µï¼Œè¿™ç›¸å½“äºå¤–ç•Œåœ¨åšåŠŸï¼Œä»è€Œæ‹‰å¼€æ¸©å·®ã€‚ä»…å°±å®¤å†…çš„å†°ç®±å†…å¤–æ¥è¯´ï¼Œå¦‚æœè€ƒè™‘äº†ç”µæµçš„çƒ­æ•ˆåº”ï¼Œè¿™ä¸ªå®¤å†…çš„æ€»ç†µå˜åŒ–ä»æ—§æ˜¯å¢çš„ã€‚å¤–ç•ŒåšåŠŸä¸èƒ½ä½¿ç»çƒ­ç³»ç»Ÿå†…çš„ç†µå‡å°‘ï¼Œä¸è®ºæ˜¯ç”µèƒ½ã€æœºæ¢°èƒ½ç­‰éçƒ­èƒ½åšåŠŸ(é€šå¸¸ä¸èƒ½é¿å…çƒ­æ•ˆåº”)éƒ½ä¸èƒ½ä½¿ç»çƒ­ç³»ç»Ÿå†…çš„ç†µå‡å°‘ï¼Œæ‰€ä»¥è¯´ï¼Œæˆ‘ä»¬è®¤ä¸ºç†µå¢åŸç†å‡†ç¡®çš„è¡¨è¿°åº”ä¸ºï¼šâ€œåœ¨ç­‰åŠ¿é¢ä¸Šï¼Œç»çƒ­ç³»ç»Ÿå†…çš„ç†µæ°¸ä¸å‡å°‘â€ã€‚2.4. ç”µå½±ä¸­çš„ç†µå‡å°†ç†µçš„æ¦‚å¿µæ‰©å¤§åˆ°æ•´ä¸ªå®‡å®™ï¼Œå°±å¯ä»¥ä¸ç”µå½±ä¸­å¼€å§‹æŒ‚é’©äº†ã€‚å®‡å®™åˆ°åº•æ˜¯ä¸æ˜¯å­¤ç«‹çš„ç³»ç»Ÿï¼Ÿäººç±»è¿˜æ— æ³•ç¡®å®šè¿™ä¸ªé—®é¢˜çš„ç­”æ¡ˆï¼Œä½†ç°é˜¶æ®µäººç±»è®¤è¯†å®‡å®™ä¸»è¦æœ‰ä¸¤ä¸ªç†è®ºï¼šå®‡å®™å¤§çˆ†ç‚¸ç†è®ºå’Œå®‡å®™è†¨èƒ€ç†è®ºã€‚ç„¶è€Œæ— è®ºæ˜¯å®‡å®™å¤§çˆ†ç‚¸ç†è®ºè¿˜æ˜¯å®‡å®™è†¨èƒ€ç†è®ºï¼Œéƒ½ä¼šæ¨å¯¼è‡³ä¸€ä¸ªç»“è®ºï¼šå®‡å®™æ˜¯æœ‰è¾¹ç•Œçš„ã€‚å®‡å®™æœ‰è¾¹ç•Œï¼Œé‚£æˆ‘ä»¬å¯ä»¥è®¤ä¸ºå®‡å®™æ˜¯ä¸€ä¸ªå­¤ç«‹çš„ç³»ç»Ÿã€‚é‚£ä¹ˆï¼Œå°±å¯ä»¥è®¤ä¸ºå®‡å®™çš„æ­£å‘å‘å±•ä¹Ÿæ˜¯å¤„äºç†µå¢çš„çŠ¶æ€ï¼Œä»æœ‰åºåˆ°æ— åºã€‚ç”µå½±ä¸­çš„ æ—‹è½¬é—¨ å°±æ˜¯ä¸€ç§èƒ½å¤Ÿè®©ç†µé€†å‘å‡å°çš„æœºå™¨ï¼Œå®ƒæŠŠã€Œç†µå‡ã€çš„æ¦‚å¿µå¥—åˆ°äººèº«ä¸Šï¼Œä»äººèµ°å‡ºæœºå™¨çš„é‚£ä¸€åˆ»å¼€å§‹ï¼Œæ‰€æœ‰çš„ä¸€åˆ‡éƒ½æ˜¯é€†å‘çš„ã€‚åœ¨è¿™ä¸ªäººçš„èº«ä¸Šï¼Œæ—¶é—´å¯ä»¥å±€éƒ¨é€†å‘æµåŠ¨ï¼Œè€Œä¸æ˜¯æ•´ä¸ªä¸–ç•Œçš„æ—¶é—´å¯ä»¥é€†å‘æµåŠ¨ã€‚ä»ä¸–ç•Œä¸Šä»»æ„è§‚å¯Ÿè€…çœ‹æ¥ï¼Œè¿™ä¸ªé€†å‘çš„äººæ‰€æœ‰çš„åŠ¨ä½œéƒ½æ˜¯é€†å‘çš„ï¼Œåç€èµ°è·¯ï¼Œåç€å¼€è½¦ï¼Œç­‰ç­‰ã€‚è€Œé€†å‘çš„äººçœ‹åˆ°å…¨ä¸–ç•Œçš„æ‰€æœ‰è¿åŠ¨éƒ½æ˜¯åç€çš„ã€‚åœ¨ä½ çš„çœ¼é‡Œï¼Œæ—¶é—´ä¼šå¼€å§‹å€’æµï¼Œèº«è¾¹çš„äººä¼šå€’èµ°ï¼Œé£é¸Ÿä¼šå€’é£ï¼Œç«ç„°ä¸ä¼šçƒ§ä¼¤ä½ ï¼Œè€Œæ˜¯å†»ä¼¤ä½ ã€‚ç”šè‡³è¿ç©ºæ°”éƒ½æ˜¯é€†å‘çš„ï¼Œæ‰€ä»¥éœ€è¦ä½©æˆ´ç‰¹æ®Šçš„æ°§æ°”é¢ç½©ï¼Œæ‰èƒ½åœ¨æ­£å‘çš„ä¸–ç•Œä¸­ï¼Œä¿è¯è‡ªå·±å·²ç»è¢«é€†å‘äº†çš„è‚ºå‘¼å¸åˆ°é€†å‘çš„ç©ºæ°”ã€‚è¿™ä¹Ÿæ˜¯åŒºåˆ†å½±ç‰‡ä¸­çš„äººï¼Œæ˜¯ä¸æ˜¯é€†å‘å¾ˆé‡è¦çš„ä¸€ä¸ªç‚¹ã€‚ä¸€ä¸ªä¸å‡†ç¡®çš„ç†è§£å°±æ˜¯ï¼Œå½“ä½ ä»æ—‹è½¬é—¨ä¸­å‡ºæ¥æ—¶ï¼Œä½ ç›¸å½“äºç”Ÿæ´»åœ¨ä¸€ä¸ªå€’å¸¦ä¸­çš„ä¸–ç•Œï¼ˆä¸–ç•Œçš„æ—¶é—´å¯¹ä½ è€Œè¨€åœ¨é€†è¡Œå€’æµï¼Œåªæœ‰ä½ ä»ç„¶åœ¨æ­£å‘å‰è¿›ï¼‰ã€‚è€Œäº‹å®æ˜¯ï¼Œä»å…¨ä¸–ç•Œçš„è§’åº¦ï¼Œåªæœ‰ä½ ä¸€ä¸ªäººåœ¨é€†ç€æ—¶é—´è¿åŠ¨ï¼Œå…¶å®ƒä¸–ç•Œä¸Šæ‰€æœ‰çš„äº‹ç‰©ä»ç„¶ä¿æŒéšç€æ—¶é—´æ­£å¸¸çš„æ­£å‘è¿åŠ¨ã€‚æ­¤æ—¶ï¼Œåœ¨æŸä¸ªä¹‹å‰çš„æ—¶åˆ»ï¼Œä¸–ç•Œä¸Šå°†ä¼šå­˜åœ¨ä¸¤ä¸ªä½ ï¼Œä¸€ä¸ªæ­£å‘çš„ä½ ï¼Œä¸€ä¸ªé€†å‘çš„ä½ ã€‚ä¸”ä¸¤ä¸ªä½ çš„åŠ¨ä½œæ˜¯é•œåƒåå‘çš„ã€‚æ¢ä¸€ç§æ›´ä¸ºä¸¥è°¨çš„è¯´æ³•ï¼Œå¤„äºé€†æ—¶é—´ä¸­çš„äººæˆ–äº‹ç‰©ï¼Œç»“æœä¼šå‘ç”Ÿåœ¨åŸå› ä¹‹å‰ã€‚æ‰”æ‰çš„é€†å­å¼¹ä¼šå›åˆ°æ‰‹ä¸­ã€‚æ­£å¸¸å­å¼¹ï¼šä½ åšå‡ºæ‰”å­å¼¹åŠ¨ä½œ â€“&gt; å­å¼¹ä»æ‰‹ä¸­è¢«æ‰”åˆ°æ¡Œä¸Šã€‚é€†å­å¼¹ï¼šå­å¼¹ä»æ¡Œä¸Šå›åˆ°æ‰‹ä¸­ â€“&gt; ä½ åšå‡ºæ‰”å­å¼¹åŠ¨ä½œæ‰€ä»¥ï¼Œå½±ç‰‡ä¸­æœ‰ä¸€å¥åå¤å‡ºç°çš„å°è¯ï¼šã€Œæ‰€æœ‰æœªå‘ç”Ÿçš„äº‹æƒ…å¿…å®šä¼šå‘ç”Ÿï¼Œæ‰€æœ‰å·²ç»å‘ç”Ÿçš„äº‹æƒ…æ— æ³•æ”¹å˜ã€‚ã€3. æ—¶é—´æ—…è¡Œ3.1. å¦‚ä½•ä»æœªæ¥å¸®åŠ©è‡ªå·±ï¼Ÿå…ˆä»ä¸€ä¸ªæœ€ç®€å•çš„ä¾‹å­è¯´èµ·ã€‚å‡è®¾æˆ‘ä»¬æ‹¥æœ‰äº†æ—‹è½¬é—¨ï¼Œå¦‚ä½•å¸®åŠ©è‡ªå·±ä¸­ä¸‹å‘¨äºŒå¼€å¥–çš„å½©ç¥¨å‘¢ï¼Ÿé¦–å…ˆï¼Œå¦‚æœä¸€åˆ‡é¡ºåˆ©ï¼Œä½ ä¸€å®šä¼šåœ¨å‘¨ä¸€çš„æ—¶å€™ï¼Œåœ¨æŸä¸ªæ˜¾çœ¼çš„åœ°æ–¹çœ‹åˆ°ä¸€å¼ å½©ç¥¨å·ç ï¼ŒæŒ‰ç…§è¿™ä¸ªå·ç å»æŠ•æ³¨ï¼Œå¦¥å¦¥ä¸­å¥–ã€‚è¿™å°±æ˜¯ã€Œæ‰€æœ‰æœªå‘ç”Ÿçš„äº‹æƒ…å¿…å®šä¼šå‘ç”Ÿï¼Œæ‰€æœ‰å·²ç»å‘ç”Ÿçš„äº‹æƒ…æ— æ³•æ”¹å˜ã€‚ã€ä¸ºäº†ä½¿æ—¶é—´ï¼ˆé€»è¾‘ï¼‰é—­ç¯ï¼ˆé¿å…é€ æˆä¸€äº›ä¸å¯æ§çš„æ··æ²Œå‘ç”Ÿï¼Œè´è¶æ•ˆåº”ï¼‰ï¼Œä½ å¿…é¡»åšå¦‚ä¸‹çš„äº‹æƒ…ä½¿å¾—ä¸Šè¿°ç»“æœå®Œå¤‡ã€‚      é¦–å…ˆï¼Œæ ¹æ®çœ‹åˆ°çš„å½©ç¥¨å·ç åœ¨å‘¨ä¸€æŠ•æ³¨        ç„¶åï¼Œåœ¨å®¶èººåˆ°ä¸‹å‘¨äºŒï¼Œç­‰åˆ°å½©ç¥¨å¼€å¥–ï¼Œç„¶åå†™ä¸‹ä¸­å¥–å·ç         ç„¶åï¼Œå¸¦ç€å½©ç¥¨å·ç è¿›å…¥æ—‹è½¬é—¨ï¼Œæ—‹è½¬è¿‡åå‡ºæ¥å˜æˆé€†å‘ï¼ˆè®°å¾—å¸¦æ°§æ°”é¢ç½©ï¼‰ï¼Œæ­¤æ—¶ä½ å°†ä¼šæ²¿ç€æ—¶é—´å€’æµçš„æ–¹å‘å‰è¡Œï¼›        ç­‰å¾…æ—¶é—´å€’æµåˆ°å‘¨äºŒå¼€å¥–å‰çš„å‘¨ä¸€ï¼Œè¶ç€æ­£å‘çš„ä½ ä¸åœ¨çš„æ—¶å€™ï¼Œå°†å½©ç¥¨å·ç æ”¾åˆ°æŸä¸ªæ­£å‘çš„ä½ ä¸€å®šä¼šçœ‹åˆ°çš„åœ°æ–¹ï¼›        ç„¶åï¼Œæ‰¾ä¸ªèˆ’æœçš„åœ°æ–¹èººç€å›åˆ°ç¨å¾®æ—©äº›çš„æ—¶å€™ï¼ˆæ¯”å¦‚ä¸Šå‘¨æ—¥ï¼‰ï¼Œæœ€åé€šè¿‡æ—‹è½¬é—¨å›åˆ°æ­£å‘ï¼ˆå½“ç„¶ä½ ä¸æƒ³å›å»ä¹Ÿè¡Œï¼Œå°±ä¸€ç›´å‘ç€è¿‡å»æ´»ä¸‹å»ï¼Œé‚£å°±å’Œä¸­å¥–æ²¡ä»€ä¹ˆå…³ç³»äº†ï¼Œä½ ä¹Ÿåœ¨æœªæ¥çš„ä¸–ç•Œæ¶ˆå¤±äº†ï¼‰ã€‚        ä¸å‡ºæ„å¤–ï¼Œæ­£å‘çš„ä½ å°†ä¼šåœ¨å‘¨ä¸€çœ‹åˆ°å½©ç¥¨ï¼Œå¹¶æŠ•æ³¨ï¼Œä¸­å¥–ï¼Œç„¶åè¿›å…¥æ—‹è½¬é—¨ï¼ˆè²Œä¼¼è¿›å…¥æ­»å¾ªç¯äº†ï¼Ÿå…¶å®æ²¡æœ‰ï¼Œè¿›å…¥ä¼ é€é—¨çš„å°±æ˜¯ç°åœ¨çš„ä½ ï¼‰  åšå®Œä¸Šè¿°æ­¥éª¤åï¼Œå¦‚æœä½ åœ¨ç¬¬5æ­¥é€‰æ‹©å›åˆ°æ­£å‘ï¼Œé‚£ä¹ˆä¸–ç•Œä¸Šä»å‘¨äºŒä¹‹åï¼Œåªå‰©ä¸‹äº†å”¯ä¸€çš„ä¸€ä¸ªæ­£å‘çš„ä½ ï¼ŒåŸå…ˆé‚£ä¸ªæ­£å‘çš„ä½ å·²ç»è¿›å…¥æ—‹è½¬é—¨äº†ï¼ˆä¹Ÿå°±æ˜¯ç°åœ¨çš„ä½ ï¼‰ã€‚ç”¨ windows è‡ªå¸¦çš„ç”»å›¾ç”»ï¼Œçš„ç•¥ç²—ç³™è¯·è°…è§£ 0.0è¿˜æœ‰å¦ä¸€ç§é€‰æ‹©æ›´åŠ ç®€å•ä¸€äº›ï¼Œå°±æ˜¯å½“ä½ åœ¨ç¬¬3æ­¥ç¬¬ä¸€æ¬¡ç©¿è¿‡æ—‹è½¬é—¨å˜æˆé€†å‘åï¼Œä¸å°†å½©ç¥¨å·ç å†™ä¸‹æ¥å‘Šè¯‰æ­£å‘çš„è‡ªå·±ï¼Œè€Œæ˜¯é€†å‘ç­‰åˆ°å½©ç¥¨å¼€å¥–ä¹‹å‰ï¼Œå†æ¬¡é€šè¿‡æ—‹è½¬é—¨è¿”å›æ­£å‘ï¼Œç„¶åæ”¹å¤´æ¢é¢å·å·æŠ•æ³¨ã€‚å¼€å¥–åï¼ŒåŸæœ¬æ­£å‘çš„ä½ é»˜é»˜è®°ä½å¼€å¥–å·ç è¿›å…¥æ—‹è½¬é—¨ï¼ˆå°±æ˜¯ç¬¬3æ­¥ï¼‰ã€‚è€Œç°åœ¨çš„è‡ªå·±ï¼Œå·²ç»æ˜¯ç»è¿‡ä¸¤æ¬¡æ—‹è½¬åçš„è‡ªå·±äº†ï¼ŒåŒæ ·ä¹Ÿå˜æˆäº†ç™¾ä¸‡å¯Œç¿ã€‚ä¸¤ä¸ªé€‰æ‹©çš„åŒºåˆ«åœ¨äºï¼Œç¬¬ä¸€ç§é€‰æ‹©éœ€è¦å€ŸåŠ©ä¸€å¼ è®°æœ‰å½©ç¥¨å·ç çš„çº¸æ¥ä¼ é€’æ¶ˆæ¯ï¼Œé€»è¾‘é—­ç¯çš„å¤æ‚åº¦æ›´é«˜ã€‚è™½ç„¶æ›´åŠ å¤æ‚äº†ï¼Œä½†æ˜¯è¿™å¹¶ä¸æ„å‘³ç€ç¬¬ä¸€ç§é€‰æ‹©ä¸å¥½ã€‚æ¯”å¦‚ï¼Œå½“æ—¶é—´è·¨åº¦éå¸¸é•¿çš„æ—¶å€™ï¼Œä»…é äººåŠ›æœ¬èº«å·²ç»éš¾ä»¥ä¼åŠæ—¶ï¼ˆæ¯”å¦‚ä½ æƒ³è®©å››åå¹´å‰çš„è‡ªå·±ä¸­å½©ç¥¨ï¼Œå°±å¿…é¡»é€†å‘ç”Ÿæ´»å››åå¹´ï¼Œå†é€†è½¬å›æ­£å‘ç”Ÿæ´»å››åå¹´ï¼‰ï¼Œå°±ä¸å¾—ä¸å€ŸåŠ©èƒ½å¤Ÿåœ¨å¤§å°ºåº¦æ—¶é—´ä¸Šè®°å½•å’Œä¿å­˜çš„åª’ä»‹ã€‚æ­£å¦‚ã€Šä¿¡æ¡ã€‹ä¸­çš„é‚£æ ·ï¼Œæœªæ¥äººç±»ä¸å¯èƒ½æ´¾é£æŸä¸ªäººé€†å‘è¿”å›åˆ°ç°æ—¶ï¼ˆåœ¨ä»–ä»¬çœ¼ä¸­ä¹…è¿œçš„è¿‡å»ï¼‰ç„¶åä»é›¶å¼€å§‹å»ºé€ æ—‹è½¬é—¨ï¼ˆå‹Ÿé›†èµ„é‡‘ã€ç­¹å¤‡åŸæ–™ï¼Œæ‹›å‹Ÿäººå‘˜å¯¹æœªæ¥äººå‘˜è€Œè¨€å¾ˆå¯èƒ½æ˜¯ä¸€é¡¹éš¾ä»¥å®Œæˆçš„å·¥ä½œï¼‰ï¼Œè€Œæ˜¯é€šè¿‡åŸ‹ä¸‹ä¸€ä¸ªä¸ªæ—¶é—´èƒ¶å›Šï¼Œå¹¶ä¸”åœ¨å†å²ä¸­æŒ‘é€‰ä¸€ä¸ªäººä½œä¸ºä»£ç†äººï¼ˆä¹Ÿå°±æ˜¯ç”µå½±ä¸­çš„åæ´¾è¨æ‰˜ï¼‰æ¥å®Œæˆè¿™äº›å·¥ä½œã€‚ä»å¦ä¸€ä¸ªè§’åº¦è€Œè¨€ï¼Œä»å†å²ä¸­æŒ‘é€‰ä»£ç†äººï¼Œä¹Ÿæ— éœ€ç‰¹æ„è¿›è¡Œï¼Œå› ä¸ºå†å²å·²ç»æ˜¯æ—¢å®šçš„äº‹å®ï¼Œæ‰€æœ‰æœªå‘ç”Ÿçš„äº‹æƒ…å¿…å®šä¼šå‘ç”Ÿï¼Œæ‰€æœ‰å·²ç»å‘ç”Ÿçš„äº‹æƒ…æ— æ³•æ”¹å˜ã€‚å› æ­¤ï¼Œåªéœ€è¦åŸ‹ä¸‹æ—¶é—´èƒ¶å›Šï¼Œå†å²ä¸Šè‡ªç„¶ä¼šæœ‰äººï¼ˆè¨æ‰˜ï¼‰æŒ–å‡ºæ¥å®Œæˆåç»­å·¥ä½œã€‚3.2. ç¥–çˆ¶æ‚–è®ºä¸æ—¶é—´æ—…è¡Œæˆ‘ä»¬çœ‹åˆ°ï¼Œç”±äºå¯ä»¥é€†å‘å›åˆ°è¿‡å»ï¼Œå¹¶ä¸”å¯ä»¥é€šè¿‡å›åˆ°è¿‡å»åçš„æŸäº›è¡Œä¸ºå½±å“åˆ°ä¸–ç•Œï¼Œé‚£ä¹ˆå…¶å®è¿™å°±æ˜¯æŸç§æ„ä¹‰ä¸Šçš„æ—¶é—´æ—…è¡Œäº†ã€‚é‚£ä¹ˆï¼Œå°±ä¼šå‡ºç°è¿™ä¹ˆä¸€ä¸ªæ‚–è®ºï¼Œå³å¤–ç¥–æ¯æ‚–è®ºï¼Œæˆ–ç§°ä¸ºç¥–çˆ¶æ‚–è®ºï¼Œç”±æ³•å›½ç§‘å¹»å°è¯´ä½œå®¶èµ«å†…Â·å·´èµ«æœ­ç»´å‹’ï¼ˆRenÃ© Barjavelï¼‰åœ¨1943å¹´å°è¯´ã€Šä¸å°å¿ƒçš„æ—…æ¸¸è€…ã€‹ï¼ˆLe Voyageur Imprudentï¼‰ä¸­æå‡ºã€‚æ‚–è®ºæƒ…å½¢å¦‚ä¸‹ï¼šå‡å¦‚ä½ å›åˆ°è¿‡å»ï¼Œåœ¨è‡ªå·±çˆ¶äº²å‡ºç”Ÿå‰æŠŠè‡ªå·±çš„ç¥–ï¼ˆçˆ¶ï¼‰æ¯æ€æ­»ï¼Œä½†æ­¤ä¸¾åŠ¨ä¼šäº§ç”Ÿä¸€çŸ›ç›¾çš„æƒ…å†µï¼šä½ å›åˆ°è¿‡å»æ€äº†ä½ å¹´è½»çš„ç¥–ï¼ˆçˆ¶ï¼‰æ¯ï¼Œç¥–ï¼ˆçˆ¶ï¼‰æ¯æ­»äº†å°±æ²¡æœ‰çˆ¶äº²ï¼Œæ²¡æœ‰çˆ¶äº²ä¹Ÿä¸ä¼šæœ‰ä½ ï¼Œé‚£ä¹ˆæ˜¯è°æ€äº†ç¥–ï¼ˆçˆ¶ï¼‰æ¯å‘¢ï¼Ÿ æˆ–è€…çœ‹ä½œï¼šä½ çš„å­˜åœ¨è¡¨ç¤ºï¼Œç¥–æ¯æ²¡æœ‰å› ä½ è€Œæ­»ï¼Œé‚£ä½ ä½•ä»¥æ€æ­»ç¥–ï¼ˆçˆ¶ï¼‰æ¯ï¼Ÿç›®å‰ï¼Œæ‰€æœ‰ç§‘å¹»ç”µå½±ä¸­å‡åœ¨æåŠ›é¿å…ç¥–çˆ¶æ‚–è®ºçš„äº§ç”Ÿï¼ˆæ²¡é”™ï¼ŒåŒ…æ‹¬ã€Šä¿¡æ¡ã€‹åœ¨å†…ï¼‰ã€‚æ‚–è®ºä¹‹æ‰€ä»¥è¢«è®¤ä¸ºæ˜¯æ‚–è®ºï¼Œå°±æ˜¯å› ä¸ºä»–æ˜¯ä¸å¯è§£çš„ï¼Œäººä»¬ä¸çŸ¥é“è¿™ä¸ªé—®é¢˜çš„ç­”æ¡ˆæ˜¯ä»€ä¹ˆã€‚ä¸ºä»€ä¹ˆå‘¢ï¼Ÿè¿™éœ€è¦æåˆ°å¦ä¸€ä¸ªç‰©ç†å­¦çŸ¥è¯†ã€‚åœ¨å·²çŸ¥çš„å®è§‚ä¸–ç•Œä¸­ï¼ŒæŒ‰ç…§ç›¸å¯¹è®ºï¼Œæ—¶é—´åªèƒ½æ‹‰ä¼¸æˆ–è€…å‹ç¼©ï¼Œä½†æ˜¯ä¸èƒ½é€†è½¬å€’é€€ã€‚è¿™ä¸€ç‚¹ï¼Œåœ¨è¯ºå…°çš„å¦ä¸€ä¸ªç»å…¸ç§‘å¹»ç”µå½± ã€Šæ˜Ÿé™…ç©¿è¶Šã€‹ ä¸­æœ‰è¿‡ä¸“é—¨çš„é•œå¤´æè¿°ã€‚ç®€è€Œè¨€ä¹‹ï¼Œç»å…¸ç‰©ç†å­¦ä¸­æ—¶é—´æ—…è¡Œæ— æ³•å®ç°ã€‚æ—¢ç„¶æ—¶é—´æ—…è¡Œä¸å¯å®ç°ï¼Œé‚£ä¹ˆäººä»¬å½“ç„¶æ— æ³•å›åˆ°è¿‡å»æ€æ­»è‡ªå·±çš„ç¥–çˆ¶ç¥–æ¯ï¼Œä¹Ÿå°±æ— æ³•è·å¾—è¿™ä¸ªæ‚–è®ºçš„ç­”æ¡ˆäº†ã€‚ä¸€å¥è¯ï¼Œç¥–çˆ¶æ‚–è®ºç»å¸¸è¢«ç”¨æ¥è¯æ˜ï¼Œä»ç»å…¸ç‰©ç†å­¦çš„è§’åº¦æ¥çœ‹ï¼Œæ—¶é—´æ—…è¡Œä¸èƒ½å®ç°ã€‚ä½†æ˜¯ï¼Œè‡³å°‘åœ¨å¾®è§‚ä¸–ç•Œï¼Œæ—¶é—´æ—…è¡Œåœ¨é‡å­å°ºåº¦ä¸Šå·²ç»è¢«è¯æ˜æ˜¯å¯ä»¥å®ç°çš„ã€‚åœ¨2014å¹´ï¼Œæ¾³å¤§åˆ©äºšæ˜†å£«å…°å¤§å­¦çš„ç§‘å­¦å®¶é¦–æ¬¡ä½¿ç”¨ä¸¤ä¸ªå…‰é‡å­ï¼ˆå…‰å­ï¼‰æ¨¡æ‹Ÿäº†é‡å­ç²’å­åœ¨æ—¶é—´ä¸­çš„æ—…è¡Œå¹¶å¯¹å…¶â€œä¸€ä¸¾ä¸€åŠ¨â€è¿›è¡Œäº†ç ”ç©¶ã€‚å› ä¸ºé‡å­ç²’å­çš„è¡Œä¸ºä¸ç¬¦åˆç»å…¸ç‰©ç†å­¦ï¼Œæ‰€ä»¥å°±å›é¿äº†ç¥–çˆ¶æ‚–è®ºã€‚é‚£ä¹ˆï¼Œå¦‚ä½•åœ¨å®è§‚å±‚é¢ä¸Šå›é¿ç¥–çˆ¶æ‚–è®ºï¼Œè¿›è¡Œæ—¶é—´æ—…è¡Œå‘¢ï¼Ÿç°åœ¨ä¸€èˆ¬æœ‰å‡ ç§æ¯”è¾ƒä¸»æµçš„å‡è¯´ï¼š      éœé‡‘çš„è§£é‡Šï¼šéœé‡‘è®¤ä¸ºï¼Œä¹Ÿè®¸æˆ‘ä»¬çœ‹åˆ°çš„å®‡å®™æ˜¯è¿™æ ·æ­£æ˜¯å› ä¸ºå®‡å®™å°±æ˜¯è¿™æ ·ã€‚ä»€ä¹ˆæ„æ€ï¼Ÿæœ‰ç‚¹ç»•å£â€¦å…¶æ„æ€æ˜¯ï¼Œæˆ‘ä»¬ç”Ÿæ´»çš„è¿™ä¸ªå®‡å®™å¯èƒ½å°±æ˜¯å·²ç»è¢«æ—¶é—´æ—…è¡Œæ”¹å˜è¿‡çš„ä¸–ç•Œäº†ã€‚        å¹³è¡Œå®‡å®™ï¼šå¹³è¡Œå®‡å®™ç†è®ºè®¤ä¸ºï¼Œæˆ‘ä»¬çš„æ¯ä¸€æ¬¡é€‰æ‹©ï¼Œéƒ½ä¼šäº§ç”Ÿä½ èƒ½é€‰æ‹©çš„æ‰€æœ‰å¹³è¡Œå®‡å®™ã€‚æ¯”å¦‚ä½ åœ¨è¯»å¤§å­¦çš„æ—¶å€™ï¼Œåœ¨ç‰©ç†å’Œè®¡ç®—æœºä¸“ä¸šé‡Œçº ç»“ä¸å·²ï¼Œæœ€åä½ é€‰æ‹©äº†ç‰©ç†ã€‚ä½†æ˜¯åœ¨å¦ä¸€ä¸ªå¹³è¡Œå®‡å®™é‡Œï¼Œä½ é€‰æ‹©çš„æ˜¯è®¡ç®—æœºã€‚æ‰€ä»¥ä½ æ¯ä¸€æ¬¡çš„é€‰æ‹©ï¼Œéƒ½ä¼šäº§ç”Ÿä¸€ä¸ªæˆ–è€…å‡ ä¸ªå¹³è¡Œå®‡å®™ã€‚å½“ä½ é€‰æ‹©å›åˆ°è¿‡å»é˜»æ­¢ä½ ç¥–çˆ¶æ¯åœ¨ä¸€èµ·çš„æ—¶å€™ï¼Œä½ æ˜¯ä»ä¸€ä¸ªä½ å·²ç»å‡ºç”Ÿçš„ä¸–ç•Œï¼Œå‰å¾€ä¸€ä¸ªä½ ä¸ä¼šå‡ºç”Ÿçš„å¹³è¡Œå®‡å®™ã€‚ä½ åœ¨å¹³è¡Œå®‡å®™çš„è¡Œä¸ºï¼Œå¹¶ä¸ä¼šå½±å“ä½ æ‰€åœ¨çš„ä¸–ç•Œã€‚æ‰€ä»¥æ‚–è®ºä¸å­˜åœ¨ã€‚        å¼¦ç†è®º  è®©æˆ‘ä»¬å›åˆ°ã€Šä¿¡æ¡ã€‹ç”µå½±ï¼Œåœ¨ç”µå½±ä¸­å¦‚ä½•é¿å…ç¥–çˆ¶æ‚–è®ºçš„äº§ç”Ÿå‘¢ï¼Ÿå›ç­”æ˜¯ï¼Œä¸¥æ ¼éµå®ˆæ—¶é—´å’Œé€»è¾‘é—­ç¯ï¼Œå“ªæ€•æ¥è‡ªæœªæ¥çš„ä½ é€†å‘å›åˆ°äº†è¿‡å»ï¼Œé‚£ä¹ˆæ‰€åšçš„è¡Œä¸ºä¹Ÿè¦åŠ¡å¿…æªå®ˆä¸å½±å“ä¸–ç•Œè¿è¡Œçš„å‡†åˆ™ã€‚æ¯”å¦‚ï¼Œåæ´¾é€†è½¬åï¼Œå“ªæ€•å·²ç»ç»å†è¿‡é«˜é€Ÿè½¦æˆ˜å’Œç»‘æ¶ç¯èŠ‚ï¼ŒçŸ¥é“æ‰‹ä¸Šæ‹¿çš„ç®±å­æ˜¯ç©ºç®±å­ï¼Œä¹Ÿè¦é€†å‘é™ªç€ä¸»è§’ï¼Œé¡ºç€æ—¶é—´æµåŠ¨çš„æ­£å‘å†â€œæ¼”â€ä¸€éç»‘æ¶å¥³ä¸»è§’ç´¢è¦ç®±å­çš„æ¡¥æ®µã€‚åˆæ¯”å¦‚ï¼Œç”·äºŒå·å°¼å°”ï¼Œå·²ç»ä¸ä¸»è§’è®¤è¯†å¤šå¹´ï¼Œåœ¨æ­£å‘æ—¶é—´ä¸­å´è¦è£…ä½œä¸ä¸»è§’ç´ æœªè°‹é¢ã€‚3.3. è‡ªå·±å’Œè‡ªå·±èƒ½å¦ç›¸è§ï¼Ÿè¿™ä¸ªé—®é¢˜æ¶‰åŠåˆ°å¾ˆæ·±åˆ»çš„å“²å­¦èƒŒæ™¯å’Œç‰©ç†èƒŒæ™¯ã€‚é¦–å…ˆä»å“²å­¦çš„è§’åº¦çœ‹ï¼Œæˆ–è€…å“²å­¦ä¸æ°å½“æˆ–è€…å¤ªå®½æ³›ï¼Œå°±å‡å¦‚ä½ åœ¨ç°å®ç”Ÿæ´»ä¸­çªç„¶çœ‹åˆ°æˆ–è€…å‘ç°äº†å¦ä¸€ä¸ªä½ çš„èº«å½±ï¼Œä½ ä¼šæ€ä¹ˆæƒ³ï¼Ÿæ€ä¹ˆåŠï¼Ÿåæ­£æˆ‘æ˜¯æƒ³è±¡ä¸æ¥ï¼Œå¯èƒ½ä¼šå¯¼è‡´æŸç§ç¾éš¾æ€§åæœä¹Ÿè¯´ä¸å®šï¼Ÿï¼ˆæ¯”å¦‚éƒ½æƒ³æ€æ­»å¯¹æ–¹ï¼Œä½œä¸ºä¸–ç•Œå”¯ä¸€çš„ä½ çš„å­˜åœ¨ï¼Œç­‰ç­‰ï¼‰ç„¶åä»ç‰©ç†å­¦çš„è§’åº¦æ¥çœ‹ï¼Œã€Šä¿¡æ¡ã€‹åœ¨ç‰‡ä¸­é˜è¿°äº†ä¸€ä¸ªç‰©ç†å­¦æ¦‚å¿µï¼ŒCPTå¯¹ç§°ã€‚ç‰©ç†å­¦å®šå¾‹æ»¡è¶³å®‡ç§°å¯¹ç§°ã€ç”µè·æ­£è´Ÿå¯¹ç§°ã€æ—¶é—´åæ¼”å¯¹ç§°è¿™ä¸‰ç§å¯¹ç§°ã€‚ç‰©ç†å­¦å®šå¾‹åœ¨Cã€På’ŒTçš„è”åˆä½œç”¨ä¸‹ä¿æŒä¸å˜ã€‚CPTå®šç†æ˜¯ç‰©ç†å­¦æœ€åŸºæœ¬çš„å®ˆæ’å®šå¾‹ã€‚å¦‚æœç²’å­ç”¨åç²’å­æ›¿æ¢ï¼Œå³æ‰‹å¾ç”¨å·¦æ‰‹å¾æ›¿æ¢ï¼Œä»¥åŠæ‰€æœ‰ç²’å­çš„é€Ÿåº¦éƒ½åå‘ï¼Œåˆ™ç‰©ç†å®šå¾‹ä¸å˜ï¼Œè¿™è¢«ç§°ä½œCPTå®šç†ã€‚CPTå®šå¾‹æ˜¯ä¸€ä¸ªç‰©ç†ç•Œæœ€åŸºæœ¬çš„å®ˆæ’å®šå¾‹ã€‚ç®€å•çš„æ¥è¯´å°±æ˜¯å®‡ç§°å¯¹ç§°ï¼Œç”µè·æ­£è´Ÿå¯¹ç§°å’Œæ—¶é—´åæ¼”å¯¹ç§°ä¸‰è€…æ˜¯ä¸¥æ ¼å®ˆæ’çš„ã€‚ç”µå½±ä¸­ï¼Œé€šè¿‡æ—‹è½¬é—¨é€†å‘çš„äººæˆ–äº‹ç‰©ï¼Œä¸ä»…ä»…æ˜¯ä½å§¿åè½¬äº†ï¼ˆå®‡ç§°Cåè½¬ï¼‰ï¼ŒåŠ¨é‡ä¹Ÿåå‘äº†ï¼ˆæ—¶é—´Tåè½¬ï¼‰ï¼Œç»„æˆæœ¬ä½“çš„ç‰©è´¨ä¹Ÿæ˜¯åè½¬çš„ï¼ˆç”µè·Påè½¬ï¼‰ã€‚å°±æ˜¯è¿™ä¸ªç‰©è´¨åè½¬ï¼ˆPåè½¬ï¼‰å¯¼è‡´äº†ä»¥ä¸‹ç»“è®ºï¼šæœªæ¥çš„è‡ªå·±ä¸èƒ½å’Œè¿‡å»çš„è‡ªå·±æ¥è§¦ï¼Œå¦åˆ™ä¼šå‘ç”Ÿæ­£åç‰©è´¨æ¹®ç­ã€‚æ‰€è°“æ¹®ç­ååº”ï¼Œå°±æ˜¯æ­£åç‰©è´¨ç›¸é‡æ‰€äº§ç”Ÿçš„çˆ†ç‚¸ã€‚å¤§å®¶å‡ ä¹éƒ½çŸ¥é“åœ¨å®‡å®™è¿™ä¸ªâ€è‡ªç„¶ç•Œâ€æœ‰åŸç†æˆ–å·¥ä½œæ­£å¥½ç›¸åçš„ç‰©è´¨ï¼Œæˆ‘ä»¬ä¸ºåŒºåˆ†å®ƒä»¬ï¼Œæ‰€ä»¥å«å®ƒä»¬æ­£ç‰©è´¨ä¸åç‰©è´¨ã€‚è¿™ä¸¤ç§ç‰©è´¨ä¸€æ—¦ç›¸é‡ä¾¿ä¼šäº§ç”Ÿçˆ†ç‚¸ã€‚åœ¨åŸºæœ¬æƒ…å†µä¸‹ï¼Œæ¹®ç­å°±æ˜¯å®Œå…¨çš„è´¨é‡-èƒ½é‡è½¬æ¢ï¼Œæ¹®ç­çš„ä¸¤ä¸ªç²’å­ä¼šé‡Šæ”¾å…¨éƒ¨çš„èƒ½é‡åŒå½’äºå°½ã€‚å¯ä»¥æƒ³è±¡ä¸€ä¸‹ï¼Œç°åœ¨çš„æ ¸è£‚å˜ï¼ˆåŸå­å¼¹ï¼‰å’Œæ ¸èšå˜ï¼ˆæ°¢å¼¹ï¼‰çˆ†ç‚¸çš„å‰§çƒˆç¨‹åº¦ï¼Œä»…ä»…æ˜¯ç²’å­çš„è£‚å˜å’Œèšå˜ååº”é‡Šæ”¾å‡ºçš„äº›è®¸èƒ½é‡ã€‚å¦‚æœä¸¤ä¸ªç²’å­å®Œå…¨æ¹®ç­å¹¶é‡Šæ”¾å‡ºå…¨éƒ¨èƒ½é‡ï¼Œå…¶çˆ†ç‚¸å¨åŠ›ä¼šæœ‰å¤šå¤§ï¼Ÿå› æ­¤ï¼Œæ­£å‘çš„ä½ å’Œé€†å‘çš„ä½ ç»å¯¹ä¸å¯ä»¥è§¦ç¢°å½¼æ­¤ï¼Œå› ä¸ºä½ ä»¬æ˜¯ç”±å®Œå…¨ç›¸åŒçš„æ­£åç²’å­ç»„æˆçš„ï¼Œæ¥è§¦å°†ä¼šç›´æ¥å‘ç”Ÿæ¹®ç­ååº”ï¼Œä½ å…¨èº«çš„è´¨é‡éƒ½å°†è½¬åŒ–ä¸ºèƒ½é‡ï¼Œç„¶åçˆ†ç‚¸ã€‚boomçš„ä¸€å£°ä¼°è®¡åŠä¸ªå¤§é™†å°±æ²¡äº†ã€‚è¿™é‡Œæˆ‘ä»¬å†æ¬¡å›åˆ°ç”µå½±ä¸­ï¼Œä¸»è§’å’Œå°¼å°”å›åˆ°è¿‡å»ï¼Œè¯•å›¾ä»æœºåœºå†æ¬¡è¿›å…¥æ—‹è½¬é—¨å‰ï¼Œç„¶åå‡ºç°çš„è‡ªå·±å’Œè‡ªå·±çš„æ‰“æ–—åœºæ™¯ã€‚åœ¨åœºæ™¯ä¸­ï¼Œé€†å‘çš„ä¸»è§’å…¨å‰¯æ­¦è£…ï¼Œå¸¦ç€å¤´ç›”ï¼Œä¸€æ–¹é¢é¿å…äº†è¿‡å»çš„æ­£å‘çš„è‡ªå·±è®¤å‡ºè‡ªå·±ï¼Œä¸€æ–¹é¢é¿å…äº†ç›´æ¥æ¥è§¦è¿‡å»çš„æ­£å‘è‡ªå·±ï¼Œé¿å…å‘ç”Ÿæ¹®ç­ã€‚å¹¶ä¸”ï¼Œè¿˜è¦å’Œè¿‡å»çš„æ­£å‘è‡ªå·±å®Œæˆè¿‡å»å·²ç»å®Œæˆè¿‡çš„ä¸€ç³»åˆ—æ‰“æ–—ï¼Œä»è€Œå®Œæˆæ—¶é—´ï¼ˆé€»è¾‘ï¼‰é—­ç¯ã€‚å‰é¢è¿˜æœ‰ä¸ªå°ç»†èŠ‚ï¼Œè¿˜è®°å¾—ç”·äºŒå·å°¼å°”ä¹Ÿå’Œå¦å¤–ä¸€ä¸ªå…¨å‰¯æ­¦è£…çš„äººæ‰“æ–—ä¹ˆï¼Œå¹¶ä¸”åœ¨æœ€åè¿˜è„±æ‰äº†é‚£ä¸ªäººçš„å¤´ç›”ã€‚åæ¥æˆ‘ä»¬çŸ¥é“ï¼Œé‚£ä¸ªå°±æ˜¯é€†å‘çš„ä¸»è§’è‡ªå·±ã€‚è€Œå°¼å°”åœ¨çœ‹åˆ°ä¸»è§’çš„é¢ç›®åï¼Œåœ¨ä¹‹åæ­£å‘çš„ä¸»è§’å‡»å€’å…¨å‰¯æ­¦è£…çš„æœªæ¥ä¸»è§’ï¼Œå‡†å¤‡æ€æ­»å¯¹æ–¹æ—¶ï¼Œå¹¶æ²¡æœ‰å‘Šè¯‰æ­£å‘ä¸»è§’å¯¹æ–¹çš„èº«ä»½ï¼Œè€Œåªæ˜¯é˜»æ­¢ä¸»è§’æ€äººã€‚è¿™ä¹Ÿæš—å«äº†ç”µå½±æœ¬èº«çš„æ„æ€æœ‰æ—¶å€™ï¼Œæ— çŸ¥æ˜¯æœ€å¤§çš„ä¼˜åŠ¿å› ä¸ºå°¼å°”å¿…é¡»è¦ä¿è¯ä¸»è§’åœ¨å½“æ—¶ä¸çŸ¥æƒ…ï¼Œæ‰èƒ½åšå‡ºæœ€ç¬¦åˆçš„ä¸¾åŠ¨ï¼Œä¿è¯æ—¶é—´ï¼ˆé€»è¾‘ï¼‰é—­ç¯ã€‚å¦åˆ™å¾ˆå¯èƒ½å› ä¸ºè´è¶æ•ˆåº”è€Œå¯¼è‡´ä¸å¯é¢„çŸ¥çš„æ··æ²Œã€‚4. æ—¶é—´é’³å½¢ä½œæˆ˜4.1. è¿½è½¦æŠ¢å¤ºé’š241å‰é¢é“ºå«äº†è¿™ä¹ˆå¤šï¼Œä¸‹é¢ç»ˆäºè¿›å…¥ç”µå½±ã€Šä¿¡æ¡ã€‹ä¸­ä¸¤ä¸ªæœ€éš¾æ‡‚çš„æ—¶é—´é’³å½¢ä½œæˆ˜ä¹‹ä¸€ï¼šã€è¿½è½¦æŠ¢å¤ºé’š241ã€‘çš„è§£æã€‚éœ€è¦æŒ‡å‡ºçš„æ˜¯ï¼Œä¸‹é¢çš„å›¾ç‰‡æ¥è‡ªäºè§£æè§†é¢‘ã€å¤§èªçœ‹ç”µå½±ã€‘çš„å¯å‘å’Œå‚è€ƒã€‚é¦–å…ˆä¸Šç¬¬ä¸€å¼ å›¾ï¼Œä»¥æ­£å‘ä¸»è§’çš„è§†è§’æ¥å®¡è§†æ•´ä¸ªè¿‡ç¨‹ã€‚è¿™å¼ å›¾çš„ä¸ŠåŠéƒ¨åˆ†æ˜¯æ­£å‘æ—¶é—´æµåŠ¨æ–¹å‘ï¼Œä¹Ÿå°±æ˜¯çº¢è‰²ç®­å¤´çš„æ–¹å‘ï¼Œä¸‹åŠéƒ¨åˆ†æ˜¯é€†å‘æ—¶é—´æµåŠ¨æ–¹å‘ï¼Œä¹Ÿå°±æ˜¯è“è‰²ç®­å¤´çš„æ–¹å‘ã€‚åˆ†æçš„èµ·ç‚¹ä½äºä¸Šå·¦ä¸Šè§’ï¼Œçº¢è‰²ç®­å¤´å°¾éƒ¨ã€‚ä¸‹é¢æˆ‘ä»¬æ¥ä¸€æ­¥æ­¥è§£æï¼š  å»ºè®®å°†ä¸Šé¢çš„å›¾ç‰‡æˆªå–ä¿å­˜åå¯¹ç…§ä¸‹é¢çš„æ–‡å­—æ¯”å¯¹é˜…è¯»ã€‚é¦–æ¬¡é˜…è¯»å¯ä»¥å¿½ç•¥ã€ä¸­æ‹¬å·é‡Œçš„å­—ï¼Œç•™å¾…åç»­é˜…è¯»ã€‘ï¼Œé˜…è¯»éš¾ç‚¹å‡å·²åŠ ç²—å­—ä½“æ˜¾ç¤ºï¼š=== ä»¥ä¸‹æ˜¯ä¸»è§’çš„æ­£å‘æ—¶é—´è§†è§’ä¸‹çš„è¿‡ç¨‹è§£æ ===      ä¸»è§’åœ¨æ‹¿åˆ°ç®±å­åï¼Œçªç„¶ä¸€è¾†å€’ç€çš„è½¦å‡ºç°ï¼Œæ’æ¢å¤äº†åŸæœ¬ç¢è£‚çš„ä¸»è§’è½¦çš„åè§†é•œï¼ˆè¡¨æ˜å¯¹æ–¹æ˜¯é€†è¡Œå›æ¥çš„äººå¼€çš„è½¦ï¼‰ï¼Œç„¶åå€’ç€ä¸ä¸»è§’å¹¶æ’è¡Œé©¶ã€‚    è½¦çª—æ‰“å¼€ï¼Œåæ´¾è¨æ‰˜ç”¨æªå¨èƒå¥³ä¸»ï¼ˆæ­¤æ—¶å¥³ä¸»æ˜¯è¢«è¨æ‰˜ä»å†›ç«ä»“åº“ä¸­æŒŸæŒå‡ºæ¥çš„ï¼‰ã€‚æ³¨æ„åˆ°è¨æ‰˜å¸¦ç€æ°§æ°”é¢ç½©ï¼Œæ„å‘³ç€è¨æ‰˜æ­¤æ—¶æ˜¯é€†è¡Œçš„ï¼ˆä¹Ÿå°±æ˜¯ä»æœªæ¥è€Œæ¥çš„é€†å‘è¨æ‰˜ï¼Œä»–åœ¨æœªæ¥æŸä¸ªæ—¶åˆ» $t$ å¼€å§‹é€†è½¬ç„¶åä¸€è·¯å›åˆ°æ­¤å¤„ï¼‰ã€‚  è¨æ‰˜æ°æŒ‡å¤´å€’è®¡æ—¶ã€‚åƒµæŒä¸­ï¼Œä¸»è§’å‘ç°ï¼Œä»–å’Œå¯¹é¢é€†è¡Œè¨æ‰˜çš„å‰æ–¹æœ‰ä¸€è¾†è½¦ï¼ŒåŸæœ¬æ˜¯ç¿»è½¦çŠ¶æ€ï¼Œä½†æ˜¯éšç€æ¥è¿‘ï¼Œè¯¥è½¦ä»ç¿»è½¦çŠ¶æ€å˜æˆæ­£å¸¸çŠ¶æ€ï¼Œå¹¶åŒæ ·è¢«åå‘é©¾é©¶ç€æ¥åˆ°ä¸»è§’å’Œé€†è½¬è¨æ‰˜çš„ä¸­é—´ã€‚ã€åé¢æˆ‘ä»¬çŸ¥é“ï¼Œä¸­é—´è¿™ä¸¤è½¦å­æ˜¯é€†è¡Œä¸»è§’å¼€å›æ¥çš„ã€‘  è¨æ‰˜æ°æŒ‡å¤´å€’è®¡æ—¶ç»“æŸï¼Œä¸»è§’è¢«é€¼æ— å¥ˆï¼Œå°†æ‰‹æç®±é€šè¿‡ä¸­é—´é‚£è¾†åå‘è¡Œé©¶çš„è½¿è½¦ï¼Œæ‰”ç»™äº†è¨æ‰˜ï¼Œä½†æ˜¯å·å·å°†ç®±å­å†…çš„é’š241æ‰”è¿›äº†ä¸­é—´åå‘è¡Œé©¶çš„è½¦å­ã€‚  è¨æ‰˜æ‹¿åˆ°ç®±å­åï¼Œå’Œæ‰‹ä¸‹æ¢äº†ä¸€è¾†è½¦èµ°äººï¼Œä¸»è§’çˆ¬åˆ°åªå‰©ä¸‹å¥³ä¸»çš„å¯¹é¢é€†è¡Œè½¦å­ï¼Œåƒé’§ä¸€å‘ç”¨æ‰‹è¸©ä¸‹åˆ¹è½¦ï¼Œæ•‘ä¸‹å¥³ä¸»ã€‚ï¼ˆåŒæ—¶ï¼Œè¨æ‰˜å‘ç°ç®±å­æ˜¯ç©ºçš„ï¼Œä¸¢å¼ƒç®±å­ï¼‰  ç”·ä¸»ï¼Œå°¼å°”ï¼Œå¥³ä¸»ä¸‰äººä¸‹è½¦åï¼Œè¢«è¨æ‰˜æ‰‹ä¸‹åŠ«æŒï¼Œå¸¦åˆ°çº¢è“å®¡é—®å®¤ã€‚ä»“åº“è¢«åˆ’åˆ†ä¸ºçº¢è“ä¸¤ä¸ªéƒ¨åˆ†ï¼Œç”·ä¸»è¢«å¸¦è¿›è“è‰²åŒºåŸŸï¼Œè¨æ‰˜å¸¦ç€å¥³ä¸»è¿›å…¥è“è‰²éƒ¨åˆ†ã€‚ã€æ­¤æ—¶è¨æ‰˜æ²¡å¸¦æ°§æ°”é¢ç½©ï¼Œåè€Œæ˜¯å¥³ä¸»è¢«å¸¦ä¸Šé¢ç½©ï¼Œå› æ­¤è¡¨æ˜å¯¹é¢è“è‰²åŒºåŸŸæ˜¯é€†è½¬åŒºåŸŸï¼Œé€†è½¬è¨æ‰˜æ— éœ€é¢ç½©è€Œå¥³ä¸»éœ€è¦é¢ç½©å‘¼å¸æ­£å‘ç©ºæ°”ã€‘  é€†è½¬è¨æ‰˜å¨èƒç”·ä¸»è¦å¼ºæ€å¥³ä¸»ï¼Œé€¼é—®ç”·ä¸»ç®±å­å†…çš„ä¸œè¥¿åœ¨å“ªé‡Œã€‚æœŸé—´ï¼Œç”·ä¸»çœ‹åˆ°å¯¹é¢çš„é€†è½¬è¨æ‰˜å¯¹ç€å¥³ä¸»è…¹éƒ¨å¼€äº†ä¸€æªï¼ˆé€†è½¬å­å¼¹ï¼‰ï¼Œç„¶åæŒ‡ç€å¥³ä¸»å¤´éƒ¨å¨èƒã€‚ç”·ä¸»æ— å¥ˆæ’’è°è¯´ç®±å­å†…çš„ä¸œè¥¿åœ¨ä¹‹å‰å¼€è½¦çš„å‰¯é©¾é©¶åº§ä½ä¸Šã€‚  å¦ä¸€ä¸ªè¨æ‰˜ï¼ˆæ­£å‘è¨æ‰˜ï¼Œä¸€ç›´éšè—åœ¨å®¡é—®å®¤ï¼‰å‡ºç°åœ¨çº¢è‰²åŒºåŸŸï¼Œç»§ç»­å®¡é—®ç”·ä¸»ã€‚ç›´åˆ°æ•‘å…µé—¯å…¥çº¢è‰²åŒºåŸŸã€‚  ä¸»è§’æ•‘å…µèµ¶åˆ°ï¼Œè¨æ‰˜è¿›å…¥çº¢è‰²æ—‹è½¬é—¨ï¼Œé€†è½¬å›åˆ°è¿‡å»ï¼ˆä»è“è‰²é€†è½¬é—¨å‡ºæ¥ï¼‰ã€‚  ä¸»è§’ä¸ºäº†æ‹¯æ•‘å¥³ä¸»å‡¯ç‰¹çš„ä¼¤ï¼ŒåŒæ—¶ä¸ºäº†é˜»æ­¢åæ´¾è¨æ‰˜ï¼Œå¸¦ç€å‡¯ç‰¹è¿›å…¥çº¢è‰²æ—‹è½¬é—¨é€†è½¬ã€‚=== ä»¥ä¸‹æ˜¯ä¸»è§’çš„é€†è½¬æ—¶é—´è§†è§’ä¸‹çš„è¿‡ç¨‹è§£æ ===  ä¸»è§’é€†è½¬åï¼Œå¼€è½¦é€€å›åˆ°å‰é¢çš„é£™è½¦ç°åœºï¼Œç›´åˆ°å¼€åˆ°ä¹‹å‰ä¸»è§’å’Œè¨æ‰˜ä¸¤è¾†è½¦ä¹‹é—´æ—¶ï¼Œæ‰æ„è¯†åˆ°ä¸­é—´é‚£è¾†ä»ç¿»è½¦çŠ¶æ€èµ·æ¥çš„è½¦æ­£å¼è‡ªå·±å¼€çš„è¿™è¾†è½¦ã€‚  æ­¤æ—¶ï¼Œé€†è½¬è¨æ‰˜å‘ç°äº†é€†è½¬çš„ä¸»è§’åœ¨ä¸­é—´å¼€ç€çš„è½¦ï¼Œç„¶åæ’ç¿»äº†ä¸»è§’çš„è½¦ï¼Œå¹¶ç‚¹ç‡ƒäº†æ±½æ²¹ã€‚ä½†æ˜¯ç”±äºé€†è½¬ä¸»è§’çš„çƒ­ä¼ å¯¼æ˜¯é€†å‘çš„ï¼Œè½¦å­æ¸©åº¦åè€Œè¶Šæ¥è¶Šä½ï¼Œæ•‘äº†ä¸»è§’ä¸€å‘½ã€‚  ä¹‹åï¼Œå›°åœ¨è½¦ä¸­çˆ†ç‚¸ä½æ¸©çš„é€†è½¬ä¸»è§’ï¼Œè¢«é€†è½¬å°¼å°”æ•‘å‡ºï¼ŒäºŒäººéšå³å¸¦ç€å—ä¼¤çš„å‡¯ç‰¹å‰å¾€è¿‡å»çš„æœºåœºã€‚  å‰é¢æˆ‘ä»¬å·²ç»ç›´åˆ°ï¼Œé€†è½¬å‡¯ç‰¹éœ€è¦ä¿æŒé€†è½¬å¤§çº¦ä¸€å‘¨æ‰èƒ½ä¼¤åŠ¿ç—Šæ„ˆï¼Œç„¶åéœ€è¦å†æ¬¡å€ŸåŠ©æ—‹è½¬é—¨å›åˆ°æ­£å‘ï¼Œä½†æ˜¯ä¸€å‘¨å‰å®¡é—®å®¤çš„æ—‹è½¬é—¨åœ¨åæ´¾è¨æ‰˜çš„æ§åˆ¶ä¸­ï¼Œè‚¯å®šä¸èƒ½é€šè¿‡è¿™é‡Œçš„æ—‹è½¬é—¨å›å»ï¼Œé‚£ä¹ˆä¸‰äººåªèƒ½é€‰æ‹©å‰å¾€ä¸€å‘¨å‰çš„æœºåœºï¼Œå› ä¸ºæ­£å¥½ä¸€å‘¨å‰ä¸»è§’å’Œå°¼å°”åœ¨é‚£é‡Œè¿›è¡Œäº†ä¸€æ¬¡é£æœºæ’å¤§æ¥¼çš„éªšæ“ä½œï¼Œæœºåœºé‚£é‡Œçš„æ—‹è½¬é—¨é˜²å®ˆè–„å¼±ã€‚  ä¹Ÿå°±æ˜¯åœ¨é‚£é‡Œï¼Œä¸»è§’å’Œé€†è½¬ä¸»è§’ææ–—äº†ä¸€æ³¢ã€‚å¦‚æœè¿˜æ²¡å¤ªçœ‹æ˜ç™½ï¼Œæ²¡å…³ç³»ï¼Œä¸‹é¢ä¸Šç¬¬äºŒå¼ å›¾ï¼Œä»¥åæ´¾è¨æ‰˜çš„è§†è§’æ¥å®¡è§†æ•´ä¸ªè¿‡ç¨‹ã€‚=== ä»¥ä¸‹æ˜¯åæ´¾è¨æ‰˜æ­£å‘æ—¶é—´è§†è§’ä¸‹çš„è¿‡ç¨‹è§£æ ===  å†æ¬¡æé†’ï¼Œè¿™åœºæˆå…¨åœºéƒ½æ˜¯è¨æ‰˜æ‰§è¡Œçš„æ—¶é—´é’³å½¢ä½œæˆ˜ã€‚  è¨æ‰˜å’Œå¥³ä¸»å‡¯ç‰¹å»å¾€æ¸¯å£ï¼ŒäºŒè€…åµäº†ä¸€æ¶ï¼Œå‡¯ç‰¹ç”¨æªæŒ‡ç€è¨æ‰˜ä½†æ²¡æœ‰å¼€æªï¼Œè¨æ‰˜å¯¹å‡¯ç‰¹è¿›è¡Œäº†ä¸€ç•ªå®¶æš´åç¦»å¼€ã€‚  è¨æ‰˜ç¦»å¼€åï¼Œå¸¦ä¸Šè€³æœºï¼Œå¬ç€æ­£åä¸–ç•Œä¼ æ¥çš„ä¿¡æ¯ï¼Œä¸€ç›´èº²åœ¨çº¢è“å®¡é—®å®¤ä¸­è§‚å¯Ÿæƒ…å†µã€‚  ä¸€ç›´ç­‰åˆ°ä¸»è§’è¢«æŠ¼å…¥çº¢è‰²åŒºåŸŸï¼Œè¢«å¯¹é¢è“è‰²åŒºåŸŸçš„è¨æ‰˜é—®å‡ºæ¼”ç®—æœºçš„ä¸‹è½æ—¶ï¼Œä»æš—å¤„å‡ºæ¥çŒ›å‡»ä¸»è§’ï¼Œå¹¶ç»§ç»­å®¡é—®ã€‚  è¨æ‰˜çœ‹åˆ°è“è‰²æˆ¿é—´çš„é€†è½¬è‡ªå·±å¼€å§‹å¾€é€†è½¬é—¨æ–¹å‘èµ°ï¼Œäºæ˜¯æ„è¯†åˆ°è‡ªå·±åº”è¯¥è¿›å…¥çº¢è‰²é€†è½¬é—¨è¿›è¡Œé€†è½¬äº†ã€‚      è¨æ‰˜å§‘ä¸”ç›¸ä¿¡äº†ä¸»è§’è¯´çš„è¯ï¼Œæ­¤æ—¶ä¸»è§’çš„æ•‘å…µæ„Ÿåˆ°ï¼Œè¨æ‰˜ï¼ˆå’Œæ‰‹ä¸‹å¸æœºï¼‰å› æ­¤è¿›å…¥çº¢è‰²é€†è½¬é—¨ï¼Œä»è“è‰²é€†è½¬é—¨å‡ºæ¥ã€å› æ­¤å‰é¢ä¸»è§’è§†è§’ä¸‹ï¼Œå¯¹é¢è“è‰²åŒºåŸŸçš„è¨æ‰˜å°±æ˜¯è¿™ä¸ªåˆšåˆšé€†è½¬ä¹‹åçš„è¨æ‰˜ã€‘ã€‚    è¿›å…¥é€†è½¬è¨æ‰˜çš„å®¡é—®è¡¨æ¼”æ—¶é—´ï¼Œé€†è½¬è¨æ‰˜çš„è§†è§’ä¸‹ï¼Œçº¢è‰²åŒºåŸŸçš„æ­£å‘ä¸»è§’çš„è¡Œä¸ºè¿‡ç¨‹æ˜¯é€†å‘çš„ï¼Œä»–å¿…é¡»æŒ‰ç…§åˆšåˆšèº²åœ¨æš—å¤„æ—¶å¬åˆ°çš„é€†å‘è‡ªå·±å®¡é—®è¨æ‰˜çš„è¿‡é¡ºåºï¼Œå†é€†å‘è¿›è¡Œä¸€æ¬¡å®¡é—®è¿‡ç¨‹ï¼Œä½¿å¾—æ—¶é—´ï¼ˆé€»è¾‘ï¼‰é—­ç¯å®Œå¤‡ã€‚          è¨æ‰˜è¿›å…¥è“è‰²åŒºåŸŸæ—¶ï¼ŒåŒºåŸŸå†…çš„å‡¯ç‰¹å·²ç»æ˜¯è¢«é€†è½¬å­å¼¹æ‰“ä¼¤åçš„çŠ¶æ€ï¼ˆå¦‚æœéš¾ä»¥ç†è§£ï¼Œåœ¨ç¿»è¿‡å»çœ‹ä¸€ä¸‹ä¸»è§’æ­£å‘è§†è§’ï¼Œæ­¤æ—¶æ˜¯æ•´ä¸ªæ—¶é—´çº¿çš„æœ«ç«¯çŠ¶æ€äº†ï¼‰      å‰é¢ä¸»è§’åœ¨æ­£å‘æ—¶é—´ä¸­çœ‹åˆ°çš„é¡ºåºï¼šé€†è½¬è¨æ‰˜ç”¨æªæ‰“ä¸­å‡¯ç‰¹è…¹éƒ¨ï¼Œç„¶åç”¨æŠ¢æŒ‡ç€å‡¯ç‰¹å¤´éƒ¨      å› æ­¤ç°åœ¨é€†è½¬è¨æ‰˜ç†åº”è¡¨æ¼”çš„é¡ºåºï¼šç”¨æŠ¢æŒ‡ç€å‡¯ç‰¹å¤´éƒ¨ï¼Œç„¶åå¼€æªæ‰“ä¸­å‡¯ç‰¹è…¹éƒ¨      æ³¨æ„æ­¤æ—¶é€†è½¬è¨æ‰˜å¼€æªæ—¶ï¼Œå­å¼¹åº”ä»ç»ç’ƒä¸Šé£å›æ‰‹æªï¼Œè€Œå¥³ä¸»å‡¯ç‰¹ä¹Ÿåº”è¯¥ä»ä¸­æªå—ä¼¤çŠ¶æ€å˜ä¸ºæ²¡æœ‰ä¸­æªçŠ¶æ€ï¼›      æœ€åï¼Œè¨æ‰˜å¸¦ç€æ²¡æœ‰ä¸­å¼¹çš„å‡¯ç‰¹ç¦»å¼€ã€‚        é€†è½¬è¨æ‰˜å¸¦ç€å‡¯ç‰¹å‡ºæ¥åï¼Œå’Œé€†è½¬å¸æœºå›åˆ°è½¦ä¸­ï¼Œå¼€è½¦æ¥åˆ°ä¹‹å‰åŠ«æŒæ­£å‘ä¸»è§’å’Œå‡¯ç‰¹çš„åœ°æ–¹ï¼Œæ”¾ä»»å‡¯ç‰¹è‡ªè¡Œé€†å‘è¡ŒåŠ¨ã€æœ¬è´¨ä¸Šæ˜¯æ­£å‘ä¸»è§’å’Œå‡¯ç‰¹çš„æ­£å‘è¿åŠ¨ï¼Œåœ¨æ­¤æ—¶çš„é€†è½¬è¨æ‰˜çœ‹æ¥æ˜¯åè¿‡æ¥çš„é€†å‘è¡ŒåŠ¨è€Œå·²ã€‚åœ¨æ­£å‘æ—¶é—´ä¸­ï¼Œå‡¯ç‰¹è¢«æ­£å‘ä¸»è§’æ•‘ä¸‹åï¼Œè¢«è¨æ‰˜æ‰‹ä¸‹åŠ«æŒå¹¶äº¤ç»™è¨æ‰˜å¸¦è¿›çº¢è“å®¡é—®å®¤ï¼Œæ­¤å¤„å°±æ˜¯å…¶é€†è¿‡ç¨‹ã€‘ã€‚  è¨æ‰˜æ”¾ä»»å‡¯ç‰¹è‡ªè¡Œé€†å‘è¡ŒåŠ¨åï¼Œæ¥åˆ°ä¸»è§’çš„è½¦çš„å‰¯é©¾é©¶å¤„æ‘¸ç´¢ã€‚æ­¤æ—¶èƒŒæ™¯æ­£æ˜¯åŠ«æŒæ­£å‘ä¸»è§’å’Œå‡¯è‰çš„è¿‡ç¨‹ï¼Œè¨æ‰˜æœç´¢åæœªèƒ½å‘ç°æ¼”ç®—æœºï¼Œæ„è¯†åˆ°ä¸»è§’éª—äº†è‡ªå·±ã€‚  é€†è½¬è¨æ‰˜äºæ˜¯å’Œé€†è½¬å¸æœºå¼€è½¦ç»§ç»­å¾€æ—¶é—´é€†å‘è¿½æº¯ï¼ŒæœŸé—´è¢«ä»–åœ¨æ­£å‘æ—¶é—´é‡Œæ‰”æ‰çš„ç©ºç®±å­é£å›åˆ°ä»–çš„æ‰‹ä¸­ã€‚  ï¼ˆåŒæ—¶ï¼Œä¸»è§’ä¹Ÿå·²ç»é€šè¿‡æ—‹è½¬é—¨é€†è½¬ï¼Œå¹¶å¼€è½¦è¿½äº†ä¸Šæ¥ï¼‰ä¸‹é¢è¿›å…¥æ¯”è¾ƒå¤æ‚éš¾ä»¥ç†è§£çš„åœ°æ–¹ï¼Œå†æ¬¡ç»˜åˆ¶ä¸€å¼ è¶…ç°å®ä¸»ä¹‰æŠ½è±¡æ´¾å›¾ç¤ºï¼Œè¾…åŠ©ç†è§£  é€†è½¬è¨æ‰˜åœ¨æ­£å‘ä¸»è§’å‡†å¤‡è¥æ•‘å‡¯ç‰¹ä¹‹å‰ï¼Œè¿½ä¸Šå¹¶æ¢åˆ°åªæœ‰å‡¯ç‰¹ä¸€ä¸ªäººä¹˜åçš„è½¦ä¸Šã€‚  é€†è½¬è¨æ‰˜çœ‹åˆ°ä¸€è¾†è½¦æ’å…¥ä»–å’Œæ­£å‘ä¸»è§’ä¸­é—´ï¼Œå‘ç°æ˜¯é€†è½¬ä¸»è§’åœ¨å¼€è½¦ï¼Œä¹Ÿçœ‹åˆ°äº†ç®±å­å†…çš„æ¼”ç®—æœºä»ä¸­é—´è¿™è¾†è½¦ä¸­é£åˆ°ä¸»è§’æ‰‹ä¸­ã€å³æ­£å‘ä¸»è§’åœ¨æ­£å‘æ—¶é—´é‡Œï¼Œå°†æ¼”ç®—æœºæ‰”åˆ°ä¸­é—´çš„è½¦å­é‡Œã€‘ã€‚è‡ªæ­¤ï¼Œé€†è½¬è¨æ‰˜æ‰çœŸæ­£çŸ¥é“æ¼”ç®—æœºçš„ä½ç½®ã€‚  é€†è½¬è¨æ‰˜å°†ç®±å­ä¸¾å‡ºçª—å¤–ï¼Œæ¾æ‰‹ï¼Œç®±å­ç»è¿‡ä¸­é—´è¿™è¾†è½¦ï¼Œé£å›æ­£å‘ä¸»è§’æ‰‹ä¸­ã€‚  é€†è½¬è¨æ‰˜åˆ«ç¿»ä¸­é—´é‚£è¾†é€†å‘ä¸»è§’å¼€çš„è½¦ã€‚ã€ä½†æ˜¯ä»–ä¸æ˜¯ç«‹åˆ»ä¸‹è½¦ç‚¹ç‡ƒç¿»äº†çš„è½¦ï¼Œå› ä¸ºä»–è¦ç»§ç»­æŠŠä¸‹é¢çš„æˆæ¼”å®Œã€‘  é€†è½¬è¨æ‰˜é€†å‘å€’è®¡æ—¶ä¸¾æ‰‹æŒ‡1ï¼Œ2ï¼Œ3ï¼Œç¤ºæ„æ­£å‘ä¸»è§’æŠŠç®±å­æ‰”ç»™ä»–ã€‚  é€†è½¬è¨æ‰˜å…³é—­è½¦çª—ï¼Œå’Œæ­£å‘ä¸»è§’åˆ†é“æ‰¬é•³ã€‚  é€†è½¬è¨æ‰˜è¿”å›ä¹‹å‰è¢«ä»–åˆ«ç¿»çš„é€†å‘ä¸»è§’å¼€çš„è½¦ï¼Œç‚¹ç€æ³„éœ²çš„æ±½æ²¹åï¼Œè¿”å›è½¦å­å°†å‡¯ç‰¹é€å›å†›æ¢°ä»“åº“ã€‚æœŸé—´ï¼Œé€†è½¬è¨æ‰˜é€šçŸ¥æ­£å‘æ‰‹ä¸‹ï¼Œå‰å¾€é€†è½¬ä¸»è§’å¼€çš„é‚£è¾†è½¦ä¸­å–èµ°æ¼”ç®—æœºéƒ¨ä»¶ã€‚          ã€è¿™è¾†è½¦ä¹‹å‰åœåœ¨çº¢è“å®¡é—®æˆ¿çš„å¤–é¢ï¼Œåœ¨é€†è½¬ä¸»è§’ä¸Šè½¦ä¹‹å‰ï¼Œæ­£å‘æ‰‹ä¸‹å–èµ°ï¼Œç„¶åæ‰‹ä¸‹å†é€šè¿‡é€†è½¬ï¼Œå°†æ¼”ç®—æœºéƒ¨ä»¶é€†è½¬åäº¤ç»™é€†è½¬è¨æ‰˜ã€‘      ã€ä¹Ÿå°±æ˜¯è¯´ï¼Œé€†è½¬ä¸»è§’å‡ºçº¢è“å®¡é—®æˆ¿åï¼Œå¼€çš„é‚£è¾†è½¦ï¼Œæ¼”ç®—æœºéƒ¨ä»¶ä¸€ç›´åœ¨é‡Œé¢ã€‚ä»é€†è½¬è§†è§’æ¥çœ‹ï¼Œåœ¨ä»–ä¸Šè½¦å‰ï¼Œæ˜¯æ­£å‘çš„æ‰‹ä¸‹å€’é€€å›æ¥æ”¾åˆ°è½¦é‡Œçš„ã€‘        é€†è½¬è¨æ‰˜å°†è½¦åœåœ¨ç å¤´å†›æ¢°ä»“åº“é—¨å£ï¼Œç­‰å¾…æ­£å‘è¨æ‰˜å®¶æš´æ­£å‘å‡¯ç‰¹åï¼Œæ­£å‘è¨æ‰˜å¸¦ä¸Šè€³æœºï¼Œæ­£é€†è½¬è¨æ‰˜å¼€å§‹æ²Ÿé€šä¿¡æ¯  ã€å¾ˆå¯èƒ½é€†å‘è¨æ‰˜ç›´æ¥å°†æœªæ¥çš„æ•´ä¸ªè¡¨æ¼”éƒ½å‘ŠçŸ¥æ­£å‘è¨æ‰˜ï¼Œæ¯”å¦‚ï¼šä½ ç°åœ¨ç›´æ¥å»çº¢è“å®¡é—®å®¤ç­‰ç€ï¼Œç­‰åˆ°å¯¹é¢è“è‰²åŒºåŸŸçš„æˆ‘é—®å‡ºæ¼”ç®—æœºä½ç½®åï¼Œå†²å‡ºå»ç»§ç»­å®¡é—®ï¼Œç„¶åè¿›å…¥çº¢è‰²æ—‹è½¬é—¨ï¼Œå…¶ä»–çš„ä¸å¤šè¯´äº†ï¼Œæœ€åè‚¯å®šèƒ½æ‹¿åˆ°æ¼”ç®—æœºï¼ˆä¸ºä»€ä¹ˆä¸å¤šè¯´ï¼Ÿå› ä¸ºæ— çŸ¥æ˜¯æœ€å¤§çš„ä¼˜åŠ¿ï¼‰ã€‘  é€†è½¬è¨æ‰˜å®Œæˆæ•´å¥—è¡¨æ¼”ï¼Œè½¦ç»§ç»­åœåœ¨ç å¤´å†›æ¢°ä»“åº“é—¨å£ï¼Œç­‰åˆ°æ­£å‘è¨æ‰˜å’Œæ­£å‘å‡¯ç‰¹è¿›å…¥å†›æ¢°åº“ã€‚  ã€å®Œæˆè¡¨æ¼”åä¸ºä»€ä¹ˆè¿˜è¦ç­‰å‘¢ï¼Ÿç”µå½±ä¸­æœ‰ä¸ªç‰¹å†™ï¼Œæ­£å‘å‡¯ç‰¹è¿›å…¥ä»“åº“å‰ï¼Œéš”ç€æ æ†çœ‹åˆ°å¸¦ç€æ°§æ°”é¢ç½©çš„é€†è½¬å¸æœºååœ¨è½¦é‡Œï¼Œé€†è½¬å¸æœºæ„Ÿåˆ°æœ‰ç›®å…‰æ³¨è§†ï¼Œå›å¤´ä¹Ÿçœ‹åˆ°äº†æ­£å‘å‡¯ç‰¹ã€‚ã€‘  ã€é€†è½¬å¸æœºå¯èƒ½å‘Šè¯‰äº†é€†è½¬è¨æ‰˜è‡ªå·±è¢«å‡¯ç‰¹çœ‹åˆ°äº†ï¼Œä¸ºäº†ä¿è¯æ—¶é—´ï¼ˆé€»è¾‘ï¼‰é—­ç¯ï¼Œå¿…é¡»è¦ä¿è¯è½¦å­å’Œé€†è½¬å¸æœºå‘†åœ¨è¿™é‡Œï¼Œç›´åˆ°æ—¶é—´é€†æµåˆ°è¢«æ­£å‘å‡¯ç‰¹çœ‹åˆ°ã€‘  è‡³æ­¤ï¼Œé€†è½¬è¨æ‰˜æ”¶é›†é½äº†æ‰€æœ‰æ¼”ç®—æœºéƒ¨ä»¶ï¼Œé€†è½¬è¨æ‰˜ç»§ç»­é€†è¡Œï¼Œä¸€ç›´åˆ°è¿”å›åˆ°è¶Šå—çš„èœœæœˆæœŸé—´ï¼Œå‡†å¤‡æ‰§è¡Œè‡ªæ€æ¯ç­ä¸–ç•Œè®¡åˆ’ã€‚è‡³æ­¤ï¼Œæ•´ä¸ªè¿½è½¦ç¯èŠ‚åŸºæœ¬å‰–æå®Œæ¯•ã€‚ä»€ä¹ˆï¼Ÿè¿˜æ²¡çœ‹æ‡‚ï¼ï¼Ÿä¸æ…Œï¼æœ€åä»¥å‡¯ç‰¹è§†è§’å†æ¥è¿‡ä¸€éï¼  å‡¯ç‰¹è¢«å®¶æš´åï¼Œè¢«å†›æ¢°ä»“åº“å¤–çš„é€†è½¬è¨æ‰˜æŒŸæŒå¹¶å¸¦ä¸Šè½¦ã€‚  é€†è½¬è¨æ‰˜å¸¦ç€å‡¯ç‰¹å¼€ä¸Šé«˜é€Ÿï¼ŒæœŸé—´åœè½¦ï¼Œè¨æ‰˜ä¸‹è½¦ï¼Œè¿‡äº†ä¸€ä¼šå„¿åä¸Šè½¦ã€‚ã€è¨æ‰˜ä¸‹è½¦å»æŠŠç¿»è½¦çš„é€†è½¬ä¸»è§’çš„è½¦ç»™ç‚¹ç‡ƒäº†ã€‘  é€†è½¬è¨æ‰˜å›æ¥åç»§ç»­é©±è½¦æŒŸæŒå‡¯ç‰¹ï¼Œç›´åˆ°è§åˆ°æ­£å‘ä¸»è§’çš„è½¦ï¼Œè¨æ‰˜æ‘‡ä¸‹è½¦çª—å¼€å§‹æ°æ‰‹æŒ‡å€’è®¡æ—¶å¨èƒï¼›  å€’è®¡æ—¶åˆ°1æ—¶ï¼Œå‰æ–¹ä¸€è¾†ç¿»åˆ°çš„è½¦æ¢å¤äº†æ­£å¸¸ï¼Œå¹¶å¼€å§‹å€’ç€è¡Œé©¶ï¼›  ä¸»è§’å°†ç®±å­ï¼Œé€šè¿‡ä¸­é—´çš„è½¦å­å€ŸåŠ›ï¼Œæ‰”ç»™äº†é€†è½¬è¨æ‰˜ï¼›  é€†è½¬è¨æ‰˜ç•™ä¸‹å‡¯ç‰¹ä¸€äººï¼Œå’Œå¸æœºä¸­é€”æ¢ä¸Šäº†å¦ä¸€è¾†è½¦ï¼›  å‡¯ç‰¹è¢«ç‹¬è‡ªä¸€äººæ†ç»‘åœ¨è½¦å†…ï¼Œç›´åˆ°æ­£å‘ä¸»è§’æ‰‘è¿‡æ¥ç”¨æ‰‹åˆ¹è½¦å°±ä¸‹å¥¹ï¼›  äºŒäººéšåè¢«è¨æ‰˜æ‰‹ä¸‹æ§åˆ¶ï¼Œå¹¶å¸¦åˆ°çº¢è“å®¡é—®å®¤ï¼›  å‡¯ç‰¹è¢«é€†è½¬è¨æ‰˜å¸¦åˆ°è“è‰²å®¡é—®å®¤ï¼›  é€†è½¬è¨æ‰˜å°†è‡ªå·±çš„æ°§æ°”é¢ç½©æ‘˜ä¸‹ï¼Œç»™å‡¯ç‰¹å¸¦ä¸Šå¦ä¸€ä¸ªæ°§æ°”é¢ç½©ã€ä¿è¯å¥¹èƒ½åœ¨è“è‰²çš„é€†è½¬ç©ºæ°”ä¸­å‘¼å¸ã€‘ï¼›  å‡¯ç‰¹è¢«é€†è½¬è¨æ‰˜å¸¦è¿›è“è‰²å®¡é—®å®¤ï¼Œè¢«é€†è½¬è¨æ‰˜å¼€æªå‡»ä¸­è…¹éƒ¨ï¼Œç„¶åè¢«é€†è½¬è¨æ‰˜æ‰‹æªæŒ‡ç€å¤´å¨èƒï¼›  å‡¯ç‰¹ä¸­æªå€’åœ°ã€‚ç¨åï¼Œå¯¹é¢çš„çº¢è‰²å®¡é—®å®¤ä¸­å†²å‡ºå¦ä¸€ä¸ªè¨æ‰˜ï¼ˆæ­£å‘è¨æ‰˜ï¼‰ç»§ç»­å®¡é—®æ­£å‘ä¸»è§’ï¼›  é€†è½¬è¨æ‰˜å€’é€€è¿›å…¥è“è‰²æ—‹è½¬é—¨ï¼›  æ­£å‘è¨æ‰˜çœ‹åˆ°é€†è½¬è¨æ‰˜è¿›å…¥æ—‹è½¬é—¨ï¼Œæ­¤æ—¶æ­£å‘ä¸»è§’æ•‘å…µèµ¶åˆ°ï¼Œæ­£å‘è¨æ‰˜éšå³è¿›å…¥çº¢è‰²æ—‹è½¬é—¨ã€‚æ•´ä¸ªè¿½è½¦æŠ¢å¤ºæˆ˜ï¼Œè¨æ‰˜çš„ç›®æ ‡å°±æ˜¯å¾—åˆ°ä¸»è§’å…ˆå‰æŠ¢å¾—çš„é’š241ï¼ˆæ¼”ç®—æœºéƒ¨ä»¶ï¼‰ï¼Œå¹¶å€ŸåŠ©ä¸Šè¿°æ•´ä¸ªè¿‡ç¨‹ï¼Œåœ¨é€†è½¬åå¾—åˆ°äº†é€†è½¬åçš„æ¼”ç®—æœºéƒ¨ä»¶ã€‚4.2. æœ€ç»ˆå†³æˆ˜è¿™æ˜¯ç”µå½±ã€Šä¿¡æ¡ã€‹ä¸­ä¸¤ä¸ªæœ€éš¾æ‡‚çš„æ—¶é—´é’³å½¢ä½œæˆ˜ä¹‹ä¸€ï¼šã€æœ€ç»ˆå†³æˆ˜ã€‘ç¯èŠ‚çš„è§£æã€‚é¦–å…ˆç»™2ä¸ªç”µå½±æˆªå›¾ï¼Œæä¾›æ—¶é—´é’³å½¢ä½œæˆ˜çš„ä¸€ä¸ªç›´è§‚è®¤è¯†æˆ‘ä»¬å‡è®¾çˆ†ç‚¸å‘ç”Ÿåœ¨10åˆ†é’Ÿæ—¶åˆ»ï¼Œçˆ†ç‚¸å‰10åˆ†é’Ÿä¹Ÿå°±æ˜¯0æ—¶åˆ»ã€‚ç”µå½±çš„è¿™ä¸ªç‰‡æ®µï¼Œæ­£æ˜¯0æ—¶åˆ»ä¹‹åï¼Œçº¢é˜Ÿç€é™†è¿›å…¥æˆ˜åœºå¼€å§‹æ‰“ä»—ï¼Œä»¥åŠè“é˜Ÿå·²ç»å®Œæˆæˆ˜æ–—é€†å‘æ’¤ç¦»çš„è¿‡ç¨‹ã€‚ä»€ä¹ˆï¼Ÿæ²¡ææ‡‚ä¸ºä»€ä¹ˆè“é˜Ÿå·²ç»æ’¤é€€äº†ï¼Ÿå› ä¸ºè“é˜Ÿæ˜¯ä»æœªæ¥é€†è½¬å›æ¥çš„ï¼Œä»–ä»¬çš„æ—¶é—´æµåŠ¨æ—¶åå‘çš„ï¼Œä»–ä»¬ä»çˆ†ç‚¸å‘ç”Ÿæ—¶å¼€å§‹æˆ˜æ–—ï¼Œä¸€ç›´æˆ˜æ–—åˆ°çˆ†ç‚¸å‘ç”Ÿå‰10åˆ†é’Ÿã€‚ä»¥ç©ºé—´ä¸Šçš„é’³å½¢æˆ˜æœ¯ä¸ºä¾‹ï¼Œå³ä»ç›®æ ‡æ‰€åœ¨åæ ‡ä½ç½®çš„æ­£åä¸¤ä¸ªç©ºé—´æ–¹å‘è¿›è¡Œå¤¹å‡»ã€‚ç©ºé—´é’³å½¢æˆ˜æœ¯çš„ç›®çš„åœ¨äºï¼Œè®©ç›®æ ‡åœ¨ç©ºé—´ä¸Šè¢«é”æ­»ã€‚è€Œæ—¶é—´é’³å½¢æˆ˜æœ¯è¿™æ˜¯é’ˆå¯¹å›ºå®šæ—¶é—´æ®µçš„æˆ˜æ–—ï¼Œä»æ­£åä¸¤ä¸ªæ—¶é—´æ–¹å‘è¿›è¡Œæ”»å‡»ã€‚æ—¶é—´é’³å½¢æˆ˜æœ¯çš„ç›®çš„åœ¨äºï¼Œè®©ç›®æ ‡åœ¨è¿™ä¸ªæ—¶é—´æ®µä¸Šå‘ˆç°å‡ºçš„æ‰€æœ‰æˆ˜æœ¯åŠ¨ä½œéƒ½è¢«æå‰æŒæ¡ã€‚è¿™ä¸ªåœ¨åé¢ä¼šæ ¹æ®å›¾è§£è¯¦ç»†åˆ†æã€‚ä»¥å½±ç‰‡ä¸­æœ€åçš„åˆ†ç»„çªå‡»ä¸ºä¾‹ã€‚ä¸»è§’æ‰€åœ¨çš„çº¢è‰²å†›é˜Ÿä»¥10åˆ†é’Ÿä¸ºè·¨åº¦è¿›è¡Œæ­£å‘æ”»å‡»ï¼Œå°¼å°”æ‰€åœ¨çš„è“è‰²å†›é˜Ÿä»¥10åˆ†é’Ÿä¸ºè·¨åº¦è¿›è¡Œé€†å‘æ”»å‡»ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œè“è‰²å†›é˜Ÿæ¯”çº¢è‰²å†›é˜Ÿæ™šå‡ºå‘10åˆ†é’Ÿï¼Œä½†çº¢è‰²å†›é˜Ÿæœç€æ—¶é—´çš„æ­£å‘ç§»åŠ¨ï¼Œè“è‰²å†›é˜Ÿæœç€æ—¶é—´çš„é€†å‘ç§»åŠ¨ã€‚åœ¨æœ€ç»ˆå†³æˆ˜ä¸­ï¼Œå„æ–¹çš„ç›®çš„å¦‚ä¸‹ï¼š  é€†è½¬è¨æ‰˜ï¼šé˜»æ­¢ä¸»è§’æ‹¿åˆ°æ¼”ç®—æœºï¼Œåœ¨æ‰‹ä¸‹æ”¾ä¸‹æ¼”ç®—æœºå¼•çˆ†ç‚¸å¼¹çš„åŒä¸€æ—¶é—´æœæ¯’ï¼Œæ¯ç­ä¸–ç•Œï¼›          é€†è½¬è¨æ‰˜æ­»äº¡ä¼šå¯¼è‡´ï¼š1ã€å¼•çˆ†ç‚¸å¼¹ï¼Œæ©åŸ‹æ¼”ç®—æœºï¼›2ã€ç»™æœªæ¥äººå‘é‚®ä»¶ï¼Œå‘ŠçŸ¥è‡ªå·±æ­»äº¡çš„æ—¶é—´ï¼Œå³æ¼”ç®—æœºä½•æ—¶åŸ‹åœ¨è¿™é‡Œï¼Œå¾…æœªæ¥äººæŒ–å‡ºä½¿ç”¨æ¯ç­ä¸–ç•Œï¼›        ç”·ä¸»è§’ï¼šç”·ä¸»è¦å‡è£…é˜»æ­¢çˆ†ç‚¸å¤±è´¥ï¼Œä½†æ˜¯è¶æœºæŠ¢å¤ºæ¼”ç®—æœºï¼›  å¥³ä¸»è§’ï¼šè¦åœ¨ç”·ä¸»æŠ¢åˆ°æ¼”ç®—æœºåï¼Œçˆ†ç‚¸å‘ç”Ÿå‰ï¼Œåœ¨è¶Šå—æ€æ­»é€†è½¬è¨æ‰˜ï¼›          è¿™æ ·ï¼Œè¨æ‰˜æ­»äº¡åçˆ†ç‚¸å‘ç”Ÿï¼Œä½†æ¼”ç®—æœºå·²ç»è¢«æŠ¢èµ°ï¼Œä¸å†è¢«æ©åŸ‹ï¼Œæœªæ¥äººæ— æ³•åœ¨æœªæ¥æŒ–åˆ°ï¼Œæ¯ç­ä¸–ç•Œå¤±è´¥ã€‚      ä¸‹é¢è¿›è¡Œè¯¦ç»†çš„è§£é‡Šï¼š      çº¢è“ä¸¤é˜Ÿå¤§å¼ æ——é¼“çš„ä½œæˆ˜å¹¶ä¸æ˜¯ä¸ºäº†é˜»æ­¢çˆ†ç‚¸ï¼Œè€Œæ˜¯å£°ä¸œå‡»è¥¿ï¼Œè®©ç”·ä¸»è§’å’Œå¤§èƒ¡å­é˜Ÿé•¿è¿›å…¥æ´ç©´ï¼ŒæŠŠè¨æ‰˜æ‰‹ä¸‹è¦åŸ‹ä¸‹å»çš„æ¼”ç®—æœºæ‹¿åˆ°æ‰‹ã€‚è¿™é‡Œå‚è€ƒæ¥æºNixesï¼š                  ä¸ºä»€ä¹ˆè¨æ‰˜è¦åˆ°è¿™ä¸ªåœ°æ–¹ã€è¿™ä¸ªæ—¶é—´ç‚¹æ”¾ä¸‹æ¼”ç®—æœºï¼Ÿå› ä¸ºçˆ†ç‚¸æ˜¯ä¸ºäº†å°å­˜è¿™ä¸ªæ¼”ç®—æœºï¼Œç±»ä¼¼ä¹‹å‰çš„æ—¶é—´èƒ¶å›Šã€‚è¨æ‰˜æ­»åè§¦å‘ç‚¸å¼¹10såçˆ†ç‚¸ï¼ŒåŒæ—¶ä¼šå‘é€ä¸€å°é‚®ä»¶å‘Šè¯‰æœªæ¥äººï¼Œè‡ªå·±çš„æ­»äº¡æ—¶é—´ï¼Œå‘Šè¯‰æ¼”ç®—æœºä½•æ—¶åŸ‹åœ¨è¿™é‡Œï¼Œåœ¨æœªæ¥å¯ä»¥å–å‡ºå¹¶ä½¿ç”¨ï¼Œä»è€Œæ¯ç­ä¸–ç•Œã€‚ã€æ³¨æ„ï¼Œè¿™é‡Œç»™å‡ºçš„æ˜¯æœ€ç»ˆç¬¦åˆé€»è¾‘çš„è§£ç­”ï¼Œè¯¦ç»†åˆ†æè¿‡ç¨‹å·²ç»è¶…çº²äº†ï¼Œè¯·å‚è€ƒNixesï¼Œç®€è¦åˆ—å†™å¦‚ä¸‹ã€‘                  ç»“åˆä¹‹å‰æåˆ°çš„æ—¶é—´èƒ¶å›Šï¼Œå¯ä»¥æ¨æ–­å‡ºæ¥è¿™ä¸ªåœ°æ–¹å°±æ˜¯ä¸ºäº†æ”¾æ—¶é—´èƒ¶å›Šã€‚ã€çˆ†ç‚¸åªæ˜¯ä¸ºäº†æ›´å¥½åœ°å°å­˜æ—¶é—´èƒ¶å›Šã€‘ã€‚è€Œç”µå½±åœ¨ä½œæˆ˜ä¼šè®®çš„æ—¶å€™åªæåˆ°äº†ï¼‚è¨æ‰˜çš„ç¦»ä¸–ä¼šå‘é€å‡ºä¸€å°é‚®ä»¶ï¼‚ã€‚é‚£ä¹ˆè¿™ä¸ªé‚®ä»¶å°±æœ‰ä¸¤ç§å¯èƒ½ã€‚ä¸€ï¼Œç›´æ¥å¯åŠ¨ç®—æ³•ï¼›äºŒï¼Œå‘Šè¯‰æœªæ¥äººä»–åŸ‹ä¸‹ç®—æ³•çš„æ—¶é—´ç‚¹ã€‚ç»“åˆæœ€åå¥³ä¸»çš„ç•™è¨€è®©ä¸»è§’æˆåŠŸé²¨æ‰äº†å°åº¦å¥³ï¼Œè¿˜æœ‰ä¸Šæ–‡æåˆ°çš„æ—¶é—´èƒ¶å›Šï¼Œæˆ‘åå‘äºè¿™åªæ˜¯å‘Šè¯‰æœªæ¥äººæ—¶é—´çš„é‚®ä»¶ã€‚å› ä¸ºå¦‚æœé‚®ä»¶å°±å¯ä»¥ç›´æ¥å¯åŠ¨ç®—æ³•ï¼Œé‚£ä¹ˆè¨æ‰˜å®Œå…¨å¯ä»¥æŠŠç®—æ³•æ”¾åˆ°ä»»ä½•åœ°æ–¹ï¼Œå°±ç®—è¦èŠ±ä¸€æ®µæ—¶é—´æ‰èƒ½æ¯ç­ä¸–ç•Œï¼Œé‚£ä¸»è§’ä¹Ÿä¸å¯èƒ½å»é˜»æ­¢çš„ã€‚æ‰€ä»¥å¯ä»¥è‚¯å®šã€ç®—æ³•çš„å¯åŠ¨éœ€è¦æœªæ¥äººçš„å¸®åŠ©ã€‘ã€‚é‚£æœªæ¥äººåˆæ€ä¹ˆæ‰èƒ½å¸®åˆ°ä»–å‘¢ï¼Ÿä¹Ÿåªèƒ½é€†æ—¶å›åˆ°å¼€æˆ˜å‰ï¼Œç„¶ååœ¨åœ°ä¸‹æ”¾ä¸€ä¸ªæ¿€æ´»è£…ç½®ã€‚æˆ–è€…åœ¨æœªæ¥æ‹¿å‡ºæ¥æ”¹è£…å®Œåˆé€†æ—¶é€å›å»ï¼Œç„¶åæ”¹è£…å¥½çš„ç®—æ³•æ”¶åˆ°è¨æ‰˜çš„é‚®ä»¶æ‰èƒ½å¯åŠ¨ã€‚ä½†æ˜¯è¿™æ ·å°±æœ‰bugäº†ï¼Œæ¿€æ´»è£…ç½®ä¹Ÿå¥½ï¼Œé€†æ—¶é€å›æ¥ä¹Ÿç½¢ï¼Œå¦‚æœæ˜¯è¿™äº›æ“ä½œçš„è¯ï¼Œå¥³ä¸»å®Œå…¨æ²¡æœ‰å¿…è¦ç•™è¨æ‰˜ä¸€å‘½ã€‚å¦‚æœæ˜¯æ”¾æ¿€æ´»è£…ç½®åˆ°åœ°åº•ï¼Œå…ˆä¸è¯´ä¸ºä»€ä¹ˆä¸ææ—©å‡ å¹´æŠŠè£…ç½®é€ç»™è¨æ‰˜ï¼Œåªè¦è¨æ‰˜ä¸€æŒ‚ï¼Œé‚£ä¹ˆä¸ªè£…ç½®å°±ä¸€å®šåœ¨åœ°åº•äº†ï¼Œä¹‹åä»€ä¹ˆæ—¶å€™æ‰”ç®—æ³•è¿›å»éƒ½ä¸€æ ·ã€‚å¦‚æœæ˜¯è¦å…ˆè®©æœªæ¥äººæ”¹è£…å¥½çš„ï¼Œé‚£åœ¨é€ç»™ä»–ä»¬æ”¹è£…å‰å…ˆå¹²æ‰è¨æ‰˜ä¸æ˜¯æ›´å¥½ï¼Ÿï¼ˆå°±ç®—æ”¹è£…å¥½äº†ä¹Ÿä¸èƒ½æ¿€æ´»ï¼‰å†ç»“åˆä¸Šæ–‡æåˆ°çš„ï¼‚æ›´å¥½å°å­˜æ—¶é—´èƒ¶å›Šï¼‚ï¼Œæˆ‘æ¨æµ‹ã€ç®—æ³•æ˜¯å•å‘ç»™æœªæ¥äººçš„ã€‘ã€‚â€â€ç»¼ä¸Šæ‰€è¿°å¯ä»¥å¾—å‡ºç»“è®ºï¼Œã€ç®—æ³•ï¼‚æ¯ç­ä¸–ç•Œï¼‚çš„æ—¶é—´ç‚¹ä¸åœ¨å½“ä¸‹ï¼Œè€Œåœ¨æœªæ¥ã€‘                            ä¸ºä»€ä¹ˆä¸»è§’ä¸èƒ½è®©è¨æ‰˜åœ¨è‡ªå·±æŠ¢åˆ°æ¼”ç®—æœºä¹‹å‰æŒ‚æ‰ï¼Ÿå› ä¸ºè¨æ‰˜æŒ‚äº†ï¼Œå°±ä¼šå¼•çˆ†ç‚¸å¼¹ï¼ŒåŒæ—¶ç»™æœªæ¥äººå‘é€ä¸€å°é‚®ä»¶ã€‚è€Œå¦‚æœä¸»è§’è¿˜æ²¡æŠ¢åˆ°æ¼”ç®—æœºï¼Œé‚£ä¹ˆæ¼”ç®—æœºå°±ä¾ç„¶ä¼šè¢«åŸ‹åœ¨åœ°åº•ã€‚                  çº¢è“ä¸¤é˜Ÿå¯ä»¥å€ŸåŠ©æ—¶é—´é’³å½¢ä½œæˆ˜ï¼Œäº’ç›¸å…±äº«æœªæ¥çš„æˆ˜æ–—ä¿¡æ¯ï¼ŒçŸ¥å·±çŸ¥å½¼ã€‚          ç”µå½±ä¸­ï¼Œçº¢è‰²å†›é˜Ÿå‡ºå‘å‰ï¼ŒæŒ‡æŒ¥å®˜åœ¨è®²æˆ˜æœ¯æ—¶ç‰¹åˆ«æåˆ°ï¼Œå½“å‰çš„ä½œæˆ˜æ–¹æ¡ˆæ˜¯æˆ˜å‹åŒå¿—ä»¬æµ´è¡€æ¢æ¥æ¥çš„å®è´µç»éªŒã€‚      ä¸»è§’æ‰€åœ¨çš„çº¢è‰²å†›é˜Ÿä»¥10åˆ†é’Ÿä¸ºè·¨åº¦è¿›è¡Œæ­£å‘æ”»å‡»ï¼Œå°¼å°”æ‰€åœ¨çš„è“è‰²å†›é˜Ÿä»¥10åˆ†é’Ÿä¸ºè·¨åº¦è¿›è¡Œé€†å‘æ”»å‡»ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œè“è‰²å†›é˜Ÿæ¯”çº¢è‰²å†›é˜Ÿæ™šå‡ºå‘10åˆ†é’Ÿï¼Œä½†çº¢è‰²å†›é˜Ÿæœç€æ—¶é—´çš„æ­£å‘ç§»åŠ¨ï¼Œè“è‰²å†›é˜Ÿæœç€æ—¶é—´çš„é€†å‘ç§»åŠ¨ã€‚      å½“è“è‰²å†›é˜Ÿé€†è¡Œ10åˆ†é’Ÿï¼Œä¸”ç›®ç¹äº†æ•´åœºæˆ˜æ–—è¿‡ç¨‹æ—¶ï¼Œä»–ä»¬å°±å¯ä»¥å°†ä¿¡æ¯æƒ…æŠ¥å‘ŠçŸ¥æ­£åœ¨10åˆ†é’Ÿå‰ç‚¹æ•´è£…å¾…å‘çš„çº¢è‰²å†›é˜Ÿã€‚åä¹‹ï¼Œè®©çº¢è‰²å†›é˜Ÿä»æ­£å‘å‰è¿›10åˆ†é’Ÿåï¼Œä»–ä»¬åŒæ ·å¯ä»¥å°†è‡ªå·±çœ‹åˆ°çš„æƒ…æŠ¥å‘ŠçŸ¥æ­£åœ¨10åˆ†é’Ÿåæ•´è£…å¾…å‘çš„è“è‰²å†›é˜Ÿã€‚      è¿™é‡Œéœ€è¦å†è¡¥å……ä¸€å¼ å›¾ç‰‡è¾…åŠ©ç†è§£ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæ•Œæ–¹ä¹Ÿå­˜åœ¨çº¢è“ä¸€æ­£ä¸€é€†ä¸¤éƒ¨åˆ†æˆ˜é˜Ÿï¼Œéœ€è¦ä»ä¸¤ä¸ªæ–¹å‘è¿›è¡Œä½œæˆ˜ã€‚å³è“è‰²é€†è½¬æˆ˜é˜Ÿé¢å¯¹é€†è½¬çš„æ•Œæ–¹é˜Ÿä¼ï¼Œçº¢è‰²æ­£å‘æˆ˜é˜Ÿé¢å¯¹æ•Œæ–¹æ­£å¸¸é˜Ÿä¼ã€‚å‚è€ƒè¿™å¼ å›¾ï¼Œå¼€å§‹åˆ†æç”µå½±ä¸­çš„æœ€ç»ˆä½œæˆ˜æƒ…èŠ‚ï¼Œå…¶ä¸­ä¸€çº§åˆ—è¡¨ä»ä¸Šå¾€ä¸‹ä¸ºæ­£å‘æ—¶é—´ï¼ŒäºŒçº§åˆ—è¡¨ä»ä¸‹å¾€ä¸Šä¸ºé€†è½¬æ—¶é—´ã€‚äºŒçº§åˆ—è¡¨æ‰€è¿°äº‹ä»¶çš„å‘ç”Ÿæ—¶é—´å’Œä¸€çº§åˆ—è¡¨çš„æ­£å‘äº‹ä»¶å‘ç”Ÿæ—¶é—´ç›¸åŒã€‚  èµ·ç‚¹ï¼Œç»Ÿä¸€æŒ‰ç…§å€’æ•°è®¡æ—¶ï¼Œæ­£æ—¶é—´ä»10minåˆ°0minçš„å€’æ•°è®¡æ—¶ã€‚  æ­£æ—¶é—´1å¤©å‰ï¼ˆéšä¾¿çŒœçš„ï¼Œåªè¦æ—¶é—´è¶³å¤Ÿå‡¯ç‰¹æŠµè¾¾è¶Šå—å³å¯ï¼‰          é€†è½¬å‡¯ç‰¹è¿”å›æ­£å‘ï¼Œä»æ¬§æ´²é£å¾€è¶Šå—ï¼›        æ­£æ—¶é—´1å°æ—¶å‰ï¼ˆéšä¾¿çŒœçš„ï¼Œåªè¦æ—¶é—´è¶³å¤Ÿå‡†å¤‡å³å¯ï¼‰          é€†è½¬ä¸»è§’å’Œå°¼å°”è½¬å›æ­£å‘ï¼Œå’Œä¸€å †é˜Ÿå‹å‡†å¤‡ä½œæˆ˜ã€‚        æ­£æ—¶é—´10minï¼Œçº¢é˜Ÿå¼€å§‹ä½œæˆ˜ï¼Œä¸»è§’éšè¡Œã€‚          è“é˜Ÿç­‰å¾…ï¼Œå°¼å°”éšè¡Œã€‚      é€†è½¬è“é˜Ÿæ’¤ç¦»å®Œæ¯•ï¼Œé€†è½¬å°¼å°”2å·²æ­»äº¡ï¼›        æ­£æ—¶é—´5minï¼Œçº¢é˜Ÿæ­£åœ¨ä½œæˆ˜ï¼Œé€†è½¬è“é˜Ÿæ­£åœ¨ä½œæˆ˜ã€‚ä¸€èµ·ç‚¸æ¥¼ï¼›          é€†è½¬å°¼å°”å‘ç°è¨æ‰˜æ‰‹ä¸‹å®‰è£…éš§é“å£ç‚¸è¯ï¼Œäºæ˜¯è„±ç¦»é€†è½¬è“é˜Ÿï¼Œè½¬ä¸ºæ­£å‘è¯•å›¾é˜»æ­¢ä¸»è§’è¿›å…¥éš§é“ï¼›        ä¸»è§’å’Œå¤§èƒ¡å­é˜Ÿé•¿è¿›å…¥éš§é“ï¼Œè§¦å‘ç‚¸å¼¹å¼•ä¿¡ï¼Œé€€è·¯è¢«å°æ­»ï¼›          å°¼å°”å¼€è½¦è¿½èµ¶é˜»æ­¢æœªé‚ï¼Œè½¬è€Œå¼€è½¦å‰å¾€æ´ç©´ä¸Šæ–¹ï¼›        ä¸»è§’æ¥åˆ°å°½å¤´ï¼Œé—¨è¢«é”ï¼Œåœ°ä¸Šå®ä½“å¸¦ç€åŠå ã€‚è¨æ‰˜æ‰‹ä¸‹åœ¨é—¨å¯¹é—¨åŸ‹æ¼”ç®—æœºï¼Œä¸»è§’å’Œé€†è½¬è¨æ‰˜é€šè¯ï¼›          é€†è½¬å°¼å°”2è¿›å…¥æ´ç©´ï¼Œå¸®ä¸»è§’å¼€é—¨ï¼ŒæŒ¡æªæ­»äº¡ï¼ˆæ­£æ—¶é—´é¡ºåºæ˜¯ä¸»è§’çœ‹åˆ°å°¸ä½“å°¼å°”æŒ¡æªï¼Œæ´»è¿‡æ¥å¼€é—¨ï¼Œå€’é€€ç¦»å¼€æ´ç©´ï¼‰ï¼›        ä¸»è§’å†²è¿‡å»ææ–—ï¼Œæœ€ç»ˆå°†è¨æ‰˜æ‰‹ä¸‹æ¨ä¸‹æ´ç©´ï¼Œå¤ºå¾—æ¼”ç®—æœºï¼›          é€†è½¬å‡¯ç‰¹åœ¨è¶Šå—æ¸¸è‰‡æ€æ­»é€†è½¬è¨æ‰˜ï¼Œç‚¸å¼¹å€’è®¡æ—¶å¯åŠ¨ï¼›      å°¼å°”ä»æ´ç©´ä¸Šæ–¹æ‰”ä¸‹ç»³ç´¢ï¼›        ä¸»è§’å’Œå¤§èƒ¡å­é˜Ÿé•¿å¾—åˆ°æ¼”ç®—æœºï¼Œå€’è®¡æ—¶é©¬ä¸Šå½’é›¶è¦çˆ†ç‚¸ï¼Œä»å¤©è€Œé™ç»³ç´¢ï¼ŒäºŒäººå¼€å§‹æ†ç»‘ï¼›          å°¼å°”åœ¨æ—¶é—´å½’é›¶å‰ï¼Œåªå¾—å¼€è½¦æ‹‰åŠ¨ç»³ç´¢ï¼›        æ­£æ—¶é—´0minï¼Œçˆ†ç‚¸ï¼Œä¸»è§’å’Œå¤§èƒ¡å­é˜Ÿé•¿æˆåŠŸè¢«æ‹‰é€ƒç¦»ï¼›          è“é˜Ÿç­‰å¾…å®Œæ¯•ï¼Œå¼€å§‹é€†è½¬ï¼Œå‡†å¤‡ä½œæˆ˜ã€‚        æ­£æ—¶é—´ç»§ç»­å¾€åï¼Œä¸»è§’ï¼Œæ­£å°¼å°”ï¼Œå¤§èƒ¡å­é˜Ÿé•¿ä¸‰æ–¹è°ˆè¯ï¼Œæ‹†åˆ†æ¼”ç®—æœºã€‚          ä¸»è§’æ„è¯†åˆ°å°¼å°”å°†è¦é€†è½¬å¸®è‡ªå·±æŒ¡æªï¼Œçº¢çœ¼å‘Šåˆ«ï¼›      å°¼å°”å‘Šè¯‰ä¸»è§’è‡ªå·±æ—¶æœªæ¥çš„ä¸»è§’æ‹›å‹Ÿçš„ï¼›        å°¼å°”å†æ¬¡é€†è½¬ï¼Œç§°ä¸ºé€†è½¬å°¼å°”2ï¼Œè¿”å›å¸®ä¸»è§’å¼€é”ï¼Œç„¶åæŒ¡æªèµ´æ­»ï¼›æœ€åï¼Œä¸Šä¸€å¼ æœ€å®Œæ•´çš„ç¤ºæ„å›¾ï¼Œå±•ç¤ºæ•´ä¸ªç”µå½±çš„è„‰ç»œã€‚5. å…¶å®ƒ5.1. ç”µå½±æœ¬èº«çš„æ¢è®¨è§£æè§†é¢‘ã€å¤§èªçœ‹ç”µå½±ã€‘çš„ååŠéƒ¨åˆ†å·²ç»è¯´çš„å¾ˆå¤šäº†ï¼Œæˆ‘åŸºæœ¬æ˜¯èµåŒçš„ï¼Œä¸å†èµ˜è¿°ã€‚5.2. Q/Aä¸‹é¢æ˜¯ååˆ†ä¸ä¸¥è°¨çš„é—®ç­”ç¯èŠ‚ï¼Œä»¥ä¸‹è§‚ç‚¹ä»…ä»£è¡¨ä¸ªäººæƒ³æ³•ã€‚éœ€è¦æŒ‡å‡ºçš„æ˜¯ï¼Œä¸‹é¢ç»å¤§éƒ¨åˆ†å†…å®¹å¾—åˆ°äº†è§£æè§†é¢‘ã€å¤§èªçœ‹ç”µå½±ã€‘çš„å¯å‘å’Œå‚è€ƒã€‚Qï¼šæ—¢ç„¶åæ´¾è¨æ‰˜æ³¨å®šä¼šå¤±è´¥å¹¶ä½œä¸ºå†å²äº‹å®ï¼Œä¸ºä»€ä¹ˆæœªæ¥çš„äººç±»è¿˜è¦åŸ‹è—æ—¶å…‰èƒ¶å›Šï¼Œæ‰§è¡Œæ•´ä¸ªç”µå½±çš„æ•…äº‹å‘¢ï¼ŸAï¼šå› ä¸ºä¸€éƒ¨åˆ†æœªæ¥äººç±»ä¸ç›¸ä¿¡ç¥–çˆ¶æ‚–è®ºï¼Œç›¸ä¿¡å¹³è¡Œå®‡å®™ç†è®ºã€‚å› æ­¤ä»ç„¶è¿›è¡Œäº†è¿™äº›å°è¯•ã€‚æ¯”å¦‚ï¼Œå¦‚æœç°åœ¨æœ‰æŠ€æœ¯è®©äººä»¬ç©¿è¶Šåˆ°ç¬¬ä¸€æ¬¡é¸¦ç‰‡æˆ˜äº‰å‰å¤•ï¼Œå¯ä»¥å’Œ1840å¹´çš„äººè”ç³»ï¼Œé‚£ä¹ˆè‡ªç„¶ä¼šæœ‰ä¸€éƒ¨åˆ†äººè¯•å›¾é€šè¿‡è¿™ä¸ªæŠ€æœ¯æŒ‡å¯¼è¿‡å»çš„äººå¦‚ä½•é˜»æ­¢æˆ˜äº‰çˆ†å‘ã€‚å½“ç„¶ä½œä¸ºæˆ‘ä»¬ä¸–ç•Œçš„å†å²ï¼Œæœ€åçš„ç»“è®ºå°±æ˜¯ï¼Œæˆ˜äº‰ä»ç„¶çˆ†å‘äº†ã€‚Qï¼šé€†è½¬é—¨æ˜¯æœªæ¥äººé€å›åˆ°è¿‡å»çš„ï¼Œè¿˜æ˜¯ç°ä»£äººæ ¹æ®æœªæ¥äººçš„æŒ‡å¼•æ‰“é€ çš„ï¼ŸAï¼šé€†è½¬é—¨çš„åˆ¶é€ æ˜¯ä¸€ä¸ªç¥–çˆ¶æ‚–è®ºï¼Œå› æ­¤æ— è§£ã€‚ç±»ä¼¼äºæŸäººåˆ¶é€ å‡ºäº†æ—¶å…‰æœºï¼Œä½†æ—¶å…‰æœºçš„å›¾çº¸æ˜¯æœªæ¥äººå€ŸåŠ©æ—¶å…‰æœºå›åˆ°è¿‡å»ç»™ä»–çš„ï¼Œé‚£ä¹ˆåˆ°åº•æ˜¯æœªæ¥äººåæ¥æ‰ç ”åˆ¶å‡ºæ—¶å…‰æœºå¹¶ä¸”é€å›å›¾çº¸ï¼Œè¿˜æ˜¯ç°ä»£äººå…ˆç ”åˆ¶å‡ºæ¥ç„¶åæœªæ¥äººæ‰æ‹¥æœ‰æ—¶å…‰æœºæŠ€æœ¯å‘¢ï¼ŸQï¼šé€†è½¬å›å»çš„è¯ï¼Œå¿…é¡»æ‰€ä»¥åŠ¨ä½œéƒ½è¦åç€åšï¼ŸAï¼šä¸ç”¨åˆ»æ„åç€è¡ŒåŠ¨ã€‚ç”µå½±ä¸­ï¼Œå½“ä¸€ä¸ªäººé€†è½¬ä¹‹åï¼Œä»è‡ªèº«çš„è§†è§’æ¥çœ‹ï¼Œè‡ªå·±ä»ç„¶æ˜¯æŒ‰ç…§æ­£å¸¸çš„è¿åŠ¨æ¨¡å¼å»è¿åŠ¨çš„ï¼Œæ­£å¸¸èµ°è·¯ï¼Œè·‘æ­¥ï¼Œå¼€è½¦ã€‚åªä¸è¿‡ï¼Œä»ä¸–ç•Œä¸Šå…¶ä»–è§‚å¯Ÿè€…çš„è§†è§’æ¥çœ‹ï¼Œä½ çš„æ‰€æœ‰åŠ¨ä½œéƒ½æ˜¯åçš„ã€‚æ¯”å¦‚é€†è½¬çš„ä½ åœ¨å¯†å°çš„é€†è½¬ç¯å¢ƒä¸­å–æ°´ï¼Œæ­£å¸¸çš„æ­£å‘ä¸–ç•Œçš„äººçœ‹æ¥ï¼Œä½ å°±åœ¨åæ°´ã€‚Qï¼šé€†è½¬å›å»çš„äººï¼Œä¸ºä»€ä¹ˆè·‘æ­¥æ—¶å€™é£ä¼šä»åé¢å¹åˆ°èƒŒä¸Šï¼ŸAï¼šå› ä¸ºè¿™é‡Œçš„é£æ˜¯æ­£å‘ä¸–ç•Œçš„ç©ºæ°”ã€‚é€†è½¬çš„äººåœ¨æ­£å‘ä¸–ç•Œä¸­è¿åŠ¨ï¼Œå®é™…è®©æ˜¯å€’ç€çš„ï¼Œä»æ­£å‘ä¸–ç•Œï¼ˆæ—¶é—´ï¼‰çš„è§’åº¦çœ‹ï¼Œå€’ç€è·‘çš„äººï¼Œé£å½“ç„¶æ˜¯å¹åˆ°è¿™ä¸ªäººçš„èƒŒåäº†ã€‚è½¬åˆ°é€†è½¬äººçš„è§†è§’ï¼Œè™½ç„¶è‡ªå·±åœ¨æ­£ç€è·‘ï¼Œä½†æ˜¯äººä½“çš„æ„Ÿè§‰è¿˜æ˜¯éµå¾ªæ­£å‘ä¸–ç•Œçš„é£çš„åé¦ˆï¼Œå› æ­¤èƒŒåæ„Ÿå—åˆ°é£ã€‚Qï¼šé€†è½¬å›å»çš„äººï¼Œèƒ½ä¸€ç›´é€†è½¬ä¸‹å»ä¹ˆï¼Ÿèƒ½é€†è½¬å¤šä¹…ï¼ŸAï¼šå› ä¸ºç©¿è¶Šè€…å¿…é¡»äº²è‡ªå¾€è¿‡å»é€†è¡Œï¼Œå…¶æ‰€ç»å†çš„äº‹ä»¶ï¼Œä¹Ÿå¿…é¡»æ˜¯å®å®åœ¨åœ¨å­˜åœ¨äºæ­¤æ—¶é—´è½´ä¸Šçš„ï¼Œåªæ˜¯æ—¶é—´æ¼”å˜æ–¹å‘ç›¸åã€‚è¿™å°±ä»£è¡¨ç€ï¼Œè¿™ä½ç©¿è¶Šè€…èƒ½å¤Ÿç©¿è¶Šåˆ°çš„æœ€å¤§èŒƒå›´ï¼Œå°±æ˜¯è‡ªå·±å®é™…ç”Ÿå‘½é•¿åº¦çš„æé™ã€‚åœ¨è¯ºå¼ç©¿è¶Šä¸­ï¼Œå› ä¸ºç©¿è¶Šè€…èƒ½å¤Ÿé€†è¡Œè¡Œé©¶çš„æ—¶é—´è·¨åº¦æœ‰é™ï¼Œæ•…éœ€è¦é€šè¿‡æ—¶é—´èƒ¶å›Šçš„æ–¹å¼æ¥å¯¹äºä¸€ä¸ªæ¥è‡ªæœªæ¥çš„ä¿¡æ¯è¿›è¡Œâ€œæ¥åŠ›æ£’â€å¼çš„ä¼ é€’ã€‚è¿™ä¹Ÿæ˜¯å‰§ä¸­å¸Œæœ›æ¯ç­ä¸–ç•Œçš„æœªæ¥äººå‘å½“ä¸‹ä¸–ç•Œä¼ é€’ä¿¡æ¯çš„ä¸»è¦æ–¹å¼ã€‚Qï¼šé€†è½¬å›å»çš„äººèƒ½æ”¹å˜è¿‡å»ä¹ˆï¼ŸAï¼šè¿™ä¸ªå¾ˆå¥½ç†è§£ï¼Œå®Œå…¨æ²¿ç€æ—¶é—´è½´é€†è¡Œï¼Œè¿™å°±æ„å‘³ç€å†å²æœªæ›¾è¢«æ”¹å˜ï¼ˆæˆ–è€…è¯´ï¼Œå“ªæ€•æ˜¯ä¸€äº›å¾®å°çš„æ”¹å˜ä¹Ÿæ²¡æœ‰å¼•èµ·å·¨å¤§çš„å˜åŒ–ï¼Œå› ä¸ºä»»ä½•å°æ”¹å˜éƒ½å·²ç»æ˜¯å†å²äº†ï¼Œè€Œå†å²ä¸Šå‘ç”Ÿçš„å·²ç»å‘ç”Ÿï¼‰ã€‚æ ¹æ®ã€Šå‘½è¿çŸ³ä¹‹é—¨ã€‹ä¸­æ‰€æåˆ°çš„ä¸–ç•Œçº¿æ”¶æŸçš„æ¦‚å¿µï¼Œæˆ‘ä»¬å¯ä»¥æƒ³è±¡åˆ°ï¼Œåœ¨è¯ºå¼æ—‹è½¬é—¨ç©¿æ¢­çš„å‰æä¸‹ï¼Œå³ä¾¿å›åˆ°äº†è¿‡å»ï¼Œä¹Ÿä¸è¿‡æ˜¯åœ¨å€’æ”¾æ¼”å˜å†å²ï¼Œä¸€ç›´æ²¡æœ‰è·³å‡ºæ”¶æŸçš„ä¸–ç•Œçº¿ã€‚é™¤éä½ å¯¹å†å²è¿›è¡Œäº†ä¸å¯ä¿®è¡¥çš„ç ´åï¼Œè·³å‡ºäº†åŸæœ¬æ”¶æŸçš„ä¸–ç•Œçº¿èŒƒå›´ï¼Œè¿›å…¥æ”¶æŸåˆ°å¦ä¸€ä¸ªç»“å±€çš„ä¸–ç•Œçº¿èŒƒå›´ï¼Œå¦åˆ™æ— è®ºä½ å¦‚ä½•ç©¿è¶Šï¼Œå†å²çš„è¶‹å‘éƒ½ä¸å¯èƒ½æ”¹å˜ã€‚è¿™ç‚¹å¾ˆåƒçŸ³å¤´é—¨ä¸­å‡¶çœŸä¸æ–­ç©¿è¶Šå´ä¸æ–­ç›®ç¹éº»ç”±é‡Œæ­»äº¡çš„å‰§æƒ…ï¼Œæœ€åå‡¶çœŸé€šè¿‡åœ¨å…³é”®æ—¶é—´èŠ‚ç‚¹æ–½ä»¥ç ´åçš„æ–¹å¼ï¼Œæ‰å°†ä¸–ç•Œçº¿åå·®ç‡æé«˜åˆ°äº†1%ä»¥ä¸Šï¼Œå®ç°äº†ä»Î±ä¸–ç•Œçš„é€ƒç¦»ã€‚5.3. è¯ºå…°çš„ç”µå½±è¯ºå…°çš„ç§‘å¹»ç”µå½±ä¸€è´¯ä»¥ç¡¬æ ¸å’Œçƒ§è„‘é—»åï¼š2000.ã€Šè®°å¿†ç¢ç‰‡ã€‹ä¸æŒ‰ç…§æ”»ç•¥çœ‹æ ¹æœ¬çœ‹ä¸æ‡‚ï¼ˆæ„è¯†ï¼Œç°å®ï¼‰ï¼Œè·å¾—å¥¥æ–¯å¡æå2010.ã€Šç›—æ¢¦ç©ºé—´ã€‹ç»å…¸å½“ä»£ç§‘å¹»ï¼ˆå“²å­¦ï¼Œæ„è¯†ï¼Œæ¢¦å¢ƒï¼Œç°å®ï¼‰2015.ã€Šæ˜Ÿé™…ç©¿è¶Šã€‹ç»å…¸å®‡å®™ç§‘å¹»ï¼ˆç©ºé—´ï¼‰2020.ã€Šä¿¡æ¡ã€‹ç»å…¸æ—¶ç©ºç§‘å¹»ï¼ˆæ—¶é—´ï¼Œç©ºé—´ï¼‰å…¶å®ƒçš„è¿˜æœ‰2006.ã€Šè‡´å‘½é­”æœ¯ã€‹ã€2008.ã€Šé»‘æš—éª‘å£«ã€‹ã€2012.ã€Šè™è ä¾ ï¼šé»‘æš—éª‘å£«å´›èµ·ã€‹ç­‰ã€‚6. å‚è€ƒæ–‡çŒ®[1] ç™¾åº¦ç™¾ç§‘. ç†µå®šå¾‹.[2] ç™¾åº¦ç™¾ç§‘. æ¹®ç­ååº”."
  },
  
  {
    "title": "ç§‘ç ”Tipsï¼ˆæ–‡çŒ®æŸ¥è¯¢ã€ä¸‹è½½å’Œç®¡ç†ï¼‰",
    "url": "/posts/research-tips-paper-download-arrange/",
    "categories": "Tutorial, Writing",
    "tags": "other",
    "date": "2020-09-05 14:23:19 +0800",
    





    
    "snippet": "ä¹å‘³çš„ç§‘ç ”ç”Ÿæ´»ä¸­ï¼Œæ–‡çŒ®æŸ¥é˜…ã€ä¸‹è½½å’Œæ•´ç†å·¥ä½œæ— ç–‘æ˜¯å·¥ä½œé‡æ¯ç‡¥çš„ä¸€ä¸ªç¯èŠ‚ä¹‹ä¸€ï¼Œæœ¬æ–‡å°†å„ç±»æ–‡çŒ®çš„æŸ¥è¯¢å’Œæ£€ç´¢æ–¹æ³•ç½—åˆ—å¦‚ä¸‹ï¼Œå¹¶å¼•å…¥Zoteroè¿™ä¸ªæ–‡çŒ®ç®¡ç†è½¯ä»¶æ¥ç®¡ç†å·²ç»ä¸‹è½½çš„æ–‡çŒ®ã€‚  1. æ–‡çŒ®å·æŸ¥è¯¢          1.1. ç™¾åº¦å­¦æœ¯æŸ¥è¯¢      1.2. å›¾ä¹¦é¦†æ•°æ®åº“æŸ¥è¯¢      1.3. ResearchGateæŸ¥è¯¢      1.4. æ³¨æ„äº‹é¡¹        2. æ–‡çŒ®ä¸‹è½½       ...",
    "content": "ä¹å‘³çš„ç§‘ç ”ç”Ÿæ´»ä¸­ï¼Œæ–‡çŒ®æŸ¥é˜…ã€ä¸‹è½½å’Œæ•´ç†å·¥ä½œæ— ç–‘æ˜¯å·¥ä½œé‡æ¯ç‡¥çš„ä¸€ä¸ªç¯èŠ‚ä¹‹ä¸€ï¼Œæœ¬æ–‡å°†å„ç±»æ–‡çŒ®çš„æŸ¥è¯¢å’Œæ£€ç´¢æ–¹æ³•ç½—åˆ—å¦‚ä¸‹ï¼Œå¹¶å¼•å…¥Zoteroè¿™ä¸ªæ–‡çŒ®ç®¡ç†è½¯ä»¶æ¥ç®¡ç†å·²ç»ä¸‹è½½çš„æ–‡çŒ®ã€‚  1. æ–‡çŒ®å·æŸ¥è¯¢          1.1. ç™¾åº¦å­¦æœ¯æŸ¥è¯¢      1.2. å›¾ä¹¦é¦†æ•°æ®åº“æŸ¥è¯¢      1.3. ResearchGateæŸ¥è¯¢      1.4. æ³¨æ„äº‹é¡¹        2. æ–‡çŒ®ä¸‹è½½          2.1. doiå·ä¸‹è½½      2.2. ResearchGateä¸‹è½½      2.3. è°·æ­Œå­¦æœ¯ä¸‹è½½      2.4. sci-hubä¸‹è½½      2.5. arXivä¸‹è½½      2.6. ä¸­æ–‡ç¡•åšå£«è®ºæ–‡ä¸‹è½½        3. Zoteroæ–‡çŒ®ç®¡ç†          3.1. è®¾ç½®æ•°æ®å­˜å‚¨ä½ç½®      3.2. æ·»åŠ æ–‡çŒ®æ¡ç›®      3.3. å¯¼å‡ºæ–‡çŒ®æ¡ç›®      3.4. å±‚çº§ç®¡ç†å’ŒåŒæ­¥        4. å‚è€ƒæ–‡çŒ®1. æ–‡çŒ®å·æŸ¥è¯¢1.1. ç™¾åº¦å­¦æœ¯æŸ¥è¯¢ç›´æ¥ç™¾åº¦å­¦æœ¯æœç´¢æ–‡ç« æ ‡é¢˜1.2. å›¾ä¹¦é¦†æ•°æ®åº“æŸ¥è¯¢å¦‚æœæ˜¯SCIï¼Œé€šè¿‡æ ¡å›¾ä¹¦é¦†-ã€Œæ•°æ®åº“åˆ—è¡¨ã€-ã€ŒWeb Of Scienceã€-ã€ŒSCIEã€æœç´¢æ–‡ç« æ ‡é¢˜1.3. ResearchGateæŸ¥è¯¢ResearchGateï¼ˆhttps://www.researchgate.net/ï¼‰1.4. æ³¨æ„äº‹é¡¹æ³¨æ„ï¼Œæœ‰äº›ä¼šè®®æ–‡ç« å¯èƒ½æœä¸åˆ° DOI å·ï¼›æ³¨æ„ï¼Œæœ‰äº›æ–‡ç« å¯èƒ½ä»…ä¸Šä¼ äº arXivï¼Œæ²¡ DOI å·ï¼›æ³¨æ„ï¼Œæœ‰äº›ä¸“è‘—æ²¡æœ‰ DOI å·ï¼Œè€Œæ˜¯ç”¨ ISBN å·ã€‚2. æ–‡çŒ®ä¸‹è½½2.1. doiå·ä¸‹è½½ç›´æ¥åœ¨ DOI å·ï¼ˆå¦‚10.1016/j.asr.2017.11.035ï¼‰å‰å¢åŠ  https://doi.org/ï¼Œç„¶åé€šè¿‡æµè§ˆå™¨è®¿é—®ï¼Œèƒ½é‡å®šå‘åˆ°è®ºæ–‡åŸå§‹å‡ºå¤„ï¼Œå¦‚æœæœ‰æƒé™ï¼ˆæ¯”å¦‚åœ¨æ ¡å›­ç½‘å†…ä¸”å­¦æ ¡è´­ä¹°äº†ç›¸å…³æ•°æ®èµ„æºï¼‰ï¼Œå¯ä»¥ç›´æ¥ä¸‹è½½ã€‚2.2. ResearchGateä¸‹è½½ResearchGateï¼ˆhttps://www.researchgate.net/ï¼‰ ä¸Šä¸ä½†èƒ½æ£€ç´¢åˆ°æ–‡çŒ®çš„ DOI å·ï¼Œæœ‰çš„èµ„æºè¿˜å¯ä»¥ç›´æ¥ä¸‹è½½ã€‚2.3. è°·æ­Œå­¦æœ¯ä¸‹è½½æœ¬æ–¹æ³•ä¸€èˆ¬éœ€è¦ç¿»å¢™ã€‚è®¿é—® https://scholar.google.comï¼Œæœç´¢æ–‡çŒ®é¢˜ç›®ï¼Œè‹¥è¯¥æ–‡çŒ®æœ‰èƒ½å¤Ÿä¸‹è½½çš„æ¥æºï¼Œå³ä¾§ä¼šå‡ºç°åŒ…å« [PDF] çš„ä¸‹è½½è¿æ¥ã€‚è°·æ­Œå­¦æœ¯æŸ¥è¯¢çš„æ–‡çŒ®ï¼Œè¿˜å¯ä»¥æŸ¥è¯¢åˆ°å¼•ç”¨ä¿¡æ¯ï¼Œä½œä¸ºé¢å¤–çš„ä¿¡æ¯å‚è€ƒã€‚è¿˜å¯ä»¥å¯¼å‡ºä¸º bibTex æ ¼å¼ã€‚2.4. sci-hubä¸‹è½½ä¿„ç½—æ–¯å¤§ä½¬å¼€å‘çš„ç¥å™¨ï¼šhttps://sci-hub.twè¾“å…¥ DOI å·å°±èƒ½æ£€ç´¢å’Œä¸‹è½½ pdf æ–‡çŒ®ï¼Œè™½ç„¶å¯èƒ½ç‰ˆæœ¬ä¸æ˜¯æœ€æ–°çš„ï¼Œä½†èƒœåœ¨å¥½ç”¨ã€‚DOI å·ä¸ç”¨æ•™æ€ä¹ˆæŸ¥äº†å§ï¼ŸæŸåº¦å­¦æœ¯ï¼ŒæŸæ­Œå­¦æœ¯ï¼ŒæŸ WOSï¼ŒæŸ Gateï¼Œéƒ½å¯ä»¥è¾“å…¥æ–‡çŒ®åç§°å»æŸ¥ã€‚2.5. arXivä¸‹è½½å‚è€ƒï¼šå¦‚ä½•å¿«é€Ÿä¸‹è½½ arxiv è®ºæ–‡arXivï¼ˆXä¾å¸Œè…Šæ–‡çš„Ï‡å‘éŸ³ï¼Œè¯»éŸ³å¦‚è‹±è¯­çš„archiveï¼‰ï¼ˆhttps://arxiv.org/ï¼‰æ˜¯ä¸€ä¸ªæ”¶é›†ç‰©ç†å­¦ã€æ•°å­¦ã€è®¡ç®—æœºç§‘å­¦ã€ç”Ÿç‰©å­¦ä¸æ•°ç†ç»æµå­¦çš„è®ºæ–‡é¢„å°æœ¬ï¼ˆpreprintï¼‰çš„ç½‘ç«™ï¼Œå§‹äº1991å¹´8æœˆ14æ—¥ã€‚æˆªè‡³2008å¹´10æœˆï¼ŒarXivå·²æ”¶é›†è¶…è¿‡50ä¸‡ç¯‡é¢„å°æœ¬[2][3]ï¼›è‡³2014å¹´åº•ï¼Œè—é‡è¾¾åˆ°1ç™¾ä¸‡ç¯‡[4][5]ã€‚æˆªè‡³2016å¹´10æœˆï¼Œæäº¤ç‡å·²è¾¾æ¯æœˆè¶…è¿‡10,000ç¯‡[5][6]ã€‚arxiv åœ¨ä¸­å›½æœ‰å®˜æ–¹é•œåƒ http://cn.arxiv.orgï¼Œé€šè¿‡ä½¿ç”¨ chrome æ’ä»¶å°† arxiv çš„é“¾æ¥è‡ªåŠ¨é‡å®šå‘åˆ°ä¸­å›½é•œåƒç½‘ç«™é“¾æ¥å³å¯ï¼Œè¿™æ ·å½“ä½ ç‚¹å‡»ä¸€ç¯‡æ–‡ç« çš„arxivé“¾æ¥åå°±å¯ä»¥è‡ªåŠ¨åˆ°cn.arxiv.orgï¼Œé€Ÿåº¦å¾ˆå¿«ã€‚å¦‚æœ http://cn.arxiv.org/ ä»ç„¶éš¾ä»¥è®¿é—®ï¼Œä½†æ˜¯ä¸­ç§‘é™¢ç†è®ºç‰©ç†æ‰€ä¹Ÿæœ‰ä¸€ä¸ªå¤‡é€‰ç½‘å€ï¼š http://xxx.itp.ac.cn/ ï¼Œä½†æ˜¯ä¹Ÿä¸æ˜¯ç‰¹åˆ«ç¨³å®šã€‚é¦–å…ˆå®‰è£… tampermonkeyï¼ˆæ²¹çŒ´æ’ä»¶ï¼‰ï¼Œè¿™æ˜¯ä¸€æ¬¾åŠŸèƒ½å¼ºå¤§çš„è„šæœ¬æ’ä»¶ï¼Œå¯ä»¥é€šè¿‡è„šæœ¬å¯¹æµè§ˆå™¨ä¸Šç½‘é¡µè¿›è¡Œä¿®æ”¹ç¼–è¾‘ç­‰ï¼Œæ›´å¤šä»‹ç»å¯ä»¥å‚è€ƒ https://zhuanlan.zhihu.com/p/28869740ã€‚è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨è¯¥æ’ä»¶å¯¹ç½‘é¡µä¸­çš„ arxiv é“¾æ¥è¿›è¡Œé‡å®šå‘åˆ° cn.arxiv.orgã€‚æ²¹çŒ´æ’ä»¶åœ¨å„ç±»æµè§ˆå™¨ä¸­ï¼ˆå¦‚Chromeï¼ŒMicrosoft Edgeç­‰ï¼‰å‡å¯ä»¥å®‰è£…ã€‚æ¨èä½¿ç”¨ Chrome  Webstore æˆ–å¾®è½¯çš„æµè§ˆå™¨æ’ä»¶å•†åŸï¼ˆhttps://microsoftedge.microsoft.com/addons/Microsoft-Edge-Extensions-Home?hl=zh-CNï¼‰ä¸‹è½½æ²¹çŒ´æ’ä»¶ï¼Œåœ¨ crx4chrome ç½‘ç«™æœç´¢å¹¶ä¸‹è½½ä¹Ÿå¯ä»¥ï¼Œè¿™é‡Œç»™å‡ºcrx4chromeç½‘ç«™ä¸Štampermonkeyæ’ä»¶çš„ä¸‹è½½é“¾æ¥ã€‚ç„¶åæ·»åŠ  arxiv é‡å®šå‘è„šæœ¬ã€‚ ä»£ç æ›´æ–°æ—¶é—´2017å¹´12å¹´04æ—¥ï¼Œè‡ªåŠ¨è½¬åˆ°pdfé“¾æ¥ã€‚ ä»£ç éœ€è¦å…¨éƒ¨å¤åˆ¶ç²˜è´´ï¼Œéƒ¨åˆ†çœ‹ä¼¼æ³¨é‡Šçš„ä»£ç ä¹Ÿæœ‰ç”¨å¤„ï¼Œä»£ç å¦‚ä¸‹ï¼š// ==UserScript==// @name        Redirect arxiv.org to CN.arxiv.org/pdf// @namespace   uso2usom// @description On any web page it will check if the clicked links goes to arxiv.org. If so, the link will be rewritten to point to cn.arxiv.org// @include     http://*.*// @include     https://*.*// @version     1.2// @grant       none// ==/UserScript==// This is a slightly brute force solution, but there is no other way to do it using only a userscript.// Release Notes// version 1.2// Focus on pdf link only!// Add '.pdf' link  automatically. Convenient for saving as pdf.// version 1.1// Redirect arxiv.org to CN.arxiv.orgdocument.body.addEventListener('mousedown', function(e){    var targ = e.target || e.srcElement;    if ( targ &amp;&amp; targ.href &amp;&amp; targ.href.match(/https?:\\/\\/arxiv.org\\/pdf/) ) {        targ.href = targ.href.replace(/https?:\\/\\/arxiv\\.org/, 'http://cn.arxiv.org');    }    if ( targ &amp;&amp; targ.href &amp;&amp; targ.href.match(/http?:\\/\\/arxiv.org\\/pdf/) ) {        targ.href = targ.href.replace(/http?:\\/\\/arxiv\\.org/, 'http://cn.arxiv.org');    }    if ( targ &amp;&amp; targ.href &amp;&amp; targ.href.match(/https?:\\/\\/arxiv.org\\/abs/) ) {        targ.href = targ.href.replace(/https?:\\/\\/arxiv\\.org\\/abs/, 'http://cn.arxiv.org/pdf');    }    if ( targ &amp;&amp; targ.href &amp;&amp; targ.href.match(/http?:\\/\\/arxiv.org\\/abs/) ) {        targ.href = targ.href.replace(/http?:\\/\\/arxiv\\.org\\/abs/, 'http://cn.arxiv.org/pdf');    }    if (targ &amp;&amp; targ.href &amp;&amp; targ.href.match(/http?:\\/\\/cn.arxiv.org\\/pdf/) &amp;&amp; !targ.href.match(/\\.pdf/) )    {       targ.href = targ.href + '.pdf';    }});æœ€åï¼Œæµ‹è¯•é…ç½®æ˜¯å¦æˆåŠŸï¼Œä¸‹é¢æ˜¯ arxiv ä¸Šçš„ä¸€ç¯‡æ–‡ç« ï¼Œç‚¹å‡»pdfæµ‹è¯•ä¸‹è½½é€Ÿåº¦ã€‚ä¹‹åå¯ä»¥æ‰‹åŠ¨å»æ‰â€œcn.â€å‰ç¼€å¯¹æ¯”é€Ÿåº¦ã€‚ Relation Networks for Object Detectionå¦å¤–ï¼Œç”±äº http://cn.arxiv.org å¹¶ä¸æ˜¯ä¸»ç«™ç‚¹ï¼Œæ˜¯ arxiv åœ¨ä¸­å›½åŒºçš„é•œåƒï¼Œå› æ­¤æ›´æ–°æœ‰å¤§çº¦åŠå¤©çš„å»¶è¿Ÿï¼Œå¯¹äºå½“å¤©æäº¤çš„æ–‡ç« ï¼Œå¯èƒ½æ›´æ–°ä¸åŠæ—¶ã€‚å¯¹äºå½“å¤©æ–‡ç« å¯ä»¥æ‰‹åŠ¨åˆ é™¤â€œcn.â€å‰ç¼€è§£å†³ã€‚ å¦‚æœå‡ºç° pdf æ­£åœ¨è‡ªåŠ¨ä»æºæ–‡ä»¶ç”Ÿæˆç­‰æç¤ºï¼Œä¸ºæ­£å¸¸ç°è±¡ï¼Œç¨åå³å¯è·å–pdfè®ºæ–‡ã€‚2.6. ä¸­æ–‡ç¡•åšå£«è®ºæ–‡ä¸‹è½½çŸ¥ç½‘ä¸­è®ºæ–‡åªèƒ½ä¸‹è½½åˆ°cajç‰ˆæœ¬ï¼ˆåƒåœ¾çŸ¥ç½‘åªå‘å›½äººï¼‰ï¼Œå¦‚æœå¤„äºæ ¡å›­ç½‘å†…ï¼Œå¯ä»¥å»çŸ¥ç½‘æµ·å¤–ç‰ˆï¼ˆwww.oversea.cnki.netï¼‰ä¸‹è½½åˆ°pdfç‰ˆï¼ˆåƒåœ¾çŸ¥ç½‘ä¸å‘æ´‹äººï¼‰ã€‚ç‚¹å‡»Download PDFä»æ­¤å‘Šåˆ«CNKIé˜…è¯»å™¨ï¼Œåƒåœ¾æµæ°“è½¯ä»¶ï¼Œæ‹œæ‹œäº†æ‚¨å˜ã€‚3. Zoteroæ–‡çŒ®ç®¡ç†æ–‡çŒ®ç®¡ç†è½¯ä»¶å¯ä»¥æœ‰æ•ˆçš„å¸®åŠ©ç ”ç©¶äººå‘˜ç®¡ç†å‚è€ƒæ–‡çŒ®ï¼ŒåŠ é€Ÿè®ºæ–‡å†™ä½œè¿‡ç¨‹ã€‚è¿™é‡Œä»‹ç»å¼€æºçš„æ–‡çŒ®ç®¡ç†è½¯ä»¶ Zotero çš„åŸºæœ¬åŠŸèƒ½ã€‚æ³¨æ„ï¼Œæ­¤å¤„å‡è®¾ä¸»è¦ä»¥è‹±æ–‡è®ºæ–‡ä¹¦å†™ä¸ºä¾‹ï¼Œè‹¥ä»¥ä¸­æ–‡å†™ä½œä¸ºä¸»è¦å·¥ä½œï¼Œå¯ä½¿ç”¨ NoteExpress ä½œä¸ºæ–‡çŒ®ç®¡ç†è½¯ä»¶ï¼Œä¸€èˆ¬å„é«˜æ ¡å›¾ä¹¦é¦†å‡æä¾›å­¦æ ¡ç‰¹åˆ«ç‰ˆä¸‹è½½å®‰è£…ï¼ŒNoteExpress å¯æ–¹ä¾¿çš„ä»ä¸­å›½çŸ¥ç½‘ä¸‹è½½å’Œå¯¼å…¥æ–‡çŒ®ã€‚Zotero å®˜ç½‘ï¼ˆhttps://www.zotero.org/ï¼‰å¯ä»¥å…è´¹ä¸‹è½½è¯¥è½¯ä»¶ï¼Œè½¯ä»¶æ”¯æŒä¸­æ–‡ã€‚3.1. è®¾ç½®æ•°æ®å­˜å‚¨ä½ç½®ä¸‹è½½å®‰è£…åï¼Œæ‰“å¼€ã€Œç¼–è¾‘ã€-ã€Œé¦–é€‰é¡¹ã€ï¼Œåˆ‡æ¢åˆ°ã€Œé«˜çº§ã€- ã€Œæ–‡ä»¶å’Œæ–‡ä»¶å¤¹]é€‰é¡¹å¡ï¼Œå¯ä»¥å°†å‚è€ƒæ–‡çŒ®ç´¢å¼•å’Œå­˜æ”¾è·¯å¾„ä¿®æ”¹åˆ°ã€Œè‡ªå®šä¹‰çš„æ•°æ®å­˜å‚¨ä½ç½®ã€ï¼š3.2. æ·»åŠ æ–‡çŒ®æ¡ç›®  è‹±æ–‡æ–‡çŒ®å°†ä¸‹è½½åˆ°æœ¬åœ°çš„ pdf æ–‡çŒ®æ‹–å…¥ Zotero è½¯ä»¶ç•Œé¢å³å¯æ·»åŠ è¯¥æ–‡çŒ®ï¼Œç­‰å¾…ä¸€ä¼šå„¿åï¼Œè½¯ä»¶ä¼šè‡ªåŠ¨åˆ†æå‡ºè®ºæ–‡çš„ä¿¡æ¯å¹¶å½¢æˆä¸€ä¸ªæ¡ç›®ï¼Œå¹¶å°†è¯¥æ–‡çŒ®çš„ pdf æ–‡ä»¶æ‹·è´è‡³å‰é¢è®¾ç½®çš„è‡ªå®šä¹‰çš„æ•°æ®å­˜å‚¨ä½ç½®ï¼Œå› æ­¤åˆšä¸‹è½½åˆ°æœ¬åœ°çš„ pdf æ–‡ä»¶å³å¯åˆ é™¤äº†ã€‚ç‚¹å‡»å³ä¾§çš„ç¬¬äºŒæ  â€œç¬”è®°â€ å¯ä»¥æŸ¥çœ‹å’Œå¢åˆ å¯¹è¯¥è®ºæ–‡çš„ç¬”è®°åŒå‡»è¯¥æ¡ç›®ï¼Œå¯ä»¥æ‰“å¼€å¤–éƒ¨ pdf æŸ¥çœ‹å™¨æ¥æŸ¥çœ‹è®ºæ–‡ã€‚  ä¸­æ–‡æ–‡çŒ®éœ€è¦å€ŸåŠ©ä¸€ä¸ªæ’ä»¶æ¥è®© Zotero è‡ªåŠ¨æŠ“å–ä¸­æ–‡æ–‡çŒ®çš„ metadataã€‚æ’ä»¶ jasminum ä¸‹è½½åœ°å€ åœ¨æ­¤ã€‚è¯¥æ’ä»¶é’ˆå¯¹çŸ¥ç½‘ä¸‹è½½çš„æ–‡çŒ®å‡å¯æ­£å¸¸æŠ“å–ï¼Œå…¶å®ƒå¦‚ä¸‡æ–¹ä¸‹è½½çš„æ–‡çŒ®ï¼Œå°†æ–‡çŒ®çš„ PDF æ–‡ä»¶ååå­—å‘½åä¸ºã€æ–‡çŒ®å.pdfã€‘æˆ–è€…ã€æ–‡çŒ®å_ç¬¬ä¸€ä½œè€….pdfã€‘ä¹Ÿå¯æŠ“å–ã€‚jasminum å®ç°çš„åŠŸèƒ½æœ‰ï¼š  æ‹†åˆ†æˆ–åˆå¹¶ Zotero ä¸­æ¡ç›®ä½œè€…å§“å’Œåï¼ˆä¹Ÿå³å¢åŠ æˆ–ç§»é™¤ metadata ä¸­ä¸­æ–‡å§“åä¹‹é—´çš„é€—å·ï¼‰  æ ¹æ®çŸ¥ç½‘ä¸Šä¸‹è½½çš„æ–‡çŒ®æ–‡ä»¶æ¥æŠ“å–å¼•ç”¨ä¿¡æ¯ï¼ˆå°±æ˜¯æ ¹æ®æ–‡ä»¶åï¼‰  æ·»åŠ ä¸­æ–‡PDF/CAJæ—¶ï¼Œè‡ªåŠ¨æ‹‰å–çŸ¥ç½‘æ•°æ®ï¼Œè¯¥åŠŸèƒ½é»˜è®¤å…³é—­ã€‚éœ€è¦åˆ°è®¾ç½®ä¸­å¼€å¯ï¼Œæ³¨æ„æ·»åŠ çš„æ–‡ä»¶åéœ€è¦å«æœ‰ä¸­æ–‡ï¼Œå…¨è‹±æ–‡æ²¡æœ‰æ•ˆæœ  ä¸ºçŸ¥ç½‘çš„å­¦ä½è®ºæ–‡ PDF æ·»åŠ ä¹¦ç­¾ä¸‹è½½å¾—åˆ° .xpi æ ¼å¼çš„æ’ä»¶æ–‡ä»¶åï¼Œæ‰“å¼€ Zoteroï¼Œç‚¹å‡»ã€å·¥å…·ã€‘-ã€æ’ä»¶ã€‘æ‰“å¼€æ’ä»¶ç®¡ç†å™¨ã€‚ç„¶åç‚¹å‡»å·¦ä¸Šè§’çš„é½¿è½®-ã€Install Add-on From Fileâ€¦ã€‘ï¼Œæ‰¾åˆ°å¹¶é€‰æ‹©åˆšåˆšä¸‹è½½çš„ .xpi æ ¼å¼çš„æ’ä»¶æ–‡ä»¶ï¼Œå®‰è£…åæ ¹æ®æç¤ºé‡å¯ Zotero å®Œæˆå®‰è£…ã€‚ç„¶ååœ¨å¯¼å…¥çš„ä¸­æ–‡æ–‡çŒ®ä¸Šå³å‡»ï¼Œé€‰æ‹©ã€çŸ¥ç½‘ã€‘å›¾æ ‡çš„æ›´æ–°å…ƒä¿¡æ¯å³å¯ã€‚3.3. å¯¼å‡ºæ–‡çŒ®æ¡ç›®å³é”®è¯¥æ¡ç›®ï¼Œå¯ä»¥è½¬åˆ° pdf æ–‡ä»¶çš„å­˜æ”¾ä½ç½®ï¼ˆè‡ªå®šä¹‰çš„æ•°æ®å­˜å‚¨ä½ç½®ï¼‰ï¼Œæˆ–è€…å¯¼å‡ºè¯¥æ–‡çŒ®çš„å¼•æ–‡ç›®å½•ã€‚æ ¹æ®å†™æ–‡ç« æ‰€éœ€è¦çš„å‚è€ƒæ–‡çŒ®æ ¼å¼ï¼ˆæ­¤å¤„ä»¥ IEEE ä¸ºä¾‹ï¼‰ï¼Œé€‰æ‹©å¼•æ–‡ç›®å½•ï¼Œç„¶åé€‰æ‹©å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼Œå³å¯åœ¨æ¯”å¦‚Wordä¸­æ‰€å†™è®ºæ–‡çš„å‚è€ƒæ–‡çŒ®ä¸­ï¼Œæ’å…¥è‡ªåŠ¨å¤åˆ¶çš„å¼•æ–‡æ¡ç›®ï¼š  [1] H. Hu, J. Gu, Z. Zhang, J. Dai, and Y. Wei, â€œRelation Networks for Object Detection,â€ arXiv:1711.11575 [cs], Jun. 2018, Accessed: Sep. 05, 2020. [Online]. Available: http://arxiv.org/abs/1711.11575.è¿˜å¯ä»¥å³é”®é€‰æ‹©ã€Œå¯¼å‡ºæ¡ç›®ã€å¯¼å‡ºä¸º bib æ ¼å¼çš„æ¡ç›®ä¿¡æ¯ï¼Œå³å¯åœ¨ latex ä¸­çš„ bib æ–‡ä»¶æ’å…¥è¯¥å‚è€ƒæ–‡çŒ®æ¡ç›®ä»¥ä¾›æ­£æ–‡å¼•ç”¨ã€‚3.4. å±‚çº§ç®¡ç†å’ŒåŒæ­¥Zotero å¦ä¸€ä¸ªä¼˜ç‚¹æ˜¯å¯ä»¥å»ºç«‹å¤šå±‚çº§çš„ç›®å½•æ ‘ï¼Œä¾¿äºåˆ†é—¨åˆ«ç±»çš„æ•´ç†å‚è€ƒæ–‡çŒ®æ¡ç›®ã€‚å¦ä¸€ä¸ªæ–¹æ³•æ˜¯é’ˆå¯¹æ¯ä¸€ç¯‡å†™çš„æ–‡ç« å»ºç«‹ä¸€ä¸ªç›®å½•ï¼Œå°†æ‰€æœ‰å¼•ç”¨çš„å‚è€ƒæ–‡çŒ®æ”¾å…¥å…¶ä¸­ï¼Œè¿™æ ·å¯ä»¥ç»Ÿä¸€å°†æ•´ä¸ªç›®å½•çš„æ‰€æœ‰å‚è€ƒæ–‡çŒ®å¯¼å‡ºå‚è€ƒæ–‡çŒ®åˆ—è¡¨ã€‚å½“æ³¨å†Œäº†Zoteroè´¦æˆ·åï¼Œå¯ä»¥æ–¹ä¾¿çš„å°†æ•´ä¸ªæ–‡çŒ®åº“è¿›è¡Œäº‘ç«¯å­˜å‚¨å’ŒåŒæ­¥ï¼Œå½“ä¸¤åœ°åŠå…¬å†™ä½œæ—¶ï¼Œå¯ä»¥åœ¨ä¸€å¤„æ›´æ–°å‚è€ƒæ–‡çŒ®åº“åï¼Œåœ¨å¦ä¸€å¤„è”ç½‘åŒæ­¥ï¼Œå³å¯æ— ç¼ä¿æŒä¸¤åœ°çš„æ–‡çŒ®åº“çš„åŒæ­¥ã€‚è´¦æˆ·è®¾ç½®ä½äºã€Œé¦–é€‰é¡¹ã€-ã€ŒåŒæ­¥ã€ä¸­ï¼Œè®¾ç½®å®Œæ¯•åï¼Œç‚¹å‡»è½¯ä»¶ç•Œé¢å³ä¸Šè§’çš„å°å›¾æ ‡å³å¯è¿›è¡ŒåŒæ­¥ã€‚æ›´è¿›ä¸€æ­¥ï¼Œå¯ä»¥ æ­¤å¤„ ä¸‹è½½ zotfile æ’ä»¶ã€‚zotfile å¯ä»¥æå¤§çš„å¢å¼º Zotero çš„æ–‡çŒ®ç®¡ç†åŠŸèƒ½ï¼Œæ¯”å¦‚ä¸€é”®è§„èŒƒæ‰€æœ‰æ¡ç›®çš„æ–‡çŒ® pdf æ–‡ä»¶çš„æ ‡é¢˜ç­‰ã€‚4. å‚è€ƒæ–‡çŒ®[1] å¾·è°Ÿèµ›æ–¯. å¦‚ä½•å¿«é€Ÿä¸‹è½½ arxiv è®ºæ–‡.[2]  strange_jiong. Latexç¼–è¯‘å‡ºç°å­—ä½“è·å–ä¸åˆ°çš„æƒ…å†µ.[3]  å¼€å¿ƒé²¨é±¼. é…ç½®VScodeç¼–è¾‘LaTeXåŠæ­£åå‘æœç´¢ç­‰è®¾ç½®.[4] LaTeXå·¥ä½œå®¤. LaTeXæŠ€å·§932ï¼šå¦‚ä½•é…ç½®Visual Studio Codeä½œä¸ºLaTeXç¼–è¾‘å™¨æ–°ç‰ˆæ›´æ–°."
  },
  
  {
    "title": "LaTeX+VSCodeç¯å¢ƒé…ç½®",
    "url": "/posts/LateX-VSCode/",
    "categories": "Tutorial, Writing",
    "tags": "latex, vscode",
    "date": "2020-08-28 09:17:19 +0800",
    





    
    "snippet": "VSCodeä½œä¸ºä¸€ä¸ªå°å·§è€ŒåˆåŠŸèƒ½å¼ºå¤§çš„ç¼–è¾‘å™¨ï¼Œå·²ç»æˆä¸ºæˆ‘è¿›è¡Œä»¿çœŸç¨‹åºå¼€å‘è°ƒè¯•çš„å”¯ä¸€å·¥å…·ï¼Œæ˜¯å¦å¯ä»¥ç›´æ¥æ‹¿VSCodeæ¥å†™LaTeXï¼Ÿå½“ç„¶å¯ä»¥ï¼Œä»æ­¤ä¸€ä¸ªç¨‹åºå†…ä»¿çœŸã€ç”»å›¾ã€ç å­—ä¸€æ°”å‘µæˆã€‚  1. å‰è¨€  2. LaTeXé…ç½®          2.1. å®‰è£…MikTeX      2.2. é…ç½®ç¯å¢ƒå˜é‡ï¼ˆç»¿è‰²ç‰ˆï¼‰        3. é…ç½®VSCodeçš„LaTeXç¯å¢ƒ          3.1. å®‰...",
    "content": "VSCodeä½œä¸ºä¸€ä¸ªå°å·§è€ŒåˆåŠŸèƒ½å¼ºå¤§çš„ç¼–è¾‘å™¨ï¼Œå·²ç»æˆä¸ºæˆ‘è¿›è¡Œä»¿çœŸç¨‹åºå¼€å‘è°ƒè¯•çš„å”¯ä¸€å·¥å…·ï¼Œæ˜¯å¦å¯ä»¥ç›´æ¥æ‹¿VSCodeæ¥å†™LaTeXï¼Ÿå½“ç„¶å¯ä»¥ï¼Œä»æ­¤ä¸€ä¸ªç¨‹åºå†…ä»¿çœŸã€ç”»å›¾ã€ç å­—ä¸€æ°”å‘µæˆã€‚  1. å‰è¨€  2. LaTeXé…ç½®          2.1. å®‰è£…MikTeX      2.2. é…ç½®ç¯å¢ƒå˜é‡ï¼ˆç»¿è‰²ç‰ˆï¼‰        3. é…ç½®VSCodeçš„LaTeXç¯å¢ƒ          3.1. å®‰è£…LaTeX Workshop      3.2. é…ç½®json      3.3. ç¼–è¯‘æµ‹è¯•      3.4. å¿«æ·é”®      3.5. å®‰è£…LTeX        4. å‚è€ƒæ–‡çŒ®1. å‰è¨€ç”±äºVSCodeå¤ªç‰›é€¼ï¼Œæ‰€æœ‰çš„Cå’ŒPythonä»¿çœŸå‡å·²ç»è¿ç§»è‡³è¯¥ç¼–è¾‘å™¨ä¸‹å®Œæˆï¼Œå¶ç„¶å‘ç°å…¶è¿˜å¯ç¼–è¯‘LaTeXï¼Œç‹‚å–œï¼Œé‚ç ”ç©¶ä¹‹ï¼Œæ­¥éª¤åˆ—äºä¸‹ã€‚ä¸‹é¢ä»¥ MikTeX 20.6 + VSCode 1.48.2 ä¸ºä¾‹è¿›è¡Œå®‰è£…å’Œéƒ¨ç½²è®²è§£ã€‚2. LaTeXé…ç½®2.1. å®‰è£…MikTeXå‚è€ƒæ­¤å¤„ã€‚æ­¤å¤„æ‘˜å½•å¦‚ä¸‹ï¼šå®˜ç½‘çš„ä¸‹è½½é¡µé¢ åŒ…æ‹¬ä¸‰ç§ä¸‹è½½ï¼ˆå®‰è£…ï¼‰æ–¹å¼ï¼Œå¦‚å›¾åˆ†åˆ«ä¸ºå®‰è£…ç¨‹åºï¼ˆInstallerï¼‰ã€ç»¿è‰²ç‰ˆï¼ˆPortable Editionï¼‰ä»¥åŠå‘½ä»¤è¡Œï¼ˆCommand-line installerï¼‰ã€‚å¯¹äºWindowså¼€å‘ç¯å¢ƒï¼Œä¸è€ƒè™‘å‘½ä»¤è¡Œæ–¹å¼ï¼Œå› æ­¤å¯ä»¥ä»»æ„é€‰æ‹©å®‰è£…ç¨‹åºæˆ–è€…ç»¿è‰²ç‰ˆã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œç»¿è‰²ç‰ˆå¹¶æ²¡æœ‰å•ç‹¬çš„å‹ç¼©åŒ…ï¼Œè€Œæ˜¯ç›´æ¥å¯¹åº”å®‰è£…ç‰ˆçš„å®‰è£…ç¨‹åºï¼Œåªä¸è¿‡å°†å®‰è£…ç¨‹åºé‡å‘½åä¸º MiKTeX-portable.exeï¼Œç„¶ååŒå‡»å®‰è£…å³å¯ã€‚ç»¿è‰²ç‰ˆä¸å®‰è£…ç‰ˆçš„åŒºåˆ«åœ¨äºï¼Œç»¿è‰²ç‰ˆä¸ä¼šå‘ç³»ç»Ÿç›˜å†™å…¥é…ç½®ä¿¡æ¯ï¼Œä¹Ÿä¸ä¼šæ³¨å†Œç¯å¢ƒå˜é‡ï¼Œæ„å‘³ç€ä¹‹åå¦‚æœéœ€è¦å®‰è£…ç¼–è¾‘å™¨ï¼Œæ— æ³•è‡ªåŠ¨è·å–ç³»ç»Ÿä¸­å·²ç»å®‰è£…çš„LaTeXç‰ˆæœ¬ï¼Œè€Œéœ€è¦æ‰‹åŠ¨é…ç½®ã€‚æ‡’äººæ¨èå®‰è£…ç‰ˆï¼Œçœå»é…ç½®ç¯å¢ƒå˜é‡ç­‰æ­¥éª¤ï¼ˆè™½ç„¶åé¢æ˜¯ä»¥ç»¿è‰²ç‰ˆä»‹ç»çš„ï¼‰ã€‚åŒå‡»ä¸‹è½½çš„ exe æ–‡ä»¶è¿›è¡Œå®‰è£…ï¼Œè·¯å¾„ä»»æ„ã€‚2.2. é…ç½®ç¯å¢ƒå˜é‡ï¼ˆç»¿è‰²ç‰ˆï¼‰å°† miktex é™„å¸¦çš„ xelatex.exe å’Œ pdflatex.exe ç­‰å·¥å…·æ‰€åœ¨çš„è·¯å¾„åŠ å…¥ç³»ç»Ÿ Path ç¯å¢ƒå˜é‡ã€‚å‡è®¾å®‰è£…çš„MiKTeXä¸ºç»¿è‰²ç‰ˆï¼Œå®‰è£…æ ¹ç›®å½•ä¸ºX:\\ProgramFiles\\MiKTeX\\ï¼Œåˆ™ä¸Šè¿°è·¯å¾„å‡ä½äºX:\\ProgramFiles\\MiKTeX\\texmfs\\install\\miktex\\bin\\x64ç›¸åº”çš„ï¼Œå®‰è£…ç‰ˆçš„è·¯å¾„ä½äºX:\\ProgramFiles\\MiKTeX\\miktex\\bin\\x64æ³¨æ„ï¼Œå¦‚æœåœ¨ VSCode æ‰“å¼€çš„æƒ…å†µä¸‹æ”¹å˜äº†ç¯å¢ƒå˜é‡ï¼Œéœ€è¦é‡å¯ VSCode ä½¿å…¶èƒ½å¤Ÿè·å–æœ€æ–°çš„ç¯å¢ƒå˜é‡ã€‚3. é…ç½®VSCodeçš„LaTeXç¯å¢ƒ3.1. å®‰è£…LaTeX WorkshopLaTeX Workshop å‡ ä¹å¯ä»¥è®¤ä¸ºæ˜¯ VSCode æ ‡é…çš„ LaTeX ç¼–è¯‘æ‰©å±•ï¼ŒæŒ‚ä¸Šç¿»å¢™é€šè¿‡æ‰©å±•å•†åº—æœç´¢ latex å¼¹å‡ºçš„ç¬¬ä¸€ä¸ªå°±æ˜¯ã€‚å®‰è£…å®Œæˆåï¼Œctrl+, æ‰“å¼€è®¾ç½®é¢æ¿ï¼ˆæˆ–é€šè¿‡å·¦ä¸‹è§’çš„å°é½¿è½®ç‚¹å‡»è¿›å…¥ï¼‰ï¼Œæœç´¢ json ç„¶åç‚¹å‡» ã€Œåœ¨settings.json ä¸­ç¼–è¾‘ã€ï¼Œæ‰“å¼€ settings.jsonã€‚3.2. é…ç½®jsonåœ¨ settings.json ä¸­æ–°å¢å¦‚ä¸‹ä»£ç ï¼š{\t\"latex-workshop.latex.recipes\": [      {        \"name\": \"pdflatex -&gt; bibtex -&gt; pdflatex*2\",        \"tools\": [          \"pdflatex\",          \"bibtex\",          \"pdflatex\",          \"pdflatex\"        ]      }    ],    \"latex-workshop.latex.tools\": [      {        \"name\": \"xelatex\",        \"command\": \"xelatex\",        \"args\": [          \"-synctex=1\",          \"-interaction=nonstopmode\",          \"-file-line-error\",          \"%DOC%\"        ]      },      {        \"name\": \"latexmk\",        \"command\": \"latexmk\",        \"args\": [          \"-synctex=1\",          \"-interaction=nonstopmode\",          \"-file-line-error\",          \"%DOC%\"        ]      },      {        \"name\": \"pdflatex\",        \"command\": \"pdflatex\",        \"args\": [          \"-synctex=1\",          \"-interaction=nonstopmode\",          \"-file-line-error\",          \"%DOC%\"        ]      },      {        \"name\": \"bibtex\",        \"command\": \"bibtex\",        \"args\": [          \"%DOCFILE%\"        ]      }    ],    \"latex-workshop.view.pdf.viewer\": \"tab\",}æœ€ç»ˆæ•ˆæœå¦‚ä¸‹ï¼ˆå¿½ç•¥å‰é¢çš„è‹¥å¹²ä¸»ä½“é…ç½®é¡¹ï¼‰ï¼šæ³¨æ„ï¼Œlatex-workshop.latex.tools å­—æ®µå®šä¹‰äº†ç¼–è¯‘ LaTeX çš„åºåˆ—æ“ä½œï¼Œé»˜è®¤ä¸º xelatex -&gt; bibtex -&gt; xelatex*2ï¼Œè¿™é‡Œå°†å…¶ä¿®æ”¹ä¸º pdflatex -&gt; bibtex -&gt; pdflatex*2ï¼Œå¯¹åº”çš„é¡ºåºä¸ºè°ƒç”¨1æ¬¡ pdflatexï¼Œ1æ¬¡ bibtexï¼Œ2æ¬¡ pdflatexï¼Œä¸texstudioä¿æŒä¸€è‡´ï¼Œç¡®ä¿ç”Ÿæˆçš„ pdf æ–‡ä»¶å­—ä½“å’Œæ ¼å¼ä¸€è‡´ã€‚è¿›é˜¶é…ç½®è¿˜åŒ…æ‹¬ï¼šè®¾ç½®ç¦æ­¢ä¿å­˜æ—¶è‡ªåŠ¨buildï¼Œä»¥åŠè®¾å®šè‡ªåŠ¨æ¸…ç†ä¸­é—´æ–‡ä»¶çš„ç±»å‹ã€‚{    \"latex-workshop.latex.autoBuild.run\": \"never\", //ç¦æ­¢ä¿å­˜æ—¶è‡ªåŠ¨build      \"latex-workshop.latex.clean.fileTypes\": [  //è®¾å®šæ¸…ç†æ–‡ä»¶çš„ç±»å‹        \"*.aux\",        \"*.bbl\",        \"*.blg\",        \"*.idx\",        \"*.ind\",        \"*.lof\",        \"*.lot\",        \"*.out\",        \"*.toc\",        \"*.acn\",        \"*.acr\",        \"*.alg\",        \"*.glg\",        \"*.glo\",        \"*.gls\",        \"*.ist\",        \"*.fls\",        \"*.log\",        \"*.fdb_latexmk\",        \"*.nav\",        \"*.snm\",        \"*.synctex.gz\"      ],}è®¾ç½®ä»…é’ˆå¯¹ LaTeX çš„è‡ªåŠ¨æ¢è¡Œ{    \"latex-workshop.view.pdf.viewer\": \"tab\",    \"[latex]\": {      \"editor.wordWrap\": \"on\", // &lt;== auto wrap      \"editor.formatOnPaste\": false,      \"editor.suggestSelection\": \"recentlyUsedByPrefix\"    },}3.3. ç¼–è¯‘æµ‹è¯•å¿«æ·é”® ctrl+alt+B ç¼–è¯‘ .texæ–‡ä»¶ï¼Œå¿«æ·é”® ctrl+alt+v æˆ–è€…å³ä¸Šè§’çš„ã€ŒæŸ¥çœ‹pdfã€å›¾æ ‡æŸ¥çœ‹ .pdf æ–‡ä»¶ã€‚3.4. å¿«æ·é”®å¿«æ·é”®çš„æ›´æ”¹æ ¹æ®ä¸ªäººä¹ æƒ¯è€Œå®šã€‚æ‰“å¼€é”®ç›˜å¿«æ·æ–¹å¼é¢æ¿(å·¦ä¸‹ä¾§é½¿è½®ï¼Œæˆ–å¿«æ·é”®ctrl+k,ctrl+s)ï¼š      æœç´¢â€åˆ‡æ¢ä¾§æ å¯è§æ€§â€ï¼Œè®¾ç½®å¿«æ·é”®ä¸ºctrl+k ctrl+bã€‚        æœç´¢ latex buildï¼Œå°†é»˜è®¤çš„ctrl+alt+bæ›¿æ¢ä¸ºctrl+b(ä¸Sublime Text 3ç»Ÿä¸€)ã€‚        æœç´¢latex recipeï¼Œè®¾ç½®å¿«æ·é”®ä¸ºctlr+rï¼Œæ–¹ä¾¿ç‚¹èœ(é€‰æ‹©ç¼–è¯‘æ–¹å¼)ï¼(ST3ä¸­æ˜¯æ˜¾ç¤ºæ–‡æ¡£å¤§çº²)ã€‚        å…¶ä»–å¸¸ç”¨çš„å¿«æ·é”®ï¼š              ctrl+k ctrl+aï¼š åˆ‡æ¢æ´»åŠ¨æ å¯è§æ€§(å·¦ä¾§å›¾æ ‡å¼€å…³)      ctrl+alt+xï¼šæ˜¾ç¤ºLaTeXé¢æ¿(å·¦ä¾§ç¼–è¯‘å‘½ä»¤é¢æ¿å’Œæ–‡æ¡£å¤§çº²)ã€‚      ctrl+alt+cï¼šæ¸…é™¤è¾…åŠ©æ–‡ä»¶      ctrl+alt+vï¼šæŸ¥çœ‹ç¼–è¯‘çš„pdfæ–‡ä»¶(é¢„è§ˆ)      ctrl+alt+jï¼šæ­£å‘æœç´¢ã€‚å½“è®¾ç½®\"latex-workshop.view.pdf.viewer\": \"tab\";æ—¶ï¼Œåœ¨LaTeXæºæ–‡ä»¶ä¸­æŒ‰ä¸‹å¿«æ·é”®ï¼Œå®šä½åˆ°PDFæ–‡æ¡£ç›¸åº”ä½ç½®ã€‚(åå‘æœç´¢è§åé¢)      æ ¹æ® latex-workshop.latex.recipes ä¸­çš„nameæ®µè®¾å®šï¼Œå¯åœ¨ .tex æ–‡ä»¶é¦–è¡ŒæŒ‡å®šç¼–è¯‘æ–¹å¼ã€‚å¦‚ %!TEX program = xelatex è¡¨ç¤ºç”¨ xelatex ç¼–è¯‘æ–‡ä»¶ï¼Œè€Œ %!TEX program = PDFlatex è¡¨ç¤ºç”¨ latexpdf ç¼–è¯‘æ–‡ä»¶ã€‚å¤šä¸ªæ–‡ä»¶æƒ…å†µï¼Œè¿˜å¯ä»¥ç”¨ % !TEX root æŒ‡å®šä¸»æ–‡ä»¶ï¼Œ% !TEX bib æŒ‡å®š bib çš„ç¼–è¯‘æ–¹å¼ã€‚ç¤ºä¾‹%! TeX program = pdflatex\\documentclass{article}\\begin{document}    press ctrl+b to complieï¼Œpress ctrl+alt+v to view pdf\\end{document}3.5. å®‰è£…LTeXç”¨è¿‡ LaTeX çš„éƒ½çŸ¥é“ï¼Œå¯¹æ¯” Office å®¶æ—ï¼ŒLaTeX çš„è¯­è¨€çº é”™åŠŸèƒ½éå¸¸ä¸æ–¹ä¾¿ã€‚å› ä¸ºæœ¬èº«æ²¡è¿™åŠŸèƒ½ï¼Œéœ€è¦å€ŸåŠ©å¤–éƒ¨å·¥å…·æ‰èƒ½å®ç°ã€‚è¿™ä¸ªç¼ºç‚¹å¯¹äºæˆ‘ç­‰ã€Œå¤–è¯­æ¸£ã€æ˜¯éå¸¸è¦å‘½çš„ã€‚å½“ç„¶ï¼Œè§£å†³æ–¹æ³•ä¹Ÿä¸æ˜¯æ²¡æœ‰ã€‚å…¸å‹çš„ï¼Œå¦‚æœä½ ç”¨çš„æ˜¯ TeXstudio è¿™ä¸ªç¼–è¾‘å™¨ï¼Œå¯ä»¥é€šè¿‡å¤–æŒ‚ LanguageTool ï¼ˆç®€ç§°: LTï¼‰ è¿™ä¸ªæ£€æŸ¥å·¥å…·ï¼Œå®ç°æ‹¼å†™å’Œè¯­æ³•æ£€æŸ¥ã€‚å…·ä½“æ€ä¹ˆé…ç½®ï¼Œç½‘ä¸Šæœ‰å¾ˆå¤šæ•™ç¨‹ã€‚VS Code çš„æ’ä»¶å¸‚åœºå…¶å®æ˜¯æœ‰æä¾›ä¸€äº›æ’ä»¶ï¼Œ è®© Code èƒ½å¤Ÿè°ƒç”¨ LT è¿›è¡Œæ‹¼å†™æ£€æŸ¥ã€‚æ¯”å¦‚ ã€ŒLanguageTool for Visual Studio Codeã€å’Œ ã€ŒLanguageTool Linterã€ã€‚ ä½†æ˜¯é‚ªé—¨çš„æ˜¯â€”â€”ä»–ä»¬ç«Ÿç„¶åªæ”¯æŒçº¯æ–‡æœ¬ æˆ–è€… Markdown æ–‡ä»¶çš„æ‹¼å†™æ£€æŸ¥ï¼Œä¸æ”¯æŒ .tex æ–‡ä»¶! ä¸è¿‡å¹¸è¿å°±é™ä¸´åœ¨ä»Šå¤©ï¼Œåœ¨æµè§ˆæ‰©å±•æ—¶ï¼Œæ— æ„å‘ç°äº†ã€ŒLTeXã€ è¿™ä¸ªæ’ä»¶ï¼Œä¸‹è½½ä½¿ç”¨åç›´å‘¼å†…è¡Œï¼Œç›´æ¥åœ¨ VS Code æ’ä»¶å¸‚åœºæœç´¢å¹¶å®‰è£…ï¼Œç„¶åé‡å¯ VSCode åæ‰“å¼€ä»»æ„ .tex æ–‡æ¡£å³å¯å¼€å§‹è¿›è¡Œæ‹¼å†™ã€è¯­æ³•æ£€æŸ¥ï¼ˆä¸åŒ…æ‹¬ä¸­æ–‡ï¼‰ã€‚æœ‰äº›å“ç‰Œï¼Œç½‘ç»œè¯æ±‡ç­‰å¯èƒ½ä¼šè¢«è¯†åˆ«ä¸ºæ‹¼å†™é”™è¯¯ï¼Œå¯ä»¥æŠŠä»–ä»¬åŠ å…¥è¯å…¸é¿å…è¯¯åˆ¤ï¼š\"ltex.de.dictionary\": [Niubility, Zhihu], //æ³¨æ„æ ¹æ®è¦å¯¹åº”è¯­è¨€ï¼Œltex.&lt;LANGUAGE&gt;.dictionaryæœ‰äº›ç¯å¢ƒå†…çš„è¯­è¨€å¯èƒ½ä¸éœ€è¦æ£€æŸ¥ï¼Œæ¯”å¦‚ä»£ç å—é‡Œçš„ç¨‹åºä»£ç ï¼Œå¯ä»¥å‚ç…§å¦‚ä¸‹è®¾ç½®è¿‡æ»¤ï¼š\"ltex.environments.ignore\": [\"lstlisting\", \"verbatim], æœ‰äº›è‡ªå®šä¹‰å‘½ä»¤ä¹Ÿå¯ä»¥è®¾ç½®è¿‡æ»¤é¿å…æ£€æŸ¥\"ltex.commands.ignore\": [\"\\\\documentclass[]{}\", \"\\\\renewcommand*{}[]{}\"]å…¶ä»–è¯¸å¦‚ã€Œè‡ªå®šä¹‰è§„åˆ™ã€ï¼Œã€Œé”™è¯¯æé†’é£æ ¼ã€ç­‰çš„å¯ä»¥è‡ªå·±å‚ç…§è¯´æ˜è®¾ç½®ã€‚è¯­æ³•æ£€æŸ¥çš„æ•ˆæœå¦‚ä¸‹4. å‚è€ƒæ–‡çŒ®[1]  å½“å¹´è€ç‹. è®ºæ–‡å†™ä½œçš„åˆä¸€åˆ©å™¨ï¼šVSCode + Latex Workshop + MikTex + Git.[2]  strange_jiong. Latexç¼–è¯‘å‡ºç°å­—ä½“è·å–ä¸åˆ°çš„æƒ…å†µ.[3]  å¼€å¿ƒé²¨é±¼. é…ç½®VScodeç¼–è¾‘LaTeXåŠæ­£åå‘æœç´¢ç­‰è®¾ç½®.[4] LaTeXå·¥ä½œå®¤. LaTeXæŠ€å·§932ï¼šå¦‚ä½•é…ç½®Visual Studio Codeä½œä¸ºLaTeXç¼–è¾‘å™¨æ–°ç‰ˆæ›´æ–°."
  },
  
  {
    "title": "PythonåŸºç¡€ï¼ˆç»˜å›¾plotï¼‰",
    "url": "/posts/python-basic-plot/",
    "categories": "Tutorial, Coding",
    "tags": "python",
    "date": "2020-08-22 15:58:19 +0800",
    





    
    "snippet": "ç”±äºç§‘ç ”éœ€è¦ï¼Œæ—©å·²ä¸å¤å¹´è½»çš„æˆ‘åˆè¦ä»å¤´å¼€å§‹å­¦ä¹ ä¸€é—¨æ–°çš„è¯­è¨€â€”â€”Pythonã€‚ç”±äºè€å¹´ç—´å‘†æ„ˆå‘ä¸¥é‡ï¼Œåªå¾—å°†å„ç§å­¦ä¹ ç¬”è®°è®°å½•åœ¨æ­¤ã€‚æœ¬æ–‡ä¸»è¦é’ˆå¯¹Pythonä¸­ç”»å›¾éƒ¨åˆ†å±•å¼€ï¼ŒåŒ…æ‹¬plotã€subplotç­‰ã€‚  1. plot          1.1. é¢œè‰²æ§åˆ¶      1.2. çº¿å½¢æ§åˆ¶      1.3. ç‚¹å½¢æ§åˆ¶      1.4. å¦ä¸€ç§è®¾ç½®æ–¹æ³•        2. subplot    ...",
    "content": "ç”±äºç§‘ç ”éœ€è¦ï¼Œæ—©å·²ä¸å¤å¹´è½»çš„æˆ‘åˆè¦ä»å¤´å¼€å§‹å­¦ä¹ ä¸€é—¨æ–°çš„è¯­è¨€â€”â€”Pythonã€‚ç”±äºè€å¹´ç—´å‘†æ„ˆå‘ä¸¥é‡ï¼Œåªå¾—å°†å„ç§å­¦ä¹ ç¬”è®°è®°å½•åœ¨æ­¤ã€‚æœ¬æ–‡ä¸»è¦é’ˆå¯¹Pythonä¸­ç”»å›¾éƒ¨åˆ†å±•å¼€ï¼ŒåŒ…æ‹¬plotã€subplotç­‰ã€‚  1. plot          1.1. é¢œè‰²æ§åˆ¶      1.2. çº¿å½¢æ§åˆ¶      1.3. ç‚¹å½¢æ§åˆ¶      1.4. å¦ä¸€ç§è®¾ç½®æ–¹æ³•        2. subplot          2.1. è§„åˆ™åˆ’åˆ†      2.2. ä¸è§„åˆ™åˆ’åˆ†      2.3. äºŒç»´ä¸‰ç»´æ··åˆå­å›¾      2.4. å¤šå›¾åˆ·æ–°        3. å›¾ä¸­å›¾  4. æ¸…ç†ç»˜å›¾  5. å‚è€ƒæ–‡çŒ®1. plotplot ç”¨ä»¥å±•ç¤ºå˜é‡çš„è¶‹åŠ¿å˜åŒ–ã€‚plot() å‡½æ•°çš„æœ¬è´¨å°±æ˜¯æ ¹æ®ç‚¹è¿æ¥çº¿ã€‚æ ¹æ®x(æ•°ç»„æˆ–è€…åˆ—è¡¨) å’Œy(æ•°ç»„æˆ–è€…åˆ—è¡¨)ç»„æˆç‚¹ï¼Œç„¶åè¿æ¥æˆçº¿ã€‚ç®€å•ç¤ºä¾‹å¦‚ä¸‹import matplotlib.pyplot as pltimport numpy as npx = np.linspace(0.05, 10, 1000)y = np.cos(x)plt.plot(x, y, ls=\"-\", lw=2, label=\"plot figure\")plt.legend()plt.show()1.1. é¢œè‰²æ§åˆ¶è¦æƒ³ä½¿ç”¨ä¸°å¯Œï¼Œç‚«é…·çš„å›¾æ ‡ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ›´å¤æ‚çš„æ ¼å¼è®¾ç½®ï¼Œä¸»è¦é¢œè‰²ï¼Œçº¿çš„æ ·å¼ï¼Œç‚¹çš„æ ·å¼ã€‚é»˜è®¤çš„æƒ…å†µä¸‹ï¼Œåªæœ‰ä¸€æ¡çº¿ï¼Œæ˜¯è“è‰²å®çº¿ã€‚å¤šæ¡çº¿çš„æƒ…å†µä¸‹ï¼Œç”Ÿæˆä¸åŒé¢œè‰²çš„å®çº¿ã€‚            å­—ç¬¦      é¢œè‰²                  â€˜bâ€™      blue              â€˜gâ€™      green              â€˜râ€™      red              â€˜câ€™      cyan é’è‰²              â€˜mâ€™      magentaå¹³çº¢              â€˜yâ€™      yellow              â€˜kâ€™      black              â€˜wâ€™      white      1.2. çº¿å½¢æ§åˆ¶            å­—ç¬¦      ç±»å‹                  â€™-â€˜      å®çº¿              â€™â€“â€™      è™šçº¿              â€™-.â€™      è™šç‚¹çº¿              â€™:â€™      ç‚¹çº¿              â€™ â€˜      ç©ºç±»å‹ï¼Œä¸æ˜¾ç¤ºçº¿      ä¾‹å¦‚import matplotlib.pyplot as pltx = [1, 2, 3, 4]y1 = [1, 2, 3, 4]y2 = [1, 4, 9, 16]y3 = [1, 8, 27, 64]y4 = [1, 16, 81, 124]# åˆ›å»ºä¸€ä¸ªç”»å¸ƒplt.figure()# åœ¨figureä¸‹çº¿plt.plot(x, y1, \"-o\") #å®çº¿plt.plot(x, y2, \"--o\") #è™šçº¿plt.plot(x, y3, \"-.o\") #è™šç‚¹çº¿plt.plot(x, y4, \":o\") # ç‚¹çº¿# å±•ç°ç”»å¸ƒplt.show()ç»˜åˆ¶æ•ˆæœä¸º1.3. ç‚¹å½¢æ§åˆ¶            ç‚¹å‹      ç±»å‹                  â€™.â€™      ç‚¹              â€™,â€™      åƒç´ ç‚¹              â€˜oâ€™      åŸç‚¹              â€™^â€™      ä¸Šä¸‰è§’ç‚¹              â€˜vâ€™      ä¸‹ä¸‰è§’ç‚¹              â€™&lt;â€™      å·¦ä¸‰è§’ç‚¹              â€™&gt;â€™      å³ä¸‰è§’ç‚¹              â€˜1â€™      ä¸‹ä¸‰å‰ç‚¹              â€˜2â€™      ä¸Šä¸‰å‰ç‚¹              â€˜3â€™      å·¦ä¸‰å‰ç‚¹              â€˜4â€™      å³ä¸‰å‰ç‚¹              â€™sâ€™      æ­£æ–¹ç‚¹              â€™+â€™      åŠ å·ç‚¹              â€˜xâ€™      ä¹˜å·ç‚¹              â€˜Dâ€™      å®å¿ƒè±å½¢ç‚¹              â€˜dâ€™      ç»†è±å½¢ç‚¹      ç¤ºä¾‹import matplotlib.pyplot as pltx = [1, 2, 3, 4]y1 = [1, 2, 3, 4]y2 = [1, 4, 9, 16]y3 = [1, 8, 27, 64]y4 = [1, 16, 81, 124]# åˆ›å»ºä¸€ä¸ªç”»å¸ƒplt.figure()# åœ¨figureä¸‹çš„çº¿plt.plot(x, y1, \"-.\") # ç‚¹plt.plot(x, y2, \"-,\") # åƒç´ ç‚¹plt.plot(x, y3, \"-o\") # åœ†ç‚¹# å±•ç°ç”»å¸ƒplt.show()ç»˜åˆ¶æ•ˆæœä¸º1.4. å¦ä¸€ç§è®¾ç½®æ–¹æ³•color=â€greenâ€ æŒ‡å®šé¢œè‰²ä¸ºç»¿è‰²linestyle=â€dashedâ€ æŒ‡å®šçº¿å½¢ä¸ºdashedç±»å‹marker=â€oâ€ æŒ‡å®šæ ‡è®°ç±»å‹ä¸ºoç‚¹markerfacecolor=â€blueâ€æŒ‡å®šæ ‡è®°çš„é¢œè‰²ä¸ºè“è‰²markersize=20 æŒ‡å®šæ ‡è®°çš„å¤§å°ä¸º20æ¯”å¦‚import matplotlib.pyplot as pltimport numpy as npx = np.arange(10)y1 = x * 1.5y2 = x * 2.5y3 = x * 3.5y4 = x * 4.5y5 = x * 5.5plt.plot(x, y1, \"-P\")plt.plot(x, y2, \"-|\")plt.plot(x, y3, color=\"#000000\")plt.plot(x, y4, \"-o\", markersize=20)plt.plot(x, y5, \"-^\", markerfacecolor=\"blue\")plt.show()2. subplotæœ‰äº›æ—¶å€™, æˆ‘ä»¬å¸Œæœ›æŠŠä¸€ç»„å›¾æ”¾åœ¨ä¸€èµ·è¿›è¡Œæ¯”è¾ƒ, æœ‰æ²¡æœ‰ä»€ä¹ˆå¥½çš„æ–¹æ³•å‘¢ï¼Ÿmatplotlib ä¸­æä¾›çš„ subplot å¯ä»¥å¾ˆå¥½çš„è§£å†³è¿™ä¸ªé—®é¢˜ã€‚matplotlib ä¸‹, ä¸€ä¸ª Figure å¯¹è±¡å¯ä»¥åŒ…å«å¤šä¸ªå­å›¾(Axes), å¯ä»¥ä½¿ç”¨ subplot() å¿«é€Ÿç»˜åˆ¶, å…¶è°ƒç”¨å½¢å¼å¦‚ä¸‹ :subplot(numRows, numCols, plotNum)  å›¾è¡¨çš„æ•´ä¸ªç»˜å›¾åŒºåŸŸè¢«åˆ†æˆ numRows è¡Œå’Œ numCols åˆ—ï¼›  ç„¶åæŒ‰ç…§ä»å·¦åˆ°å³ï¼Œä»ä¸Šåˆ°ä¸‹çš„é¡ºåºå¯¹æ¯ä¸ªå­åŒºåŸŸè¿›è¡Œç¼–å·ï¼Œå·¦ä¸Šçš„å­åŒºåŸŸçš„ç¼–å·ä¸º1ï¼›  plotNum å‚æ•°æŒ‡å®šåˆ›å»ºçš„ Axes å¯¹è±¡æ‰€åœ¨çš„åŒºåŸŸï¼›  å¦‚æœ numRows, numCols å’Œ plotNum è¿™ä¸‰ä¸ªæ•°éƒ½å°äº 10 çš„è¯, å¯ä»¥æŠŠå®ƒä»¬ç¼©å†™ä¸ºä¸€ä¸ªæ•´æ•°, ä¾‹å¦‚ subplot(323) å’Œ subplot(3,2,3) æ˜¯ç›¸åŒçš„ï¼ˆç¼©å†™ä¾¿äºå¾ªç¯ï¼‰ï¼›  subplotåœ¨ plotNum æŒ‡å®šçš„åŒºåŸŸä¸­åˆ›å»ºä¸€ä¸ªè½´å¯¹è±¡. å¦‚æœæ–°åˆ›å»ºçš„è½´å’Œä¹‹å‰åˆ›å»ºçš„è½´é‡å çš„è¯ï¼Œä¹‹å‰çš„è½´å°†è¢«åˆ é™¤ã€‚2.1. è§„åˆ™åˆ’åˆ†ç¤ºä¾‹import matplotlibimport matplotlib.pyplot as pltfor i,color in enumerate(\"rgby\"):    plt.subplot(221+i, axisbg=color) # 221 = 2,2,1plt.show()ç»˜åˆ¶ç»“æœä¸º2.2. ä¸è§„åˆ™åˆ’åˆ†æœ‰æ—¶å€™æˆ‘ä»¬çš„åˆ’åˆ†å¹¶ä¸æ˜¯è§„åˆ™çš„, æ¯”å¦‚å¦‚ä¸‹çš„å½¢å¼è¿™ç§åº”è¯¥æ€ä¹ˆåˆ’åˆ†å‘¢?é¦–å…ˆå°†æ•´ä¸ªè¡¨æŒ‰ç…§ 2*2 åˆ’åˆ†ï¼Œå‰ä¸¤ä¸ªç®€å•, åˆ†åˆ«æ˜¯ (2, 2, 1) å’Œ (2, 2, 2)ï¼›ä½†æ˜¯ç¬¬ä¸‰ä¸ªå›¾å‘¢, ä»–å ç”¨äº† (2, 2, 3) å’Œ (2, 2, 4)ï¼›å› æ­¤ï¼Œéœ€è¦å¯¹æ•´ä¸ªå›¾é‡æ–°åˆ’åˆ†, æŒ‰ç…§ 2 * 1 åˆ’åˆ†ï¼›å‰ä¸¤ä¸ªå›¾å ç”¨äº† (2, 1, 1) çš„ä½ç½®ï¼Œå› æ­¤ç¬¬ä¸‰ä¸ªå›¾å ç”¨äº† (2, 1, 2) çš„ä½ç½®ã€‚ä»£ç å¦‚ä¸‹import matplotlib.pyplot as pltimport numpy as npdef f(t):    return np.exp(-t) * np.cos(2 * np.pi * t)if __name__ == '__main__' :    t1 = np.arange(0, 5, 0.1)    t2 = np.arange(0, 5, 0.02)    plt.figure(12)    plt.subplot(221)    plt.plot(t1, f(t1), 'bo', t2, f(t2), 'r--')    plt.subplot(222)    plt.plot(t2, np.cos(2 * np.pi * t2), 'r--')    plt.subplot(212)    plt.plot([1, 2, 3, 4], [1, 4, 9, 16])    plt.show()2.3. äºŒç»´ä¸‰ç»´æ··åˆå­å›¾import matplotlib.pyplot as pltfig = plt.figure(1)ax1 = fig.add_subplot(2, 2, 1)ax2 = fig.add_subplot(2, 2, 2)ax3 = fig.add_subplot(2, 2, 3)ax4 = fig.add_subplot(2, 2, 4, projection='3d')for i in range(100):  ax1.set_title('x-axis')  ax1.plot(ind, pred_x, label=\"prediction\", color=(i,0,1))  ax1.plot(ind, outputs_x, label=\"true\", color=(0,1,0))  ax1.legend(loc=\"lower right\")  ......  fig = plt.figure(1) # re-assign to figure 1 to refresh it  plt.pause(0.01) # leave some time for plotting finished  plt.show(block=False) # plot without blocking runningå¯ä»¥ç»˜åˆ¶ä¸¤è¡Œé‡åˆ—çš„å­å›¾ï¼Œå…¶ä¸­å³ä¸‹è§’ç¬¬å››ä¸ªå›¾æ˜¯ä¸‰ç»´å›¾ã€‚æ³¨æ„ä¸è¦å°†ä¸Šè¿°ä»£ç ç½®äºå¾ªç¯ä¸­ï¼Œå¦åˆ™ä¼šå‡ºç°DuplicateWarningã€‚å¤šæ¬¡ç»˜åˆ¶åœ¨åŒä¸€ä¸ªfigureä¸­çš„æ•ˆæœå¦‚ä¸‹ï¼š2.4. å¤šå›¾åˆ·æ–°æ³¨æ„ï¼Œå¦‚æœæœ‰å¤šå¼ å›¾éœ€è¦åŒæ—¶åˆ·æ–°ï¼Œéœ€è¦æŒ‰ç…§å¦‚ä¸‹çš„è®¾è®¡æ€è·¯ä¹¦å†™ä»£ç import matplotlib.pyplot as pltfig = plt.figure(1) # åœ¨å¾ªç¯å¤–å®šä¹‰åŒ…å«å¤šä¸ªsubplotçš„figure 1ax1 = fig.add_subplot(2, 2, 1)ax2 = fig.add_subplot(2, 2, 2)ax3 = fig.add_subplot(2, 2, 3)ax4 = fig.add_subplot(2, 2, 4, projection='3d')for i in range(100):  ......[other codes]  ax1.cla() # æ¸…ç©ºå½“å‰è½´  ax2.cla()  ax3.cla()  ax4.cla()  plt.pause(0.01)  ax1.set_title('x-axis')  ax1.plot(ind, pred_x, label=\"prediction\", color=(i,0,1))  ax1.plot(ind, outputs_x, label=\"true\", color=(0,1,0))  ax1.legend(loc=\"lower right\")  ......[other codes]  fig = plt.figure(1) # é‡æ–°æŒ‡å®šfigçš„å¯¹è±¡ä¸ºfigure 1  plt.pause(0.01) # å¿…é¡»æš‚åœçŸ­æš‚çš„æ—¶é—´ä»¥ä¾›ç»˜å›¾å®Œæˆè€Œä¸å‡ºç°ç™½æ¿  plt.show(block=False) # åˆ·æ–°figure 1ï¼Œä¸”ä¸é˜»å¡    figloss = plt.figure(2) # æŒ‡å®šfigçš„å¯¹è±¡ä¸ºfigure 2  plt.cla() # æ¸…ç©ºå½“å‰è½´  plt.pause(0.01)  plt.plot(iterNum, avgloss, '-o')  plt.xlabel('iterations',fontsize=10)  plt.ylabel('MSE',fontsize=10)  plt.pause(0.01)  plt.show(block=False) # åˆ·æ–°figure 2ï¼Œä¸”ä¸é˜»å¡          åœ¨å¾ªç¯å¤–å®šä¹‰åŒ…å«å¤šä¸ªsubplotçš„figure 1ï¼Œé¿å…å¾ªç¯å†…å®šä¹‰æŠ¥DuplicatedWarningï¼›  å•å¼ å›¾å¯åœ¨å¾ªç¯å†…ç›´æ¥å®šä¹‰å’Œç»˜åˆ¶ï¼ˆå¦‚figure 2ï¼‰ï¼›  å¾ªç¯å†…æ¯æ¬¡é‡æ–°ç»˜åˆ¶æ—¶ï¼Œéœ€é€šè¿‡ fig = figure(x) æŒ‡å®šç›¸åº”çš„ç¬¬xä¸ªå›¾æ‰èƒ½æ­£ç¡®åˆ·æ–°ã€‚3. å›¾ä¸­å›¾ä»£ç å¦‚ä¸‹import numpy as npimport matplotlib.pyplot as pltfig = plt.figure(1)plt.plot(listiter_meta, ground_truth, '-.', label='ground truth', color=\"black\")plt.plot(listiter_meta, pretrained, '--', label='pretrained', color=\"green\")plt.plot(listiter_meta, meta, '-', label='meta learned (ours)', color=\"red\")plt.xlim(0,100)plt.xlabel(\"iteration\")plt.ylabel(\"mse\")plt.legend(loc=\"upper right\")left, bottom, width, height = 0.5,0.3,0.4,0.2ax1 = fig.add_axes([left,bottom,width,height])ax1.plot(listiter_meta, ground_truth, '-.', color=\"black\")ax1.plot(listiter_meta, pretrained, '--', color=\"green\")ax1.plot(listiter_meta, meta, '-', color=\"red\")ax1.set_xlabel(\"iteration\")ax1.set_ylabel(\"mse\")ax1.set_title('zoom-in')ax1.set_ylim(0,0.2)plt.savefig('msecompare.png')plt.show(block=False)ç»“æœå¦‚ä¸‹å›¾æ‰€ç¤º4. æ¸…ç†ç»˜å›¾cla() å‡½æ•°å¯ä»¥æ¸…é™¤å½“å‰figureä¸­æ´»åŠ¨çš„axesï¼Œå…¶å®ƒaxesä¿æŒä¸å˜ã€‚clf() å‡½æ•°æ¸…é™¤å½“å‰figureçš„æ‰€æœ‰axesï¼Œä½†æ˜¯ä¸å…³é—­è¿™ä¸ªwindowï¼Œå¯ä»¥ç»§ç»­å¤ç”¨äºå…¶å®ƒçš„plotã€‚close() å…³é—­ windowï¼Œå¦‚æœæ²¡æœ‰æŒ‡å®šï¼Œåˆ™æŒ‡å½“å‰ windowã€‚5. å‚è€ƒæ–‡çŒ®[1] æ¢¦å¹¶ä¸é¥è¿œ. 4.3Pythonæ•°æ®å¤„ç†ç¯‡ä¹‹Matplotlibç³»åˆ—(ä¸‰)â€”plt.plot().[2] æˆ‘çš„æ˜å¤©ä¸æ˜¯æ¢¦. pythonä½¿ç”¨matplotlib:subplotç»˜åˆ¶å¤šä¸ªå­å›¾."
  },
  
  {
    "title": "PythonåŸºç¡€ï¼ˆæ•°æ®ç»“æ„ï¼‰",
    "url": "/posts/python-basic-data-type/",
    "categories": "Tutorial, Coding",
    "tags": "python",
    "date": "2020-08-15 21:17:19 +0800",
    





    
    "snippet": "æœ¬æ–‡ä¸»è¦é’ˆå¯¹Pythonä¸­æ•°æ®ç±»å‹å’Œæ•°æ®å¤„ç†æ–¹å¼çš„ä»‹ç»ï¼ŒåŒ…æ‹¬matã€listã€ndarrayç­‰ã€‚  1. mat          1.1. MATLABä¿å­˜matæ–‡ä»¶      1.2. Pythonè¯»å–matæ–‡ä»¶        2. list          2.1. å¤åˆ¶      2.2. åˆå¹¶      2.3. æ’å…¥æ–°å…ƒç´       2.4. è·å–åˆ—è¡¨ä¸­çš„å€¼        3....",
    "content": "æœ¬æ–‡ä¸»è¦é’ˆå¯¹Pythonä¸­æ•°æ®ç±»å‹å’Œæ•°æ®å¤„ç†æ–¹å¼çš„ä»‹ç»ï¼ŒåŒ…æ‹¬matã€listã€ndarrayç­‰ã€‚  1. mat          1.1. MATLABä¿å­˜matæ–‡ä»¶      1.2. Pythonè¯»å–matæ–‡ä»¶        2. list          2.1. å¤åˆ¶      2.2. åˆå¹¶      2.3. æ’å…¥æ–°å…ƒç´       2.4. è·å–åˆ—è¡¨ä¸­çš„å€¼        3. tuple  4. ndarray          4.1. æ¦‚å¿µ      4.2. æ•°ç»„å±æ€§      4.3. åˆ›å»ºæ•°ç»„      4.4. æ•°ç»„æ‹¼æ¥      4.5. listå’Œarrayçš„åŒºåˆ«        5. dict          5.1. å®šä¹‰ï¼Œæ›´æ–°å’Œæ·»åŠ       5.2. å†…ç½®å‡½æ•°      5.3. å†…ç½®æ–¹æ³•      5.4. ç‰¹æ€§      5.5. OrderedDict        6. å‚è€ƒæ–‡çŒ®1. mat1.1. MATLABä¿å­˜matæ–‡ä»¶å¦‚ä¸‹ä¾‹å­æ‰€ç¤ºclearclcmaindir = 'Results';subdir  = dir( maindir );j = 1;for ii = 1 : length( subdir )    if( isequal( subdir( ii ).name, '.' )||...        isequal( subdir( ii ).name, '..')||...        ~subdir( ii ).isdir) % skip if not dir        continue;    end        matfile = fullfile( maindir, subdir( ii ).name, 'Result.mat' );    condition = split(subdir( ii ).name, '_');    load(matfile)    dataCell{j,1} = condition(2);    dataCell{j,2} = condition(3);    dataCell{j,3} = DesireStatus;    dataCell{j,4} = DesireControl;    j = j + 1;endsave('MixResults.mat','dataCell');æœ€ç»ˆä¿å­˜çš„æ–‡ä»¶å½¢å¼å¦‚å›¾æ‰€ç¤º1.2. Pythonè¯»å–matæ–‡ä»¶import scipy.io as sioimport numpy as npload_path = 'MixResults.mat'load_data = sio.loadmat(load_path)æ­¤å¤„å¾—åˆ°çš„ load_data æ˜¯å¦‚ä¸‹å½¢å¼çš„å€¼{'__globals__': [],'__header__': b'MATLAB 5.0 MAT-file,...00:47 2020','__version__': '1.0','dataCell': array([[array([[arra...pe=object)}å…¶ä¸­ï¼Œscipyè¯»å…¥çš„matæ–‡ä»¶æ˜¯ä¸ªdictç±»å‹ï¼Œä¼šæœ‰å¾ˆå¤šä¸ç›¸å…³çš„keysï¼Œä¸€èˆ¬è¾“å‡ºå››ç§keysï¼š__globals__ï¼Œ__header__ï¼Œ__version__ï¼Œdataã€‚å…¶ä¸­æœ€åä¸€ä¸ªdataæ‰æ˜¯æˆ‘ä»¬è¦çš„æ•°æ®ã€‚æœ¬ä¾‹ä¸­ï¼Œæ•°æ®ä¸º dataCell ï¼Œå†…å®¹ä¸ºarray([[array([[array(['wty0.0'], dtype='&lt;U6')]], dtype=object),        array([[array(['-30deg'], dtype='&lt;U6')]], dtype=object),        array([[ 0.00000000e+00, -8.66025400e+00,  0.00000000e+00, ...,         0.00000000e+00,  0.00000000e+00,  0.00000000e+00],       [ 1.31815433e-01, -8.66003375e+00,  3.20285361e-12, ...,        -6.21551560e-19,  0.00000000e+00,  0.00000000e+00],       [ 2.63630865e-01, -8.65933419e+00,  1.29989166e-11, ...,        -3.17675810e-19,  0.00000000e+00,  0.00000000e+00],       ...,       [ 4.58717705e+01, -2.75108745e+00,  2.14124086e-11, ...,         2.86948290e-17, -5.53482295e-17,  5.27271879e-15],       [ 4.60035859e+01, -2.75027966e+00, -4.46901743e-12, ...,         1.32056047e-17, -4.37313113e-17, -2.42826591e-16],       [ 4.61354014e+01, -2.75000000e+00,  2.89500769e-27, ...,        -2.77555756e-17, -1.30104261e-17, -1.48286602e-14]]),        array([[ 0.00000000e+00,  2.40730441e+00,  6.83370983e-08, ...,         2.87639504e+00, -3.90482776e-07,  2.65632451e-01],       [ 1.31815433e-01,  2.77247364e+00,  2.88899127e-04, ...,         1.27018538e+00, -2.19925908e-07,  1.26745599e-01],       [ 2.63630865e-01,  3.06865475e+00,  1.11303404e-03, ...,         6.74119805e-02, -9.25865826e-08,  2.27535649e-02],       ...,       [ 4.58717705e+01, -3.25427728e+00,  5.09348887e-03, ...,         2.01213062e-02,  1.28660157e-03,  2.75940695e+00],       [ 4.60035859e+01, -3.15266928e+00,  1.21336612e-03, ...,         1.97145055e-02,  1.30781251e-03,  3.95909773e+00],       [ 4.61354014e+01, -3.04097330e+00,  1.01612056e-07, ...,         1.87656241e-02,  1.31095528e-03,  5.18427291e+00]])],       ...,       dtype=object)å¯ä»¥æŒ‰ç…§å¦‚ä¸‹æ–¹å¼æ‹¼å‘½å–å‡º dataCell ä¸­çš„å„ä¸ªå…ƒç´ &gt;&gt;&gt; targetw = []&gt;&gt;&gt; targetw.append(load_data['dataCell'][i][0][0][0][0]) # wty'wty0.0'&gt;&gt;&gt; position = []&gt;&gt;&gt; position.append(load_data['dataCell'][i][1][0][0][0]) # deg'-30deg'&gt;&gt;&gt; trajectory = np.zeros((tnum,1))&gt;&gt;&gt; trajectory = load_data['dataCell'][i][2]&gt;&gt;&gt; control = np.zeros((tnum,1))&gt;&gt;&gt; control = load_data['dataCell'][i][3]å¾—åˆ°çš„æ•°æ®ä¸º ndarray ï¼Œæ•°æ®ç»“æ„ä¸ºå–å‡ºå…¶ä¸­ wty çš„æ•°å€¼ï¼Œå¯ä»¥å€ŸåŠ© strip ç æ‰ â€œwtyâ€ ä¸‰ä¸ªå­—ç¬¦ã€‚æ³¨æ„ strip è¿”å›çš„æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œéœ€è¦é€šè¿‡å¼ºåˆ¶æ ¼å¼è½¬æ¢è½¬ä¸ºæ•°å­—wt = wty.strip('wty') # 0.0wt = float(wt)æå– trajectory ä¸­çš„ç¬¬ä¸€è¡Œæ•°æ®ï¼Œæœ€åä¸€è¡Œæ•°æ®ï¼Œä»¥åŠ wtï¼Œåˆå¹¶åå½¢æˆä¸€ä¸ªæ–°çš„å‘é‡ï¼Œå€ŸåŠ© np.hstack å®ç°ï¼štrow = trajectory.shape[0]vec = np.hstack((trajectory[0,1:4],trajectory[trow-1,1:4],wt))# trajectory: t, rx, ry, rz, vx, ...; [1:4] is rx ry and rz2. liståˆ—è¡¨ï¼ˆlistï¼‰æ˜¯ç”¨æ¥å­˜å‚¨ä¸€ç»„æœ‰åºæ•°æ®å…ƒç´ çš„æ•°æ®ç»“æ„ï¼Œå…ƒç´ ä¹‹é—´ç”¨é€—å·åˆ†éš”ã€‚åˆ—è¡¨ä¸­çš„æ•°æ®å…ƒç´ åº”è¯¥åŒ…æ‹¬åœ¨æ–¹æ‹¬å·ä¸­ï¼Œè€Œä¸”åˆ—è¡¨æ˜¯å¯å˜çš„æ•°æ®ç±»å‹ï¼Œä¸€æ—¦åˆ›å»ºäº†ä¸€ä¸ªåˆ—è¡¨ï¼Œä½ å¯ä»¥æ·»åŠ ã€åˆ é™¤æˆ–è€…æœç´¢åˆ—è¡¨ä¸­çš„å…ƒç´ ã€‚åœ¨æ–¹æ‹¬å·ä¸­çš„æ•°æ®å¯ä»¥æ˜¯ int å‹ï¼Œä¹Ÿå¯ä»¥æ˜¯ str å‹ã€‚æ–°å»ºä¸€ä¸ªç©ºåˆ—è¡¨A = []å½“æ–¹æ‹¬å·ä¸­çš„æ•°æ®å…ƒç´ å…¨éƒ¨ä¸ºintç±»å‹æ—¶ï¼Œè¿™ä¸ªåˆ—è¡¨å°±æ˜¯intç±»å‹çš„åˆ—è¡¨ã€‚strç±»å‹å’Œæ··åˆç±»å‹çš„åˆ—è¡¨ç±»ä¼¼A = [1,2,3]A = [\"a\",'b','c'] # å•å¼•å·å’ŒåŒå¼•å·éƒ½è®¤A = [1,\"b\",3]2.1. å¤åˆ¶åˆ—è¡¨çš„å¤åˆ¶å’Œå­—ç¬¦ä¸²çš„å¤åˆ¶ç±»ä¼¼ï¼Œä¹Ÿæ˜¯åˆ©ç”¨ * æ“ä½œç¬¦A = [1,2,3]A*2 # A = [1,2,3,1,2,3]2.2. åˆå¹¶åˆ—è¡¨çš„åˆå¹¶å°±æ˜¯å°†ä¸¤ä¸ªç°æœ‰çš„liståˆå¹¶åœ¨ä¸€èµ·ï¼Œä¸»è¦æœ‰ä¸¤ç§å®ç°æ–¹å¼ï¼Œä¸€ç§æ˜¯åˆ©ç”¨+æ“ä½œç¬¦ï¼Œå®ƒå’Œå­—ç¬¦ä¸²çš„è¿æ¥ä¸€è‡´ï¼›å¦å¤–ä¸€ç§ç”¨çš„æ˜¯extend()å‡½æ•°ã€‚ç›´æ¥å°†ä¸¤ä¸ªåˆ—è¡¨ç”¨+æ“ä½œç¬¦è¿æ¥å³å¯è¾¾åˆ°åˆå¹¶çš„ç›®çš„ï¼Œåˆ—è¡¨çš„åˆå¹¶æ˜¯æœ‰å…ˆåé¡ºåºçš„ã€‚a = [1,2]b = ['a','b']m = [\"c\",\"c\"]c=a+b+m # c = [1,2,'a','b','c','c']d=b+a+m # d = ['a','b',1,2,'c','c']å°†åˆ—è¡¨båˆå¹¶åˆ°åˆ—è¡¨aä¸­ï¼Œç”¨åˆ°çš„æ–¹æ³•æ˜¯a.extend(b)ï¼Œå°†åˆ—è¡¨aåˆå¹¶åˆ°åˆ—è¡¨bä¸­ï¼Œç”¨åˆ°çš„æ–¹æ³•æ˜¯b.extend(a)ã€‚2.3. æ’å…¥æ–°å…ƒç´ å‘åˆ—è¡¨ä¸­æ’å…¥æ–°å…ƒç´ ã€‚åˆ—è¡¨æ˜¯å¯å˜çš„ï¼Œä¹Ÿå°±æ˜¯å½“æ–°å»ºä¸€ä¸ªåˆ—è¡¨åä½ è¿˜å¯ä»¥å¯¹è¿™ä¸ªåˆ—è¡¨è¿›è¡Œæ“ä½œï¼Œå¯¹åˆ—è¡¨è¿›è¡Œæ’å…¥æ•°æ®å…ƒç´ çš„æ“ä½œä¸»è¦æœ‰ append() å’Œ insert() ä¸¤ä¸ªå‡½æ•°å¯ç”¨ã€‚è¿™ä¸¤ä¸ªå‡½æ•°éƒ½ä¼šç›´æ¥æ”¹å˜åŸåˆ—è¡¨ï¼Œä¸ä¼šç›´æ¥è¾“å‡ºç»“æœï¼Œéœ€è¦è°ƒç”¨åŸåˆ—è¡¨çš„åˆ—è¡¨åæ¥è·å–æ’å…¥æ–°å…ƒç´ ä»¥åçš„åˆ—è¡¨ã€‚å‡½æ•° append() æ˜¯åœ¨åˆ—è¡¨æœ«å°¾æ’å…¥æ–°çš„æ•°æ®å…ƒç´ ï¼Œå¦‚ä¸‹ï¼ša = [1,2]a.append(3) # a = [1,2,3]å‡½æ•° insert() æ˜¯åœ¨åˆ—è¡¨æŒ‡å®šä½ç½®æ’å…¥æ–°çš„æ•°æ®å…ƒç´ ï¼Œå¦‚ä¸‹ï¼ša = [1,2,3]a.insert(3,4) # a = [1,2,3,4]ï¼Œåœ¨åˆ—è¡¨ç¬¬å››ä½ï¼ˆä»0å¼€å§‹ç®—èµ·ï¼‰æ’å…¥4a = [1,2]a.insert(2,4) # a = [1,2,4,3]ï¼Œåœ¨åˆ—è¡¨ç¬¬ä¸‰ä½ï¼ˆä»0å¼€å§‹ç®—èµ·ï¼‰æ’å…¥42.4. è·å–åˆ—è¡¨ä¸­çš„å€¼è·å–æŒ‡å®šä½ç½®çš„å€¼åˆ©ç”¨çš„æ–¹æ³•å’Œå­—ç¬¦ä¸²ç´¢å¼•æ˜¯ä¸€è‡´çš„ï¼Œä¸»è¦æ˜¯æœ‰æ™®é€šç´¢å¼•å’Œåˆ‡ç‰‡ç´¢å¼•ä¸¤ç§ã€‚  æ™®é€šç´¢å¼•ï¼šæ™®é€šç´¢å¼•æ˜¯æ´»æœŸæŸä¸€ç‰¹å®šä½ç½®çš„æ•°ï¼Œå¦‚ä¸‹ï¼š&gt;&gt;&gt; a = [1,2,3]&gt;&gt;&gt; a[0] # è·å–ç¬¬ä¸€ä½æ•°æ®1&gt;&gt;&gt; a[2]3  åˆ‡ç‰‡ç´¢å¼•ï¼šåˆ‡ç‰‡ç´¢å¼•æ˜¯è·å–æŸä¸€ä½ç½®åŒºé—´å†…çš„æ•°ï¼Œå¦‚ä¸‹ï¼š&gt;&gt;&gt; a = [1,2,3,4,5]&gt;&gt;&gt; a[1:3] # è·å–ç¬¬2ä½åˆ°ç¬¬4ä½çš„æ•°æ®ï¼Œä¸åŒ…å«ç¬¬4ä½[2,3]å‡è®¾ a = [1,2,3,4,5,6,7,8,9]ï¼Œå¯¹åº”çš„æ ‡å·ä¸º [0,1,2,3,4,5,6,7,8]ï¼›print a[1:2:3] è¾“å‡ºä¸º2 ï¼Œä»ä¸‹æ ‡è¡¨ä¸º1çš„åœ°æ–¹å¼€å§‹åˆ°å°äºä¸‹æ ‡ä¸º2çš„ä½ç½®ï¼Œå…¶ä¸­3ä¸ºæ­¥é•¿ï¼›print a[1:4:1] è¾“å‡ºä¸º2ï¼Œ3ï¼Œ4,ä»¥ä¸Šé¢ç±»ä¼¼ï¼Œåªæ˜¯æ­¥é•¿ä¸º1äº†ï¼›print a[1::1] è¾“å‡ºä¸º2ï¼Œ3ï¼Œ4ï¼Œ5ï¼Œ6ï¼Œ7ï¼Œ8ï¼Œ9ã€‚ä¸­é—´ä¸ºç©ºè¡¨ç¤ºé»˜è®¤ï¼Œåˆ™ä»å°æ ‡ä¸º1åˆ°æœ€åï¼›print a[-1:-4:-1] åå‘ç´¢å¼•ï¼Œä»æœ€åä¸€ä½å¼€å§‹æ”¾è¿‡æ¥å–å€¼ï¼Œæ³¨æ„è¿™é‡Œçš„æ­¥é•¿è¦ä¸º-1ï¼Œå› ä¸ºåå‘ã€‚3. tupletupleï¼Œå…ƒç»„ï¼Œä¸åˆ—è¡¨ list ç±»ä¼¼ï¼Œä¸åŒä¹‹å¤„åœ¨äºå…ƒç»„ï¼ˆæŒ‡å‘ï¼‰çš„å…ƒç´ ä¸èƒ½ä¿®æ”¹ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œtuple æ˜¯ä¸å¯å˜çš„ï¼ˆimmutableï¼‰å¯ä»¥åŒ…å«å¤šç§ç±»å‹æˆå‘˜çš„æ•°æ®ç»“æ„ï¼Œlist æ˜¯å¯å˜çš„åŒ…å«åŒç±»å‹æˆå‘˜çš„æ•°æ®ç»“æ„ã€‚å…ƒç»„ä½¿ç”¨å°æ‹¬å·ï¼Œåˆ—è¡¨ä½¿ç”¨æ–¹æ‹¬å·ã€‚å…ƒç»„åˆ›å»ºå¾ˆç®€å•ï¼Œåªéœ€è¦åœ¨æ‹¬å·ä¸­æ·»åŠ å…ƒç´ ï¼Œå¹¶ä½¿ç”¨é€—å·éš”å¼€å³å¯ã€‚å¦‚æœåˆ›å»ºä¸€ä¸ªç©ºå…ƒç»„ï¼Œç›´æ¥ä½¿ç”¨å°æ‹¬å·å³å¯ï¼›å¦‚æœè¦åˆ›å»ºçš„å…ƒç»„ä¸­åªæœ‰ä¸€ä¸ªå…ƒç´ ï¼Œè¦åœ¨å®ƒçš„åé¢åŠ ä¸Šä¸€ä¸ªé€—å·â€™ï¼Œâ€™ã€‚&gt;&gt;&gt; temp = ()&gt;&gt;&gt; type(temp)     &lt;class 'tuple'&gt;&gt;&gt;&gt; temp = (1,)&gt;&gt;&gt; type(temp)    &lt;class 'tuple'&gt;&gt;&gt;&gt; temp = (1)&gt;&gt;&gt; type(temp)    &lt;class 'int'&gt;&gt;&gt;&gt; 8 * (8)    64&gt;&gt;&gt; 8 * (8,)    (8, 8, 8, 8, 8, 8, 8, 8)çµå‰‘. python çš„ tuple æ˜¯ä¸æ˜¯å†—ä½™è®¾è®¡ï¼Ÿ  æœ€é‡è¦çš„å¥½å¤„æ˜¯å¯ä»¥åšdictçš„keyï¼ˆå¦‚æœå†…éƒ¨ä¹Ÿæ˜¯immutableçš„ç±»å‹ï¼‰ã€‚æ¬¡ä¸€ç‚¹çš„å¥½å¤„æ˜¯ç”±äºç¡®ä¿ä¸èƒ½ä¿®æ”¹ï¼Œå¯ä»¥å®‰å…¨åœ°åœ¨å¤šä¸ªå¯¹è±¡ä¹‹é—´å…±äº«ã€‚  tupleç±»å‹å¯¹äºPythonè‡ªèº«æ¥è¯´æ˜¯éå¸¸é‡è¦çš„æ•°æ®ç±»å‹ï¼Œæ¯”å¦‚è¯´å‡½æ•°è°ƒç”¨ï¼Œå®é™…ä¸Šä¼šå°†é¡ºåºä¼ å…¥çš„å‚æ•°å…ˆç»„æˆä¸€ä¸ªtupleï¼›å¤šè¿”å›å€¼ä¹Ÿæ˜¯é è¿”å›ä¸€ä¸ªtupleæ¥å®ç°çš„ã€‚å› ä¸ºå¤ªå¸¸ç”¨ï¼Œæ‰€ä»¥éœ€è¦ä¸€ä¸ªæ›´æœ‰æ•ˆçš„æ•°æ®ç»“æ„æ¥æé«˜æ•ˆç‡ï¼Œä¸€ä¸ªä¸å¯å˜çš„tupleå¯¹è±¡ä»å®ç°ä¸Šæ¥è¯´å¯ä»¥æ¯”listç®€å•ä¸å°‘ã€‚å†æ¯”å¦‚è¯´codeå¯¹è±¡ä¼šè®°å½•è‡ªå·±çš„å‚æ•°åç§°åˆ—è¡¨ï¼Œfree variableåç§°åˆ—è¡¨ç­‰ç­‰ï¼Œè¿™äº›å¦‚æœç”¨listï¼Œå°±å¯èƒ½è¢«ä»å¤–éƒ¨ä¿®æ”¹ï¼Œè¿™æ ·å¯èƒ½å¯¼è‡´è§£é‡Šå™¨å´©æºƒï¼›é‚£å°±åªèƒ½é€‰æ‹©æ”¹æˆä¸€ä¸ªå‡½æ•°æ¯æ¬¡éƒ½è¿”å›ä¸€ä¸ªæ–°çš„åˆ—è¡¨ï¼Œè¿™æ ·åˆå¾ˆæµªè´¹ã€‚æ‰€ä»¥å³ä½¿æ˜¯ä»è§£é‡Šå™¨è‡ªèº«å®ç°çš„è§’åº¦ä¸Šæ¥è¯´å¼•å…¥è¿™æ ·ä¸€ä¸ªä¸å¯å˜çš„åºåˆ—ç±»å‹ä¹Ÿæ˜¯å¾ˆé‡è¦çš„ã€‚  å¯¹ç¨‹åºå‘˜æ¥è¯´å¦‚æœæ²¡æœ‰ä»€ä¹ˆç¾å­¦ä¸Šçš„è¿½æ±‚çš„è¯ï¼Œtupleæœ€å¤§çš„ä¾¿åˆ©åœ¨äºå®ƒæ˜¯ä¸€ä¸ªhashableçš„ç±»å‹ï¼Œè€Œä¸”hashç®—æ³•ä¸å€¼ç›´æ¥å¯¹åº”ï¼Œè¿™æ ·åœ¨Pythoné‡Œå¾ˆå®¹æ˜“ç”¨å¤šä¸ªå€¼çš„ç»„åˆæ¥åškeyç”Ÿæˆä¸€ä¸ªdictï¼Œæ¯”å¦‚è¯´æˆ‘ä»¬ç½‘ç»œé‡Œæœ‰20å°äº¤æ¢æœºï¼Œæ¯ä¸ªäº¤æ¢æœºæœ‰24ä¸ªå£ï¼Œé‚£è¦å”¯ä¸€æ ‡è¯†æ¯ä¸ªå£å°±éœ€è¦ç”¨(äº¤æ¢æœºIDï¼Œå£ç¼–å·ï¼‰ï¼Œè¿™ä¸ªtupleå¯ä»¥åšdictçš„keyçš„è¯ï¼Œç¼–å†™ç¨‹åºèµ·æ¥å°±å¾ˆæ–¹ä¾¿äº†ã€‚å‡½æ•°å¦‚æœæœ‰å¤šä¸ªè¿”å›å€¼ï¼Œè¿”å›çš„æ˜¯ä¸€ä¸ª tupleã€‚4. ndarrayNumpyæ˜¯Pythonçš„ä¸€ä¸ªæ‰©å……ç¨‹åºåº“ï¼Œæ”¯æŒé«˜é˜¶å¤§é‡çš„ç»´åº¦æ•°ç»„ä¸çŸ©é˜µè¿ç®—ï¼Œæ­¤å¤–ä¹Ÿé’ˆå¯¹æ•°ç»„è¿ç®—æä¾›å¤§é‡çš„æ•°å­¦å‡½æ•°åº“ã€‚å¯¹äºæ•°æ®çš„è¿ç®—ï¼Œç”¨çŸ©é˜µä¼šæ¯”pythonè‡ªå¸¦çš„å­—å…¸æˆ–è€…åˆ—è¡¨å¿«å¥½å¤šã€‚4.1. æ¦‚å¿µNumPy æœ€é‡è¦çš„ä¸€ä¸ªç‰¹ç‚¹æ˜¯å…¶ N ç»´æ•°ç»„å¯¹è±¡ ndarrayï¼Œå®ƒæ˜¯ä¸€ç³»åˆ—åŒç±»å‹æ•°æ®çš„é›†åˆï¼Œä»¥ 0 ä¸‹æ ‡ä¸ºå¼€å§‹è¿›è¡Œé›†åˆä¸­å…ƒç´ çš„ç´¢å¼•ã€‚ndarray å¯¹è±¡æ˜¯ç”¨äºå­˜æ”¾åŒç±»å‹å…ƒç´ çš„å¤šç»´æ•°ç»„ã€‚ndarray ä¸­çš„æ¯ä¸ªå…ƒç´ åœ¨å†…å­˜ä¸­éƒ½æœ‰ç›¸åŒå­˜å‚¨å¤§å°çš„åŒºåŸŸã€‚ndarray å†…éƒ¨ç”±ä»¥ä¸‹å†…å®¹ç»„æˆï¼š  ä¸€ä¸ªæŒ‡å‘æ•°æ®ï¼ˆå†…å­˜æˆ–å†…å­˜æ˜ å°„æ–‡ä»¶ä¸­çš„ä¸€å—æ•°æ®ï¼‰çš„æŒ‡é’ˆã€‚  æ•°æ®ç±»å‹æˆ– dtypeï¼Œæè¿°åœ¨æ•°ç»„ä¸­çš„å›ºå®šå¤§å°å€¼çš„æ ¼å­ã€‚  ä¸€ä¸ªè¡¨ç¤ºæ•°ç»„å½¢çŠ¶ï¼ˆshapeï¼‰çš„å…ƒç»„ï¼Œè¡¨ç¤ºå„ç»´åº¦å¤§å°çš„å…ƒç»„ã€‚  ä¸€ä¸ªè·¨åº¦å…ƒç»„ï¼ˆstrideï¼‰ï¼Œå…¶ä¸­çš„æ•´æ•°æŒ‡çš„æ˜¯ä¸ºäº†å‰è¿›åˆ°å½“å‰ç»´åº¦ä¸‹ä¸€ä¸ªå…ƒç´ éœ€è¦â€è·¨è¿‡â€çš„å­—èŠ‚æ•°ã€‚åˆ›å»ºä¸€ä¸ª ndarray åªéœ€è°ƒç”¨ NumPy çš„ array å‡½æ•°å³å¯ï¼šnumpy.array(object, dtype = None, copy = True, order = None, subok = False, ndmin = 0)å‚æ•°è¯´æ˜            åç§°      æè¿°                  object      æ•°ç»„æˆ–åµŒå¥—çš„æ•°åˆ—              dtype      æ•°ç»„å…ƒç´ çš„æ•°æ®ç±»å‹ï¼Œå¯é€‰              copy      å¯¹è±¡æ˜¯å¦éœ€è¦å¤åˆ¶ï¼Œå¯é€‰              order      åˆ›å»ºæ•°ç»„çš„æ ·å¼ï¼ŒCä¸ºè¡Œæ–¹å‘ï¼ŒFä¸ºåˆ—æ–¹å‘ï¼ŒAä¸ºä»»æ„æ–¹å‘ï¼ˆé»˜è®¤ï¼‰              subok      é»˜è®¤è¿”å›ä¸€ä¸ªä¸åŸºç±»ç±»å‹ä¸€è‡´çš„æ•°ç»„              ndmin      æŒ‡å®šç”Ÿæˆæ•°ç»„çš„æœ€å°ç»´åº¦      ä¾‹å­&gt;&gt;&gt; import numpy as np &gt;&gt;&gt; a = np.array([1,2,3])  &gt;&gt;&gt; print (a)[1, 2, 3]&gt;&gt;&gt; a = np.array([[1,  2],  [3,  4]])  &gt;&gt;&gt; print (a)[[1, 2]  [3, 4]]4.2. æ•°ç»„å±æ€§NumPy æ•°ç»„çš„ç»´æ•°ç§°ä¸ºç§©ï¼ˆrankï¼‰ï¼Œç§©å°±æ˜¯è½´çš„æ•°é‡ï¼Œå³æ•°ç»„çš„ç»´åº¦ï¼Œä¸€ç»´æ•°ç»„çš„ç§©ä¸º 1ï¼ŒäºŒç»´æ•°ç»„çš„ç§©ä¸º 2ï¼Œä»¥æ­¤ç±»æ¨ã€‚åœ¨ NumPyä¸­ï¼Œæ¯ä¸€ä¸ªçº¿æ€§çš„æ•°ç»„ç§°ä¸ºæ˜¯ä¸€ä¸ªè½´ï¼ˆaxisï¼‰ï¼Œä¹Ÿå°±æ˜¯ç»´åº¦ï¼ˆdimensionsï¼‰ã€‚æ¯”å¦‚è¯´ï¼ŒäºŒç»´æ•°ç»„ç›¸å½“äºæ˜¯ä¸¤ä¸ªä¸€ç»´æ•°ç»„ï¼Œå…¶ä¸­ç¬¬ä¸€ä¸ªä¸€ç»´æ•°ç»„ä¸­æ¯ä¸ªå…ƒç´ åˆæ˜¯ä¸€ä¸ªä¸€ç»´æ•°ç»„ã€‚æ‰€ä»¥ä¸€ç»´æ•°ç»„å°±æ˜¯ NumPy ä¸­çš„è½´ï¼ˆaxisï¼‰ï¼Œç¬¬ä¸€ä¸ªè½´ç›¸å½“äºæ˜¯åº•å±‚æ•°ç»„ï¼Œç¬¬äºŒä¸ªè½´æ˜¯åº•å±‚æ•°ç»„é‡Œçš„æ•°ç»„ã€‚è€Œè½´çš„æ•°é‡â€”â€”ç§©ï¼Œå°±æ˜¯æ•°ç»„çš„ç»´æ•°ã€‚å¾ˆå¤šæ—¶å€™å¯ä»¥å£°æ˜ axisã€‚axis=0ï¼Œè¡¨ç¤ºæ²¿ç€ç¬¬ 0 è½´è¿›è¡Œæ“ä½œï¼ˆæ²¿ç€è¡Œç§»åŠ¨ï¼‰ï¼Œå³å¯¹æ¯ä¸€åˆ—è¿›è¡Œæ“ä½œï¼›axis=1ï¼Œè¡¨ç¤ºæ²¿ç€ç¬¬1è½´è¿›è¡Œæ“ä½œï¼ˆæ²¿ç€åˆ—ç§»åŠ¨ï¼‰ï¼Œå³å¯¹æ¯ä¸€è¡Œè¿›è¡Œæ“ä½œã€‚4.3. åˆ›å»ºæ•°ç»„  numpy.zeros åˆ›å»ºæŒ‡å®šå¤§å°æ•°ç»„ï¼Œæ•°ç»„å…ƒç´ ä»¥ 0 æ¥å¡«å……ï¼š&gt;&gt;&gt; import numpy as np &gt;&gt;&gt; x = np.zeros(5) &gt;&gt;&gt; print (x)[0. 0. 0. 0. 0.]&gt;&gt;&gt; y = np.zeros((5,), dtype = np.int) &gt;&gt;&gt; print (y)[0 0 0 0 0]  numpy.ones åˆ›å»ºæŒ‡å®šå½¢çŠ¶çš„æ•°ç»„ï¼Œæ•°ç»„å…ƒç´ ä»¥ 1 æ¥å¡«å……ï¼š&gt;&gt;&gt; import numpy as np [0. 0. 0. 0. 0.]&gt;&gt;&gt; x = np.ones(5)[1. 1. 1. 1. 1.]&gt;&gt;&gt; print (x)&gt;&gt;&gt; y = np.ones((2,2), dtype = np.int) &gt;&gt;&gt; print (y)[[1 1] [1 1]]  numpy.arange åˆ›å»ºæ•°å€¼èŒƒå›´å¹¶è¿”å› ndarray å¯¹è±¡ï¼Œå‡½æ•°æ ¼å¼å¦‚ä¸‹ï¼šnumpy.arange(start, stop, step, dtype)ç”Ÿæˆæ•°ç»„ç¤ºä¾‹å¦‚ä¸‹ï¼š&gt;&gt;&gt; import numpy as np&gt;&gt;&gt; x = np.arange(5) # = np.arrange(0,1,5)&gt;&gt;&gt; print (x)[0  1  2  3  4]&gt;&gt;&gt; x = np.arange(5, dtype =  float)&gt;&gt;&gt; print (x)[0.  1.  2.  3.  4.]&gt;&gt;&gt; x = np.arange(10,20,2)  &gt;&gt;&gt; print (x)[10  12  14  16  18]&gt;&gt;&gt; x = np.arange(0,1,0.1)&gt;&gt;&gt; print (x)[ 0.  0.1  0.2  0.3  0.4  0.5  0.6  0.7  0.8  0.9]  numpy.reshape åœ¨ä¸æ”¹å˜æ•°æ®å†…å®¹çš„æƒ…å†µä¸‹ï¼Œæ”¹å˜ä¸€ä¸ªæ•°ç»„çš„æ ¼å¼ï¼Œå‚æ•°åŠè¿”å›å€¼ï¼š&gt;&gt;&gt; import numpy as np&gt;&gt;&gt; x = np.arange(6)&gt;&gt;&gt; print (x)[0  1  2  3  4  5]&gt;&gt;&gt; y = x.reshape((2,3))&gt;&gt;&gt; print (y)[[0 1 2] [3 4 5]]&gt;&gt;&gt; z = x.reshape(-1,2)&gt;&gt;&gt; print (z)[[0 1] [2 3] [4 5]]é€šè¿‡ reshape ç”Ÿæˆçš„æ–°æ•°ç»„å’ŒåŸå§‹æ•°ç»„å…±ç”¨ä¸€ä¸ªå†…å­˜ï¼Œä¹Ÿå°±æ˜¯æ”¹å˜äº†åŸæ•°ç»„çš„å…ƒç´ ï¼Œæ–°æ•°ç»„çš„ç›¸åº”å…ƒç´ ä¹Ÿå°†å‘ç”Ÿæ”¹å˜ã€‚-1 è¡¨ç¤ºè¦æ ¹æ®å¦ä¸€ä¸ªç»´åº¦è‡ªåŠ¨è®¡ç®—å½“å‰ç»´åº¦ã€‚reshape(-1,2) å³æˆ‘ä»¬æƒ³è¦2åˆ—è€Œä¸çŸ¥é“è¡Œæ•°æœ‰å¤šå°‘ï¼Œè®©numpyè‡ªåŠ¨è®¡ç®—ã€‚  numpy.linspace åˆ›å»ºä¸€ä¸ªä¸€ç»´æ•°ç»„ï¼Œæ•°ç»„æ˜¯ä¸€ä¸ªç­‰å·®æ•°åˆ—æ„æˆçš„ï¼Œæ ¼å¼å¦‚ä¸‹ï¼šnp.linspace(start, stop, num=50, endpoint=True, retstep=False, dtype=None)å‚æ•°è¯´æ˜ï¼š            å‚æ•°      æè¿°                  start      åºåˆ—çš„èµ·å§‹å€¼              stop      åºåˆ—çš„ç»ˆæ­¢å€¼ï¼Œå¦‚æœ endpoint ä¸º trueï¼Œè¯¥å€¼åŒ…å«äºæ•°åˆ—ä¸­              num      è¦ç”Ÿæˆçš„ç­‰æ­¥é•¿çš„æ ·æœ¬æ•°é‡ï¼Œé»˜è®¤ä¸º 50              endpoint      è¯¥å€¼ä¸º true æ—¶ï¼Œæ•°åˆ—ä¸­åŒ…å« stop å€¼ï¼Œåä¹‹ä¸åŒ…å«ï¼Œé»˜è®¤æ˜¯ trueã€‚              retstep      å¦‚æœä¸º true æ—¶ï¼Œç”Ÿæˆçš„æ•°ç»„ä¸­ä¼šæ˜¾ç¤ºé—´è·ï¼Œåä¹‹ä¸æ˜¾ç¤ºã€‚              dtype      ndarray çš„æ•°æ®ç±»å‹      ç¤ºä¾‹ï¼š&gt;&gt;&gt; import numpy as np&gt;&gt;&gt; a = np.linspace(1,10,10)&gt;&gt;&gt; print(a)[ 1.  2.  3.  4.  5.  6.  7.  8.  9. 10.]4.4. æ•°ç»„æ‹¼æ¥ä¸¤ä¸ªæ‹¼æ¥æ•°ç»„çš„æ–¹æ³•ï¼šnp.vstack() åœ¨ç«–ç›´æ–¹å‘ä¸Šå †å np.hstack() åœ¨æ°´å¹³æ–¹å‘ä¸Šå¹³é“º&gt;&gt;&gt; import numpy as np&gt;&gt;&gt; arr1=np.array([1,2,3])&gt;&gt;&gt; arr2=np.array([4,5,6])&gt;&gt;&gt; print np.vstack((arr1,arr2))[[1 2 3] [4 5 6]]&gt;&gt;&gt; print np.hstack((arr1,arr2,arr1))[1 2 3 4 5 6 1 2 3]&gt;&gt;&gt; a1=np.array([[1,2],[3,4],[5,6]])&gt;&gt;&gt; a2=np.array([[7,8],[9,10],[11,12]])&gt;&gt;&gt; print np.hstack((a1,a2))[[ 1  2  7  8] [ 3  4  9 10] [ 5  6 11 12]]4.5. listå’Œarrayçš„åŒºåˆ«&gt;&gt;&gt; import numpy as np&gt;&gt;&gt; a=np.array([1,2,3,4,55,6,7,77,8,9,99]) # transfer a list to an array&gt;&gt;&gt; b=np.array_split(a,3) # split the array into 3 parts&gt;&gt;&gt; print (b) # a list containing 3 arrays[array([1, 2, 3, 4]), array([55,  6,  7, 77]), array([ 8,  9, 99])]&gt;&gt;&gt; print (b[0:2]+b[1:3]) # a list containing 4 arrays[array([1, 2, 3, 4]), array([55,  6,  7, 77]), array([55,  6,  7, 77]), array([ 8,  9, 99])]&gt;&gt;&gt; c = np.hstack((brr1_folds[:2]+brr1_folds[1:3]))&gt;&gt;&gt; print (c) # list[ 1  2  3  4 55  6  7 77 55  6  7 77  8  9 99]5. dictå­—å…¸æ˜¯å¦ä¸€ç§å¯å˜å®¹å™¨æ¨¡å‹ï¼Œä¸”å¯å­˜å‚¨ä»»æ„ç±»å‹å¯¹è±¡ã€‚å­—å…¸çš„æ¯ä¸ªé”®å€¼ key=&gt;value å¯¹ç”¨å†’å· : åˆ†å‰²ï¼Œæ¯ä¸ªé”®å€¼å¯¹ä¹‹é—´ç”¨é€—å· , åˆ†å‰²ï¼Œæ•´ä¸ªå­—å…¸åŒ…æ‹¬åœ¨èŠ±æ‹¬å· {} ä¸­ ,æ ¼å¼å¦‚ä¸‹æ‰€ç¤ºï¼šd = {key1 : value1, key2 : value2 }5.1. å®šä¹‰ï¼Œæ›´æ–°å’Œæ·»åŠ &gt;&gt;&gt; dict = {'Name': 'Zara', 'Age': 7, 'Class': 'First'}&gt;&gt;&gt; dict['Age'] = 8 # æ›´æ–°&gt;&gt;&gt; dict['School'] = \"RUNOOB\" # æ·»åŠ &gt;&gt;&gt; print \"dict['Age']: \", dict['Age']&gt;&gt;&gt; print \"dict['School']: \", dict['School']    dict['Age']:  8    dict['School']:  RUNOOB&gt;&gt;&gt; del dict['Name']  # åˆ é™¤é”®æ˜¯'Name'çš„æ¡ç›®&gt;&gt;&gt; dict.clear()      # æ¸…ç©ºå­—å…¸æ‰€æœ‰æ¡ç›®&gt;&gt;&gt; del dict          # åˆ é™¤å­—å…¸5.2. å†…ç½®å‡½æ•°cmp(dict1, dict2) # æ¯”è¾ƒä¸¤ä¸ªå­—å…¸å…ƒç´ len(dict) # è®¡ç®—å­—å…¸å…ƒç´ ä¸ªæ•°ï¼Œå³é”®çš„æ€»æ•°str(dict) # è¾“å‡ºå­—å…¸å¯æ‰“å°çš„å­—ç¬¦ä¸²è¡¨ç¤ºtype(dict) # è¿”å›è¾“å…¥çš„å˜é‡ç±»å‹ï¼ˆå­—å…¸ç±»å‹ï¼‰5.3. å†…ç½®æ–¹æ³•dict.clear() # åˆ é™¤å­—å…¸å†…æ‰€æœ‰å…ƒç´ dict.copy() # è¿”å›ä¸€ä¸ªå­—å…¸çš„æµ…å¤åˆ¶dict.fromkeys(seq[, val]) # åˆ›å»ºä¸€ä¸ªæ–°å­—å…¸ï¼Œä»¥åºåˆ— seq ä¸­å…ƒç´ åšå­—å…¸çš„é”®ï¼Œval ä¸ºå­—å…¸æ‰€æœ‰é”®å¯¹åº”çš„åˆå§‹å€¼dict.get(key, default=None) # è¿”å›æŒ‡å®šé”®çš„å€¼ï¼Œå¦‚æœå€¼ä¸åœ¨å­—å…¸ä¸­è¿”å›defaultå€¼dict.has_key(key) # å¦‚æœé”®åœ¨å­—å…¸dicté‡Œè¿”å›trueï¼Œå¦åˆ™è¿”å›falsedict.items() # ä»¥åˆ—è¡¨è¿”å›å¯éå†çš„(é”®, å€¼) å…ƒç»„æ•°ç»„dict.keys() # ä»¥åˆ—è¡¨è¿”å›ä¸€ä¸ªå­—å…¸æ‰€æœ‰çš„é”®dict.setdefault(key, default=None) # å’Œget()ç±»ä¼¼, ä½†å¦‚æœé”®ä¸å­˜åœ¨äºå­—å…¸ä¸­ï¼Œå°†ä¼šæ·»åŠ é”®å¹¶å°†å€¼è®¾ä¸ºdefaultdict.update(dict2) # æŠŠå­—å…¸dict2çš„é”®/å€¼å¯¹æ›´æ–°åˆ°dicté‡Œdict.values() # ä»¥åˆ—è¡¨è¿”å›å­—å…¸ä¸­çš„æ‰€æœ‰å€¼pop(key[,default]) # åˆ é™¤å­—å…¸ç»™å®šé”® key æ‰€å¯¹åº”çš„å€¼ï¼Œè¿”å›å€¼ä¸ºè¢«åˆ é™¤çš„å€¼ã€‚keyå€¼å¿…é¡»ç»™å‡ºã€‚ å¦åˆ™ï¼Œè¿”å›defaultå€¼ã€‚popitem() # è¿”å›å¹¶åˆ é™¤å­—å…¸ä¸­çš„æœ€åä¸€å¯¹é”®å’Œå€¼ã€‚å­—å…¸å€¼å¯ä»¥æ²¡æœ‰é™åˆ¶åœ°å–ä»»ä½•pythonå¯¹è±¡ï¼Œæ—¢å¯ä»¥æ˜¯æ ‡å‡†çš„å¯¹è±¡ï¼Œä¹Ÿå¯ä»¥æ˜¯ç”¨æˆ·å®šä¹‰çš„ï¼Œä½†é”®ä¸è¡Œã€‚5.4. ç‰¹æ€§ä¸¤ä¸ªé‡è¦çš„ç‚¹éœ€è¦è®°ä½ï¼š  ä¸å…è®¸åŒä¸€ä¸ªé”®å‡ºç°ä¸¤æ¬¡ã€‚åˆ›å»ºæ—¶å¦‚æœåŒä¸€ä¸ªé”®è¢«èµ‹å€¼ä¸¤æ¬¡ï¼Œåä¸€ä¸ªå€¼ä¼šè¢«è®°ä½ï¼›  é”®å¿…é¡»ä¸å¯å˜ï¼Œæ‰€ä»¥å¯ä»¥ç”¨æ•°å­—ï¼Œå­—ç¬¦ä¸²æˆ–å…ƒç»„å……å½“ï¼Œæ‰€ä»¥ç”¨åˆ—è¡¨å°±ä¸è¡Œã€‚5.5. OrderedDictæœ‰åºå­—å…¸ï¼Œå¯ä»¥æŒ‰å­—å…¸ä¸­å…ƒç´ çš„æ’å…¥é¡ºåºæ¥è¾“å‡ºã€‚æœ‰åºå­—å…¸çš„ä½œç”¨åªæ˜¯è®°ä½å…ƒç´ æ’å…¥é¡ºåºå¹¶æŒ‰é¡ºåºè¾“å‡ºã€‚å¦‚æœæœ‰åºå­—å…¸ä¸­çš„å…ƒç´ ä¸€å¼€å§‹å°±å®šä¹‰å¥½äº†ï¼Œåé¢æ²¡æœ‰æ’å…¥å…ƒç´ è¿™ä¸€åŠ¨ä½œï¼Œé‚£ä¹ˆéå†æœ‰åºå­—å…¸ï¼Œå…¶è¾“å‡ºç»“æœä»ç„¶æ˜¯æ— åºçš„ï¼Œå› ä¸ºç¼ºå°‘äº†æœ‰åºæ’å…¥è¿™ä¸€æ¡ä»¶ï¼Œæ‰€ä»¥æ­¤æ—¶æœ‰åºå­—å…¸å°±å¤±å»äº†ä½œç”¨ï¼Œæ‰€ä»¥æœ‰åºå­—å…¸ä¸€èˆ¬ç”¨äºåŠ¨æ€æ·»åŠ å¹¶éœ€è¦æŒ‰æ·»åŠ é¡ºåºè¾“å‡ºçš„æ—¶å€™ã€‚OrderedDict ä½¿ç”¨å‰å¿…é¡»å¼•å…¥åŒ… collectionsã€‚ä¸‹é¢æ˜¯æ’å…¥å…ƒç´ çš„æ“ä½œimport collectionsmy_order_dict = collections.OrderedDict()my_order_dict[\"name\"] = \"lowman\"my_order_dict[\"age\"] = 45my_order_dict[\"money\"] = 998my_order_dict[\"hourse\"] = Nonefor key, value in my_order_dict.items():    print(key, value)è¾“å‡ºname lowmanage 45money 998hourse Noneè€Œå¦‚æœåœ¨å®šä¹‰æœ‰åºå­—å…¸æ—¶åˆå§‹åŒ–äº†åˆå§‹å€¼ï¼Œå¹¶æ²¡æœ‰æŒ‰åºæ·»åŠ çš„æ“ä½œï¼Œé‚£ä¹ˆéå†æ—¶ä»ç„¶æ˜¯æ— åºçš„ã€‚å¦‚import collectionsmy_order_dict = collections.OrderedDict(name=\"lowman\", age=45, money=998, hourse=None)for key, value in my_order_dict.items():    print(key, value)è¾“å‡ºhourse Noneage 45money 998name lowman6. å‚è€ƒæ–‡çŒ®[1] CDAæ•°æ®åˆ†æå¸ˆ. PythonåŸºç¡€çŸ¥è¯†è¯¦è§£(ä¸‰)ï¼šæ•°æ®ç»“æ„ç¯‡.[2] RUNOOB.COM. NumPy ä»æ•°å€¼èŒƒå›´åˆ›å»ºæ•°ç»„."
  },
  
  {
    "title": "PythonåŸºç¡€ï¼ˆlambda,np.randomï¼‰",
    "url": "/posts/python-basic-np-fcns/",
    "categories": "Tutorial, Coding",
    "tags": "python",
    "date": "2020-08-12 19:06:19 +0800",
    





    
    "snippet": "æœ¬æ–‡ä¸»è¦é’ˆå¯¹Pythonä¸­lamdbdaçš„ä»‹ç»ï¼Œå’Œnumpyä¸­seedã€choiceã€uniformç­‰çš„ä»‹ç»ã€‚  1. lambda  2. np.random          2.1. .seed()      2.2. .RandomState()      2.3. .choice()      2.4. .uniform()      2.5. .permutation()    ...",
    "content": "æœ¬æ–‡ä¸»è¦é’ˆå¯¹Pythonä¸­lamdbdaçš„ä»‹ç»ï¼Œå’Œnumpyä¸­seedã€choiceã€uniformç­‰çš„ä»‹ç»ã€‚  1. lambda  2. np.random          2.1. .seed()      2.2. .RandomState()      2.3. .choice()      2.4. .uniform()      2.5. .permutation()        3. range()  4. å‚è€ƒæ–‡çŒ®1. lambdaé™¤äº† def è¯­å¥ï¼Œpythonè¿˜æä¾›äº†ä¸€ç§ç”Ÿæˆå‡½æ•°å¯¹è±¡çš„è¡¨è¾¾å¼å½¢å¼ã€‚ç”±äºå®ƒä¸LISPè¯­è¨€ä¸­çš„ä¸€ä¸ªå·¥å…·ç±»ä¼¼ï¼Œæ‰€ä»¥ç§°ä¸ºlambdaã€‚å°±åƒ def ä¸€æ ·ï¼Œè¿™ä¸ªè¡¨è¾¾å¼åˆ›å»ºäº†ä¸€ä¸ªä¹‹åèƒ½å¤Ÿè°ƒç”¨çš„å‡½æ•°ï¼Œä½†æ˜¯å®ƒè¿”å›ä¸€ä¸ªå‡½æ•°è€Œä¸æ˜¯å°†è¿™ä¸ªå‡½æ•°èµ‹å€¼ç»™ä¸€ä¸ªå˜é‡ã€‚è¿™äº›å°±æ˜¯ lambda å«åšåŒ¿åå‡½æ•°çš„åŸå› ã€‚å®é™…ä¸Šï¼Œä»–å¸¸å¸¸ä»¥ä¸€ç§è¡Œå†…è¿›è¡Œå‡½æ•°å®šä¹‰çš„æ–¹å¼ä½¿ç”¨ï¼Œæˆ–è€…ç”¨ä½œæ¨è¿Ÿæ‰§è¡Œä¸€äº›ä»£ç ã€‚lambda çš„ä¸€èˆ¬å½¢å¼æ˜¯å…³é”®å­— lambda ä¹‹åè·Ÿç€ä¸€ä¸ªæˆ–å¤šä¸ªå‚æ•°ï¼ˆä¸ä¸€ä¸ª def å¤´éƒ¨å†…ç”¨æ‹¬å·æ‹¬èµ·æ¥çš„å‚æ•°åˆ—è¡¨ç±»ä¼¼ï¼‰ï¼Œç´§è·Ÿç€æ˜¯ä¸€ä¸ªå†’å·ï¼Œä¹‹åæ˜¯è¡¨è¾¾å¼lambda arg1,arg2,argn: expression using argumentsç”± lambda è¡¨è¾¾å¼æ‰€è¿”å›çš„å‡½æ•°å¯¹è±¡ä¸ç”±defåˆ›å»ºå¹¶å¤åˆ¶åçš„å‡½æ•°å¯¹è±¡å·¥ä½œèµ·æ¥æ˜¯å®Œå…¨ä¸€è‡´çš„ï¼Œä½† lambda æœ‰ä¸€äº›ä¸åŒä¹‹å¤„ï¼Œè®©å…¶æ‰®æ¼”ç‰¹å®šçš„è§’è‰²æ—¶æ›´æœ‰ç”¨ï¼šlambdaæ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªè¯­å¥å› ä¸ºè¿™ä¸€ç‚¹ï¼Œlambda å¯ä»¥å‡ºç°åœ¨pythonè¯­æ³•ä¸å…è®¸ def å‡ºç°çš„åœ°æ–¹ã€‚æ­¤å¤–ï¼Œä½œä¸ºä¸€ä¸ªè¡¨è¾¾å¼ï¼Œlambda è¿”å›ä¸€ä¸ªå€¼ï¼ˆä¸€ä¸ªæ–°çš„å‡½æ•°ï¼‰ï¼Œå¯ä»¥é€‰æ‹©æ€§çš„èµ‹å€¼ç»™ä¸€ä¸ªå˜é‡ã€‚ç›¸åï¼Œdef è¯­å¥æ€»æ˜¯å¾—åœ¨å¤´éƒ¨å°†ä¸€ä¸ªæ–°çš„å‡½æ•°èµ‹å€¼ç»™ä¸€ä¸ªå˜é‡ï¼Œè€Œä¸æ˜¯å°†è¿™ä¸ªå‡½æ•°ä½œä¸ºç»“æœè¿”å›ã€‚lambdaçš„ä¸»é¢˜æ˜¯å•ä¸ªè¡¨è¾¾å¼ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªä»£ç å—è¿™ä¸ª lambda çš„ä¸»é¢˜ç®€å•çš„å°±å¥½åƒæ”¾åœ¨ def ä¸»ä½“ return è¯­å¥ä¸­çš„ä»£ç ä¸€æ ·ã€‚ç®€å•çš„å°†ç»“æœå†™æˆä¸€ä¸ªé¡ºç•…çš„è¡¨è¾¾å¼ï¼Œè€Œä¸æ˜¯æ˜ç¡®çš„è¿”å›ã€‚ä½†ç”±äºå®ƒä»…é™äºè¡¨è¾¾å¼ï¼Œæ•… lambda é€šå¸¸è¦æ¯” def åŠŸèƒ½å°‘â€¦ä½ ä»…èƒ½å¤Ÿåœ¨ lambda ä¸»ä½“ä¸­å°è£…æœ‰é™çš„é€»è¾‘è¿›å»ï¼Œå› ä¸ºä»–æ˜¯ä¸€ä¸ªä¸ºç¼–å†™ç®€å•å‡½æ•°è€Œè®¾è®¡çš„ã€‚é™¤äº†ä¸Šè¿°è¿™äº›å·®åˆ«ï¼Œdef å’Œ lambda éƒ½èƒ½è¿‡åšåŒæ ·ç§ç±»çš„å·¥ä½œã€‚defä¸lambdaçš„ç›¸åŒç”¨æ³•x = lambda x, y, z: x + y + zx(2, 3, 4)&gt;&gt;&gt; 9y = (lambda a='hello', b='world': a + b)y(b='Python')&gt;&gt;&gt; 'hellopython'ä¸ºä»€ä¹ˆä½¿ç”¨lambdaé€šå¸¸æ¥è¯´ï¼Œlambdaèµ·åˆ°ä¸€ç§å‡½æ•°çš„é€Ÿå†™ä½œç”¨ï¼Œå…è®¸åœ¨ä½¿ç”¨çš„ä»£ç å†…åµŒä¸€ä¸ªå‡½æ•°çš„å®šä¹‰ï¼Œä»–å®Œå…¨æ˜¯å¯é€‰çš„ï¼ˆæ˜¯å¯ä»¥ä½¿ç”¨ def ä»£æ›¿ä»–ä»¬ï¼‰ï¼Œä½†æ˜¯åœ¨ä½ ä»…éœ€è¦åˆ‡å…¥ä¸€æ®µå¯æ‰§è¡Œä»£ç çš„æƒ…å†µä¸‹ï¼Œå®ƒä¼šå¸¦æ¥ä¸€ä¸ªæ›´ç®€æ´çš„ä¹¦å†™æ•ˆæœã€‚lambda é€šå¸¸ç”¨æ¥ç¼–å†™è·³è½¬è¡¨ï¼Œä¹Ÿå°±æ˜¯è¡Œä¸ºçš„åˆ—è¡¨æˆ–è€…å­—å…¸ï¼Œèƒ½å¤ŸæŒ‰ç…§éœ€æ±‚æ‰§è¡Œæ“ä½œï¼Œæ¯”å¦‚ä»¥ä¸‹ï¼ˆ**è¡¨ç¤ºä¹˜æ–¹ï¼‰ï¼šl = [lambda x: x ** 2, lambda x: x ** 3]for f in l:    print(f(2))&gt;&gt;&gt; 4&gt;&gt;&gt; 8print(l[0](3))&gt;&gt;&gt; 9å®é™…ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥ç”¨pythonä¸­çš„å­—å…¸æˆ–è€…å…¶ä»–çš„æ•°æ®ç»“æ„æ¥æ„å»ºæ›´å¤šç§ç±»çš„è¡Œä¸ºè¡¨ï¼Œä»è€ŒåšåŒæ ·çš„äº‹æƒ…ã€‚map å‡½æ•°ç¨‹åºå¯¹åˆ—è¡¨æˆ–è€…å…¶ä»–åºåˆ—å¸¸å¸¸è¦åšçš„ä¸€ä»¶äº‹å°±æ˜¯å¯¹æ¯ä¸ªå…ƒç´ è¿›è¡Œä¸€ä¸ªæ“ä½œï¼Œå¹¶æŠŠå…¶ç»“æœé›†åˆèµ·æ¥ã€‚pythonæä¾›äº†ä¸€ä¸ªå·¥å…·mapï¼Œå®ƒä¼šå¯¹ä¸€ä¸ªåºåˆ—å¯¹è±¡ä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ åº”ç”¨è¯¥çš„å‡½æ•°ï¼Œå¹¶è¿”å›ä¸€ä¸ªåŒ…å«äº†æ‰€æœ‰å‡½æ•°è°ƒç”¨ç»“æœçš„åˆ—è¡¨ã€‚ä¸¾ä¸ªæ —å­ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªåˆ—è¡¨ï¼Œéœ€è¦å°†åˆ—è¡¨çš„æ¯ä¸€ä¸ªå­—æ®µ+10ï¼Œæˆ‘ä»¬è¯¥å¦‚ä½•æ“ä½œï¼Ÿlist_show = [1, 2, 3, 4]# æ–¹å¼1new_list_show = []for i in list_show:    new_list_show.append(i + 10)print(new_list_show)# æ–¹å¼2def adds(x):    return x + 10print(list(map(adds, list_show)))# æ›´ä¼˜é›…çš„æ–¹å¼3ï¼šprint(list(map(lambda x: x + 10, list_show)))filterå‡½æ•°filter é€šè¿‡å­—é¢æ„æ€ï¼Œå¤§å®¶å°±çŸ¥é“å®ƒçš„ç”¨å¤„äº†ï¼Œç”¨äºæ•°æ®çš„è¿‡æ»¤æ“ä½œï¼Œå®ƒä¹Ÿæ˜¯ lambda çš„ä¸€ä¸ªå¥½åŸºå‹ï¼Œä¸¾ä¸ªæ —å­ã€‚æˆ‘ä»¬éœ€è¦è¿‡æ»¤0-9ä¸­ï¼Œèƒ½è¢«2æ•´é™¤çš„æ•°å­—ç»„æˆä¸€ä¸ªåˆ—è¡¨ï¼Œæˆ‘ä»¬è¯¥å¦‚ä½•æ“ä½œï¼Ÿåªéœ€è¦ä¸€è¡Œä»£ç ï¼šprint(list(filter(lambda x: x % 2 == 0,range(10))))&gt;&gt;&gt; [0, 2, 4, 6, 8]2. np.random2.1. .seed()numpy.random.seed() ï¼šè®¾ç½® seed() é‡Œçš„æ•°å­—å°±ç›¸å½“äºè®¾ç½®äº†ä¸€ä¸ªç››æœ‰éšæœºæ•°çš„â€œèšå®ç›†â€ï¼Œä¸€ä¸ªæ•°å­—ä»£è¡¨ä¸€ä¸ªâ€œèšå®ç›†â€ï¼Œå½“æˆ‘ä»¬åœ¨ seed() çš„æ‹¬å·é‡Œè®¾ç½®ç›¸åŒçš„seedï¼Œâ€œèšå®ç›†â€å°±æ˜¯ä¸€æ ·çš„ï¼Œé‚£å½“ç„¶æ¯æ¬¡æ‹¿å‡ºçš„éšæœºæ•°å°±ä¼šç›¸åŒï¼ˆä¸è¦è§‰å¾—å°±æ˜¯ä»é‡Œé¢éšæœºå–æ•°å­—ï¼Œåªè¦è®¾ç½®çš„seedç›¸åŒå–å‡ºåœ°éšæœºæ•°å°±ä¸€æ ·ï¼‰ã€‚å¦‚æœä¸è®¾ç½®seedï¼Œåˆ™æ¯æ¬¡ä¼šç”Ÿæˆä¸åŒçš„éšæœºæ•°ã€‚ï¼ˆæ³¨ï¼šseedæ‹¬å·é‡Œçš„æ•°å€¼åŸºæœ¬å¯ä»¥éšä¾¿è®¾ç½®å“¦ï¼‰ã€‚ä¸‹é¢ç»™ä¸ªä¾‹å­ï¼Œè¡¨æ˜æ¯æ¬¡randä¹‹å‰éƒ½è¦è®¾ç½®ä¸€æ¬¡seedï¼Œåªè¦è®¾ç½®çš„seedç›¸åŒï¼Œé‚£ä¹ˆäº§ç”Ÿçš„éšæœºæ•°å°±ç›¸åŒã€‚&gt;&gt;&gt; np.random.seed(0)&gt;&gt;&gt; np.random.rand(4,3)array([[0.5488135 , 0.71518937, 0.60276338],       [0.54488318, 0.4236548 , 0.64589411],       [0.43758721, 0.891773  , 0.96366276],       [0.38344152, 0.79172504, 0.52889492]])&gt;&gt;&gt; np.random.seed(0)&gt;&gt;&gt; np.random.rand(4,3)array([[0.5488135 , 0.71518937, 0.60276338],       [0.54488318, 0.4236548 , 0.64589411],       [0.43758721, 0.891773  , 0.96366276],       [0.38344152, 0.79172504, 0.52889492]])ç»™éšæœºç”Ÿæˆå™¨è®¾ç½®seedçš„ç›®çš„æ˜¯æ¯æ¬¡è¿è¡Œç¨‹åºå¾—åˆ°çš„éšæœºæ•°çš„å€¼ç›¸åŒï¼Œè¿™æ ·æ–¹ä¾¿æµ‹è¯•ã€‚ä½†æ˜¯ numpy.random.seed() ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå¦‚æœç¨‹åºä¸­æœ‰å¤šä¸ªçº¿ç¨‹æœ€å¥½ä½¿ç”¨ numpy.random.RandomState å®ä¾‹å¯¹è±¡æ¥åˆ›å»ºæˆ–è€…ä½¿ç”¨random.seed() æ¥è®¾ç½®ç›¸åŒçš„éšæœºæ•°ç§å­ã€‚2.2. .RandomState()numpy.random.RandomState() æ˜¯ä¸€ä¸ªä¼ªéšæœºæ•°ç”Ÿæˆå™¨ã€‚é‚£ä¹ˆä¼ªéšæœºæ•°æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿä¼ªéšæœºæ•°æ˜¯ç”¨ç¡®å®šæ€§çš„ç®—æ³•è®¡ç®—å‡ºæ¥çš„ä¼¼æ¥è‡ª[0,1]å‡åŒ€åˆ†å¸ƒçš„éšæœºæ•°åºåˆ—ã€‚å¹¶ä¸çœŸæ­£çš„éšæœºï¼Œä½†å…·æœ‰ç±»ä¼¼äºéšæœºæ•°çš„ç»Ÿè®¡ç‰¹å¾ï¼Œå¦‚å‡åŒ€æ€§ã€ç‹¬ç«‹æ€§ç­‰ã€‚ä¸‹é¢æˆ‘ä»¬æ¥çœ‹çœ‹å®ƒçš„ç”¨æ³•ï¼š&gt;&gt;&gt; import numpy as np&gt;&gt;&gt; rng = np.random.RandomState(0)&gt;&gt;&gt; rng.rand(4)array([0.5488135 , 0.71518937, 0.60276338, 0.54488318])&gt;&gt;&gt; rng = np.random.RandomState(0)&gt;&gt;&gt; rng.rand(4)array([0.5488135 , 0.71518937, 0.60276338, 0.54488318])çœ‹ï¼Œæ˜¯ä¸æ˜¯ç”Ÿæˆäº†ä¸€æ ·çš„éšæœºæ•°ç»„å‘¢ï¼Œè¿™ç‚¹å’Œnumpy.random.seedï¼ˆï¼‰è¿˜æ˜¯å¾ˆä¸€æ ·çš„ã€‚å› ä¸ºæ˜¯ä¼ªéšæœºæ•°ï¼Œæ‰€ä»¥å¿…é¡»åœ¨rngè¿™ä¸ªå˜é‡ä¸‹ä½¿ç”¨ï¼Œå¦‚æœä¸è¿™æ ·åšï¼Œé‚£ä¹ˆå°±å¾—ä¸åˆ°ç›¸åŒçš„éšæœºæ•°ç»„äº†ï¼Œå³ä¾¿ä½ å†æ¬¡è¾“å…¥äº†numpy.random.RandomState()ï¼šnp.random.RandomState(0)Out[397]: &lt;mtrand.RandomState at 0xddaa288&gt;np.random.rand(4)Out[398]: array([0.62395295, 0.1156184 , 0.31728548, 0.41482621])np.random.RandomState(0)Out[399]: &lt;mtrand.RandomState at 0xddaac38&gt;np.random.rand(4)Out[400]: array([0.86630916, 0.25045537, 0.48303426, 0.98555979])2.3. .choice()choice() æ–¹æ³•è¿”å›ä¸€ä¸ªåˆ—è¡¨ï¼Œå…ƒç»„æˆ–å­—ç¬¦ä¸²çš„éšæœºé¡¹ã€‚æ³¨æ„ï¼šchoice()æ˜¯ä¸èƒ½ç›´æ¥è®¿é—®çš„ï¼Œéœ€è¦å¯¼å…¥ random æ¨¡å—ï¼Œç„¶åé€šè¿‡ random é™æ€å¯¹è±¡è°ƒç”¨è¯¥æ–¹æ³•ã€‚&gt;&gt;&gt; import random&gt;&gt;&gt; print \"choice([1, 2, 3, 5, 9]) : \", random.choice([1, 2, 3, 5, 9])choice([1, 2, 3, 5, 9]) :  2&gt;&gt;&gt; print \"choice('A String') : \", random.choice('A String')choice('A String') :  nç»™å®šsizeå‚æ•°åï¼Œå¯ä»¥ç”ŸæˆæŒ‡å®šsizeçš„éšæœºæ•°ï¼Œå¦‚æœéœ€è¦æ¯ä¸€æ¬¡äº§ç”Ÿçš„éšæœºæ•°ç›¸åŒï¼Œåˆ™éœ€è¦è®¾ç½®éšæœºæ•°ç§å­ï¼Œrandom.seed(int) æˆ–è€… random.RandomState(int)ã€‚import numpy as npseed = 0rng = np.random.RandomState(seed)rng.choice(50, 10)numpy.random.choice(a, size=None, replace=True, p=None)  a : å¦‚æœæ˜¯ä¸€ç»´æ•°ç»„ï¼Œå°±è¡¨ç¤ºä»è¿™ä¸ªä¸€ç»´æ•°ç»„ä¸­éšæœºé‡‡æ ·ï¼›å¦‚æœæ˜¯intå‹ï¼Œå°±è¡¨ç¤ºä»0åˆ°a-1è¿™ä¸ªåºåˆ—ä¸­éšæœºé‡‡æ ·ã€‚  size : é‡‡æ ·ç»“æœçš„æ•°é‡ï¼Œé»˜è®¤ä¸º1.å¯ä»¥æ˜¯æ•´æ•°ï¼Œè¡¨ç¤ºè¦é‡‡æ ·çš„æ•°é‡ï¼›ä¹Ÿå¯ä»¥ä¸ºtupleï¼Œå¦‚(m, n, k)ï¼Œåˆ™è¦é‡‡æ ·çš„æ•°é‡ä¸ºm * n * kï¼Œsizeä¸º(m, n, k)ã€‚  replace : booleanå‹ï¼Œé‡‡æ ·çš„æ ·æœ¬æ˜¯å¦è¦æ›´æ¢ï¼Ÿè¿™ä¸ªåœ°æ–¹æˆ‘ä¸å¤ªç†è§£ï¼Œæµ‹äº†ä¸€ä¸‹å‘ç°replaceæŒ‡å®šä¸ºTrueæ—¶ï¼Œé‡‡æ ·çš„å…ƒç´ ä¼šæœ‰é‡å¤ï¼›å½“replaceæŒ‡å®šä¸ºFalseæ—¶ï¼Œé‡‡æ ·ä¸ä¼šé‡å¤ã€‚  p : ä¸€ä¸ªä¸€ç»´æ•°ç»„ï¼Œåˆ¶å®šäº†aä¸­æ¯ä¸ªå…ƒç´ é‡‡æ ·çš„æ¦‚ç‡ï¼Œè‹¥ä¸ºé»˜è®¤çš„Noneï¼Œåˆ™aä¸­æ¯ä¸ªå…ƒç´ è¢«é‡‡æ ·çš„æ¦‚ç‡ç›¸åŒã€‚2.4. .uniform()uniform() æ–¹æ³•å°†éšæœºç”Ÿæˆä¸‹ä¸€ä¸ªå®æ•°ï¼ˆæµ®ç‚¹æ•°ï¼‰ï¼Œå®ƒåœ¨ [x, y] èŒƒå›´å†…ã€‚æ³¨æ„ï¼šuniform()æ˜¯ä¸èƒ½ç›´æ¥è®¿é—®çš„ï¼Œéœ€è¦å¯¼å…¥ random æ¨¡å—ï¼Œç„¶åé€šè¿‡ random é™æ€å¯¹è±¡è°ƒç”¨è¯¥æ–¹æ³•ã€‚import randomrandom.uniform(x, y)å…¶ä¸­xå’Œyæ˜¯éšæœºæ•°çš„å–å€¼ç•Œé™ï¼Œä¸”ä¸åŒ…å«æœ¬èº«ã€‚2.5. .permutation()éšæœºæ’åˆ—ä¸€ä¸ªåºåˆ—ï¼Œè¿”å›ä¸€ä¸ªæ’åˆ—çš„åºåˆ—ã€‚&gt;&gt;&gt; np.random.permutation(10)array([1, 7, 4, 3, 0, 9, 2, 5, 8, 6])&gt;&gt;&gt; np.random.permutation([1, 4, 9, 12, 15])array([15,  1,  9,  4, 12])ä¸ random.shuffle(x) çš„åŒºåˆ«åœ¨äºï¼Œshuffleç›´æ¥æ”¹å˜åŸå§‹æ•°ç»„xï¼Œè€Œpermutationä¸æ”¹å˜åŸæ•°ç»„ï¼Œè€Œæ˜¯èµ‹å€¼ç»™æ–°æ•°ç»„ã€‚å¦‚æœxæ˜¯intå‹ï¼Œï¼Œåˆ™è¿”å›ä»0åˆ°x-1è¿™ä¸ªåºåˆ—çš„éšæœºé¡ºåºã€‚3. range()å‡½æ•°è¯­æ³•ï¼šrange(start, stop[, step])å‚æ•°è¯´æ˜ï¼š  start: è®¡æ•°ä» start å¼€å§‹ã€‚é»˜è®¤æ˜¯ä» 0 å¼€å§‹ã€‚ä¾‹å¦‚rangeï¼ˆ5ï¼‰ç­‰ä»·äºrangeï¼ˆ0ï¼Œ 5ï¼‰;  stop: è®¡æ•°åˆ° stop ç»“æŸï¼Œä½†ä¸åŒ…æ‹¬ stopã€‚ä¾‹å¦‚ï¼šrangeï¼ˆ0ï¼Œ 5ï¼‰ æ˜¯[0, 1, 2, 3, 4]æ²¡æœ‰5ï¼›  stepï¼šæ­¥é•¿ï¼Œé»˜è®¤ä¸º1ã€‚ä¾‹å¦‚ï¼šrangeï¼ˆ0ï¼Œ 5ï¼‰ ç­‰ä»·äº range(0, 5, 1)ã€‚4. å‚è€ƒæ–‡çŒ®æ— ã€‚"
  },
  
  {
    "title": "Windows10é€šè¿‡åº”ç”¨å•†åº—å®‰è£…Ubuntu",
    "url": "/posts/Ubuntu-In-Windows-10/",
    "categories": "Tutorial, Coding",
    "tags": "linux",
    "date": "2020-07-26 10:55:19 +0800",
    





    
    "snippet": "æœ¬æ–‡ä¸»è¦ä»‹ç» Windows10 ä¸‹éƒ¨ç½² Ubuntu çš„ä¸€ç§æ–¹æ³•â€”â€”å€ŸåŠ© Microsoft Store éƒ¨ç½²ã€‚ç”±äºç§‘ç ”éœ€è¦ï¼Œä¸€äº›ç¨‹åºå’Œæ•°æ®éœ€è¦åœ¨ linux ç¯å¢ƒä¸‹è¿›è¡Œæ“ä½œï¼Œåœ¨ä¸å®‰è£…åŒç³»ç»Ÿå’Œéƒ¨ç½²è™šæ‹Ÿæœºçš„å‰æä¸‹ï¼Œå°è¯•æœ¬æ–¹æ³•è¿›è¡Œ Ubuntu çš„å®‰è£…ã€‚  1. ç¯å¢ƒé…ç½®  2. ä¸‹è½½å’Œå®‰è£…  3. æ³¨æ„äº‹é¡¹  4. åŸºæœ¬æ“ä½œ          4.1. å¤‡ä»½ã€åˆ é™¤å’Œè¿˜åŸ      4.2. ...",
    "content": "æœ¬æ–‡ä¸»è¦ä»‹ç» Windows10 ä¸‹éƒ¨ç½² Ubuntu çš„ä¸€ç§æ–¹æ³•â€”â€”å€ŸåŠ© Microsoft Store éƒ¨ç½²ã€‚ç”±äºç§‘ç ”éœ€è¦ï¼Œä¸€äº›ç¨‹åºå’Œæ•°æ®éœ€è¦åœ¨ linux ç¯å¢ƒä¸‹è¿›è¡Œæ“ä½œï¼Œåœ¨ä¸å®‰è£…åŒç³»ç»Ÿå’Œéƒ¨ç½²è™šæ‹Ÿæœºçš„å‰æä¸‹ï¼Œå°è¯•æœ¬æ–¹æ³•è¿›è¡Œ Ubuntu çš„å®‰è£…ã€‚  1. ç¯å¢ƒé…ç½®  2. ä¸‹è½½å’Œå®‰è£…  3. æ³¨æ„äº‹é¡¹  4. åŸºæœ¬æ“ä½œ          4.1. å¤‡ä»½ã€åˆ é™¤å’Œè¿˜åŸ      4.2. åˆ‡æ¢æ•°æ®æº      4.3. Windowsè®¿é—®Linuxæ–‡ä»¶      4.4. Linuxè®¿é—®Windowsæ–‡ä»¶      4.5. è§£å‹taræ–‡ä»¶        5. å‚è€ƒæ–‡çŒ®1. ç¯å¢ƒé…ç½®é¦–å…ˆï¼Œå¯ç”¨å¼€å‘è€…æ¨¡å¼ï¼šèœå•æ æ‰“å¼€è®¾ç½®â€”â€”ç‚¹å‡»æ›´æ–°å’Œå®‰å…¨â€”â€”å¯ç”¨å¼€å‘äººå‘˜æ¨¡å¼ï¼ˆæ—¶é—´ä¼šæœ‰ç‚¹é•¿ï¼‰å…¶æ¬¡ï¼Œæ›´æ”¹ç³»ç»ŸåŠŸèƒ½ï¼šå¿…é¡»å…ˆå¯ç”¨â€œé€‚ç”¨äº Linux çš„ Windows å­ç³»ç»Ÿâ€å¯é€‰åŠŸèƒ½ï¼Œç„¶åæ‰èƒ½åœ¨ Windows ä¸Šå®‰è£… Linux åˆ†å‘ç‰ˆã€‚ä»¥ç®¡ç†å‘˜èº«ä»½æ‰“å¼€ PowerShell å¹¶è¿è¡Œdism.exe /online /enable-feature /featurename:Microsoft-Windows-Subsystem-Linux /all /norestartæˆ–è€…é€šè¿‡æ§åˆ¶é¢æ¿è¿›è¡Œç•Œé¢é…ç½®ï¼ˆéœ€è¦é‡å¯ï¼‰2. ä¸‹è½½å’Œå®‰è£…æ‰“å¼€ Microsoft Storeï¼Œå¹¶é€‰æ‹©ä½ åå¥½çš„ Linux åˆ†å‘ç‰ˆã€‚é€‰æ‹©å¥½ç‰ˆæœ¬åï¼Œé€‰æ‹©ã€Œè·å–ã€ï¼Œç„¶åç‚¹å‡»ã€Œå®‰è£…ã€ã€‚å¦‚æœå¤šæ¬¡ç‚¹å‡»å¹¶æ— ååº”ï¼Œå¯ä»¥ç­‰å¾…ä¸€å®šæ—¶é—´åè¿”å›åˆ°Microsoft Storeé¦–é¡µï¼Œå†æ¬¡å‰å¾€è¯¥åˆ†å‘ç‰ˆçš„ Linux åº”ç”¨é¡µé¢ï¼Œè¯¥åº”ç”¨å¯èƒ½å·²ç»åœ¨åå°å®‰è£…å®Œæ¯•ã€‚ç‚¹å‡»ã€Œå¯åŠ¨ã€ï¼Œå°†æ‰“å¼€ä¸€ä¸ªæ§åˆ¶å°çª—å£ï¼Œç³»ç»Ÿä¼šè¦æ±‚ä½ ç­‰å¾…ä¸€åˆ†é’Ÿæˆ–ä¸¤åˆ†é’Ÿï¼Œä»¥ä¾¿æ–‡ä»¶è§£å‹ç¼©å¹¶å­˜å‚¨åˆ°ç”µè„‘ä¸Šã€‚ æœªæ¥çš„æ‰€æœ‰å¯åŠ¨æ—¶é—´åº”ä¸åˆ°ä¸€ç§’ã€‚ç„¶åï¼Œéœ€è¦ä¸ºæ–°çš„ Linux åˆ†å‘ç‰ˆåˆ›å»ºç”¨æˆ·å¸æˆ·å’Œå¯†ç ã€‚ï¼ˆæ³¨æ„ï¼Œlinux ç³»ç»Ÿä¸­ï¼Œè¾“å…¥å¯†ç æ—¶é»˜è®¤æ—¶ä¸æ˜¾ç¤ºä»»ä½•å†…å®¹çš„ï¼‰æç¤º Installation successful! è¡¨æ˜ç³»ç»Ÿå®‰è£…å®Œæ¯•ã€‚é€šè¿‡ Windows Store å®‰è£…çš„ Linux å­ç³»ç»Ÿï¼Œå…¶å­˜æ”¾è·¯å¾„ä½äºC:\\Users\\[YourUserName]\\AppData\\Local\\Packages\\CanonicalGroupLimited.Ubuntu20.04onWindows_79rhkp1fndgsc\\LocalState\\rootfså…¶ä¸­ [YourUserName] æ˜¯ä¸ªäººçš„ç”µè„‘ç”¨æˆ·åï¼ŒCanonicalGroupLimited.XXX æ˜¯ç›¸åº”çš„å­ç³»ç»Ÿç‰ˆæœ¬ã€‚é€šè¿‡ä¸Šè¿°è·¯å¾„å¯ä»¥æ–¹ä¾¿çš„è¿›è¡Œæ–‡ä»¶ç®¡ç†ã€‚3. æ³¨æ„äº‹é¡¹  WslRegisterDistribution å¤±è´¥å¹¶å‡ºç°é”™è¯¯ 0x8007019e          æœªå¯ç”¨â€œé€‚ç”¨äº Linux çš„ Windows å­ç³»ç»Ÿâ€å¯é€‰ç»„ä»¶ï¼š      æ‰“å¼€â€œæ§åˆ¶é¢æ¿â€ -&gt; â€œç¨‹åºå’ŒåŠŸèƒ½â€ -&gt; â€œæ‰“å¼€æˆ–å…³é—­ Windows åŠŸèƒ½â€-&gt; é€‰ä¸­â€œé€‚ç”¨äº Linux çš„ Windows å­ç³»ç»Ÿâ€ï¼Œæˆ–ä½¿ç”¨æœ¬æ–‡å¼€å¤´æ‰€è¿°çš„ PowerShell cmdletã€‚        å®‰è£…å¤±è´¥ï¼Œå‡ºç°é”™è¯¯ 0x80070003 æˆ–é”™è¯¯ 0x80370102          è¯·ç¡®ä¿åœ¨è®¡ç®—æœºçš„ BIOS å†…å·²å¯ç”¨è™šæ‹ŸåŒ–ã€‚ æœ‰å…³å¦‚ä½•æ‰§è¡Œæ­¤æ“ä½œçš„è¯´æ˜å› è®¡ç®—æœºè€Œå¼‚ï¼Œå¹¶ä¸”å¾ˆå¯èƒ½åœ¨ CPU ç›¸å…³é€‰é¡¹ä¸‹ã€‚        å°è¯•å‡çº§æ—¶å‡ºé”™ï¼šInvalid command line option: wsl --set-version Ubuntu 2          è¯·ç¡®ä¿å·²å¯ç”¨é€‚ç”¨äº Linux çš„ Windows å­ç³»ç»Ÿï¼Œå¹¶ä¸”ä½ ä½¿ç”¨çš„æ˜¯ Windows å†…éƒ¨ç‰ˆæœ¬ 19041 æˆ–æ›´é«˜ç‰ˆæœ¬ã€‚ è‹¥è¦å¯ç”¨ WSLï¼Œè¯·åœ¨ PowerShell æç¤ºç¬¦ä¸‹ä»¥å…·æœ‰ç®¡ç†å‘˜æƒé™çš„èº«ä»½è¿è¡Œæ­¤å‘½ä»¤ï¼šEnable-WindowsOptionalFeature -Online -FeatureName Microsoft-Windows-Subsystem-Linuxã€‚ å¯åœ¨æ­¤å¤„æ‰¾åˆ°å®Œæ•´çš„ WSL å®‰è£…è¯´æ˜ã€‚        ç”±äºè™šæ‹Ÿç£ç›˜ç³»ç»Ÿçš„æŸä¸ªé™åˆ¶ï¼Œæ— æ³•å®Œæˆæ‰€è¯·æ±‚çš„æ“ä½œã€‚è™šæ‹Ÿç¡¬ç›˜æ–‡ä»¶å¿…é¡»æ˜¯è§£å‹ç¼©çš„ä¸”æœªåŠ å¯†çš„ï¼Œå¹¶ä¸”ä¸èƒ½æ˜¯ç¨€ç–çš„ã€‚          è¯·æ£€æŸ¥ WSL GitHub ä¸»é¢˜ #4103ï¼Œå…¶ä¸­è·Ÿè¸ªäº†æ­¤é—®é¢˜ä»¥æä¾›æ›´æ–°çš„ä¿¡æ¯ã€‚        æ— æ³•å°†è¯è¯­â€œwslâ€è¯†åˆ«ä¸º cmdletã€å‡½æ•°ã€è„šæœ¬æ–‡ä»¶æˆ–å¯è¿è¡Œç¨‹åºçš„åç§°ã€‚          è¯·ç¡®ä¿å·²å®‰è£…â€œé€‚ç”¨äº Linux çš„ Windows å­ç³»ç»Ÿâ€å¯é€‰ç»„ä»¶ã€‚ æ­¤å¤–ï¼Œå¦‚æœä½ ä½¿ç”¨çš„æ˜¯ ARM64 è®¾å¤‡ï¼Œå¹¶ä» PowerShell è¿è¡Œæ­¤å‘½ä»¤ï¼Œåˆ™ä¼šæ”¶åˆ°æ­¤é”™è¯¯ã€‚ è¯·æ”¹ä¸ºä» PowerShell Core æˆ–ä»å‘½ä»¤æç¤ºç¬¦è¿è¡Œ wsl.exeã€‚      4. åŸºæœ¬æ“ä½œå¯¹ linux å­ç³»ç»Ÿçš„æ“ä½œå¯åŸºäº windows subsystem for linux (wsl) æ¥è¿›è¡Œã€‚Windowsé”®+Rï¼Œè¾“å…¥ cmd å›è½¦ï¼Œæ‰“å¼€å‘½ä»¤è¡Œçª—å£ã€‚è¾“å…¥wsl -l,å¯ä»¥çœ‹åˆ°æˆ‘ç³»ç»Ÿé‡Œè£…çš„ linux ç³»ç»Ÿå‘è¡Œç‰ˆæœ¬ã€‚è¾“å…¥wsl --version å¯ä»¥çœ‹åˆ°ç‰ˆæœ¬ä¿¡æ¯å’Œå‘½ä»¤è¡Œå‚æ•°ä¸€è§ˆã€‚4.1. å¤‡ä»½ã€åˆ é™¤å’Œè¿˜åŸå¤‡ä»½å­ç³»ç»Ÿéå¸¸ç®€å•ï¼Œä½†ä¸€å®šè¦å…ˆåœæ­¢å­ç³»ç»Ÿä¹‹åå†å¤‡ä»½wsl --export Ubuntu-20.04 c:\\XXX\\Ubuntu-18.04-20200726.tarå¾…å®Œæˆå³å¯ã€‚å¤‡ä»½æˆåŠŸåï¼Œå­ç³»ç»Ÿä¼šè¢«æ‰“åŒ…æˆå‘½ä»¤ä¸­æŒ‡å®šåç§°çš„taræ–‡ä»¶ã€‚åˆ é™¤å­ç³»ç»Ÿä¹Ÿæ˜¯ä¸€ä¸ªå‘½ä»¤å³å¯ï¼šwsl --unregister Ubuntu-12.04è¿˜åŸå­ç³»ç»Ÿã€‚ åˆ é™¤äº†æ²¡å…³ç³»ï¼Œåˆšæ‰åšäº†å¤‡ä»½ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªå‘½ä»¤è¿˜åŸï¼šwsl --import Ubuntu-20.04 c:\\AAA c:\\XXX\\Ubuntu-20.04-20200726.tarè¿™é‡Œæ³¨æ„æŒ‡å®šè¿˜åŸçš„è·¯å¾„ã€‚æˆåŠŸåï¼Œå­ç³»ç»Ÿåˆå›æ¥äº†ï¼Œå¯ä»¥ç”¨wsl -lç¡®è®¤ä¸€ä¸‹ã€‚4.2. åˆ‡æ¢æ•°æ®æºåœ¨ Ubuntu ä¸‹æˆ‘ä»¬å¯ä»¥é€šè¿‡ apt-get å‘½ä»¤ å¾ˆæ–¹ä¾¿çš„å®‰è£… / å¸è½½è½¯ä»¶ï¼Œåˆ‡æ¢æ•°æ®æºä¸ºå›½å†…çš„é•œåƒç«™ç‚¹é€Ÿåº¦ä¼šå˜å¿«ã€‚ç¼–è¾‘æ•°æ®æºé…ç½®æ–‡ä»¶vi /etc/apt/sources.listç»§ç»­æŒ‰enteré”®è¿›å…¥çœŸæ­£çš„viç¼–è¾‘é¡µé¢  ç§‘æ™®ï¼šviç¼–è¾‘å™¨ä¸€å…±æœ‰ä¸‰ç§æ¨¡å¼ï¼š å‘½ä»¤æ¨¡å¼ï¼ˆcommand modeï¼‰ æ’å…¥æ¨¡å¼ï¼ˆInsert modeï¼‰ åº•è¡Œæ¨¡å¼ï¼ˆlast line modeï¼‰ å‘½ä»¤æ¨¡å¼ä¸‹æˆ‘ä»¬åªèƒ½æ§åˆ¶å±å¹•å…‰æ ‡çš„ç§»åŠ¨ï¼Œå­—ç¬¦ã€å­—æˆ–è¡Œçš„åˆ é™¤ï¼Œç§»åŠ¨å¤åˆ¶æŸåŒºæ®µåŠè¿›å…¥Insert modeä¸‹ï¼Œæˆ–è€…åˆ° last line modeç­‰ï¼›æ’å…¥æ¨¡å¼ä¸‹å¯ä»¥åšæ–‡å­—è¾“å…¥ï¼ŒæŒ‰ã€ŒESCã€é”®å¯å›åˆ°å‘½ä»¤è¡Œæ¨¡å¼ï¼›åº•è¡Œæ¨¡å¼ä¸‹ï¼Œå¯ä»¥å°†æ–‡ä»¶ä¿å­˜æˆ–é€€å‡ºviï¼Œä¹Ÿå¯ä»¥è®¾ç½®ç¼–è¾‘ç¯å¢ƒï¼Œå¦‚å¯»æ‰¾å­—ç¬¦ä¸²ã€åˆ—å‡ºè¡Œå·ç­‰ã€‚å½“æˆ‘ä»¬è¿›å…¥viç¼–è¾‘å™¨çš„æ—¶å€™é»˜è®¤æ˜¯å‘½ä»¤è¡Œæ¨¡å¼ï¼Œè¿™æ—¶å¦‚æœæƒ³ç¼–è¾‘å†…å®¹ï¼Œå°±è¾“å…¥ i å‘½ä»¤å°±å¯ä»¥äº†ã€‚ç°åœ¨æˆ‘ä»¬è¦æŠŠé•œåƒæºæ”¹ä¸ºé˜¿é‡Œçš„ï¼Œæ‰€ä»¥æ’å…¥å¦‚ä¸‹å†…å®¹ï¼šdeb http://mirrors.aliyun.com/ubuntu/ trusty main restricted universe multiversedeb http://mirrors.aliyun.com/ubuntu/ trusty-security main restricted universe multiversedeb http://mirrors.aliyun.com/ubuntu/ trusty-updates main restricted universe multiversedeb http://mirrors.aliyun.com/ubuntu/ trusty-proposed main restricted universe multiversedeb http://mirrors.aliyun.com/ubuntu/ trusty-backports main restricted universe multiversedeb-src http://mirrors.aliyun.com/ubuntu/ trusty main restricted universe multiversedeb-src http://mirrors.aliyun.com/ubuntu/ trusty-security main restricted universe multiversedeb-src http://mirrors.aliyun.com/ubuntu/ trusty-updates main restricted universe multiversedeb-src http://mirrors.aliyun.com/ubuntu/ trusty-proposed main restricted universe multiversedeb-src http://mirrors.aliyun.com/ubuntu/ trusty-backports main restricted universe multiverseæ¥ç€æŒ‰ã€ŒESCã€é€€ä¼šå‘½ä»¤è¡Œæ¨¡å¼ï¼Œè¾“å…¥å‘½ä»¤ï¼š: wq!ä¿å­˜é€€å‡ºå°±å¥½äº†ã€‚æ¥ç€è¾“å…¥å‘½ä»¤sudo apt-get updateç„¶åè¾“å…¥å¯†ç ï¼Œå›è½¦ï¼Œæ›´æ–°é…ç½®å°±å¯ä»¥äº†ï¼Œé£é€Ÿï¼å¦‚æœå‘½ä»¤è¡Œä¿®æ”¹æ–‡ä»¶ä¸ä¹ æƒ¯ï¼ˆlinuxä¸‹å°±æ˜¯è¿™æ ·ï¼‰ï¼Œå¯åœ¨windowsä¸‹ç›´æ¥æ‰¾åˆ°æ–‡ä»¶ï¼Œç”¨è®°äº‹æœ¬æ‰“å¼€åä¿®æ”¹ä¿å­˜ã€‚æ–‡ä»¶è·¯å¾„åœ¨æ¯”å¦‚C:\\Users\\[YourUserName]\\AppData\\Local\\Packages\\CanonicalGroupLimited.Ubuntu20.04onWindows_79rhkp1fndgsc\\LocalState\\rootfs\\etc\\apt4.3. Windowsè®¿é—®Linuxæ–‡ä»¶é€šè¿‡Windows Store å®‰è£…çš„ Linux å­ç³»ç»Ÿä½äºC:\\Users\\[YourUserName]\\AppData\\Local\\Packages\\CanonicalGroupLimited.Ubuntu20.04onWindows_79rhkp1fndgsc\\LocalState\\rootfsä¹Ÿå¯ä»¥è¿è¡Œå­ç³»ç»Ÿåï¼Œè¾“å…¥explorer.exe .åœ¨èµ„æºç®¡ç†å™¨ç§æ‰“å¼€ç›¸åº”çš„æ–‡ä»¶å¤¹ã€‚4.4. Linuxè®¿é—®Windowsæ–‡ä»¶åœ¨bashç§è¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼Œå³ä¸ºwindowsç³»ç»Ÿä¸‹cd /mntæ¥ç€å°±æ˜¯ä¸æ–­çš„cdè¿›å…¥åˆ°ä½ æ‰€éœ€çš„ç›®å½•ä¸‹ã€‚æ¯”å¦‚æˆ‘ä»¬è¿›å…¥ç³»ç»Ÿå dir æˆ–è€… ls ä¸€ä¸‹å°±å¯ä»¥çœ‹åˆ°ç›®å‰ Windows ç³»ç»Ÿçš„ä¸‰ä¸ªç›˜ç¬¦ï¼ˆå› äººè€Œå¼‚ï¼‰ã€‚cd å°±å¯ä»¥é€çº§è¿›å…¥æ–‡ä»¶å¤¹ã€‚4.5. è§£å‹taræ–‡ä»¶åœ¨ Linux ç³»ç»Ÿç§ï¼Œé€šè¿‡ tar å‘½ä»¤è§£å‹ tar å‹ç¼©åŒ…ã€‚5. å‚è€ƒæ–‡çŒ®[1]  Microsoft. é€‚ç”¨äº Linux çš„ Windows å­ç³»ç»Ÿå®‰è£…æŒ‡å— (Windows 10)."
  },
  
  {
    "title": "å…ƒå­¦ä¹ æ–‡ç« é˜…è¯»ï¼ˆPrototypical Networkï¼‰",
    "url": "/posts/MetaLearning-ProtoNet/",
    "categories": "Academic, Paper",
    "tags": "deep learning, meta learning",
    "date": "2020-07-22 14:35:19 +0800",
    





    
    "snippet": "Prototypical Network åˆç§°ä¸ºåŸå‹ç½‘ç»œï¼Œæ˜¯2017å¹´ NIPS ä¼šè®®è®ºæ–‡æå‡ºçš„ä¸€ç§ç¥ç»ç½‘ç»œè®­ç»ƒæ–¹æ³•ï¼Œæ˜¯ä¸€ç§åŸºäºåº¦é‡ï¼ˆMetrix-basedï¼‰çš„å°æ ·æœ¬å­¦ä¹ æ–¹æ³•ï¼Œé€šè¿‡è®¡ç®— support set ä¸­çš„åµŒå…¥ä¸­å¿ƒï¼Œç„¶åé€šè¿‡è¡¡é‡æ–°æ ·æœ¬ä¸è¿™äº›ä¸­å¿ƒçš„è·ç¦»æ¥å®Œæˆåˆ†ç±»ã€‚  1. Prototypical Network          1.1. æ¨¡å‹      1.2. ç®—æ³•      ...",
    "content": "Prototypical Network åˆç§°ä¸ºåŸå‹ç½‘ç»œï¼Œæ˜¯2017å¹´ NIPS ä¼šè®®è®ºæ–‡æå‡ºçš„ä¸€ç§ç¥ç»ç½‘ç»œè®­ç»ƒæ–¹æ³•ï¼Œæ˜¯ä¸€ç§åŸºäºåº¦é‡ï¼ˆMetrix-basedï¼‰çš„å°æ ·æœ¬å­¦ä¹ æ–¹æ³•ï¼Œé€šè¿‡è®¡ç®— support set ä¸­çš„åµŒå…¥ä¸­å¿ƒï¼Œç„¶åé€šè¿‡è¡¡é‡æ–°æ ·æœ¬ä¸è¿™äº›ä¸­å¿ƒçš„è·ç¦»æ¥å®Œæˆåˆ†ç±»ã€‚  1. Prototypical Network          1.1. æ¨¡å‹      1.2. ç®—æ³•      1.3. è¿›è¡Œæ··åˆå¯†åº¦ä¼°è®¡      1.4. è·ç¦»åº¦é‡        2. å‚è€ƒæ–‡çŒ®1. Prototypical Network2017.ã€ŠPrototypical Networks for Few-shot Learningã€‹æœ¬æ–‡æ˜¯2017å¹´NIPSçš„ä¼šè®®è®ºæ–‡ï¼Œä½œè€…æ¥è‡ªå¤šä¼¦å¤šå¤§å­¦ä»¥åŠTwitterå…¬å¸ã€‚åœ¨è®ºæ–‡ä¸­ä½œè€…æå‡ºäº†ä¸€ç§æ–°çš„åŸºäºåº¦é‡ï¼ˆMetric-basedï¼‰çš„å°‘æ ·æœ¬å­¦ä¹ æ¨¡å‹â€”â€”åŸå‹ç½‘ç»œï¼ˆPrototypical Networksï¼‰ã€‚åŸå‹ç½‘ç»œé¦–å…ˆåˆ©ç”¨ support  set ä¸­æ¯ä¸ªç±»åˆ«æä¾›çš„å°‘é‡æ ·æœ¬ï¼Œè®¡ç®—å®ƒä»¬çš„åµŒå…¥çš„ä¸­å¿ƒï¼Œä½œä¸ºæ¯ä¸€ç±»æ ·æœ¬çš„åŸå‹ï¼ˆPrototypeï¼‰ï¼Œæ¥ç€åŸºäºè¿™äº›åŸå‹å­¦ä¹ ä¸€ä¸ªåº¦é‡ç©ºé—´ï¼Œä½¿å¾—æ–°çš„æ ·æœ¬é€šè¿‡è®¡ç®—è‡ªèº«åµŒå…¥ä¸è¿™äº›åŸå‹çš„è·ç¦»å®ç°æœ€ç»ˆçš„åˆ†ç±»ï¼Œæ€æƒ³ä¸èšç±»ç®—æ³•ååˆ†æ¥è¿‘ï¼Œä½†å‡ºå‘ç‚¹æœ‰ç€å¾ˆå¤§çš„å·®å¼‚ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œä½œè€…åœ¨æ–‡ç« ä¸­è¿˜å°è¯•å°†åŸå‹ç½‘ç»œåº”ç”¨äºé›¶æ ·æœ¬å­¦ä¹ ï¼ˆZero-shot learningï¼‰é—®é¢˜ä¸Šï¼Œé€šè¿‡æ•°æ®é›†æºå¸¦çš„å±æ€§å‘é‡å½¢æˆå…ƒæ•°æ®ï¼ˆmeta-dataï¼‰ï¼ŒåŸºäºè¿™äº›å…ƒæ•°æ®æ„å»ºåŸå‹ï¼Œä»è€Œå®ç°é›¶æ ·æœ¬åˆ†ç±»ã€‚åŸå‹ç½‘ç»œåœ¨å°‘æ ·æœ¬åˆ†ç±»ä¸é›¶æ ·æœ¬åˆ†ç±»ä»»åŠ¡ä¸Šçš„ç¤ºæ„å›¾å¦‚ä¸‹æ‰€ç¤ºã€‚1.1. æ¨¡å‹åœ¨ few-shot åˆ†ç±»ä»»åŠ¡ä¸­ï¼Œå‡è®¾æœ‰ $N$ ä¸ªæ ‡è®°çš„æ ·æœ¬ $S={(x_1,y_1),â€¦,(x_N,y_N)}$ ï¼Œå…¶ä¸­ $x_i \\in \\mathbb R^D$ æ˜¯ $D$ ç»´çš„æ ·æœ¬ç‰¹å¾å‘é‡ï¼Œ$y \\in {1,â€¦,K}$ æ˜¯ç›¸åº”çš„ label ã€‚$S_K$ è¡¨ç¤ºç¬¬ $k$ ç±»æ ·æœ¬çš„é›†åˆã€‚åŸå‹ç½‘ç»œè®¡ç®—æ¯ä¸ªç±»çš„ $M$ ç»´åŸå‹å‘é‡ $c_k \\in \\mathbb R^M$ ï¼Œè®¡ç®—çš„å‡½æ•°ä¸º $f_{\\phi}: \\mathbb R^D \\rightarrow \\mathbb R^M$ ï¼Œå…¶ä¸­ $\\phi$ ä¸ºå¯å­¦ä¹ å‚æ•°ã€‚åŸå‹å‘é‡ $c_k$ å³ä¸º embedding space ä¸­è¯¥ç±»çš„æ‰€æœ‰ support set æ ·æœ¬ç‚¹çš„å‡å€¼å‘é‡\\[c_k = \\frac{1}{|S_K|} \\sum_{(x_i,y_i) \\in S_K} f_{\\phi}(x_i)\\]ç»™å®šä¸€ä¸ªè·ç¦»å‡½æ•° $d: \\mathbb R^M \\times \\mathbb R^M \\rightarrow [0,+\\infty)$ ï¼ŒåŸå‹ç½‘ç»œé€šè¿‡åœ¨ embedding space ä¸­å¯¹è·ç¦»è¿›è¡Œ softmax è®¡ç®—ï¼Œå¯ä»¥å¾—åˆ°ä¸€ä¸ªé’ˆå¯¹ $x$ çš„æ ·æœ¬ç‚¹çš„æ¦‚ç‡åˆ†å¸ƒ\\[p_{\\phi}(y=k|x)=\\frac{exp(-d(f_{\\phi},c_k))}{\\sum_{k'}exp(-d(f_{\\phi}(x),c_{k'}))}\\]é€šè¿‡åœ¨ SGD ä¸­æœ€å°åŒ–ç¬¬ $k$ ç±»çš„è´Ÿå¯¹æ•°ä¼¼ç„¶å‡½æ•° $J(\\phi)$ æ¥æ¨è¿›å­¦ä¹ \\[J(\\phi) = -log\\; p(\\phi)(y=k|x)\\]1.2. ç®—æ³•å…¶ä¸­  $N$ æ˜¯è®­ç»ƒé›†ä¸­çš„æ ·æœ¬ä¸ªæ•°ï¼›  $K$ æ˜¯è®­ç»ƒé›†ä¸­çš„ç±»ä¸ªæ•°ï¼›  $N_C \\leq K$ æ˜¯æ¯ä¸ª episode é€‰å‡ºçš„ç±»ä¸ªæ•°ï¼›  $N_S$ æ˜¯æ¯ç±»ä¸­ support set çš„æ ·æœ¬ä¸ªæ•°ï¼›  $N_Q$ æ˜¯æ¯ç±»ä¸­ query set çš„æ ·æœ¬ä¸ªæ•°ï¼›  $RANDOMSAMPLE(S,N)$ è¡¨ç¤ºä»é›†åˆ S ä¸­éšæœºé€‰å‡º N ä¸ªå…ƒç´ ã€‚ä¸‹é¢è¯¦ç»†åˆ†æç®—æ³•ã€‚é¦–å…ˆï¼Œç®—æ³•è¾“å…¥è®­ç»ƒé›† $D={(x_1,y_1),â€¦,(x_N,y_N)}$ï¼Œå…¶ä¸­ $y_i$ æ˜¯æ ‡ç­¾ï¼Œ$D_k$ åˆ™æ˜¯æ ‡ç­¾ $y_i=k$ çš„å­è®­ç»ƒé›†ã€‚ç®—æ³•è¾“å‡ºæŸå¤±å‡½æ•° $J$ã€‚åœ¨æ¯ä¸ª episode ä¸­ï¼šç¬¬ä¸€æ­¥ï¼Œä»è®­ç»ƒé›†ä¸­çš„ $K$ ä¸ªç±»ä¸­éšæœºé€‰å– $N_C$ ä¸ªç±»ï¼Œå½¢æˆå­é›† $V$ï¼›ç¬¬äºŒæ­¥ï¼Œå¯¹äº $V$ ä¸­çš„æ¯ä¸ªç±» $k$ï¼Œç›¸åº”çš„è®­ç»ƒé›†ä¸º $D_{Vk}$  éšæœºé€‰å– $D_{Vk}$ ä¸­ $N_S$ ä¸ªæ ·æœ¬ä½œä¸º $S_k$ (support set)  å‰©ä½™æ ·æœ¬ä½œä¸º $S_q$ (query set)  è®¡ç®—è¯¥ç±»ï¼ˆç¬¬ $k$ ä¸ªç±»ï¼‰çš„åŸå‹å‘é‡ $c_k$ï¼Œå…¬å¼å¦‚ä¸‹\\[c_k = \\frac{1}{N_S} \\sum_{(x_i,y_i) \\in S_K} f_{\\phi}(x_i)\\]æ³¨æ„ï¼Œæ­¤å¤„å…¬å¼ä¸åŸæ–‡ä¸åŒï¼ŒåŸæ–‡åˆ†æ¯ä¸º $N_C$ ï¼Œå¼ºçƒˆæ€€ç–‘å†™é”™äº†ï¼Œå› ä¸ºæœ¬æ­¥ä¸­å¯¹å•ä¸€ç±»åˆ«çš„æ‰€æœ‰ support set è®¡ç®—åŸå‹å‘é‡ï¼Œåº”è¯¥é€šè¿‡é™¤ä»¥support set ä¸­çš„æ ·æœ¬ä¸ªæ•° $N_S$ è€Œä¸æ˜¯ç±»ä¸ªæ•° $N_C$ æ¥è®¡ç®—å‡å€¼ã€‚ç¬¬äºŒæ­¥å®Œæˆåï¼Œå¯ä»¥å¾—åˆ°æ¯ä¸ªç±»çš„åŸå‹å‘é‡ã€‚ä¸‹é¢å¼€å§‹æ›´æ–°æŸå¤±å‡½æ•°ã€‚é¦–å…ˆå°†æŸå¤±å‡½æ•° $J$ åˆå§‹åŒ–ä¸º0ï¼Œç„¶åè¿›å…¥ä¸¤ä¸ª for å¾ªç¯ï¼Œå¯¹äºæ¯ä¸€ä¸ªç±»åˆ« $k$ ä¸­çš„æ¯ä¸€ä¸ª query set ä¸­çš„æ¯ä¸€ä¸ªæ ·æœ¬ï¼Œé‡‡ç”¨ä¸‹å¼æ›´æ–° $J$\\[J\\leftarrow J+\\frac{1}{N_C N_Q}[d(f_\\phi(x),c_k)+log\\sum_{k'} exp(-d(f_\\phi(x),c_{k'}))]\\]ä¸ºä¾¿äºç†è§£ï¼Œå¯¹äºç¬¬ $k$ ç±»çš„ç¬¬ $i$ ä¸ªæ ·æœ¬ï¼Œä¸å¦¨å‡æŸå¤±å‡½æ•°æ›´æ–°æ–¹å‘ä¸º\\[^kA_i = d(f_\\phi(x_i),c_k)+log\\sum_{i=1}^{N_Q} exp(-d(f_\\phi(x_i),c_{i}))\\]åˆ™å¯¹äºæ‰€æœ‰ç±»åˆ«çš„æ‰€æœ‰ query set çš„æ‰€æœ‰æ ·æœ¬ï¼Œæœ€ç»ˆ $J$ çš„æ›´æ–°ä¸ºä»¥ä¸‹å½¢å¼\\[J\\leftarrow J+\\frac{1}{N_C N_Q}({}^1A_1+{}^1A_2+...+{}^{N_C}A_{N_Q})\\]å¯ä»¥çœ‹å‡ºï¼Œæ‹¬å·å†…æ€»å…±æœ‰ $N_C N_Q$ é¡¹ï¼Œå› æ­¤åˆ†æ¯é™¤ä»¥è¯¥å€¼ä»¥æ±‚å‡å€¼ã€‚1.3. è¿›è¡Œæ··åˆå¯†åº¦ä¼°è®¡å¯¹äºç‰¹å®šçš„è·ç¦»å‡½æ•°ï¼Œå¦‚ Bregman æ•£åº¦ï¼ŒåŸå‹ç½‘ç»œç®—æ³•ç›¸å½“äºå¯¹å…·æœ‰æŒ‡æ•°æ—å¯†åº¦çš„æ”¯æŒé›†è¿›è¡Œæ··åˆå¯†åº¦ä¼°è®¡ã€‚åŸå‹è®¡ç®—å¯ä»¥ç”¨æ”¯æŒé›†ä¸Šçš„ç¡¬èšç±»æ¥è¡¨ç¤ºï¼Œæ¯ä¸ªç±»æœ‰ä¸€ä¸ªç°‡ï¼Œæ¯ä¸ªæ”¯æŒç‚¹éƒ½è¢«åˆ†é…ç»™ç›¸åº”çš„ç±»ç°‡ã€‚  the prototypical networks algorithm is equivalent to performing mixture density estimation on the support set with an exponential family density. Prototype computation can be viewed in terms of hard clustering on the support set, with one cluster per class and each support point assigned to its corresponding class cluster.å¦‚ä½•ç†è§£Bregman divergenceï¼Ÿå·²è¢«è¯æ˜ï¼Œå¯¹äº Bregman æ•£åº¦ï¼Œèšç±»çš„å‡å€¼å°±æ˜¯åˆ°å„ç±»ç‰¹å¾çš„è·ç¦»çš„æå°å€¼ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœé‡‡ç”¨æŸä¸ª Bregman æ•£åº¦è·ç¦»å‡½æ•°ï¼ŒåŸå‹è®¡ç®— $c_k$ ç­‰ä»·äº support set ä¸­æ ·æœ¬æ ‡ç­¾çš„æœ€ä¼˜èšç±»è¡¨ç¤ºã€‚ä»»ä½•æ­£åˆ™æŒ‡æ•°åˆ†å¸ƒéƒ½å¯ä»¥å†™ä¸ºä¸€ä¸ªç¡®å®šçš„æ­£åˆ™ Bregman æ•£åº¦ã€‚å‡è®¾è¯¥æ­£åˆ™æŒ‡æ•°åˆ†å¸ƒä¸º $p_\\psi(z\\mid\\theta)$ ï¼Œå‚æ•°ä¸º $\\theta$ï¼Œç´¯ç§¯å‡½æ•°ä¸º $\\psi$ï¼Œåˆ™æœ‰\\[p_\\psi(z\\mid\\theta) = exp\\{z^T\\theta-\\psi (\\theta) - g_\\psi(z)\\} = exp\\{-d_\\psi(z,\\mu(\\theta)) - g_\\psi(z)\\}\\]ç®—äº†ç®—äº†åé¢çœ‹ä¸æ‡‚äº†ã€‚ã€‚ã€‚1.4. è·ç¦»åº¦é‡ä½œè€…è¿›è¡Œäº†è¿›ä¸€æ­¥çš„åˆ†æï¼Œä»¥ç¡®å®šè·ç¦»åº¦é‡å’Œæ¯Episodeä¸­è®­ç»ƒclassesçš„æ•°é‡å¯¹åŸå‹ç½‘ç»œå’ŒåŒ¹é…ç½‘ç»œçš„å½±å“ã€‚ä¸ºäº†ä½¿è¿™äº›æ–¹æ³•æ›´å…·æœ‰å¯æ¯”æ€§ï¼Œæˆ‘ä»¬ä½¿ç”¨æˆ‘ä»¬è‡ªå·±çš„åŒ¹é…ç½‘ç»œå®ç°ï¼Œå®ƒä½¿ç”¨ä¸æˆ‘ä»¬çš„åŸå‹ç½‘ç»œç›¸åŒçš„åµŒå…¥æ¶æ„ã€‚åœ¨ä¸‹å›¾ä¸­ï¼Œæˆ‘ä»¬æ¯”è¾ƒäº†ä½™å¼¦è·ç¦»ä¸æ¬§å¼è·ç¦»ï¼Œ5-wayå’Œ20-way  training episodesã€‚åœ¨1-shotå’Œ5-shotåœºæ™¯ä¸­ï¼Œæ¯ä¸ªEpisodeæ¯ä¸ªç±»ä¸­æœ‰15ä¸ªæŸ¥è¯¢ç‚¹ã€‚æ³¨æ„åˆ°20-wayæ¯”5-wayè·å¾—äº†æ›´é«˜çš„å‡†ç¡®ç‡ï¼Œå¹¶ä¸”æ¨æµ‹20-wayåˆ†ç±»éš¾åº¦çš„å¢åŠ æœ‰åŠ©äºç½‘ç»œæ›´å¥½çš„æ³›åŒ–ï¼Œå› ä¸ºå®ƒè¿«ä½¿æ¨¡å‹åœ¨åµŒå…¥ç©ºé—´ä¸­åšå‡ºæ›´ç»†ç²’åº¦çš„å†³ç­–ã€‚æ­¤å¤–ï¼Œä½¿ç”¨æ¬§æ°è·ç¦»æ¯”é¢„å…ˆè·ç¦»å¤§å¤§æé«˜äº†æ€§èƒ½ã€‚è¿™ç§æ•ˆæœå¯¹äºåŸå‹ç½‘ç»œæ›´ä¸ºæ˜æ˜¾ï¼Œåœ¨è¿™ç§ç½‘ç»œä¸­ï¼Œå°†ç±»åŸå‹ä½œä¸ºåµŒå…¥æ”¯æŒç‚¹çš„å¹³å‡å€¼è¿›è¡Œè®¡ç®—æ›´é€‚åˆäºæ¬§æ°è·ç¦»ï¼Œå› ä¸ºä½™å¼¦è·ç¦»ä¸æ˜¯Bregmanæ•£åº¦ã€‚2. å‚è€ƒæ–‡çŒ®[1]  Smiler_. ã€ŠPrototypical Networks for Few-shot Learning ã€‹è®ºæ–‡ç¿»è¯‘."
  },
  
  {
    "title": "å…ƒå­¦ä¹ æ–‡ç« é˜…è¯»ï¼ˆReptileï¼‰",
    "url": "/posts/meta-learning-Reptile/",
    "categories": "Academic, Paper",
    "tags": "deep learning, meta learning",
    "date": "2020-07-14 14:35:19 +0800",
    





    
    "snippet": "Reptile äº2018å¹´ç”± OpenAI æå‡ºï¼Œæ˜¯ä¸€ç§éå¸¸ç®€å•è€Œæœ‰æ•ˆçš„åŸºäºä¼˜åŒ–çš„ï¼ˆOptimized-basedï¼‰å°æ ·æœ¬å­¦ä¹ æ–¹æ³•ï¼Œé€šè¿‡å¤šæ­¥æ¢¯åº¦ä¸‹é™æ¥å­¦ä¹ ä¸€ä¸ªè¾ƒä¼˜çš„æ¨¡å‹åˆå§‹å‚æ•°ã€‚  1. Reptile          1.1. ç®—æ³•      1.2. æ•°å­¦åˆ†æ      1.3. æ¢¯åº¦çš„æ³°å‹’å±•å¼€çš„é¢†å¤´é˜¶      1.4. å¦ä¸€ç§æ¨å¯¼æ–¹å¼      1.5. æ¢¯åº¦çš„æ³°å‹’å±•å¼€çš„é¢†å¤´é˜¶ï¼ˆ...",
    "content": "Reptile äº2018å¹´ç”± OpenAI æå‡ºï¼Œæ˜¯ä¸€ç§éå¸¸ç®€å•è€Œæœ‰æ•ˆçš„åŸºäºä¼˜åŒ–çš„ï¼ˆOptimized-basedï¼‰å°æ ·æœ¬å­¦ä¹ æ–¹æ³•ï¼Œé€šè¿‡å¤šæ­¥æ¢¯åº¦ä¸‹é™æ¥å­¦ä¹ ä¸€ä¸ªè¾ƒä¼˜çš„æ¨¡å‹åˆå§‹å‚æ•°ã€‚  1. Reptile          1.1. ç®—æ³•      1.2. æ•°å­¦åˆ†æ      1.3. æ¢¯åº¦çš„æ³°å‹’å±•å¼€çš„é¢†å¤´é˜¶      1.4. å¦ä¸€ç§æ¨å¯¼æ–¹å¼      1.5. æ¢¯åº¦çš„æ³°å‹’å±•å¼€çš„é¢†å¤´é˜¶ï¼ˆç»§ç»­ï¼‰      1.6. å¦ä¸€ç§ä¸ä¸¥è°¨çš„åˆ†æ      1.7. å®éªŒ        2. æ¯”è¾ƒ  3. ç®—æ³•å®ç°  4. reptileå›å½’sinå‡½æ•°  5. å‚è€ƒæ–‡çŒ®1. Reptile2018.ã€ŠOn First-Order Meta-Learning Algorithmsã€‹å’Œã€ŠReptile: a Scalable Metalearning Algorithmã€‹Reptileæ˜¯OpenAIæå‡ºçš„ä¸€ç§éå¸¸ç®€å•çš„meta learning ç®—æ³•ã€‚ä¸MAMLç±»ä¼¼ï¼Œä¹Ÿæ˜¯å­¦ä¹ ç½‘ç»œå‚æ•°çš„åˆå§‹å€¼ã€‚1.1. ç®—æ³•ç®—æ³•ä¼ªä»£ç å¦‚ä¸‹å…¶ä¸­ï¼Œ$\\phi$ æ˜¯æ¨¡å‹çš„åˆå§‹å‚æ•°ï¼Œ$\\tau$ æ˜¯æŸä¸ª taskï¼Œ$U_\\tau^k(\\phi)$ è¡¨ç¤ºä» $\\phi$ å¼€å§‹å¯¹æŸå¤±å‡½æ•°è¿›è¡Œ $k$ æ¬¡éšæœºæ¢¯åº¦ä¸‹é™ï¼Œè¿”å›æ›´æ–°åçš„å‚æ•° $\\widetilde{\\phi}$ã€‚åœ¨æœ€åä¸€æ­¥ä¸­ï¼Œé€šè¿‡ $\\widetilde{\\phi}-\\phi$ è¿™ç§æ®‹å·®å½¢å¼æ¥æ›´æ–°ä¸€æ¬¡åˆå§‹å‚æ•°ã€‚å¦‚æœ $k=1$ï¼Œè¯¥ç®—æ³•ç­‰ä»·äºã€Œè”åˆè®­ç»ƒã€ï¼ˆjoint trainingï¼Œé€šè¿‡è®­ç»ƒæ¥æœ€å°åŒ–åœ¨ä¸€ç³»åˆ—è®­ç»ƒä»»åŠ¡ä¸ŠæœŸæœ›æŸå¤±ï¼‰ã€‚Reptile è¦æ±‚ $k&gt;1$ï¼Œæ›´æ–°ä¾èµ–äºæŸå¤±å‡½æ•°çš„é«˜é˜¶å¯¼æ•°ï¼Œæ­¤æ—¶ Reptile çš„è¡Œä¸ºä¸ $k=1$ï¼ˆè”åˆè®­ç»ƒï¼‰æ—¶æˆªç„¶ä¸åŒã€‚Reptile ä¸ MAML å’Œ FOMAML ç´§å¯†ç›¸å…³ï¼Œä½†æ˜¯ä¹Ÿå­˜åœ¨ä¸åŒ      Reptile æ— éœ€å¯¹æ¯ä¸€ä¸ªä»»åŠ¡è¿›è¡Œè®­ç»ƒ-æµ‹è¯•ï¼ˆtraining-testingï¼‰åˆ’åˆ†ã€‚        ç›¸æ¯” MAML éœ€è¦è¿›è¡ŒäºŒé‡æ¢¯åº¦è®¡ç®—ï¼ŒReptile åªéœ€è¦è¿›è¡Œä¸€é‡æ¢¯åº¦è®¡ç®—ï¼Œè®¡ç®—é€Ÿåº¦æ›´å¿«ã€‚  Reptile çš„å›¾ä¾‹å¦‚ä¸‹ã€‚1.2. æ•°å­¦åˆ†æåŸºäºä¼˜åŒ–çš„å…ƒå­¦ä¹ é—®é¢˜ï¼ˆOptimization-based Meta-Learningï¼‰çš„ç›®æ ‡ï¼šæ‰¾å¯»ä¸€ç»„æ¨¡å‹åˆå§‹å‚æ•° $\\boldsymbol \\phi$ï¼Œä½¿å¾—æ¨¡å‹åœ¨é¢å¯¹éšæœºé€‰å–çš„æ–°ä»»åŠ¡ $\\tau \\sim \\mathcal T$ æ—¶ï¼Œç»è¿‡ $k$ æ¬¡æ¢¯åº¦æ›´æ–°ï¼Œåœ¨ $\\tau$ ä¸Šçš„æŸå¤±å‡½æ•°å°±èƒ½è¾¾åˆ°å¾ˆå°ã€‚ç”¨æ•°å­¦è¯­è¨€æè¿°ï¼Œå³\\[\\mathop{minimize}_{\\phi} \\; \\mathbb E_{\\tau}[L_{\\tau}(^{k}_\\tau\\boldsymbol \\phi)]= \\mathop{minimize}_{\\phi} \\; \\mathbb E_{\\tau}[L_{\\tau}(U^k_\\tau(\\boldsymbol \\phi))]\\]å…¶ä¸­\\[\\widetilde{\\boldsymbol\\phi} = {}^{k}_\\tau \\boldsymbol \\phi=U^k_\\tau(\\boldsymbol \\phi)\\]æ˜¯åœ¨ä»»åŠ¡ $\\tau$ ä¸Šç»è¿‡ $k$ æ¬¡æ›´æ–°åçš„æ¨¡å‹å‚æ•°ã€‚Reptile ç®—æ³•ä¸­å°† $(\\boldsymbol \\phi - \\widetilde{\\boldsymbol\\phi}) / \\alpha$ çœ‹ä½œæ¢¯åº¦ï¼Œå…¶ä¸­ $\\alpha$ ä¸º SGD ä¸­çš„å­¦ä¹ ç‡ï¼Œå³\\[g_{Reptile} = (\\boldsymbol \\phi - \\widetilde{\\boldsymbol\\phi}) / \\alpha\\]æ³¨æ„åˆ°ï¼ŒSGD éšæœºæ¢¯åº¦ä¸‹é™çš„æ ¸å¿ƒæ˜¯ï¼Œæ¢¯åº¦æ˜¯æœŸæœ›ï¼ŒæœŸæœ›å¯ä½¿ç”¨å°è§„æ¨¡çš„æ ·æœ¬è¿‘ä¼¼ä¼°è®¡ã€‚å¯¹äºé‡‡ç”¨ SGD çš„ä¼ ç»Ÿç›‘ç£å­¦ä¹ ï¼Œæ¨¡å‹å‚æ•°æ›´æ–°æ–¹å¼ä¸º\\[\\phi = \\widetilde \\phi = \\phi - \\beta \\cdot \\mathbb E[\\nabla^kL_\\tau] =? \\phi - \\beta \\cdot \\nabla^k\\mathbb E[L_\\tau]\\]é—®é¢˜1ï¼šæ¢¯åº¦å’ŒæœŸæœ›èƒ½å¦äº¤æ¢é¡ºåºï¼Ÿä¼ ç»Ÿç›‘ç£å­¦ä¹ çš„å‚æ•°æ›´æ–°å¯ç®€å†™ä¸º $SGD(\\mathbb E[L_\\tau],\\theta,k)$ã€‚é‡‡ç”¨ SGD çš„ Reptile çš„æ¨¡å‹å‚æ•°æ›´æ–°æ–¹å¼ä¸ºï¼š\\[\\phi = \\phi + \\beta\\cdot \\mathbb E[\\widetilde\\phi-\\phi]/\\alpha\\]åˆå› ä¸º $\\widetilde \\phi = SGD(L_\\tau,\\theta,k)$ï¼Œé‚£ä¹ˆç›¸åº”çš„å‚æ•°æ›´æ–°å¯ç®€å†™ä¸º $\\mathbb E[ SGD(L_\\tau,\\theta,k)]$ã€‚é—®é¢˜2ï¼š$SGD(\\mathbb E[L_\\tau],\\theta,k)$ ä¸ $\\mathbb E[ SGD(L_\\tau,\\theta,k)]$ æœ‰ä»€ä¹ˆå…³ç³»ï¼Ÿä¸‹é¢éœ€è¦æŒ‰ç…§ $k$ çš„å–å€¼åˆ†æƒ…å†µè®¨è®ºã€‚  å¦‚æœ $k=1$ï¼Œé‚£ä¹ˆæœ‰\\[\\begin{aligned}g_{Reptile,k=1} &amp;= \\mathbb E_\\tau [(\\boldsymbol \\phi - \\widetilde{\\boldsymbol\\phi}) / \\alpha]\\\\&amp;= \\mathbb E_\\tau [(\\boldsymbol \\phi - U_\\tau(\\boldsymbol \\phi)) / \\alpha]\\\\&amp;= \\mathbb E_\\tau [\\boldsymbol \\phi - U_\\tau(\\boldsymbol \\phi)] / \\alpha\\\\&amp;= \\boldsymbol \\phi / \\alpha - \\mathbb E_\\tau [U_\\tau(\\boldsymbol \\phi)] / \\alpha \\quad where \\; \\alpha,\\phi=const \\\\\\end{aligned}\\]åˆçŸ¥é“ï¼Œ$U_\\tau(\\boldsymbol\\phi)$ æ˜¯è®¡ç®— $k=1$ æ¬¡çš„æ¢¯åº¦ç®—å­ï¼ˆçœç•¥ $k$ï¼‰\\[U_\\tau(\\boldsymbol\\phi) = \\boldsymbol \\phi - \\alpha \\nabla_{\\boldsymbol\\phi} L_\\tau(\\boldsymbol\\phi)\\]åˆ™\\[\\begin{aligned}\\mathbb E_\\tau [U_\\tau(\\boldsymbol \\phi)] &amp;= \\mathbb E_\\tau[\\boldsymbol \\phi - \\alpha \\nabla_{\\boldsymbol\\phi} L_\\tau(\\boldsymbol\\phi)]\\\\&amp;= \\boldsymbol\\phi - \\alpha \\cdot \\mathbb E_\\tau [\\nabla_{\\boldsymbol\\phi} L_\\tau(\\boldsymbol \\phi)]\\end{aligned}\\]å¸¦å…¥ä¸Šå¼è®¡ç®— $g_{Reptile,k=1}$ï¼Œæœ‰\\[g_{Reptile,k=1} = \\mathbb E_\\tau[\\nabla_{\\boldsymbol\\phi} L_\\tau(\\boldsymbol\\phi)]\\]å› æ­¤æœ‰\\[g_{Reptile,k=1} = \\mathbb E_\\tau [(\\boldsymbol \\phi - \\widetilde{\\boldsymbol\\phi}) / \\alpha] = \\mathbb E_\\tau[\\nabla_{\\boldsymbol\\phi} L_\\tau(\\boldsymbol\\phi)]\\]å¦å¤–ï¼Œæ ¹æ®æ­¤å¤„çš„è®¨è®ºï¼Œä»¥åŠåç»­ä¸¤å¤„è®¨è®ºï¼Œå½“æŸå¤±å‡½æ•°è¶³å¤Ÿå…‰æ»‘å’Œæœ‰ç•Œæ—¶ï¼ŒæœŸæœ›å’Œæ¢¯åº¦å¯ä»¥äº¤æ¢é¡ºåº  The first step is probably the nastiest (although not in the discrete case I guess), but we can interchange the gradient and expectation assuming L is sufficiently smooth and bounded (which it probably is). See here(1) and here(2).(1) When can we interchange the derivative with an expectation?(2) Expectation of gradients\\[\\mathbb E_{\\tau\\sim \\mathcal T}[\\nabla L_n(\\phi)]=\\nabla \\mathbb E_{\\tau\\sim \\mathcal T}[L_n(\\phi)]\\]é‚£ä¹ˆ\\[g_{Reptile,k=1} = \\mathbb E_\\tau [(\\boldsymbol \\phi - \\widetilde{\\boldsymbol\\phi}) / \\alpha] = \\mathbb E_\\tau[\\nabla_{\\boldsymbol\\phi} L_\\tau(\\boldsymbol\\phi)]= \\nabla_{\\boldsymbol\\phi} \\mathbb E_\\tau[L_\\tau(\\boldsymbol\\phi)]\\]å³ $k=1$ æ—¶ï¼ŒReptile å’Œ åœ¨æœŸæœ›æŸå¤± $\\mathbb E_\\tau [L_\\tau]$ ä¸Šçš„è”åˆè®­ç»ƒ ç­‰ä»·ã€‚  å¦‚æœ $k&gt;1$ï¼Œé‚£ä¹ˆ\\[g_{Reptile,k&gt;1} = \\boldsymbol\\phi / \\alpha - \\mathbb E_\\tau [U_{\\phi}^k(\\boldsymbol\\phi)]/\\alpha\\]è€Œ\\[U_{\\phi}^k(\\boldsymbol\\phi) = \\boldsymbol \\phi- \\alpha \\boldsymbol g_1- \\alpha \\boldsymbol g_2-...- \\alpha \\boldsymbol g_k\\]å…¶ä¸­\\[\\begin{aligned}\\boldsymbol g_1 &amp; = \\nabla_{\\boldsymbol \\theta} L_\\tau(\\boldsymbol \\theta), \\quad {}^1\\boldsymbol \\theta = \\boldsymbol \\theta - \\alpha \\boldsymbol g_1\\\\\\boldsymbol g_2 &amp; = \\nabla_{ {}^1\\boldsymbol \\theta} L_\\tau({}^1\\boldsymbol \\theta)\\\\&amp;= \\nabla_{ {}^1\\boldsymbol \\theta} L_\\tau(\\boldsymbol \\theta - \\alpha \\boldsymbol g_1)\\\\&amp;= \\nabla_{ {}^1\\boldsymbol \\theta} L_\\tau(\\boldsymbol \\theta - \\alpha (\\nabla_{\\boldsymbol \\theta} L_\\tau(\\boldsymbol \\theta)))\\\\...&amp;...\\end{aligned}\\]$\\mathbb E_\\tau [U_{\\phi}^k(\\boldsymbol\\phi)]$ ä¸­åŒ…å«äº†é«˜é˜¶é¡¹ä¿¡æ¯ï¼Œä»è€Œä¸ $\\nabla \\mathbb E[L_\\tau]$ ä¸å†ç›¸å…³ã€‚æ­¤æ—¶ Reptile æ”¶æ•›åˆ°çš„å‚æ•°è§£ä¸ä¼ ç»Ÿç›‘ç£å­¦ä¹ å®Œå…¨ä¸åŒã€‚1.3. æ¢¯åº¦çš„æ³°å‹’å±•å¼€çš„é¢†å¤´é˜¶é‚£ä¹ˆï¼Œä¸ºä»€ä¹ˆReptileå°±è¿™ä¹ˆç®€å•çš„å¤šæ›´æ–°å‡ æ­¥æ¢¯åº¦ï¼ˆ k&gt;1 ï¼‰å°±èƒ½å¾ˆå¥½çš„è¿›è¡Œå…ƒå­¦ä¹ å‘¢ï¼Ÿä½œè€…é€šè¿‡æ³°å‹’å±•å¼€çš„é¢†å¤´é˜¶æ¥åˆ†æã€‚é¦–å…ˆå®šä¹‰å››ä¸ªè¾…åŠ©å˜é‡ï¼Œå‡è®¾æ¨¡å‹åˆå§‹å‚æ•°ä¸º $\\phi_1$ï¼Œ$i\\in [1, k]$ æŒ‡ä»£ç¬¬ $i$ æ¬¡æ¢¯åº¦ä¸‹é™çš„è®­ç»ƒè¿‡ç¨‹ï¼š\\[\\begin{aligned}g_i &amp;= L_i'(\\phi_i)\\;\\;(gradient \\; obtained\\; during\\;SGD)\\\\\\phi_{i+1} &amp;= \\phi_i-\\alpha g_i\\;\\;(sequence\\;of\\;parameters)\\\\\\overline{g}_i &amp;= L_i'(\\phi_1)\\;\\;(gradient\\;at\\;initial\\;point)\\\\\\overline{H}_i &amp;= L_i''(\\phi_1)\\;\\;(Hessian\\;at\\;initial\\;point)\\\\\\end{aligned}\\]ç„¶åå°† $g_i$ åœ¨åŸå§‹å‚æ•° $\\phi_1$ ä¸Šæ³°å‹’å±•å¼€è‡³ â€œäºŒé˜¶å¯¼+é«˜æ¬¡é¡¹â€ çš„å½¢å¼\\[\\begin{aligned}g_i = L_i'(\\phi_i) &amp;= L_i'(\\phi_1) + L_i''(\\phi_1)(\\phi_i - \\phi_1) + O(||\\phi_i - \\phi_1||^2)\\\\&amp;= \\overline{g}_i + \\overline{H}_i(\\phi_i - \\phi_1) + O(\\alpha^2)\\\\&amp;= \\overline{g}_i - \\alpha\\overline{H}_i\\sum_{j=1}^{i-1}g_j + O(\\alpha^2)\\\\&amp;= \\overline{g}_i - \\alpha\\overline{H}_i\\sum_{j=1}^{i-1}\\overline{g}_j + O(\\alpha^2)\\\\\\end{aligned}\\]ä¸‹é¢åˆ†æä¸Šå¼çš„æ¨å¯¼è¿‡ç¨‹ã€‚æ ¹æ®ç¬¬äºŒä¸ªè¾…åŠ©å˜é‡çš„å®šä¹‰ï¼Œè¿›è¡Œé“¾å¼å±•å¼€ï¼Œé«˜é˜¶é¡¹çš„æ¨å¯¼è¿‡ç¨‹å¦‚ä¸‹\\[\\begin{aligned}&amp;\\phi_i = \\phi_1 - \\alpha g_1 - \\alpha g_2 - ... - \\alpha g_{i-1}\\\\\\Rightarrow \\quad &amp;O(||\\phi_i - \\phi_1||^2) = O(|| - \\alpha \\sum_{j=1}^{i-1} g_j||^2) = O(\\alpha^2)\\end{aligned}\\]åŒç†ï¼Œç¬¬äºŒä¸ªç­‰å·å³è¾¹ï¼ŒHessian çŸ©é˜µå³ä¹˜çš„æ‹¬å·å’Œå¯åŒ–ä¸º $g_i$ çš„å’Œå½¢å¼ã€‚æœ€åä¸€ä¸ªç­‰å·å³è¾¹ï¼Œå¯ä»¥ç›´æ¥å°† $g_i$ æ›¿æ¢ä¸º $\\overline g_i$ æ˜¯å› ä¸º\\[\\begin{aligned}\\alpha\\overline{H}_i\\sum_0^{i-1}g_i &amp;= \\alpha\\overline{H}_i\\sum_0^{i-1}L_i'(\\phi_i) \\\\&amp;= \\alpha\\overline{H}_i\\sum_0^{i-1}[L_i'(\\phi_1) + L_i''(\\phi_1)(\\phi_i - \\phi_1)+O(\\alpha^2)]\\\\&amp;=\\alpha\\overline{H}_i\\sum_0^{i-1}[\\overline g_i- \\alpha\\overline{H}_i\\sum_{j=1}^{i-1}g_j + O(\\alpha^2)]\\\\&amp;= \\alpha\\overline{H}_i\\sum_0^{i-1}\\overline g_i + O(\\alpha^2)\\end{aligned}\\]è‡³æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ°$g_i$ åœ¨åŸå§‹å‚æ•° $\\phi_1$ ä¸Šçš„æ³°å‹’å±•å¼€å¦‚ä¸‹\\[g_i = \\overline{g}_i - \\alpha\\overline{H}_i\\sum_{j=1}^{i-1}\\overline{g}_j + O(\\alpha^2)\\]ç„¶åï¼Œæˆ‘ä»¬å¯¹ $g_{MAML}$ è¿›è¡Œåˆ†æ\\[\\begin{aligned}g_{MAML} &amp;= \\frac{\\partial}{\\partial\\phi_1}L_k(\\phi_k)\\\\&amp;= L'_k(\\phi_k)\\frac{\\partial\\phi_k}{\\partial\\phi_1}\\\\&amp;= L'_k(\\phi_k)\\frac{\\partial}{\\partial\\phi_1}[U_{k-1}(U_{k-2}(...(U_1(\\phi_1))))]\\\\&amp;= L'_k(\\phi_k)U'_1(\\phi_1)U'_2(\\phi_2)\\cdots U'_{k-1}(\\phi_{k-1})\\\\&amp;= L'_k(\\phi_k)(I-\\alpha L''_1(\\phi_1))\\cdots(I-\\alpha L''_{k-1}(\\phi_{k-1}))\\\\&amp;=L'_k(\\phi_k)\\left(\\prod_{i=1}^{k-1}(I-\\alpha L''_i(\\phi_i))\\right)\\\\&amp;=g_k\\left(\\prod_{i=1}^{k-1}(I-\\alpha L''_i(\\phi_i))\\right)\\end{aligned}\\]æ­¤å¤„ï¼Œä»¤ $\\alpha=0^+$ï¼Œæˆ‘ä»¬å¯ä»¥ç»™å‡º $g_{FOMAML}$ çš„è¡¨è¾¾å¼\\[g_{FOMAML} = g_k\\]æ ¹æ®å‰é¢å·²ç»æ¨å¾—çš„ $g_i$ åœ¨åŸå§‹å‚æ•°ä¸Šçš„æ³°å‹’å±•å¼€å¼ï¼Œå¸¦å…¥å¾—\\[g_{FOMAML} = \\overline{g}_k - \\alpha\\overline{H}_k\\sum_{j=1}^{k-1}\\overline{g}_j + O(\\alpha^2)\\]ç»§ç»­æ¨å¯¼ $g_{MAML}$ï¼Œå€ŸåŠ©ç¬¬å››ä¸ªè¾…åŠ©å˜é‡å®šä¹‰ï¼Œæˆ‘ä»¬å¯¹ $\\alpha Lâ€™â€˜_i(\\phi_i)$ åœ¨åŸå§‹å‚æ•°ä¸Šè¿›è¡Œæ³°å‹’å±•å¼€\\[\\begin{aligned}\\alpha L''_i(\\phi_i) &amp;= \\alpha L''_i(\\phi_1) + \\alpha H'_i(\\phi_1 - \\phi_1) + O(\\alpha^2) \\\\&amp;= \\alpha \\overline H_i + \\alpha H'_i\\sum \\alpha g_{i-1} + O(\\alpha^2)\\\\&amp;= \\alpha \\overline H_i + O(\\alpha^2)\\end{aligned}\\]å¸¦å…¥ $g_{MAML}$ï¼Œæœ‰\\[g_{MAML} = g_k\\left(\\prod_{i=1}^{k-1}(I-\\alpha \\overline H_i)\\right) + O(\\alpha^2)\\]åˆæ ¹æ®å‰é¢å·²ç»æ¨å¾—çš„ $g_i$ åœ¨åŸå§‹å‚æ•°ä¸Šçš„æ³°å‹’å±•å¼€å¼ï¼Œå¸¦å…¥å¾—\\[\\begin{aligned}g_{MAML} &amp;= \\left(\\overline{g}_k - \\alpha\\overline{H}_k\\sum_{j=1}^{k-1}\\overline{g}_j\\right) \\left( \\prod_{i=1}^{k-1}(I-\\alpha \\overline H_i)\\right) + O(\\alpha^2)\\\\&amp;= \\left(\\overline{g}_k - \\alpha\\overline{H}_k\\sum_{j=1}^{k-1}\\overline{g}_j\\right) [ (I-\\alpha \\overline H_1)\\cdots(I-\\alpha \\overline H_{k-1}) ] + O(\\alpha^2)\\\\&amp;= \\left(\\overline{g}_k - \\alpha\\overline{H}_k\\sum_{j=1}^{k-1}\\overline{g}_j\\right) [I-\\alpha \\overline H_1 - \\cdots - \\alpha \\overline H_{k-1} + O(\\alpha^2)] + O(\\alpha^2)\\\\&amp;= \\left(\\overline{g}_k - \\alpha\\overline{H}_k\\sum_{j=1}^{k-1}\\overline{g}_j\\right) \\left(I-\\alpha \\sum_{j=1}^{k-1}\\overline H_j\\right) + O(\\alpha^2)\\\\&amp;= \\overline{g}_k - \\alpha\\overline{g}_k\\sum_{j=1}^{k-1}\\overline H_j - \\alpha\\overline{H}_k\\sum_{j=1}^{k-1}\\overline{g}_j + O(\\alpha^2)\\end{aligned}\\]è€Œå¯¹äº Reptile çš„æ¢¯åº¦ï¼Œæ ¹æ®å®šä¹‰\\[\\begin{aligned}g_{Reptile} &amp;= (\\phi - \\widetilde \\phi)/\\alpha\\\\&amp;= [\\phi - (\\phi - \\alpha g_1 - \\alpha g_2 - \\cdots - \\alpha g_k)]/\\alpha\\\\&amp;= g_1 + g_2 + \\cdots + g_k\\end{aligned}\\]å°† MAMLã€FOMAML å’Œ Reptile ä¸‰è€…çš„æ¢¯åº¦åŒæ—¶åˆ—å†™å¦‚ä¸‹\\[\\begin{aligned}  g_{MAML} &amp;=\\overline{g}_k - \\alpha\\overline{g}_k\\sum_{j=1}^{k-1}\\overline H_j - \\alpha\\overline{H}_k\\sum_{j=1}^{k-1}\\overline{g}_j + O(\\alpha^2)\\\\  g_{FOMAML} &amp;= \\overline{g}_k - \\alpha\\overline{H}_k\\sum_{j=1}^{k-1}\\overline{g}_j + O(\\alpha^2)\\\\  g_{Reptile} &amp;= g_1 + g_2 + \\cdots + g_k\\end{aligned}\\]ä¸ºäº†ç®€åŒ–åˆ†æï¼Œä»¤ $k=2$ï¼Œæœ‰\\[\\begin{aligned}  g_{MAML} &amp; &amp;=\\overline{g}_2 - \\alpha\\overline{g}_2\\overline H_1 - \\alpha\\overline{H}_2\\overline{g}_1 + O(\\alpha^2)\\\\  g_{FOMAML} &amp;= g_2 &amp;=  \\overline{g}_2 - \\alpha\\overline{H}_2\\overline{g}_1 + O(\\alpha^2)\\\\  g_{Reptile} &amp;= g_1 + g_2 &amp;=\\overline{g}_1 + \\overline{g}_2 - \\alpha\\overline{H}_2 g_1 + O(\\alpha^2)\\end{aligned}\\]1.4. å¦ä¸€ç§æ¨å¯¼æ–¹å¼ç›´æ¥å‡è®¾ $k=2$ï¼Œä»¥ä¸¤æ­¥ SGD ä¸ºä¾‹åˆ†æå‚æ•°æ›´æ–°è¿‡ç¨‹ã€‚ç®€åŒ–èµ·è§ï¼Œæˆ‘ä»¬å°†æŸå¤±å‡½æ•°å¯¹æ¨¡å‹å‚æ•°çš„æ¢¯åº¦è®°ä¸º $Lâ€™$ï¼Œé‚£ä¹ˆä¸¤æ­¥ SGD æ›´æ–°åçš„æ¨¡å‹å‚æ•°ä¸º $\\phi_3$ï¼Œæœ‰\\[\\begin{aligned}\\phi_1 &amp;= \\phi\\\\\\phi_2 &amp;= \\phi_1 - \\alpha L_1'(\\phi_1)\\\\\\phi_3 &amp;= \\phi_2 - \\alpha L_1'(\\phi_1) - \\alpha L_2'(\\phi_2)\\end{aligned}\\]ä¸‹é¢å®šä¹‰å‡ ä¸ªè¾…åŠ©å˜é‡ï¼Œå…¶ä¸­ $i\\in [1, k]$ æŒ‡ä»£ç¬¬ $i$ ä¸ª minibatchï¼Œä¹Ÿå³ç¬¬ $i$ æ¬¡æ¢¯åº¦ä¸‹é™çš„è®­ç»ƒè¿‡ç¨‹ï¼ˆï¼Ÿï¼‰\\[\\begin{aligned}g_i &amp;= L_i'(\\phi_i)\\;\\;(gradient \\; obtained\\; during\\;SGD)\\\\\\phi_{i+1} &amp;= \\phi_i-\\alpha g_i\\;\\;(sequence\\;of\\;parameters)\\\\\\overline{g}_i &amp;= L_i'(\\phi_1)\\;\\;(gradient\\;at\\;initial\\;point)\\\\\\overline{H}_i &amp;= L_i''(\\phi_1)\\;\\;(Hessian\\;at\\;initial\\;point)\\\\\\end{aligned}\\]é¦–å…ˆï¼Œé‡‡ç”¨æ³°å‹’å±•å¼€å°† $g_i$ å±•å¼€è‡³ â€œäºŒé˜¶å¯¼+é«˜æ¬¡é¡¹â€ çš„å½¢å¼\\[\\begin{aligned}g_i &amp;= L_i'(\\phi_i) = L_i'(\\phi_1) + L_i''(\\phi_1)(\\phi_i - \\phi_1) + O(||\\phi_i - \\phi_1||^2)\\\\&amp;= \\overline{g}_i + \\overline{H}_i(\\phi_i - \\phi_1) + O(\\alpha^2)\\\\&amp;= \\overline{g}_i - \\alpha\\overline{H}_i\\sum_0^{i-1}g_i + O(\\alpha^2)\\\\&amp;= \\overline{g}_i - \\alpha\\overline{H}_i\\sum_0^{i-1}\\overline{g}_i + O(\\alpha^2)\\\\\\end{aligned}\\]æœ€åä¸€æ­¥çš„ä¾æ®æ˜¯ï¼Œ$g_i = \\overline{g}_i + O(\\alpha)$ å¸¦å…¥å€’æ•°ç¬¬äºŒè¡Œæ—¶ï¼Œåé¢çš„ $O(\\alpha)$ ä¸æ±‚å’Œç¬¦å·å‰çš„ $\\alpha$ ç›¸ä¹˜ï¼Œå³å˜ä¸º $O(\\alpha^2)$ ä»è€Œåˆå¹¶ä¸ºä¸€é¡¹ã€‚ä¸‹é¢å–  $k=2$ ï¼Œå³ä¸¤æ­¥SGDï¼Œåˆ†åˆ«æ¨å¯¼ MAMLã€FOMAMLã€Reptile çš„æ¢¯åº¦ã€‚è¿™ä¸ªå‚è€ƒ [3] è€ƒè™‘äº† $k$ ä¸ºä»»æ„æƒ…å†µä¸‹çš„é€šè§£ï¼Œåœ¨  $k=2$ æ—¶çš„ç»“æœä¸æœ¬æ–‡ç›¸åŒã€‚å¯¹äºäºŒé˜¶çš„MAMLï¼Œåˆå§‹å‚æ•° $\\phi_1$ é¦–å…ˆåœ¨support setä¸Šæ¢¯åº¦æ›´æ–°ä¸€æ¬¡å¾—åˆ° $\\phi_2$ ï¼Œç„¶åå°† $\\phi_2$ åœ¨ query set ä¸Šè®¡ç®—æŸå¤±å‡½æ•°ï¼Œå†è®¡ç®—æ¢¯åº¦æ›´æ–°æ¨¡å‹çš„åˆå§‹å‚æ•°ã€‚å³ query set çš„ loss è¦å¯¹ $\\phi_2$ æ±‚å¯¼ï¼Œé“¾å¼æ³•åˆ™ loss å¯¹  $\\phi_2$ æ±‚å¯¼ä¹˜ä»¥  $\\phi_2$ å¯¹ $\\phi_1$ æ±‚å¯¼\\[\\begin{aligned}g_{MAML} &amp;= \\frac{\\partial}{\\partial\\phi_1}L_2(\\phi_2) = \\frac{\\partial \\phi_2}{\\partial \\phi_1} L_2'(\\phi_2) \\\\ &amp;= (I-\\alpha L_1''(\\phi_1))L_2'(\\phi_2)\\\\ &amp;= (I-\\alpha L_1''(\\phi_1))(L_2'(\\phi_1) + L_2''(\\phi_1)(\\phi_2 - \\phi_1) + O(\\alpha^2))\\\\ &amp;= (I-\\alpha L_1''(\\phi_1))(L_2'(\\phi_1) + L_2''(\\phi_1)(\\phi_2 - \\phi_1)) + O(\\alpha^2)\\\\ &amp;= (I-\\alpha L_1''(\\phi_1))(L_2'(\\phi_1) - \\alpha L_2''(\\phi_1)L_1'(\\phi_1)) + O(\\alpha^2)\\\\ &amp;= L_2'(\\phi_1)-\\alpha L_2''(\\phi_1)L_1'(\\phi_1) - \\alpha L_1''(\\phi_1)L_2'(\\phi_1) + O(\\alpha^2)\\\\ \\end{aligned}\\]å¯¹äºFOMAMLï¼Œå…¶ä¸€é˜¶ç®€åŒ–æ˜¯ç®€åŒ–äº†å‚æ•° $\\phi_2$ å¯¹åˆå§‹å‚æ•° $\\phi_1$ æ±‚å¯¼éƒ¨åˆ†ï¼Œå³ $\\frac{\\partial \\phi_2}{\\partial \\phi_1} = const$ï¼Œåˆ™åªå‰©ä¸‹ loss å¯¹å‚æ•° $\\phi_2$ çš„æ±‚å¯¼ã€‚\\[\\begin{aligned}g_{FOMAML} &amp;= L_2'(\\phi_2) = L_2'(\\phi_1) + L_2''(\\phi_1)(\\phi_2 - \\phi_1) + O(\\alpha^2)\\\\&amp;= L_2'(\\phi_1) -\\alpha L_2''(\\phi_1)L_1'(\\phi_1) + O(\\alpha^2)\\end{aligned}\\]å¯¹äºReptileï¼Œæ ¹æ®æ¢¯åº¦å®šä¹‰å’ŒSGDè¿‡ç¨‹æœ‰\\[\\begin{aligned}g_{Reptile} &amp;= (\\phi_1 - \\phi_3)/\\alpha = L_1'(\\phi_1)+L_2'(\\phi_2)\\\\&amp;= L_1'(\\phi_1)+L_2'(\\phi_1)+ L_2''(\\phi_1)(\\phi_2-\\phi_1) + O(\\alpha^2)\\\\&amp;= L_1'(\\phi_1)+L_2'(\\phi_1)-\\alpha L_2''(\\phi_1)L_1'(\\phi_1) + O(\\alpha^2)\\end{aligned}\\]æ¥ä¸‹æ¥å¯¹ä¸Šé¢çš„ä¸‰ä¸ªæ¢¯åº¦è¿›è¡Œå˜é‡æ›¿æ¢ï¼Œå…¨éƒ¨ç”¨ä¹‹å‰å®šä¹‰çš„è¾…åŠ©å˜é‡æ¥è¡¨ç¤º\\[\\begin{aligned}g_{MAML} &amp; &amp;= \\overline{g}_2 - \\alpha \\overline{H_2}\\overline{g}_1-\\alpha\\overline{H_1}\\overline{g}_2+O(\\alpha^2)\\\\g_{FOMAML} &amp;= g_2 &amp;= \\overline{g}_2-\\alpha\\overline{H}_2\\overline{g}_1+O(\\alpha^2)\\\\g_{Reptile} &amp;= g_1+g_2 &amp;= \\overline{g}_1+\\overline{g}_2-\\alpha \\overline{H}_2\\overline{g}_1 + O(\\alpha^2)\\\\\\end{aligned}\\]å¯ä»¥å¾—åˆ°ä¸ä¸Šä¸€èŠ‚ä¸€è‡´çš„ç»“æœã€‚1.5. æ¢¯åº¦çš„æ³°å‹’å±•å¼€çš„é¢†å¤´é˜¶ï¼ˆç»§ç»­ï¼‰å†æ¬¡å®šä¹‰ä¸¤ä¸ªæœŸæœ›å‚æ•°å¦‚ä¸‹ã€‚ç¬¬ä¸€ä¸ªï¼šAvgGrad å®šä¹‰ä¸ºlosså¯¹åˆå§‹å‚æ•°çš„æ¢¯åº¦çš„å¹³å‡æœŸæœ›\\[AvgGrad = \\mathbb E_{\\tau,1}[\\overline{g}_1] =\\mathbb E_{\\tau,2}[\\overline{g}_2]\\]ï¼ˆ-AvgGradï¼‰æ˜¯å‚æ•° $\\phi$ åœ¨æœ€å°åŒ– joint training é—®é¢˜ä¸­çš„ä¸‹é™æ–¹å‘ã€‚å°±æ˜¯æƒ³åœ¨æ‰€æœ‰batchä¸Šå‡å°lossï¼Œä¹Ÿå°±æ˜¯å‡å°æ•´ä½“çš„ä»»åŠ¡æŸå¤±ã€‚  ä¸ºä»€ä¹ˆæ­¤å¤„ $\\overline{g}_1$ å’Œ $\\overline{g}_2$ çš„æœŸæœ›ç›¸ç­‰å‘¢ï¼Œå› ä¸ºå®ƒä»¬éƒ½æ˜¯è¡¨ç¤ºçš„æ˜¯losså¯¹åŸå§‹å‚æ•°çš„æ¢¯åº¦ï¼Œåªä¸è¿‡å¯¹åº”äºä¸åŒçš„batchã€‚åœ¨minibatchä¸­ï¼Œä¸€ä¸ªbatchç”¨äºè¿›è¡Œä¸€æ¬¡æ¢¯åº¦ä¸‹é™ï¼Œå› ä¸ºbatchæ˜¯éšæœºçš„ï¼Œæ‰€ä»¥losså¯¹åŸå§‹å‚æ•°çš„æ¢¯åº¦ä¸batchæ˜¯æ— å…³çš„ã€‚ç¬¬äºŒä¸ªï¼šAvgGradInner\\[\\begin{aligned}AvgGradInner &amp;= \\mathbb E_{\\tau,1,2}[\\overline{H}_1\\overline{g}_2]\\\\&amp;= \\mathbb E_{\\tau,1,2}[\\overline{H}_2\\overline{g}_1]\\\\&amp;= \\frac{1}{2}\\mathbb E_{\\tau,1,2}[\\overline{H}_1\\overline{g}_2+\\overline{H}_2\\overline{g}_1]\\\\&amp;= \\frac{1}{2}\\mathbb E_{\\tau,1,2}[\\frac{\\partial}{\\partial \\phi_1}(\\overline{g}_1\\cdot \\overline{g}_2)]\\end{aligned}\\](-AvgGradInner) çš„æ–¹å‘å¯ä»¥å¢å¤§ä¸åŒminibatché—´æ¢¯åº¦çš„å†…ç§¯ï¼Œä»è€Œæé«˜æ³›åŒ–èƒ½åŠ›ã€‚æ¢å¥è¯è¯´ï¼ŒAvgGradInneræ˜¯ $\\overline{g}_0\\overline{g}_1$ çš„å¯¹åŸå§‹å‚æ•°çš„å¯¼æ•°ï¼Œå› ä¸ºæ¢¯åº¦åœ¨å‚æ•°æ›´æ–°æ—¶æ˜¯åŠ è´Ÿå·çš„ï¼Œæ‰€ä»¥æ˜¯åœ¨æœ€å¤§åŒ–åŒä¸€ä»»åŠ¡ä¸­ä¸åŒminibatchä¹‹é—´æ¢¯åº¦çš„å†…ç§¯ã€‚å¯¹å…¶ä¸­ä¸€ä¸ªbatchè¿›è¡Œæ¢¯åº¦æ›´æ–°ä¼šæ˜¾è‘—æ”¹å–„å¦ä¸€ä¸ªbatchçš„çš„è¡¨ç°ï¼Œè¿™æ ·å°±å¢åŠ äº†æ¨¡å‹çš„æ³›åŒ–æ€§å’Œå¿«é€Ÿå­¦ä¹ çš„èƒ½åŠ›ã€‚ä¸‹é¢å°±å¯ä»¥å¯¹ä¸Šè¿°ä¸‰ä¸ªæ¢¯åº¦è¿›è¡Œè¿›ä¸€æ­¥æ›¿æ¢ï¼Œ$k=2$ æ—¶\\[\\begin{aligned}\\mathbb{E}[g_{MAML}] &amp;= (1)AvgGrad - (2\\alpha)AvgGradInner + O(\\alpha^2)\\\\\\mathbb{E}[g_{FOMAML}] &amp;= (1)AvgGrad - (\\alpha)AvgGradInner + O(\\alpha^2)\\\\\\mathbb{E}[g_{Reptile}] &amp;= (2)AvgGrad - (\\alpha)AvgGradInner + O(\\alpha^2)\\\\\\end{aligned}\\]æ‰©å±•åˆ° $k&gt;2$ çš„æƒ…å†µæœ‰ [3]\\[\\begin{aligned}\\mathbb{E}[g_{MAML}] &amp;= (1)AvgGrad - (2(k-1)\\alpha)AvgGradInner + O(\\alpha^2)\\\\\\mathbb{E}[g_{FOMAML}] &amp;= (1)AvgGrad - ((k-1)\\alpha)AvgGradInner + O(\\alpha^2)\\\\\\mathbb{E}[g_{Reptile}] &amp;= (2)AvgGrad - (\\frac{1}{2}k(k-1)\\alpha)AvgGradInner + O(\\alpha^2)\\\\\\end{aligned}\\]å¯ä»¥çœ‹åˆ°ä¸‰è€…AvgGradInnerä¸AvgGradä¹‹é—´çš„ç³»æ•°æ¯”çš„å…³ç³»æ˜¯ï¼šMAML &gt; FOMAML &gt; Retileã€‚è¿™ä¸ªæ¯”ä¾‹ä¸æ­¥é•¿ $\\alpha$ï¼Œè¿­ä»£æ¬¡æ•° $k$ æ­£ç›¸å…³ã€‚ç»¼ä¸Šæ‰€è¿°ï¼Œ MAML å’Œ Reptile çš„ä¼˜åŒ–ç›®æ ‡ç›¸åŒï¼Œéƒ½æ˜¯æ›´å¥½çš„ä»»åŠ¡è¡¨ç°ï¼ˆç”± AvgGrad ä¸»å¯¼ï¼‰å’Œæ›´å¥½çš„æ³›åŒ–èƒ½åŠ›ï¼ˆç”± AvgGradInner ä¸»å¯¼ï¼‰ã€‚1.6. å¦ä¸€ç§ä¸ä¸¥è°¨çš„åˆ†æå¦ä¸€ç§åˆ†ææœ‰æ•ˆçš„æ–¹æ³•å€ŸåŠ©äº†æµå½¢ï¼ŒReptile æ”¶æ•›äºä¸€ä¸ªè§£ï¼Œè¿™ä¸ªè§£åœ¨æ¬§å¼ç©ºé—´ä¸Šä¸æ¯ä¸ªä»»åŠ¡çš„æœ€ä¼˜è§£çš„æµå½¢æ¥è¿‘ã€‚æ²¡çœ‹æ‡‚ä¸ç®¡äº†ã€‚ä½œè€…è‡ªå·±ä¹Ÿå·ç§°ä¸å¦‚æ³°å‹’å±•å¼€ä¸¥è°¨ã€‚  This is a informal argument and should be taken much less seriously than the preceding Taylor series analysis1.7. å®éªŒå°‘æ ·æœ¬åˆ†ç±»ä»ä¸¤ä¸ªè¡¨æ ¼ä¸­çš„æ•°æ®å¯ä»¥çœ‹å‡ºï¼ŒMAMLä¸Reptileåœ¨åŠ å…¥äº†è½¬å¯¼ï¼ˆTransductionï¼‰åï¼Œåœ¨Mini-ImageNetä¸Šè¿›è¡Œå®éªŒï¼ŒReptileçš„è¡¨ç°è¦æ›´å¥½ä¸€äº›ï¼Œè€ŒOmniglotæ•°æ®é›†ä¸Šæ­£å¥½ç›¸åã€‚ä¸åŒçš„å†…å¾ªç¯æ¢¯åº¦ç»„åˆæ¯”è¾ƒé€šè¿‡åœ¨å†…å¾ªç¯ä¸­ä½¿ç”¨å››ä¸ªä¸é‡åˆçš„Mini-Batchï¼Œäº§ç”Ÿæ¢¯åº¦æ•°æ® g1,g2,g3,g4 ï¼Œç„¶åå°†å®ƒä»¬ä»¥ä¸åŒçš„æ–¹å¼è¿›è¡Œçº¿æ€§ç»„åˆï¼ˆç­‰ä»·äºæ‰§è¡Œå¤šæ¬¡æ¢¯åº¦æ›´æ–°ï¼‰ç”¨äºå¤–éƒ¨å¾ªç¯çš„æ›´æ–°ï¼Œè¿›è€Œæ¯”è¾ƒå®ƒä»¬ä¹‹é—´çš„æ€§èƒ½è¡¨ç°ï¼Œå®éªŒç»“æœå¦‚ä¸‹å›¾ï¼šä»æ›²çº¿å¯ä»¥çœ‹å‡ºï¼š  ä»…ä½¿ç”¨ä¸€ä¸ªæ‰¹æ¬¡çš„æ•°æ®äº§ç”Ÿçš„æ¢¯åº¦çš„æ•ˆæœå¹¶ä¸æ˜¾è‘—ï¼Œå› ä¸ºç›¸å½“äºè®©æ¨¡å‹ç”¨è§åˆ°è¿‡çš„å°‘é‡çš„æ•°æ®å»ä¼˜åŒ–æ‰€æœ‰ä»»åŠ¡ã€‚  è¿›è¡Œäº†ä¸¤æ­¥æ›´æ–°çš„Reptileï¼ˆç»¿çº¿ï¼‰çš„æ•ˆæœè¦æ˜æ˜¾ä¸å¦‚è¿›è¡Œäº†ä¸¤æ­¥æ›´æ–°çš„FOMAMLï¼ˆçº¢çº¿ï¼‰ï¼Œå› ä¸ºReptileåœ¨AvgGradInnerä¸Šçš„æƒé‡ï¼ˆAvgGradInnerä¸AvgGradçš„ç³»æ•°çš„æ¯”ä¾‹ï¼‰è¦å°äºFOMAMLã€‚  éšç€mini-batchæ•°é‡çš„å¢å¤šï¼Œæ‰€æœ‰ç®—æ³•çš„æ€§èƒ½ä¹Ÿåœ¨æå‡ã€‚é€šè¿‡åŒæ—¶åˆ©ç”¨å¤šæ­¥çš„æ¢¯åº¦æ›´æ–°ï¼ŒReptileçš„è¡¨ç°è¦æ¯”ä»…ä½¿ç”¨æœ€åä¸€æ­¥æ¢¯åº¦æ›´æ–°çš„FOMAMLçš„è¡¨ç°å¥½ã€‚å†…å¾ªç¯ä¸­Mini-Batch é‡åˆæ¯”è¾ƒReptileå’ŒFOMAMLåœ¨å†…å¾ªç¯è¿‡ç¨‹ä¸­éƒ½æ˜¯ä½¿ç”¨çš„SGDè¿›è¡Œçš„ä¼˜åŒ–ï¼Œåœ¨è¿™ä¸ªä¼˜åŒ–è¿‡ç¨‹ä¸­ä»»ä½•å¾®å°çš„å˜åŒ–éƒ½å°†å¯¼è‡´æœ€ç»ˆæ¨¡å‹æ€§èƒ½çš„å·¨å¤§å˜åŒ–ï¼Œå› æ­¤è¿™éƒ¨åˆ†çš„å®éªŒä¸»è¦æ˜¯æ¢ç©¶ä¸¤è€…å¯¹äºå†…å¾ªç¯ä¸­çš„è¶…æ•°çš„æ•æ„Ÿæ€§ï¼ŒåŒæ—¶ä¹ŸéªŒè¯äº†FOMAMLåœ¨minibatchä»¥é”™è¯¯çš„æ–¹å¼é€‰å–æ—¶ä¼šå‡ºç°æ˜¾è‘—çš„æ€§èƒ½ä¸‹é™æƒ…å†µã€‚mini-batchçš„é€‰æ‹©æœ‰ä¸¤ç§æ–¹å¼ï¼š  shared-tailï¼ˆå…±å°¾ï¼‰ï¼šæœ€åä¸€ä¸ªå†…å¾ªç¯çš„æ•°æ®æ¥è‡ªä»¥å‰å†…å¾ªç¯æ‰¹æ¬¡çš„æ•°æ®  separate-tailï¼ˆåˆ†å°¾ï¼‰ï¼šæœ€åä¸€ä¸ªå†…å¾ªç¯çš„æ•°æ®ä¸ä»¥å‰å†…å¾ªç¯æ‰¹æ¬¡çš„æ•°æ®ä¸åŒé‡‡ç”¨ä¸åŒçš„mini-batché€‰å–æ–¹å¼åœ¨FOMAMLä¸Šè¿›è¡Œå®éªŒï¼Œå‘ç°éšç€å†…å¾ªç¯è¿­ä»£æ¬¡æ•°çš„å¢å¤šï¼Œé‡‡ç”¨åˆ†å°¾æ–¹å¼çš„FOMAMLæ¨¡å‹çš„æµ‹è¯•å‡†ç¡®ç‡è¦é«˜ä¸€äº›ï¼Œå› ä¸ºåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæµ‹è¯•çš„æ•°æ®é€‰å–æ–¹å¼ä¸è®­ç»ƒè¿‡ç¨‹ä¸­çš„æ•°æ®é€‰å–æ–¹å¼æ›´ä¸ºæ¥è¿‘ã€‚å½“é‡‡ç”¨ä¸åŒçš„æ‰¹æ¬¡å¤§å°æ—¶ï¼Œé‡‡ç”¨å…±å°¾æ–¹å¼é€‰å–æ•°æ®çš„FOMAMLçš„å‡†ç¡®æ€§ä¼šéšç€æ‰¹æ¬¡å¤§å°çš„å¢åŠ è€Œæ˜¾è‘—å‡å°ã€‚å½“é‡‡ç”¨full-batchæ—¶ï¼Œå…±å°¾FOMAMLçš„è¡¨ç°ä¼šéšç€å¤–å¾ªç¯æ­¥é•¿çš„åŠ å¤§è€Œå˜å·®ã€‚å…±å°¾FOMAMLçš„è¡¨ç°å¦‚æ­¤æ•æ„Ÿçš„åŸå› å¯èƒ½æ˜¯æœ€åˆçš„å‡ æ¬¡SGDæ›´æ–°è®©æ¨¡å‹è¾¾åˆ°äº†å±€éƒ¨æœ€ä¼˜ï¼Œä»¥åçš„æ¢¯åº¦æ›´æ–°å°±ä¼šä½¿å‚æ•°åœ¨è¿™ä¸ªå±€éƒ¨æœ€ä¼˜é™„è¿‘æ³¢åŠ¨ã€‚2. æ¯”è¾ƒå†æ¬¡æ¯”è¾ƒModel Pre-trainingã€MAML å’Œ Reptileæ–¹æ³•ã€‚ï¼ˆå·¦ï¼šMAMLã€‚å³ï¼šModel Pre-trainingï¼‰ï¼ˆReptileï¼‰Pre-trainingé‡‡ç”¨taskçš„losså¯¹å‚æ•°çš„æ¢¯åº¦æ›´æ–°æ¨¡å‹çš„åŸå§‹å‚æ•°ã€‚MAMLé‡‡ç”¨taskçš„ç¬¬äºŒæ¬¡æ¢¯åº¦è®¡ç®—æ›´æ–°æ¨¡å‹çš„åŸå§‹å‚æ•°ã€‚Reptileé‡‡ç”¨å¤šæ¬¡æ¢¯åº¦è®¡ç®—æ›´æ–°æ¨¡å‹çš„åŸå§‹å‚æ•°ã€‚ä¸Šé¢è¿™ä¸ªå›¾ä¸å…·ä½“ï¼Œä½†æ˜¯å¾ˆç›´è§‚çš„å±•ç¤ºäº†è¿™äº›ç®—æ³•çš„åŒºåˆ«ã€‚$g_i$ è¡¨ç¤ºç¬¬ $i$ æ¬¡è´Ÿæ¢¯åº¦è®¡ç®—ã€‚è¿™é‡Œçš„MAMLæ˜¯ä¸€é˜¶çš„ï¼Œæ²¿ç€ $g_2$ æ–¹å‘æ›´æ–°ï¼ŒReptile æ²¿ç€ $g_1+g_2$  çš„æ–¹å‘æ›´æ–°ï¼Œè€Œæˆ‘ä»¬å¸¸è§„çš„é¢„è®­ç»ƒæ¨¡å‹å°±æ˜¯æ²¿ç€ $g_1$ æ–¹å‘æ›´æ–°ã€‚3. ç®—æ³•å®ç°First-orderè¿‘ä¼¼å®ç°Reptileï¼šhttps://github.com/dragen1860/Reptile-Pytorch4. reptileå›å½’sinå‡½æ•°import numpy as npimport torchfrom torch import nn, autograd as agimport matplotlib.pyplot as pltfrom copy import deepcopyseed = 0plot = Trueinnerstepsize = 0.02 # stepsize in inner SGDinnerepochs = 1 # number of epochs of each inner SGDouterstepsize0 = 0.1 # stepsize of outer optimization, i.e., meta-optimizationniterations = 30000 # number of outer updates; each iteration we sample one task and update on itrng = np.random.RandomState(seed)torch.manual_seed(seed)# Define task distributionx_all = np.linspace(-5, 5, 50)[:,None] # generate 50 x points within [-5,5]ntrain = 10 # Size of training minibatchesdef gen_task():    \"Generate regression problem\"    phase = rng.uniform(low=0, high=2*np.pi)    ampl = rng.uniform(0.1, 5)    f_randomsine = lambda x : np.sin(x + phase) * ampl    return f_randomsine# Define model. Reptile paper uses ReLU, but Tanh gives slightly better resultsmodel = nn.Sequential(    nn.Linear(1, 64),    nn.Tanh(),    nn.Linear(64, 64),    nn.Tanh(),    nn.Linear(64, 1),)def totorch(x):    return ag.Variable(torch.Tensor(x))def train_on_batch(x, y):    x = totorch(x)    y = totorch(y)    model.zero_grad()    ypred = model(x)    loss = (ypred - y).pow(2).mean()    loss.backward()    for param in model.parameters():        param.data -= innerstepsize * param.grad.datadef predict(x):    x = totorch(x)    return model(x).data.numpy()# Choose a fixed task and minibatch for visualizationf_plot = gen_task()xtrain_plot = x_all[rng.choice(len(x_all), size=ntrain)]# Reptile training loopfor iteration in range(niterations): # iterate 30000 times    weights_before = deepcopy(model.state_dict())    # Generate task    f = gen_task()    y_all = f(x_all)    # Do SGD on this task    inds = rng.permutation(len(x_all)) # get random index of 0-50    for _ in range(innerepochs): # SGD 1 times        for start in range(0, len(x_all), ntrain): # from 0-50, select a num every 'ntrain' interval            mbinds = inds[start:start+ntrain] # get randomly index from 'start' to 'ntrain'            train_on_batch(x_all[mbinds], y_all[mbinds])    # Interpolate between current weights and trained weights from this task    # I.e. (weights_before - weights_after) is the meta-gradient    weights_after = model.state_dict()    outerstepsize = outerstepsize0 * (1 - iteration / niterations) # linear schedule    model.load_state_dict({name :        weights_before[name] + (weights_after[name] - weights_before[name]) * outerstepsize        for name in weights_before})    # Periodically plot the results on a particular task and minibatch    if plot and iteration==0 or (iteration+1) % 1000 == 0:        plt.cla()        f = f_plot        weights_before = deepcopy(model.state_dict()) # save snapshot before evaluation        plt.plot(x_all, predict(x_all), label=\"pred after 0\", color=(0,0,1))        for inneriter in range(32):            train_on_batch(xtrain_plot, f(xtrain_plot))            if (inneriter+1) % 8 == 0:                frac = (inneriter+1) / 32                plt.plot(x_all, predict(x_all), label=\"pred after %i\"%(inneriter+1), color=(frac, 0, 1-frac))        plt.plot(x_all, f(x_all), label=\"true\", color=(0,1,0))        lossval = np.square(predict(x_all) - f(x_all)).mean()        plt.plot(xtrain_plot, f(xtrain_plot), \"x\", label=\"train\", color=\"k\")        plt.ylim(-4,4)        plt.legend(loc=\"lower right\")        plt.pause(0.01)        model.load_state_dict(weights_before) # restore from snapshot        print(f\"-----------------------------\")        print(f\"iteration               {iteration+1}\")        print(f\"loss on plotted curve   {lossval:.3f}\") # optimized in one example for brevity  ç”¨ $sin$ å‡½æ•°æ¥æµ‹è¯•Reptileç®—æ³•ã€‚          åœ¨ $[-5,5]$ åŒºé—´å†…éšæœºå–50ä¸ª$x$ç‚¹      åœ¨ $[0,2\\pi]$ åŒºé—´å†…éšæœºå–ç›¸ä½$P$      åœ¨ $[0.1,5]$ åŒºé—´å†…éšæœºå–å¹…å€¼$A$            é‚£ä¹ˆå°±å¯ä»¥éšæœºç”Ÿæˆä»»æ„ç›¸ä½å¹…å€¼çš„50ä¸ªç‚¹çš„sinå‡½æ•°ï¼š$Asin(x+P)$    è®¾ç½®minibatchçš„ä¸ªæ•°ä¸ºntrain=10ï¼Œä¹Ÿå°±æ˜¯ä¸€æ¬¡è®­ç»ƒ10ä¸ªç‚¹      å…ˆéšæœºäº§ç”Ÿä¸€ä¸ª $sin$ å‡½æ•°ï¼Œå¹¶åœ¨å…¶ä¸Šéšæœºå–10ä¸ªç‚¹ï¼Œä½œä¸ºæµ‹è¯•é›†    è¿›è¡Œå¤–ç¯è¿­ä»£ niterations=30000æ¬¡          éšæœºäº§ç”Ÿä¸€ä¸ª $sin$ å‡½æ•°      è¿›è¡Œå†…ç¯è¿­ä»£innerepochs=1æ¬¡                  éšæœºå–50ä¸ªç‚¹ï¼ˆ$x$ï¼‰ä¸­çš„10ä¸ªç‚¹ï¼ˆntrainï¼‰          è®­ç»ƒä¸€æ¬¡ï¼ˆSGDï¼‰          å–5æ¬¡ç›´åˆ°å–å®Œæ‰€æœ‰50ä¸ªç‚¹          [å®Œæˆå†…ç¯è¿­ä»£]                    æ›´æ–°å¤–å±‚å­¦ä¹ ç‡ outerstepsize = outerstepsize0 * (1 - iteration / niterations)      æ›´æ–°æ¨¡å‹å‚æ•° weights_before+ (weights_after - weights_before) * outerstepsize        è‹¥å¤–ç¯è¿­ä»£è¾¾åˆ°1000æ¬¡çš„æ•´æ•°å€ï¼Œé‚£ä¹ˆå°†è®­ç»ƒçš„æ¨¡å‹åœ¨æµ‹è¯•é›†ä¸Šæµ‹è¯•  æµ‹è¯•è¿­ä»£inneriter=32æ¬¡          åœ¨æµ‹è¯•é›†ä¸Šè®­ç»ƒä¸€æ¬¡ï¼ˆ10ä¸ªç¦»æ•£ç‚¹ï¼‰      æ¯è¿‡8æ¬¡ç”»ä¸€æ¬¡å›¾ä¸Šçš„æ›²çº¿ï¼ˆ50ä¸ªç¦»æ•£ç‚¹ï¼‰        MSEè¡¡é‡æµ‹è¯•ç»“æœ  [å®Œæˆå¤–ç¯è¿­ä»£]5. å‚è€ƒæ–‡çŒ®[1]  Rust-in. MAML è®ºæ–‡åŠä»£ç é˜…è¯»ç¬”è®°.[2] äººå·¥æ™ºéšœ. MAMLç®—æ³•ï¼Œmodel-agnostic metalearnings?[3] Veagau. ã€ç¬”è®°ã€‘Reptile-ä¸€é˜¶å…ƒå­¦ä¹ ç®—æ³•[4] pure water. ReptileåŸç†ä»¥åŠä»£ç è¯¦è§£"
  },
  
  {
    "title": "LaTeX+TexStudioç¯å¢ƒé…ç½®",
    "url": "/posts/Latex-TexStudio/",
    "categories": "Tutorial, Writing",
    "tags": "latex",
    "date": "2020-07-13 14:35:19 +0800",
    





    
    "snippet": "LaTeX æ˜¯ä¸€ç§é«˜è´¨é‡çš„æ’ç‰ˆç³»ç»Ÿï¼Œè¢«å¹¿æ³›çš„æœŸåˆŠæ‚å¿—æ‰€æ”¯æŒï¼Œè®©ç¬”è€…ä»…éœ€è¦å…³æ³¨å†…å®¹æœ¬èº«ï¼Œè€Œæ— éœ€è¿‡å¤šçš„ä¸ºæ ¼å¼å’Œæ’ç‰ˆè€Œè´¹å¿ƒï¼Œå…·å¤‡é«˜è´¨é‡çš„è¡¨æ ¼ã€å…¬å¼ä¹¦å†™ä½“éªŒã€‚  1. LaTeXç®€ä»‹  2. ä¸‹è½½å’Œå®‰è£…MiKTeX  3. ä¸‹è½½å’Œå®‰è£…TeXstudio          3.1. ä¸‹è½½å’Œå®‰è£…      3.2. é…ç½®      3.3. æµ‹è¯•        4. LaTeXè¯¦ç»†æŒ‡å—         ...",
    "content": "LaTeX æ˜¯ä¸€ç§é«˜è´¨é‡çš„æ’ç‰ˆç³»ç»Ÿï¼Œè¢«å¹¿æ³›çš„æœŸåˆŠæ‚å¿—æ‰€æ”¯æŒï¼Œè®©ç¬”è€…ä»…éœ€è¦å…³æ³¨å†…å®¹æœ¬èº«ï¼Œè€Œæ— éœ€è¿‡å¤šçš„ä¸ºæ ¼å¼å’Œæ’ç‰ˆè€Œè´¹å¿ƒï¼Œå…·å¤‡é«˜è´¨é‡çš„è¡¨æ ¼ã€å…¬å¼ä¹¦å†™ä½“éªŒã€‚  1. LaTeXç®€ä»‹  2. ä¸‹è½½å’Œå®‰è£…MiKTeX  3. ä¸‹è½½å’Œå®‰è£…TeXstudio          3.1. ä¸‹è½½å’Œå®‰è£…      3.2. é…ç½®      3.3. æµ‹è¯•        4. LaTeXè¯¦ç»†æŒ‡å—          4.1. ä¸»æ–‡æ¡£      4.2. å®åŒ…å®‰è£…å’Œç®¡ç†      4.3. æ’å…¥å›¾ç‰‡                  4.3.1. æ·»åŠ å›¾ç‰‡          4.3.2. å¼•ç”¨å›¾ç‰‡          4.3.3. visioç»˜å›¾è½¬ä¸ºæ— è¾¹æ¡†PDF                    4.4. æ’å…¥å…¬å¼                  4.4.1. æ’å…¥è¡Œå†…å…¬å¼          4.4.2. æ’å…¥è¡Œé—´å…¬å¼          4.4.3. å¼•ç”¨å…¬å¼ç¼–å·                    4.5. æ’å…¥å‚è€ƒæ–‡çŒ®                  4.5.1. å‚è€ƒæ–‡çŒ®æ¥æº          4.5.2. å‚è€ƒæ–‡çŒ®çš„æ·»åŠ           4.5.3. å‚è€ƒæ–‡çŒ®çš„å¼•ç”¨          4.5.4. å‚è€ƒæ–‡çŒ®ç¼–è¯‘          4.5.5. å‚è€ƒæ–‡çŒ®å­—æ¯å¤§å†™          4.5.6. é™„å½•ï¼šå‚è€ƒæ–‡çŒ®çš„æ ¼å¼å­—æ®µ                    4.6. å¼•ç”¨ç« èŠ‚åç§°      4.7. åˆ—è¡¨        5. å‚è€ƒæ–‡çŒ®1. LaTeXç®€ä»‹  LaTeX is a high-quality typesetting system; it includes features designed for the production of technical and scientific documentation. LaTeX is the de facto standard for the communication and publication of scientific documents. LaTeX is available as free software.LaTeX æ˜¯ä¸€ç§é«˜è´¨é‡çš„æ’ç‰ˆç³»ç»Ÿï¼›å®ƒåŒ…æ‹¬ä¸ºåˆ¶ä½œæŠ€æœ¯å’Œç§‘å­¦æ–‡æ¡£è€Œè®¾è®¡çš„åŠŸèƒ½ã€‚LaTeX æ˜¯ç§‘å­¦æ–‡çŒ®äº¤æµå’Œå‡ºç‰ˆçš„äº‹å®æ ‡å‡†ã€‚LaTeX æ˜¯å…è´¹è½¯ä»¶ã€‚ä¸€ä¸ªå®Œæ•´çš„ LaTex å†™ä½œç¯å¢ƒåŒ…æ‹¬ï¼š  TeX å‘è¡Œç‰ˆï¼š          Windowsä¸‹çš„ MiKTeXï¼ˆHome - MiKTeX.orgï¼‰      Linuxä¸‹çš„TexLive        ç¼–è¾‘å™¨ï¼š          è·¨å¹³å°çš„ TeXstudio ï¼ˆHome - TexXstudioï¼‰      Windowsä¸‹çš„ WinEdit      è·¨å¹³å°çš„ VSCodeï¼ˆ2020.08.28æ–°å¢ï¼šLaTeX+VSCodeç¯å¢ƒé…ç½®ï¼‰      ä¸‹é¢ä»¥ MiKTeX 20.6 + TeXstudio 2.12.22 ä¸ºä¾‹è¿›è¡Œå®‰è£…å’Œéƒ¨ç½²è®²è§£ã€‚2. ä¸‹è½½å’Œå®‰è£…MiKTeXå¯ä»¥å°† MiKTeX çœ‹ä½œæ˜¯ LaTeX çš„ä¸€ç§å‘è¡Œç‰ˆï¼Œç±»æ¯” C çš„å‘è¡Œç‰ˆ MSC ä¸€æ ·ï¼ˆå¤§é›¾ï¼‰ã€‚å®˜ç½‘çš„ä¸‹è½½é¡µé¢ ä¸º https://MiKTeX.org/downloadã€‚åŒ…æ‹¬ä¸‰ç§ä¸‹è½½ï¼ˆå®‰è£…ï¼‰æ–¹å¼ï¼Œå¦‚å›¾åˆ†åˆ«ä¸ºå®‰è£…ç¨‹åºï¼ˆInstallerï¼‰ã€ç»¿è‰²ç‰ˆï¼ˆPortable Editionï¼‰ä»¥åŠå‘½ä»¤è¡Œï¼ˆCommand-line installerï¼‰ã€‚å¯¹äºWindowså¼€å‘ç¯å¢ƒï¼Œä¸è€ƒè™‘å‘½ä»¤è¡Œæ–¹å¼ï¼Œå› æ­¤å¯ä»¥ä»»æ„é€‰æ‹©å®‰è£…ç¨‹åºæˆ–è€…ç»¿è‰²ç‰ˆã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œç»¿è‰²ç‰ˆå¹¶æ²¡æœ‰å•ç‹¬çš„å‹ç¼©åŒ…ï¼Œè€Œæ˜¯ç›´æ¥å¯¹åº”å®‰è£…ç‰ˆçš„å®‰è£…ç¨‹åºï¼Œåªä¸è¿‡å°†å®‰è£…ç¨‹åºé‡å‘½åä¸º MiKTeX-portable.exeï¼Œç„¶ååŒå‡»å®‰è£…å³å¯ã€‚ç»¿è‰²ç‰ˆä¸å®‰è£…ç‰ˆçš„åŒºåˆ«åœ¨äºï¼Œç»¿è‰²ç‰ˆä¸ä¼šå‘ç³»ç»Ÿç›˜å†™å…¥é…ç½®ä¿¡æ¯ï¼Œä¹Ÿä¸ä¼šæ³¨å†Œç¯å¢ƒå˜é‡ï¼Œæ„å‘³ç€ä¹‹åå¦‚æœéœ€è¦å®‰è£…ç¼–è¾‘å™¨ï¼Œæ— æ³•è‡ªåŠ¨è·å–ç³»ç»Ÿä¸­å·²ç»å®‰è£…çš„LaTeXç‰ˆæœ¬ï¼Œè€Œéœ€è¦æ‰‹åŠ¨é…ç½®ã€‚æ‡’äººæ¨èå®‰è£…ç‰ˆï¼Œçœå»é…ç½®ç¯å¢ƒå˜é‡ç­‰æ­¥éª¤ï¼ˆè™½ç„¶åé¢æ˜¯ä»¥ç»¿è‰²ç‰ˆä»‹ç»çš„ï¼‰ã€‚åŒå‡»ä¸‹è½½çš„ exe æ–‡ä»¶è¿›è¡Œå®‰è£…ï¼Œè·¯å¾„ä»»æ„ã€‚3. ä¸‹è½½å’Œå®‰è£…TeXstudio3.1. ä¸‹è½½å’Œå®‰è£…å‰å¾€å®˜ç½‘ï¼Œç½‘å€ä¸º http://texstudio.sourceforge.net/ã€‚é€‰æ‹©å·¦ä¾§çš„â€œDownloadâ€ï¼Œå¯¹äºWindowså¹³å°ï¼Œæ ¹æ®éœ€è¦é€‰æ‹©å®‰è£…ç‰ˆæˆ–è€…ç»¿è‰²ç‰ˆè¿›è¡Œä¸‹è½½ã€‚ä¸‹è½½å®ŒæˆååŒå‡»å®‰è£…ï¼Œå®‰è£…è·¯å¾„ä»»æ„ã€‚3.2. é…ç½®ç¬¬ä¸€æ­¥ï¼šé…ç½®è¯­è¨€ï¼Œå°†ç•Œé¢è¯­è¨€æ›´æ”¹ä¸ºä¸­æ–‡ã€‚ç‚¹å‡»èœå•æ çš„ã€ŒOptionsã€-ã€ŒConfigure TeXstudioã€ï¼Œåœ¨å¼¹å‡ºçš„ç•Œé¢ä¸­é€‰æ‹©å·¦ä¾§çš„ã€ŒGeneralã€ï¼Œä¸‹æ‹‰ã€ŒLanguageã€ä¸­é€‰æ‹©ã€Œzh-cnã€ï¼Œç‚¹å‡»ã€ŒOKã€å³å¯å®Œæˆè¯­è¨€æ›´æ”¹ã€‚ç¬¬äºŒæ­¥ï¼šé…ç½® LaTeX è·¯å¾„ï¼Œé‡ç‚¹è·¯å¾„å¦‚å›¾é€šè¿‡å„è¡Œå³ä¾§çš„ã€Œæ‰“å¼€ã€æŒ‰é’®æ¥é€‰æ‹©è·¯å¾„ã€‚å‡è®¾å®‰è£…çš„MiKTeXä¸ºç»¿è‰²ç‰ˆï¼Œå®‰è£…æ ¹ç›®å½•ä¸ºX:\\ProgramFiles\\MiKTeX\\ï¼Œåˆ™ä¸Šè¿°è·¯å¾„å‡ä½äºX:\\ProgramFiles\\MiKTeX\\texmfs\\install\\miktex\\bin\\x64ç›¸åº”çš„ï¼Œå®‰è£…ç‰ˆçš„è·¯å¾„ä½äºX:\\ProgramFiles\\MiKTeX\\miktex\\bin\\x64åˆ†åˆ«å¯¹åº”ä¸º  LaTeXï¼šlatex.exe  PdfLaTeXï¼špdflatex.exe  External PDF Viewerï¼šè§†è‡ªå·±å®‰è£…çš„pdfé˜…è¯»å™¨è€Œå®šï¼Œå¯ä¸è®¾ç½®  BibTeXï¼šbibtex.exe  BibTex 8ä½ï¼šbibtex8.exeç¬¬ä¸‰æ­¥ï¼ˆå¯é€‰ï¼‰ï¼šé…ç½®é€‰æ‹©å¤–éƒ¨ PDF æŸ¥çœ‹å™¨è¿›è¡ŒæŸ¥çœ‹ã€‚å›  LaTeX ç›´æ¥å°†æ–‡æ¡£ä»£ç ç”Ÿæˆä¸º PDF æ–‡ä»¶ï¼Œå› æ­¤éœ€è¦è®¾ç½® PDF æŸ¥çœ‹å™¨ã€‚TeXstudio é»˜è®¤è®¾ç½®ä¸ºå†…éƒ¨çš„ PDF æŸ¥çœ‹å™¨è¿›è¡ŒæŸ¥çœ‹ï¼Œå¯è®¾ç½®ä¸ºå¤–éƒ¨è‡ªå·±å®‰è£…çš„ç¬¬ä¸‰æ–¹ PDF æŸ¥çœ‹å™¨ã€‚å¦‚ä¸‹å›¾æ›´æ”¹çº¢æ¡†ä¸­çš„è®¾ç½®å³å¯æ³¨æ„ï¼Œä¸æ˜¯æ‰€æœ‰ç¬¬ä¸‰æ–¹ PDF é˜…è¯»å™¨éƒ½æ”¯æŒã€Œçƒ­åˆ·æ–°ã€ï¼Œå³åœ¨é˜…è¯»å™¨æ‰“å¼€ PDF æ–‡ä»¶çš„æƒ…å†µä¸‹å¯¹æ–‡ä»¶è¿›è¡Œä¿®æ”¹ã€ä¿å­˜å’Œåˆ·æ–°æ˜¾ç¤ºï¼Œè€Œçƒ­åˆ·æ–°åŠŸèƒ½åœ¨ LaTeX å†™ä½œæ—¶æ˜¯ååˆ†å¿…è¦çš„åŠŸèƒ½ã€‚å› æ­¤ï¼Œå¦‚æœä¸è‚¯å®šè‡ªå·±ä½¿ç”¨çš„ç¬¬ä¸‰æ–¹ PDF é˜…è¯»å™¨æ˜¯å¦æ”¯æŒçƒ­åˆ·æ–°ï¼Œè¯·æ…é‡è®¾ç½®ï¼Œæˆ–è€…ä¸ä¿®æ”¹è®¾ç½®è€Œæ˜¯ç›´æ¥ä½¿ç”¨å†…ç½® PDF æŸ¥çœ‹å™¨ã€‚æ”¯æŒçƒ­åˆ·æ–°çš„ç¬¬ä¸‰æ–¹ PDF é˜…è¯»å™¨æ¨èï¼šSumatra PDFã€‚3.3. æµ‹è¯•å®Œæˆ TeXstudio çš„é…ç½®åï¼Œæ–°å»ºä¸€ä¸ªç©ºç™½çš„ tex æ–‡æ¡£è¿›è¡Œæµ‹è¯•ã€‚ç‚¹å‡»å·¦ä¸Šæ–¹çš„ã€Œæ–°å»ºã€æŒ‰é’®å³å¯æ–°å»ºä¸€ä¸ªç©ºç™½æ–‡æ¡£ã€‚åœ¨ç©ºç™½æ–‡æ¡£ä¸­å†™å…¥\\documentclass{article}% è¿™é‡Œæ˜¯å¯¼è¨€åŒº\\begin{document}Hello, world!\\end{document}ä¿å­˜ï¼Œç„¶åæŒ‰ F5 è¿›è¡Œæ„å»ºå¹¶æŸ¥çœ‹ã€‚å¦‚æœä¸€åˆ‡é¡ºåˆ©çš„è¯ï¼Œä¸‹æ–¹çš„æ¶ˆæ¯æ å°†ä¼šæç¤ºã€Œå®Œæˆã€ï¼Œå³ä¾§çš„å†…ç½® PDF æŸ¥çœ‹å™¨å°†ä¼šæ˜¾ç¤ºä¸€ä¸ª PDF æ–‡æ¡£ï¼Œå†…å®¹ä¸º â€œHello Worldï¼â€ã€‚4. LaTeXè¯¦ç»†æŒ‡å—4.1. ä¸»æ–‡æ¡£LaTeX å†™ä½œç±»ä¼¼ç¼–ç¨‹ï¼ŒåŒ…æ‹¬æ„å»ºï¼ˆç±»ä¼¼ç¼–è¯‘ï¼‰å’Œæ˜¾ç¤ºï¼ˆç±»ä¼¼è¿è¡Œï¼‰ã€‚åœ¨ TeXstudio ä¸­ï¼Œæ„å»ºå¹¶æ˜¾ç¤ºå¯ä»¥ä½œä¸ºä¸€æ­¥æ“ä½œï¼Œå¿«æ·é”®ä¸º F5 ï¼Œå•ç‹¬çš„æ„å»ºï¼ˆç¼–è¯‘ï¼‰å¿«æ·é”®ä¸º F6ï¼Œæ˜¾ç¤ºï¼ˆæŸ¥çœ‹ï¼‰å¿«æ·é”®ä¸º F7ã€‚ä¸‰è€…ä¹Ÿæœ‰æŒ‰é’®å¯ä»¥ç‚¹å‡»ï¼Œç‚¹å‡»æ•ˆæœä¸ä½¿ç”¨å¿«æ·é”®ä¸€è‡´ã€‚ä¸€ä¸ª tex æ–‡æ¡£ä»¥ \\documentclass{xxx}å¼€å¤´ï¼Œç”¨ä»¥å®šä¹‰è¯¥æ–‡æ¡£çš„ç±»å‹ã€‚\\documentclass[option]{class}å…¶ä¸­ï¼Œclass æŒ‡å®šæƒ³è¦çš„æ–‡æ¡£ç±»å‹ï¼Œoptions å‚æ•°å¯ä»¥å®šåˆ¶æ–‡æ¡£ç±»çš„å±æ€§ã€‚ ä¸åŒçš„é€‰é¡¹ä¹‹é—´é¡»ç”¨é€—å·éš”å¼€ã€‚æ ‡å‡†æ–‡æ¡£ç±»çš„æœ€å¸¸ç”¨classå¦‚ä¸‹è¡¨æ‰€ç¤ºã€‚            classï¼ˆç±»ï¼‰      è§£é‡Š                  article      æ’ç‰ˆç§‘å­¦æœŸåˆŠæ‚å¿—çš„è®ºæ–‡ã€ æ¼”ç¤ºæ–‡æ¡£ã€ çŸ­æŠ¥å‘Šã€ ç¨‹åºæ–‡æ¡£ã€ é‚€è¯·å‡½â€¦â€¦              proc      ä¸€ä¸ªåŸºäº article çš„ä¼šè®®æ–‡é›†ç±»              minimal      éå¸¸å°çš„æ–‡æ¡£ç±»ã€‚ åªè®¾ç½®äº†é¡µé¢å°ºå¯¸å’ŒåŸºæœ¬å­—ä½“ã€‚ ä¸»è¦ç”¨æ¥æŸ¥é”™ã€‚              report      æ’ç‰ˆå¤šç« èŠ‚é•¿æŠ¥å‘Šã€ çŸ­ç¯‡ä¹¦ç±ã€ åšå£«è®ºæ–‡â€¦â€¦              book      æ’ç‰ˆä¹¦ç±ã€‚              slides      æ’ç‰ˆå¹»ç¯ç‰‡ã€‚ è¯¥æ–‡æ¡£ç±»ä½¿ç”¨å¤§å· sans serif å­—ä½“ã€‚ ä¹Ÿå¯ä»¥é€‰ç”¨ FoilTEXa æ¥å¾—åˆ°ç›¸åŒçš„æ•ˆæœ      æ ‡å‡†æ–‡æ¡£ç±»çš„æœ€å¸¸ç”¨optionså¦‚ä¸‹è¡¨æ‰€ç¤ºã€‚            optionsï¼ˆè®¾ç½®é¡¹ï¼‰      è§£é‡Š                  10pt, 11pt, 12pt      è®¾ç½®æ–‡æ¡£ä¸­æ‰€ä½¿ç”¨çš„å­—ä½“çš„å¤§å°ã€‚ å¦‚æœè¯¥é¡¹æ²¡æœ‰æŒ‡å®šï¼Œ é»˜è®¤ä½¿ç”¨10pt å­—ä½“ã€‚              a4paper, letterpaper, . . .      å®šä¹‰çº¸å¼ çš„å°ºå¯¸ã€‚ ç¼ºçœè®¾ç½®ä¸ºletterpaperï¼Œ è¿˜å¯ä»¥ä½¿ç”¨a5paper, b5paper, executivepaper ä»¥åŠlegalpaperã€‚              fleqn      è®¾ç½®è¡Œé—´å…¬å¼ä¸ºå·¦å¯¹é½ï¼Œ è€Œä¸æ˜¯å±…ä¸­å¯¹é½ã€‚              leqno      è®¾ç½®è¡Œé—´å…¬å¼çš„ç¼–å·ä¸ºå·¦å¯¹é½ï¼Œ è€Œä¸æ˜¯å³å¯¹é½ã€‚              titlepage, notitlepage      æŒ‡å®šæ˜¯å¦åœ¨æ–‡æ¡£æ ‡é¢˜(document title) åå¦èµ·ä¸€é¡µã€‚ article æ–‡æ¡£ç±»ç¼ºçœè®¾ç½®ä¸ºä¸å¼€å§‹æ–°é¡µï¼Œ report å’Œbook ç±»åˆ™ç›¸åã€‚              onecolumn, twocolumn      è®¾ç½®ä»¥å•æ (one column) æˆ–åŒæ (two column) çš„æ–¹å¼æ¥æ’ç‰ˆæ–‡æ¡£ã€‚              twoside, oneside      æŒ‡å®šæ–‡æ¡£ä¸ºåŒé¢æˆ–å•é¢æ‰“å°æ ¼å¼ã€‚ article å’Œreport ç±»ä¸ºå•é¢(single sided) æ ¼å¼ï¼Œ book ç±»ç¼ºçœä¸ºåŒé¢(double sided) æ ¼å¼ã€‚ æ³¨æ„è¯¥é€‰é¡¹åªæ˜¯ä½œç”¨äºæ–‡æ¡£æ ·å¼ï¼Œ è€Œä¸ä¼šé€šçŸ¥æ‰“å°æœºä»¥åŒé¢æ ¼å¼æ‰“å°æ–‡æ¡£ã€‚              landscape      å°†æ–‡æ¡£çš„æ‰“å°è¾“å‡ºå¸ƒå±€è®¾ç½®ä¸º landscape æ¨¡å¼ã€‚              openright, openany      å†³å®šæ–°çš„ä¸€ç« ä»…åœ¨å¥‡æ•°é¡µå¼€å§‹è¿˜æ˜¯åœ¨ä¸‹ä¸€é¡µå¼€å§‹ã€‚ åœ¨æ–‡æ¡£ç±»å‹ä¸ºarticle æ—¶è¯¥é€‰é¡¹ä¸èµ·ä½œç”¨ï¼Œ å› ä¸ºè¯¥ç±»ä¸­æ²¡æœ‰å®šä¹‰â€œç« â€ (chapter)ã€‚ report ç±»é»˜è®¤åœ¨ä¸‹ä¸€é¡µå¼€å§‹æ–°ä¸€ç« è€Œbook ç±»çš„æ–°ä¸€ç« æ€»æ˜¯åœ¨å¥‡æ•°é¡µå¼€å§‹ã€‚      æ–‡æ¡£çš„çš„ä¸»ä½“éƒ¨åˆ†ä»¥ \\begin{document} å¼€å¤´ï¼Œä»¥ \\end{document} ç»“æŸï¼Œä»¥ç™¾åˆ†å· % ä½œä¸ºæ³¨é‡Šç¬¦å·ã€‚æœªå®Œå¾…ç»­4.2. å®åŒ…å®‰è£…å’Œç®¡ç†æŒ‰å¿«æ·é”® F5 è¿›è¡Œç¼–è¯‘æ„å»ºï¼Œè‹¥ä½¿ç”¨äº†ç¬¬ä¸‰æ–¹æä¾›çš„æ¨¡æ¿ï¼ˆæ¯”å¦‚æœŸåˆŠçš„æ’ç‰ˆæ¨¡æ¿ï¼‰ï¼Œå¯èƒ½ä¼šæç¤ºå®‰è£…ä¾èµ–çš„æ ·å¼åŒ…ç­‰ï¼Œç‚¹å‡»å®‰è£…å³å¯ã€‚å…¶ä¸­ï¼Œã€ŒChangeã€æŒ‰é’®å¯ä»¥æ›´æ¢å®åŒ…çš„æºã€‚MiKTeX æä¾›äº†ä¸€ä¸ªä¸“é—¨çš„å®åŒ…ç®¡ç†å™¨ï¼Œä½äºtexstudioå®‰è£…è·¯å¾„çš„mpm.exeã€‚å¦‚E:\\ProgramFiles\\MiKTeXPortable\\texmfs\\install\\MiKTeX\\bin\\x64\\mpm.exeåŒå‡»åå¯ä»¥æ‰“å¼€ MiKTeX consuleã€‚è‹¥é‡‡ç”¨å®‰è£…ç‰ˆè€Œä¸æ˜¯ç»¿è‰²ç‰ˆçš„ MiKTeXï¼Œåˆ™è¿˜å¯åœ¨ cmd ä¸­è¾“å…¥ mpm æ‰“å¼€ã€‚å¦‚ä¸‹å³é”®ä»»æ„åŒ…å¯ä»¥æŸ¥çœ‹å…¶æ–‡ä»¶çš„å­˜æ”¾ä½ç½®ã€‚ä¸€ä¸ªåŒ…ä¸€èˆ¬åˆ†ä¸º3éƒ¨åˆ†ï¼Œstyæ–‡ä»¶ã€tpmæ–‡ä»¶å’Œtar.bz2åŒ…æ–‡ä»¶ï¼Œåœ¨å®˜ç½‘æ­¤å¤„ï¼ˆhttps://MiKTeX.org/packages/preprintï¼‰å¯ä»¥æŸ¥çœ‹æŸä¸ªåŒ…çš„è¯¦ç»†ä¿¡æ¯ï¼Œç‚¹å‡»ã€ŒBrowse Filesã€å¯æŸ¥çœ‹æŸä¸ªåŒ…çš„æ‰€æœ‰æ–‡ä»¶ã€‚è‹¥ä½¿ç”¨å®‰è£…ç‰ˆ MiKTeX åˆ™åŒ…ä½ç½®å³ä¸ºæ˜¾ç¤ºçš„è·¯å¾„ã€‚è‹¥é‡‡ç”¨ç»¿è‰²ç‰ˆ MiKTeX åˆ™åŒ…æ–‡ä»¶ä½ç½®åˆ†åˆ«ä¸ºï¼štpmæ–‡ä»¶ï¼š[MiKTeXPortableRoot]\\texmfs\\install\\tpm\\packagesstyæ–‡ä»¶ï¼š[MiKTeXPortableRoot]\\texmfs\\install\\tex\\latextar.bz2åŒ…æ–‡ä»¶ï¼š[MiKTeXPortableRoot]\\texmfs\\install\\sourceå¦‚æœåœ¨ç¼–è¯‘æ—¶ï¼Œé‡åˆ°åŒ…ä¸‹è½½å’Œå®‰è£…å¤±è´¥ï¼Œå¯å°è¯•é€šè¿‡ MiKTeX console è¿›è¡Œä¸€æ¬¡å…¨å±€æ›´æ–°ã€‚ç„¶åé‡æ–°ç¼–è¯‘ tex æ–‡ä»¶ï¼Œåº”è¯¥èƒ½è‡ªåŠ¨æç¤ºä¸‹è½½ç¼ºå¤±çš„å®åŒ…ã€‚4.3. æ’å…¥å›¾ç‰‡4.3.1. æ·»åŠ å›¾ç‰‡æ·»åŠ å›¾æ—¶ï¼Œå¦‚ä¸‹\\begin{figure}[!t]  \\centering  \\includegraphics[scale=1.0]{images/Figname.pdf}  \\caption{åŒä¸ƒè‡ªç”±åº¦æœºæ¢°è‡‚çš„ä¸€èˆ¬æ¨¡å‹}  \\label{fig:FrameDefinition_Lagrange}\\end{figure}å…¶ä¸­ï¼Œ\\label{fig:xxx} ä¸€å®šç´§è·Ÿç€è¦æ”¾åœ¨ \\caption{xxx} åé¢ï¼Œåœ¨æ­£æ–‡å¼•ç”¨æ—¶å€™æ‰èƒ½æ­£ç¡®ç¼–å·ã€‚å¯¹äºä¸¤æ æ–‡ç« è€Œè¨€ï¼Œæ’å…¥è·¨æ å›¾ç‰‡ä¸º\\begin{figure*}[!t] % add a \"*\" to import a cross column figure  \\centering  \\includegraphics[scale=1.0]{images/Figname.pdf}  \\caption{åŒä¸ƒè‡ªç”±åº¦æœºæ¢°è‡‚çš„ä¸€èˆ¬æ¨¡å‹}  \\label{fig:FrameDefinition_Lagrange}\\end{figure*}å›¾å½¢ï¼ˆfigureï¼‰ç¯å¢ƒæœ‰ä¸€ä¸ªå¯é€‰å‚æ•°é¡¹å…è®¸ç”¨æˆ·æ¥æŒ‡ç¤ºå›¾å½¢æœ‰å¯èƒ½è¢«æ”¾ç½®çš„ä½ç½®ï¼Œå‚æ•°ä½äºä¸­æ‹¬å·ä¸­ã€‚è¿™ä¸€å¯é€‰å‚æ•°é¡¹å¯ä»¥æ˜¯ä¸‹åˆ—å­—æ¯çš„ä»»æ„ç»„åˆï¼š  !ï¼šè¡¨ç¤ºå¿½ç•¥å®¡ç¾å¼ºåˆ¶æ’å¸ƒå›¾ç‰‡  hï¼šå½“å‰ä½ç½®ã€‚å°†å›¾å½¢æ”¾ç½®åœ¨ æ­£æ–‡æ–‡æœ¬ä¸­ç»™å‡ºè¯¥å›¾å½¢ç¯å¢ƒçš„åœ°æ–¹.å¦‚æœæœ¬é¡µæ‰€å‰©çš„é¡µé¢ä¸å¤Ÿ, è¿™ä¸€å‚æ•°å°†ä¸èµ·ä½œç”¨ã€‚  tï¼šé¡¶éƒ¨ã€‚å°†å›¾å½¢æ”¾ç½®åœ¨é¡µé¢çš„é¡¶éƒ¨ã€‚  bï¼šåº•éƒ¨ã€‚å°†å›¾å½¢æ”¾ç½®åœ¨é¡µé¢çš„åº•éƒ¨ã€‚  pï¼šæµ®åŠ¨é¡µã€‚å°†å›¾å½¢æ”¾ç½®åœ¨ä¸€åªå…è®¸æœ‰æµ®åŠ¨å¯¹è±¡çš„é¡µé¢ä¸Šã€‚æ³¨:  å¦‚æœåœ¨å›¾å½¢ç¯å¢ƒä¸­æ²¡æœ‰ç»™å‡ºä¸Šè¿°ä»»ä¸€å‚æ•°,åˆ™ç¼ºçœä¸º [tbp]ã€‚  ç»™å‡ºå‚æ•°çš„é¡ºåºä¸ä¼šå½±å“åˆ°æœ€åçš„ç»“æœ.å› ä¸ºåœ¨è€ƒè™‘è¿™äº›å‚æ•°æ—¶ LaTeX æ€»æ˜¯å°è¯•ä»¥ h-t-b-p çš„é¡ºåºæ¥ç¡®å®šå›¾å½¢çš„ä½ç½®.æ‰€ä»¥ [hb] å’Œ [bh] éƒ½ä½¿ LATEX ä»¥ h-b çš„é¡ºåºæ¥æ’ç‰ˆã€‚  ç»™å‡ºçš„å‚æ•°è¶Šå¤š, LaTeX çš„æ’ç‰ˆç»“æœå°±ä¼šè¶Šå¥½ã€‚[htbp]ï¼Œ[tbp]ï¼Œ[htp]ï¼Œ[tp] è¿™äº›ç»„åˆå¾—åˆ°çš„æ•ˆæœä¸é”™.  åªç»™å‡ºå•ä¸ªçš„å‚æ•°é¡¹ææ˜“å¼•å‘é—®é¢˜ã€‚å¦‚æœè¯¥å›¾å½¢ä¸é€‚åˆæ‰€æŒ‡å®šçš„ä½ç½®ï¼Œå®ƒå°±ä¼šè¢«æç½®å¹¶é˜»ç¢å¯¹åé¢çš„å›¾å½¢ çš„å¤„ç†ã€‚ä¸€æ—¦è¿™äº›é˜»å¡çš„å›¾å½¢æ•°ç›®è¶…è¿‡äº†18 å¹…è¿™ä¸€ LaTeX æ‰€èƒ½å®¹è®¸çš„æœ€å¤§å€¼,å°±ä¼šäº§ç”Ÿ â€œToo Many Unprocessed Floatsâ€ çš„é”™è¯¯ã€‚å½“ LaTeX â€œè¯•å›¾â€ æ”¾ç½®ä¸€æµ®åŠ¨å›¾å½¢æ—¶ï¼Œå®ƒå°†éµå¾ªä»¥ä¸‹è§„åˆ™ï¼š  å›¾å½¢åªèƒ½ç½®äºç”±ä½ç½®å‚æ•°æ‰€ç¡®å®šçš„åœ°ç‚¹ã€‚  å›¾å½¢çš„æ”¾ç½®ä¸èƒ½é€ æˆè¶…è¿‡ç‰ˆå¿ƒçš„é”™è¯¯(overfull page)ã€‚  å›¾å½¢åªèƒ½ç½®äºå½“å‰é¡µæˆ–åé¢çš„é¡µä¸­.æ‰€ä»¥å›¾å½¢åªèƒ½ â€œå‘åæµ®åŠ¨â€è€Œä¸èƒ½â€å‘å‰æµ®åŠ¨â€ã€‚  å›¾å½¢å¿…é¡»æŒ‰é¡ºåºå‡ºç°ï¼Œè¿™æ ·åªæœ‰å½“å‰é¢çš„å›¾å½¢éƒ½è¢«æ”¾ç½®å¥½ä¹‹åæ‰èƒ½è¢«æ”¾ç½®ã€‚          åªè¦å‰é¢æœ‰æœªè¢«å¤„ç†çš„å›¾å½¢ï¼Œä¸€å¹…å›¾å½¢å°±ä¸ä¼šè¢«æ”¾åœ¨å½“å‰ä½ç½®.      ä¸€å¹… â€œä¸å¯èƒ½æ”¾ç½®â€çš„å›¾å½¢å°†é˜»ç¢å®ƒåé¢çš„å›¾å½¢çš„æ”¾ç½®ï¼Œç›´åˆ°æ–‡ä»¶ç»“æŸæˆ–è¾¾åˆ°LaTexçš„æµ®åŠ¨é™åˆ¶ã€‚        å¿…é¡»ç¬¦åˆä¸€å®šçš„å®¡ç¾æ¡ä»¶ã€‚ä¾‹å¦‚ï¼Œä¸€é¡µä¸Šçš„æµ®åŠ¨å¯¹è±¡çš„æ•°ç›®ä¸èƒ½è¶…è¿‡totalnumberã€‚åœ¨æµ®åŠ¨ä½ç½®é€‰é¡¹å‰åŠ ä¸Šä¸€ä¸ªæƒŠå¹å·(å¦‚ \\begin{figure}[!ht]) ä¼šä½¿LaTexå¿½ç•¥åº”ç”¨äºæ–‡æœ¬é¡µçš„å®¡ç¾æ¡ä»¶ï¼Œè¯•å›¾ç”¨æœ€ä¸¥æ ¼çš„æ ‡å‡†æ¥æ”¾ç½®æµ®åŠ¨å›¾å½¢ã€‚ä¸è¿‡ï¼Œ!ä¸ä¼šå½±å“åº”ç”¨äºæµ®åŠ¨é¡µ4.3.2. å¼•ç”¨å›¾ç‰‡åœ¨æ­£æ–‡éœ€è¦å¼•ç”¨å›¾ç‰‡çš„åœ°æ–¹å¢åŠ  \\ ref{fig:xxx}ï¼Œå¦‚ç¼–è¯‘ä¸ºè‹¥ç¼–è¯‘æŠ¥é”™ï¼Œå¾ˆå¯èƒ½æ˜¯æ²¡æœ‰å¼•å…¥ç›¸åº”çš„åŒ…ã€‚åœ¨æ­¤å¤„ï¼Œ\\includegraphics ä¾èµ–å®åŒ… graphicx ï¼Œéœ€è¦åœ¨æ–‡æ¡£å¼€å¤´å¼•å…¥\\usepackage{graphicx}.\\begin{document}.\\end{document}4.3.3. visioç»˜å›¾è½¬ä¸ºæ— è¾¹æ¡†PDFvisioç»˜å›¾æ˜¯çŸ¢é‡å›¾ï¼Œä½†æ˜¯æ— æ³•ç›´æ¥å¯¼å…¥LaTeXä½¿ç”¨ã€‚PDFä¹Ÿæ˜¯çŸ¢é‡æ ¼å¼ï¼Œå°†visioç»˜å›¾è½¬ä¸ºPDFå¯ä»¥æ’å…¥LaTeXã€‚ç”±äºvisioç›´æ¥å¯¼å‡ºä¸ºpdfåå››å‘¨å­˜åœ¨ç°è‰²å¤–æ¡†å’Œä¸€å®šå®½åº¦çš„ç™½è¾¹ï¼Œå¦‚ä¸‹è®¾ç½®é¿å…è¿™ç§æƒ…å†µã€‚  é¦–å…ˆè°ƒå‡ºå¼€å‘å·¥å…·é€‰é¡¹å¡ã€‚åœ¨å·¥å…·æ å³é”®ï¼Œé€‰æ‹©ã€è‡ªå®šä¹‰åŠŸèƒ½åŒºã€‘  å‹¾ä¸Šã€å¼€å‘å·¥å…·ã€‘  åˆ‡æ¢åˆ°ã€å¼€å‘å·¥å…·ã€‘ï¼Œé€‰æ‹©ã€æ˜¾ç¤ºã€‘å³ä¸‹æ–¹çš„å°ç®­å¤´ï¼Œç‚¹å‡»ã€é¡µã€‘  æ‰¾åˆ°ã€Print Propertiesã€‘ï¼Œå°†Page Left\\Right\\Top\\Bottom Marginå…¨éƒ¨è®¾ä¸º0ï¼Œå»é™¤å››å‘¨ç•™ç™½      å…³é—­ã€Print Propertiesã€‘ï¼Œä¿å­˜visioç»˜å›¾ã€‚        åˆ‡æ¢åˆ°ã€è®¾è®¡ã€‘é€‰é¡¹å¡ï¼Œé€‰æ‹©ã€å¤§å°ã€‘ä¸‹é¢çš„å°ç®­å¤´ï¼Œç‚¹å‡»ã€é€‚åº”ç»˜å›¾ã€‘ï¼Œä¿å­˜visioç»˜å›¾ã€‚    å¦å­˜ä¸ºï¼Œç±»å‹é€‰æ‹©ã€PDFã€‘ï¼Œç‚¹å‡»ã€é€‰é¡¹ã€‘ï¼Œå¼¹å‡ºé¡µé¢å–æ¶ˆå‹¾é€‰ã€è¾…åŠ©åŠŸèƒ½æ–‡æ¡£ç»“æ„æ ‡è®°ã€‘ï¼Œç‚¹å‡»ã€ç¡®å®šã€‘è¾“å‡ºä¸ºPDFã€‚4.4. æ’å…¥å…¬å¼åŸºæœ¬å…¬å¼è§„èŒƒä¸Šæ ‡ï¼šA^bï¼Œç¼–è¯‘ä¸º $A^b$ä¸‹æ ‡ï¼šA_bï¼Œç¼–è¯‘ä¸º $A_b$ä¸Šä¸‹æ ‡ï¼šA_b^cï¼Œç¼–è¯‘ä¸º $A_b^c$æ›´å¤šå‚è€ƒï¼šhttps://www.jianshu.com/p/22117d964baf æˆ–è€…è‡ªè¡Œç™¾åº¦ã€‚4.4.1. æ’å…¥è¡Œå†…å…¬å¼ç”¨$$æ’å…¥è¡Œå†…å…¬å¼ï¼Œå†…å®¹æŒ‰ç…§latexå…¬å¼è§„èŒƒä¹¦å†™ã€‚å¦‚4.4.2. æ’å…¥è¡Œé—´å…¬å¼æŒ‰ç…§å¦‚ä¸‹å½¢å¼ æ’å…¥è¡Œé—´å…¬å¼ã€‚\\begin{equation}â€¦\\end{equation}ç¤ºä¾‹å¦‚ä¸‹ï¼ˆå…¶ä¸­ \\nonumber è¡¨ç¤ºè¯¥å…¬å¼æ— éœ€ç¼–å·ï¼‰ï¼šå¤æ‚çš„å…¬å¼å¯ä»¥å…ˆåœ¨Wordä¸­ç”¨ MathType å…ˆè¿›è¡Œä¹¦å†™ï¼Œç„¶åè½¬æ¢ä¸º LaTeX è¯­è¨€æ ¼å¼ï¼Œå†ç²˜è´´å‡ºæ¥åï¼Œç¨ä½œä¿®æ”¹å³å¯å¤åˆ¶åˆ° LaTeX æ–‡æ¡£ä¸­ã€‚å‚è€ƒï¼šLaTeXå…¬å¼ä¸MathTypeå…¬å¼å¦‚ä½•å¿«é€Ÿè½¬æ¢4.4.3. å¼•ç”¨å…¬å¼ç¼–å·åœ¨å…¬å¼ä¸­åŠ å…¥labelå­—æ®µï¼Œå¦‚ï¼šå¼•ç”¨æ—¶ç”¨ \\ref å‘½ä»¤ï¼Œå¦‚ï¼šç¼–è¯‘ä¸ºï¼š4.5. æ’å…¥å‚è€ƒæ–‡çŒ®4.5.1. å‚è€ƒæ–‡çŒ®æ¥æºå‚è€ƒæ–‡çŒ®çš„æ•°æ®æŒ‰ç…§ä¸€å®šæ ¼å¼å­˜æ”¾äº .bib æ–‡ä»¶ä¸­ï¼Œå¯ä»¥å»Google Scholaræœç´¢è¯¥å‚è€ƒæ–‡çŒ®ï¼Œç‚¹å‡»æ–‡çŒ®ä¸‹é¢çš„å¼•å·ï¼Œå¼¹å‡ºå¼•ç”¨æ ¼å¼ï¼Œé€‰æ‹©ä¸‹æ–¹ç¬¬ä¸€ä¸ªBibTexå³å¯ä¸­æ–‡æ–‡çŒ®æˆ–è€…æ— éœ€ç¿»å¢™çš„æ–‡çŒ®ï¼Œç™¾åº¦å­¦æœ¯ä¹Ÿå¯ä»¥å¾—åˆ°bibæ ¼å¼ï¼Œå¦‚å›¾4.5.2. å‚è€ƒæ–‡çŒ®çš„æ·»åŠ å¤åˆ¶ç»™å‡ºçš„bibæ ¼å¼å‚è€ƒæ–‡çŒ®æ•°æ®ï¼Œæ·»åŠ åˆ°è‡ªå·±çš„ .bib æ–‡ä»¶ä¸­ã€‚ä¸€äº›æƒ…å†µä¸‹è¿˜éœ€è¦å¯¹ä¿¡æ¯è¿›è¡Œå¢æ”¹ï¼Œæ¯”å¦‚ï¼š  ä¿®æ”¹ç¼©å†™ï¼Œä¸Šé¢å‚è€ƒæ–‡çŒ®ç¼©å†™â€œèƒ¡å¿ åè‡ªæ—‹â€¦â€¦â€å¤ªé•¿äº†ï¼Œæ”¹æˆè§„èŒƒæ ¼å¼â€œhzh2016ziâ€          è‹±æ–‡ï¼šä½œè€…å§“+å¹´+æ ‡é¢˜ç¬¬ä¸€ä¸ªè¯ï¼ˆå¦‚potter2020magicï¼‰ï¼›      ä¸­æ–‡ï¼šå§“åæ‹¼éŸ³ç¼©å†™/å§“æ°æ‹¼éŸ³+å¹´+æ ‡é¢˜ç¬¬ä¸€å­—æ‹¼éŸ³ï¼ˆå¦‚dong2020weiæˆ–dyf2020weiï¼‰        è¡¥å…¨ä¿¡æ¯ï¼Œæ¯”å¦‚ç¡•å£«åšå£«è®ºæ–‡çš„å‡ºç‰ˆåœ°ï¼ˆä¿å­˜åœ°ï¼‰ï¼Œå¦åˆ™ä¼šå‡ºç°å‡ºç‰ˆåœ°ä¸è¯¦ï¼Œè€ŒGBT7714è§„å®šï¼Œç¡•å£«åšå£«è®ºæ–‡è¦åˆ—å‡ºã€ä¿å­˜åœ°ï¼šä¿å­˜å¹´ä»½ã€‘4.5.3. å‚è€ƒæ–‡çŒ®çš„å¼•ç”¨      ä½¿ç”¨ \\cite{}ï¼Œæ­¤æ—¶å¼•ç”¨åºå·ä¸ºæ­£æ–‡å­—ä½“å¤§å°ï¼Œå³ï¼š    Ryan\\cite{ryan2015photometric}åœ¨2015å¹´å‘è¡¨äº†xxxx    ç¼–è¯‘åå¾—åˆ°    Ryan[1]åœ¨2015å¹´å‘è¡¨äº†xxxx        ä½¿ç”¨ \\upcite{}ï¼Œæ­¤æ—¶å¼•ç”¨åºå·ä¸ºä¸Šæ ‡ï¼Œå³ï¼š    Ryan\\upcite{ryan2015photometric}åœ¨2015å¹´å‘è¡¨äº†xxxx    ç¼–è¯‘åå¾—åˆ°    Ryan[1]åœ¨2015å¹´å‘è¡¨äº†xxxx        ä½¿ç”¨ \\citep{} ç­‰ä¹Ÿå¯ä»¥ï¼ˆå…·ä½“citeå‘½ä»¤å¯ä»¥è‡ªè¡Œç™¾åº¦ï¼‰  æ³¨æ„ï¼Œå°†å‚è€ƒæ–‡çŒ®åœ¨æ­£æ–‡ä¸­è¿›è¡Œå¼•ç”¨åï¼Œå†è¿›è¡Œç¼–è¯‘ã€‚å¦‚æœä¸å¼•ç”¨ï¼Œè¯¥å‚è€ƒæ–‡çŒ®å°†ä¸ä¼šå‡ºç°åœ¨å‚è€ƒæ–‡çŒ®åˆ—è¡¨ä¸­ã€‚4.5.4. å‚è€ƒæ–‡çŒ®ç¼–è¯‘é¦–å…ˆä¿éšœæ·»åŠ å‚è€ƒæ–‡çŒ®åˆ°.bibæ–‡ä»¶ä¸”åœ¨æ­£æ–‡å¼•ç”¨ï¼Œç„¶åæŒ‰ç…§ä¸‹é¢å››æ­¥è¿›è¡Œç¼–è¯‘ï¼š  å½“å‰çª—å£æ¿€æ´»ä¸ºä»»æ„ .tex æ–‡ä»¶ï¼Œç¼–è¯‘ï¼ˆtexStudioå¿«æ·é”®F5ï¼‰ , è¿™ä¼šç”Ÿæˆä¸€ä¸ª.aux çš„æ–‡ä»¶, è¿™å‘Šè¯‰ BibTeX å°†ä½¿ç”¨é‚£äº›å¼•ç”¨ï¼Œæ­¤æ—¶æ–‡ä¸­å¼•ç”¨ä½ç½®æ˜¾ç¤ºä¸º [?]  å½“å‰çª—å£æ¿€æ´»ä¸ºä»»æ„ .tex æ–‡ä»¶ï¼Œç¼–è¯‘ .bib æ–‡ä»¶ï¼ˆtexStudioå¿«æ·é”®F8ï¼‰ï¼Œç”Ÿæˆ.bblæ–‡ä»¶ï¼Œç¡®ä¿æ²¡æœ‰ä»»ä½•Warning  å½“å‰çª—å£æ¿€æ´»ä¸ºä»»æ„ .tex æ–‡ä»¶ï¼Œå†æ¬¡ç¼–è¯‘ .tex æ–‡ä»¶ï¼ˆtexStudioå¿«æ·é”®F5ï¼‰, æ­¤æ—¶å‚è€ƒæ–‡çŒ®åˆ—è¡¨ä¸­å·²ç»åŒ…å«äº†è¯¥å‚è€ƒæ–‡çŒ®, ä½†æ­¤æ—¶å¼•ç”¨çš„ç¼–å·å¯èƒ½ä¸æ­£ç¡®ï¼ˆæ¯”å¦‚[?]ï¼‰  å½“å‰çª—å£æ¿€æ´»ä¸ºä»»æ„ .tex æ–‡ä»¶ï¼Œæœ€åå†æ¬¡ç¼–è¯‘ .tex æ–‡ä»¶, ï¼ˆtexStudioå¿«æ·é”®F5ï¼‰ å¦‚æœä¸€åˆ‡é¡ºåˆ©çš„è¯, è¿™æ˜¯æ‰€æœ‰ä¸œè¥¿éƒ½å·²æ­£å¸¸äº†ã€‚ç¼–è¯‘å¦‚æœæŠ¥é”™ï¼Œæ£€æŸ¥ï¼š      å¤§æ‹¬å·æ˜¯å¦å®Œæ•´ï¼›        å¤§æ‹¬å·åé¢æ˜¯å¦æ¼äº†é€—å·ï¼›        ä½œè€…å§“åæ˜¯å¦ç”¨andè¿æ¥ï¼Œæ˜¯å¦é”™è¯¯é‡‡ç”¨é€—å·è¿æ¥ï¼Œæ˜¯å¦å¤šç”¨äº†andã€‚  ä¿®æ”¹åï¼Œå°†å½“å‰çª—å£æ¿€æ´»ä¸ºä»»æ„ .tex æ–‡ä»¶ï¼Œé‡æ–°ç¼–è¯‘ .bib æ–‡ä»¶ï¼ˆF8ï¼‰4.5.5. å‚è€ƒæ–‡çŒ®å­—æ¯å¤§å†™éƒ¨åˆ†æ¨¡æ¿ä¸­ï¼Œbibå‚è€ƒæ–‡çŒ®é¢˜ç›®ä¸­å¤§å†™è‡ªåŠ¨å˜ä¸ºå°å†™ï¼Œæ¯”å¦‚ï¼Œå‚è€ƒæ–‡çŒ®åŸå§‹æ ‡é¢˜ä¸ºï¼š  Real-Time Optimal Approach and Capture of ENVISAT Based on Neural NetworksæŒ‰ç…§GB7717è§„èŒƒå¼•ç”¨ååœ¨å‚è€ƒæ–‡çŒ®åˆ—è¡¨ä¸­æ˜¾ç¤ºä¸ºï¼š  Real-time optimal approach and capture of envisat based on neural networksä¸ºäº†ä¿ç•™å¤§å†™ï¼Œåœ¨bibä¸­å½•å…¥æ—¶å¯¹éœ€è¦ä¿æŒåŸå¤§å†™çš„éƒ¨åˆ†æ·»åŠ å¤§æ‹¬å·ï¼Œå³ï¼štitle = {Real-Time Optimal Approach and Capture of {ENVISAT} Based on Neural Networks},ç¼–è¯‘åæ˜¾ç¤ºä¸ºï¼š  Real-time optimal approach and capture of ENVISAT based on neural networks4.5.6. é™„å½•ï¼šå‚è€ƒæ–‡çŒ®çš„æ ¼å¼å­—æ®µ@articleæœŸåˆŠæ‚å¿—çš„è®ºæ–‡å¿…è¦åŸŸ: author, title, journal, year.å¯é€‰åŸŸ: volume, number, pages, month, note.@article{px2017qiu,author={æ½˜è¿… and æ³®æ–Œå³° and å”ç¡•},title={æ±‚è§£ä¸­é€”é£è¶Šç‡ƒæ–™æœ€ä¼˜è½¬ç§»è½¨é“çš„åŒä¼¦æ–¹æ³•},journal={å®‡èˆªå­¦æŠ¥},volume={38},number={4},pages={393--400},year={2017},}@article{lhj2020realtime,  author={Hong Jue Li and Yun Feng Dong and Pei Yun Li},  title={Real-Time Optimal Approach and Capture of {ENVISAT}},  journal = {International Journal of Aerospace Engineering},  volume={2020},  number={},  pages={Article ID 8165147},  year = {2020},}@bookå…¬å¼€å‡ºç‰ˆçš„å›¾ä¹¦å¿…è¦åŸŸ: author/editor, title, publisher, year.å¯é€‰åŸŸ: volume/number, series, address, edition, month, note.@book{lb2018kong,  author={æ¢æ–Œ and å¾æ–‡ç¦},  title={ç©ºé—´æœºå™¨äººï¼šå»ºæ¨¡ã€è§„åˆ’ä¸æ§åˆ¶},  year={2019},  address={åŒ—äº¬},  publisher={æ¸…åå¤§å­¦å‡ºç‰ˆç¤¾},}@bookletæ— å‡ºç‰ˆå•†æˆ–ä½œè€…çš„å›¾ä¹¦å¿…è¦åŸŸ: title.å¯é€‰åŸŸ: author, howpublished, address, month, year, note.@conferenceç­‰ä»·äº inproceedingså¿…è¦åŸŸ: author, title, booktitle, year.å¯é€‰åŸŸ: editor, volume/number, series, pages, address, month, organization, publisher, note.@inbookä¹¦ç±çš„ä¸€éƒ¨åˆ†ç« èŠ‚å¿…è¦åŸŸ: author/editor, title, chapter and/or pages, publisher, year.å¯é€‰åŸŸ: volume/number, series, type, address, edition, month, note.@incollectionä¹¦ç±ä¸­å¸¦ç‹¬ç«‹æ ‡é¢˜çš„ç« èŠ‚å¿…è¦åŸŸ: author, title, booktitle, publisher, year.å¯é€‰åŸŸ: editor, volume/number, series, type, chapter, pages, address, edition, month, note.@incollection{izzo2019machine,  author={D. Izzo and C. I. Sprague and D. V. Tailor},  title={Machine learning and evolutionary techniques},  booktitle={Modeling and Optimization in Space Engineering},  publlisher={Springer},  address={Cham},  pages={191--210},  year={2019},}@inproceedingsä¼šè®®è®ºæ–‡é›†ä¸­çš„ä¸€ç¯‡å¿…è¦åŸŸ: author, title, booktitle, year.å¯é€‰åŸŸ: editor, volume/number, series, pages, address, month, organization, publisher, note.@inproceedings{sommer2017temporal,  author={S. Sommer and J. Rosebrock and D. Cerutti-Maori},  title={Temporal analysis of Envisatâ€™s rotational motion},  booktitle = {Proceedings of the 7th European Conference on SXX},  editor={},  address={Darmstadt, Germany},  publisher={IEEE},  year={1997},}@manualæŠ€æœ¯æ–‡æ¡£å¿…è¦åŸŸ: title.å¯é€‰åŸŸ: author, organization, address, edition, month, year, note.@mastersthesisç¡•å£«è®ºæ–‡å¿…è¦åŸŸ: author, title, school, year.å¯é€‰åŸŸ: type, address, month, note.@miscå…¶ä»–å¿…è¦åŸŸ: noneå¯é€‰åŸŸ: author, title, howpublished, month, year, note.@phdthesisåšå£«è®ºæ–‡å¿…è¦åŸŸ: author, title, year, school.å¯é€‰åŸŸ: address, month, keywords, note.@phdthesis{fbm2007zi,  Author = {ä¸°ä¿æ°‘},  title = {è‡ªç”±æ¼‚æµ®ç©ºé—´æœºå™¨äººè½¨è¿¹è§„åˆ’ä¸è½¨è¿¹è·Ÿè¸ªé—®é¢˜ç ”ç©¶},  school = {å“ˆå°”æ»¨å·¥ä¸šå¤§å­¦},  address = {å“ˆå°”æ»¨},  type = {},  month = {},  note = {},  year = {2007},}@proceedingsä¼šè®®è®ºæ–‡é›†å¿…è¦åŸŸ: title, year.å¯é€‰åŸŸ: editor, volume/number, series, address, month, organization, publisher, note.@techreportæ•™è‚²ï¼Œå•†ä¸šæœºæ„çš„æŠ€æœ¯æŠ¥å‘Šå¿…è¦åŸŸ: author, title, institution, year.å¯é€‰åŸŸ: type, number, address, month, note.@unpublishedæœªå‡ºç‰ˆçš„è®ºæ–‡ï¼Œå›¾ä¹¦å¿…è¦åŸŸ: author, title, note.å¯é€‰åŸŸ: month, year.4.6. å¼•ç”¨ç« èŠ‚åç§°é¦–å…ˆåœ¨ç« èŠ‚åç§°ä¸­æ·»åŠ labelï¼Œå¦‚ï¼š\\section{æœ€ä¼˜æ§åˆ¶çš„æè¿°}\\label{section:zykzdms}ç„¶ååœ¨å…¶ä»–éƒ¨åˆ†é€šè¿‡\\refå¼•ç”¨ï¼Œå¦‚ï¼šå¦‚ç¬¬\\ref{section:zykzdms}èŠ‚æ‰€ç¤ºç¼–è¯‘åè¡¨ç°ä¸ºï¼šå¦‚ç¬¬1.1èŠ‚æ‰€ç¤º4.7. åˆ—è¡¨æœ‰åºåˆ—è¡¨\\begin{enumerate}\\item This is the first item\\item This is the second item\\item This is the third item\\end{enumerate}æœ€ç»ˆç»“æœä¸º1) this is the first item2) this is the second item3) this is the third itemæ³¨æ„ï¼Œæ•°å­—åçš„ç¬¦å·é€‰å–ï¼ˆæ‹¬å·ã€é¡¿å·ã€å¥å·ç­‰ä¸æ¨¡æ¿æœ‰å…³ï¼‰ã€‚æ— åºåˆ—è¡¨\\begin{itemize}\\item This is the first item\\item This is the second item\\item This is the third item\\end{itemize}æœ€ç»ˆç»“æœä¸º  this is the first item  this is the second item  this is the third item5. å‚è€ƒæ–‡çŒ®[1]  Latex Project. The LATEX Project."
  },
  
  {
    "title": "å…ƒå­¦ä¹ æ–‡ç« é˜…è¯»ï¼ˆMAMLï¼‰",
    "url": "/posts/meta-learning-MAML/",
    "categories": "Academic, Paper",
    "tags": "deep learning, meta learning",
    "date": "2020-07-13 14:35:19 +0800",
    





    
    "snippet": "MAML æ˜¯2017å¹´ Chelsea Finn å¤§ä½¬æå‡ºçš„ä¸€ç§åŸºäºä¼˜åŒ–ï¼ˆOptimized-basedï¼‰çš„å°æ ·æœ¬å­¦ä¹ æ–¹æ³•ï¼Œæ ¸å¿ƒåœ¨ä¸¤ä¸ªä¸åŒçš„æ•°æ®é›†ä¸­åˆ†åˆ«è®¡ç®—æ¢¯åº¦å’Œæ›´æ–°å‚æ•°ã€‚  1. MAML          1.1. ç®—æ³•      1.2. æ¢¯åº¦ä¸‹é™æ•°å­¦åˆ†æ      1.3. åŸºäºä¼˜åŒ–çš„å…ƒå­¦ä¹ ç›®æ ‡      1.4. MAMLæ•°å­¦åˆ†æ      1.5. FOMAML      1.6...",
    "content": "MAML æ˜¯2017å¹´ Chelsea Finn å¤§ä½¬æå‡ºçš„ä¸€ç§åŸºäºä¼˜åŒ–ï¼ˆOptimized-basedï¼‰çš„å°æ ·æœ¬å­¦ä¹ æ–¹æ³•ï¼Œæ ¸å¿ƒåœ¨ä¸¤ä¸ªä¸åŒçš„æ•°æ®é›†ä¸­åˆ†åˆ«è®¡ç®—æ¢¯åº¦å’Œæ›´æ–°å‚æ•°ã€‚  1. MAML          1.1. ç®—æ³•      1.2. æ¢¯åº¦ä¸‹é™æ•°å­¦åˆ†æ      1.3. åŸºäºä¼˜åŒ–çš„å…ƒå­¦ä¹ ç›®æ ‡      1.4. MAMLæ•°å­¦åˆ†æ      1.5. FOMAML      1.6. ç¼ºç‚¹        2. å„ç±»å®ç°  3. å‚è€ƒæ–‡çŒ®1. MAML2017.ã€ŠModel-Agnostic Meta-Learning for Fast Adaptation of Deep Networksã€‹  The key idea underlying our method is to train the modelâ€™s initial parameters such that the model has maximal performance on a new task after the parameters have been updated through one or more gradient steps computed with a small amount of data from that new task.æœ¬æ–‡çš„è®¾æƒ³æ˜¯è®­ç»ƒä¸€ç»„åˆå§‹åŒ–å‚æ•°ï¼Œé€šè¿‡åœ¨åˆå§‹å‚æ•°çš„åŸºç¡€ä¸Šè¿›è¡Œä¸€æˆ–å¤šæ­¥çš„æ¢¯åº¦è°ƒæ•´ï¼Œæ¥è¾¾åˆ°ä»…ç”¨å°‘é‡æ•°æ®å°±èƒ½å¿«é€Ÿé€‚åº”æ–°taskçš„ç›®çš„ã€‚ä¸ºäº†è¾¾åˆ°è¿™ä¸€ç›®çš„ï¼Œè®­ç»ƒæ¨¡å‹éœ€è¦æœ€å¤§åŒ–æ–°taskçš„loss functionçš„å‚æ•°æ•æ„Ÿåº¦ï¼ˆmaximizing the sensitivity of the loss functions of new tasks with respect to the parametersï¼‰ï¼Œå½“æ•æ„Ÿåº¦æé«˜æ—¶ï¼Œæå°çš„å‚æ•°ï¼ˆå‚æ•°é‡ï¼‰å˜åŒ–ä¹Ÿå¯ä»¥å¯¹æ¨¡å‹å¸¦æ¥è¾ƒå¤§çš„æ”¹è¿›ã€‚æœ¬æ–‡æå‡ºçš„ç®—æ³•å¯ä»¥é€‚ç”¨äºå¤šä¸ªé¢†åŸŸï¼ŒåŒ…æ‹¬å°‘æ ·æœ¬çš„å›å½’ã€å›¾åƒåˆ†ç±»ï¼Œä»¥åŠå¢å¼ºå­¦ä¹ ï¼Œå¹¶ä¸”ä½¿ç”¨æ›´å°‘çš„å‚æ•°é‡è¾¾åˆ°äº†å½“æ—¶ï¼ˆ2017å¹´ï¼‰æœ€å…ˆè¿›çš„ä¸“æ³¨äºå°‘æ ·æœ¬åˆ†ç±»é¢†åŸŸçš„ç½‘ç»œçš„å‡†ç¡®ç‡ã€‚æ ¸å¿ƒç®—æ³•ç¤ºæ„å›¾å¦‚ä¸‹å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œä½œè€…ä¾¿å°†ç›®æ ‡è®¾å®šä¸ºï¼Œé€šè¿‡æ¢¯åº¦è¿­ä»£ï¼Œæ‰¾åˆ°å¯¹äºtaskæ•æ„Ÿçš„å‚æ•° $\\theta$ ã€‚è®­ç»ƒå®Œæˆåçš„æ¨¡å‹å…·æœ‰å¯¹æ–°taskçš„å­¦ä¹ åŸŸåˆ†å¸ƒæœ€æ•æ„Ÿçš„å‚æ•°ï¼Œå› æ­¤å¯ä»¥åœ¨ä»…ä¸€æˆ–å¤šæ¬¡çš„æ¢¯åº¦è¿­ä»£ä¸­è·å¾—æœ€ç¬¦åˆæ–°ä»»åŠ¡çš„  $\\theta^*$  ï¼Œè¾¾åˆ°è¾ƒé«˜çš„å‡†ç¡®ç‡ã€‚1.1. ç®—æ³•å‡è®¾è¿™æ ·ä¸€ä¸ªç›‘ç£åˆ†ç±»åœºæ™¯ï¼Œç›®çš„æ˜¯è®­ç»ƒä¸€ä¸ªæ•°å­¦æ¨¡å‹ $M_{fine-tune}$ ï¼Œå¯¹æœªçŸ¥æ ‡ç­¾çš„å›¾ç‰‡åšåˆ†ç±»ï¼Œåˆ™ä¸¤å¤§æ­¥éª¤å¦‚ä¸‹ï¼š  åˆ©ç”¨æŸä¸€æ‰¹æ•°æ®é›†è®­ç»ƒå…ƒæ¨¡å‹ $M_{meta}$  åœ¨å¦å¤–ä¸€æ‰¹æ•°æ®é›†ä¸Šç²¾è°ƒï¼ˆfine-tuneï¼‰å¾—åˆ°æœ€ç»ˆçš„æ¨¡å‹ $M_{fine-tune}$ ã€‚MAMLåœ¨ç›‘ç£åˆ†ç±»ä¸­çš„ç®—æ³•ä¼ªä»£ç å¦‚ä¸‹ï¼šè¯¥ç®—æ³•æ˜¯ meta-train é˜¶æ®µï¼Œç›®çš„æ˜¯å¾—åˆ° $M_{meta}$ã€‚ä¸‹é¢è¿›è¡Œè¯¦ç»†åˆ†æï¼šå‚è€ƒç¤ºæ„å›¾å¦‚ä¸‹ï¼Œä¸€ä¸ª task è¡¨ç¤ºä¸º $\\mathcal T$ç¬¬ä¸€ä¸ªRequireï¼Œå‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªå¾ˆå¤§çš„å›¾åƒæ± ï¼Œé‡Œé¢æœ‰å¾ˆå¤šå¾ˆå¤šç±»åˆ«çš„å›¾åƒï¼Œæ¯ç±»å›¾åƒæœ‰å‡ åä¸ªã€‚æˆ‘ä»¬ä»ä¸­éšæœºæŠ½å–äº”ä¸ªç±»åˆ«ï¼Œå½¢æˆä¸€ä¸ª task $\\mathcal T$ï¼Œå¦‚æ­¤åå¤éšæœºæŠ½å–å¯ä»¥å¾—åˆ°ä¸€æ‰¹ï¼ˆe.g. 1000ä¸ªï¼‰task ä½œä¸ºè®­ç»ƒé›† $p(\\mathcal T)$ã€‚å‡è®¾ä¸€ä¸ª $\\mathcal T$ åŒ…å«5ç±»ï¼Œæ¯ç±»20ä¸ªæ ·æœ¬ï¼Œéšæœºé€‰5æ ·æœ¬ä½œä¸ºsupport setï¼Œå‰©ä½™15æ ·æœ¬ä¸ºquery setã€‚  è®­ç»ƒæ ·æœ¬å°±è¿™ä¹ˆå¤šï¼Œè¦ç»„åˆå½¢æˆé‚£ä¹ˆå¤šçš„taskï¼Œå²‚ä¸æ˜¯ä¸åŒtaskä¹‹é—´ä¼šå­˜åœ¨æ ·æœ¬çš„é‡å¤ï¼Ÿæˆ–è€…æŸäº›taskçš„query setä¼šæˆä¸ºå…¶ä»–taskçš„support setï¼Ÿæ²¡é”™ï¼å°±æ˜¯è¿™æ ·ï¼æˆ‘ä»¬è¦è®°ä½ï¼ŒMAMLçš„ç›®çš„ï¼Œåœ¨äºfast adaptationï¼Œå³é€šè¿‡å¯¹å¤§é‡taskçš„å­¦ä¹ ï¼Œè·å¾—è¶³å¤Ÿå¼ºçš„æ³›åŒ–èƒ½åŠ›ï¼Œä»è€Œé¢å¯¹æ–°çš„ã€ä»æœªè§è¿‡çš„taskæ—¶ï¼Œé€šè¿‡fine-tuneå°±å¯ä»¥å¿«é€Ÿæ‹Ÿåˆã€‚taskä¹‹é—´ï¼Œåªè¦å­˜åœ¨ä¸€å®šçš„å·®å¼‚å³å¯ã€‚ç¬¬äºŒä¸ªRequireï¼Œstep size å°±æ˜¯å­¦ä¹ ç‡ï¼ŒMAML æ˜¯åŸºäºäºŒé‡æ¢¯åº¦ï¼ˆgradient by gradientï¼‰ï¼Œæ¯æ¬¡è¿­ä»£æœ‰ä¸¤æ¬¡å‚æ•°æ›´æ–°è¿‡ç¨‹ï¼Œæ‰€ä»¥æœ‰ä¸¤ä¸ªå­¦ä¹ ç‡å¯ä»¥è°ƒæ•´ã€‚1ï¼šéšæœºåˆå§‹åŒ–æ¨¡å‹å‚æ•° $\\theta$ï¼›2ï¼šå¾ªç¯ï¼Œå¯¹äºæ¯ä¸ªepochï¼Œè¿›è¡Œè‹¥å¹²batchï¼›3ï¼šéšæœºé€‰å–è‹¥å¹²ä¸ªï¼ˆæ¯”å¦‚4ä¸ªï¼‰ $\\mathcal T$  å½¢æˆä¸€ä¸ªbatchï¼›4ï¼šå¯¹äºæ¯ä¸ªbatchä¸­çš„ç¬¬ $i$ ä¸ª $\\mathcal T$ ï¼Œè¿›è¡Œç¬¬ä¸€æ¬¡æ¢¯åº¦æ›´æ–°ã€Œinner-loop å†…å±‚å¾ªç¯ã€ã€‚5ï¼šé€‰å– $\\mathcal T_i$ ä¸­çš„ support setï¼Œå…±  $N\\cdot K$ä¸ªæ ·æœ¬ï¼ˆ5-way 5-shot=25ä¸ªæ ·æœ¬ï¼‰6ï¼šè®¡ç®—æ¯ä¸ªå‚æ•°çš„æ¢¯åº¦ã€‚åŸæ–‡å†™å¯¹æ¯ä¸€ä¸ªç±»ä¸‹çš„ $K$ ä¸ªæ ·æœ¬åšè®¡ç®—ã€‚å®é™…ä¸Šå‚ä¸è®¡ç®—çš„æ€»è®¡æœ‰ $N\\cdot K$ ä¸ªæ ·æœ¬ã€‚è¿™é‡Œçš„lossè®¡ç®—æ–¹æ³•ï¼Œåœ¨å›å½’é—®é¢˜ä¸­å°±æ˜¯MSEï¼›åœ¨åˆ†ç±»é—®é¢˜ä¸­å°±æ˜¯cross-entropyï¼›7ï¼šè¿›è¡Œç¬¬ä¸€æ¬¡æ¢¯åº¦æ›´æ–°å¾—åˆ° $\\thetaâ€™$ï¼Œå¯ä»¥ç†è§£ä¸ºå¯¹ $\\mathcal T_i$ å¤åˆ¶ä¸€ä¸ªåŸæ¨¡å‹ $f(\\theta)$ æ¥æ›´æ–°å‚æ•°ï¼›8ï¼šæŒ‘å‡ºè®­ç»ƒé›†ä¸­çš„ query set æ•°æ®ç”¨äºåç»­äºŒæ¬¡æ¢¯åº¦æ›´æ–°ï¼›9ï¼šå®Œæˆç¬¬ä¸€æ¬¡æ¢¯åº¦æ›´æ–°ã€‚10ï¼šè¿›è¡Œç¬¬äºŒæ¬¡æ¢¯åº¦æ›´æ–°ï¼Œæ­¤æ—¶è®¡ç®—å‡ºçš„æ¢¯åº¦ç›´æ¥é€šè¿‡GDä½œç”¨äºåŸæ¨¡å‹ä¸Šï¼Œç”¨äºæ›´æ–°å…¶å‚æ•°ã€‚ã€Œouter-loop å¤–å±‚å¾ªç¯ã€å¤§è‡´ä¸æ­¥éª¤ 7 ç›¸åŒï¼Œä½†æ˜¯ä¸åŒç‚¹æœ‰ä¸‰å¤„ï¼š      éšå«äº†äºŒé‡æ¢¯åº¦ï¼Œéœ€è¦è®¡ç®— $\\mathcal L_{T_i}f(\\thetaâ€™)$ å¯¹ $\\theta$ çš„å¯¼æ•°ï¼Œè€Œ $\\mathcal L_{T_i}f(\\thetaâ€™)$ æ˜¯ $\\thetaâ€™$ çš„å‡½æ•°ï¼Œ $\\thetaâ€™$ åˆæ˜¯ $\\theta$ çš„å‡½æ•°ï¼ˆè§æ­¥éª¤7ï¼‰ï¼›        ä¸å†åˆ†åˆ«åˆ©ç”¨æ¯ä¸ª $\\mathcal T$ çš„lossæ›´æ–°æ¢¯åº¦ï¼Œè€Œæ˜¯è®¡ç®—ä¸€ä¸ª batch ä¸­æ¨¡å‹ $L_{T_i}f(\\thetaâ€™)$ çš„ loss æ€»å’Œè¿›è¡Œæ¢¯åº¦ä¸‹é™ï¼›        å‚ä¸è®¡ç®—çš„æ ·æœ¬æ˜¯taskä¸­çš„ query setï¼ˆ5way*15=75ä¸ªæ ·æœ¬ï¼‰ï¼Œç›®çš„æ˜¯å¢å¼ºæ¨¡å‹åœ¨taskä¸Šçš„æ³›åŒ–èƒ½åŠ›ï¼Œé¿å…è¿‡æ‹Ÿåˆsupport setã€‚  11ï¼šç»“æŸåœ¨è¯¥batchä¸­çš„è®­ç»ƒï¼Œå›åˆ°æ­¥éª¤3ï¼Œç»§ç»­é‡‡æ ·ä¸‹ä¸€ä¸ªbatchã€‚æ€»ç»“ï¼šMAMLä½¿ç”¨è®­ç»ƒé›†ä¼˜åŒ–å†…å±‚å¾ªç¯ï¼Œä½¿ç”¨æµ‹è¯•é›†ä¼˜åŒ–æ¨¡å‹ï¼Œä¹Ÿå°±æ˜¯å¤–å±‚å¾ªç¯ã€‚å¤–å±‚å¾ªç¯éœ€è¦è®¡ç®—äºŒé‡æ¢¯åº¦ï¼ˆgradient by gradientï¼‰ã€‚1.2. æ¢¯åº¦ä¸‹é™æ•°å­¦åˆ†æå®šä¹‰ç¥ç»ç½‘ç»œæ¨¡å‹çš„åˆå§‹çš„å‚æ•°ä¸º\\[\\boldsymbol{\\theta} = [\\theta_1,\\theta_2,...,\\theta_n]^T\\]å‡è®¾éšæœºé€‰å–çš„ä¸€æ‰¹ä»»åŠ¡ä¸º $\\tau$ï¼ŒåŒ…å« 10 ä¸ªæ ·æœ¬ï¼Œæ¯ä¸ªæ ·æœ¬è¾“å…¥ 6 ä¸ªé‡ï¼Œè¾“å‡º 4 ä¸ªé‡ã€‚ç¥ç»ç½‘ç»œå³ä¸ºä¸€ä¸ª 6 è¾“å…¥ 2 è¾“å‡ºçš„ç½‘ç»œã€‚æ ·æœ¬è¾“å…¥çŸ©é˜µä¸ºï¼ˆè¡Œæ˜¯æ ·æœ¬ï¼Œåˆ—æ˜¯è¾“å…¥ç»´åº¦ï¼‰\\[\\boldsymbol M_{in} = \\begin{bmatrix} ^1x_1&amp;  ^1x_2&amp;  \\cdots&amp; ^1x_6\\\\  ^2x_1&amp;  ^2x_2&amp;  \\cdots&amp; ^2x_6 \\\\  \\vdots&amp; \\vdots &amp; \\ddots &amp; \\vdots\\\\  ^{10}x_1&amp; ^{10}x_2&amp;  \\cdots&amp; ^{10}x_6\\end{bmatrix}\\]åŒç†ï¼Œè¾“å‡ºçŸ©é˜µä¸º\\[\\boldsymbol M_{out} = \\begin{bmatrix} ^1y_1&amp;  ^1y_2&amp;  \\cdots&amp; ^1y_4\\\\  ^2y_1&amp;  ^2y_2&amp;  \\cdots&amp; ^2y_4 \\\\  \\vdots&amp; \\vdots &amp; \\ddots &amp; \\vdots\\\\  ^{10}y_1&amp; ^{10}y_2&amp;  \\cdots&amp; ^{10}y_4\\end{bmatrix}\\]å¯¹äºå‚æ•°ä¸º $\\boldsymbol \\theta$ çš„æ¨¡å‹ï¼Œå…¶é¢„æµ‹è¾“å‡ºçŸ©é˜µä¸º\\[\\boldsymbol M_{pred}(\\boldsymbol \\theta) = \\begin{bmatrix} ^1\\hat{y}_1(\\boldsymbol \\theta)&amp;  ^1\\hat{y}_2(\\boldsymbol \\theta)&amp;  \\cdots&amp; ^1\\hat{y}_4(\\boldsymbol \\theta)\\\\  ^2\\hat{y}_1(\\boldsymbol \\theta)&amp;  ^2\\hat{y}_2(\\boldsymbol \\theta)&amp;  \\cdots&amp; ^2\\hat{y}_4(\\boldsymbol \\theta) \\\\  \\vdots&amp; \\vdots &amp; \\ddots &amp; \\vdots\\\\  ^{10}\\hat{y}_1(\\boldsymbol \\theta)&amp; ^{10}\\hat{y}_2(\\boldsymbol \\theta)&amp;  \\cdots&amp; ^{10}\\hat{y}_4(\\boldsymbol \\theta)\\end{bmatrix}\\]å®šä¹‰ä¸€ä¸ªæŸå¤±å‡½æ•° $L_\\tau$ æ¥è¡¡é‡æ¨¡å‹åœ¨ä»»åŠ¡ $\\tau$ ä¸Šçš„æ€§èƒ½ï¼ˆå³æ¨¡å‹é¢„æµ‹è¾“å‡ºä¸æœŸæœ›è¾“å‡ºé—´çš„è·ç¦»ï¼‰ï¼Œå¯ä»¥é‡‡ç”¨ MSE æ¥è¡¨å¾ï¼Œæ³¨æ„åˆ°æŸå¤±å‡½æ•°æ˜¯å…³äºæ¨¡å‹å‚æ•°çš„å‡½æ•°\\[L_\\tau(\\boldsymbol \\theta) = MSE_\\tau = \\frac{1}{10\\cdot4} \\cdot [\\frac{1}{2} \\sum_i^{10} \\sum_j^{4}(^i\\hat{y}_j(\\boldsymbol \\theta) - {}^iy_j)^2]\\]å¦‚ä½•ä½¿å¾—æ¨¡å‹çš„é¢„æµ‹è¾“å‡ºä¸æœŸæœ›è¾“å‡ºçš„è·ç¦»å˜å°å‘¢ï¼ŸæŒ‰ç…§æ¢¯åº¦ä¸‹é™æ–¹æ³•ï¼ˆGDï¼‰ï¼Œæˆ‘ä»¬å¯ä»¥è®¡ç®—æŸå¤±å‡½æ•° $L_\\tau(\\boldsymbol \\theta)$ å…³äºæ¨¡å‹å‚æ•° $\\boldsymbol \\theta$ çš„æ¢¯åº¦ï¼Œç„¶åæ²¿ç€è¿™ä¸ªæ¢¯åº¦çš„è´Ÿæ–¹å‘æ›´æ–°æ¨¡å‹å‚æ•°å³å¯ã€‚å‡è®¾æŸå¤±å‡½æ•°å…³äºæ¨¡å‹å‚æ•°çš„æ¢¯åº¦ä¸º $\\boldsymbol g$ï¼Œåˆ™\\[\\begin{aligned}\\boldsymbol g = \\nabla_{\\boldsymbol \\theta} L_\\tau(\\boldsymbol \\theta) = \\frac{\\partial L_\\tau(\\boldsymbol \\theta)}{\\partial \\boldsymbol \\theta} = \\begin{bmatrix}\\partial L_\\tau(\\boldsymbol \\theta) / \\partial \\theta_1\\\\ \\partial L_\\tau(\\boldsymbol \\theta) / \\partial \\theta_2\\\\ \\vdots\\\\ \\partial L_\\tau(\\boldsymbol \\theta) / \\partial \\theta_n\\end{bmatrix}\\end{aligned}\\]æˆ‘ä»¬å¯ä»¥è®¡ç®—1æ¬¡æ¢¯åº¦ä¸‹é™ï¼Œä¹Ÿå¯ä»¥è®¡ç®—å¤šæ¬¡ã€‚å‡è®¾ $\\boldsymbol g_1$ æ˜¯åœ¨åŸå§‹æ¨¡å‹å‚æ•°ä¸Šè¿›è¡Œç¬¬1æ¬¡æ¢¯åº¦è®¡ç®—ï¼Œæœ‰\\[\\begin{aligned}\\boldsymbol g_1 &amp; =  \\nabla_{\\boldsymbol \\theta} L_\\tau(\\boldsymbol \\theta_0)\\\\\\boldsymbol \\theta_1 &amp;= \\boldsymbol \\theta_0 - \\alpha \\boldsymbol g_1\\end{aligned}\\]å…¶ä¸­ï¼Œ$\\boldsymbol \\theta_1$ è¡¨ç¤ºç»è¿‡1æ¬¡æ¢¯åº¦æ›´æ–°åçš„æ¨¡å‹å‚æ•°ï¼Œåæ–‡ä»¥æ­¤ç±»æ¨ã€‚ç¬¬2æ¬¡æ¢¯åº¦è®¡ç®—å»ºç«‹åœ¨ç¬¬1æ¬¡æ¢¯åº¦è®¡ç®—çš„åŸºç¡€ä¸Šï¼Œæœ‰\\[\\begin{aligned}\\boldsymbol g_2 &amp;= \\nabla_{\\boldsymbol \\theta_1} L_\\tau(\\boldsymbol \\theta_1)\\\\\\boldsymbol \\theta_2 &amp;= \\boldsymbol \\theta_1 - \\alpha \\boldsymbol g_2\\\\&amp; = \\boldsymbol \\theta_0 - \\alpha \\boldsymbol g_1 - \\alpha \\boldsymbol g_2\\end{aligned}\\]æˆ‘ä»¬å°†1æ¬¡ï¼Œ2æ¬¡ï¼Œâ€¦ï¼Œç›´åˆ° $k$ æ¬¡æ¢¯åº¦è®¡ç®—çš„è¿‡ç¨‹ç»Ÿä¸€åˆ—å†™å¦‚ä¸‹ï¼š\\[\\begin{aligned}initialization:\\quad&amp;\\boldsymbol \\theta_0 = \\boldsymbol \\theta\\\\1^{st}\\;gradient\\;step:\\quad&amp;\\boldsymbol \\theta_1 = U^1_\\tau(\\boldsymbol \\theta)=\\boldsymbol \\theta - \\alpha \\boldsymbol g_1\\\\2^{nd}\\;gradient\\;step:\\quad&amp;\\boldsymbol \\theta_2 = U^2_\\tau(\\boldsymbol \\theta)=\\boldsymbol \\theta- \\alpha \\boldsymbol g_1- \\alpha \\boldsymbol g_2\\\\...&amp;...\\\\k^{th}\\;gradient\\;step:\\quad&amp;\\boldsymbol \\theta_k = U^k_\\tau(\\boldsymbol \\theta)=\\boldsymbol \\theta- \\alpha \\boldsymbol g_1- \\alpha \\boldsymbol g_2-...- \\alpha \\boldsymbol g_k\\\\&amp;\\boldsymbol g_k = \\nabla_{\\boldsymbol \\theta_{k-1}} L_\\tau(\\boldsymbol \\theta_{k-1})\\end{aligned}\\]å…¶ä¸­ï¼Œæ¨¡å‹å‚æ•° ${}^k_\\tau\\boldsymbol \\theta$ è¡¨ç¤ºæ¨¡å‹å‚æ•°å·²ç»åœ¨ä»»åŠ¡æ•°æ® $\\tau$ ä¸Šç»è¿‡ $k$ æ¬¡æ›´æ–°ï¼Œ$U^k_\\tau$ æ˜¯ä¸€ä¸ªæ¢¯åº¦ç®—å­ï¼Œå®šä¹‰ä¸ºåœ¨æ•°æ® $\\tau$ è¿›è¡Œ $k$ æ¬¡æ›´æ–°ï¼Œ$U^k_\\tau(\\boldsymbol \\theta)={}^{k}_\\tau \\boldsymbol \\theta$ã€‚1.3. åŸºäºä¼˜åŒ–çš„å…ƒå­¦ä¹ ç›®æ ‡MAML çš„ç›®æ ‡æ˜¯ï¼šæ‰¾å¯»ä¸€ç»„æ¨¡å‹åˆå§‹å‚æ•° $\\boldsymbol \\theta$ï¼Œä½¿å¾—æ¨¡å‹åœ¨é¢å¯¹éšæœºé€‰å–çš„æ–°ä»»åŠ¡ $\\tau$ æ—¶ï¼Œç»è¿‡ $k$ æ¬¡æ¢¯åº¦æ›´æ–°ï¼Œåœ¨ $\\tau$ ä¸Šçš„æŸå¤±å‡½æ•°å°±èƒ½è¾¾åˆ°å¾ˆå°ã€‚  We consider the optimization problem of MAML: find an initial set of parameters, $\\boldsymbol \\theta$, such that for a randomly sampled task $\\tau$ with corresponding loss $L_\\tau$, the learner will have low loss after $k$ updates. â€”â€”â€“[Reptile]ç”¨æ•°å­¦è¯­è¨€æè¿°ï¼Œå³\\[\\begin{aligned}\\mathop{minimize}_{\\theta} \\; \\mathbb E_{\\tau}[L_{\\tau}(^{k}_\\tau\\boldsymbol \\theta)]= \\mathop{minimize}_{\\theta} \\; \\mathbb E_{\\tau}[L_{\\tau}(U^k_\\tau(\\boldsymbol \\theta))]\\end{aligned}\\]å…¶ä¸­ï¼Œ${}^{k}_\\tau \\boldsymbol \\theta$ æ˜¯åœ¨ä»»åŠ¡ $\\tau$ ä¸Šç»è¿‡ $k$ æ¬¡æ›´æ–°åçš„æ¨¡å‹å‚æ•°ã€‚åœ¨å‰é¢çš„æ¢¯åº¦æ•°å­¦åˆ†æä¸­ï¼Œæˆ‘ä»¬çœç•¥äº†ä¸‹æ ‡ $\\tau$ï¼Œå› ä¸ºæ¢¯åº¦è®¡ç®—å’ŒæŸå¤±å‡½æ•°è®¡ç®—é»˜è®¤éƒ½æ˜¯å¯¹åŒä¸€æ‰¹æ•°æ®ï¼Œä½†æ˜¯åœ¨è¿™é‡ŒåŠ ä¸Šä¸‹æ ‡ï¼Œæ˜¯å› ä¸ºåé¢ MAML å¹¶ä¸åœ¨åŒä¸€æ‰¹æ•°æ®ä¸Šè®¡ç®—æ¢¯åº¦å’Œè®¡ç®—æŸå¤±å‡½æ•°ï¼Œéœ€è¦ä¸‹æ ‡åšåŒºåˆ†ã€‚è¿™é‡Œè¯´çš„æ˜¯ MAML çš„ç›®æ ‡ï¼Œæ˜¯å› ä¸ºæˆªè‡³ MAML æ–‡ç« å‘è¡¨ï¼Œäººä»¬è¿˜æ²¡æœ‰å»ºç«‹èµ·å…ƒå­¦ä¹ çš„æ¡†æ¶æ¦‚å¿µï¼Œåæ¥äººä»¬å°† MAML ç­‰å¯»æ‰¾æœ€ä¼˜æ¨¡å‹åˆå§‹å‚æ•°çš„æ–¹æ³•ç§°ä½œ åŸºäºä¼˜åŒ–çš„å…ƒå­¦ä¹ é—®é¢˜ï¼ˆOptimization-based Meta-Learningï¼‰çš„æ–¹æ³•ï¼Œä¸Šè¿°æ•°å­¦æè¿°ä¹Ÿå°±æˆä¸ºæ•´ä¸ªé—®é¢˜çš„å…±åŒç›®æ ‡ã€‚1.4. MAMLæ•°å­¦åˆ†æå‡è®¾ä»»åŠ¡ $\\tau$ å¯ä»¥åˆ†è§£ä¸ºä¸¤ä¸ªäº’ä¸ç›¸äº¤çš„æ•°æ®å­é›† Aï¼ˆæ¯”å¦‚åŒ…å«7ä¸ªæ ·æœ¬ï¼‰ å’Œ Bï¼ˆåŒ…å«3ä¸ªæ ·æœ¬ï¼‰ï¼ŒMAML é€šè¿‡è¿›è¡Œ $k=1$ æ¬¡æ¢¯åº¦ç®—å­æ›´æ–°ï¼Œå°†ä¸Šè¿°é—®é¢˜è½¬åŒ–ä¸ºå¦‚ä¸‹é—®é¢˜ã€‚çœç•¥ $U$ çš„ä¸Šæ ‡ $k$ï¼Œæœ‰\\[\\begin{aligned}\\mathop{minimize}_{\\theta} \\; \\mathbb E_{\\tau}[L_{B}(U_{A}(\\boldsymbol \\theta))]\\end{aligned}\\]å³ MAML åœ¨æ•°æ®é›† A ä¸Šè®­ç»ƒï¼Œåœ¨æ•°æ®é›† B ä¸Šè®¡ç®—æŸå¤±å‡½æ•° $L_{B}(U_{A}(\\boldsymbol \\theta))$ï¼Œä½¿å¾—å…¶æœ€å°ã€‚MAML ä¸­åªè¿›è¡Œ $k=1$ æ¬¡æ¢¯åº¦ç®—å­æ›´æ–°ï¼Œä½œè€…å·ç§°æœ‰å¦‚ä¸‹å››ä¸ªåŸå› ï¼š      Meta Learningä¼šå¿«å¾ˆå¤šï¼›        å¦‚æœèƒ½è®©æ¨¡å‹åªç»è¿‡ä¸€æ¬¡æ¢¯åº¦ä¸‹é™å°±æ€§èƒ½ä¼˜ç§€ï¼Œå½“ç„¶å¾ˆå¥½ï¼›        Few-shot learningçš„æ•°æ®æœ‰é™ï¼Œå¤šæ¬¡æ¢¯åº¦ä¸‹é™å¾ˆå®¹æ˜“è¿‡æ‹Ÿåˆï¼›        åˆšæ‰è¯´çš„å¯ä»¥åœ¨å®é™…åº”ç”¨ä¸­å¤šæ¬¡æ¢¯åº¦ä¸‹é™ã€‚  ä¸ºäº†ä½¿æŸå¤±å‡½æ•°æœ€å°ï¼Œéœ€è¦è®¡ç®—æŸå¤±å‡½æ•°å¯¹æ¨¡å‹åŸå§‹å‚æ•° $\\boldsymbol \\theta$ çš„æ¢¯åº¦ $\\boldsymbol g_{MAML}$ï¼Œç„¶ååœ¨æ¢¯åº¦è´Ÿæ–¹å‘æ›´æ–°å‚æ•°ã€‚ å³\\[\\boldsymbol g_{MAML} = \\nabla_{\\boldsymbol \\theta} L_{B}(U_{A}(\\boldsymbol \\theta))\\]æ³¨æ„åˆ°\\[U^{k=1}_\\tau(\\boldsymbol \\theta)={}\\tau \\boldsymbol \\theta_1\\]çœç•¥ $k$ï¼Œé‚£ä¹ˆ\\[\\begin{aligned}\\boldsymbol g_{MAML} &amp;= \\nabla_{\\boldsymbol \\theta} L_{B}(U_{A}(\\boldsymbol \\theta))= \\frac{\\partial}{\\partial \\boldsymbol \\theta} L_{B}(U_{A}(\\boldsymbol \\theta))\\\\&amp;= L_{B}'({}_{A}\\boldsymbol \\theta_1) U_{A}'(\\boldsymbol \\theta)\\quad where \\quad {}_{A} \\boldsymbol \\theta_1 = U_{A}(\\boldsymbol \\theta)\\end{aligned}\\]ä¸Šå¼ä¸­ï¼Œç¬¬ä¸€é¡¹æ˜¯ä½¿ç”¨ A æ•°æ®è¿›è¡Œä¸€æ¬¡æ¢¯åº¦æ›´æ–°åçš„æ¨¡å‹å‚æ•°è®¡ç®—æŸå¤±å‡½æ•°ï¼Œç„¶ååœ¨ B æ•°æ®ä¸Šè®¡ç®—æŸå¤±å‡½æ•°çš„å¯¼æ•°ï¼Œè¿™é‡Œçš„å¯¼æ•°æ˜¯å¯¹æ›´æ–°åçš„æ¨¡å‹å‚æ•°æ±‚çš„ï¼Œå› æ­¤è¿™ä¸€é¡¹æ¯”è¾ƒå¥½æ±‚ã€‚ä¸‹é¢è®¡ç®—ç¬¬äºŒé¡¹ $Uâ€™_{A}(\\boldsymbol \\theta)$ã€‚å‰é¢ç®—å­æ›´æ–°æ—¶æˆ‘ä»¬çŸ¥é“\\[U^1_\\tau(\\boldsymbol \\theta)=\\boldsymbol \\theta - \\alpha \\boldsymbol g_1\\]é‚£ä¹ˆæœ‰\\[U_{A}'(\\boldsymbol \\theta) = \\frac{\\partial U_{A}(\\boldsymbol \\theta)}{\\partial \\boldsymbol \\theta}= \\frac{\\partial \\boldsymbol \\theta}{\\partial \\boldsymbol \\theta}-\\alpha \\frac{\\partial \\boldsymbol g_1}{\\partial \\boldsymbol \\theta}\\]ä¸‹é¢åˆ†æç¬¬ä¸€é¡¹ $\\frac{\\partial \\boldsymbol \\theta}{\\partial \\boldsymbol \\theta}$ çš„å±•å¼€ï¼Œæ³¨æ„åˆ° $\\boldsymbol \\theta = [\\theta_1,\\theta_2,â€¦,\\theta_n]^T$ çš„å®šä¹‰ï¼Œé‚£ä¹ˆè¯¥é¡¹å±•å¼€å³ä¸º $\\boldsymbol \\theta$ çš„æ¯ä¸ªåˆ†é‡å¯¹å…¶è‡ªèº«æ±‚åå¯¼ï¼Œéœ€è¦åˆ†æƒ…å†µè®¨è®º\\[\\begin{aligned}\\frac{\\partial \\theta_i}{\\partial \\theta_j} = \\left\\{\\begin{matrix}1 \\quad i=j\\\\ 0 \\quad i \\neq j\\end{matrix}\\right.\\end{aligned}\\]é‚£ä¹ˆç¬¬ä¸€é¡¹å³ä¸º $n\\times n$ å•ä½é˜µï¼ˆå¯ä»¥çœ‹ä½œä¸€ä¸ªç‰¹æ®Šçš„ Jacobian çŸ©é˜µï¼‰\\[\\begin{aligned}\\frac{\\partial \\boldsymbol \\theta}{\\partial \\boldsymbol \\theta} = \\begin{bmatrix}1\\;0\\;\\cdots \\; 0\\\\0\\;1\\;\\cdots \\; 0\\\\\\vdots\\;\\vdots\\;\\ddots \\; \\vdots\\\\0\\;0\\;\\cdots \\; 1\\end{bmatrix} = \\boldsymbol I_{n \\times n}\\end{aligned}\\]ç„¶ååˆ†æç¬¬äºŒé¡¹çš„å±•å¼€ã€‚æ ¹æ®å‰æ–‡çŸ¥\\[\\begin{aligned}\\boldsymbol g_1 = \\frac{\\partial L_\\tau(\\boldsymbol \\theta)}{\\partial \\boldsymbol \\theta} = \\begin{bmatrix}\\partial L_\\tau(\\boldsymbol \\theta) / \\partial \\theta_1\\\\ \\partial L_\\tau(\\boldsymbol \\theta) / \\partial \\theta_2\\\\ \\vdots\\\\ \\partial L_\\tau(\\boldsymbol \\theta) / \\partial \\theta_n\\end{bmatrix}\\end{aligned}\\]ä»£å…¥ç¬¬äºŒé¡¹æœ‰\\[\\begin{aligned}\\alpha \\frac{\\partial \\boldsymbol g_1}{\\partial \\boldsymbol \\theta} &amp;= \\alpha \\frac{\\partial L_\\tau(\\boldsymbol \\theta)}{\\partial \\boldsymbol \\theta} / \\partial \\boldsymbol \\theta\\\\&amp; = \\alpha \\begin{bmatrix}\\partial L_\\tau(\\boldsymbol \\theta) / \\partial \\theta_1\\\\ \\partial L_\\tau(\\boldsymbol \\theta) / \\partial \\theta_2\\\\ \\vdots\\\\ \\partial L_\\tau(\\boldsymbol \\theta) / \\partial \\theta_n\\end{bmatrix} / \\partial \\boldsymbol \\theta\\\\&amp; = \\alpha \\begin{bmatrix}    \\partial (\\frac{\\partial L_{A}}{\\partial \\theta_1}) / \\partial \\theta_1 &amp;  \\partial (\\frac{\\partial L_{A}}{\\partial \\theta_1}) / \\partial \\theta_2&amp;  \\cdots &amp; \\partial (\\frac{\\partial L_{A}}{\\partial \\theta_1}) / \\partial \\theta_n \\\\     \\partial (\\frac{\\partial L_{A}}{\\partial \\theta_2}) / \\partial \\theta_1 &amp;  \\partial (\\frac{\\partial L_{A}}{\\partial \\theta_2}) / \\partial \\theta_2&amp;  \\cdots &amp; \\partial (\\frac{\\partial L_{A}}{\\partial \\theta_2}) / \\partial \\theta_n \\\\     \\vdots &amp; \\vdots &amp; \\ddots &amp; \\vdots\\\\    \\partial (\\frac{\\partial L_{A}}{\\partial \\theta_n}) / \\partial \\theta_1 &amp;  \\partial (\\frac{\\partial L_{A}}{\\partial \\theta_n}) / \\partial \\theta_2&amp;  \\cdots &amp; \\partial (\\frac{\\partial L_{A}}{\\partial \\theta_n}) / \\partial \\theta_n \\\\     \\end{bmatrix}_{n \\times n}\\\\&amp;= \\alpha \\begin{bmatrix}    \\partial^2 L_{A} / \\partial \\theta_1^2 &amp;  \\partial^2 L_{A} /\\partial \\theta_1 \\partial \\theta_2 &amp;  \\cdots &amp; \\partial^2 L_{A} /\\partial \\theta_1 \\partial \\theta_n \\\\     \\partial^2 L_{A} /\\partial \\theta_2 \\partial \\theta_1 &amp;  \\partial^2 L_{A} / \\partial \\theta_2^2 &amp;  \\cdots &amp; \\partial^2 L_{A} /\\partial \\theta_2 \\partial \\theta_n \\\\     \\vdots &amp; \\vdots &amp; \\ddots &amp; \\vdots\\\\    \\partial^2 L_{A} /\\partial \\theta_n \\partial \\theta_1 &amp;  \\partial^2 L_{A} /\\partial \\theta_n \\partial \\theta_2&amp;  \\cdots &amp; \\partial^2 L_{A} / \\partial \\theta_n^2 \\\\     \\end{bmatrix}_{n \\times n}\\\\&amp;= \\alpha \\boldsymbol H_{A}(\\boldsymbol \\theta)_{n \\times n}\\end{aligned}\\]ï¼ˆå‘é‡å¯¹å‘é‡æ±‚åå¯¼ï¼Œæ˜¯å‘é‡çš„æ¯ä¸ªåˆ†é‡å¯¹å¦ä¸€ä¸ªå‘é‡çš„æ¯ä¸ªåˆ†é‡æ±‚åå¯¼åå½¢æˆçŸ©é˜µï¼Œå°±æ˜¯Hessian çŸ©é˜µï¼Hessian ç­‰ä»·äºæ¢¯åº¦çš„ Jacobian çŸ©é˜µã€‚â€”â€”Ian Goodfellowæ‰€è‘—çš„ã€ŠDeep Learningã€‹çš„P78ï¼‰æœ€ç»ˆè®¡ç®—å¾—åˆ°çš„ç¬¬äºŒé¡¹ $U_{A}â€™(\\boldsymbol \\theta)$çš„è¡¨è¾¾å¼ä¸º\\[\\begin{aligned}U_{A}'(\\boldsymbol \\theta) &amp;= \\frac{\\partial U_{A}(\\boldsymbol \\theta)}{\\partial \\boldsymbol \\theta}= \\frac{\\partial \\boldsymbol \\theta}{\\partial \\boldsymbol \\theta}-\\alpha \\frac{\\partial \\boldsymbol g_1}{\\partial \\boldsymbol \\theta}\\\\&amp;= \\boldsymbol I_{n \\times n} - \\alpha \\boldsymbol H_{A}(\\boldsymbol \\theta)_{n \\times n}\\end{aligned}\\]MAML çš„ä½œè€…è¡¨ç¤ºï¼Œå¤§éƒ¨åˆ†è®¡ç®—é‡éƒ½åœ¨äºè®¡ç®— $H_{A}(\\boldsymbol \\theta)_{n \\times n}$ è¿™ä¸ªåŒ…å«äºŒé‡æ¢¯åº¦çš„ Hessian çŸ©é˜µï¼Œå¯¼è‡´ MAML çš„è®¡ç®—é‡å¾ˆå¤§ï¼Œä½¿å¾— MAML ä»¥éš¾ä»¥è®­ç»ƒæˆåã€‚é‚£ä¹ˆå½“è¿›è¡Œ $k&gt;1$ æ¬¡æ¢¯åº¦ç®—å­æ›´æ–°æ—¶åˆä¼šæ€æ ·å‘¢ï¼Ÿï¼ˆä½œè€…ï¼šæˆ‘ä¸è¦é¢å­çš„ï¼Ÿï¼‰æˆ‘ä»¬å°†1æ¬¡ï¼Œ2æ¬¡ï¼Œâ€¦ï¼Œç›´åˆ° $k$ æ¬¡æ¢¯åº¦è®¡ç®—çš„è¿‡ç¨‹æ”¹å†™å¦‚ä¸‹ï¼ˆæ³¨æ„åˆ°è¿™é‡Œé‡‡ç”¨æ•°æ®é›† A æ¥æ›´æ–°å‚æ•° $\\boldsymbol\\theta$ï¼Œä½†æ˜¯åœ¨å¼ä¸­æˆ‘ä»¬çœç•¥äº†å·¦ä¸‹æ ‡ Aï¼‰ï¼š\\[\\begin{aligned}initialization:\\quad&amp;\\boldsymbol \\theta_0 = \\boldsymbol \\theta\\\\1^{st}\\;gradient\\;step:\\quad&amp;\\boldsymbol \\theta_1 = U^1_A(\\boldsymbol \\theta)=\\boldsymbol \\theta_0 - \\alpha \\boldsymbol g_1\\\\2^{nd}\\;gradient\\;step:\\quad&amp;\\boldsymbol \\theta_2 = U^2_A(\\boldsymbol \\theta)=\\boldsymbol \\theta_1 - \\alpha \\boldsymbol g_2\\\\...&amp;...\\\\k^{th}\\;gradient\\;step:\\quad&amp;\\boldsymbol \\theta_k = U^k_A(\\boldsymbol \\theta)=\\boldsymbol \\theta_{k-1}- \\alpha \\boldsymbol g_k\\\\&amp;\\boldsymbol g_k = \\nabla_{\\boldsymbol \\theta_{k-1}} L_\\tau(\\boldsymbol \\theta_{k-1})\\end{aligned}\\]åœ¨å¤–å¾ªç¯ä¸­ï¼Œå‡è®¾åªä½¿ç”¨ä¸€ä¸ªtaskæ¥æ›´æ–°å‚æ•°ï¼Œçœç•¥æ±‚å’Œå·ï¼Œæœ‰\\[\\boldsymbol \\theta \\leftarrow \\boldsymbol \\theta - \\beta \\cdot \\boldsymbol g_{MAML}\\]å…¶ä¸­\\[\\begin{aligned}\\boldsymbol g_{MAML} &amp;= \\nabla_{\\boldsymbol \\theta} L_{B}(U^k_{A}(\\boldsymbol \\theta))\\\\&amp;= \\nabla_{\\boldsymbol \\theta} L_{B}(\\boldsymbol \\theta_k)\\\\&amp;= \\nabla_{\\boldsymbol \\theta_k} L_{B}(\\boldsymbol \\theta_k)\\cdot(\\nabla_{\\boldsymbol \\theta}\\boldsymbol \\theta_k)\\\\&amp;= \\nabla_{\\boldsymbol \\theta_k} L_{B}(\\boldsymbol \\theta_k)\\cdot(\\nabla_{\\boldsymbol \\theta_{k-1}}\\boldsymbol \\theta_k) \\cdots (\\nabla_{\\boldsymbol \\theta_{1}}\\boldsymbol \\theta_2)\\cdot (\\nabla_{\\boldsymbol \\theta_{0}}\\boldsymbol \\theta_1)\\\\&amp;= \\nabla_{\\boldsymbol \\theta_k} L_{B}(\\boldsymbol \\theta_k)\\cdot\\prod_{i=1}^k (\\nabla_{\\boldsymbol \\theta_{i-1}}\\boldsymbol \\theta_i)\\\\&amp;= \\nabla_{\\boldsymbol \\theta_k} L_{B}(\\boldsymbol \\theta_k)\\cdot\\prod_{i=1}^k (\\nabla_{\\boldsymbol \\theta_{i-1}}(\\boldsymbol \\theta_{i-1}- \\alpha \\boldsymbol g_i))\\\\&amp;= \\nabla_{\\boldsymbol \\theta_k} L_{B}(\\boldsymbol \\theta_k)\\cdot\\prod_{i=1}^k (\\nabla_{\\boldsymbol \\theta_{i-1}}(\\boldsymbol \\theta_{i-1}- \\alpha (\\nabla_{\\boldsymbol \\theta_{i-1}} L_\\tau(\\boldsymbol \\theta_{i-1})))\\\\&amp;= \\nabla_{\\boldsymbol \\theta_k} L_{B}(\\boldsymbol \\theta_k)\\cdot\\prod_{i=1}^k (\\boldsymbol I - \\alpha \\nabla_{\\boldsymbol \\theta_{i-1}} (\\nabla_{\\boldsymbol \\theta_{i-1}} L_\\tau(\\boldsymbol \\theta_{i-1})))\\\\\\end{aligned}\\]å½“ $k=1$ æ—¶æˆ‘ä»¬å‘ç°ï¼Œåé¢çš„è¿ä¹˜é¡¹å°±é€€åŒ–ä¸ºå‰é¢å·²ç»æ¨å¾—çš„ Hessian çŸ©é˜µäº†\\[\\begin{aligned}\\prod_{i=1}^{k=1} (\\boldsymbol I - \\alpha \\nabla_{\\boldsymbol \\theta_{i-1}} (\\nabla_{\\boldsymbol \\theta_{i-1}} L_\\tau(\\boldsymbol \\theta_{i-1}))) &amp;= \\boldsymbol I - \\alpha \\nabla_{\\boldsymbol \\theta_0} \\nabla_{\\boldsymbol \\theta_0} L_\\tau\\boldsymbol (\\theta_0)\\\\&amp; = \\boldsymbol I - \\alpha \\boldsymbol H_{A}(\\boldsymbol \\theta)\\\\\\end{aligned}\\]åˆ™\\[\\boldsymbol g_{MAML} = \\nabla_{\\boldsymbol \\theta_k} L_{B}(\\boldsymbol \\theta_k) \\cdot (\\boldsymbol I - \\alpha \\boldsymbol H_{A}(\\boldsymbol \\theta))\\]1.5. FOMAMLä¸ºäº†é™ä½äºŒé‡æ¢¯åº¦å¯¼è‡´çš„å·¨å¤§è®¡ç®—é‡ï¼Œä½œè€…æå‡ºäº†ä¸€ç§å°†äºŒé‡æ¢¯åº¦ç®€åŒ–è®¡ç®—ä¸ºä¸€é‡æ¢¯åº¦çš„æ–¹æ³•ï¼Œå³ First-Order MAML (FOMAML)ã€‚FOMAML å‡è®¾å­¦ä¹ ç‡ $\\alpha \\rightarrow 0^+$ï¼Œåˆ™å‰é¢ä¸ $\\alpha$ ç›¸ä¹˜çš„é¡¹ï¼ˆ$k=1$ æ—¶æ˜¯ Hessian çŸ©é˜µï¼Œ$k&gt;1$ æ—¶æ˜¯è¿ä¹˜é¡¹ï¼‰å› ä¸ºä¹˜ä»¥ $0^+$ è¢«æ¶ˆå»ã€‚é‚£ä¹ˆæ•´ä¸ª $U_{A}â€™(\\boldsymbol \\theta)$ å°±ç­‰äºå•ä½é˜µäº†ï¼Œæ­¤æ—¶ FOMAML çš„æ¢¯åº¦å³ä¸º\\[\\boldsymbol g_{FOMAML} = L'_{B}({}_A\\boldsymbol \\theta_k)=\\nabla_{\\boldsymbol \\theta_k} L_{B}({}_A\\boldsymbol \\theta_k)\\]ä¹Ÿå³ä»…ç”¨æœ€åä¸€æ¬¡æ›´æ–°çš„æ¨¡å‹å‚æ•° $_{A}\\boldsymbol \\theta_k$ è®¡ç®—æ¢¯åº¦ã€‚é‚£ä¹ˆï¼Œè¿›è¡Œ $k=1$ æ¬¡æ¢¯åº¦ç®—å­æ›´æ–°çš„ FOMAML çš„å®ç°è¿‡ç¨‹å°±å¾ˆç®€å•äº†ï¼š  é‡‡æ ·ä»»åŠ¡ $\\tau$ï¼›  è®¡ç®—åœ¨æ•°æ®é›† A ä¸Šçš„æ¢¯åº¦å› å­ $U^{k=1}_{A}(\\boldsymbol \\theta)= _{A} \\boldsymbol \\theta_1 = \\phi$;  è®¡ç®—åœ¨æ•°æ®é›† B ä¸Šçš„æŸå¤±å‡½æ•° $L_{B}$ å¯¹ $\\phi$ çš„ï¼ˆåï¼‰å¯¼æ•°ï¼š$g_{FOMAML}=\\nabla_{\\phi} L_{B}(\\phi)$ï¼›  å°† $g_{FOMAML}$ æ’å…¥å¤–å¾ªç¯æ›´æ–°å‚æ•°ã€‚ç®€åŒ–åçš„ FOMAML æ¨¡å‹å‚æ•°æ›´æ–°å¼ä¸ºï¼š\\[\\begin{aligned}\\theta_i' \\leftarrow \\theta - \\alpha \\nabla_\\theta L_{Ai}(\\theta)\\\\\\theta \\leftarrow \\theta - \\beta \\nabla_{\\theta'} \\sum L_B(\\theta')\\\\\\end{aligned}\\]å¯ä»¥çœ‹å‡ºåªéœ€è¦è®¡ç®—ä¸€é‡æ¢¯åº¦å³å¯ï¼Œä½œè€…åœ¨æ–‡ä¸­å·ç§°çº¦èŠ‚çœäº†33%çš„è®¡ç®—é‡ã€‚  This approximation removes the need for computing Hessian-vector products in an additional backward pass, which we found led to roughly 33% speed-up in network computation.ä¸€é˜¶è¿‘ä¼¼çš„MAMLå¯ä»¥çœ‹ä½œæ˜¯å¦‚ä¸‹å½¢å¼çš„å‚æ•°æ›´æ–°ï¼šå‡è®¾æ¯ä¸ªbatchåªæœ‰ä¸€ä¸ªtaskï¼ŒæŸæ¬¡é‡‡ç”¨ç¬¬mä¸ªtaskæ¥æ›´æ–°æ¨¡å‹å‚æ•°ï¼Œå¾—åˆ°$\\hat\\theta^m$ï¼Œå†æ±‚ä¸€æ¬¡æ¢¯åº¦ï¼Œæ²¿ç€è¯¥æ¢¯åº¦æ–¹å‘æ›´æ–°æ¨¡å‹çš„åŸå§‹å‚æ•°$\\phi$ï¼Œå°†å…¶ä» $\\phi^0$ æ›´æ–°è‡³ $\\phi^1$ï¼Œä»¥æ­¤ç±»æ¨ã€‚ä¸ä¹‹ç›¸æ¯”ï¼Œå³è¾¹æ˜¯æ¨¡å‹é¢„è®­ç»ƒæ–¹æ³•ï¼Œå®ƒæ˜¯å°†å‚æ•°æ ¹æ®æ¯æ¬¡çš„è®­ç»ƒä»»åŠ¡ä¸€é˜¶å¯¼æ•°çš„æ–¹å‘æ¥æ›´æ–°å‚æ•°ã€‚1.6. ç¼ºç‚¹MAMLçš„ç¼ºç‚¹[2]ï¼š      Hard to trainï¼špaperä¸­ç»™å‡ºçš„backboneæ˜¯4å±‚çš„convåŠ 1å±‚linearï¼Œè¯•æƒ³ï¼Œå¦‚æœæˆ‘ä»¬æ¢æˆ16å±‚çš„VGGï¼Œæ¯ä¸ªtaskåœ¨ç®—fast parameterçš„æ—¶å€™éœ€è¦è®¡ç®—çš„HessiançŸ©é˜µå°†ä¼šå˜å¾—éå¸¸å¤§ã€‚é‚£ä¹ˆä½ æ¯ä¸€æ¬¡è¿­ä»£å°±éœ€è¦å¾ˆä¹…ï¼Œæƒ³è¦æœ€åçš„modelæ”¶æ•›å°±è¦æ›´ä¹…ã€‚        Robustnessä¸€èˆ¬ï¼šä¸æ˜¯è¯´MAMLçš„robustnessä¸å¥½ï¼Œå› ä¸ºä¹Ÿæ˜¯ç”±ä¸€é˜¶onlineçš„ä¼˜åŒ–æ–¹æ³•SGDæ±‚è§£å‡ºæ¥çš„ï¼Œä¼šç›¸å¯¹æ‰¾åˆ°ä¸€ä¸ªflatten minima locationã€‚ç„¶è€Œè¿™å’Œégradient-based meta learningæ–¹æ³•æ±‚è§£å‡ºæ¥çš„modelçš„robustè‚¯å®šæ˜¯æ²¡æ³•æ¯”çš„ã€‚  2. å„ç±»å®ç°dragen-1860 çš„ Pytorch å®ç°ï¼šhttps://github.com/dragen1860/MAML-PytorchTensorflowå®ç°ï¼šhttps://github.com/dragen1860/MAML-TensorFlow3. å‚è€ƒæ–‡çŒ®[1]  Rust-in. MAML è®ºæ–‡åŠä»£ç é˜…è¯»ç¬”è®°.[2] äººå·¥æ™ºéšœ. MAMLç®—æ³•ï¼Œmodel-agnostic metalearnings?[3] Veagau. ã€ç¬”è®°ã€‘Reptile-ä¸€é˜¶å…ƒå­¦ä¹ ç®—æ³•[4] pure water. ReptileåŸç†ä»¥åŠä»£ç è¯¦è§£[5] Tianhao Weiç¿»è¯‘è‡ªLilian.å…ƒå­¦ä¹ ï¼šå­¦ä¹ å¦‚ä½•å­¦ä¹ ã€è¯‘ã€‘"
  },
  
  {
    "title": "å…ƒå­¦ä¹ åŸºç¡€",
    "url": "/posts/meta-learning-basic/",
    "categories": "Academic, Knowledge",
    "tags": "deep learning, meta learning",
    "date": "2020-07-12 14:35:19 +0800",
    





    
    "snippet": "å°æ ·æœ¬å­¦ä¹ ï¼ˆFew-Shot Learningï¼‰é—®é¢˜æ˜¯ä¸€ä¸ªæ–°å…´çš„æœºå™¨å­¦ä¹ é—®é¢˜ï¼Œæ—¨åœ¨ç ”ç©¶å½“æ ·æœ¬ä¸ªæ•°ä¸¥é‡ä¸è¶³æ—¶ï¼Œå¦‚ä½•è®­ç»ƒä¸€ä¸ªæ¨¡å‹ï¼Œèƒ½å¤Ÿå¿«é€Ÿçš„å®Œæˆå­¦ä¹ ï¼ˆåˆ†ç±»ã€å›å½’ã€å¼ºåŒ–å­¦ä¹ ç­‰ï¼‰ä»»åŠ¡ã€‚è¿›ä¸€æ­¥å¼•å…¥å…ƒå­¦ä¹ çš„æ€æƒ³æ¥è§£å†³å°æ ·æœ¬å­¦ä¹ é—®é¢˜ã€‚  1. å°æ ·æœ¬å­¦ä¹ é—®é¢˜  2. å…ƒå­¦ä¹ æ–¹æ³•  3. è®­ç»ƒè¿‡ç¨‹          3.1. æ·±åº¦å­¦ä¹ çš„è®­ç»ƒè¿‡ç¨‹      3.2. å…ƒå­¦ä¹ çš„è®­ç»ƒè¿‡ç¨‹        4. å‚è€ƒ...",
    "content": "å°æ ·æœ¬å­¦ä¹ ï¼ˆFew-Shot Learningï¼‰é—®é¢˜æ˜¯ä¸€ä¸ªæ–°å…´çš„æœºå™¨å­¦ä¹ é—®é¢˜ï¼Œæ—¨åœ¨ç ”ç©¶å½“æ ·æœ¬ä¸ªæ•°ä¸¥é‡ä¸è¶³æ—¶ï¼Œå¦‚ä½•è®­ç»ƒä¸€ä¸ªæ¨¡å‹ï¼Œèƒ½å¤Ÿå¿«é€Ÿçš„å®Œæˆå­¦ä¹ ï¼ˆåˆ†ç±»ã€å›å½’ã€å¼ºåŒ–å­¦ä¹ ç­‰ï¼‰ä»»åŠ¡ã€‚è¿›ä¸€æ­¥å¼•å…¥å…ƒå­¦ä¹ çš„æ€æƒ³æ¥è§£å†³å°æ ·æœ¬å­¦ä¹ é—®é¢˜ã€‚  1. å°æ ·æœ¬å­¦ä¹ é—®é¢˜  2. å…ƒå­¦ä¹ æ–¹æ³•  3. è®­ç»ƒè¿‡ç¨‹          3.1. æ·±åº¦å­¦ä¹ çš„è®­ç»ƒè¿‡ç¨‹      3.2. å…ƒå­¦ä¹ çš„è®­ç»ƒè¿‡ç¨‹        4. å‚è€ƒæ–‡çŒ®1. å°æ ·æœ¬å­¦ä¹ é—®é¢˜Few-Shot Learning (FSL)ä¼—æ‰€å‘¨çŸ¥ï¼Œç°åœ¨çš„ä¸»æµçš„ä¼ ç»Ÿæ·±åº¦å­¦ä¹ æŠ€æœ¯éœ€è¦å¤§é‡çš„æ•°æ®æ¥è®­ç»ƒä¸€ä¸ªå¥½çš„æ¨¡å‹ã€‚ä¾‹å¦‚å…¸å‹çš„ MNIST åˆ†ç±»é—®é¢˜ï¼Œä¸€å…±æœ‰ 10 ä¸ªç±»ï¼ˆâ€œ0â€~â€œ9â€ï¼Œä¸€å…±10ç±»æ•°å­—ï¼‰ï¼Œè®­ç»ƒé›†ä¸€å…±æœ‰ 6000 ä¸ªæ ·æœ¬ï¼Œå¹³å‡ä¸‹æ¥æ¯ä¸ªç±»å¤§çº¦ 600 ä¸ªæ ·æœ¬ã€‚ä½†æ˜¯æˆ‘ä»¬æƒ³ä¸€ä¸‹æˆ‘ä»¬äººç±»è‡ªå·±ï¼Œæˆ‘ä»¬åŒºåˆ† 0 åˆ° 9 çš„æ•°å­—å›¾ç‰‡çš„æ—¶å€™éœ€è¦çœ‹ 6000 å¼ å›¾ç‰‡æ‰çŸ¥é“æ€ä¹ˆåŒºåˆ†å—ï¼Ÿå¾ˆæ˜¾ç„¶ï¼Œä¸éœ€è¦ï¼è¿™è¡¨æ˜å½“å‰çš„æ·±åº¦å­¦ä¹ æŠ€æœ¯å’Œæˆ‘ä»¬äººç±»æ™ºèƒ½å·®è·è¿˜æ˜¯å¾ˆå¤§çš„ï¼Œè¦æƒ³å¼¥è¡¥è¿™ä¸€å·®è·ï¼Œå°‘æ ·æœ¬å­¦ä¹ æ˜¯ä¸€ä¸ªå¾ˆå…³é”®çš„é—®é¢˜ã€‚å¦å¤–è¿˜æœ‰ä¸€ä¸ªé‡è¦åŸå› æ˜¯å¦‚æœæƒ³è¦æ„å»ºæ–°çš„æ•°æ®é›†ï¼Œè¿˜æ˜¯ä¸¾åˆ†ç±»æ•°æ®é›†ä¸ºä¾‹ï¼Œæˆ‘ä»¬éœ€è¦æ ‡è®°å¤§é‡çš„æ•°æ®ï¼Œä½†æ˜¯æœ‰çš„æ—¶å€™æ ‡è®°æ•°æ®é›†éœ€è¦æŸäº›é¢†åŸŸçš„ä¸“å®¶ï¼ˆä¾‹å¦‚åŒ»å­¦å›¾åƒçš„æ ‡è®°ï¼‰ï¼Œè¿™è´¹æ—¶åˆè´¹åŠ›ï¼Œå› æ­¤å¦‚æœæˆ‘ä»¬å¯ä»¥è§£å†³FSLé—®é¢˜ï¼Œåªéœ€è¦æ¯ä¸ªç±»æ ‡è®°å‡ å¼ å›¾ç‰‡å°±å¯ä»¥é«˜å‡†ç¡®ç‡çš„ç»™å‰©ä½™å¤§é‡å›¾ç‰‡è‡ªåŠ¨æ ‡è®°ã€‚è¿™ä¸¤æ–¹é¢çš„åŸå› éƒ½è®©FSLé—®é¢˜å¾ˆå¸å¼•äººã€‚æ€»ç»“ä¸€ä¸‹ï¼Œä¼ ç»Ÿçš„æ·±åº¦å­¦ä¹ é—®é¢˜å­˜åœ¨ä¸¤ä¸ªå¼Šç«¯ï¼š      ä¸å½“å‰äººè„‘æ™ºèƒ½å­˜åœ¨å·®è·ï¼Œå³äººè„‘æ— éœ€å¤§é‡æ ·æœ¬å³å¯å¾ˆå¥½çš„å®Œæˆåˆ†ç±»ç­‰ä»»åŠ¡ï¼Œè€Œæ·±åº¦ç¥ç»ç½‘ç»œä¸è¡Œï¼›        æŸäº›æƒ…å†µä¸‹äº§ç”Ÿå¤§é‡æ ‡è®°æ ·æœ¬ä»£ä»·å¾ˆå¤§ï¼Œåªèƒ½äº§ç”Ÿå¾ˆå°é‡çš„æ ‡è®°æ ·æœ¬ç”¨ä»¥å­¦ä¹ ã€‚  ä¸‹é¢æˆ‘ä»¬æ¥çœ‹ä¸€å¼ å›¾ï¼Œè¿™å¼ å›¾æ¥è‡ªè®ºæ–‡ã€ŠOptimization as a Model for Few-Shot Learningã€‹ï¼Œå·¦è¾¹æ˜¯è®­ç»ƒé›†ä¸€å…± 5 å¼ å›¾ç‰‡æ¥è‡ª 5 ä¸ªç±»ï¼Œæ¯ä¸ªç±»åªæœ‰1å¼ å›¾ç‰‡ã€‚å³è¾¹æ˜¯æµ‹è¯•é›†ï¼Œç†è®ºä¸Šå¯ä»¥æœ‰ä»»æ„å¤šä¸ªå›¾ç‰‡ç”¨äºæµ‹è¯•ï¼Œå›¾ä¸­åªç»™å‡ºäº†ä¸¤å¼ å®ä¾‹ã€‚å¦‚æœé‡‡ç”¨ä¼ ç»Ÿçš„æ·±åº¦å­¦ä¹ æ–¹æ³•ï¼Œå¿…é¡»èƒ½å¤Ÿæä¾›å¤§é‡ $D_{train}$ æ ·æœ¬å›¾åƒï¼Œæ¯”å¦‚ä¸Šå›¾ä¸­éœ€è¦æä¾›å¤§é‡é¸Ÿç±»ã€å¦å…‹ã€ç‹—ã€äººã€é’¢ç´çš„å›¾åƒï¼Œæ‰èƒ½è®­ç»ƒå‡ºä¸€ä¸ªæ¯”è¾ƒå¥½çš„æ·±åº¦ç¥ç»ç½‘ç»œï¼Œä½¿å¾—ç½‘ç»œèƒ½å¤Ÿä»¥è¾ƒé«˜çš„å‡†ç¡®ç‡åˆ†è¾¨ $D_{test}$ ä¸­çš„å›¾åƒã€‚ä½†æ˜¯å¦‚æœæ— æ³•æä¾›å¤§é‡å›¾åƒï¼Œé‚£ä¹ˆå°±ä¼šå‡ºç°ä¸¥é‡çš„è¿‡æ‹Ÿåˆï¼ˆover-fittingï¼‰é—®é¢˜ï¼Œå³å› ä¸ºè®­ç»ƒçš„æ ·æœ¬å¤ªå°‘äº†ï¼Œè®­ç»ƒå‡ºçš„æ¨¡å‹å¯èƒ½åœ¨è®­ç»ƒé›†ä¸Šæ•ˆæœè¿˜è¡Œï¼Œä½†æ˜¯åœ¨æµ‹è¯•é›†ä¸Šé¢ä¼šé­é‡ç¾éš¾æ€§çš„å´©å¡Œã€‚æˆ–è€…æ¢å¥è¯è¯´ï¼Œåªæœ‰ç»™æ¨¡å‹æä¾›è®­ç»ƒé›†ä¸­çš„å›¾ç‰‡æ—¶æ‰èƒ½æ­£ç¡®åˆ†ç±»ï¼Œæä¾›æµ‹è¯•é›†ä¸­å­˜åœ¨ä¸€å®šå·®å¼‚çš„ç›¸ä¼¼å›¾ç‰‡å°±æ— æ³•æ­£ç¡®åˆ†ç±»ã€‚å› æ­¤ï¼ŒFSLé—®é¢˜çš„å…³é”®æ˜¯è§£å†³è¿‡æ‹Ÿåˆ (overfitting) çš„é—®é¢˜ï¼Œä¸€èˆ¬å¯ä»¥é‡‡ç”¨å…ƒå­¦ä¹ çš„æ–¹æ³•æ¥è§£å†³FSLé—®é¢˜ã€‚åœ¨ FSL ä¸­æœ‰ä¸€ä¸ªæœ¯è¯­å«åš N-way K-shotï¼Œç®€å•çš„è¯´å°±æ˜¯æˆ‘ä»¬éœ€è¦åˆ†ç±»çš„æ ·æœ¬å±äº N ä¸ªç±»ä¸­ä¸€ç§ï¼Œä½†æ˜¯æˆ‘ä»¬æ¯ä¸ªç±»è®­ç»ƒé›†ä¸­çš„æ ·æœ¬åªæœ‰ K ä¸ªï¼Œå³ä¸€å…±åªæœ‰ N$\\cdot$K ä¸ªæ ·æœ¬çš„ç±»åˆ«æ˜¯å·²çŸ¥çš„ã€‚ä¸Šå›¾å°±æ˜¯ä¸€ä¸ª 5-way 1-shot çš„é—®é¢˜ã€‚2. å…ƒå­¦ä¹ æ–¹æ³•Meta-Learningå…ƒå­¦ä¹ åˆè¢«ç§°ä¸ºå­¦ä¼šå­¦ä¹ ï¼ˆLearn to learn)ï¼Œå…¶æ ¸å¿ƒæƒ³æ³•æ˜¯å…ˆå­¦ä¹ ä¸€ä¸ªå…ˆéªŒçŸ¥è¯†ï¼ˆpriorï¼‰ï¼Œè¿™ä¸ªå…ˆéªŒçŸ¥è¯†å¯¹è§£å†³ FSL é—®é¢˜ç‰¹åˆ«æœ‰å¸®åŠ©ã€‚ä»¥ä¸‹é¢è¿™å¼ å›¾ä¸ºä¾‹ï¼Œä¸ºäº†å­¦ä¹ å¦‚ä½•ä»å¾ˆå°‘çš„æ ·æœ¬ä¸­æ­£ç¡®çš„è¯†åˆ«åˆ†ç±»â€œç‹®å­â€å’Œâ€œç¢—â€ï¼ˆMeta-Testï¼‰ï¼Œé¦–å…ˆæä¾›ä¸€å †å…¶å®ƒä¸åŒç±»åˆ«çš„å›¾åƒï¼ˆMeta-Trainï¼‰ï¼Œå–‚ç»™ç¥ç»ç½‘ç»œè¿›è¡Œè®­ç»ƒï¼ŒæœŸæœ›å®ƒèƒ½å¤Ÿå­¦åˆ°åŒºåˆ†ä¸åŒç±»åˆ«çš„å…ˆéªŒçŸ¥è¯†ï¼Œç„¶åå½“æä¾›åŒ…å«ç‹®å­å’Œç¢—åœ¨å†…çš„ä»»åŠ¡æ—¶ï¼Œèƒ½å¤Ÿé€šè¿‡å°‘é‡çš„å¾®è°ƒï¼Œå¿«é€Ÿå¾—åˆ°åˆ†ç±»å‡†ç¡®çš„æ¨¡å‹ã€‚Meta-learning ä¸­æœ‰ä¸€ä¸ªæœ¯è¯­å« task ï¼Œæ¯”å¦‚ä¸Šé¢å›¾ç‰‡ï¼Œæ˜¯ä¸€ä¸ª 5-way 1-shot é—®é¢˜ï¼Œå…¶ä¸­æ¯ä¸€è¡Œ 5-way 1-shot å°±æ˜¯ä¸€ä¸ª taskï¼Œæˆ‘ä»¬éœ€è¦å…ˆå­¦ä¹ å¾ˆå¤šå¾ˆå¤šè¿™æ ·çš„ taskï¼Œç„¶åå†æ¥è§£å†³è¿™ä¸ªæ–°çš„ task ã€‚æœ€æœ€æœ€é‡è¦çš„ä¸€ç‚¹ï¼Œè¿™æ˜¯ä¸€ä¸ªæ–°çš„ taskï¼Œè¿™ä¸ªæ–°çš„ task ä¸­çš„ç±»åˆ«æ˜¯ä¹‹å‰æˆ‘ä»¬å­¦ä¹ è¿‡çš„ task ä¸­æ²¡æœ‰è§è¿‡çš„ï¼ åœ¨ Meta-learning ä¸­ä¹‹å‰å­¦ä¹ çš„ task æˆ‘ä»¬ç§°ä¸º meta-train taskï¼Œæˆ‘ä»¬é‡åˆ°çš„æ–°çš„ task ç§°ä¸º meta-test taskã€‚å› ä¸ºæ¯ä¸€ä¸ª task éƒ½æœ‰è‡ªå·±çš„è®­ç»ƒé›†å’Œæµ‹è¯•é›†ï¼Œå› æ­¤ä¸ºäº†ä¸å¼•èµ·æ··æ·†ï¼Œæˆ‘ä»¬æŠŠ task å†…éƒ¨çš„è®­ç»ƒé›†å’Œæµ‹è¯•é›†ä¸€èˆ¬ç§°ä¸º support set å’Œ query setã€‚  N-way K-shotï¼šæ ·æœ¬åŒ…å« N ä¸ªç±»ï¼Œæ¯ä¸ªç±»ä¸­çš„æ ·æœ¬åªæœ‰ K ä¸ªï¼Œä¸€å…±æœ‰ N$\\cdot$K ä¸ªæ ·æœ¬  task (meta-task)ï¼šä»»åŠ¡ï¼Œä¸€ä¸ªç‰¹å®šçš„ N-way K-shot çš„ä»»åŠ¡å°±æ˜¯ä¸€ä¸ª task  meta-trainï¼šå…ƒè®­ç»ƒ  meta-testï¼šå…ƒæµ‹è¯•  meta-train task: å…ƒè®­ç»ƒé˜¶æ®µçš„ä»»åŠ¡          support setï¼šå…ƒè®­ç»ƒé˜¶æ®µçš„è®­ç»ƒé›†      query setï¼šå…ƒè®­ç»ƒé˜¶æ®µçš„æµ‹è¯•é›†        meta-testï¼šå…ƒæµ‹è¯•é˜¶æ®µ          train setï¼šå…ƒæµ‹è¯•é˜¶æ®µçš„è®­ç»ƒé›†      test setï¼šå…ƒæµ‹è¯•é˜¶æ®µçš„æµ‹è¯•é›†      ä¸Šå›¾å±•ç¤ºäº† 2-way 4-shot çš„åˆ†ç±»é—®é¢˜ã€‚N=2ï¼ŒK=4ã€‚å¸Œæœ›å¾—åˆ°ä¸€ä¸ªæ¨¡å‹ï¼Œèƒ½å¤Ÿå¿«é€Ÿä»dogså’Œottersä¸­è¿›è¡Œè¯†åˆ«åŒºåˆ†ã€‚Few-shot Learning æ˜¯ Meta Learning åœ¨ç›‘ç£å­¦ä¹ é¢†åŸŸçš„åº”ç”¨ã€‚åœ¨ meta-training é˜¶æ®µï¼Œå°†æ•°æ®é›†åˆ†è§£ä¸ºä¸åŒçš„ taskï¼Œå»å­¦ä¹ ç±»åˆ«å˜åŒ–çš„æƒ…å†µä¸‹æ¨¡å‹çš„æ³›åŒ–èƒ½åŠ›ã€‚åœ¨ meta-testing é˜¶æ®µï¼Œé¢å¯¹å…¨æ–°çš„ç±»åˆ«ï¼Œä¸éœ€è¦å˜åŠ¨å·²æœ‰çš„æ¨¡å‹ï¼Œåªéœ€è¦é€šè¿‡ä¸€æ­¥æˆ–è€…å°‘æ•°å‡ æ­¥è®­ç»ƒï¼Œå°±å¯ä»¥å®Œæˆåˆ†ç±»ã€‚3. è®­ç»ƒè¿‡ç¨‹ä¸Šé¢å·²ç»åˆæ­¥ä»‹ç»äº† Meta-learning çš„æ¦‚å¿µå’Œæœ¯è¯­ï¼Œé‚£ä¹ˆç©¶ç«Ÿå…ƒå­¦ä¹ ä¸ä¼ ç»Ÿæ·±åº¦å­¦ä¹ çš„å·®å¼‚åœ¨å“ªé‡Œï¼Œä½¿å¾—å…ƒå­¦ä¹ èƒ½å¤Ÿèƒœä»» FSL é—®é¢˜å‘¢ï¼Ÿ3.1. æ·±åº¦å­¦ä¹ çš„è®­ç»ƒè¿‡ç¨‹ä»¥åˆ†ç±»ä»»åŠ¡ä¸ºä¾‹ï¼Œé¦–å…ˆä»‹ç»ä¸€ä¸‹ä¼ ç»Ÿæ·±åº¦å­¦ä¹ çš„è®­ç»ƒè¿‡ç¨‹ï¼Œå‡è®¾æˆ‘ä»¬è¦è®­ç»ƒä¸€ä¸ªæ·±åº¦ç¥ç»ç½‘ç»œå»åˆ†ç±»çŒ«å’Œç‹—ã€‚æˆ‘ä»¬éœ€è¦æ„é€ ä¸€ä¸ªæ•°æ®é›†ï¼Œå…¶ä¸­åŒ…å«ä¸€å †ç±»ï¼Œæ¯”å¦‚â€œè€è™â€ã€â€œèœ¥èœ´â€ã€â€œè‡ªè¡Œè½¦â€ã€â€œç°æœºâ€ã€ä»¥åŠâ€œçŒ«â€å’Œâ€œç‹—â€ç­‰ç­‰ã€‚æ¯ä¸ªç±»åŒ…å«5000ä¸ªä¸åŒçš„å›¾åƒï¼Œç„¶ååˆ’åˆ†ä¸ºä¸¤å¤§éƒ¨åˆ†ï¼Œ4000å¼ å›¾åƒä¸ºè®­ç»ƒé›†ï¼Œ1000å¼ å›¾åƒä¸ºæµ‹è¯•é›†ï¼š  å…ˆå–ä¸€ä¸ªå·²æ ‡è®°çš„å›¾åƒD1ï¼ˆâ€œDog no.1â€è¡¨ç¤ºç¬¬1å¼ ç‹—ç‹—å›¾åƒï¼‰ï¼Œè®­ç»ƒç½‘ç»œï¼Œæ­£å‘ä¼ æ’­å¯ä»¥è®¡ç®—å‡ºä¸€ä¸ªlossï¼Œåå‘ä¼ æ’­å¯ä»¥è®¡ç®—å‡ºlosså¯¹åŸå§‹æ¨¡å‹å‚æ•°çš„æ¢¯åº¦ï¼›  è®¾å®šä¸€ä¸ªå­¦ä¹ ç‡ï¼Œå¯ä»¥ç”¨ä¸Šè¿°è®¡ç®—å‡ºçš„æ¢¯åº¦çš„è´Ÿæ–¹å‘ä¹˜ä»¥å­¦ä¹ ç‡æ¥æ›´æ–°åŸå§‹æ¨¡å‹å‚æ•°ï¼›  å†å–ä¸€ä¸ªå·²æ ‡è®°å›¾åƒC5ï¼ˆâ€œCat no.5â€è¡¨ç¤ºç¬¬5å¼ çŒ«çŒ«å›¾åƒï¼‰ï¼Œé‡å¤ä¸Šè¿°è¿‡ç¨‹ï¼›  å¯¹è®­ç»ƒé›†ä¸­çš„æ‰€æœ‰å›¾åƒéƒ½è®­ç»ƒå®Œåï¼Œæ‹¿æµ‹è¯•é›†ä¸­çš„å›¾åƒæ¥æµ‹è¯•ï¼Œé€šè¿‡æ¨¡å‹ç»™å‡ºçš„åˆ†ç±»ä¸æµ‹è¯•å›¾åƒçš„æ ‡è®°åšå¯¹æ¯”ï¼Œç»Ÿè®¡å‡†ç¡®ç‡ã€‚å¯ä»¥çœ‹å‡ºï¼Œä¼ ç»Ÿçš„æ·±åº¦å­¦ä¹ è®­ç»ƒè¿‡ç¨‹ï¼Œæ˜¯æ‹¿è®­ç»ƒé›†çš„æ ·æœ¬å¯¹æ¨¡å‹å‚æ•°è¿›è¡Œæ›´æ–°ï¼Œç„¶åç”¨æµ‹è¯•é›†çš„æ ·æœ¬è¿›è¡Œæµ‹è¯•ã€‚3.2. å…ƒå­¦ä¹ çš„è®­ç»ƒè¿‡ç¨‹åŒæ ·ä»¥åˆ†ç±»ä»»åŠ¡ä¸ºä¾‹ï¼Œä»‹ç»å…ƒå­¦ä¹ çš„è®­ç»ƒè¿‡ç¨‹ï¼ŒåŒæ ·å‡è®¾æˆ‘ä»¬è¦è®­ç»ƒä¸€ä¸ªæ·±åº¦ç¥ç»ç½‘ç»œå»åˆ†ç±»çŒ«å’Œç‹—ï¼Œé¦–å…ˆæˆ‘ä»¬è¦æ„é€ ä¸€ä¸ªæ•°æ®é›†ï¼Œå…¶ä¸­åŒ…å«ä¸€å †ç±»ï¼Œæ¯”å¦‚â€œè€è™â€ã€â€œèœ¥èœ´â€ã€â€œè‡ªè¡Œè½¦â€ã€â€œç°æœºâ€ã€ä»¥åŠâ€œçŒ«â€å’Œâ€œç‹—â€ç­‰ç­‰ï¼Œä½†æ˜¯æ¯ç±»çš„å›¾åƒå¯èƒ½åªæœ‰20ä¸ªï¼ˆåŒºåˆ«äºä¹‹å‰çš„5000ä¸ªï¼‰ã€‚N-way K-shot é—®é¢˜çš„å…·ä½“è®­ç»ƒè¿‡ç¨‹å¦‚ä¸‹ï¼šé¦–å…ˆæä¾›ä¸€ä¸ª few-shot çš„æ•°æ®é›†ï¼Œè¯¥æ•°æ®é›†ä¸€èˆ¬åŒ…å«äº†å¾ˆå¤šçš„ç±»åˆ«ï¼Œæ¯ä¸ªç±»åˆ«ä¸­åˆåŒ…å«äº†å¾ˆå¤šä¸ªæ ·æœ¬ï¼ˆå›¾ç‰‡ï¼‰ã€‚å¯¹è®­ç»ƒé›†è¿›è¡Œåˆ’åˆ†ï¼Œéšæœºé€‰å‡ºè‹¥å¹²ç±»åˆ«ä½œä¸ºè®­ç»ƒé›†ï¼Œå‰©ä½™ç±»åˆ«ä½œä¸ºæµ‹è¯•é›†ï¼›meta-train é˜¶æ®µï¼š  åœ¨è®­ç»ƒé›†ä¸­éšæœºæŠ½å– N ä¸ªç±»ï¼Œæ¯ä¸ªç±» K ä¸ªæ ·æœ¬ï¼Œä¸ºæ”¯æŒé›†ï¼ˆsupport setï¼‰ï¼Œå‰©ä½™æ ·æœ¬ä¸ºé—®è¯¢é›†ï¼ˆquery setï¼‰ï¼›          åœ¨query set ä¸­ï¼Œå‰©ä½™æ ·æœ¬ä¸ä¸€å®šå…¨éƒ½è¦ç”¨åˆ°ï¼Œå¦‚ä¸‹å›¾åªç”¨äº†5ç±»ä¸­çš„2ç±»ï¼Œæ¯ç±»1ä¸ªæ ·æœ¬ï¼›      support set å’Œ query set æ„æˆä¸€ä¸ª taskï¼›        æ¯æ¬¡é‡‡æ ·ä¸€ä¸ª task è¿›è¡Œè®­ç»ƒï¼Œç§°ä¸ºä¸€ä¸ª episodeï¼›ä¸€æ¬¡æ€§é€‰å–è‹¥å¹²ä¸ªtaskï¼Œæ„æˆä¸€ä¸ªbatchï¼›  ä¸€æ¬¡ meta-train å¯ä»¥è®­ç»ƒå¤šå¹²ä¸ª batchï¼ˆæ¯”å¦‚10000ä¸ªï¼‰ï¼›  éå†æ‰€æœ‰ batch åå®Œæˆè®­ç»ƒã€‚meta-test é˜¶æ®µï¼š  åœ¨æµ‹è¯•é›†ä¸­éšæœºæŠ½å– N ä¸ªç±»åˆ«ï¼Œæ¯ä¸ªç±»åˆ« K ä¸ªæ ·æœ¬ï¼Œä½œä¸º train setï¼Œå‰©ä½™æ ·æœ¬ä½œä¸º test setï¼›  ç”¨ support set æ¥ fine-tune æ¨¡å‹ï¼›  ç”¨ test set æ¥æµ‹è¯•æ¨¡å‹ï¼ˆè¿™é‡Œçš„ test set å°±æ˜¯çœŸæ­£å¸Œæœ›æ¨¡å‹èƒ½å¤Ÿç”¨äºåˆ†ç±»çš„æ•°æ®ï¼‰ã€‚ä¸Šè¿°è®­ç»ƒè¿‡ç¨‹ä¸­ï¼Œæ¯æ¬¡è®­ç»ƒï¼ˆepisodeï¼‰éƒ½ä¼šé‡‡æ ·å¾—åˆ°ä¸åŒ taskï¼Œæ‰€ä»¥æ€»ä½“æ¥çœ‹ï¼Œè®­ç»ƒåŒ…å«äº†ä¸åŒçš„ç±»åˆ«ç»„åˆï¼Œè¿™ç§æœºåˆ¶ä½¿å¾—æ¨¡å‹å­¦ä¼šä¸åŒ task ä¸­çš„å…±æ€§éƒ¨åˆ†ï¼Œæ¯”å¦‚å¦‚ä½•æå–é‡è¦ç‰¹å¾åŠæ¯”è¾ƒæ ·æœ¬ç›¸ä¼¼ç­‰ï¼Œå¿˜æ‰ task ä¸­ task ç›¸å…³éƒ¨åˆ†ã€‚é€šè¿‡è¿™ç§å­¦ä¹ æœºåˆ¶å­¦åˆ°çš„æ¨¡å‹ï¼Œåœ¨é¢å¯¹æ–°çš„æœªè§è¿‡çš„ task æ—¶ï¼Œä¹Ÿèƒ½è¾ƒå¥½åœ°è¿›è¡Œåˆ†ç±»ã€‚åœ¨ä¸Šè¿°è¿‡ç¨‹ä¸­ï¼Œä¸åŒçš„å…ƒå­¦ä¹ ç­–ç•¥æœ‰ä¸åŒçš„è®­ç»ƒæ–¹æ³•ï¼Œå¦‚ MAMLã€FOMAMLã€Reptile ç­‰ã€‚åœ¨åæ–‡ä¸­è¯¦ç»†è§£è¯»ã€‚4. å‚è€ƒæ–‡çŒ®[1]  CaoChengtai. Few-shot learningï¼ˆå°‘æ ·æœ¬å­¦ä¹ ï¼‰å’Œ Meta-learningï¼ˆå…ƒå­¦ä¹ ï¼‰æ¦‚è¿°."
  },
  
  {
    "title": "æ·±åº¦å­¦ä¹ åŸºç¡€ï¼ˆPyTorchçš„æ•°æ®é›†ï¼‰",
    "url": "/posts/deep-learning-basic-dataloader/",
    "categories": "Academic, Knowledge",
    "tags": "deep learning, python, pytorch",
    "date": "2020-06-16 16:24:19 +0800",
    





    
    "snippet": "æœ¬æ–‡ä»‹ç»äº† Pytorch ä¸­é’ˆå¯¹è®¡ç®—æœºè§†è§‰æ–¹é¢çš„åŸºæœ¬æ•°æ®åº“ç±»Datasetï¼ŒåŸºæœ¬çš„æ‰‹å†™æ•°å­—æ•°æ®åº“MNISTï¼Œä»¥åŠæ•°æ®åº“åŠ è½½å‡½æ•° DataLoaderã€‚  1. torchvision  2. Dataset          2.1. é»˜è®¤ç±»      2.2. è‡ªå®šä¹‰ç±»        3. DataLoader  4. MNIST  5. å‚è€ƒæ–‡çŒ®1. torchvisiontorchv...",
    "content": "æœ¬æ–‡ä»‹ç»äº† Pytorch ä¸­é’ˆå¯¹è®¡ç®—æœºè§†è§‰æ–¹é¢çš„åŸºæœ¬æ•°æ®åº“ç±»Datasetï¼ŒåŸºæœ¬çš„æ‰‹å†™æ•°å­—æ•°æ®åº“MNISTï¼Œä»¥åŠæ•°æ®åº“åŠ è½½å‡½æ•° DataLoaderã€‚  1. torchvision  2. Dataset          2.1. é»˜è®¤ç±»      2.2. è‡ªå®šä¹‰ç±»        3. DataLoader  4. MNIST  5. å‚è€ƒæ–‡çŒ®1. torchvisiontorchvision æ˜¯ PyTorch ä¸­ä¸“é—¨ç”¨æ¥å¤„ç†å›¾åƒçš„åº“ï¼ŒPyTorch å®˜ç½‘çš„å®‰è£…æ•™ç¨‹ä¹Ÿä¼šè®©ä½ å®‰è£…ä¸Šè¿™ä¸ªåŒ…ã€‚è¿™ä¸ªåŒ…ä¸­æœ‰å››ä¸ªå¤§ç±»ã€‚  torchvision.datasets  torchvision.models  torchvision.transforms  torchvision.utilsè¿™é‡Œæˆ‘ä»¬ä¸»è¦ä»‹ç»å‰ä¸‰ä¸ªã€‚torchvision.datasets æ˜¯ç”¨æ¥è¿›è¡Œæ•°æ®åŠ è½½çš„ï¼ŒPyTorchå›¢é˜Ÿåœ¨è¿™ä¸ªåŒ…ä¸­å¸®æˆ‘ä»¬æå‰å¤„ç†å¥½äº†å¾ˆå¤šå¾ˆå¤šå›¾ç‰‡æ•°æ®é›†ã€‚å‚è€ƒPyTorchä¸­æ–‡æ–‡æ¡£ä¸­çš„ç›¸å…³ä»‹ç»ã€‚  MNIST  COCO  Captions  Detection  LSUN  ImageFolder  Imagenet-12  CIFAR  STL10  SVHN  PhotoTouræˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨è¿™äº›æ•°æ®é›†ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼šmnist_train_data = torchvision.datasets.MNIST('mnist/', train=True, download=True, transform=ToTensor())train_loader = torch.utils.data.DataLoader(mnist_train_data, batch_size=16, shuffle=True)torchvision.datasets æ˜¯ torch.utils.data.Dataset çš„ä¸€ä¸ªå­ç±»ï¼Œæ‰€ä»¥ä»–ä»¬ä¹Ÿå¯ä»¥é€šè¿‡ torch.utils.data.DataLoader ä½¿ç”¨å¤šçº¿ç¨‹ï¼ˆpythonçš„å¤šè¿›ç¨‹ï¼‰ã€‚æ¯”å¦‚torch.utils.data.DataLoader(coco_cap, batch_size=args.batchSize, shuffle=True, num_workers=args.nThreads)2. Dataset2.1. é»˜è®¤ç±»torch.utils.data.Dataset æ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œæ˜¯ Pytorch ä¸­å›¾åƒæ•°æ®é›†ä¸­æœ€ä¸ºé‡è¦çš„ä¸€ä¸ªç±»ï¼Œä¹Ÿæ˜¯ Pytorch ä¸­æ‰€æœ‰æ•°æ®é›†åŠ è½½ç±»ä¸­åº”è¯¥ç»§æ‰¿çš„çˆ¶ç±»ã€‚ç”¨æˆ·æƒ³è¦åŠ è½½è‡ªå®šä¹‰çš„æ•°æ®å¿…é¡»ç»§æ‰¿è¿™ä¸ªç±»ï¼Œå¹¶ä¸”è¦†å†™å…¶ä¸­çš„ä¸¤ä¸ªæ–¹æ³•ï¼š      __len__ï¼šå®ç° len(dataset) è¿”å›æ•´ä¸ªæ•°æ®é›†çš„å¤§å°ã€‚        __getitem__ï¼šç”¨æ¥è·å–ä¸€äº›ç´¢å¼•çš„æ•°æ®ï¼Œä½¿ dataset[i] è¿”å›æ•°æ®é›†ä¸­ç¬¬ i ä¸ªæ ·æœ¬ã€‚  ä¸è¦†å†™è¿™ä¸¤ä¸ªæ–¹æ³•ä¼šç›´æ¥è¿”å›é”™è¯¯ã€‚è¿™ä¸ªç±»å…¶å®ä¹Ÿå°±æ˜¯èµ·åˆ°äº†å°è£…æˆ‘ä»¬åŠ è½½å‡½æ•°çš„ä½œç”¨ï¼Œåœ¨ç»§æ‰¿äº†è¿™ä¸ª Dataset ç±»ä¹‹åï¼Œæˆ‘ä»¬éœ€è¦å®ç°çš„æ ¸å¿ƒåŠŸèƒ½ä¾¿æ˜¯ __getitem__()å‡½æ•°ï¼Œ__getitem__() æ˜¯ Python ä¸­ç±»çš„é»˜è®¤æˆå‘˜å‡½æ•°ï¼Œæˆ‘ä»¬é€šè¿‡å®ç°è¿™ä¸ªæˆå‘˜å‡½æ•°å®ç°å¯ä»¥é€šè¿‡ç´¢å¼•æ¥è¿”å›å›¾åƒæ•°æ®çš„åŠŸèƒ½ã€‚é‚£ä¹ˆæ€ä¹ˆå¾—åˆ°å›¾åƒä»è€Œå»è¿”å›å‘¢ï¼Ÿå½“ç„¶ä¸ä¼šç›´æ¥å°†å›¾åƒæ•°æ®åŠ è½½åˆ°å†…å­˜ä¸­ï¼Œç›¸åæˆ‘ä»¬åªéœ€è¦å¾—åˆ°å›¾åƒçš„åœ°å€å°±è¶³å¤Ÿäº†ï¼Œç„¶ååœ¨è°ƒç”¨çš„æ—¶å€™é€šè¿‡ä¸åŒçš„è¯»å–æ–¹å¼è¯»å–å³å¯ã€‚ä¸åŒçš„è¯»å–æ–¹å¼å‚è§ æ­¤å¤„ã€‚2.2. è‡ªå®šä¹‰ç±»æ›´å¤šçš„æ—¶å€™æˆ‘ä»¬éœ€è¦ä½¿ç”¨è‡ªå·±çš„æ•°æ®é›†ï¼Œæ•°æ®é›†çš„å½¢å¼å¯èƒ½ä¸ºåŸå§‹å›¾ç‰‡ã€å¯èƒ½ä¸ºæ•°ç»„ã€‚ä¸‹é¢ä»¥åŸå§‹å›¾ç‰‡ä¸ºä¾‹åˆ›å»ºè‡ªå·±çš„æ•°æ®é›†ã€‚è¦åˆ›å»ºç”¨äºåˆ†ç±»çš„è‡ªå®šä¹‰æ•°æ®é›†ï¼Œéœ€è¦å‡†å¤‡ä¸¤éƒ¨åˆ†å†…å®¹ï¼š      å›¾ç‰‡æ•°æ®é›†        æ ‡ç­¾ä¿¡æ¯ï¼ˆå¯ç”¨txtæ–‡ä»¶ã€csvæ–‡ä»¶è®°å½•ï¼Œæˆ–é€šè¿‡å›¾ç‰‡æ–‡ä»¶ååˆ’åˆ†ï¼‰  ä¸‹é¢æ˜¯è‡ªå®šä¹‰ä¸€ä¸ªDatasetçš„ä»£ç ç¤ºä¾‹class CustomDataset(torch.utils.data.Dataset):# Need to inherit `data.Dataset`    def __init__(self):        # TODO        # 1. Initialize file path or list of file names.        pass    def __getitem__(self, index):        # TODO        # 1. Read one data from file (e.g. using numpy.fromfile, PIL.Image.open).        # 2. Preprocess the data (e.g. torchvision.Transform).        # 3. Return a data pair (e.g. image and label).        #è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œç¬¬ä¸€æ­¥ï¼šread one dataï¼Œæ˜¯ä¸€ä¸ªdata        pass    def __len__(self):        # You should change 0 to the total size of your dataset.        return 0æŒ‰ç…§ä¸Šè¿°æ¨¡æ¿å®šä¹‰ä¸€ä¸ªè‡ªå®šä¹‰æ•°æ®ç±»ï¼ŒåŸå§‹æ•°æ®ä¸º .jpg å›¾åƒã€‚é‡‡ç”¨æ–‡ä»¶åæ¥å®šä¹‰æ ‡ç­¾ä¿¡æ¯ï¼Œå›¾åƒæ–‡ä»¶çš„å‘½åè§„èŒƒä¸ºï¼š[label_no].[label_name].[image_num].jpg # '0.satellite.01.jpg' with label no '0' and label name 'satellite'å³æ–‡ä»¶åç”± . åˆ†éš”ï¼Œç¬¬ä¸€ä¸ªæ•°å­—ä¸º label çš„ç¼–å·ï¼Œç¬¬äºŒä¸ªå­—ç¬¦ä¸²ä¸ºæ ‡ç­¾åç§°ã€‚é‡‡ç”¨ scikit_image åŒ…è¯»å–å›¾åƒï¼Œåˆ™è‡ªå®šä¹‰æ•°æ®ç±»å¦‚ä¸‹# DATA.pyimport numpy as npfrom skimage import io  # scikit-imagefrom torch.utils.data import Datasetimport osos.environ['KMP_DUPLICATE_LIB_OK']='True'def open_image(image_path):    return io.imread(image_path)  # load image by scikit-imageclass DATA(Dataset):    def __init__(self, root, train=True, augment=False, transform=None):        self.train = train        self.augment = augment        self.transform = transform        if self.train:            self.data = np.array([                x.path for x in os.scandir(root + \"train\\\\\")                if x.name.endswith(\".jpg\") or x.name.endswith(\".JPG\")            ])            filename = np.array([                os.path.split(x.path)[1] for x in os.scandir(root + \"train\\\\\")                if x.name.endswith(\".jpg\") or x.name.endswith(\".JPG\")            ])            self.label = np.array([int(x.split('.', 1)[0]) for x in filename])        else:            self.data = np.array([                x.path for x in os.scandir(root + \"test\\\\\")                if x.name.endswith(\".jpg\") or x.name.endswith(\".JPG\")            ])            filename = np.array([                os.path.split(x.path)[1] for x in os.scandir(root + \"test\\\\\")                if x.name.endswith(\".jpg\") or x.name.endswith(\".JPG\")            ])            self.label = np.array([int(x.split('.', 1)[0]) for x in filename])    def __getitem__(self, index):        label = self.label[index]        image = open_image(self.data[index])        if self.augment:            image = self.augment(image)  # augment images        if self.transform is not None:            image = self.transform(image)  # transform images        return image, label    def __len__(self):        return len(self.data)  # return image numberåœ¨åç»­ä½¿ç”¨æ•°æ®é›†æ—¶ï¼Œå½¢å¼å¦‚ä¸‹for batch_index, (data, target) in dataloader:        if use_cuda:            data, target = data.cuda(), target.cuda()        data, target = Variable(data, volatile=True), Variable(target)ä¸ºä»€ä¹ˆç›´æ¥èƒ½ç”¨ for batch_index, (data, target) In dataloader è¿™æ ·çš„è¯­å¥å‘¢ï¼Ÿå…¶å®è¿™ä¸ªè¯­å¥è¿˜å¯ä»¥è¿™ä¹ˆå†™ï¼šfor batch_index, batch in train_loader    data, target = batchè¿™æ ·å°±å¥½ç†è§£äº†ï¼Œå› ä¸ºè¿™ä¸ªè¿­ä»£å™¨æ¯ä¸€æ¬¡å¾ªç¯æ‰€å¾—çš„batché‡Œé¢è£…çš„ä¸œè¥¿ï¼Œå°±æ˜¯æˆ‘åœ¨ __getitem__ æ–¹æ³•æœ€å return å›æ¥çš„ï¼Œæ‰€ä»¥æƒ³åœ¨è®­ç»ƒæˆ–è€…æµ‹è¯•çš„æ—¶å€™è¿˜å¾—åˆ°å…¶ä»–ä¿¡æ¯çš„è¯ï¼Œå°±å»å¢åŠ ä¸€äº›è¿”å›å€¼å³å¯ï¼Œåªè¦æ˜¯èƒ½returnå‡ºæ¥çš„ï¼Œå°±èƒ½åœ¨æ¯ä¸ªbatchä¸­è¯»å–åˆ°ã€‚3. DataLoadertorch.utils.data.DataLoader  çš„æ ¸å¿ƒå‚æ•°åŒ…æ‹¬[1]ï¼š      datasetï¼šDatasetï¼Œè¾“å…¥æ•°æ®é›†ï¼›        batch_sizeï¼šintï¼Œæ¯æ‰¹åŠ è½½å¤šå°‘æ ·æœ¬ï¼Œdefault=1ï¼›        shuffleï¼šboolï¼Œæ˜¯å¦æ‰“ä¹±é¡ºåºï¼Œdefault=Falseï¼›        samplerï¼šSamplerï¼Œå®šä¹‰ä»æ•°æ®é›†ä¸­åŠ è½½æ ·æœ¬çš„ç­–ç•¥ï¼Œå¦‚æœå®šä¹‰ï¼Œåˆ™ shuffle å¿…é¡»è®¾ä¸º Falseï¼›        num_workersï¼šintï¼Œé‡‡ç”¨å¤šå°‘ä¸ªå­è¿›ç¨‹åŠ è½½æ•°æ®é›†ï¼Œ0è¡¨ç¤ºä»…åœ¨ä¸»è¿›ç¨‹åŠ è½½ï¼Œdefault = 0ï¼›    pin_memoryï¼šå¦‚æœè®¾ä¸º Trueï¼ŒDataLoader ä¼šå°† tensors ä¼šå°†æ‹·è´åˆ° CUDA çš„é”é¡µå†…å­˜ä¸­ï¼Œç„¶åå†è¿”å›å®ƒä»¬ï¼Œdefault = Falseï¼›  drop_lastï¼šè®¾ä¸º True æ‰”æ‰æœ€åä¸€ä¸ªä¸å®Œæ•´çš„ batchã€‚å¦‚æœæ•°æ®é›†å¤§å°æ— æ³•è¢« batch_size æ•´é™¤ï¼Œé‚£ä¹ˆæœ€åä¸€æŠ«æ•°æ®ä¸å®Œæ•´ï¼Œdefault = Falseï¼›num_workers è¿™ä¸ªå‚æ•°å¿…é¡»å¤§äºç­‰äº0ï¼Œ0çš„è¯è¡¨ç¤ºæ•°æ®å¯¼å…¥åœ¨ä¸»è¿›ç¨‹ä¸­è¿›è¡Œï¼Œå…¶ä»–å¤§äº0çš„æ•°è¡¨ç¤ºé€šè¿‡å¤šä¸ªè¿›ç¨‹æ¥å¯¼å…¥æ•°æ®ï¼Œå¯ä»¥åŠ å¿«æ•°æ®å¯¼å…¥é€Ÿåº¦ã€‚pin_memory å°±æ˜¯é”é¡µå†…å­˜ï¼Œåˆ›å»ºDataLoaderæ—¶ï¼Œè®¾ç½® pin_memory=Trueï¼Œåˆ™æ„å‘³ç€ç”Ÿæˆçš„Tensoræ•°æ®æœ€å¼€å§‹æ˜¯å±äºå†…å­˜ä¸­çš„é”é¡µå†…å­˜ï¼Œè¿™æ ·å°†å†…å­˜çš„Tensorè½¬ä¹‰åˆ°GPUçš„æ˜¾å­˜å°±ä¼šæ›´å¿«ä¸€äº›ã€‚ä¸»æœºä¸­çš„å†…å­˜ï¼Œæœ‰ä¸¤ç§å­˜åœ¨æ–¹å¼ï¼Œä¸€æ˜¯é”é¡µï¼ŒäºŒæ˜¯ä¸é”é¡µï¼Œé”é¡µå†…å­˜å­˜æ”¾çš„å†…å®¹åœ¨ä»»ä½•æƒ…å†µä¸‹éƒ½ä¸ä¼šä¸ä¸»æœºçš„è™šæ‹Ÿå†…å­˜è¿›è¡Œäº¤æ¢ï¼ˆæ³¨ï¼šè™šæ‹Ÿå†…å­˜å°±æ˜¯ç¡¬ç›˜ï¼‰ï¼Œè€Œä¸é”é¡µå†…å­˜åœ¨ä¸»æœºå†…å­˜ä¸è¶³æ—¶ï¼Œæ•°æ®ä¼šå­˜æ”¾åœ¨è™šæ‹Ÿå†…å­˜ä¸­ã€‚è€Œæ˜¾å¡ä¸­çš„æ˜¾å­˜å…¨éƒ¨æ˜¯é”é¡µå†…å­˜ï¼å½“è®¡ç®—æœºçš„å†…å­˜å……è¶³çš„æ—¶å€™ï¼Œå¯ä»¥è®¾ç½®pin_memory=Trueã€‚å½“ç³»ç»Ÿå¡ä½ï¼Œæˆ–è€…äº¤æ¢å†…å­˜ä½¿ç”¨è¿‡å¤šçš„æ—¶å€™ï¼Œè®¾ç½®pin_memory=Falseã€‚å› ä¸ºpin_memoryä¸ç”µè„‘ç¡¬ä»¶æ€§èƒ½æœ‰å…³ï¼Œpytorchå¼€å‘è€…ä¸èƒ½ç¡®ä¿æ¯ä¸€ä¸ªç‚¼ä¸¹ç©å®¶éƒ½æœ‰é«˜ç«¯è®¾å¤‡ï¼Œå› æ­¤pin_memoryé»˜è®¤ä¸ºFalseã€‚4. MNISTä¸‹é¢ä»¥æ‰‹å†™æ•°å­—æ•°æ®é›†MNISTä¸ºä¾‹ï¼ˆä»‹ç»å‚è€ƒæ­¤å¤„ï¼‰ï¼Œé¦–å…ˆè·å–è®­ç»ƒé›†å’Œæµ‹è¯•é›†ï¼Œåœ¨æ­¤ä¸‹è½½ã€‚ä¸‹è½½å¾—åˆ°ä»¥ä¸‹å››ä¸ªæ–‡ä»¶ï¼Œå³ä¸ºæ•°æ®é›†train-images-idx3-ubyte.gz: training set images (9912422 bytes)train-labels-idx1-ubyte.gz: training set labels (28881 bytes)t10k-images-idx3-ubyte.gz:  test set images (1648877 bytes)t10k-labels-idx1-ubyte.gz:  test set labels (4542 bytes)é‡‡ç”¨ä»¥ä¸‹ä»£ç å¯ä»¥å¾—åˆ°åŸå§‹å›¾ç‰‡# extractimage.pyimport osfrom skimage import ioimport torchvision.datasets.mnist as mnistimport numpy root = \"./mnist/MNIST/raw/\" # replace directory according to yourself train_set = (    mnist.read_image_file(os.path.join(root, 'train-images-idx3-ubyte')),    mnist.read_label_file(os.path.join(root, 'train-labels-idx1-ubyte'))) test_set = (    mnist.read_image_file(os.path.join(root,'t10k-images-idx3-ubyte')),    mnist.read_label_file(os.path.join(root,'t10k-labels-idx1-ubyte'))) print(\"train set:\", train_set[0].size())print(\"test set:\", test_set[0].size()) def convert_to_img(train=True):    if(train):        f = open(root + 'train.txt', 'w')        data_path = root + '/train/'    else:        f = open(root + 'test.txt', 'w')        data_path = root + '/test/'    if (not os.path.exists(data_path)):        os.makedirs(data_path)    for i, (img, label) in enumerate(zip(test_set[0], test_set[1])):        img_path = data_path + str(int(label)) + '.' + str(i) + '.jpg'        io.imsave(img_path, img.numpy())        f.write(img_path + ' ' + str(label) + '\\n')    f.close() convert_to_img(True)convert_to_img(False)å¾—åˆ°çš„åŸå§‹å›¾åƒå¦‚ä¸‹é‡‡ç”¨ä»¥ä¸‹ä»£ç å³å¯è¿›è¡Œè®­ç»ƒ# MNISTNET.pyfrom __future__ import print_functionimport argparseimport torchimport torch.nn as nnimport torch.nn.functional as Fimport torch.optim as optimfrom torchvision import datasets, transformsfrom DATA import DATAfrom skimage import ioimport numpy as npclass NUMNET(nn.Module):    def __init__(self):        super(NUMNET, self).__init__()        self.conv1 = nn.Conv2d(1, 20, 5, 1)        self.conv2 = nn.Conv2d(20, 50, 5, 1)        self.fc1 = nn.Linear(4*4*50, 500)        self.fc2 = nn.Linear(500, 10)    def forward(self, x): # &lt;- (1,28,28) MNIST image size        x = F.relu(self.conv1(x)) # -&gt; (20, 24, 24)        x = F.max_pool2d(x, 2, 2) # -&gt; (20, 12, 12)        x = F.relu(self.conv2(x)) # -&gt; (50, 8, 8)        x = F.max_pool2d(x, 2, 2) # -&gt; (50, 4, 4)        x = x.view(-1, 4*4*50) # -&gt; (1, 50*4*4)        x = F.relu(self.fc1(x)) # -&gt; (1, 500)        x = self.fc2(x)# -&gt; (500, 10)        return F.log_softmax(x, dim=1) # dim=0 makes sum of column values to be 1, dim=1 makes row ...   def train(args, model, device, train_loader, optimizer, epoch):    model.train() # enter train mode (used for batch normlization and dropout)    for batch_idx, (data, target) in enumerate(train_loader):        data, target = data.to(device), target.long().to(device)        optimizer.zero_grad()        output = model(data)        loss = F.nll_loss(output, target) # must have log_softmax as last        loss.backward()        optimizer.step()        if batch_idx % args.log_interval == 0:            print('Train Epoch: {} [{}/{} ({:.0f}%)]\\tLoss: {:.6f}'.format(                epoch, batch_idx * len(data), len(train_loader.dataset),                100. * batch_idx / len(train_loader), loss.item()))def test(args, model, device, test_loader):    model.eval()    test_loss = 0    correct = 0    with torch.no_grad():        for data, target in test_loader:            data, target = data.to(device), target.to(device)            output = model(data)            test_loss += F.nll_loss(output, target.long(), reduction='sum').item() # sum up batch loss            pred = output.argmax(dim=1, keepdim=True) # get the index of the max log-probability            correct += pred.eq(target.view_as(pred)).sum().item()    test_loss /= len(test_loader.dataset)    print('Test set: Average loss: {:.4f}, Accuracy: {}/{} ({:.0f}%)\\n'.format(        test_loss, correct, len(test_loader.dataset),        100. * correct / len(test_loader.dataset)))def main():    # Training settings    parser = argparse.ArgumentParser(description='PyTorch MNIST Example')    parser.add_argument('--batch-size', type=int, default=64, metavar='N',                        help='input batch size for training (default: 64)')    parser.add_argument('--test-batch-size', type=int, default=1000, metavar='N',                        help='input batch size for testing (default: 1000)')    parser.add_argument('--epochs', type=int, default=50, metavar='N',                        help='number of epochs to train (default: 10)')    parser.add_argument('--lr', type=float, default=0.01, metavar='LR',                        help='learning rate (default: 0.01)')    parser.add_argument('--momentum', type=float, default=0.5, metavar='M',                        help='SGD momentum (default: 0.5)')    parser.add_argument('--no-cuda', action='store_true', default=False,                        help='disables CUDA training')    parser.add_argument('--seed', type=int, default=1, metavar='S',                        help='random seed (default: 1)')    parser.add_argument('--log-interval', type=int, default=10, metavar='N',                        help='how many batches to wait before logging training status')    parser.add_argument('--save-model', action='store_true', default=False,                        help='For Saving the current Model')    args = parser.parse_args()    use_cuda = not args.no_cuda and torch.cuda.is_available()    device = torch.device(\"cuda\" if use_cuda else \"cpu\")    torch.manual_seed(args.seed) # set random seed to make network reproduce same results    if use_cuda:        torch.cuda.manual_seed(args.seed)    kwargs = {'num_workers': 2, 'pin_memory': True} if use_cuda else {}    root = \".\\\\mnist\\MNIST\\\\raw\\\\\" # directory where the above images are extracted, i.e. 'train' and 'test' folders    train_mean = 0.1307 # given by mnist providers    train_std = 0.3081 # given by mnist providers    transform = transforms.Compose([transforms.ToTensor(), transforms.Normalize((train_mean,), (train_std,))])    train_loader = torch.utils.data.DataLoader(        DATA(root, train=True, transform=transform),        batch_size=args.batch_size, shuffle=True, **kwargs)    test_loader = torch.utils.data.DataLoader(        DATA(root, train=False, transform=transform),        batch_size=args.test_batch_size, shuffle=True, **kwargs)    model = NUMNET().to(device)    optimizer = optim.SGD(model.parameters(), lr=args.lr, momentum=args.momentum)    for epoch in range(1, args.epochs + 1):        train(args, model, device, train_loader, optimizer, epoch)        test(args, model, device, test_loader)    if (args.save_model):        torch.save(model.state_dict(),\"mnist_cnn.pt\")       if __name__ == '__main__':    main()è®­ç»ƒæ‰“å°ä¿¡æ¯å¦‚ä¸‹Train Epoch: 1 [0/10000 (0%)]   Loss: 2.304347Train Epoch: 1 [640/10000 (6%)] Loss: 2.240660Train Epoch: 1 [1280/10000 (13%)]       Loss: 2.177136Train Epoch: 1 [1920/10000 (19%)]       Loss: 1.999795Train Epoch: 1 [2560/10000 (25%)]       Loss: 1.730417Train Epoch: 1 [3200/10000 (32%)]       Loss: 1.335797Train Epoch: 1 [3840/10000 (38%)]       Loss: 0.853206Train Epoch: 1 [4480/10000 (45%)]       Loss: 0.866024Train Epoch: 1 [5120/10000 (51%)]       Loss: 0.649082Train Epoch: 1 [5760/10000 (57%)]       Loss: 0.667902Train Epoch: 1 [6400/10000 (64%)]       Loss: 0.581703Train Epoch: 1 [7040/10000 (70%)]       Loss: 0.314934Train Epoch: 1 [7680/10000 (76%)]       Loss: 0.493458Train Epoch: 1 [8320/10000 (83%)]       Loss: 0.477450Train Epoch: 1 [8960/10000 (89%)]       Loss: 0.652692Train Epoch: 1 [9600/10000 (96%)]       Loss: 0.406439......5. å‚è€ƒæ–‡çŒ®[1]  cdyè‰³0917. Pytorchå­¦ä¹ ï¼ˆä¸‰ï¼‰å®šä¹‰è‡ªå·±çš„æ•°æ®é›†åŠåŠ è½½è®­ç»ƒ.[2]  teeyohuang. Pytorchæ‰“æ€ªè·¯ï¼ˆä¸‰ï¼‰Pytorchåˆ›å»ºè‡ªå·±çš„æ•°æ®é›†1.[3]  Vincent Dumoulin, Francesco Visin. A guide to convolution arithmetic for deep learning (Github).[4] çŸ¥ä¹. PyTorch ä¸­ï¼Œnn ä¸ nn.functional æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ.[5]  PyTorch. MaxPool2d.[6]  PyTorch. nn.Linear."
  },
  
  {
    "title": "æ·±åº¦å­¦ä¹ åŸºç¡€ï¼ˆPyTorchçš„CNNç»„æˆï¼‰",
    "url": "/posts/deep-learning-basic-conv2d/",
    "categories": "Academic, Knowledge",
    "tags": "python, pytorch, deep learning",
    "date": "2020-06-14 16:24:19 +0800",
    





    
    "snippet": "æœ¬æ–‡ä»‹ç»äº†æ·±åº¦å­¦ä¹ ä¸­ï¼Œå·ç§¯ç½‘ç»œçš„åŸºæœ¬çŸ¥è¯†ï¼ŒåŒ…æ‹¬2då·ç§¯å±‚ã€æ± åŒ–å±‚ã€çº¿æ€§å±‚ã€softmax æ¿€æ´»å‡½æ•°ã€äº¤å‰ç†µæŸå¤±å‡½æ•°ç­‰ï¼Œå¹¶ç»“åˆå®ƒä»¬åœ¨ Pytorch ä¸­çš„å®šä¹‰å’Œå®ç°è¿›è¡Œè¯´æ˜ã€‚  1. å±‚          1.1. Conv2d                  1.1.1. dilation          1.1.2. padding                    1.2. Ma...",
    "content": "æœ¬æ–‡ä»‹ç»äº†æ·±åº¦å­¦ä¹ ä¸­ï¼Œå·ç§¯ç½‘ç»œçš„åŸºæœ¬çŸ¥è¯†ï¼ŒåŒ…æ‹¬2då·ç§¯å±‚ã€æ± åŒ–å±‚ã€çº¿æ€§å±‚ã€softmax æ¿€æ´»å‡½æ•°ã€äº¤å‰ç†µæŸå¤±å‡½æ•°ç­‰ï¼Œå¹¶ç»“åˆå®ƒä»¬åœ¨ Pytorch ä¸­çš„å®šä¹‰å’Œå®ç°è¿›è¡Œè¯´æ˜ã€‚  1. å±‚          1.1. Conv2d                  1.1.1. dilation          1.1.2. padding                    1.2. MaxPool2d      1.3. Linear        2. æ¿€æ´»å‡½æ•°          2.1. conv2d      2.2. softmax      2.3. log_softmax        3. æŸå¤±å‡½æ•°          3.1. CrossEntropyLoss      3.2. NLLLoss        4. å‚è€ƒæ–‡çŒ®1. å±‚1.1. Conv2dnn.Conv2d çš„è¾“å…¥ä¸º (batch_size, channel, height, width)ã€‚nn.Conv2d çš„å‚æ•°åŒ…æ‹¬[1]ï¼š  in_channelsï¼šintï¼Œè¾“å…¥å›¾ç‰‡çš„é€šé“æ•°ï¼ˆå½©è‰²å›¾åƒ=3ï¼Œç°åº¦å›¾åƒ=1ï¼‰ï¼›  out_channelsï¼šintï¼Œå·ç§¯è¾“å‡ºå›¾ç‰‡çš„é€šé“æ•°ï¼ˆä¹Ÿå°±æ˜¯å·ç§¯æ ¸ä¸ªæ•°ï¼‰ï¼›  kernel_sizeï¼šintæˆ–tupleï¼Œå·ç§¯æ ¸å°ºå¯¸ï¼ˆèµ‹å€¼å•ä¸ªintæ—¶é•¿=å®½ï¼‰ï¼Œdefault=1ï¼›  strideï¼šintæˆ–tupleï¼Œå·ç§¯æ“ä½œçš„æ»‘åŠ¨æ­¥é•¿ï¼Œdefault=1ï¼›  paddingï¼šintæˆ–tupleï¼Œè¾“å…¥å›¾ç‰‡å¤–å›´æ‰©å……å¤§å°ï¼ˆèµ‹å€¼å•ä¸ªintæ—¶é•¿=å®½ï¼‰ï¼Œdefault=0ï¼›å½“é‡‡å–é»˜è®¤å‚æ•°æ—¶ï¼Œpadding = (kernel_size - 1) /2 å¯ä¿è¯è¾“å‡ºå›¾ç‰‡ä¸è¾“å…¥å›¾ç‰‡å°ºå¯¸ä¸€è‡´ï¼›  dilationï¼šå·ç§¯æ ¸æ‰©å……å¤§å°ï¼Œdefault=1ï¼›  groupsï¼šä»è¾“å…¥é€šé“åˆ°è¾“å‡ºé€šé“åˆ†ç»„çš„ä¸ªæ•°ï¼Œdefault=1ï¼›  biasï¼šboolï¼Œè¾“å‡ºå¢åŠ åå·®ï¼Œdefault=Trueï¼›å‡è®¾è¾“å…¥æ•°æ®ä¸º $(N, C_{in}, H_{in},W_{in})$ ï¼ˆ$N$ å¼  $C_{in}$ é€šé“æ•°çš„é«˜ $H_{in}$ å®½ $W_{in}$ çš„å›¾ç‰‡ï¼‰ï¼Œå¯¹äºè¾“å…¥çš„æ¯ä¸€å¼ å›¾ç‰‡ï¼Œæ¯”å¦‚ç¬¬ $N_i$ å¼ å›¾ç‰‡ï¼Œè¾“å‡ºç‰¹å¾å›¾çš„é€šé“æ•°ä¸º $C_{out}$ï¼Œå…·ä½“ä¸º\\[out(N_i,C_{out,j})=bias(C_{out,j}) + \\sum_{k=1}^{C_{in}}weight(C_{out,j},k)\\star input(N_i,k)\\]å…¶ä¸­ $H_{out}$ å’Œ $H_{out}$ ä¸º\\[\\begin{aligned}H_{out} &amp;= \\frac{H_{in} + 2\\times padding[0] - dilation[0]\\times (kernel\\_size[0]-1)-1} {stride[0]}+1 \\\\W_{out} &amp;= \\frac{W_{in} + 2\\times padding[1] - dilation[1]\\times (kernel\\_size[1]-1)-1}{stride[1]}+1\\end{aligned}\\]è‹¥é‡‡ $dilation = 1$ï¼Œæœ‰\\[\\begin{aligned}H_{out} &amp;= \\frac{H_{in} + 2\\times padding[0] - kernel\\_size[0]}{stride[0]}+1 \\\\W_{out} &amp;= \\frac{W_{in} + 2\\times padding[1] - kernel\\_size[1]}{stride[1]}+1\\end{aligned}\\]è‹¥é‡‡ç”¨é»˜è®¤å‚æ•°ï¼Œæœ‰\\[\\begin{aligned}H_{out} = H_{in} - kernel\\_size[0] + 1 \\\\W_{out} = W_{in} - kernel\\_size[1] + 1\\end{aligned}\\]1.1.1. dilationæ³¨æ„ï¼ŒPyTorch è®¤ä¸ºdilation=n è¡¨ç¤ºå·ç§¯æ ¸å°ºå¯¸ä» (1x1) æ‰©å……ä¸º nxnï¼Œå…¶ä¸­åŸæœ¬çš„å·ç§¯æ ¸åƒç´ åœ¨å·¦ä¸Šè§’ï¼Œå…¶å®ƒåƒç´ å¡«å……ä¸º0ã€‚å› æ­¤ dilation=1 ç­‰ä»·äºä¼ ç»Ÿçš„æ— æ‰©å……çš„å·ç§¯[2]ã€‚å¦‚æœæˆ‘ä»¬è®¾ç½®çš„ padding=0, dilation=1 çš„è¯ï¼Œè“è‰²ä¸ºè¾“å…¥ï¼Œç»¿è‰²ä¸ºè¾“å‡ºï¼Œå·ç§¯æ ¸ä¸º3*3çš„å·ç§¯æ•ˆæœå¦‚å›¾[3]ï¼šå¦‚æœæˆ‘ä»¬è®¾ç½®çš„ dilation=2 çš„è¯ï¼Œå·ç§¯æ ¸ç‚¹ä¸è¾“å…¥ä¹‹é—´è·ç¦»ä¸º1çš„å€¼ç›¸ä¹˜æ¥å¾—åˆ°è¾“å‡ºè¿™æ ·å•æ¬¡è®¡ç®—æ—¶è¦†ç›–çš„é¢ç§¯ï¼ˆå³æ„Ÿå—åŸŸï¼‰ç”± dilation=0 æ—¶çš„ $3\\times 3=9$ å˜ä¸ºäº† dilation=1 æ—¶çš„ $5\\times 5=25$ã€‚åœ¨å¢åŠ äº†æ„Ÿå—åŸŸçš„åŒæ—¶å´æ²¡æœ‰å¢åŠ è®¡ç®—é‡ï¼Œä¿ç•™äº†æ›´å¤šçš„ç»†èŠ‚ä¿¡æ¯ï¼Œå¯¹å›¾åƒè¿˜åŸçš„ç²¾åº¦æœ‰æ˜æ˜¾çš„æå‡ã€‚1.1.2. paddingpadding æ˜¯å›¾åƒå‘¨å›´å¡«å……çš„åƒç´ å°ºå¯¸ã€‚åœ¨é»˜è®¤å‚æ•°ï¼ˆdilation=1, padding = 0ï¼‰çš„æƒ…å†µä¸‹ï¼Œæ¯ç»è¿‡ä¸€æ¬¡å·ç§¯ï¼Œå›¾åƒçš„å°ºå¯¸éƒ½ä¼šç¼©å°ã€‚æ¯”å¦‚åŸå§‹å›¾åƒä¸º $5\\times 5$ï¼Œå·ç§¯æ ¸å¤§å°ä¸º $3\\times 3$ï¼Œæ»‘åŠ¨æ­¥é•¿ $stride=1$ï¼Œåˆ™å·ç§¯è¾“å‡ºçš„ç‰¹å¾å›¾ä¸º $(5-3+1)\\times (5-3+1)=3\\times 3$ã€‚è¿™æ ·å¤„ç†æœ‰ä¸¤ä¸ªç¼ºç‚¹ï¼š      å·ç§¯åçš„çŸ©é˜µè¶Šå˜è¶Šå°ï¼ˆå·ç§¯å±‚å¾ˆå¤šæ—¶ï¼Œæœ€ç»ˆå¾—åˆ°çš„å°†æ˜¯å¾ˆå°çš„å›¾ç‰‡ï¼‰ï¼›        è¾“å…¥çŸ©é˜µè¾¹ç¼˜åƒç´ åªè¢«è®¡ç®—è¿‡ä¸€æ¬¡ï¼Œè€Œä¸­é—´åƒç´ è¢«å·ç§¯è®¡ç®—å¤šæ¬¡ï¼Œæ„å‘³ç€ä¸¢å¤±å›¾åƒè§’è½ä¿¡æ¯ã€‚  ä¸ºäº†ä¿è¯è¾“å‡ºå°ºå¯¸ä¸è¾“å…¥å°ºå¯¸ä¸€è‡´ï¼Œå³\\[\\begin{aligned}H_{out} = H_{in} \\\\W_{out} = W_{in}\\end{aligned}\\]éœ€è¦åœ¨å›¾åƒå‘¨å›´å¡«å……ä¸€å®šçš„åƒç´ å®½åº¦ï¼Œè®¡ç®—åŒ¹é…çš„ padding å€¼ï¼Œå°†ä¸Šé¢çš„å…¬å¼å˜æ¢å¦‚ä¸‹\\[\\begin{aligned}padding[0] = \\frac{stride[0]\\times (H_{out}-1) + dilation[0]\\times (kernel\\_size[0]-1)-H_{in}+1} {2} \\\\padding[1] = \\frac{stride[1]\\times (H_{out}-1) + dilation[1]\\times (kernel\\_size[1]-1)-H_{in}+1} {2} \\\\\\end{aligned}\\]å°†é»˜è®¤çš„ stride=1å’Œ dilation=1 å‚æ•°ä»£å…¥ï¼Œå¯å¾—\\[\\begin{aligned}padding[0] = (kernel\\_size[0]-1) / 2 \\\\padding[1] = (kernel\\_size[1]-1) / 2\\end{aligned}\\]ä¹Ÿå°±æ˜¯è¯´ï¼Œpadding çš„å–å€¼ä¸ kernel_size æœ‰å…³ã€‚å¦‚æœé‡‡ç”¨é•¿å®½ç›¸ç­‰çš„å·ç§¯æ ¸ï¼Œå¯ç®€å†™ä¸º\\[padding = (kernel\\_size-1) / 2\\]å¯¹äºä¸Šè¿°ä¾‹å­ï¼Œè®¡ç®—å padding = 1ã€‚å³åŸå§‹å›¾åƒä¸º $5\\times 5$ï¼Œå›¾åƒå‘¨å›´å¡«å……1åƒç´ çš„å®½åº¦ï¼Œå°ºå¯¸å˜ä¸º$7\\times 7$ï¼Œç»è¿‡å·ç§¯åç‰¹å¾å›¾å°ºå¯¸æ­£å¥½åˆå˜ä¸º $5\\times 5$ã€‚1.2. MaxPool2dnn.MaxPool2d çš„å‚æ•°åŒ…æ‹¬ï¼š      kernel_sizeï¼š(int or tuple) ï¼Œmax pooling çš„çª—å£å¤§å°ï¼Œå¯ä»¥ä¸ºtupleï¼Œåœ¨nlpä¸­tupleç”¨æ›´å¤šï¼ˆn,1ï¼‰        strideï¼š(int or tuple, optional) ï¼Œmax pooling çš„çª—å£ç§»åŠ¨çš„æ­¥é•¿ã€‚é»˜è®¤å€¼æ˜¯kernel_size        paddingï¼š(int or tuple, optional) - è¾“å…¥çš„æ¯ä¸€æ¡è¾¹è¡¥å……0çš„å±‚æ•°        dilationï¼š(int or tuple, optional) â€“ ä¸€ä¸ªæ§åˆ¶çª—å£ä¸­å…ƒç´ æ­¥å¹…çš„å‚æ•°        return_indicesï¼šå¦‚æœç­‰äº Trueï¼Œä¼šè¿”å›è¾“å‡ºæœ€å¤§å€¼çš„åºå·ï¼Œå¯¹äºä¸Šé‡‡æ ·æ“ä½œä¼šæœ‰å¸®åŠ©        ceil_modeï¼šå¦‚æœç­‰äº Trueï¼Œè®¡ç®—è¾“å‡ºä¿¡å·å¤§å°çš„æ—¶å€™ï¼Œä¼šä½¿ç”¨å‘ä¸Šå–æ•´ï¼Œä»£æ›¿é»˜è®¤çš„å‘ä¸‹å–æ•´çš„æ“ä½œï¼Œdefault=False  ä¸‹å›¾çš„ kernel_size = 2, stride = 2ï¼Œå°†è¾“å…¥å›¾ç‰‡å°ºå¯¸ç¼©å‡ä¸ºåŸæ¥çš„ä¸€åŠã€‚å½“è¾“å…¥æ— æ³•è¢« kernel_size æ•´é™¤æ—¶ï¼Œæ ¹æ® ceil_mode æ¥å†³å®šå¦‚ä½•æ± åŒ–1.3. Linearnn.Linear çš„å‚æ•°å¦‚ä¸‹ï¼š      in_featuresï¼šè¾“å…¥ç»´åº¦ï¼›        out_featuresï¼šè¾“å‡ºç»´åº¦ï¼›        biasï¼šå¦‚æœè®¾ä¸º False åˆ™ä¸å­˜åœ¨åç½®ï¼Œdefault: Trueã€‚  2. æ¿€æ´»å‡½æ•°2.1. conv2dtorch.nn ä¸ torch.nn.functional å·®ä¸å¤š[4]ï¼Œä¸è¿‡ä¸€ä¸ªåŒ…è£…å¥½çš„ç±»ï¼Œä¸€ä¸ªæ˜¯å¯ä»¥ç›´æ¥è°ƒç”¨çš„å‡½æ•°ã€‚åœ¨å®ç°æºä»£ç ä¸Šï¼Œtorch.nn.Conv2d ç±»åœ¨ forward æ—¶è°ƒç”¨äº† torch.nn.functional.conv2dã€‚å¯èƒ½ä¼šç–‘æƒ‘ä¸ºä»€ä¹ˆéœ€è¦è¿™ä¸¤ä¸ªåŠŸèƒ½å¦‚æ­¤ç›¸è¿‘çš„æ¨¡å—ï¼Œå…¶å®è¿™ä¹ˆè®¾è®¡æ˜¯æœ‰å…¶åŸå› çš„ã€‚å¦‚æœæˆ‘ä»¬åªä¿ç•™nn.functionalä¸‹çš„å‡½æ•°çš„è¯ï¼Œåœ¨è®­ç»ƒæˆ–è€…ä½¿ç”¨æ—¶ï¼Œæˆ‘ä»¬å°±è¦æ‰‹åŠ¨å»ç»´æŠ¤weight, bias, strideè¿™äº›ä¸­é—´é‡çš„å€¼ï¼Œè¿™æ˜¾ç„¶æ˜¯ç»™ç”¨æˆ·å¸¦æ¥äº†ä¸ä¾¿ã€‚è€Œå¦‚æœæˆ‘ä»¬åªä¿ç•™nnä¸‹çš„ç±»çš„è¯ï¼Œå…¶å®å°±ç‰ºç‰²äº†ä¸€éƒ¨åˆ†çµæ´»æ€§ï¼Œå› ä¸ºåšä¸€äº›ç®€å•çš„è®¡ç®—éƒ½éœ€è¦åˆ›é€ ä¸€ä¸ªç±»ï¼Œè¿™ä¹Ÿä¸PyTorchçš„é£æ ¼ä¸ç¬¦ã€‚äºŒè€…æœ‰ä¸€äº›ç»†å¾®çš„å·®åˆ«ï¼š      ä¸¤è€…çš„è°ƒç”¨æ–¹å¼ä¸åŒã€‚nn.Xxx éœ€è¦å…ˆå®ä¾‹åŒ–å¹¶ä¼ å…¥å‚æ•°ï¼Œç„¶åä»¥å‡½æ•°è°ƒç”¨çš„æ–¹å¼è°ƒç”¨å®ä¾‹åŒ–çš„å¯¹è±¡å¹¶ä¼ å…¥è¾“å…¥æ•°æ®ã€‚nn.functional.xxxåŒæ—¶ä¼ å…¥è¾“å…¥æ•°æ®å’Œweight, biasç­‰å…¶ä»–å‚æ•° ã€‚        nn.Xxxç»§æ‰¿äºnn.Moduleï¼Œ èƒ½å¤Ÿå¾ˆå¥½çš„ä¸nn.Sequentialç»“åˆä½¿ç”¨ï¼Œ è€Œnn.functional.xxxæ— æ³•ä¸nn.Sequentialç»“åˆä½¿ç”¨ã€‚        nn.Xxxä¸éœ€è¦ä½ è‡ªå·±å®šä¹‰å’Œç®¡ç†weightï¼›è€Œnn.functional.xxxéœ€è¦ä½ è‡ªå·±å®šä¹‰weightï¼Œæ¯æ¬¡è°ƒç”¨çš„æ—¶å€™éƒ½éœ€è¦æ‰‹åŠ¨ä¼ å…¥weight, ä¸åˆ©äºä»£ç å¤ç”¨ã€‚  ä¸¤ç§å®šä¹‰æ–¹å¼å¾—åˆ°CNNåŠŸèƒ½éƒ½æ˜¯ç›¸åŒçš„ï¼Œè‡³äºå–œæ¬¢å“ªä¸€ç§æ–¹å¼ï¼Œæ˜¯ä¸ªäººå£å‘³é—®é¢˜ï¼Œä½†PyTorchå®˜æ–¹æ¨èï¼š      å…·æœ‰å­¦ä¹ å‚æ•°çš„ï¼ˆä¾‹å¦‚ï¼Œconv2d, linear, batch_norm)é‡‡ç”¨nn.Xxxæ–¹å¼        æ²¡æœ‰å­¦ä¹ å‚æ•°çš„ï¼ˆä¾‹å¦‚ï¼Œmaxpool, loss func, activation funcï¼‰ç­‰æ ¹æ®ä¸ªäººé€‰æ‹©ä½¿ç”¨nn.functional.xxxæˆ–è€…nn.Xxxæ–¹å¼ã€‚  ä½†å…³äºdropoutï¼Œä¸ªäººå¼ºçƒˆæ¨èä½¿ç”¨nn.Xxxæ–¹å¼ï¼Œå› ä¸ºä¸€èˆ¬æƒ…å†µä¸‹åªæœ‰è®­ç»ƒé˜¶æ®µæ‰è¿›è¡Œdropoutï¼Œåœ¨evalé˜¶æ®µéƒ½ä¸ä¼šè¿›è¡Œdropoutã€‚ä½¿ç”¨nn.Xxxæ–¹å¼å®šä¹‰dropoutï¼Œåœ¨è°ƒç”¨model.eval()ä¹‹åï¼Œmodelä¸­æ‰€æœ‰çš„dropout layeréƒ½å…³é—­ï¼Œä½†ä»¥nn.function.dropoutæ–¹å¼å®šä¹‰dropoutï¼Œåœ¨è°ƒç”¨model.eval()ä¹‹åå¹¶ä¸èƒ½å…³é—­dropoutã€‚2.2. softmaxæˆ‘ä»¬çŸ¥é“ maxï¼Œå‡å¦‚ a &gt; bï¼Œåˆ™ max(a, b) = a ï¼Œè¿™ä¸ªç»“æœæ˜¯ç¡®å®šçš„ï¼Œæ— è®ºè®¡ç®—å¤šå°‘æ¬¡ï¼Œmax è¿”å›çš„å€¼æ°¸è¿œæ˜¯ aã€‚ä½†æœ‰çš„æ—¶å€™æˆ‘ä¸æƒ³è¿™æ ·ï¼Œå› ä¸ºè¿™æ ·ä¼šé€ æˆå€¼å°çš„é‚£ä¸ªé¥¥é¥¿ã€‚æ‰€ä»¥æˆ‘å¸Œæœ›åˆ†å€¼å¤§çš„é‚£ä¸€é¡¹ç»å¸¸å–åˆ°ï¼Œåˆ†å€¼å°çš„é‚£ä¸€é¡¹ä¹Ÿå¶å°”å¯ä»¥å–åˆ°ã€‚å¯ä»¥é‡‡ç”¨æŸç§æ–¹æ³•ï¼ŒæŒ‰ç…§aå’Œbæœ¬æ¥çš„å¤§å°æ¥è®¡ç®—å–aå’Œbçš„æ¦‚ç‡ï¼Œå°±å¯ä»¥å®ç°aç»å¸¸å–åˆ°ï¼Œbä¹Ÿä¼šå¶å°”å–åˆ°ã€‚æ­¤æ—¶çš„é€‰å–ä¸åœ¨éµå¾ª maxï¼Œè€Œæ˜¯ softmax ã€‚softmax çš„è®¡ç®—æ–¹æ³•å¦‚ä¸‹ï¼Œå‡è®¾è¾“å…¥ä¸ºä¸€ç»´å‘é‡ $Z = [z_1,z_2,â€¦z_i,â€¦,z_n]\\in(-\\infty,+\\infty)$ ï¼Œåˆ™ç¬¬ $i$ ä¸ªåˆ†é‡ $z_i$ çš„ softmax è¾“å‡ºä¸º\\(y_i = softmax(z_i) = \\frac{e^{z_i}}{\\sum_j e^{z_j}}\\)æˆ‘ä»¬çŸ¥é“æŒ‡æ•°å‡½æ•° $e^x$ çš„å€¼åŸŸä¸º $(0,+\\infty)$ ï¼Œå› æ­¤ softmax å°† $(-\\infty,+\\infty)$ çš„å€¼æ˜ å°„åˆ° $[0, 1]$ã€‚å…·ä½“æ¥è¯´ï¼Œsoftmax å…·å¤‡ä¸‹é¢ä¸¤ä¸ªä½œç”¨      å°†å‘é‡çš„å„ä¸ªç»´åº¦ $z_i$ æ˜ å°„ä¸ºæ˜ å°„åˆ° $[0, 1]$ ä¹‹é—´çš„æŸä¸ªå€¼ï¼Œå³ä¸ºè¯¥åˆ†é‡çš„å–å€¼æ¦‚ç‡ï¼›        å‘é‡æ‰€æœ‰ç»´åº¦çš„å–å€¼æ¦‚ç‡ä¹‹å’Œä¸º1ã€‚  é€šå¸¸æƒ…å†µä¸‹ï¼Œè®¡ç®—softmaxå‡½æ•°å€¼ä¸ä¼šå‡ºç°ä»€ä¹ˆé—®é¢˜ï¼Œä¾‹å¦‚ï¼Œå½“softmaxå‡½æ•°è¡¨è¾¾å¼é‡Œçš„æ‰€æœ‰ zi éƒ½æ˜¯ä¸€ä¸ªâ€œä¸€èˆ¬å¤§å°â€çš„æ•°å€¼ $c$ æ—¶â€”â€”ä¹Ÿå°±æ˜¯ä¸Šå›¾ä¸­ï¼Œ$z_1=z_2=z_3=c$ æ—¶ï¼Œé‚£ä¹ˆï¼Œè®¡ç®—å‡ºæ¥çš„å‡½æ•°å€¼ $y_1=y_2=y_3=1$ã€‚ä½†æ˜¯ï¼Œå½“æŸäº›æƒ…å†µå‘ç”Ÿæ—¶ï¼Œè®¡ç®—å‡½æ•°å€¼å°±å‡ºé—®é¢˜äº†ï¼š      $c$ æå…¶å¤§ï¼Œå¯¼è‡´åˆ†å­è®¡ç®— $e^c$ æ—¶ä¸Šæº¢å‡ºï¼ˆè¶…å‡ºfloatè¡¨ç¤ºçš„ç•Œé™ï¼Œå‡ºç°NaNï¼‰ã€‚                                $c$ ä¸ºè´Ÿæ•°ï¼Œä¸” $          c          $ å¾ˆå¤§ï¼Œæ­¤æ—¶åˆ†æ¯æ˜¯ä¸€ä¸ªæå°çš„æ­£æ•°ï¼Œæœ‰å¯èƒ½å››èˆäº”å…¥ä¸º0ï¼Œå¯¼è‡´ä¸‹æº¢å‡ºã€‚                    è§£å†³æ–¹æ³•ä¸ºï¼Œä»¤ $M = max(z_i), i =1,2,3,â€¦.,n$ï¼Œè®¡ç®— $softmax(z_i - M)$ çš„å€¼ï¼Œå°±å¯ä»¥è§£å†³ä¸Šæº¢å‡ºã€ä¸‹æº¢å‡ºçš„é—®é¢˜äº†ï¼Œå¹¶ä¸”ï¼Œè®¡ç®—ç»“æœç†è®ºä¸Šä»ç„¶å’Œ  $softmax(z_i)$  ä¿æŒä¸€è‡´ã€‚å…·ä½“è€Œè¨€ï¼š      $z_i - M$ çš„å–å€¼èŒƒå›´ä¸º $(-\\infty,0]$ ï¼Œå› æ­¤åœ¨åšæŒ‡æ•°è¿ç®—æ—¶è¾“å…¥çš„æœ€å¤§å€¼ä¸º 0ï¼Œä»è€Œé¿å…ä¸Šæº¢å‡ºã€‚        $softmax(z_i - M)$ çš„å€¼åŸŸä¸º $[0,1]$ ï¼Œå› ä¸ºåˆ†æ¯å¯¹æ‰€æœ‰æŒ‡æ•°æ±‚å’Œæ—¶ï¼Œè‡³å°‘æœ‰ä¸€ä¸ªæŒ‡æ•°ï¼ˆå¯¹åº”è¾“å…¥æœ€å¤§å€¼0çš„æŒ‡æ•°é¡¹ï¼‰ä¸º1ï¼Œä¿è¯äº†åˆ†æ¯ä¸ä¸º0ï¼Œä»è€Œé¿å…ä¸‹æº¢å‡ºã€‚  softmax(input, dim=-1) # dim=0 makes sum of column values to be 1, dim=1 makes row ...2.3. log_softmaxåœ¨ softmax çš„åŸºç¡€ä¸Šå¤šåšä¸€ä¸ª log è¿ç®—ï¼Œlog_softmaxå·ç§°èƒ½å¤ŸåŠ å¿«è¿ç®—é€Ÿåº¦ï¼Œæé«˜æ•°æ®ç¨³å®šæ€§ã€‚åœ¨æ•°å­¦ä¸Šç­‰ä»·äº log(softmax(x)) ï¼Œä½†åšè¿™ä¸¤ä¸ªå•ç‹¬æ“ä½œé€Ÿåº¦è¾ƒæ…¢ï¼Œæ•°å€¼ä¸Šä¹Ÿä¸ç¨³å®šã€‚log_softmax çš„å€¼åŸŸä¸º $(-\\infty, 0]$ã€‚3. æŸå¤±å‡½æ•°3.1. CrossEntropyLossäº¤å‰ç†µæŸå¤±å‡½æ•°ã€‚åœ¨è¯´äº¤å‰ç†µä¹‹å‰ï¼Œå…ˆè¯´ä¸€ä¸‹ä¿¡æ¯é‡ä¸ç†µã€‚ä¿¡æ¯é‡ï¼šè¡¡é‡ä¸€ä¸ªäº‹ä»¶çš„ä¸ç¡®å®šæ€§ï¼›ä¸€ä¸ªäº‹ä»¶å‘ç”Ÿçš„æ¦‚ç‡è¶Šå¤§ï¼Œä¸ç¡®å®šæ€§è¶Šå°ï¼Œåˆ™å®ƒæ‰€æºå¸¦çš„ä¿¡æ¯é‡å°±è¶Šå°ã€‚å‡è®¾ $X$ æ˜¯ä¸€ä¸ªç¦»æ•£å‹éšæœºå˜é‡ï¼Œå…¶å–å€¼é›†åˆä¸º $X$ï¼Œæ¦‚ç‡åˆ†å¸ƒå‡½æ•°ä¸º $p(x)=P(X=x),x\\in X$  ï¼Œæˆ‘ä»¬å®šä¹‰äº‹ä»¶ $X=x_0$ çš„ä¿¡æ¯é‡ä¸ºï¼š$I(x_0)=-log(p(x_0))$ã€‚å½“ $p(x_0) = 1$ æ—¶ï¼Œç†µç­‰äº0ï¼Œä¹Ÿå°±æ˜¯è¯´è¯¥äº‹ä»¶çš„å‘ç”Ÿä¸ä¼šå¯¼è‡´ä»»ä½•ä¿¡æ¯é‡çš„å¢åŠ ã€‚ç†µï¼šç”¨æ¥è¡¡é‡ä¸€ä¸ªç³»ç»Ÿçš„æ··ä¹±ç¨‹åº¦ï¼Œä»£è¡¨ä¸€ä¸ªç³»ç»Ÿä¸­ä¿¡æ¯é‡çš„æ€»å’Œï¼›ä¿¡æ¯é‡æ€»å’Œè¶Šå¤§ï¼Œç³»ç»Ÿä¸ç¡®å®šæ€§è¶Šå¤§ã€‚å¯¹æ‰€æœ‰å¯èƒ½äº‹ä»¶æ‰€å¸¦æ¥çš„ä¿¡æ¯é‡æ±‚æœŸæœ›ï¼Œå…¶ç»“æœå°±èƒ½è¡¡é‡äº‹åŠ¡çš„ä¸ç¡®å®šåº¦ã€‚äº¤å‰ç†µï¼šå®ƒä¸»è¦åˆ»ç”»çš„æ˜¯å®é™…è¾“å‡ºï¼ˆæ¦‚ç‡ï¼‰ä¸æœŸæœ›è¾“å‡ºï¼ˆæ¦‚ç‡ï¼‰çš„è·ç¦»ï¼Œä¹Ÿå°±æ˜¯äº¤å‰ç†µçš„å€¼è¶Šå°ï¼Œä¸¤ä¸ªæ¦‚ç‡åˆ†å¸ƒå°±è¶Šæ¥è¿‘ã€‚å‡è®¾æ¦‚ç‡åˆ†å¸ƒ $p$ ä¸ºæœŸæœ›è¾“å‡ºï¼Œæ¦‚ç‡åˆ†å¸ƒ $q$ ä¸ºå®é™…è¾“å‡ºï¼Œ $H(p,q)$ ä¸ºäº¤å‰ç†µã€‚å…¶è®¡ç®—æ–¹æ³•æœ‰ä¸¤ç§\\(H(p,q)=-\\sum_i (p_i log q_i + (1-p_i)log(1-q_i))\\)æˆ–è€…\\[H(p,q) = -\\sum_i (p_ilog q_i)\\]å‡è®¾æŸä¸ªæ ·æœ¬å¯¹åº”çš„æ ‡ç­¾ $y = [y_1,y_2,â€¦,y_K]\\in R^K$ ä¸ºä¸€ä¸ªå‘é‡ï¼ŒPyTorch ä¸­çš„äº¤å‰ç†µæŸå¤±å‡½æ•°å½¢å¼å¦‚ä¸‹\\[L = -\\sum_{i=1}^K (y_ilog s_i)\\]å…¶ä¸­ï¼Œ$y_i$ ä¸ºçœŸå®åˆ†ç±»å€¼ï¼Œ$s_i$ ä¸º softmax è¾“å‡ºå€¼ï¼Œ$i$ ä»£è¡¨ç¥ç»å…ƒèŠ‚ç‚¹çš„æ ‡å·ã€‚å‡è®¾ç½‘ç»œç»“æ„ä¸º xx -&gt; Linear -&gt; softmaxï¼Œå³ä¸€ä¸ªå…¨è¿æ¥å±‚çš„è¾“å‡ºä½œä¸º softmax çš„è¾“å…¥ï¼Œæœ‰\\[\\begin{aligned}z_i &amp;= \\omega_i \\cdot x_i + b_i \\\\s_i &amp;= \\frac{e^{z_i}}{\\sum_{j=1}^K e^{z_j}}\\end{aligned}\\]é‡‡ç”¨äº¤å‰ç†µæŸå¤±å‡½æ•°ï¼Œåˆ™æŸå¤±å‡½æ•°å¯¹ softmax çš„å€’æ•°ä¸º\\[\\begin{aligned}\\frac{\\partial L}{\\partial \\omega_i}=\\frac{\\partial L}{\\partial z_i}\\frac{\\partial z_i}{\\partial w_i} \\\\\\frac{\\partial L}{\\partial b_i}=\\frac{\\partial L}{\\partial z_i}\\frac{\\partial z_i}{\\partial b_i}\\end{aligned}\\]ç”±äºå…¨è¿æ¥å±‚\\[\\begin{aligned}\\frac{\\partial z_i}{\\partial w_i} &amp;= x_i \\\\\\frac{\\partial z_i}{\\partial b_i} &amp;= 1\\end{aligned}\\]åˆ™æ ¸å¿ƒé—®é¢˜å˜ä¸ºæ±‚è§£ $\\frac{\\partial L}{\\partial z_i}$ ã€‚\\[\\begin{aligned}\\frac{\\partial z_i}{\\partial w_i} &amp;= x_i \\\\\\frac{\\partial z_i}{\\partial b_i} &amp;= 1\\end{aligned}\\]ç”±äº softmax çš„è®¡ç®—å…¬å¼ä¸­ï¼Œä»»æ„ä¸€ä¸ª s_i å‡åŒ…å« z çš„æ‰€æœ‰åˆ†ç±»ï¼Œå› æ­¤æœ‰\\[\\frac{\\partial L}{\\partial z_i} = \\sum_k[\\frac{\\partial L}{\\partial s_k}\\frac{\\partial s_k}{\\partial z_i}]\\]æ ¹æ®æŸå¤±å‡½æ•°çš„å®šä¹‰ï¼Œæœ‰\\[\\frac{\\partial L}{\\partial s_k}=-\\frac{y_k}{s_k}\\]ä¸‹é¢æ±‚è§£ $\\frac{\\partial s_k}{\\partial z_i}$ ï¼Œéœ€è¦åˆ†æƒ…å†µè®¨è®ºå½“ $k \\neq i$ æ—¶ï¼Œæœ‰\\[\\begin{aligned}\\frac{\\partial s_k}{\\partial z_i}&amp;= \\frac{\\partial(\\frac{e^{z_k}}{\\sum_j e^{z_j}})}{\\partial z_i}\\\\&amp;= e^{z_k}\\frac{\\partial(\\frac{1}{\\sum_j e^{z_j}})}{\\partial z_i}\\\\&amp;= e^{z_k}(-\\frac{1}{(\\sum_j e^{z_j})^2})\\frac{\\partial \\sum_j e^{z_j}}{\\partial z_i}\\\\&amp;= e^{z_k}(-\\frac{1}{(\\sum_j e^{z_j})^2})e^{z_i}\\\\&amp;= -(\\frac{e^{z_k}}{\\sum_j e^{z_j}})(\\frac{e^{z_i}}{\\sum_j e^{z_j}}) = -s_k\\cdot s_i\\end{aligned}\\]å½“ $k=i$ æ—¶ï¼Œæœ‰ï¼ˆåˆ†å¼æ±‚å¯¼æ³•åˆ™ï¼šä¸Šå¯¼ä¸‹ä¸å¯¼å‡ä¸‹å¯¼ä¸Šä¸å¯¼é™¤ä»¥ä¸‹çš„å¹³æ–¹ï¼‰\\[\\begin{aligned}\\frac{\\partial s_k}{\\partial z_i}&amp;=\\frac{\\partial s_i}{\\partial z_i}\\\\&amp;=\\frac{\\partial(\\frac{e^{z_i}}{\\sum_j e^{z_j}})}{\\partial z_i}\\\\&amp;=\\frac{e^{z_i}\\sum_j e^{z_i}-(e^{z_i})^2}{(\\sum_j e^{z_i})^2}\\\\&amp;=\\frac{e^{z_i}}{\\sum_j e^{z_i}}\\frac{\\sum_j e^{z_i}-e^{z_i}}{\\sum_j e^{z_i}}\\\\&amp;=\\frac{e^{z_i}}{\\sum_j e^{z_i}}(1-\\frac{e^{z_i}}{\\sum_j e^{z_i}}) = s_i(1-s_i)\\end{aligned}\\]æœ€ç»ˆå¾—åˆ°\\[\\begin{aligned}\\frac{\\partial L}{\\partial z_i} &amp;= -\\frac{y_i}{s_i}s_i(1-s_i)+\\sum_{k \\neq i}(-\\frac{y_k}{s_k}\\cdot-s_ks_i)\\\\&amp;= -y_i + \\sum_{k=1}^K y_k\\end{aligned}\\]å¯¹äºå¤šåˆ†ç±»é—®é¢˜ï¼Œæ ·æœ¬çœŸå®æ ‡ç­¾ $y = [y_1,y_2,â€¦,y_K]$ æ˜¯one-hotï¼Œå³åªæœ‰ä¸€ä¸ªå…ƒç´ ä¸º1ï¼Œå…¶ä½™å…ƒç´ ä¸º0ã€‚é‚£ä¹ˆæœ‰ $\\sum_{k=1}^K y_k = 1$ï¼Œå› æ­¤åœ¨å¤šåˆ†ç±»é—®é¢˜ä¸­\\[\\frac{\\partial L}{\\partial z_i} = s_i - y_i\\]é‚£ä¹ˆæœ‰\\[\\begin{aligned}\\frac{\\partial L}{\\partial \\omega_i} &amp;= (s_i - y_i)\\cdot x\\\\\\frac{\\partial L}{\\partial b_i} &amp;= s_i - y_i\\end{aligned}\\]3.2. NLLLossè´Ÿå¯¹æ•°ä¼¼ç„¶æŸå¤±å‡½æ•°ï¼ˆNegative Log Likelihood, NLLï¼‰ çš„ è¾“å…¥æ˜¯ä¸€ä¸ªå¯¹æ•°æ¦‚ç‡å‘é‡å’Œä¸€ä¸ªç›®æ ‡æ ‡ç­¾ã€‚å®ƒä¸ä¼šä¸ºæˆ‘ä»¬è®¡ç®—å¯¹æ•°æ¦‚ç‡ï¼Œé€‚åˆç½‘ç»œçš„æœ€åä¸€å±‚æ˜¯ log_softmaxã€‚NLLLoss çš„æ•°å­¦å½¢å¼ä¸º\\(L(X,label) = -X_{label}\\)å…¶ä¸­ï¼ŒX æ˜¯ log_softmax çš„è¾“å‡ºï¼Œlabel æ˜¯å¯¹åº”çš„æ ‡ç­¾ä½ç½®ï¼Œå³ NLLLoss çš„è¾“å‡ºæ˜¯å– X ä¸­å¯¹åº”äº label ä¸­ä¸º1çš„é‚£ä¸ª x ã€‚åœ¨åˆ†ç±»é—®é¢˜ä¸­ï¼ŒCrossEntropy ç­‰ä»·äº log_softmax + nll_lossï¼Œä¹Ÿå°±æ˜¯è¯´å¦‚æœä½¿ç”¨ CrossEntropyï¼Œåˆ™å‰é¢ä¸è¦åŠ  softmax å±‚ï¼Œå› ä¸º CrossEntropy ä¸­å†…å« softmaxã€‚è€Œå¦‚æœä½¿ç”¨ nll_lossï¼Œå‰é¢å°±å¿…é¡»è¦ä½¿ç”¨ log_softmax å±‚ã€‚ç†è®ºä¸Šï¼Œå¯¹äºå•æ ‡ç­¾å¤šåˆ†ç±»é—®é¢˜ï¼Œç›´æ¥ç»è¿‡ softmax æ±‚å‡ºæ¦‚ç‡åˆ†å¸ƒï¼Œç„¶åæŠŠè¿™ä¸ªæ¦‚ç‡åˆ†å¸ƒç”¨ CrossEntropy åšä¸€ä¸ªä¼¼ç„¶ä¼°è®¡è¯¯å·®ã€‚ä½†æ˜¯ softmax æ±‚å‡ºæ¥çš„æ¦‚ç‡åˆ†å¸ƒï¼Œæ¯ä¸€ä¸ªæ¦‚ç‡éƒ½æ˜¯ $(0, 1)$ çš„ï¼Œè¿™å°±ä¼šå¯¼è‡´æœ‰äº›æ¦‚ç‡è¿‡å°ï¼Œå¯¼è‡´ä¸‹æº¢ã€‚ è€ƒè™‘åˆ°è¿™ä¸ªæ¦‚ç‡åˆ†å¸ƒæ€»å½’æ˜¯è¦ç»è¿‡ CrossEntropyçš„ï¼Œè€Œ CrossEntropyçš„è®¡ç®—æ˜¯æŠŠæ¦‚ç‡åˆ†å¸ƒå¤–é¢å¥—ä¸€ä¸ª -log æ¥ä¼¼ç„¶ï¼Œé‚£ä¹ˆç›´æ¥åœ¨è®¡ç®—æ¦‚ç‡åˆ†å¸ƒçš„æ—¶å€™åŠ ä¸Š logï¼ŒæŠŠæ¦‚ç‡ä» $(0, 1)$ å˜ä¸º $(-\\infty, 0)$ï¼Œè¿™æ ·å°±é˜²æ­¢ä¸­é—´ä¼šæœ‰ä¸‹æº¢å‡ºã€‚ æ‰€ä»¥ log_softmax è¯´ç™½äº†å°±æ˜¯å°†æœ¬æ¥åº”è¯¥ç”± CrossEntropyåšçš„ log çš„å·¥ä½œæåˆ°é¢„æµ‹æ¦‚ç‡åˆ†å¸ƒæ¥ï¼Œè·³è¿‡äº†ä¸­é—´çš„å­˜å‚¨æ­¥éª¤ï¼Œé˜²æ­¢ä¸­é—´æ•°å€¼ä¼šæœ‰ä¸‹æº¢å‡ºï¼Œä½¿å¾—æ•°æ®æ›´åŠ ç¨³å®šã€‚ æ­£æ˜¯ç”±äºæŠŠlogè¿™ä¸€æ­¥ä»è®¡ç®—è¯¯å·®æåˆ°å‰é¢ï¼Œæ‰€ä»¥ç”¨ log_softmax ä¹‹åï¼Œä¸‹æ¸¸çš„æŸå¤±å‡½æ•°å°±åº”è¯¥å˜æˆ NLLLossï¼ˆå®ƒæ²¡æœ‰å¥— log è¿™ä¸€æ­¥ï¼Œç›´æ¥å°†è¾“å…¥å–åï¼Œç„¶åè®¡ç®—å’Œæ ‡ç­¾çš„ä¹˜ç§¯æ±‚å’Œå¹³å‡ï¼‰ã€‚4. å‚è€ƒæ–‡çŒ®[1]  PyTorch. Conv2d.[2]  Stack Overflow. Default dilation value in PyTorch.[3]  Vincent Dumoulin, Francesco Visin. A guide to convolution arithmetic for deep learning (Github).[4] çŸ¥ä¹. PyTorch ä¸­ï¼Œnn ä¸ nn.functional æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ.[5]  PyTorch. MaxPool2d.[6]  PyTorch. nn.Linear."
  },
  
  {
    "title": "PythonåŸºç¡€ï¼ˆä¸‡æ¶çš„ä¸‹åˆ’çº¿ï¼‰",
    "url": "/posts/python-basic-1/",
    "categories": "Academic, Coding",
    "tags": "python",
    "date": "2020-06-14 10:40:19 +0800",
    





    
    "snippet": "æœ¬æ–‡ä»‹ç»äº† Python ä¸€äº›åŸºæœ¬çš„å°çŸ¥è¯†ï¼Œå¦‚ name = â€˜mainâ€™ã€initã€super ç­‰ç­‰ã€‚  1. æ¨¡æ‹Ÿçš„åº”ç”¨ç¨‹åºå…¥å£  2. å®ä¾‹å±æ€§åˆä½¿åŒ–  3. ç»§æ‰¿è‡ªçˆ¶ç±»çš„å±æ€§åˆå§‹åŒ–  4. å‚è€ƒæ–‡çŒ®1. æ¨¡æ‹Ÿçš„åº”ç”¨ç¨‹åºå…¥å£if __name__ == '__main__' ä¸º python æä¾›æ¨¡æ‹Ÿçš„åº”ç”¨ç¨‹åºå…¥å£ã€‚å®ƒçš„åŠŸèƒ½ä¸ºï¼šå½“.pyæ–‡ä»¶è¢«ç›´æ¥è¿è¡Œæ—¶ï¼Œif __name__ == '...",
    "content": "æœ¬æ–‡ä»‹ç»äº† Python ä¸€äº›åŸºæœ¬çš„å°çŸ¥è¯†ï¼Œå¦‚ name = â€˜mainâ€™ã€initã€super ç­‰ç­‰ã€‚  1. æ¨¡æ‹Ÿçš„åº”ç”¨ç¨‹åºå…¥å£  2. å®ä¾‹å±æ€§åˆä½¿åŒ–  3. ç»§æ‰¿è‡ªçˆ¶ç±»çš„å±æ€§åˆå§‹åŒ–  4. å‚è€ƒæ–‡çŒ®1. æ¨¡æ‹Ÿçš„åº”ç”¨ç¨‹åºå…¥å£if __name__ == '__main__' ä¸º python æä¾›æ¨¡æ‹Ÿçš„åº”ç”¨ç¨‹åºå…¥å£ã€‚å®ƒçš„åŠŸèƒ½ä¸ºï¼šå½“.pyæ–‡ä»¶è¢«ç›´æ¥è¿è¡Œæ—¶ï¼Œif __name__ == '__main__': ä¹‹ä¸‹çš„ä»£ç å—å°†è¢«è¿è¡Œï¼›å½“.pyæ–‡ä»¶ä»¥æ¨¡å—å½¢å¼è¢«å¯¼å…¥æ—¶ï¼Œif __name__ == '__main__': ä¹‹ä¸‹çš„ä»£ç å—ä¸è¢«è¿è¡Œã€‚å‚è€ƒï¼šhttps://blog.csdn.net/anshuai_aw1/article/details/82344884å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªconst.pyæ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼šPI = 3.14 def main():    print(\"PI:\", PI) main() # è¿è¡Œç»“æœï¼šPI: 3.14ç°åœ¨ï¼Œæˆ‘ä»¬å†™ä¸€ä¸ªç”¨äºè®¡ç®—åœ†é¢ç§¯çš„area.pyæ–‡ä»¶ï¼Œarea.pyæ–‡ä»¶éœ€è¦ç”¨åˆ°const.pyæ–‡ä»¶ä¸­çš„PIå˜é‡ã€‚ä»const.pyä¸­ï¼Œæˆ‘ä»¬æŠŠPIå˜é‡å¯¼å…¥area.pyï¼šfrom const import PI def calc_round_area(radius):    return PI * (radius ** 2) def main():    print(\"round area: \", calc_round_area(2)) main() '''è¿è¡Œç»“æœï¼šPI: 3.14round area:  12.56'''æˆ‘ä»¬çœ‹åˆ° const.py ä¸­çš„ main å‡½æ•°ä¹Ÿè¢«è¿è¡Œäº†ï¼Œå®é™…ä¸Šæˆ‘ä»¬ä¸å¸Œæœ›å®ƒè¢«è¿è¡Œï¼Œå› ä¸º const.py æä¾›çš„ main å‡½æ•°åªæ˜¯ä¸ºäº†æµ‹è¯•å¸¸é‡å®šä¹‰ã€‚è¿™æ—¶ if __name__ == '__main__' æ´¾ä¸Šäº†ç”¨åœºï¼Œæˆ‘ä»¬æŠŠconst.pyæ”¹ä¸€ä¸‹ï¼šPI = 3.14 def main():    print(\"PI:\", PI) if __name__ == \"__main__\":    main()è¿è¡Œconst.pyï¼Œè¾“å‡ºå¦‚ä¸‹ï¼šPI: 3.14è¿è¡Œarea.pyï¼Œè¾“å‡ºå¦‚ä¸‹ï¼šround area:  12.56å¦‚ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ° if __name__ == '__main__' ç›¸å½“äºPythonæ¨¡æ‹Ÿçš„ç¨‹åºå…¥å£ï¼ŒPythonæœ¬èº«å¹¶æ²¡æœ‰è¿™ä¹ˆè§„å®šï¼Œè¿™åªæ˜¯ä¸€ç§ç¼–ç ä¹ æƒ¯ã€‚ç”±äºæ¨¡å—ä¹‹é—´ç›¸äº’å¼•ç”¨ï¼Œä¸åŒæ¨¡å—å¯èƒ½æœ‰è¿™æ ·çš„å®šä¹‰ï¼Œè€Œç¨‹åºå…¥å£åªæœ‰ä¸€ä¸ªã€‚åˆ°åº•å“ªä¸ªç¨‹åºå…¥å£è¢«é€‰ä¸­ï¼Œè¿™å–å†³äº __name__ çš„å€¼ã€‚2. å®ä¾‹å±æ€§åˆä½¿åŒ–å®šä¹‰ç±»çš„æ—¶å€™ï¼Œè‹¥æ˜¯æ·»åŠ  __init__ æ–¹æ³•ï¼Œé‚£ä¹ˆåœ¨åˆ›å»ºç±»çš„å®ä¾‹çš„æ—¶å€™ï¼Œå®ä¾‹ä¼šè‡ªåŠ¨è°ƒç”¨è¿™ä¸ªæ–¹æ³•ï¼Œä¸€èˆ¬ç”¨æ¥å¯¹å®ä¾‹çš„å±æ€§è¿›è¡Œåˆä½¿åŒ–ã€‚æ¯”å¦‚ï¼šclass Student:    def  __init__(self, name, gender):        self.name = name        self.gender = genderXiaoMing = Student(name='XiaoMing', gender='Male')print(XiaoMing.name, XiaoMing.gender)æ­¤å¤„ï¼Œç±»è¿›è¡Œåˆå§‹åŒ–æ—¶å°±ä¼šè‡ªåŠ¨è°ƒç”¨ __init__ ä¸­çš„ä»£ç ï¼Œå¯¹ self.name å’Œ self.gender èµ‹å€¼ï¼Œä¹‹åå¯ä»¥é€šè¿‡ XiaoMing.name ç­‰æ¥è®¿é—®ã€‚self æ˜¯ä¸ªå¯¹è±¡ï¼ˆObjectï¼‰ï¼Œæ˜¯å½“å‰ç±»çš„å®ä¾‹ã€‚åœ¨ç±»çš„ä»£ç ï¼ˆå‡½æ•°ï¼‰ä¸­ï¼Œéœ€è¦è®¿é—®å½“å‰çš„å®ä¾‹ä¸­çš„å˜é‡å’Œå‡½æ•°çš„ï¼Œå³ï¼š      è®¿é—®å¯¹åº”å˜é‡ï¼ˆproperty)ï¼šInstance.ProperyNamï¼Œå»è¯»å–ä¹‹å‰çš„å€¼å’Œå†™å…¥æ–°çš„å€¼        è°ƒç”¨å¯¹åº”å‡½æ•°ï¼ˆfunctionï¼‰ï¼šInstance.function()ï¼Œå³æ‰§è¡Œå¯¹åº”çš„åŠ¨ä½œ  æ–°å»ºçš„å®ä¾‹æœ¬èº«ï¼Œè¿å¸¦å…¶ä¸­çš„å‚æ•°ï¼Œä¼šä¸€å¹¶ä¼ ç»™ __init__ å‡½æ•°è‡ªåŠ¨å¹¶æ‰§è¡Œå®ƒã€‚æ‰€ä»¥ __init__ å‡½æ•°çš„å‚æ•°åˆ—è¡¨ä¼šåœ¨å¼€å¤´å¤šå‡ºä¸€ä¸ªå‚æ•°ï¼Œå®ƒæ°¸è¿œæŒ‡ä»£æ–°å»ºçš„é‚£ä¸ªå®ä¾‹å¯¹è±¡ï¼ŒPythonè¯­æ³•è¦æ±‚å‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°å¿…é¡»æ˜¯å®ä¾‹å¯¹è±¡æœ¬èº«ï¼Œè€Œåç§°éšæ„ï¼Œä¹ æƒ¯ä¸Šå°±å‘½ä¸º selfã€‚å½“ç„¶ï¼Œå¦‚æœä½ éè¦å†™ä¸ºåˆ«çš„æ¯”å¦‚ me ï¼Œä¹Ÿä¸æ˜¯ä¸å¯ä»¥ï¼Œä¹‹åçš„ self.xxx å°±è¦å†™æˆ me.xxx ã€‚ä½ å¼€å¿ƒå°±å¥½ã€‚æ³¨æ„ä»¥ä¸‹ä¸‰ç‚¹  __init__ å…·å¤‡ç‹¬ç«‹çš„å‘½åç©ºé—´ï¼Œä¹Ÿå°±æ˜¯è¯´å‡½æ•°å†…æ–°å¼•å…¥çš„å˜é‡å‡ä¸ºå±€éƒ¨å˜é‡ï¼Œæ–°å»ºçš„å®ä¾‹å¯¹è±¡å¯¹è¿™ä¸ªå‡½æ•°æ¥è¯´ä¹Ÿåªæ˜¯é€šè¿‡ç¬¬ä¸€å‚æ•°selfä»å¤–éƒ¨ä¼ å…¥çš„ï¼Œæ•…æ— è®ºè®¾ç½®è¿˜æ˜¯ä½¿ç”¨å®ƒçš„å±æ€§éƒ½å¾—åˆ©ç”¨ self.&lt;å±æ€§å&gt;ã€‚å¦‚æœå°†ä¸Šé¢çš„åˆå§‹åŒ–è¯­å¥ä¸­æ–°å¢myname = nameï¼ˆ myname æ²¡æœ‰ç”¨ self. ä¿®é¥°ï¼‰ï¼Œåˆ™åªæ˜¯åœ¨å‡½æ•°å†…éƒ¨åˆ›å»ºäº†ä¸€ä¸ª myname å˜é‡ï¼Œå®ƒåœ¨å‡½æ•°æ‰§è¡Œå®Œå°±ä¼šæ¶ˆå¤±ï¼Œå¯¹æ–°å»ºçš„å®ä¾‹æ²¡æœ‰ä»»ä½•å½±å“ï¼›  ä¸æ­¤å¯¹åº”ï¼Œselfçš„å±æ€§åå’Œå‡½æ•°å†…å…¶ä»–åç§°ï¼ˆåŒ…æ‹¬å‚æ•°ï¼‰ä¹Ÿæ˜¯ä¸å†²çªçš„ï¼Œæ‰€ä»¥ä¸‹é¢çš„å†™æ³•æ­£ç¡®è€Œä¸”è§„èŒƒclass Student:    def  __init__(self, name, gender):        # self.nameæ˜¯selfçš„å±æ€§ï¼Œå•ç‹¬çš„nameæ˜¯å‡½æ•°å†…çš„å±€éƒ¨å˜é‡ï¼Œå‚æ•°ä¹Ÿæ˜¯å±€éƒ¨å˜é‡        self.name = name  è¿”å›æ—¶åªèƒ½ returnï¼Œä¸å…è®¸å¸¦è¿”å›å€¼ã€‚3. ç»§æ‰¿è‡ªçˆ¶ç±»çš„å±æ€§åˆå§‹åŒ–è¿™æ˜¯å¯¹ç»§æ‰¿è‡ªçˆ¶ç±»çš„å±æ€§è¿›è¡Œåˆå§‹åŒ–ã€‚è€Œä¸”æ˜¯ç”¨çˆ¶ç±»çš„åˆå§‹åŒ–æ–¹æ³•æ¥åˆå§‹åŒ–ç»§æ‰¿çš„å±æ€§ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå­ç±»ç»§æ‰¿äº†çˆ¶ç±»çš„æ‰€æœ‰å±æ€§å’Œæ–¹æ³•ï¼Œçˆ¶ç±»å±æ€§è‡ªç„¶ä¼šç”¨çˆ¶ç±»æ–¹æ³•æ¥è¿›è¡Œåˆå§‹åŒ–ã€‚å½“ç„¶ï¼Œå¦‚æœåˆå§‹åŒ–çš„é€»è¾‘ä¸çˆ¶ç±»çš„ä¸åŒï¼Œä¸ä½¿ç”¨çˆ¶ç±»çš„æ–¹æ³•ï¼Œè‡ªå·±é‡æ–°åˆå§‹åŒ–ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚ç‰¹åˆ«æ˜¯åœ¨ä½¿ç”¨ PyTorch æ—¶ï¼Œè‡ªå®šä¹‰ç½‘ç»œç±»ï¼ˆæ¯”å¦‚ç±»åä¸º CNN ï¼‰ä¸€èˆ¬éœ€è¦ç»§æ‰¿ PyTorch æä¾›çš„ nn.Module ï¼šclass CNN(nn.Module):    def __init__(self):        super(CNN, self).__init__()4. å‚è€ƒæ–‡çŒ®æ— ã€‚"
  },
  
  {
    "title": "æ·±åº¦å­¦ä¹ åŸºç¡€ï¼ˆåŸºæœ¬è¶…å‚æ•°å’Œä¼˜åŒ–å™¨ï¼‰",
    "url": "/posts/deep-learning-basic-hp-and-opt/",
    "categories": "Academic, Knowledge",
    "tags": "python, deep learning",
    "date": "2020-06-13 16:24:19 +0800",
    





    
    "snippet": "æœ¬æ–‡ä»‹ç»äº†æ·±åº¦å­¦ä¹ ä¸­çš„åŸºæœ¬æ¦‚å¿µï¼ŒåŒ…æ‹¬ batchã€epochã€iterationã€optimizerç­‰ï¼Œå…¶ä¸­ä¼˜åŒ–å™¨åŒ…æ‹¬ BGDã€SGDã€Adamç­‰ï¼Œä¸ºåæ·±åº¦å­¦ä¹ æä¾›åŸºç¡€ã€‚  1. åŸºæœ¬è¶…å‚æ•°          1.1. epoch      1.2. batch \\&amp; batch_size      1.3. iteration        2. ä¼˜åŒ–å™¨          2.1....",
    "content": "æœ¬æ–‡ä»‹ç»äº†æ·±åº¦å­¦ä¹ ä¸­çš„åŸºæœ¬æ¦‚å¿µï¼ŒåŒ…æ‹¬ batchã€epochã€iterationã€optimizerç­‰ï¼Œå…¶ä¸­ä¼˜åŒ–å™¨åŒ…æ‹¬ BGDã€SGDã€Adamç­‰ï¼Œä¸ºåæ·±åº¦å­¦ä¹ æä¾›åŸºç¡€ã€‚  1. åŸºæœ¬è¶…å‚æ•°          1.1. epoch      1.2. batch \\&amp; batch_size      1.3. iteration        2. ä¼˜åŒ–å™¨          2.1. æ‰¹é‡æ¢¯åº¦ä¸‹é™ï¼ˆBGDï¼‰      2.2. éšæœºæ¢¯åº¦ä¸‹é™ï¼ˆSGDï¼‰      2.3. å°æ‰¹é‡æ¢¯åº¦ä¸‹é™ï¼ˆMBGDï¼‰      2.4. æ¢¯åº¦ä¸‹é™çš„ç¼ºç‚¹      2.5. åŠ¨é‡ï¼ˆMomentumï¼‰      2.6. RMSProp      2.7. Adam        3. å‚è€ƒæ–‡çŒ®1. åŸºæœ¬è¶…å‚æ•°batchï¼ˆminibatchï¼‰ã€batch_sizeã€epochã€iterationæ˜¯æ·±åº¦å­¦ä¹ ä¸­å¸¸è§çš„å‡ ä¸ªè¶…å‚æ•°[1]ï¼š      batchï¼šè®­ç»ƒçš„æ‰¹æ¬¡ï¼Œè®­ç»ƒçš„æ€»æ‰¹æ¬¡æ•°ç§°ä¸º batch_numberï¼ˆä¹Ÿå°±æ˜¯åé¢çš„iterationï¼‰ï¼›    batch_sizeï¼šæ¯æ‰¹ï¼ˆbatchï¼‰è®­ç»ƒä½¿ç”¨çš„æ ·æœ¬çš„ä¸ªæ•°ã€‚ä¹Ÿå°±æ˜¯ä¸€æ¬¡è®­ç»ƒ batch_size ä¸ªæ ·æœ¬ï¼Œè®¡ç®—å®ƒä»¬çš„å¹³å‡æŸå¤±å‡½æ•°å€¼ï¼Œæ›´æ–°å‚æ•°ï¼›  iterationï¼šä¸€ä¸ª iteration å³è¿­ä»£è®­ç»ƒä¸€æ¬¡ï¼Œä¹Ÿå°±æ˜¯ç”¨ batch_size ä¸ªæ ·æœ¬è®­ç»ƒä¸€æ¬¡ã€‚ï¼ˆiteration = batch_numberï¼‰ï¼›  epochï¼šä¸€ä¸ª epoch æŒ‡ç”¨è®­ç»ƒé›†ä¸­çš„å…¨éƒ¨æ ·æœ¬è®­ç»ƒä¸€æ¬¡ã€‚ç®€å•ä¸€å¥è¯è¯´å°±æ˜¯ï¼Œæˆ‘ä»¬æœ‰2000ä¸ªæ•°æ®ï¼Œåˆ†æˆ4ä¸ªbatchï¼Œé‚£ä¹ˆbatch_sizeå°±æ˜¯500ã€‚è¿è¡Œæ‰€æœ‰çš„æ•°æ®è¿›è¡Œè®­ç»ƒï¼Œå®Œæˆ1ä¸ªepochï¼Œéœ€è¦è¿›è¡Œ4æ¬¡iterationsï¼Œä¹Ÿå³batch_number=4ã€‚1.1. epochä¸€ä¸ª epoch æŒ‡å°†è®­ç»ƒé›†ä¸­å…¨éƒ¨æ ·æœ¬é€å…¥ç¥ç»ç½‘ç»œå®Œæˆä¸€æ¬¡è®­ç»ƒï¼ˆå‰å‘è®¡ç®—åŠåå‘ä¼ æ’­ï¼‰çš„è¿‡ç¨‹ã€‚åœ¨å®é™…è®­ç»ƒæ—¶ï¼Œå°†æ‰€æœ‰è®­ç»ƒé›†æ•°æ®è¿­ä»£è®­ç»ƒä¸€æ¬¡æ˜¯ä¸å¤Ÿçš„ï¼Œéœ€è¦åå¤å¤šæ¬¡æ‰èƒ½æ‹Ÿåˆæ”¶æ•›ã€‚å› æ­¤ï¼Œå¾€å¾€è®¾ç½®å¤šæ¬¡epochè¿›è¡Œè®­ç»ƒã€‚éšç€epochæ•°é‡çš„å¢åŠ ï¼Œç¥ç»ç½‘ç»œä¸­æƒé‡æ›´æ–°è¿­ä»£çš„æ¬¡æ•°å¢å¤šï¼Œæ›²çº¿ä»æœ€å¼€å§‹çš„ä¸æ‹ŸåˆçŠ¶æ€ï¼Œæ…¢æ…¢è¿›å…¥ä¼˜åŒ–æ‹ŸåˆçŠ¶æ€ï¼Œæœ€ç»ˆè¿›å…¥è¿‡æ‹Ÿåˆã€‚å› æ­¤ï¼Œepochçš„ä¸ªæ•°æ˜¯éå¸¸é‡è¦çš„ã€‚é‚£ä¹ˆç©¶ç«Ÿè®¾ç½®ä¸ºå¤šå°‘æ‰åˆé€‚å‘¢ï¼Ÿææ€•æ²¡æœ‰ä¸€ä¸ªç¡®åˆ‡çš„ç­”æ¡ˆã€‚å¯¹äºä¸åŒçš„æ•°æ®åº“æ¥è¯´ï¼Œepochæ•°é‡æ˜¯ä¸åŒçš„ã€‚ä½†æ˜¯ï¼Œepochå¤§å°ä¸æ•°æ®é›†çš„å¤šæ ·åŒ–ç¨‹åº¦æœ‰å…³ï¼Œå¤šæ ·åŒ–ç¨‹åº¦è¶Šå¼ºï¼Œepochåº”è¯¥è¶Šå¤§ã€‚1.2. batch &amp; batch_sizeç”±äºè®­ç»ƒé›†ä¸­æ‰€æœ‰æ ·æœ¬çš„æ•°æ®å¾€å¾€å¾ˆå¤§ï¼Œå¦‚æœä¸€æ¬¡å°±å°†è®­ç»ƒé›†ä¸­çš„æ‰€æœ‰æ ·æœ¬æ•°æ®é€å…¥è®¡ç®—æœºï¼Œè®¡ç®—æœºå°†æ— æ³•è´Ÿè·ã€‚å› æ­¤ï¼Œä¸€èˆ¬ä¼šå°†æ•´ä¸ªè®­ç»ƒé›†æ•°æ®åˆ†æˆå‡ ä¸ªè¾ƒå°çš„æ‰¹ï¼ˆbatchesï¼‰ï¼Œæ¯æ‰¹é‡‡ç”¨ä¸€å®šæ•°é‡çš„æ ·æœ¬è¿›è¡Œè®­ç»ƒã€‚batch_size å³ä¸ºæ¯æ‰¹è®­ç»ƒä½¿ç”¨çš„æ ·æœ¬çš„ä¸ªæ•°ã€‚1.3. iterationä¸€ä¸ª iteration æŒ‡é‡‡ç”¨ batch_size ä¸ªæ ·æœ¬è®­ç»ƒä¸€æ¬¡çš„è¿‡ç¨‹ã€‚2. ä¼˜åŒ–å™¨2.1. æ‰¹é‡æ¢¯åº¦ä¸‹é™ï¼ˆBGDï¼‰æœ€æ—©æœŸçš„æœºå™¨å­¦ä¹ é‡‡ç”¨æ‰¹é‡æ¢¯åº¦ä¸‹é™ï¼ˆBatch Gradient Decentï¼ŒBGDï¼‰è¿›è¡Œå‚æ•°æ›´æ–°[2]ã€‚æ¢¯åº¦ä¸‹é™æ³•åœ¨æ¯ä¸ª epoch ä¸­éœ€è¦å¯¹å…¨éƒ¨æ ·æœ¬è¿›è¡Œæ¢¯åº¦è®¡ç®—ï¼Œç„¶åå–å¹³å‡å€¼è¿›è¡Œæƒå€¼æ›´æ–°ã€‚å³ batch_size ç­‰äºè®­ç»ƒé›†æ ·æœ¬ä¸ªæ•°ã€‚å½“æ•°æ®é›†è¾ƒå°æ—¶è¯¥æ–¹æ³•å°šå¯ã€‚éšç€æ•°æ®é›†è¿…é€Ÿå¢å¤§ï¼Œè¿™ç§æ–¹æ³•ä¸€æ¬¡å¼€é”€å¤§è¿›è€Œå ç”¨å†…å­˜è¿‡å¤§ï¼Œé€Ÿåº¦è¿‡æ…¢ã€‚Batch gradient descent å¯¹äºå‡¸å‡½æ•°å¯ä»¥æ”¶æ•›åˆ°å…¨å±€æå°å€¼ï¼Œå¯¹äºéå‡¸å‡½æ•°å¯ä»¥æ”¶æ•›åˆ°å±€éƒ¨æå°å€¼ã€‚2.2. éšæœºæ¢¯åº¦ä¸‹é™ï¼ˆSGDï¼‰åæ¥äº§ç”Ÿäº†ä¸€æ¬¡åªè®­ç»ƒä¸€ä¸ªæ ·æœ¬çš„æ–¹æ³•ï¼ˆbatchsize=1ï¼‰ï¼Œç§°ä¸ºéšæœºæ¢¯åº¦ä¸‹é™ï¼ˆStochastic Gradient Decentï¼ŒSGDï¼‰ã€‚è¯¥æ–¹æ³•æ ¹æ®æ¯æ¬¡åªä½¿ç”¨ä¸€ä¸ªæ ·æœ¬çš„æƒ…å†µæ›´æ–°ä¸€æ¬¡æƒå€¼ï¼Œå¼€é”€å°é€Ÿåº¦å¿«ï¼Œä½†ç”±äºå•ä¸ªæ ·æœ¬çš„å·¨å¤§éšæœºæ€§ï¼Œå…¨å±€æ¥çœ‹ä¼˜åŒ–æ€§èƒ½è¾ƒå·®ï¼Œæ”¶æ•›é€Ÿåº¦å¾ˆæ…¢ï¼Œäº§ç”Ÿå±€éƒ¨éœ‡è¡ï¼Œæœ‰é™è¿­ä»£æ¬¡æ•°å†…å¾ˆå¯èƒ½æ— æ³•æ”¶æ•›ã€‚SGD ä¸€æ¬¡åªè¿›è¡Œä¸€æ¬¡æ›´æ–°ï¼Œå°±æ²¡æœ‰å†—ä½™ï¼Œè€Œä¸”æ¯”è¾ƒå¿«ï¼Œå¹¶ä¸”å¯ä»¥æ–°å¢æ ·æœ¬ã€‚ç¼ºç‚¹æ˜¯SGDçš„å™ªéŸ³è¾ƒBGDè¦å¤šï¼Œä½¿å¾—SGDå¹¶ä¸æ˜¯æ¯æ¬¡è¿­ä»£éƒ½å‘ç€æ•´ä½“æœ€ä¼˜åŒ–æ–¹å‘ã€‚æ‰€ä»¥è™½ç„¶è®­ç»ƒé€Ÿåº¦å¿«ï¼Œä½†æ˜¯å‡†ç¡®åº¦ä¸‹é™ï¼Œå¹¶ä¸æ˜¯å…¨å±€æœ€ä¼˜ã€‚è™½ç„¶åŒ…å«ä¸€å®šçš„éšæœºæ€§ï¼Œä½†æ˜¯ä»æœŸæœ›ä¸Šæ¥çœ‹ï¼Œå®ƒæ˜¯ç­‰äºæ­£ç¡®çš„å¯¼æ•°çš„ã€‚2.3. å°æ‰¹é‡æ¢¯åº¦ä¸‹é™ï¼ˆMBGDï¼‰åæ¥è¯ç”Ÿçš„å°æ‰¹é‡æ¢¯åº¦ä¸‹é™ï¼ˆMini-Batch Gradient Descent ï¼ŒMBGDï¼‰ï¼Œç›¸å½“äºä¸Šè¿°ä¸¤ä¸ªâ€œæç«¯â€æ–¹æ³•çš„æŠ˜ä¸­ï¼šå°†è®­ç»ƒé›†åˆ†æˆå¤šä¸ªmini_batchï¼ˆå³å¸¸è¯´çš„batchï¼‰,ä¸€æ¬¡è¿­ä»£è®­ç»ƒä¸€ä¸ªminibatchï¼ˆå³batch_sizeä¸ªæ ·æœ¬ï¼‰ï¼Œæ ¹æ®è¯¥batchæ•°æ®çš„lossæ›´æ–°æƒå€¼ã€‚MBGD æ¯ä¸€æ¬¡åˆ©ç”¨ä¸€å°æ‰¹æ ·æœ¬ï¼Œå³ batch_size ä¸ªæ ·æœ¬è¿›è¡Œè®¡ç®—ï¼Œè¿™æ ·å®ƒå¯ä»¥é™ä½å‚æ•°æ›´æ–°æ—¶çš„æ–¹å·®ï¼Œæ”¶æ•›æ›´ç¨³å®šï¼Œå¦ä¸€æ–¹é¢å¯ä»¥å……åˆ†åœ°åˆ©ç”¨æ·±åº¦å­¦ä¹ åº“ä¸­é«˜åº¦ä¼˜åŒ–çš„çŸ©é˜µæ“ä½œæ¥è¿›è¡Œæ›´æœ‰æ•ˆçš„æ¢¯åº¦è®¡ç®—ã€‚2.4. æ¢¯åº¦ä¸‹é™çš„ç¼ºç‚¹ä¸¤å¤§ç¼ºç‚¹[3]ï¼š  MBGDä¸èƒ½ä¿è¯å¾ˆå¥½çš„æ”¶æ•›æ€§ï¼Œlearning rate å¦‚æœé€‰æ‹©çš„å¤ªå°ï¼Œæ”¶æ•›é€Ÿåº¦ä¼šå¾ˆæ…¢ï¼Œå¦‚æœå¤ªå¤§ï¼Œloss function å°±ä¼šåœ¨æå°å€¼å¤„ä¸åœåœ°éœ‡è¡ç”šè‡³åç¦»ã€‚ï¼ˆæœ‰ä¸€ç§æªæ–½æ˜¯å…ˆè®¾å®šå¤§ä¸€ç‚¹çš„å­¦ä¹ ç‡ï¼Œå½“ä¸¤æ¬¡è¿­ä»£ä¹‹é—´çš„å˜åŒ–ä½äºæŸä¸ªé˜ˆå€¼åï¼Œå°±å‡å° learning rateï¼Œä¸è¿‡è¿™ä¸ªé˜ˆå€¼çš„è®¾å®šéœ€è¦æå‰å†™å¥½ï¼Œè¿™æ ·çš„è¯å°±ä¸èƒ½å¤Ÿé€‚åº”æ•°æ®é›†çš„ç‰¹ç‚¹ã€‚ï¼‰å¯¹äºéå‡¸å‡½æ•°ï¼Œè¿˜è¦é¿å…é™·äºå±€éƒ¨æå°å€¼å¤„ï¼Œæˆ–è€…éç‚¹å¤„ï¼Œå› ä¸ºéç‚¹å‘¨å›´çš„erroræ˜¯ä¸€æ ·çš„ï¼Œæ‰€æœ‰ç»´åº¦çš„æ¢¯åº¦éƒ½æ¥è¿‘äº0ï¼ŒSGD å¾ˆå®¹æ˜“è¢«å›°åœ¨è¿™é‡Œã€‚ï¼ˆä¼šåœ¨éç‚¹æˆ–è€…å±€éƒ¨æœ€å°ç‚¹éœ‡è¡è·³åŠ¨ï¼Œå› ä¸ºåœ¨æ­¤ç‚¹å¤„ï¼Œå¦‚æœæ˜¯è®­ç»ƒé›†å…¨é›†å¸¦å…¥å³ BGDï¼Œåˆ™ä¼˜åŒ–ä¼šåœæ­¢ä¸åŠ¨ï¼Œå¦‚æœæ˜¯ mini-batch æˆ–è€… SGDï¼Œæ¯æ¬¡æ‰¾åˆ°çš„æ¢¯åº¦éƒ½æ˜¯ä¸åŒçš„ï¼Œå°±ä¼šå‘ç”Ÿéœ‡è¡ï¼Œæ¥å›è·³åŠ¨ã€‚ï¼‰  SGDå¯¹æ‰€æœ‰å‚æ•°æ›´æ–°æ—¶åº”ç”¨åŒæ ·çš„ learning rateï¼Œå¦‚æœæˆ‘ä»¬çš„æ•°æ®æ˜¯ç¨€ç–çš„ï¼Œæˆ‘ä»¬æ›´å¸Œæœ›å¯¹å‡ºç°é¢‘ç‡ä½çš„ç‰¹å¾è¿›è¡Œå¤§ä¸€ç‚¹çš„æ›´æ–°ã€‚learning rate ä¼šéšç€æ›´æ–°çš„æ¬¡æ•°é€æ¸å˜å°ã€‚2.5. åŠ¨é‡ï¼ˆMomentumï¼‰ä¸ºäº†åº”å¯¹ç¬¬ä¸€ä¸ªç¼ºç‚¹ï¼Œé‡‡ç”¨åŠ¨é‡ä¼˜åŒ–å™¨ï¼Œå¯ä»¥ä½¿å¾—æ¢¯åº¦æ–¹å‘ä¸å˜çš„ç»´åº¦ä¸Šé€Ÿåº¦å˜å¿«ï¼Œæ¢¯åº¦æ–¹å‘æœ‰æ‰€æ”¹å˜çš„ç»´åº¦ä¸Šçš„æ›´æ–°é€Ÿåº¦å˜æ…¢ï¼Œè¿™æ ·å°±å¯ä»¥åŠ å¿«æ”¶æ•›å¹¶å‡å°éœ‡è¡ã€‚\\[\\begin{aligned}v_{d\\omega}&amp;=\\beta v_{d\\omega}+(1âˆ’\\beta)d\\omega \\\\v_{db}&amp;=\\beta v_{db}+(1âˆ’\\beta)db \\\\\\omega&amp;=\\omegaâˆ’\\eta v_{d\\omega} \\\\b&amp;=bâˆ’\\eta v_{db} \\\\\\end{aligned}\\]å…¶ä¸­ï¼Œåœ¨ä¸Šé¢çš„å…¬å¼ä¸­$v_{d\\omega}$å’Œ$v_{db}$åˆ†åˆ«æ˜¯æŸå¤±å‡½æ•°åœ¨å‰ $tâˆ’1$ è½®è¿­ä»£è¿‡ç¨‹ä¸­ç´¯ç§¯çš„æ¢¯åº¦æ¢¯åº¦åŠ¨é‡ï¼Œ$\\beta$ æ˜¯æ¢¯åº¦ç´¯ç§¯çš„ä¸€ä¸ªæŒ‡æ•°ï¼Œè¿™é‡Œæˆ‘ä»¬ä¸€èˆ¬è®¾ç½®å€¼ä¸º0.9ã€‚æ‰€ä»¥Momentumä¼˜åŒ–å™¨çš„ä¸»è¦æ€æƒ³å°±æ˜¯åˆ©ç”¨äº†ç±»ä¼¼ä¸ç§»åŠ¨æŒ‡æ•°åŠ æƒå¹³å‡çš„æ–¹æ³•æ¥å¯¹ç½‘ç»œçš„å‚æ•°è¿›è¡Œå¹³æ»‘å¤„ç†çš„ï¼Œè®©æ¢¯åº¦çš„æ‘†åŠ¨å¹…åº¦å˜å¾—æ›´å°ã€‚$d\\omega$å’Œ$db$åˆ†åˆ«æ˜¯æŸå¤±å‡½æ•°åå‘ä¼ æ’­æ—¶å€™æ‰€æ±‚å¾—çš„æ¢¯åº¦ï¼Œä¸‹é¢ä¸¤ä¸ªå…¬å¼æ˜¯ç½‘ç»œæƒé‡å‘é‡å’Œåç½®å‘é‡çš„æ›´æ–°å…¬å¼ï¼Œ$\\eta$ æ˜¯ç½‘ç»œçš„å­¦ä¹ ç‡ã€‚å½“æˆ‘ä»¬ä½¿ç”¨ Momentum ä¼˜åŒ–ç®—æ³•çš„æ—¶å€™ï¼Œå¯ä»¥è§£å†³ mini-batch SGD ä¼˜åŒ–ç®—æ³•æ›´æ–°å¹…åº¦æ‘†åŠ¨å¤§çš„é—®é¢˜ï¼ŒåŒæ—¶å¯ä»¥ä½¿å¾—ç½‘ç»œçš„æ”¶æ•›é€Ÿåº¦æ›´å¿«ã€‚2.6. RMSPropRMSPropç®—æ³•çš„å…¨ç§°å« Root Mean Square Propï¼Œæ˜¯Geoffrey E. Hintonåœ¨Courseraè¯¾ç¨‹ä¸­æå‡ºçš„ä¸€ç§ä¼˜åŒ–ç®—æ³•ï¼Œæ˜¯å¯¹Momentumä¼˜åŒ–ç®—æ³•çš„è¿›ä¸€æ­¥ä¼˜åŒ–ã€‚ä¸ºäº†è¿›ä¸€æ­¥ä¼˜åŒ–æŸå¤±å‡½æ•°åœ¨æ›´æ–°ä¸­å­˜åœ¨æ‘†åŠ¨å¹…åº¦è¿‡å¤§çš„é—®é¢˜ï¼Œå¹¶ä¸”è¿›ä¸€æ­¥åŠ å¿«å‡½æ•°çš„æ”¶æ•›é€Ÿåº¦ï¼ŒRMSPropç®—æ³•å¯¹æƒé‡ $W$ å’Œåç½® $b$ çš„æ¢¯åº¦ä½¿ç”¨äº†æŒ‡æ•°åŠ æƒå¹³å‡æ•°ã€‚å…¶ä¸­ï¼Œå‡è®¾åœ¨ç¬¬ $t$ è½®è¿­ä»£è¿‡ç¨‹ä¸­ï¼Œå„ä¸ªå…¬å¼å¦‚ä¸‹æ‰€ç¤º\\[\\begin{aligned}s_{d\\omega}&amp;=\\beta s_{d\\omega}+(1âˆ’\\beta)d\\omega^2 \\\\s_{d\\omega}&amp;=\\beta s_{db}+(1âˆ’\\beta)db^2 \\\\\\omega&amp;=\\omegaâˆ’\\eta \\frac{d\\omega}{\\sqrt{s_{d\\omega}}+\\epsilon} \\\\b&amp;=bâˆ’\\eta \\frac{db}{\\sqrt{s_{db}}+\\epsilon} \\\\\\end{aligned}\\]è¿™ä¸ªåˆ†æ¯ç›¸å½“äºæ¢¯åº¦çš„å‡æ–¹æ ¹ ï¼ˆRoot Mean Squaredï¼ŒRMSï¼‰ã€‚RMSPropç®—æ³•å¯¹æ¢¯åº¦è®¡ç®—äº†å¾®åˆ†å¹³æ–¹åŠ æƒå¹³å‡æ•°ã€‚è¿™ç§åšæ³•æœ‰åˆ©äºæ¶ˆé™¤äº†æ‘†åŠ¨å¹…åº¦å¤§çš„æ–¹å‘ï¼Œç”¨æ¥ä¿®æ­£æ‘†åŠ¨å¹…åº¦ï¼Œä½¿å¾—å„ä¸ªç»´åº¦çš„æ‘†åŠ¨å¹…åº¦éƒ½è¾ƒå°ã€‚å¦ä¸€æ–¹é¢ä¹Ÿä½¿å¾—ç½‘ç»œå‡½æ•°æ”¶æ•›æ›´å¿«ã€‚ï¼ˆæ¯”å¦‚å½“ $d\\omega$ æˆ–è€… $db$ ä¸­æœ‰ä¸€ä¸ªå€¼æ¯”è¾ƒå¤§çš„æ—¶å€™ï¼Œé‚£ä¹ˆæˆ‘ä»¬åœ¨æ›´æ–°æƒé‡æˆ–è€…åç½®çš„æ—¶å€™é™¤ä»¥å®ƒä¹‹å‰ç´¯ç§¯çš„æ¢¯åº¦çš„å¹³æ–¹æ ¹ï¼Œè¿™æ ·å°±å¯ä»¥ä½¿å¾—æ›´æ–°å¹…åº¦å˜å°ï¼‰ã€‚ä¸ºäº†é˜²æ­¢åˆ†æ¯ä¸ºé›¶ï¼Œä½¿ç”¨äº†ä¸€ä¸ªå¾ˆå°çš„æ•°å€¼ $\\epsilon$ æ¥è¿›è¡Œå¹³æ»‘ï¼Œä¸€èˆ¬å–å€¼ä¸º$10^{âˆ’8}$ã€‚2.7. Adamæœ‰äº†ä¸Šé¢ä¸¤ç§ä¼˜åŒ–ç®—æ³•ï¼Œä¸€ç§å¯ä»¥ä½¿ç”¨ç±»ä¼¼äºç‰©ç†ä¸­çš„åŠ¨é‡æ¥ç´¯ç§¯æ¢¯åº¦ï¼Œå¦ä¸€ç§å¯ä»¥ä½¿å¾—æ”¶æ•›é€Ÿåº¦æ›´å¿«åŒæ—¶ä½¿å¾—æ³¢åŠ¨çš„å¹…åº¦æ›´å°ã€‚é‚£ä¹ˆè®²ä¸¤ç§ç®—æ³•ç»“åˆèµ·æ¥æ‰€å–å¾—çš„è¡¨ç°ä¸€å®šä¼šæ›´å¥½ã€‚Adamï¼ˆAdaptive Moment Estimationï¼‰ç®—æ³•æ˜¯å°†Momentumç®—æ³•å’ŒRMSPropç®—æ³•ç»“åˆèµ·æ¥ä½¿ç”¨çš„ä¸€ç§ç®—æ³•ï¼Œæˆ‘ä»¬æ‰€ä½¿ç”¨çš„å‚æ•°åŸºæœ¬å’Œä¸Šé¢è®²çš„ä¸€è‡´ï¼Œåœ¨è®­ç»ƒçš„æœ€å¼€å§‹æˆ‘ä»¬éœ€è¦åˆå§‹åŒ–æ¢¯åº¦çš„ç´¯ç§¯é‡å’Œå¹³æ–¹ç´¯ç§¯é‡[4]ã€‚å‡è®¾åœ¨è®­ç»ƒçš„ç¬¬ $t$ è½®è®­ç»ƒä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆå¯ä»¥è®¡ç®—å¾—åˆ°Momentumå’ŒRMSPropçš„å‚æ•°æ›´æ–°\\[\\begin{aligned}v_{d\\omega}&amp;=\\beta_1 v_{d\\omega}+(1âˆ’\\beta_1)d\\omega \\\\v_{db}&amp;=\\beta_1 v_{db}+(1âˆ’\\beta_1)db \\\\s_{d\\omega}&amp;=\\beta s_{d\\omega}+(1âˆ’\\beta)d\\omega^2 \\\\s_{d\\omega}&amp;=\\beta s_{db}+(1âˆ’\\beta)db^2 \\\\\\end{aligned}\\]å‚æ•° $\\beta_1$ æ‰€å¯¹åº”çš„å°±æ˜¯Momentumç®—æ³•ä¸­çš„ $\\beta$ å€¼ï¼Œä¸€èˆ¬å–0.9ï¼›å‚æ•° $\\beta_2$ æ‰€å¯¹åº”çš„å°±æ˜¯RMSPropç®—æ³•ä¸­çš„ $\\beta$ å€¼ï¼Œä¸€èˆ¬å–0.999ã€‚ç”±äºç§»åŠ¨æŒ‡æ•°å¹³å‡åœ¨è¿­ä»£å¼€å§‹çš„åˆæœŸä¼šå¯¼è‡´å’Œå¼€å§‹çš„å€¼æœ‰è¾ƒå¤§çš„å·®å¼‚ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å¯¹ä¸Šé¢æ±‚å¾—çš„å‡ ä¸ªå€¼åšåå·®ä¿®æ­£\\[\\begin{aligned}v^c_{d\\omega}&amp;=\\frac{v_{d\\omega}}{1âˆ’\\beta^t_1} \\\\v^c_{db}&amp;=\\frac{v_{d b}}{1âˆ’\\beta^t_1} \\\\s^c_{d\\omega}&amp;=\\frac{s_{d\\omega}}{1âˆ’\\beta^t_2} \\\\s^c_{db}&amp;=\\frac{s_{db}}{1âˆ’\\beta^t_2} \\\\\\end{aligned}\\]é€šè¿‡ä¸Šé¢çš„å…¬å¼ï¼Œæˆ‘ä»¬å°±å¯ä»¥æ±‚å¾—åœ¨ç¬¬ $t$ è½®è¿­ä»£è¿‡ç¨‹ä¸­ï¼Œå‚æ•°æ¢¯åº¦ç´¯ç§¯é‡çš„ä¿®æ­£å€¼ï¼Œä»è€Œæ¥ä¸‹æ¥å°±å¯ä»¥æ ¹æ®Momentumå’ŒRMSPropç®—æ³•çš„ç»“åˆæ¥å¯¹æƒé‡å’Œåç½®è¿›è¡Œæ›´æ–°\\[\\begin{aligned}\\omega&amp;=\\omegaâˆ’\\eta \\frac{v^c_{d\\omega}}{\\sqrt{s_{d\\omega}}+\\epsilon} \\\\b&amp;=bâˆ’\\eta \\frac{v^c_{db}}{\\sqrt{s_{db}}+\\epsilon} \\\\\\end{aligned}\\]å…¶ä¸­ $\\epsilon$ æ˜¯ä¸€ä¸ªå¹³æ»‘é¡¹ï¼Œæˆ‘ä»¬ä¸€èˆ¬å–å€¼ä¸º $10^{âˆ’8}$ï¼Œå­¦ä¹ ç‡ $\\eta$ åˆ™éœ€è¦æˆ‘ä»¬åœ¨è®­ç»ƒçš„æ—¶å€™è¿›è¡Œå¾®è°ƒã€‚3. å‚è€ƒæ–‡çŒ®[1] XDTY17_LK. æ·±åº¦å­¦ä¹ ä¸­çš„Epochï¼ŒBatchsizeï¼ŒIterationsï¼Œéƒ½æ˜¯ä»€ä¹ˆé¬¼ï¼Ÿ.[2] LLLiuye. æ‰¹é‡æ¢¯åº¦ä¸‹é™(BGD)ã€éšæœºæ¢¯åº¦ä¸‹é™(SGD)ä»¥åŠå°æ‰¹é‡æ¢¯åº¦ä¸‹é™(MBGD)çš„ç†è§£.[3] éƒ­è€€å. æ·±åº¦å­¦ä¹ â€”â€”ä¼˜åŒ–å™¨ç®—æ³•Optimizerè¯¦è§£ï¼ˆBGDã€SGDã€MBGDã€Momentumã€NAGã€Adagradã€Adadeltaã€RMSpropã€Adamï¼‰.[4] William. æ·±åº¦å­¦ä¹ ä¼˜åŒ–ç®—æ³•è§£æ(Momentum, RMSProp, Adam)ï¼‰."
  },
  
  {
    "title": "æ—¥å¸¸tipsæ‰‹å†Œï¼ˆTyporaæ ‡é¢˜è‡ªåŠ¨ç¼–å·ï¼‰",
    "url": "/posts/typora-auto-no/",
    "categories": "Diary",
    "tags": "markdown",
    "date": "2020-06-11 12:21:49 +0800",
    





    
    "snippet": "æœ¬æ–‡ä»‹ç»äº†å¦‚ä½•åœ¨ Markdown ç¼–è¾‘å™¨ Typora ä¸­è‡ªåŠ¨ä¸ºæ ‡é¢˜æ·»åŠ ç¼–å·ï¼ŒåŒ…æ‹¬æ­£æ–‡æ ‡é¢˜è‡ªåŠ¨ç¼–å·ã€ç›®å½•è‡ªåŠ¨ç¼–å·ã€ä¾§è¾¹æ è‡ªåŠ¨ç¼–å·ã€‚  1. æ­£æ–‡æ ‡é¢˜è‡ªåŠ¨ç¼–å·  2. ç›®å½•è‡ªåŠ¨ç¼–å·  3. ä¾§è¾¹æ è‡ªåŠ¨ç¼–å·  4. å‚è€ƒæ–‡çŒ®1. æ­£æ–‡æ ‡é¢˜è‡ªåŠ¨ç¼–å·æ ¹æ®å®˜æ–¹æ–‡æ¡£ï¼ˆhttp://support.typora.io/Auto-Numbering/ï¼‰ï¼Œé¦–å…ˆæ‰“å¼€Typoraï¼Œé€‰æ‹© â€œæ–‡ä»¶â€ =&gt; â€œ...",
    "content": "æœ¬æ–‡ä»‹ç»äº†å¦‚ä½•åœ¨ Markdown ç¼–è¾‘å™¨ Typora ä¸­è‡ªåŠ¨ä¸ºæ ‡é¢˜æ·»åŠ ç¼–å·ï¼ŒåŒ…æ‹¬æ­£æ–‡æ ‡é¢˜è‡ªåŠ¨ç¼–å·ã€ç›®å½•è‡ªåŠ¨ç¼–å·ã€ä¾§è¾¹æ è‡ªåŠ¨ç¼–å·ã€‚  1. æ­£æ–‡æ ‡é¢˜è‡ªåŠ¨ç¼–å·  2. ç›®å½•è‡ªåŠ¨ç¼–å·  3. ä¾§è¾¹æ è‡ªåŠ¨ç¼–å·  4. å‚è€ƒæ–‡çŒ®1. æ­£æ–‡æ ‡é¢˜è‡ªåŠ¨ç¼–å·æ ¹æ®å®˜æ–¹æ–‡æ¡£ï¼ˆhttp://support.typora.io/Auto-Numbering/ï¼‰ï¼Œé¦–å…ˆæ‰“å¼€Typoraï¼Œé€‰æ‹© â€œæ–‡ä»¶â€ =&gt; â€œåå¥½è®¾ç½®â€ï¼Œåˆ‡æ¢åˆ° â€œå¤–è§‚â€ é€‰é¡¹å¡ï¼Œç‚¹å‡» â€œæ‰“å¼€ä¸»é¢˜æ–‡ä»¶å¤¹æŒ‰é’®â€ç„¶åæ–°å»ºä¸€ä¸ª .txt æ–‡ä»¶ï¼Œé‡å‘½åä¸º base.user.css æ–‡ä»¶ï¼Œå¡«å……ä¸‹åˆ—ä»£ç /************************************** * Header Counters in Content **************************************//** initialize css counter */#write {    counter-reset: h1}h1 {    counter-reset: h2}h2 {    counter-reset: h3}h3 {    counter-reset: h4}h4 {    counter-reset: h5}h5 {    counter-reset: h6}/** put counter result into headings */#write h1:before {    counter-increment: h1;    content: counter(h1) \". \"}#write h2:before {    counter-increment: h2;    content: counter(h1) \".\" counter(h2) \". \"}#write h3:before,h3.md-focus.md-heading:before /** override the default style for focused headings */ {    counter-increment: h3;    content: counter(h1) \".\" counter(h2) \".\" counter(h3) \". \"}#write h4:before,h4.md-focus.md-heading:before {    counter-increment: h4;    content: counter(h1) \".\" counter(h2) \".\" counter(h3) \".\" counter(h4) \". \"}#write h5:before,h5.md-focus.md-heading:before {    counter-increment: h5;    content: counter(h1) \".\" counter(h2) \".\" counter(h3) \".\" counter(h4) \".\" counter(h5) \". \"}#write h6:before,h6.md-focus.md-heading:before {    counter-increment: h6;    content: counter(h1) \".\" counter(h2) \".\" counter(h3) \".\" counter(h4) \".\" counter(h5) \".\" counter(h6) \". \"}/** override the default style for focused headings */#write&gt;h3.md-focus:before,#write&gt;h4.md-focus:before,#write&gt;h5.md-focus:before,#write&gt;h6.md-focus:before,h3.md-focus:before,h4.md-focus:before,h5.md-focus:before,h6.md-focus:before {    color: inherit;    border: inherit;    border-radius: inherit;    position: inherit;    left:initial;    float: none;    top:initial;    font-size: inherit;    padding-left: inherit;    padding-right: inherit;    vertical-align: inherit;    font-weight: inherit;    line-height: inherit;}å…³é—­Typoraåé‡å¯ï¼Œæ ‡é¢˜å°±å°†ä¼šè‡ªåŠ¨å¢åŠ æ•°å­—ç¼–å·ã€‚å¦‚æœä¸æƒ³è¦æ•°å­—ä¸æ ‡é¢˜ä¹‹é—´çš„ . ï¼Œåˆ™éœ€è¦ä¿®æ”¹ .css æ–‡ä»¶ä¸­ï¼Œ/** put counter result into headings */ åé¢çš„ä»£ç ï¼Œå°†æ¯ä¸ªæ ‡é¢˜æœ€åä¸€ä¸ª \". \" ä¸­çš„å¥ç‚¹å»æ‰ï¼Œå³å°†/** put counter result into headings */#write h1:before {    counter-increment: h1;    content: counter(h1) \". \" /* &lt;--- delete this dot */}...æ”¹ä¸º/** put counter result into headings */#write h1:before {    counter-increment: h1;    content: counter(h1) \" \" /* &lt;--- dot deleted */}...2. ç›®å½•è‡ªåŠ¨ç¼–å·å¦‚æœæƒ³è¦åœ¨è‡ªåŠ¨ç”Ÿæˆçš„ç›®å½•ä¸­é™„å¸¦ç¼–å·ï¼Œéœ€è¦é¢å¤–å†åœ¨ .css æ–‡ä»¶ä¸­å¢åŠ ä»£ç æ®µ[2]/************************************** * Header Counters in TOC **************************************/ /* No link underlines in TOC */.md-toc-inner {    text-decoration: none;} .md-toc-content {    counter-reset: h1toc} .md-toc-h1 {    margin-left: 0;    font-size: 1.5rem;    counter-reset: h2toc} .md-toc-h2 {    font-size: 1.1rem;    margin-left: 2rem;    counter-reset: h3toc} .md-toc-h3 {    margin-left: 3rem;    font-size: .9rem;    counter-reset: h4toc} .md-toc-h4 {    margin-left: 4rem;    font-size: .85rem;    counter-reset: h5toc} .md-toc-h5 {    margin-left: 5rem;    font-size: .8rem;    counter-reset: h6toc} .md-toc-h6 {    margin-left: 6rem;    font-size: .75rem;} .md-toc-h1:before {    color: black;    counter-increment: h1toc;    content: counter(h1toc) \". \" /* &lt;--- delete this dot if not wanted */} .md-toc-h1 .md-toc-inner {    margin-left: 0;} .md-toc-h2:before {    color: black;    counter-increment: h2toc;    content: counter(h1toc) \". \" counter(h2toc) \". \" /* &lt;--- delete this dot if not wanted */} .md-toc-h2 .md-toc-inner {    margin-left: 0;} .md-toc-h3:before {    color: black;    counter-increment: h3toc;    content: counter(h1toc) \". \" counter(h2toc) \". \" counter(h3toc) \". \" /* &lt;--- delete this dot if not wanted */} .md-toc-h3 .md-toc-inner {    margin-left: 0;} .md-toc-h4:before {    color: black;    counter-increment: h4toc;    content: counter(h1toc) \". \" counter(h2toc) \". \" counter(h3toc) \". \" counter(h4toc) \". \" /* &lt;--- delete this dot if not wanted */} .md-toc-h4 .md-toc-inner {    margin-left: 0;} .md-toc-h5:before {    color: black;    counter-increment: h5toc;    content: counter(h1toc) \". \" counter(h2toc) \". \" counter(h3toc) \". \" counter(h4toc) \". \" counter(h5toc) \". \" /* &lt;--- delete this dot if not wanted */} .md-toc-h5 .md-toc-inner {    margin-left: 0;} .md-toc-h6:before {    color: black;    counter-increment: h6toc;    content: counter(h1toc) \". \" counter(h2toc) \". \" counter(h3toc) \". \" counter(h4toc) \". \" counter(h5toc) \". \" counter(h6toc) \". \" /* &lt;--- delete this dot if not wanted */} .md-toc-h6 .md-toc-inner {    margin-left: 0;}è‹¥è¦ç§»é™¤æ•°å­—ä¸æ ‡é¢˜é—´çš„å¥ç‚¹ï¼Œç±»ä¼¼ä¸Šè¾¹çš„åšæ³•ï¼Œå°† \". \" æ”¹ä¸º \" \"ã€‚3. ä¾§è¾¹æ è‡ªåŠ¨ç¼–å·å¦‚æœæƒ³è¦åœ¨Typoraçš„ä¾§è¾¹æ ä¸­é™„å¸¦ç¼–å·ï¼Œéœ€è¦é¢å¤–å†åœ¨ .css æ–‡ä»¶ä¸­ç»§ç»­å¢åŠ ä»£ç æ®µ[3]/************************************** * Header Counters in Sidebar **************************************/.sidebar-content {    counter-reset: h1} .outline-h1 {    counter-reset: h2} .outline-h2 {    counter-reset: h3} .outline-h3 {    counter-reset: h4} .outline-h4 {    counter-reset: h5} .outline-h5 {    counter-reset: h6} .outline-h1&gt;.outline-item&gt;.outline-label:before {    counter-increment: h1;    content: counter(h1) \". \" /* &lt;--- delete this dot if not wanted */} .outline-h2&gt;.outline-item&gt;.outline-label:before {    counter-increment: h2;    content: counter(h1) \".\" counter(h2) \". \" /* &lt;--- delete this dot if not wanted */} .outline-h3&gt;.outline-item&gt;.outline-label:before {    counter-increment: h3;    content: counter(h1) \".\" counter(h2) \".\" counter(h3) \". \" /* &lt;--- delete this dot if not wanted */} .outline-h4&gt;.outline-item&gt;.outline-label:before {    counter-increment: h4;    content: counter(h1) \".\" counter(h2) \".\" counter(h3) \".\" counter(h4) \". \" /* &lt;--- delete this dot if not wanted */} .outline-h5&gt;.outline-item&gt;.outline-label:before {    counter-increment: h5;    content: counter(h1) \".\" counter(h2) \".\" counter(h3) \".\" counter(h4) \".\" counter(h5) \". \" /* &lt;--- delete this dot if not wanted */} .outline-h6&gt;.outline-item&gt;.outline-label:before {    counter-increment: h6;    content: counter(h1) \".\" counter(h2) \".\" counter(h3) \".\" counter(h4) \".\" counter(h5) \".\" counter(h6) \". \" /* &lt;--- delete this dot if not wanted */}è‹¥è¦ç§»é™¤æ•°å­—ä¸æ ‡é¢˜é—´çš„å¥ç‚¹ï¼Œç±»ä¼¼ä¸Šè¾¹çš„åšæ³•ï¼Œå°† \". \" æ”¹ä¸º \" \"ã€‚4. å‚è€ƒæ–‡çŒ®[1] Typora. Auto Numbering for Headings.[2] Guest. TOC Autonumbering for Typora.[3] Guest. Auto numbering Typora outline."
  },
  
  {
    "title": "ç²¾åº¦æŸå¤±å’ŒæŠ–é¢¤",
    "url": "/posts/precision-loss-and-jitter/",
    "categories": "Tutorial, Coding",
    "tags": "simulation, opengl",
    "date": "2020-06-09 20:23:49 +0800",
    





    
    "snippet": "æœ¬æ–‡ä»‹ç»äº† OpenGL ä¸­å› æ¸²æŸ“å·¨å‹å°ºåº¦åœºæ™¯æ—¶å‡ºç°çš„ç²¾åº¦æŸå¤±é—®é¢˜ï¼Œä»¥åŠéšä¹‹è€Œæ¥çš„æŠ–é¢¤ç°è±¡ï¼Œæ·±å…¥åˆ†æäº†é—®é¢˜äº§ç”Ÿçš„åŸå› ï¼Œå¹¶æœ€ç»ˆç»™å‡ºäº†è§£å†³ç›¸å¯¹ä¸­å¿ƒçš„æ¸²æŸ“å’Œç›¸å¯¹è§†è§’çš„æ¸²æŸ“è§£å†³æ–¹æ¡ˆã€‚  1. æŠ–é¢¤  2. ç›¸å¯¹äºä¸­å¿ƒçš„æ¸²æŸ“  3. ç›¸å¯¹äºè§†è§’çš„æ¸²æŸ“  4. å‚è€ƒæ–‡çŒ®1. æŠ–é¢¤ä½¿ç”¨OpenGLå’ŒDirect3Dç­‰å›¾å½¢apiï¼Œå›¾å½¢å¤„ç†å•å…ƒï¼ˆGPUï¼‰åœ¨å†…éƒ¨é‡‡ç”¨å•ç²¾åº¦ï¼ˆ32ä½ï¼‰æµ®ç‚¹æ•°å­—è¿›è¡Œæ“ä½œï¼Œè¿™äº›æ•°å­—åœ¨å¾ˆ...",
    "content": "æœ¬æ–‡ä»‹ç»äº† OpenGL ä¸­å› æ¸²æŸ“å·¨å‹å°ºåº¦åœºæ™¯æ—¶å‡ºç°çš„ç²¾åº¦æŸå¤±é—®é¢˜ï¼Œä»¥åŠéšä¹‹è€Œæ¥çš„æŠ–é¢¤ç°è±¡ï¼Œæ·±å…¥åˆ†æäº†é—®é¢˜äº§ç”Ÿçš„åŸå› ï¼Œå¹¶æœ€ç»ˆç»™å‡ºäº†è§£å†³ç›¸å¯¹ä¸­å¿ƒçš„æ¸²æŸ“å’Œç›¸å¯¹è§†è§’çš„æ¸²æŸ“è§£å†³æ–¹æ¡ˆã€‚  1. æŠ–é¢¤  2. ç›¸å¯¹äºä¸­å¿ƒçš„æ¸²æŸ“  3. ç›¸å¯¹äºè§†è§’çš„æ¸²æŸ“  4. å‚è€ƒæ–‡çŒ®1. æŠ–é¢¤ä½¿ç”¨OpenGLå’ŒDirect3Dç­‰å›¾å½¢apiï¼Œå›¾å½¢å¤„ç†å•å…ƒï¼ˆGPUï¼‰åœ¨å†…éƒ¨é‡‡ç”¨å•ç²¾åº¦ï¼ˆ32ä½ï¼‰æµ®ç‚¹æ•°å­—è¿›è¡Œæ“ä½œï¼Œè¿™äº›æ•°å­—åœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šéµå¾ªIEEE 754è§„èŒƒã€‚å•ç²¾åº¦å€¼é€šå¸¸è¢«è®¤ä¸ºæœ‰7ä¸ªç²¾ç¡®çš„åè¿›åˆ¶æ•°å­—ï¼›å› æ­¤ï¼Œéšç€æ•°å­—è¶Šæ¥è¶Šå¤§ï¼Œæ•°å­—çš„è¡¨ç¤ºä¹Ÿè¶Šæ¥è¶Šä¸ç²¾ç¡®ã€‚åœ¨å¤§å‹åœºæ™¯æ¸²æŸ“ä¸­ï¼Œæ¸²æŸ“è¿œè·ç¦»çš„å¯¹è±¡å¾ˆå¸¸è§ï¼Œå¦‚æœæ¸²æŸ“ä¸æ­£ç¡®ï¼Œå¯¹è±¡å¯èƒ½ä¼šåœ¨è§†è§‰ä¸Šå‘ç”ŸæŠ–é¢¤ï¼ˆjitterï¼‰ã€‚å½“è§‚å¯Ÿè€…é è¿‘ç‰©ä½“æ—¶ï¼Œè¿™ä¸ªé—®é¢˜å˜å¾—æ›´åŠ æ˜æ˜¾ã€‚ å›¾ 1 æ— æŠ–é¢¤å’Œå­˜åœ¨æŠ–é¢¤æ—¶çš„åœºæ™¯ã€‚åœºæ™¯æŒ‰ç…§çœŸå®æ¯”ä¾‹æ¸²æŸ“ï¼Œå•ä½ç±³ï¼Œä¸¤é¢—å«æ˜Ÿè¿è¡Œäºåœ°çƒé™æ­¢è½¨é“ï¼ˆè½¨é“åŠå¾„42164137mï¼‰ï¼Œç›¸è·2.75mã€‚åœ¨èˆªå¤©é¢†åŸŸçš„åœºæ™¯æ¸²æŸ“ä¸­ï¼Œç²¾ç¡®åœ°æ”¾ç½®å¯¹è±¡æ˜¯æœ€é‡è¦çš„ã€‚æˆ‘ä»¬å¸Œæœ›è‡³å°‘æœ‰1cmçš„ç²¾åº¦ã€‚å…è®¸å¤§çº¦1cmå¢é‡çš„æœ€å¤§æ•°å­—æ˜¯131071ï¼ˆ$2^{17}-1$ï¼‰mã€‚ä¸‹é¢çš„ä»£ç ç‰‡æ®µæ˜¾ç¤ºäº†ä»£ç ä¸­æ­£åœ¨åˆ†é…çš„floatValueå€¼ï¼Œç›¸åº”çš„æ³¨é‡Šåˆ™ä¸ºè¯¥å€¼å®é™…å­˜å‚¨åœ¨CPUç³»ç»Ÿå†…å­˜ä¸­çš„å€¼ã€‚å¯ä»¥çœ‹åˆ°ï¼Œè™½ç„¶å­˜å‚¨çš„å€¼ä¸å®Œå…¨ç­‰äºæŒ‡å®šçš„å€¼ï¼Œä½†è¯¯å·®åœ¨0.5å˜ç±³å†…ã€‚float floatValue;floatValue = 131071.01; // 131071.0078125floatValue = 131071.02; // 131071.0234375floatValue = 131071.03; // 131071.0312500floatValue = 131071.04; // 131071.0390625floatValue = 131071.05; // 131071.0468750floatValue = 131071.06; // 131071.0625000floatValue = 131071.07; // 131071.0703125floatValue = 131071.08; // 131071.0781250floatValue = 131071.09; // 131071.0937500å½“å°†floatValueå†å¢åŠ 1cmæ—¶ï¼Œå…¶çœŸå®çš„æŒ‡å®šå€¼ä¸å®é™…å­˜å‚¨çš„å€¼ä¹‹é—´çš„è¯¯å·®å°†è¶…å‡º1cmï¼Œå…¶ä¸­ä¸€äº›ä¸åŒçš„æŒ‡å®šå€¼å¯¹åº”ç€ç›¸åŒçš„å­˜å‚¨å€¼ï¼ˆä»£ç ä¸­æ ‡*çš„ä½ç½®ï¼‰ã€‚float floatValue;floatValue = 131072.01; // 131072.0156250 *floatValue = 131072.02; // 131072.0156250 *floatValue = 131072.03; // 131072.0312500floatValue = 131072.04; // 131072.0468750 **floatValue = 131072.05; // 131072.0468750 **floatValue = 131072.06; // 131072.0625000 *floatValue = 131072.07; // 131072.0625000 *floatValue = 131072.08; // 131072.0781250floatValue = 131072.09; // 131072.0937500åœ¨1:1çš„åœºæ™¯ä¸­ï¼Œåœ°çƒçš„åŠå¾„å¯è¾¾6378137mï¼Œå¦‚æœéœ€è¦å°†ä¸€ä¸ªç‰©ä½“æ”¾ç½®åœ¨åœ°çƒè¡¨é¢æˆ–è€…ç¯ç»•åœ°çƒçš„æŸä¸ªè½¨é“ä¸Šï¼Œå…¶ä½ç½®å°†è¿œè¿œå¤§äº131071mã€‚ç‰©ä½“çš„æ¸²æŸ“ç²¾åº¦å°†ä¼šå˜å¾—å¾ˆå·®ï¼Œç”šè‡³éš¾ä»¥è¾¾åˆ°åˆ†ç±³çº§çš„ç²¾åº¦ã€‚å½“è§‚å¯Ÿè€…è¿‘è·ç¦»è§‚å¯Ÿè¿™æ ·ä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œè¯¥å¯¹è±¡å°†å‘ç”ŸæŠ–é¢¤ã€‚å¦‚æœå¯ä»¥ä»CPUå°†åŒç²¾åº¦ï¼ˆ64ä½ï¼‰æµ®ç‚¹æ•°å­—ä¼ é€’åˆ°GPUï¼Œå¹¶ä¸”GPUå†…éƒ¨ä½¿ç”¨åŒç²¾åº¦æµ®ç‚¹æ•°å­—æ“ä½œï¼Œé‚£ä¹ˆåœ¨åœ°çƒä¸Šæˆ–åœ°çƒé™„è¿‘æ¸²æŸ“çš„å¯¹è±¡å°±ä¸ä¼šå‡ºç°æŠ–åŠ¨é—®é¢˜ã€‚ä½†æ­£å¦‚å•ç²¾åº¦å€¼ä¸€æ ·ï¼Œç‰©ä½“ç¦»åœ°çƒè¶Šè¿œï¼Œç²¾åº¦å°±è¶Šå·®ï¼ŒæŠ–åŠ¨è¿˜æ˜¯ä¼šå‘ç”Ÿã€‚è™½ç„¶æ²¡æœ‰è¿›è¡Œç²¾ç¡®è®¡ç®—ï¼Œä½†æ˜¯å¦‚æœå¸Œæœ›å¤ªé˜³ç³»å†…çš„ä»»ä½•ä¸œè¥¿éƒ½èƒ½æ¯«æ— é—®é¢˜åœ°å‘ˆç°å‡ºæ¥ï¼Œé‡‡ç”¨åŒç²¾åº¦æµ®ç‚¹æ•°å¾ˆå¯èƒ½ä»ç„¶éš¾ä»¥èƒœä»»ã€‚2. ç›¸å¯¹äºä¸­å¿ƒçš„æ¸²æŸ“90å¹´ä»£STKæ¨å‡ºæ—¶ï¼Œäººä»¬å¾ˆå¿«å‘ç°ï¼Œå½“æ¸²æŸ“åœ°çƒå’Œè½¨é“ä¸Šçš„ç‰©ä½“ï¼ˆæ¯”å¦‚é£è¡Œå™¨Space Shuttleæ—¶ï¼‰ï¼ŒæŠ–åŠ¨å¾ˆå¿«å°±è¡¨ç°å‡ºæ¥äº†ã€‚ä¸€ç§è§£å†³æ–¹æ¡ˆæ˜¯å°†å¯¹è±¡ç›¸å¯¹äºè§‚å¯Ÿè€…è¿›è¡Œæ¸²æŸ“ï¼Œè€Œä¸æ˜¯ç›¸å¯¹äºä¸–ç•Œåæ ‡ç³»åŸç‚¹è¿›è¡Œæ¸²æŸ“ã€‚ä¸–ç•Œç©ºé—´ä¸­é è¿‘è§‚å¯Ÿè€…çš„åƒç´ åŒºåŸŸè¦æ¯”è¿œç¦»è§‚å¯Ÿè€…çš„åŒºåŸŸå°å¾—å¤šï¼›å› æ­¤ï¼Œéšç€è§‚å¯Ÿè€…æ¥è¿‘å¯¹è±¡ï¼Œéœ€è¦è¶Šæ¥è¶Šç²¾ç¡®åœ°æ¸²æŸ“å¯¹è±¡ä¸”ä¸èƒ½äº§ç”ŸæŠ–åŠ¨ã€‚ç›¸å¯¹äºè§‚å¯Ÿè€…æ¸²æŸ“å¯¹è±¡å¯æä¾›æ‰€éœ€çš„ç²¾åº¦ã€‚é¦–å…ˆä»‹ç»ç›¸å¯¹äºä¸­å¿ƒçš„æ¸²æŸ“ï¼ˆRendering Relative to Center, RTCï¼‰æŠ€æœ¯ã€‚RTCæŠ€æœ¯çš„æ ¸å¿ƒæ˜¯é‡æ–°è®¡ç®—ModelViewçŸ©é˜µï¼Œæ¶‰åŠçš„å‘é‡åŒ…æ‹¬ï¼š      MV_GPUï¼šä»CPUä¼ é€’åˆ°GPUçš„å•ç²¾åº¦çš„ModelViewçŸ©é˜µï¼Œç”¨ä»¥å°†é£è¡Œå™¨ï¼ˆSpaceShuttleï¼‰ä»ä¸–ç•Œç©ºé—´å˜æ¢è‡³ç›¸æœºç©ºé—´        MV_CPUï¼šå‚¨å­˜åœ¨CPUçš„åŒç²¾åº¦ModelViewçŸ©é˜µ        SpaceShuttle_Eyeï¼šé£è¡Œå™¨åœ¨ç›¸æœºç©ºé—´ä¸­ç›¸å¯¹äºè§‚å¯Ÿè€…çš„åæ ‡        SpaceShuttle_Worldï¼šé£è¡Œå™¨åœ¨ä¸–ç•Œç©ºé—´ä¸­çš„åæ ‡  é¦–å…ˆæ ¹æ®ModelçŸ©é˜µå’ŒViewçŸ©é˜µè®¡ç®—ModelViewçŸ©é˜µMV_CPUï¼Œç„¶åæ ¹æ®è¡Œå™¨åœ¨ä¸–ç•Œç©ºé—´ä¸­çš„åæ ‡è®¡ç®—é£è¡Œå™¨ç›¸å¯¹äºè§‚å¯Ÿè€…çš„åæ ‡ï¼šSpaceShuttle_Eye = MV_CPU * SpaceShuttle_World;ç„¶åï¼Œå°†SpaceShuttle_Eyeèµ‹å€¼ç»™MV_CPUçš„å¹³ç§»åˆ†é‡ï¼ˆç¬¬å››åˆ—å‰ä¸‰ä¸ªåˆ†é‡ï¼‰ï¼šMV_CPU[0, 3] = SpaceShuttle_Eye.x;MV_CPU[1, 3] = SpaceShuttle_Eye.y;MV_CPU[2, 3] = SpaceShuttle_Eye.z;æœ€åï¼Œå°†MV_CPUä¼ é€’ç»™GPUï¼Œå¾—åˆ°MV_GPUï¼Œå…¶ä¸­å­˜åœ¨åŒç²¾åº¦å‘å•ç²¾åº¦çš„è½¬æ¢ï¼šMV_GPU = MV_CPU;ä¸‹é¢é‡‡ç”¨çœŸå®æ•°å€¼æ¥å¤ç°ä¸Šè¿°è®¡ç®—è¿‡ç¨‹ã€‚é£è¡Œå™¨åœ¨ä¸–ç•Œç©ºé—´çš„åæ ‡ä¸ºSpaceShuttle_World = (16678139.999999, 0.00000, 0.000000)å‡è®¾ç›¸æœºä½äºè·ç¦»é£è¡Œå™¨å¾ˆè¿‘çš„æŸå¤„MV_CPU = [0.000000  -0.976339   0.216245        -13.7907750.451316  -0.192969  -0.871249   -7527123.0048360.892363   0.097595   0.440638  -14883050.1149440.000000   0.000000   0.000000          1.000000];åˆ™é£è¡Œå™¨ç›¸å¯¹äºç›¸æœºè§‚å¯Ÿè€…çš„ç›¸å¯¹åæ ‡ä¸ºSpaceShuttle_Eye = MV_CPU * SpaceShuttle_World;// = (-13.790775, -11.572596, -95.070125)å°†ä¸Šè¿°å€¼æ’å…¥MV_CPUçš„å¹³ç§»åˆ†é‡å¯ä»¥å¾—åˆ°:MV_CPU = [0.000000  -0.976339   0.216245  -13.790775 0.451316  -0.192969  -0.871249  -11.5725960.892363   0.097595   0.440638  -95.0701250.000000   0.000000   0.000000    1.000000];æœ€åå°†MV_CPUä¼ é€’ç»™GPUï¼ˆç€è‰²å™¨ï¼‰ï¼Œå¾—åˆ°MV_GPUã€‚å¯ä»¥çœ‹å‡ºï¼Œé€šè¿‡ä¸Šè¿°èµ‹å€¼æ’å…¥ï¼ŒåŸæœ¬å¾ˆå¤§çš„å¹³ç§»åˆ†é‡æ˜¾è‘—çš„å˜å°äº†ï¼Œè¿™æ ·å°±å¯ä»¥æ¶ˆé™¤æŠ–é¢¤ã€‚ä¸€æ—¦è§†è§’ç§»åŠ¨ï¼Œå°±éœ€è¦é‡æ–°è®¡ç®—MV_GPUï¼Œä½†æ˜¯ç›¸æ¯”æ¸²æŸ“æˆåƒä¸Šä¸‡çš„é£è¡Œå™¨é¡¶ç‚¹è€Œè¨€ï¼Œè®¡ç®—çŸ©é˜µçš„èµ„æºæ¶ˆè€—å‡ ä¹å¯ä»¥å¿½ç•¥ä¸è®¡ã€‚3. ç›¸å¯¹äºè§†è§’çš„æ¸²æŸ“ä¸€èˆ¬è€Œè¨€ï¼ŒRTCæŠ€æœ¯å·²ç»è¶³å¤Ÿè¾¾åˆ°cmçº§åˆ«çš„ç²¾åº¦ï¼Œåªè¦æ¨¡å‹çš„é¡¶ç‚¹è·ç¦»æ¨¡å‹ä¸­å¿ƒå°äº131070mï¼ˆå®é™…ä¸Šå¯èƒ½æ›´å°ï¼Œä½†æš‚æ—¶æœªæœ‰æ—¶é—´åˆ†ææµ‹è¯•ï¼‰ã€‚ä½†æ˜¯åœ¨æŸäº›æç«¯æƒ…å†µä¸‹ï¼ŒRTCæŠ€æœ¯ä»ç„¶æ— æ³•æ¶ˆé™¤æŠ–é¢¤ã€‚å¦‚æœä¸€ä¸ªç‰©ä½“çš„é¡¶ç‚¹é—´éš”è¶…è¿‡131070ç±³æ€ä¹ˆåŠï¼Ÿå½“ç»˜åˆ¶å«æ˜Ÿè½¨é“çº¿ã€ç‰©ä½“ä¹‹é—´çš„çº¿å’Œå‡ ä½•å¹³é¢ï¼ˆå¦‚èµ¤é“å¹³é¢ï¼‰æ—¶ï¼Œè¿™å¹¶ä¸å°‘è§ã€‚æ­¤æ—¶ï¼Œæ²¡æœ‰ä¸€ä¸ªå¯ç”¨çš„ä¸­å¿ƒå¯ä»¥ç”¨æ¥é˜²æ­¢æŠ–åŠ¨ã€‚æ­¤æ—¶ï¼Œéœ€è¦é‡‡ç”¨ä¸€ç§æ”¹è¿›çš„æŠ€æœ¯ï¼Œå³ç›¸å¯¹äºè§†è§’çš„æ¸²æŸ“ï¼ˆRendering Relative to Eye, RTEï¼‰ã€‚é™äºç¯‡å¹…ï¼Œæ­¤å¤„ä¸å†ç»§ç»­å±•å¼€ï¼Œæœ‰éœ€è¦å¯ä»¥å‚çœ‹å‚è€ƒæ–‡çŒ®ã€‚4. å‚è€ƒæ–‡çŒ®[1]\tSTK. Precisions, Precisions"
  },
  
  {
    "title": "æ·±åº¦ç¼“å†²å’Œæ·±åº¦å†²çª",
    "url": "/posts/depth-buffer-and-z-fighting/",
    "categories": "Tutorial, Coding",
    "tags": "simulation, opengl",
    "date": "2020-06-08 22:21:49 +0800",
    





    
    "snippet": "æœ¬æ–‡ä»‹ç»äº† OpenGL ä¸­æ·±åº¦ç¼“å†²çš„æ¦‚å¿µï¼Œåˆ†æäº†åœ¨æ¸²æŸ“å·¨å‹å°ºåº¦åœºæ™¯ä¸‹çš„æ·±åº¦å†²çªé—®é¢˜ï¼Œå¹¶ç»™å‡ºäº†é‡‡ç”¨å¯¹æ•°æ·±åº¦ç¼“å†²çš„å…·ä½“è§£å†³æ–¹æ¡ˆã€‚  1. æ·±åº¦ç¼“å†²  2. æ·±åº¦å†²çª  3. å¯¹æ•°æ·±åº¦ç¼“å†²  4. å‚è€ƒæ–‡çŒ®1. æ·±åº¦ç¼“å†²OpenGLæ˜¯ä¸€ä¸ªå³æ‰‹åæ ‡ç³»ã€‚ç®€å•æ¥è¯´ï¼Œå°±æ˜¯æ­£xè½´åœ¨ä½ çš„å³æ‰‹è¾¹ï¼Œæ­£yè½´æœä¸Šï¼Œè€Œæ­£zè½´æ˜¯æœå‘åæ–¹çš„ã€‚æƒ³è±¡ä½ çš„å±å¹•å¤„äºä¸‰ä¸ªè½´çš„ä¸­å¿ƒï¼Œåˆ™æ­£zè½´ç©¿è¿‡ä½ çš„å±å¹•æœå‘ä½ ã€‚åœ¨OpenGLä¸­é‡‡ç”¨z...",
    "content": "æœ¬æ–‡ä»‹ç»äº† OpenGL ä¸­æ·±åº¦ç¼“å†²çš„æ¦‚å¿µï¼Œåˆ†æäº†åœ¨æ¸²æŸ“å·¨å‹å°ºåº¦åœºæ™¯ä¸‹çš„æ·±åº¦å†²çªé—®é¢˜ï¼Œå¹¶ç»™å‡ºäº†é‡‡ç”¨å¯¹æ•°æ·±åº¦ç¼“å†²çš„å…·ä½“è§£å†³æ–¹æ¡ˆã€‚  1. æ·±åº¦ç¼“å†²  2. æ·±åº¦å†²çª  3. å¯¹æ•°æ·±åº¦ç¼“å†²  4. å‚è€ƒæ–‡çŒ®1. æ·±åº¦ç¼“å†²OpenGLæ˜¯ä¸€ä¸ªå³æ‰‹åæ ‡ç³»ã€‚ç®€å•æ¥è¯´ï¼Œå°±æ˜¯æ­£xè½´åœ¨ä½ çš„å³æ‰‹è¾¹ï¼Œæ­£yè½´æœä¸Šï¼Œè€Œæ­£zè½´æ˜¯æœå‘åæ–¹çš„ã€‚æƒ³è±¡ä½ çš„å±å¹•å¤„äºä¸‰ä¸ªè½´çš„ä¸­å¿ƒï¼Œåˆ™æ­£zè½´ç©¿è¿‡ä½ çš„å±å¹•æœå‘ä½ ã€‚åœ¨OpenGLä¸­é‡‡ç”¨zåæ ‡æ¥æè¿°æ·±åº¦ä¿¡æ¯ã€‚ä¸€èˆ¬åœ°ï¼Œzè½´çš„åæ ‡åŸç‚¹åœ¨å±å¹•ä¸Šï¼Œå±å¹•é‡Œä¸ºè´Ÿè½´ï¼Œå‘å¤–ä¸ºæ­£è½´ã€‚OpenGLä¸­çš„è§‚å¯Ÿè€…ä¸ºæ‘„åƒæœºã€‚ä¸€èˆ¬åœ°ï¼Œæ‘„åƒæœºçš„åˆå§‹ä½ç½®åœ¨OpenGLçª—å£çš„æ­£ä¸­å¿ƒã€‚å›¾ 1 åæ ‡ç³»å®šä¹‰OpenGLåœ¨ç»˜åˆ¶å›¾å½¢æ—¶ï¼Œæœ‰äº›å›¾å½¢åœ¨å‰ï¼Œæœ‰äº›å›¾å½¢åœ¨åï¼Œè¿™æ—¶å€™å°±ç”¨åˆ°äº†zåæ ‡ã€‚å½“ç„¶ï¼Œå¹¶ä¸ä¸€å®šå›¾å½¢1çš„zåæ ‡å¤§äºå›¾å½¢2çš„zåæ ‡ï¼Œå°±è¯´å›¾å½¢1ä¼šç»˜åˆ¶åœ¨å›¾å½¢2çš„å‰é¢ï¼Œå› ä¸ºå›¾å½¢çš„å‰åé¡ºåºå†³äºæˆ‘ä»¬çš„è§‚å¯Ÿå¹³é¢ï¼Œå³æ‘„åƒæœºçš„ä½ç½®ã€‚æ·±åº¦ç¼“å†²ï¼ˆDepth Bufferï¼‰çš„åŸç†å°±æ˜¯æŠŠä¸€ä¸ªè·ç¦»è§‚å¯Ÿå¹³é¢çš„æ·±åº¦å€¼ä¸çª—å£çš„æ¯ä¸ªåƒç´ ç›¸å…³è”ã€‚åœ¨åœºæ™¯ç»˜åˆ¶æ—¶ï¼Œåœ¨ç‰‡æ®µç€è‰²å™¨ä¸­ï¼Œå¦‚æœé‡åˆ°ä¸¤ä¸ªåƒç´ åœ¨å±å¹•ä¸Šåæ ‡ç›¸åŒçš„æƒ…å†µï¼Œåœ¨ç»˜åˆ¶å‰å°†ä¼šæ¯”è¾ƒä¸¤è€…çš„æ·±åº¦ï¼ˆZå€¼ï¼‰ï¼Œä»¥åˆ¤æ–­ä¸¤è€…ä¹‹é—´è°ç¦»è§‚å¯Ÿè€…æ›´è¿‘ã€‚å¦‚æœæ–°çš„åƒç´ æ·±åº¦å€¼å¤§äºæ—§çš„é¡¶ç‚¹ï¼Œåˆ™ä»¥æ–°åƒç´ è¦†ç›–åŸæœ‰åƒç´ ï¼›åä¹‹åˆ™æ”¾å¼ƒç»˜åˆ¶æ–°åƒç´ ï¼Œä¿ç•™åŸæœ‰åƒç´ ã€‚è¿™ä¸ªæ¯”è¾ƒçš„è¿‡ç¨‹ç§°ä¸ºæ·±åº¦æµ‹è¯•(deepth testing)ã€‚æ·±åº¦ç¼“å†²æ˜¯ç”±çª—å£ç³»ç»Ÿè‡ªåŠ¨åˆ›å»ºçš„ï¼Œå®ƒä¼šä»¥16ã€24æˆ–32ä½floatçš„å½¢å¼å‚¨å­˜å®ƒçš„æ·±åº¦å€¼ã€‚åœ¨å¤§éƒ¨åˆ†çš„ç³»ç»Ÿä¸­ï¼Œæ·±åº¦ç¼“å†²çš„ç²¾åº¦éƒ½æ˜¯24ä½çš„ã€‚æ·±åº¦ç¼“å†²åŒ…å«äº†ä¸€ä¸ªä»‹äº0.0å’Œ1.0ä¹‹é—´çš„æ·±åº¦å€¼ï¼Œå®ƒå°†ä¼šä¸è§‚å¯Ÿè€…è§†è§’æ‰€çœ‹è§çš„åœºæ™¯ä¸­æ‰€æœ‰ç‰©ä½“çš„zå€¼è¿›è¡Œæ¯”è¾ƒã€‚è§‚å¯Ÿç©ºé—´çš„zå€¼å¯èƒ½æ˜¯æŠ•å½±å¹³æˆªå¤´ä½“çš„è¿‘å¹³é¢(Near)å’Œè¿œå¹³é¢(Far)ä¹‹é—´çš„ä»»ä½•å€¼ã€‚æˆ‘ä»¬éœ€è¦ä¸€ç§æ–¹å¼æ¥å°†è¿™äº›è§‚å¯Ÿç©ºé—´çš„zå€¼å˜æ¢åˆ°[0, 1]èŒƒå›´ä¹‹é—´ï¼Œå…¶ä¸­çš„ä¸€ç§æ–¹å¼å°±æ˜¯å°†å®ƒä»¬çº¿æ€§å˜æ¢åˆ°[0, 1]èŒƒå›´ä¹‹é—´ã€‚ä¸‹é¢è¿™ä¸ªï¼ˆçº¿æ€§ï¼‰æ–¹ç¨‹å°†zå€¼å˜æ¢åˆ°äº†0.0åˆ°1.0ä¹‹é—´çš„æ·±åº¦å€¼[1]ï¼š\\[F_{depth}=\\frac{z-near}{far-near}\\]è¿™é‡Œçš„$near$å’Œ$far$å€¼æ˜¯æˆ‘ä»¬ä¹‹å‰æä¾›ç»™æŠ•å½±çŸ©é˜µè®¾ç½®å¯è§†å¹³æˆªå¤´ä½“çš„è¿‘å¹³é¢ï¼ˆnear planeï¼‰å’Œè¿œå¹³é¢ï¼ˆfar planeï¼‰ã€‚è¿™ä¸ªæ–¹ç¨‹éœ€è¦å¹³æˆªå¤´ä½“ä¸­çš„ä¸€ä¸ª$z$å€¼ï¼Œå¹¶å°†å®ƒå˜æ¢åˆ°äº†$[0, 1]$çš„èŒƒå›´ä¸­ã€‚å¯ä»¥çœ‹å‡ºï¼Œè¿™ä¸ªæ–¹ç¨‹è®¡ç®—å¾—åˆ°çš„æ·±åº¦å€¼æ˜¯çº¿æ€§çš„ï¼Œç„¶è€Œï¼Œåœ¨å®è·µä¸­æ˜¯å‡ ä¹æ°¸è¿œä¸ä¼šä½¿ç”¨è¿™æ ·çš„çº¿æ€§æ·±åº¦ç¼“å†²ï¼ˆLinear Depth Bufferï¼‰çš„ã€‚å›¾ 2 å¹³æˆªå¤´ä½“å’Œè¿œ/è¿‘å¹³é¢è¦æƒ³æœ‰æ­£ç¡®çš„æŠ•å½±æ€§è´¨ï¼Œéœ€è¦ä½¿ç”¨ä¸€ä¸ªéçº¿æ€§çš„æ·±åº¦æ–¹ç¨‹ï¼Œå®ƒæ˜¯ä¸$ 1/z$ æˆæ­£æ¯”çš„ã€‚å®ƒåšçš„å°±æ˜¯åœ¨$z$å€¼å¾ˆå°çš„æ—¶å€™æä¾›éå¸¸é«˜çš„ç²¾åº¦ï¼Œè€Œåœ¨$z$å€¼å¾ˆè¿œçš„æ—¶å€™æä¾›æ›´å°‘çš„ç²¾åº¦ã€‚èŠ±æ—¶é—´æƒ³æƒ³è¿™ä¸ªï¼šæˆ‘ä»¬çœŸçš„éœ€è¦å¯¹1000å•ä½è¿œçš„æ·±åº¦å€¼å’Œåªæœ‰1å•ä½è¿œçš„å……æ»¡ç»†èŠ‚çš„ç‰©ä½“ä½¿ç”¨ç›¸åŒçš„ç²¾åº¦å—ï¼Ÿçº¿æ€§æ–¹ç¨‹å¹¶ä¸ä¼šè€ƒè™‘è¿™ä¸€ç‚¹ã€‚è€ƒè™‘ä¸€ç§æ·±åº¦ç¼“å†²ä¸ $z$ æˆåæ¯”çš„éçº¿æ€§æ–¹ç¨‹å¦‚ä¸‹ï¼š\\[F_{depth}=\\frac{1/z-1/near}{1/far-1/near}\\]ç”±äºæ·±åº¦å€¼ä¸$ 1/z$ æˆæ­£æ¯”ï¼Œåœ¨1.0å’Œ2.0ä¹‹é—´çš„zå€¼å°†ä¼šå˜æ¢è‡³1.0åˆ°0.5ä¹‹é—´çš„æ·±åº¦å€¼ï¼Œè¿™å°±æ˜¯ä¸€ä¸ªfloatæä¾›ç»™æˆ‘ä»¬çš„ä¸€åŠç²¾åº¦äº†ï¼Œè¿™åœ¨zå€¼å¾ˆå°çš„æƒ…å†µä¸‹æä¾›äº†éå¸¸å¤§çš„ç²¾åº¦ï¼Œè€Œåœ¨$z$å€¼å¾ˆå¤§æ—¶ï¼Œæ¯”å¦‚$z$åœ¨50.0å’Œ100.0ä¹‹é—´çš„zå€¼å°†ä¼šåªå 2%çš„floatç²¾åº¦ï¼Œè¿™æ­£æ˜¯æˆ‘ä»¬æ‰€éœ€è¦çš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ·±åº¦å€¼å¾ˆå¤§ä¸€éƒ¨åˆ†æ˜¯ç”±å¾ˆå°çš„$z$å€¼æ‰€å†³å®šçš„ï¼Œè¿™ç»™äº†è¿‘å¤„çš„ç‰©ä½“å¾ˆå¤§çš„æ·±åº¦ç²¾åº¦ï¼ˆé è¿‘ç›¸æœºçš„åœ°æ–¹ç²¾åº¦æ›´é«˜ï¼‰ã€‚2. æ·±åº¦å†²çªéçº¿æ€§æ·±åº¦ç¼“å†²åœ¨å¤§å¤šæ•°åœºæ™¯ä¸­å·²ç»è¶³å¤Ÿåº”ç”¨ã€‚ç„¶è€Œï¼Œå½“ä¸¤ä¸ªæ¨¡å‹é—´ç›¸è·å¾ˆè¿‘ã€æˆ–éœ€è¦æ¸²æŸ“å¤§å°ºåº¦åœºæ™¯ï¼ˆæ¯”å¦‚è¡Œæ˜Ÿé™…åœºæ™¯ï¼‰æ—¶ï¼Œä½¿ç”¨ä¸Šè¿°éçº¿æ€§æ·±åº¦ç¼“å†²ä¼šå‡ºç°ä¸€ä¸ªå¾ˆä¸¥é‡çš„é—®é¢˜â€”â€”æ·±åº¦å†²çªï¼ˆz-fightingï¼‰ã€‚å›¾ 3 æ·±åº¦å†²çªæ¯”å¦‚åœ¨å¤ªé˜³ç³»åœºæ™¯æ¸²æŸ“ä¸­ï¼Œä¸€èˆ¬éœ€è¦åŒæ—¶æ¸²æŸ“å°ºå¯¸å·¨å¤§è·ç¦»é¥è¿œçš„è¡Œæ˜Ÿï¼ˆæ¯”å¦‚çœŸå®ç»•åœ°é£è¡Œçš„æœˆçƒï¼‰å’Œä½“å‹ç›¸å¯¹å¾ˆå°çš„äººé€ å«æ˜Ÿã€‚æ­¤æ—¶ï¼Œéœ€è¦è®¾ç½®å¾ˆå¤§çš„è¿œå¹³é¢å€¼ä»¥ä¿è¯æè¿œå¤„çš„ç‰©ä½“èƒ½å¤Ÿå¾—ä»¥æ¸²æŸ“ï¼Œè®¾ç½®å¾ˆå°çš„è¿‘å¹³é¢å€¼ä¿è¯è·ç¦»æ‘„åƒæœºå¾ˆè¿‘çš„ç‰©ä½“ä¹Ÿèƒ½å¤Ÿå¾—ä»¥æ¸²æŸ“ã€‚æ­¤æ—¶ï¼Œè‹¥ä¸¤ä¸ªç‰©ä½“åœ¨è·ç¦»æ‘„åƒæœºè¾ƒè¿œï¼Œå°±æ²¡æœ‰è¶³å¤Ÿçš„ç²¾åº¦ç”¨äºåˆ¤æ–­å…¶è¿œè¿‘ã€‚ä¸¤ä¸ªç‰©ä½“åœ¨åŒä¸€ä¸ªåƒç´ ç”Ÿæˆçš„æ¸²æŸ“ç»“æœå¾ˆå®¹æ˜“å¯¹åº”åˆ°ä¸€ä¸ªç›¸åŒçš„zå€¼ï¼Œæ¸²æŸ“å™¨å°±ä¸çŸ¥é“å“ªä¸ªç‰©ä½“åœ¨å‰ï¼Œå“ªä¸ªç‰©ä½“åœ¨åï¼Œäºæ˜¯ä¾¿å¼€å§‹â€œèƒ¡ä½œéä¸ºâ€ï¼Œè¿™æ¬¡è®©è¿™ä¸ªç‰©ä½“çš„è¿™ä¸ªåƒç´ åœ¨å‰é¢ï¼Œä¸‹æ¬¡è®©é‚£ä¸ªç‰©ä½“çš„è¿™ä¸ªåƒç´ åœ¨å‰é¢ï¼Œäºæ˜¯æ¨¡å‹çš„é‡å éƒ¨ä½ä¾¿ä¸åœçš„é—ªçƒèµ·æ¥ã€‚è¿™ä¾¿æ˜¯æ·±åº¦å†²çªé—®é¢˜ã€‚å¯é‡‡ç”¨ä»¥ä¸‹æªæ–½æ¥å‡ç¼“æ·±åº¦å†²çªï¼š  å¤šè¾¹å½¢åç§»ï¼ˆPolygon_Offsetï¼‰ï¼šæ°¸è¿œä¸è¦æŠŠå¤šä¸ªç‰©ä½“æ‘†å¾—å¤ªé è¿‘ï¼Œä»¥è‡³äºå®ƒä»¬çš„ä¸€äº›ä¸‰è§’å½¢ä¼šé‡å ã€‚é€šè¿‡åœ¨ä¸¤ä¸ªç‰©ä½“ä¹‹é—´è®¾ç½®ä¸€ä¸ªç”¨æˆ·æ— æ³•æ³¨æ„åˆ°çš„åç§»å€¼ï¼Œä½ å¯ä»¥å®Œå…¨é¿å…è¿™ä¸¤ä¸ªç‰©ä½“ä¹‹é—´çš„æ·±åº¦å†²çªã€‚ä»¥æ”¾åœ¨åœ°æ¿ä¸Šçš„ä¸€ä¸ªç®±å­ä¸ºä¾‹ï¼Œæˆ‘ä»¬å¯ä»¥å°†ç®±å­æœä¸Šï¼ˆæ²¿ç€æ­£yè½´ï¼‰ç¨å¾®ç§»åŠ¨ä¸€ç‚¹ã€‚ç®±å­ä½ç½®çš„è¿™ç‚¹å¾®å°æ”¹å˜å°†ä¸å¤ªå¯èƒ½è¢«æ³¨æ„åˆ°ï¼Œä½†å®ƒèƒ½å¤Ÿå®Œå…¨å‡å°‘æ·±åº¦å†²çªçš„å‘ç”Ÿã€‚ç„¶è€Œï¼Œè¿™éœ€è¦å¯¹æ¯ä¸ªç‰©ä½“éƒ½æ‰‹åŠ¨è°ƒæ•´ï¼Œå¹¶ä¸”éœ€è¦è¿›è¡Œå½»åº•çš„æµ‹è¯•æ¥ä¿è¯åœºæ™¯ä¸­æ²¡æœ‰ç‰©ä½“ä¼šäº§ç”Ÿæ·±åº¦å†²çªã€‚  è¿‘å¹³é¢è°ƒæ•´ï¼šå°½å¯èƒ½å°†è¿‘å¹³é¢è®¾ç½®è¿œä¸€äº›ã€‚åœ¨å‰é¢æˆ‘ä»¬æåˆ°äº†ç²¾åº¦åœ¨é è¿‘è¿‘å¹³é¢æ—¶æ˜¯éå¸¸é«˜çš„ï¼Œæ‰€ä»¥å¦‚æœæˆ‘ä»¬å°†è¿‘å¹³é¢è¿œç¦»è§‚å¯Ÿè€…ï¼Œæˆ‘ä»¬å°†ä¼šå¯¹æ•´ä¸ªå¹³æˆªå¤´ä½“æœ‰ç€æ›´å¤§çš„ç²¾åº¦ã€‚ç„¶è€Œï¼Œå°†è¿‘å¹³é¢è®¾ç½®å¤ªè¿œå°†ä¼šå¯¼è‡´è¿‘å¤„çš„ç‰©ä½“è¢«è£å‰ªæ‰ï¼Œæ‰€ä»¥è¿™é€šå¸¸éœ€è¦å®éªŒå’Œå¾®è°ƒæ¥å†³å®šæœ€é€‚åˆä½ çš„åœºæ™¯çš„è¿‘å¹³é¢è·ç¦»ã€‚  æé«˜æ·±åº¦ç¼“å†²ç²¾åº¦ï¼šç‰ºç‰²ä¸€äº›æ€§èƒ½ï¼Œä½¿ç”¨æ›´é«˜ç²¾åº¦çš„æ·±åº¦ç¼“å†²ã€‚å¤§éƒ¨åˆ†æ·±åº¦ç¼“å†²çš„ç²¾åº¦éƒ½æ˜¯24ä½çš„ï¼Œä½†ç°åœ¨å¤§éƒ¨åˆ†çš„æ˜¾å¡éƒ½æ”¯æŒ32ä½çš„æ·±åº¦ç¼“å†²ï¼Œè¿™å°†ä¼šæå¤§åœ°æé«˜ç²¾åº¦ã€‚æ‰€ä»¥ï¼Œç‰ºç‰²æ‰ä¸€äº›æ€§èƒ½ï¼Œä½ å°±èƒ½è·å¾—æ›´é«˜ç²¾åº¦çš„æ·±åº¦æµ‹è¯•ï¼Œå‡å°‘æ·±åº¦å†²çªã€‚ä¸Šè¿°ä¸‰ä¸ªæŠ€æœ¯æ˜¯æœ€æ™®éä¹Ÿæ˜¯å¾ˆå®¹æ˜“å®ç°çš„æŠ—æ·±åº¦å†²çªæŠ€æœ¯äº†ã€‚ç„¶è€Œï¼Œä¸Šè¿°æªæ–½åªèƒ½å‡ç¼“æ·±åº¦å†²çªé—®é¢˜ï¼Œå¹¶ä¸èƒ½å¤Ÿå®Œå…¨æ¶ˆé™¤ã€‚è¿˜æœ‰ä¸€äº›æ›´å¤æ‚çš„æŠ€æœ¯ï¼Œä½†å®ƒä»¬ä¾ç„¶ä¸èƒ½å®Œå…¨æ¶ˆé™¤æ·±åº¦å†²çªï¼š  å¤šå¹³æˆªå¤´ä½“æ¸²æŸ“ï¼ˆMulti-Frustums Renderingï¼‰  å¯¹æ•°æ·±åº¦ç¼“å†²ï¼ˆLogarithmic Depth Buffer)å¤šè¾¹å½¢å¹³ç§»éœ€è¦æ‰‹åŠ¨è®¾ç½®æ¯ä¸ªå¯èƒ½å‘ç”Ÿæ·±åº¦å†²çªçš„æ¨¡å‹ï¼Œå½“æ¨¡å‹å¾ˆå¤šæ—¶æ‰‹åŠ¨è®¾ç½®çš„å·¥ä½œé‡å·¨å¤§ã€‚å¤šå¹³æˆªå¤´ä½“æ¸²æŸ“éœ€è¦æ ¹æ®æ‰€æ¸²æŸ“çš„åœºæ™¯çš„å°ºå¯¸ï¼Œè®¾ç½®è‹¥å¹²ä¸ªå¹³æˆªå¤´ä½“ï¼Œæ¸²æŸ“å·¥ä½œé‡å¤§ï¼Œå¹³æˆªå¤´ä½“äº¤æ±‡å¤„å¯èƒ½å­˜åœ¨æ¸²æŸ“é—®é¢˜ã€‚3. å¯¹æ•°æ·±åº¦ç¼“å†²å¯¹æ•°æ·±åº¦ç¼“å†²ï¼ˆLogarithmic Depth Bufferï¼‰ä½¿å¾—å¤§å°ºå¯¸åœºæ™¯ï¼ˆæ¯”å¦‚è¡Œæ˜Ÿé™…å°ºå¯¸ï¼‰èƒ½å¤ŸæŒ‰ç…§çœŸå®æ¯”ä¾‹æ¸²æŸ“ï¼Œè€Œå‡ ä¹ä¸ä¼šå‡ºç°å› ç²¾åº¦ä¸è¶³å¯¼è‡´çš„æ·±åº¦å†²çªç°è±¡ã€‚å…¬å¼å¦‚ä¸‹[2]ï¼šå…¬å¼\\[z= \\left( 2\\cdot\\frac{log{(C \\cdot w + 1)}}{log(C \\cdot far + 1)} - 1 \\right)  \\cdot  w\\]å…¶ä¸­ï¼Œ$C$æ˜¯å¸¸é‡ã€‚ä¸åŒçš„$C$å€¼ä¼šå½±å“æ·±åº¦çš„ç²¾åº¦ï¼›$w$æ˜¯gl_Position.wã€‚ç›¸åº”çš„ä»£ç å®ç°å¦‚ä¸‹ã€‚é¡¶ç‚¹ç€è‰²å™¨ä¸­ï¼š// vertex shaderout float logz;in float far;void main(){    ...    float C = 1;    float FC = 1.0 / log(far * C + 1);\tlogz = log(gl_Position.w * C + 1) * FC;    gl_Position.z = (2 * logz - 1) * gl_Position.w;}ç‰‡æ®µç€è‰²å™¨ä¸­ï¼š// fragment shaderin float logz;void main(){    ...    gl_FragDepth = logz;}å¯å¯¹ä¸Šè¿°ä»£ç è¿›è¡Œè¿›ä¸€æ­¥ä¼˜åŒ–[3]ï¼š  ä½¿ç”¨ log2 ä»£æ›¿ log: å› ä¸ºåœ¨ç€è‰²å™¨ä¸­ï¼Œlog æ˜¯åŸºäº log2 å®ç°çš„ï¼Œå› æ­¤ç›´æ¥ä½¿ç”¨ log2 é¿å…é¢å¤–çš„è®¡ç®—ï¼›  é¿å…è£å‰ªé—®é¢˜: å½“æ•°å€¼å°äºç­‰äº 0 æ—¶ï¼Œlog å‡½æ•°æ²¡æœ‰å®šä¹‰ã€‚å½“ä¸‰è§’å½¢çš„æŸä¸ªé¡¶ç‚¹è¶…å‡ºç›¸æœºå¹³é¢æ—¶ (â‰¤ -1)ï¼Œä¼šå¯¼è‡´è¯¥ä¸‰è§’å½¢åœ¨è£å‰ªä¹‹å‰å°±è¢«æ•´ä¸ªåˆ é™¤ã€‚å°† log å‡½æ•°çš„è¾“å…¥å€¼é™å®šåœ¨max(1e-6, 1.0 + gl_Position.w)å¯ä»¥é¿å…è¿™ä¸ªé—®é¢˜ï¼›  ç§»é™¤å¸¸æ•°Cï¼šå¸¸æ•°Cç”¨æ¥è°ƒæ•´è¿‘ç«¯çš„ç²¾åº¦ï¼Œä½†å› ä¸ºä¸€èˆ¬æƒ…å†µä¸‹C=1æ—¶çš„ç²¾åº¦å·²ç»è¶³å¤Ÿä½¿ç”¨ï¼Œå› æ­¤å°†å…¶ç§»é™¤ã€‚æœ€ç»ˆä¼˜åŒ–çš„ä»£ç å¦‚ä¸‹ã€‚é¡¶ç‚¹ç€è‰²å™¨ä¸­ï¼š// vertex shaderout float flogz;out float Fcoef;in float far;...void main(){    ...\tFcoef = 2.0 / log2(far + 1.0);\tflogz = 1.0 + gl_Position.w;\tgl_Position.z = log2(max(1e-6, flogz)) * Fcoef - 1.0;\tgl_Position.z *= gl_Position.w;}ç‰‡æ®µç€è‰²å™¨ä¸­ï¼š// vertex shaderout float logz;in float far;...void main(){    ...    gl_FragDepth = log2(flogz) * Fcoef * 0.5;}å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œåœ¨æŸäº›æç«¯åœºæ™¯ä¸‹[4]ï¼Œå•çº¯é‡‡ç”¨å¯¹æ•°æ·±åº¦ç¼“å†²ä»ç„¶ä¼šå­˜åœ¨æ·±åº¦å†²çªï¼ˆå¦‚ä»æè¿œçš„è·ç¦»è§‚çœ‹æå¤§å°ºå¯¸çš„ä¸‰è§’é¢ï¼‰ã€‚æ­¤æ—¶å¯ä»¥é‡‡å–â€œå¤šå¹³æˆªå¤´ä½“æ¸²æŸ“+å¯¹æ•°æ·±åº¦ç¼“å†²â€äºŒè€…æ··åˆçš„æ¨¡å¼ï¼ˆHybrid Multi-Frustum Logarithmic Depth Bufferï¼‰æ¥æ¸²æŸ“åœºæ™¯ã€‚4. å‚è€ƒæ–‡çŒ®[1]\tLearnOpenGL. Depth Testing[2]\tOuterra. Maximizing Depth Buffer Range and Precision[3]\tOuterra. Logarithmic depth buffer optimizations &amp; fixes[4]\tCesium. Hybrid Multi-Frustum Logarithmic Depth Buffer[5]\tsirlis. Logarithmic Depth Buffer in OpenGL with glad/glfw"
  },
  
  {
    "title": "ITXæœºç®±è´­ç½®è®°å½•",
    "url": "/posts/itx/",
    "categories": "Diary",
    "tags": "hardware",
    "date": "2020-05-10 22:21:49 +0800",
    





    
    "snippet": "æœ¬æ–‡ä»‹ç»äº† æœ¬äººè´­ä¹°å’Œç»„è£…ç¬¬ä¸€å° itx ä¸»æœºçš„é…ç½®å’Œè¿‡ç¨‹ã€‚  1. å‰è¨€  2. æœºç®±  3. ä¸»æ¿  4. CPU  5. ç¡¬ç›˜  6. å†…å­˜  7. æ˜¾å¡  8. å…¶å®ƒ  9. å…¶å®ƒv21. å‰è¨€å¯’å‡å›å®¶ï¼Œç”¨äº†å…­å¹´çš„Lenovo Y50ç¬”è®°æœ¬æ­»æœºäº†ä¸¤æ¬¡ï¼Œæ„Ÿè§‰å¿«è¦å¯¿ç»ˆæ­£å¯äº†ã€‚æ— å¥ˆæ‰“ç®—æ¢ä¸ªæœºå­ï¼Œæ°é€¢è”æƒ³äº”æœˆé€€å‡ºæ‹¯æ•‘è€…æ–°å“ï¼Œé‚è§‚æœ›ï¼Œé¦–å‘æ— AMD+RTX2060ç‰ˆæœ¬ï¼Œå’ã€‚ä»æ­¤çœ‹ç ´å‚å•†å¯¹ç¬”è®°æœ¬çš„...",
    "content": "æœ¬æ–‡ä»‹ç»äº† æœ¬äººè´­ä¹°å’Œç»„è£…ç¬¬ä¸€å° itx ä¸»æœºçš„é…ç½®å’Œè¿‡ç¨‹ã€‚  1. å‰è¨€  2. æœºç®±  3. ä¸»æ¿  4. CPU  5. ç¡¬ç›˜  6. å†…å­˜  7. æ˜¾å¡  8. å…¶å®ƒ  9. å…¶å®ƒv21. å‰è¨€å¯’å‡å›å®¶ï¼Œç”¨äº†å…­å¹´çš„Lenovo Y50ç¬”è®°æœ¬æ­»æœºäº†ä¸¤æ¬¡ï¼Œæ„Ÿè§‰å¿«è¦å¯¿ç»ˆæ­£å¯äº†ã€‚æ— å¥ˆæ‰“ç®—æ¢ä¸ªæœºå­ï¼Œæ°é€¢è”æƒ³äº”æœˆé€€å‡ºæ‹¯æ•‘è€…æ–°å“ï¼Œé‚è§‚æœ›ï¼Œé¦–å‘æ— AMD+RTX2060ç‰ˆæœ¬ï¼Œå’ã€‚ä»æ­¤çœ‹ç ´å‚å•†å¯¹ç¬”è®°æœ¬çš„å‰²éŸ­èœè¡Œå¾„ï¼Œè½¬è€Œå¯»æ±‚è‡ªé…å°å¼æœºã€‚ç”±äºå·¥ä½œéœ€è¦å„åœ°å¥”æ³¢ï¼Œéœ€å°ä½“ç§¯å°å¼æœºï¼Œé‚å¦‚ITXå‘ï¼Œå¹¸å¾—æŸ çƒ­å¿ƒå¸‚æ°‘æ¨å…ˆç”Ÿ çš„å¸®åŠ©ï¼Œæ•²å®šé…ç½®å’Œæœºç®±å¦‚ä¸‹æœºç®±ï¼šæ°´å†·å¿«ä¹ç›’L é“¶è‰²                                           450rä¸»æ¿ï¼šå¾®æ˜Ÿ B450I (MSI B450I GAMING PLUS AC)                    850rCPUï¼šAMD R7 3700X                                            2000rç¡¬ç›˜ï¼šä¸‰æ˜Ÿ PM981 512G (SAMSUNG MZVLB512HAJQ-0000) ç³»ç»Ÿç›˜        535r     æµ·åº·å¨è§† E200P 1T (HKVSN HS-SSD-E200PRO/PLP/1024G) æ•°æ®ç›˜  780rå†…å­˜ï¼šç§‘èµ‹ DDR4 16G*2 3200MHz (KLEVV)                          1080ræ˜¾å¡ï¼šNVIDIA GeForce RTX 2060 6G (ç´¢æ³°RTX2060 6G æ¯ç­è€…)        2160rç”µæºï¼šMuPCå®šåˆ¶500Wé‡‘ç‰Œ ç™½è‰²æ¨¡ç»„çº¿ï¼ˆæè‡´çŒ«åŒæ¬¾ï¼‰                      450rå…¶å®ƒï¼šAXP90æ•£çƒ­å™¨ï¼Œé¡¶ç½®12025é£æ‰‡*2ï¼Œæ˜¾å¡å»¶é•¿çº¿                     180r+0r+100ræ€»è®¡ ï¿¥8580 ï¼Œè‚‰ç–¼ã€‚ç®—é”™ä¸æ€ªæˆ‘ï¼Œæˆ‘æ•°å­¦æ˜¯ä½“è‚²è€å¸ˆæ•™çš„ã€‚2. æœºç®±çº ç»“äº†å¾ˆä¹…æœºç®±ï¼Œç”±äºéœ€è¦æ–¹ä¾¿æºå¸¦ï¼Œå› æ­¤åªèƒ½é€‰æ‹©A4æœºç®±ï¼Œåˆè¦æ±‚è¦æœ‰ç°è´§ï¼Œåˆšå¥½è€æ¨æ‰‹ä¸Šæœ‰æ–è™¹å·¥ä¸šå‡ºå“çš„æ°´å†·å¿«ä¹ç›’Lï¼Œå¤§å°å°ºå¯¸å¤–å½¢è¿˜æ¯”è¾ƒæ»¡æ„ï¼Œé‚æ•²å®šã€‚ä¸€å¼€å§‹é€‰é…çš„æ˜¯é»‘è‰²ç‰ˆï¼Œä½†æ˜¯è€æ¨è£…æœºå‘ç°é»‘è‰²ç‰ˆæœ‰ç¼ºé™·ï¼Œé‚æ¢æˆé“¶è‰²ç‰ˆã€‚3. ä¸»æ¿æˆ‘çš„ä¸»æ¿å‹å·ä¸ºï¼šå¾®æ˜Ÿ B450Iã€‚ä¸»æ¿æˆ‘å•¥ä¹Ÿä¸æ‡‚ï¼Œåæ­£è·Ÿç€CPUèµ°ï¼Œè€æ¨è¯´å•¥å°±æ˜¯å•¥äº†ã€‚ä»¥ä¸‹ä¸ºç½‘ç»œç»“æœå’ŒæŸäººè§‚ç‚¹çš„ç»“åˆï¼Œä¸ä»£è¡¨æœ¬äººï¼Œæœ‰ä»»ä½•æ„è§æˆ–å»ºè®®è¯·æ†‹ç€ã€‚B450Iä¸»æ¿ä¸»è¦æœ‰4ä¸ªå‚å•†çš„ç‰ˆæœ¬ï¼šå¾®æ˜Ÿã€æŠ€å˜‰ã€åç¡•ã€åæ“ã€‚            Â       ä¼˜ç‚¹      ç¼ºç‚¹                  å¾®æ˜Ÿ      ä¾›ç”µè¶³ï¼Œ6+2ç›¸ï¼Œè¶…é¢‘å‰å®³      å£°å¡ç½‘å¡æ— çº¿ç½‘å¡éƒ½æ˜¯ä½ç«¯é…ç½®              å¾®æ˜Ÿ      bios ç•Œé¢äººæ€§åŒ–ï¼Œæ“ä½œæ–¹ä¾¿      ç³»ç»Ÿè‡ªæ£€æ—¶é—´è¾ƒé•¿              å¾®æ˜Ÿ      /      m2 æ¥å£åœ¨èƒŒé¢ï¼Œæ•£çƒ­è¾ƒå·®              å¾®æ˜Ÿ      /      ä»·æ ¼ç•¥è´µ              æŠ€å˜‰      å£°å¡æ— çº¿ç½‘å¡éƒ½æ˜¯è¾ƒé«˜ç«¯çš„      ä¾›ç”µ4+2ç›¸ï¼Œç¨å°‘              æŠ€å˜‰      m2 æ¥å£åœ¨æ­£é¢ï¼Œæœ‰æ•£çƒ­è£…ç”²      bios ä¸å‹å¥½              æŠ€å˜‰      å„æ–¹é¢æ¯”è¾ƒå‡è¡¡æ²¡æœ‰æ˜æ˜¾åŠ£åŠ¿      /              åç¡•      åŒm2æ’å£æ­£é¢åé¢éƒ½æœ‰ä¸€ä¸ª      ä¾›ç”µé›†æ˜¾éƒ¨åˆ†ä¸è¶³åªæœ‰1ç›¸              åç¡•      å¼€æœºä¿¡ä»°åŠ æˆ      m2 æ¥å£åœ¨èƒŒé¢              åç¡•      /      ä»·æ ¼ç•¥è´µ              åæ“      å¦–æ¿é«˜æ€§ä»·æ¯”è‘—ç§°ï¼Œæ²¡é’±é€‰ä»–å°±å¯¹ï¼Œåˆä¸æ˜¯ä¸èƒ½ç”¨      ä¸çŸ¥é“      4. CPUæˆ‘çš„CPUï¼šAMD R7 3700Xã€‚ç”±äºä¸ªäººå¯¹å¤šçº¿ç¨‹éœ€æ±‚è¾ƒé«˜ï¼Œå› æ­¤é€‰AMDçš„CPUï¼Œåˆ«çš„ä¸è¯´ä»·æ ¼çœŸé¦™ï¼ŒèŠ±ä¸€åŠçš„é’±ä¹°æ›´å¤šçš„æ ¸ï¼Œè¿˜ç‰¹ä¹ˆ7nmå·¥è‰ºã€‚çœ‹çœ‹å¯¹é¢Intelç‰™è†å‚ï¼Œéƒ½ç‰¹ä¹ˆ0202å¹´äº†è¿˜åœ¨11nmæŒ¤ç‰™è†ã€‚ä¸€å¥è¯ï¼ŒAMD YESï¼ä»€ä¹ˆï¼Ÿä½ è¯´ç§¯çƒ­ï¼Ÿä½ è¯´è¶…é¢‘æ€§èƒ½ä¸æå‡ï¼Ÿä½ è¯´ç¨³å®šæ€§ï¼Ÿä½ è¯´å…¼å®¹æ€§ï¼ŸæŠ±æ­‰æˆ‘æ²¡å¬è§ã€‚5. ç¡¬ç›˜ç³»ç»Ÿç›˜æˆ‘é€‰æ‹©äº†ï¼šä¸‰æ˜Ÿ PM981 512Gã€‚æ²¡å•¥ï¼Œè€æ¨è¯´çš„ï¼Œæˆ‘è¢«é€¼æ— å¥ˆã€‚æ•°æ®ç›˜æœ¬æ¥æ‰“ç®—ç”¨1Tçš„æœºæ¢°ï¼Œåæ¥å¤§å®¶æ‡‚å¾—ï¼Œé™·å…¥æŸäººçš„åŠ ä»·å¥—è·¯ï¼ŒåŠ ç‚¹é’±æ¢æˆæµ·åº·å¨è§†çš„1Tå›ºæ€äº†ã€‚ï¼ˆæ­¤å¤„åº”è¯¥æœ‰å›¾ï¼Œä½†æ˜¯ç¡¬ç›˜çš„å›¾æ²¡ä»€ä¹ˆå¥½çœ‹çš„ï¼Œæ‡’å¾—æ”¾äº†ï¼‰6. å†…å­˜å†…å­˜çœŸçš„æ˜¯æƒ¨ç—›çš„ç»å†ã€‚åŸæœ¬é€‰é…çš„æ˜¯ æµ·ç›—èˆ¹LPX 16G*2 3200MHz ï¼Œè€æ¨åƒè¾›ä¸‡è‹¦ç»™è£…å¥½æœºå­è£…å¥½ç³»ç»Ÿï¼Œå¯„ç»™æˆ‘ï¼Œæˆ‘æ‹¿åˆ°æ‰‹ï¼Œboomï¼ï¼Œæ— é™é‡å¯ã€‚ç»è¿‡å¤šè½®ç£‹å•†ï¼Œè®¤å®šå†…å­˜å’ŒCPUä¸å…¼å®¹ï¼Œäºæ˜¯æ‰æ¢äº†ç°åœ¨çš„ ç§‘èµ‹ 16G*2 3200MHzï¼Œè€æ¨è¯´ç”¨çš„æ˜¯é›·éœ†é©¬ç”²æ¡ï¼Œå’±ä¹Ÿä¸æ‡‚ã€‚ä¸è¯´äº†ï¼Œåˆå¤šæäº†ï¿¥100ã€‚7. æ˜¾å¡æˆ‘çš„æ˜¾å¡æ˜¯NVIDIA RTX 2060ï¼Œ2ç³»åˆ—æœ€æœ€æœ€æœ€æœ€åº•ç«¯çš„ä¸€å—æ˜¾å¡äº†ã€‚æ— ä»–ï¼Œæ²¡é’±äº†ï¼Œæˆ‘ç‰¹ä¹ˆä¹Ÿæƒ³RTX 2080Tiå•Šï¼Œæ²¡äººèµåŠ©å•Šã€‚ç»“æœï¼Œè®­ç»ƒç¥ç»ç½‘ç»œçš„æ—¶å€™ï¼Œæ•™ç¨‹è§†é¢‘é‚£å“¥ä»¬2080Tiå·²ç»è¿­ä»£25æ¬¡äº†ï¼Œæˆ‘æ‰åˆ°ç¬¬7æ¬¡â€¦â€¦æœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„ï¼ŒITXæœºç®±ç‰¹åˆ«æ˜¯A4æœºç®±ï¼Œæ˜¾å¡å®½åº¦å’Œé•¿åº¦åŠ¡å¿…ç¡®ä¿èƒ½å¡è¿›æœºç®±ï¼Œä¸€èˆ¬æœºç®±å¯¹æ˜¾å¡çš„å°ºå¯¸éƒ½æ˜¯æœ‰ä¸¥æ ¼è¦æ±‚çš„ã€‚åæ­£æˆ‘æ˜¯æ²¡è¿™æŠ€æœ¯ï¼Œä¸è¿‡æˆ‘æœ‰è€æ¨ï¼Œä»–è´Ÿè´£è£…æœºï¼Œä»–ä¿è¯èƒ½å¡è¿›å»ï¼Œå¡å¾—çˆ½ï¼Œé‚£å°±è¡Œäº†ã€‚ï¼ˆè€æ¨ï¼šåºŸè¯ï¼Œçˆ¸çˆ¸é…çš„æ˜¯çŸ­å¡ï¼Œå¡ä¸è¿›å»æ‰æ€ªï¼‰8. å…¶å®ƒç”µæºæ•£çƒ­ä»€ä¹ˆçš„éƒ½æ˜¯è€æ¨é…çš„ï¼Œå’±ä¹Ÿä¸æ‡‚ï¼Œå’±ä¹Ÿä¸æ•¢é—®ã€‚9. å…¶å®ƒv2æ¥ç‚¹å¼€ç®±ç…§éª—å¥½äº†ã€‚"
  },
  
  {
    "title": "VSCodeéƒ¨ç½²Pytorchæœºå™¨å­¦ä¹ æ¡†æ¶",
    "url": "/posts/vscode-pytorch/",
    "categories": "Tutorial, Coding",
    "tags": "vscode, python, pytorch",
    "date": "2020-03-22 09:22:19 +0800",
    





    
    "snippet": "æœ¬æ–‡ä»‹ç»äº† Pytorch æœºå™¨å­¦ä¹ æ¡†æ¶çš„ä¸‹è½½å’Œéƒ¨ç½²ï¼Œä»¥åŠ Pytorch å¼€å‘ç¯å¢ƒçš„é…ç½®ã€‚  1. ç®€ä»‹  2. é…ç½®Pythonå¼€å‘ç¯å¢ƒ  3. é…ç½®PyTorch          3.1. éƒ¨ç½²PyTorch      3.2. éƒ¨ç½²å…¶å®ƒåŒ…                  3.2.1. CUDA          3.2.2. cuDNN          3.2.3. Numpy...",
    "content": "æœ¬æ–‡ä»‹ç»äº† Pytorch æœºå™¨å­¦ä¹ æ¡†æ¶çš„ä¸‹è½½å’Œéƒ¨ç½²ï¼Œä»¥åŠ Pytorch å¼€å‘ç¯å¢ƒçš„é…ç½®ã€‚  1. ç®€ä»‹  2. é…ç½®Pythonå¼€å‘ç¯å¢ƒ  3. é…ç½®PyTorch          3.1. éƒ¨ç½²PyTorch      3.2. éƒ¨ç½²å…¶å®ƒåŒ…                  3.2.1. CUDA          3.2.2. cuDNN          3.2.3. Numpy          3.2.4. matplotlib          3.2.5. pandas                    3.3. æ‰‹åŠ¨éƒ¨ç½²CUDAå’ŒcuDNN      3.4. æµ‹è¯•        4. å¸¸è§é”™è¯¯          4.1. RuntimeError:An attempt has been madeâ€¦      requires_grad ä¸ requires_grad_ æ··æ·†        5. å‚è€ƒæ–‡çŒ®1. ç®€ä»‹PyTorchæ˜¯ä¸€ä¸ªå¼€æºçš„Pythonæœºå™¨å­¦ä¹ åº“ï¼ŒåŸºäºTorchï¼Œç”¨äºè‡ªç„¶è¯­è¨€å¤„ç†ç­‰åº”ç”¨ç¨‹åºã€‚2017å¹´1æœˆï¼Œç”±Facebookäººå·¥æ™ºèƒ½ç ”ç©¶é™¢ï¼ˆFAIRï¼‰åŸºäºTorchæ¨å‡ºã€‚å®ƒæ˜¯ä¸€ä¸ªåŸºäºPythonçš„å¯ç»­è®¡ç®—åŒ…ï¼Œæä¾›ä¸¤ä¸ªé«˜çº§åŠŸèƒ½ï¼š1ã€å…·æœ‰å¼ºå¤§çš„GPUåŠ é€Ÿçš„å¼ é‡è®¡ç®—ï¼ˆç±»ä¼¼NumPyï¼‰ã€‚2ã€åŒ…å«è‡ªåŠ¨æ±‚å¯¼ç³»ç»Ÿçš„çš„æ·±åº¦ç¥ç»ç½‘ç»œã€‚åƒåˆ«äººä¸€è®°å¼ºåŠ›å®‰åˆ©ï¼šPyTorchåˆ°åº•å¥½ç”¨åœ¨å“ªé‡Œï¼Ÿ2. é…ç½®Pythonå¼€å‘ç¯å¢ƒå‚è€ƒã€ŠVSCodeéƒ¨ç½²Pythonå¼€å‘ç¯å¢ƒã€‹é…ç½®ã€‚3. é…ç½®PyTorch3.1. éƒ¨ç½²PyTorchå‰å¾€å®˜ç½‘ï¼ˆhttps://pytorch.org/get-started/locally/ï¼‰ï¼Œæ ¹æ®è‡ªèº«çš„å¼€å‘ç¯å¢ƒï¼Œè·å–PyTorchå®‰è£…å‘½ä»¤è¡Œã€‚ä»¥Windows 10ç³»ç»Ÿ+RTX2060æ˜¾å¡ä¸ºä¾‹ï¼Œé‡‡ç”¨pipå®‰è£…ï¼Œå¦‚å›¾é€‰æ‹©ï¼Œå¾—åˆ°å®‰è£…å‘½ä»¤è¡Œæ³¨æ„ï¼ŒPyTorchåŒ…å«ä¸¤ä¸ªç‰ˆæœ¬ï¼ŒCPUç‰ˆï¼ˆCUDA=Noneï¼‰å’ŒGPUç‰ˆï¼Œè‹¥è®¡ç®—æœºæ²¡æœ‰åˆé€‚çš„ç‹¬ç«‹æ˜¾å¡ï¼Œåˆ™CUDAé€‰æ‹©Noneã€‚ä¸è¿‡GPUç‰ˆåŒæ ·åŒ…å«CPUç‰ˆçš„æ‰€æœ‰åŠŸèƒ½ï¼Œå› æ­¤å®Œå…¨å¯ä»¥å®‰è£…GPUç‰ˆï¼Œç„¶åä¸ç”¨GPUè®¡ç®—åŠ é€ŸåŠŸèƒ½ã€‚æ³¨æ„ï¼Œè¯·è‡ªè¡Œç¡®è®¤ç‹¬ç«‹æ˜¾å¡é©±åŠ¨æ”¯æŒçš„CUDAç‰ˆæœ¬ã€‚æ‰“å¼€æ§åˆ¶é¢æ¿ï¼Œé€‰æ‹©æŸ¥çœ‹æ–¹å¼ä¸ºâ€œå°å›¾æ ‡â€ï¼Œé€‰æ‹©â€œNvidiaæ§åˆ¶é¢æ¿â€ï¼Œç„¶åå¦‚å›¾æ‰€ç¤ºçš„æ­¥éª¤ä¾æ¬¡æ‰“å¼€â€œç³»ç»Ÿä¿¡æ¯â€ =&gt; â€œç»„ä»¶â€ï¼ŒæŸ¥çœ‹ â€œNVCUDA.DLLâ€ çš„äº§å“åç§°ï¼Œå¹¶é€‰æ‹©ä¸è¶…è¿‡å…¶ç‰ˆæœ¬å·çš„CUDAç‰ˆæœ¬å·ã€‚ç¡®å®šCUDAç‰ˆæœ¬å·åï¼Œæ ¹æ®å®˜ç½‘ç»™å‡ºçš„å‘½ä»¤å®‰è£…ï¼ˆå¯ä»¥çµæ´»é€‰æ‹©ï¼Œæ¯”å¦‚ç”¨ä¸åˆ°torchaudioå°±åˆ äº†ï¼‰ã€‚# 20230422 win11 rtx2060 miniconda python 3.9pip install torch==1.12.1+cu113 torchvision==0.13.1+cu113 --extra-index-url https://download.pytorch.org/whl/cu113æ‰“å¼€Anaconda Navigatorï¼Œæ¿€æ´»ç›¸åº”çš„ç¯å¢ƒï¼Œæ‰“å¼€ç¯å¢ƒçš„ç»ˆç«¯ï¼Œè¾“å…¥ä¸Šè¿°å‘½ä»¤å³å¯å®ŒæˆPyTorchçš„å®‰è£…ã€‚ã€2023.04.22è¡¥å……ã€‘æ³¨æ„ï¼Œä½¿ç”¨ conda é€šè¿‡å®˜ç½‘å‘½ä»¤è¡Œå®‰è£…ä¹Ÿå¯èƒ½å®‰è£…ä¸º cpu ç‰ˆæœ¬ï¼Œæ¨è pip å®‰è£…ã€‚ã€2020.09.07è¡¥å……ã€‘è¯·åŠ¡å¿…å°½é‡ç”¨å®˜ç½‘æä¾›çš„å‘½ä»¤è¡Œå®‰è£…ï¼Œç›´æ¥ä» Anaconda ç•Œé¢å®‰è£…çš„æ˜¯ cpu ç‰ˆæœ¬ã€20210524è¡¥å……ã€‘å°è¯•è¿‡å„ç§åŠ é€Ÿä¸‹è½½çš„æ–¹æ³•ï¼Œå’ï¼Œè€è€å®å®ç”¨å®˜æ–¹å‘½ä»¤å®‰è£…å§ï¼Œä¸”ç”¨condaæ—¶æœ€å¥½å…³é—­ä»»ä½•fqä»£ç†ï¼Œè€Œä¸”ä¸è¦ç”¨å›½å†…æºï¼Œè€Œæ˜¯ä½¿ç”¨å®˜æ–¹é»˜è®¤æºï¼ˆä¹Ÿå³åˆ é™¤.conrcæ–‡ä»¶ï¼‰ï¼Œå¦åˆ™ä¼šæŠ¥å¦‚ä¸‹ä»£ç†è¿æ¥é”™è¯¯ ProxyError: Conda cannot proceed due to an error in your proxy configuration.ã€2021.05.25æ›´æ–°ã€‘ï¼Œç»æµ‹è¯•å¯ä½¿ç”¨çš„GPUç‰ˆæœ¬çš„PyTorchåŒ…å«ä»¥ä¸‹ç»„ä»¶ï¼š  pytorch 1.8.1  torchvision 0.9.1  cuda 10.2.89  cudnn 7.6.5ï¼ˆä¸cudaç‰ˆæœ¬æœ‰å…³ï¼‰ã€2023.04.22æ›´æ–°ã€‘win11+RTX2060ï¼Œç»æµ‹è¯•å¯ä½¿ç”¨çš„GPUç‰ˆæœ¬çš„PyTorchåŒ…å«ä»¥ä¸‹ç»„ä»¶ï¼ˆå®˜ç½‘é»˜è®¤æºpipå®‰è£…å‘½ä»¤2.1Gï¼‰ï¼š  pytorch 1.12.1+cu113  torchvision 0.13.1+cu113  cuda 11.1.105 ï¼ˆå®˜ç½‘ä¸‹è½½ cuda_11.1.1_win10_network.exeï¼Œå‘½ä»¤è¡Œ nvcc -Vï¼‰  cudnn 8.9.0 (å®˜ç½‘ä¸‹è½½ cudnn-windows-x86_64-8.9.0.131_cuda11-archive.zip è§£å‹è¦†ç›–è‡³ CUDA å®‰è£…è·¯å¾„)3.2. éƒ¨ç½²å…¶å®ƒåŒ…3.2.1. CUDACUDAï¼ˆCompute Unified Device Architectureï¼‰ï¼Œæ˜¯NVIDIAæ¨å‡ºçš„è¿ç®—å¹³å°ã€‚ CUDAâ„¢æ˜¯ä¸€ç§ç”±NVIDIAæ¨å‡ºçš„é€šç”¨å¹¶è¡Œè®¡ç®—æ¶æ„ï¼Œè¯¥æ¶æ„ä½¿GPUèƒ½å¤Ÿè§£å†³å¤æ‚çš„è®¡ç®—é—®é¢˜ã€‚ å®ƒåŒ…å«äº†CUDAæŒ‡ä»¤é›†æ¶æ„ï¼ˆISAï¼‰ä»¥åŠGPUå†…éƒ¨çš„å¹¶è¡Œè®¡ç®—å¼•æ“ã€‚ å¼€å‘äººå‘˜å¯ä»¥ä½¿ç”¨Cè¯­è¨€æ¥ä¸ºCUDAâ„¢æ¶æ„ç¼–å†™ç¨‹åºã€‚æ‰€ç¼–å†™å‡ºçš„ç¨‹åºå¯ä»¥åœ¨æ”¯æŒCUDAâ„¢çš„å¤„ç†å™¨ä¸Šä»¥è¶…é«˜æ€§èƒ½è¿è¡Œã€‚CUDAä¾èµ–æ˜¾å¡é©±åŠ¨ï¼Œæå‰æ›´æ–°æ˜¾å¡é©±åŠ¨å¹¶ç¡®è®¤æ˜¾å¡é©±åŠ¨æ”¯æŒçš„CUDAç‰ˆæœ¬å·ã€‚  é‡‡ç”¨å‘½ä»¤è¡Œå®‰è£… PyTorch æ—¶ï¼Œå‘½ä»¤è¡Œä¸­å·²ç»å¸¦æœ‰å®‰è£…CUDAçš„æŒ‡ä»¤ cudatoolkit=xx.xã€‚CUDA Toolkit å¯ç†è§£ä¸ºæ˜¯ CUDA çš„ä¸€ä¸ªå­é›†ï¼Œå…¶ä¸»è¦åŒ…å«åº”ç”¨ç¨‹åºåœ¨ä½¿ç”¨ CUDA ç›¸å…³çš„åŠŸèƒ½æ—¶æ‰€ä¾èµ–çš„åŠ¨æ€é“¾æ¥åº“ã€‚condaå®‰è£…åªä¼šå®‰è£…ä¸€äº›è®¡ç®—åº“ï¼Œä¸ä¼šå®‰è£…ç¼–è¯‘å·¥å…·ã€‚è€Œå®˜æ–¹çš„ CUDA åŒ…åŒ…å«çš„ä¸œè¥¿ä¼šå®Œæ•´ä¸€äº›ã€‚åœ¨è¿è¡ŒåŸºäºpytorchçš„ä»£ç æ—¶ä¼šä½¿ç”¨condaæä¾›çš„cudatoolkitåŒ…ï¼Œè€Œå¿½è§†Nvidiaå®˜æ–¹çš„CUDA Toolkitã€‚è¿™ä¹Ÿå°±æ˜¯ä¸ºä»€ä¹ˆæœ‰æ—¶å€™æˆ‘ä»¬é€šè¿‡nvcc -VæŸ¥çœ‹çš„CUDAè¿è¡ŒAPIç‰ˆæœ¬å¾ˆä½(æ¯”å¦‚7.5)ï¼Œä½†æ˜¯èƒ½æˆåŠŸè¿è¡Œcuda9.0çš„pytorchçš„åŸå› ã€‚ä½†æ˜¯éœ€è¦æ³¨æ„ï¼š å¦‚æœé¡¹ç›®ä»£ç éœ€è¦ä½¿ç”¨python setup.py developæˆ–./make.shæ¥ç¼–è¯‘ä¾èµ–cudaçš„torchæ¨¡å—ï¼ˆå¦‚Cè¯­è¨€è„šæœ¬ï¼‰æ—¶å€™ï¼Œè¿™ä¸ªæ—¶å€™å¯èƒ½ä¼šå¯¼è‡´é”™è¯¯ï¼Œé”™è¯¯åŸå› æ˜¯ç¼–è¯‘è¿‡ç¨‹ä½¿ç”¨çš„æ˜¯ç³»ç»Ÿè‡ªå¸¦çš„CUDAè€Œä¸æ˜¯condaå®‰è£…çš„CUDAåŒ…ï¼Œå½“ç³»ç»Ÿè‡ªå¸¦CUDAç‰ˆæœ¬ä¸æ”¯æŒé¡¹ç›®ä»£ç æ—¶ï¼Œä¼šå¼•å‘ä¸€äº›å¥‡æ€ªçš„é—®é¢˜ï¼Œæ‰€ä»¥æœ€å¥½çš„åŠæ³•æ˜¯ä¿æŒpytorchå®‰è£…çš„cudatoolkitç‰ˆæœ¬ä¸ç³»ç»Ÿè‡ªå¸¦ç‰ˆæœ¬ï¼ˆnvcc -Vï¼‰æŸ¥çœ‹ä¸€è‡´ã€‚å¯é€šè¿‡Anacondaç•Œé¢å®‰è£…ã€‚è‹¥ç•Œé¢å®‰è£…ä»ç„¶å¤±è´¥ï¼Œå¯å°è¯•æ‰‹åŠ¨å®‰è£…ï¼Œè¯·å‰å¾€ æ‰‹åŠ¨éƒ¨ç½²CUDAå’ŒcuDNNã€‚3.2.2. cuDNNå¯é€šè¿‡Anacondaç•Œé¢å®‰è£…ã€‚è‹¥ç•Œé¢å®‰è£…å¤±è´¥ï¼Œå¯å°è¯•æ‰‹åŠ¨å®‰è£…ï¼Œè¯·å‰å¾€ æ‰‹åŠ¨éƒ¨ç½²CUDAå’ŒcuDNNã€‚3.2.3. NumpyNumPyï¼ˆNumerical Pythonï¼‰æ˜¯Pythonçš„ä¸€ç§å¼€æºçš„æ•°å€¼è®¡ç®—æ‰©å±•ã€‚è¿™ç§å·¥å…·å¯ç”¨æ¥å­˜å‚¨å’Œå¤„ç†å¤§å‹çŸ©é˜µï¼Œæ¯”Pythonè‡ªèº«çš„åµŒå¥—åˆ—è¡¨ï¼ˆnested list structure)ç»“æ„è¦é«˜æ•ˆçš„å¤šï¼ˆè¯¥ç»“æ„ä¹Ÿå¯ä»¥ç”¨æ¥è¡¨ç¤ºçŸ©é˜µï¼ˆmatrixï¼‰ï¼‰ï¼Œæ”¯æŒå¤§é‡çš„ç»´åº¦æ•°ç»„ä¸çŸ©é˜µè¿ç®—ï¼Œæ­¤å¤–ä¹Ÿé’ˆå¯¹æ•°ç»„è¿ç®—æä¾›å¤§é‡çš„æ•°å­¦å‡½æ•°åº“ã€‚  æ³¨æ„ï¼numpyè‹¥é€šè¿‡ conda æˆ– Anaconda ç•Œé¢å®‰è£…å¯èƒ½å­˜åœ¨é—®é¢˜ï¼Œéœ€è¦ç”¨ pip å®‰è£…  æ³¨æ„ï¼åŸºç¡€åŒ…ä¸€å®šè¦å…ˆå®‰è£…å¹¶æµ‹è¯•å¥½èƒ½ç”¨ï¼Œå†å®‰è£…å…¶ä»–åŒ…ã€‚æ¯”å¦‚å…ˆè£…numpyï¼Œå†å®‰è£…scipyï¼Œmatplotlibç­‰ã€‚é‡‡ç”¨å‘½ä»¤è¡Œå®‰è£…conda install numpypip install numpyæˆ–è€…é€šè¿‡Anacondaç•Œé¢è¿›è¡Œå®‰è£…ã€‚3.2.4. matplotlibmatplotlibåŒ…ç”¨ä»¥è¿›è¡Œç»˜å›¾ï¼Œé‡‡ç”¨å‘½ä»¤è¡Œå®‰è£…conda install matplotlibæˆ–è€…é€šè¿‡Anacondaç•Œé¢è¿›è¡Œå®‰è£…3.2.5. pandaspandasåŒ…ç”¨äºè¾“å…¥è¾“å‡ºå’Œå¤„ç†csvæ ¼å¼æ•°æ®ï¼Œé‡‡ç”¨å‘½ä»¤è¡Œå®‰è£…conda install pandasæˆ–è€…é€šè¿‡Anacondaç•Œé¢è¿›è¡Œå®‰è£…3.3. æ‰‹åŠ¨éƒ¨ç½²CUDAå’ŒcuDNNè‹¥è‡ªåŠ¨å®‰è£…CUDAå’ŒcuDNNå¤±è´¥ï¼Œä¹Ÿå¯é€‰æ‹©æ‰‹åŠ¨å®‰è£…éƒ¨ç½²CUDAã€‚é¦–å…ˆéœ€è¦æ›´æ–°è‡ªå·±çš„æ˜¾å¡é©±åŠ¨ï¼Œæ­¤å¤„ä¸å†èµ˜è¿°ã€‚è‹¥è¦æ‰‹åŠ¨éƒ¨ç½²CUDAå’ŒcuDNNï¼Œå¿…é¡»éµå¾ªå…ˆCUDAåcuDNNçš„é¡ºåºã€‚é¦–å…ˆå‰å¾€å®˜ç½‘ï¼ˆhttps://www.nvidia.com/ï¼‰ä¸‹è½½CUDAã€‚ã€2023.04.22æ›´æ–°ã€‘å®˜ç½‘ä¸‹è½½é¡µé¢å’Œç½‘å€å¤©å¤©å˜ï¼Œå¤§å®¶è‡ªå·±æ‰¾ä¸€ä¸‹æŠŠâ€¦https://developer.nvidia.com/cuda-downloads?target_os=Windows&amp;target_arch=x86_64&amp;target_version=11&amp;target_type=exe_networkç„¶åæ ¹æ®è‡ªå·±çš„å®é™…æƒ…å†µé€‰æ‹©ç›¸åº”çš„CUDAç‰ˆæœ¬ä¸‹è½½å®‰è£…ã€‚æ‰‹åŠ¨å®‰è£…CUDAåéœ€è¦è¿›è¡Œæ£€æŸ¥ã€‚win+R è¾“å…¥ cmd å›è½¦ï¼Œæ‰“å¼€å‘½ä»¤æç¤ºç¬¦ï¼Œè¾“å…¥nvcc -Vè‹¥æˆåŠŸè¿”å›cudaç‰ˆæœ¬ç­‰ä¿¡æ¯åˆ™è¡¨ç¤ºå®‰è£…æˆåŠŸã€‚ç»§ç»­è¾“å…¥ï¼ˆå…¶ä¸­è·¯å¾„è‡ªè¡Œæ ¹æ®CUDAå®‰è£…è·¯å¾„è°ƒæ•´ï¼‰cd C:\\Program Files\\NVIDIA GPU Computing Toolkit\\CUDA\\v10.0\\extras\\demo_suiteç„¶åè¾“å…¥ deviceQuery.exeï¼Œæ‰§è¡Œæ­¤ç¨‹åºã€‚å‡ºç° PASS å³è¡¨ç¤ºCUDAå®‰è£…æˆåŠŸã€‚ç„¶åï¼Œå‰å¾€æ­¤å¤„ï¼ˆhttps://developer.nvidia.com/cudnn ï¼‰ï¼Œç‚¹å‡» â€œDownload cuDNNâ€ æŒ‰é’®ä¸‹è½½cuDNNã€‚ä¸‹è½½å‰éœ€è¦æ³¨å†Œè´¦å·å¹¶ç™»é™†ã€‚æ³¨æ„ï¼ŒcuDNNç‰ˆæœ¬ä¸CUDAç‰ˆæœ¬é—´å­˜åœ¨åŒ¹é…å…³ç³»ï¼Œä¸‹è½½æ—¶ä¸€å®šè¦æ³¨æ„ã€‚ä¸‹è½½è§£å‹åå¾—åˆ°çš„æ–‡ä»¶ç›´æ¥è¦†ç›–åˆ°CUDAå®‰è£…è·¯å¾„ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚3.4. æµ‹è¯•åœ¨ç¯å¢ƒä¸­å¯åŠ¨ç»ˆç«¯ï¼Œæ¿€æ´» pytorch å®‰è£…çš„ç¯å¢ƒconda activate [name_of_your_env]è¾“å…¥pythonå¯åŠ¨pythonç¯å¢ƒã€‚æ£€æŸ¥pytorchæ˜¯å¦èƒ½å¤Ÿæ­£ç¡®è°ƒç”¨GPUé©±åŠ¨å’Œæ˜¯å¦èƒ½å¤Ÿå¯ç”¨CUDAï¼Œè¾“å…¥ï¼šimport torchtorch.cuda.is_available()è¿”å› True å³å¯ã€‚ç„¶åä¸€è¡Œè¡Œè¾“å…¥ä»¥ä¸‹å‘½ä»¤from __future__ import print_functionx = torch.rand(5, 3)print(x)ä¸Šé¢çš„ä»£ç ç”¨äºäº§ç”Ÿä¸€ä¸ª5è¡Œ3åˆ—çš„éšæœºçŸ©é˜µï¼ˆå¼ é‡ï¼‰ï¼Œè¾“å‡ºåº”è¯¥ä¸ºä¸‹é¢ç±»ä¼¼çš„å½¢å¼tensor([[0.3380, 0.3845, 0.3217],        [0.8337, 0.9050, 0.2650],        [0.2979, 0.7141, 0.9069],        [0.1449, 0.1132, 0.1375],        [0.4675, 0.3947, 0.1426]])æ¨å‡º pythonexit()4. å¸¸è§é”™è¯¯4.1. RuntimeError:An attempt has been madeâ€¦RuntimeError:An attempt has been made to start a new process before the current process has finished its bootstrapping phase.         This probably means that you are not using fork to start your        child processes and you have forgotten to use the proper idiom        in the main module:             if __name__ == '__main__':                freeze_support()å‡ºé”™çš„ä½ç½®ä¸€èˆ¬åœ¨å¦‚ä¸‹ä½ç½®for i, (inputs, labels) in enumerate(train):è§£å†³åŠæ³•æ˜¯ï¼Œåœ¨åŒ…å«è¿™ä¸ª for å¾ªç¯çš„è®­ç»ƒå‡½æ•°å‰é¢ï¼ŒåŒ…ä¸Š main å‡½æ•° if __name__==\"__main__\":ã€‚å› ä¸ºåœ¨ Windows ä¸­ï¼Œå¤šçº¿ç¨‹ç¨‹åºè¦æ”¾åœ¨ä¸»å‡½æ•°ä¸­è®­ç»ƒã€‚è€Œå‰é¢çš„ train æ•°æ®é›†å¾ˆå¯èƒ½æ¥æºäºå¦ä¸€ä¸ª .py æ–‡ä»¶è¿›è¡Œå¤„ç†çš„ç»“æœï¼Œå¦‚if __name__ == '__main__':  train = torch.utils.data.DataLoader(      DATA(root, train=True, transform=transform),  # from DATA.py      batch_size=batch_size, shuffle=True, **kwargs)requires_grad ä¸ requires_grad_ æ··æ·†  æ‰€æœ‰çš„ tensor éƒ½æœ‰ .requires_grad å±æ€§ï¼Œå¯ä»¥åœ¨åˆå§‹åŒ–æ—¶è®¾ç½®è¿™ä¸ªå±æ€§x = tensor.ones(2,4,requires_grad=True)  å¦‚æœæƒ³æ”¹å˜è¿™ä¸ªå±æ€§ï¼Œå°±è°ƒç”¨ tensor.requires_grad_() æ–¹æ³•ï¼šx.requires_grad_(False)5. å‚è€ƒæ–‡çŒ®[1] Sunnyside_Bao. Anacondaï¼‹vscodeï¼‹pytorchç¯å¢ƒæ­å»º."
  },
  
  {
    "title": "VSCodeéƒ¨ç½²Pythonå¼€å‘ç¯å¢ƒ",
    "url": "/posts/vscode-python/",
    "categories": "Tutorial, Coding",
    "tags": "vscode, python",
    "date": "2020-03-21 15:22:19 +0800",
    





    
    "snippet": "æœ¬æ–‡ä»‹ç»äº†åŸºäº VSCode çš„ Python å¼€å‘ç¯å¢ƒçš„æ­å»ºæ–¹æ³•ã€‚  1. ç®€ä»‹  2. VSCodeä¸‹è½½ä¸å®‰è£…  3. é…ç½®Pythonå¼€å‘ç¯å¢ƒ          3.1. éƒ¨ç½²è§£é‡Šå™¨      3.2. å®‰è£…Anaconda      3.3. æ–°å»ºå’Œå¤‡ä»½ç¯å¢ƒ      3.4. é…ç½®ä¾èµ–åŒ…                  3.4.1. æ›´æ–°åŒ…ç®¡ç†å·¥å…·                ...",
    "content": "æœ¬æ–‡ä»‹ç»äº†åŸºäº VSCode çš„ Python å¼€å‘ç¯å¢ƒçš„æ­å»ºæ–¹æ³•ã€‚  1. ç®€ä»‹  2. VSCodeä¸‹è½½ä¸å®‰è£…  3. é…ç½®Pythonå¼€å‘ç¯å¢ƒ          3.1. éƒ¨ç½²è§£é‡Šå™¨      3.2. å®‰è£…Anaconda      3.3. æ–°å»ºå’Œå¤‡ä»½ç¯å¢ƒ      3.4. é…ç½®ä¾èµ–åŒ…                  3.4.1. æ›´æ–°åŒ…ç®¡ç†å·¥å…·                          3.4.1.1. pip              3.4.1.2. conda              3.4.1.3. è¯´æ˜                                3.4.2. æ›´æ¢é•œåƒæº                          3.4.2.1. pipé•œåƒæº              3.4.2.2. condaé•œåƒæº                                3.4.3. å¸¸ç”¨å‘½ä»¤                    3.5. ç”Ÿæˆé…ç½®æ–‡ä»¶                  3.5.1. è§£é‡Šé…ç½®ï¼ˆsettings.jsonï¼‰          3.5.2. è°ƒè¯•é…ç½®ï¼ˆlaunch.jsonï¼‰                    3.6. è°ƒè¯•è¿è¡Œæµ‹è¯•        4. å¸¸è§é”™è¯¯          4.1. æ— æ³•å°†condaé¡¹è¯†åˆ«ä¸ºcmdetâ€¦      4.2. æ— æ³•åŠ è½½æ–‡ä»¶ \\WindowsPowerShell\\profile.ps1      4.3. æç¤ºCommandNotFoundError      4.4. OMP: Error #15: Initializing xxx      4.5. Refactor failedâ€¦        5. å‚è€ƒæ–‡çŒ®1. ç®€ä»‹Pythonæ˜¯ä¸€ç§è·¨å¹³å°çš„è®¡ç®—æœºç¨‹åºè®¾è®¡è¯­è¨€ã€‚ æ˜¯ä¸€ä¸ªé«˜å±‚æ¬¡çš„ç»“åˆäº†è§£é‡Šæ€§ã€ç¼–è¯‘æ€§ã€äº’åŠ¨æ€§å’Œé¢å‘å¯¹è±¡çš„è„šæœ¬è¯­è¨€ã€‚æœ€åˆè¢«è®¾è®¡ç”¨äºç¼–å†™è‡ªåŠ¨åŒ–è„šæœ¬(shell)ï¼Œéšç€ç‰ˆæœ¬çš„ä¸æ–­æ›´æ–°å’Œè¯­è¨€æ–°åŠŸèƒ½çš„æ·»åŠ ï¼Œè¶Šæ¥è¶Šå¤šåœ°è¢«ç”¨äºç‹¬ç«‹çš„ã€å¤§å‹é¡¹ç›®çš„å¼€å‘ã€‚2. VSCodeä¸‹è½½ä¸å®‰è£…å‰å¾€å®˜ç½‘ï¼ˆhttps://code.visualstudio.comï¼‰ä¸‹è½½å®‰è£…ï¼Œæ”¯æŒWindowsã€Linuxå’ŒMacç³»ç»Ÿã€‚å¯ä»¥ä¸‹è½½å®‰è£…ç‰ˆï¼Œä¹Ÿå¯ä»¥é€‰æ‹©è§£å‹å³ç”¨çš„ç»¿è‰²ç‰ˆã€‚åŒºåˆ«åœ¨äºå®‰è£…æ¿ä¼šå‘ç³»ç»Ÿè·¯å¾„å†™å…¥é…ç½®ä¿¡æ¯ï¼Œç»¿è‰²ç‰ˆæ‰€æœ‰çš„ä¾èµ–ä¿¡æ¯å’Œé…ç½®ä¿¡æ¯å‡å­˜æ”¾äºä¸€ä¸ªç›®å½•ä¸­ã€‚å®‰è£…ç‰ˆå¯ä»¥åœ¨çº¿ä¸‹è½½æ›´æ–°å’Œå®‰è£…æ›´æ–°ï¼Œç»¿è‰²ç‰ˆåªèƒ½ä¸‹è½½æ–°ç‰ˆæœ¬çš„ç»¿è‰²å®‰è£…åŒ…è§£å‹åè¦†ç›–æ¥æ›´æ–°ã€‚å®‰è£…å®Œæˆåï¼Œç‚¹å‡»å·¦ä¾§çš„æ‰©å±•å•†åº—ï¼Œæœç´¢chineseï¼Œä¸‹è½½ä¸­æ–‡ç®€ä½“æ±‰åŒ–åŒ…ï¼ˆå¯èƒ½éœ€è¦ç¿»å¢™ï¼‰ã€‚å®‰è£…å®Œæˆåé‡å¯VSCodeï¼Œå³å¯å‘ç°æ‰€æœ‰ç•Œé¢å‡å·²æ±‰åŒ–ã€‚æ³¨æ„ï¼š      VSCodeåŸºäºæ–‡ä»¶å¤¹è¿›è¡Œç¼–è¯‘å’Œè°ƒè¯•ï¼Œæ¯ä¸ªé¡¹ç›®å¿…é¡»å¯¹åº”ä¸€ä¸ªæ–‡ä»¶å¤¹ä½œä¸ºå·¥ä½œè·¯å¾„ï¼ˆæ ¹ç›®å½•ï¼‰ï¼Œæ ¹ç›®å½•å†…åŒ…å«ä¸€ä¸ª.vscodeæ–‡ä»¶å¤¹å­˜æ”¾é…ç½®æ–‡ä»¶ï¼ˆjsonæ ¼å¼ï¼‰ï¼›        VSCodeé»˜è®¤ç¼–ç ä¸ºUTF8ï¼Œå¯¹ä¸­æ–‡æ”¯æŒå¹¶ä¸å®Œç¾ï¼Œç‰¹åˆ«æ˜¯æ‰“å¼€å·²æœ‰çš„åŒ…å«ä¸­æ–‡æ³¨é‡Šçš„æºä»£ç æ–‡ä»¶æ—¶è¦ç‰¹åˆ«æ³¨æ„ï¼Œå¯èƒ½å¯¼è‡´ä¸­æ–‡ä¹±ç ï¼Œä¸”åœ¨ä¿å­˜æ–‡ä»¶æ—¶å¼¹å‡ºè­¦å‘Šã€‚å› æ­¤ï¼Œå¯¹äºåŒ…å«ä¸­æ–‡æ³¨é‡Šçš„å·²æœ‰æ–‡ä»¶ï¼Œä¸€èˆ¬éœ€è¦æ–°å»ºä¸€ä¸ªç©ºç™½æ–‡ä»¶ï¼Œä¿å­˜ä¸ºUTF8ç¼–ç æ ¼å¼ï¼Œç„¶åé‡æ–°è¾“å…¥ä¸­æ–‡æ³¨é‡Šéƒ¨åˆ†å†è¿›è¡Œä¿å­˜ã€‚  3. é…ç½®Pythonå¼€å‘ç¯å¢ƒ3.1. éƒ¨ç½²è§£é‡Šå™¨æ‰©å±•å•†åº—æœç´¢â€œpythonâ€ï¼Œå®‰è£…å¾®è½¯å®˜æ–¹å‡ºå“çš„Pythonæ‰©å±•ã€‚ç„¶åé‡å¯VSCodeã€‚ç„¶åé…ç½®Pythonè§£é‡Šå™¨ã€‚3.2. å®‰è£…Anacondaå¸¸ç”¨Anacondaé…ç½®Pythonç¯å¢ƒ[1]ï¼ˆè‹¥å«Œå¼ƒåºå¤§å¯ä½¿ç”¨Minicondaï¼‰ã€‚Anacondaæ˜¯ä¸€ä¸ªæ–¹ä¾¿çš„pythonåŒ…ç®¡ç†å’Œç¯å¢ƒç®¡ç†è½¯ä»¶ï¼Œä¸€èˆ¬ç”¨æ¥é…ç½®ä¸åŒçš„é¡¹ç›®ç¯å¢ƒã€‚æˆ‘ä»¬å¸¸å¸¸ä¼šé‡åˆ°è¿™æ ·çš„æƒ…å†µï¼Œæ­£åœ¨åšçš„é¡¹ç›®Aå’Œé¡¹ç›®Båˆ†åˆ«åŸºäº python 3.7 å’Œ python 3.9ï¼Œè€Œç”µè„‘ä¸€èˆ¬åªèƒ½å®‰è£…ä¸€ä¸ªç¯å¢ƒï¼Œè¿™ä¸ªæ—¶å€™Anacondaå°±æ´¾ä¸Šäº†ç”¨åœºï¼Œå®ƒå¯ä»¥åˆ›å»ºå¤šä¸ªäº’ä¸å¹²æ‰°çš„ç¯å¢ƒï¼Œåˆ†åˆ«è¿è¡Œä¸åŒç‰ˆæœ¬çš„è½¯ä»¶åŒ…ï¼Œä»¥è¾¾åˆ°å…¼å®¹çš„ç›®çš„ã€‚Anacondaé€šè¿‡ç®¡ç†å·¥å…·åŒ…ã€å¼€å‘ç¯å¢ƒã€Pythonç‰ˆæœ¬ï¼Œå¤§å¤§ç®€åŒ–äº†ä½ çš„å·¥ä½œæµç¨‹ã€‚ä¸ä»…å¯ä»¥æ–¹ä¾¿åœ°å®‰è£…ã€æ›´æ–°ã€å¸è½½å·¥å…·åŒ…ï¼Œè€Œä¸”å®‰è£…æ—¶èƒ½è‡ªåŠ¨å®‰è£…ç›¸åº”çš„ä¾èµ–åŒ…ï¼ŒåŒæ—¶è¿˜èƒ½ä½¿ç”¨ä¸åŒçš„è™šæ‹Ÿç¯å¢ƒéš”ç¦»ä¸åŒè¦æ±‚çš„é¡¹ç›®ã€‚Anacondaæ”¯æŒWindowsã€Linuxå’ŒMacå¹³å°ï¼Œä»å®˜æ–¹ç½‘ç«™ï¼ˆhttps://www.anaconda.com/ï¼‰ é€‰æ‹©å¯¹åº”å¹³å°çš„Anaconda3å®‰è£…åŒ…ä¸‹è½½ã€‚å¯¹äºWindows 10å¹³å°ï¼Œæ¨èä¸‹è½½64-Bitçš„Python3.8ç‰ˆæœ¬çš„å®‰è£…åŒ…ï¼ˆ466Mï¼‰ã€‚é‡‡ç”¨é»˜è®¤é…ç½®å®‰è£…Anacondaï¼Œå®‰è£…è·¯å¾„å¯ä»¥è‡ªå®šä¹‰ï¼Œä½†åŠ¡å¿…è®°ä½å®‰è£…è·¯å¾„ã€‚å®‰è£…æ— éœ€è”ç½‘ï¼Œä¿é™©èµ·è§è¯·å…³é—­æ€æ¯’è½¯ä»¶ã€‚è¿›è¡Œåˆ°ä¸‹å›¾æ­¥éª¤æ—¶ï¼Œå‡ä¸å‹¾é€‰ï¼Œåé¢æˆ‘ä»¬å°†æ‰‹åŠ¨é…ç½®ç¯å¢ƒå˜é‡ã€‚å°†Anacondaå®‰è£…è·¯å¾„çš„ä¸‰ä¸ªè·¯å¾„å˜é‡å†™å…¥ç³»ç»ŸPathä¸­D:\\XXX\\Anaconda3D:\\XXX\\Anaconda3\\ScriptsD:\\XXX\\Anaconda3\\Library\\bin3.3. æ–°å»ºå’Œå¤‡ä»½ç¯å¢ƒåœ¨å¼€å§‹èœå•ä¸­æ‰¾åˆ°â€œAnaconda Navigatorâ€ï¼Œå•å‡»æ‰“å¼€åï¼Œç‚¹å‡»å·¦ä¾§çš„â€œEnvironmentsâ€ï¼Œå¯ä»¥çœ‹åˆ°é»˜è®¤å­˜åœ¨ä¸€ä¸ª base(root) ç¯å¢ƒã€‚ç‚¹å‡»ä¸‹æ–¹çš„CreateæŒ‰é’®æ–°å»ºä¸€ä¸ªç¯å¢ƒã€‚å¼¹å‡º Create new environment ç•Œé¢ï¼Œè¾“å…¥ Name ï¼Œå‹¾é€‰ Python å¹¶ä¸‹æ‹‰é€‰æ‹© 3.7 ç‰ˆæœ¬ã€‚ç„¶åè®°ä½ Location å¯¹åº”çš„ç¯å¢ƒè·¯å¾„ã€‚æœ€åç‚¹å‡» Create å®Œæˆç¯å¢ƒé…ç½®ï¼Œæ–°å»ºçš„ç¯å¢ƒä¼šæ˜¾ç¤ºåœ¨ç¯å¢ƒåˆ—è¡¨ä¸­ã€‚ä¹Ÿå¯åœ¨ç»ˆç«¯ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤å»ºç«‹ä¸€ä¸ªä½¿ç”¨ python 3.9 çš„æ–°ç¯å¢ƒï¼šconda create -n [your_env_name] python=3.9æ³¨æ„ï¼Œenvs å†…çš„æ¯ä¸€ä¸ªå­æ–‡ä»¶å¤¹éƒ½æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„ç¯å¢ƒï¼Œåˆ é™¤ã€é‡å‘½åå­æ–‡ä»¶å¤¹ç­‰ä»·äºåˆ é™¤ã€é‡å‘½åç¯å¢ƒã€‚å°†å­æ–‡ä»¶å¤¹å¤åˆ¶åˆ°å…¶ä»–æœºå™¨çš„Anacondaçš„envsæ–‡ä»¶å¤¹ä¸­ï¼Œè¯¥æœºå™¨çš„Anacondaå¯ç›´æ¥è¯†åˆ«å¹¶åº”ç”¨è¯¥ç¯å¢ƒã€‚å› æ­¤å¯åœ¨é…ç½®å¥½ä¸€ä¸ªç¯å¢ƒåï¼Œå¯¹è¯¥å­æ–‡ä»¶å¤¹è¿›è¡Œå¤‡ä»½ã€‚æ¿€æ´»æŸä¸ªç¯å¢ƒçš„æ–¹æ³•ä¸ºå·¦é”®å•å‡»è¯¥ç¯å¢ƒã€‚æ‰“å¼€æŸä¸ªç¯å¢ƒçš„ç»ˆç«¯ä¸ºç‚¹å‡»ç¯å¢ƒåç§°æ—è¾¹çš„ä¸‰è§’æŒ‰é’®ï¼Œåœ¨å¼¹å‡ºèœå•ä¸­é€‰æ‹© Open Terminalã€‚ä¹Ÿå¯ä»¥ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤ï¼šconda activate [your_env_name]3.4. é…ç½®ä¾èµ–åŒ…3.4.1. æ›´æ–°åŒ…ç®¡ç†å·¥å…·3.4.1.1. pipPythoné»˜è®¤çš„åŒ…ç®¡ç†å·¥å…·æ˜¯pipã€‚è¾“å…¥ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹pipç‰ˆæœ¬pip show pipå¦‚æœpipç‰ˆæœ¬ä¸æ˜¯æœ€æ–°çš„ï¼Œå¾ˆå¤šåŒ…å¯èƒ½å®‰è£…ä¸ä¸Šã€‚å¯é€šè¿‡å‘½ä»¤æ›´æ–°pipã€‚æ‰“å¼€ç¯å¢ƒçš„ç»ˆç«¯ï¼ˆTerminalï¼‰ï¼Œè¾“å…¥ä»¥ä¸‹å‘½ä»¤åå›è½¦python -m pip install --upgrade pipå¦‚æœpipç‰ˆæœ¬ä¸æ˜¯æœ€æ–°çš„ï¼Œä¼šæ›´æ–°åˆ°æœ€æ–°ç‰ˆæœ¬ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºå¦‚æœpipç‰ˆæœ¬å·²ç»æ˜¯æœ€æ–°çš„ï¼Œä¼šå¦‚ä¸‹å›¾æç¤º3.4.1.2. condaè¿˜å¯ä»¥é‡‡ç”¨ç¬¬ä¸‰æ–¹çš„å¼€æºè·¨å¹³å°åŒ…ç®¡ç†å·¥å…·condaè¿›è¡ŒåŒ…ç®¡ç†ï¼Œä½œä¸ºpipæ— æ³•è¿›è¡ŒåŒ…æ›´æ–°æ—¶çš„å¤‡ä»½å·¥å…·ã€‚Anacondaå®‰è£…åä¸€èˆ¬é»˜è®¤å®‰è£…äº†condaå·¥å…·ã€‚è¦æŸ¥çœ‹ç¯å¢ƒæ˜¯å¦å®‰è£…äº†condaï¼Œæ‰“å¼€ç¯å¢ƒçš„ç»ˆç«¯ï¼Œè¾“å…¥conda -Vè‹¥è¿”å›condaçš„ç‰ˆæœ¬å·ï¼Œåˆ™è¡¨ç¤ºç¯å¢ƒä¸­é»˜è®¤æ­è½½äº†condaã€‚è¾“å…¥ä»¥ä¸‹å‘½ä»¤æ›´æ–°condaconda update -n base condaæœŸé—´æç¤ºæ˜¯å¦æ›´æ–°åŒ…ï¼Œè¾“å…¥yç¡®è®¤3.4.1.3. è¯´æ˜condaå’Œpipé€šå¸¸è¢«è®¤ä¸ºå‡ ä¹å®Œå…¨ç›¸åŒã€‚è™½ç„¶è¿™ä¸¤ä¸ªå·¥å…·çš„æŸäº›åŠŸèƒ½é‡å ï¼Œä½†å®ƒä»¬è®¾è®¡ç”¨äºä¸åŒçš„ç›®çš„ã€‚ pipæ˜¯Python Packaging Authorityæ¨èçš„ç”¨äºä»Python Package Indexå®‰è£…åŒ…çš„å·¥å…·ã€‚ Pipå®‰è£…æ‰“åŒ…ä¸ºwheelsæˆ–æºä»£ç åˆ†å‘çš„Pythonè½¯ä»¶ã€‚åè€…å¯èƒ½è¦æ±‚ç³»ç»Ÿå®‰è£…å…¼å®¹çš„ç¼–è¯‘å™¨å’Œåº“ã€‚condaæ˜¯è·¨å¹³å°çš„åŒ…å’Œç¯å¢ƒç®¡ç†å™¨ï¼Œå¯ä»¥å®‰è£…å’Œç®¡ç†æ¥è‡ªAnaconda repositoryä»¥ Anaconda Cloudçš„condaåŒ…ã€‚ condaåŒ…æ˜¯äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œéœ€è¦ä½¿ç”¨ç¼–è¯‘å™¨æ¥å®‰è£…å®ƒä»¬ã€‚å¦å¤–ï¼ŒcondaåŒ…ä¸ä»…é™äºPythonè½¯ä»¶ã€‚å®ƒä»¬è¿˜å¯èƒ½åŒ…å«Cæˆ–C ++åº“ï¼ŒRåŒ…æˆ–ä»»ä½•å…¶ä»–è½¯ä»¶ã€‚è¿™æ˜¯condaå’Œpipä¹‹é—´çš„å…³é”®åŒºåˆ«ã€‚ Pipå®‰è£…PythonåŒ…ï¼Œè€Œcondaå®‰è£…åŒ…å¯èƒ½åŒ…å«ç”¨ä»»ä½•è¯­è¨€ç¼–å†™çš„è½¯ä»¶çš„åŒ…ã€‚åœ¨ä½¿ç”¨pipä¹‹å‰ï¼Œå¿…é¡»é€šè¿‡ç³»ç»ŸåŒ…ç®¡ç†å™¨æˆ–ä¸‹è½½å¹¶è¿è¡Œå®‰è£…ç¨‹åºæ¥å®‰è£…Pythonè§£é‡Šå™¨ã€‚è€Œcondaå¯ä»¥ç›´æ¥å®‰è£…PythonåŒ…ä»¥åŠPythonè§£é‡Šå™¨ï¼Œå³condaå°†pythonæœ¬èº«ä¹Ÿå½“åšä¸€ä¸ªåŒ…æ¥ç®¡ç†ã€‚å¦å¤–ï¼ŒcondaæŸ¥çœ‹ç¯å¢ƒä¸­å®‰è£…çš„æ‰€æœ‰åŒ…æ—¶ï¼Œå¯ä»¥åŒ…å«ä»Anacondaç•Œé¢å®‰è£…çš„åŒ…ï¼Œè€Œpipåˆ™åªèƒ½æŸ¥çœ‹åˆ°æ‰€æœ‰é€šè¿‡å‘½ä»¤è¡Œå®‰è£…çš„åŒ…ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œé€šè¿‡Anacondaç•Œé¢å®‰è£…çš„cudatoolkitå’ŒcudnnåŒ…ï¼Œåœ¨pipä¸­æ— æ³•æŸ¥åˆ°ã€‚å¯¹äºç”¨æˆ·è€Œè¨€ï¼Œå°½å¯èƒ½ä»ä¸€è€Œç»ˆçš„é‡‡ç”¨ä¸€ç§åŒ…ç®¡ç†å·¥å…·ã€‚è‹¥ä½¿ç”¨Anacondaé…ç½®çš„pythonç¯å¢ƒï¼Œåˆ™æ¨èä½¿ç”¨condaï¼Œé…åˆAnacondaç•Œé¢ä½¿ç”¨æ›´åŠ å‹å¥½ï¼Œé™¤éæŸäº›åŒ…æ— æ³•é€šè¿‡condaå®‰è£…ï¼Œåˆ™å¯é‡‡ç”¨pipå®‰è£…ã€‚3.4.2. æ›´æ¢é•œåƒæº3.4.2.1. pipé•œåƒæºpipçš„é»˜è®¤é•œåƒæºåœ¨å›½å¤–ï¼Œæ›´æ–°åŒ…ä¼šä¸‹è½½ç¼“æ…¢ç”šè‡³æ— æ³•ä¸‹è½½ï¼Œå¯æ›´æ¢åˆ°å›½å†…çš„é•œåƒæºï¼ˆæ¸…åã€é˜¿é‡Œã€ä¸­ç§‘å¤§ç­‰ï¼‰ã€‚å¯¹äºLinuxç³»ç»Ÿï¼Œç›´æ¥ä¿®æ”¹ ~/.pip/pip.conf (æ²¡æœ‰å°±åˆ›å»ºä¸€ä¸ª)ï¼Œ å†…å®¹å¦‚ä¸‹[global]index-url = https://pypi.tuna.tsinghua.edu.cn/simpleå¯¹äºWindowsç³»ç»Ÿï¼Œå¿«æ·é”® win+R  æ‰“å¼€è¿è¡Œï¼Œè¾“å…¥ %HOMEPATH% å›è½¦æ‰“å¼€ç”¨æˆ·ç›®å½•ï¼Œåœ¨æ­¤ç›®å½•ä¸‹åˆ›å»º pip æ–‡ä»¶å¤¹ï¼Œåœ¨ pip æ–‡ä»¶å¤¹å†…åˆ›å»º pip.ini æ–‡ä»¶, å†…å®¹å¦‚ä¸‹[global]timeout = 6000index-url = https://pypi.tuna.tsinghua.edu.cn/simpletrusted-host = pypi.tuna.tsinghua.edu.cnç‚¹å‡» â€œUpdate indexâ€¦â€ æ›´æ–°ç´¢å¼•3.4.2.2. condaé•œåƒæºå¯é€šè¿‡ä¿®æ”¹ç”¨æˆ·ç›®å½•ä¸‹çš„ .condarc æ–‡ä»¶æ¥æ›´æ¢æºï¼Œæ–‡ä»¶ä½äºWindowsï¼šC:\\Users\\xxx\\.condarcLinuxï¼š/home/xxx/.condarcå…¶ä¸­ xxx ä¸ºç”¨æˆ·è´¦æˆ·åç§°ã€‚å¦‚æœè¯¥è·¯å¾„ä¸‹æ²¡æœ‰è¯¥æ–‡ä»¶ï¼Œå¯è‡ªè¡Œæ–°å»ºä¸€ä¸ªï¼Œæ³¨æ„æ–‡ä»¶å…¨åä¸º â€œ.condarcâ€ï¼Œæ²¡æœ‰å…¶å®ƒä»»ä½•åç¼€ã€‚è‹¥Windowsç”¨æˆ·æ— æ³•ç›´æ¥æ–°å»ºè¯¥æ–‡ä»¶ï¼Œå¯ä»¥å…ˆæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ç”Ÿæˆè¯¥æ–‡ä»¶conda config --set show_channel_urls yeså°†ä¸‹é¢çš„ä»£ç è¦†ç›–æ–‡ä»¶ä¸­æ‰€æœ‰å†…å®¹ï¼Œå®Œæˆæºæ›´æ¢channels:  - defaultsshow_channel_urls: truechannel_alias: https://mirrors.tuna.tsinghua.edu.cn/anacondadefault_channels:  - https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/main  - https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/free  - https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/r  - https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/pro  - https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/msys2custom_channels:  conda-forge: https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud  msys2: https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud  bioconda: https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud  menpo: https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud  pytorch: https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud  simpleitk: https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloudè¿è¡Œä»¥ä¸‹å‘½ä»¤æ¸…é™¤ç¼“å­˜conda clean -iç‚¹å‡» â€œUpdate indexâ€¦â€ æ›´æ–°ç´¢å¼•3.4.3. å¸¸ç”¨å‘½ä»¤  å®‰è£…åŒ…ï¼ˆæ³¨æ„ï¼å¿…é¡»è¦æ–­å¼€æ‰€æœ‰VPNç­‰ç§‘å­¦ä¸Šç½‘ä»£ç†å†è¿›è¡Œå®‰è£…ï¼ï¼‰pip install xxxconda install xxx  æ˜¾ç¤ºç¯å¢ƒä¸‹æ‰€æœ‰å®‰è£…çš„åŒ…[conda]  conda list [pip]    pip -v list  æ˜¾ç¤ºæ‰€æœ‰è¿‡æ—¶åŒ…pip list --outdated  æ›´æ–°ç‰¹å®šåŒ…pip install --upgrade xxxxæˆ–è€…ä½¿ç”¨conda upgrade xxxx  æ›´æ–°pippython -m pip install --upgrade pip  æ›´æ–°condaconda update -n base -c defaults conda3.5. ç”Ÿæˆé…ç½®æ–‡ä»¶åœ¨é¡¹ç›®å·¥ä½œè·¯å¾„ä¸‹æ–°å»º .vscode æ–‡ä»¶å¤¹ï¼Œå…¶ä¸­æ–°å»ºä»¥ä¸‹ä¸¤ä¸ªé…ç½®æ–‡ä»¶ï¼Œå¹¶ç”¨ä¸‹é¢çš„å†…å®¹å¡«å……ã€‚3.5.1. è§£é‡Šé…ç½®ï¼ˆsettings.jsonï¼‰{    \"python.pythonPath\": \"E:\\\\ProgramFiles\\\\Anaconda3\\\\envs\\\\Pytorch\\\\python.exe\"}å…¶ä¸­å…·ä½“çš„pythonè·¯å¾„ä½ç½®å› Anacondaå®‰è£…ä½ç½®ä¸åŒè€Œä¸åŒï¼Œæ³¨æ„è½¬ä¹‰å­—ç¬¦ \\\\ã€‚3.5.2. è°ƒè¯•é…ç½®ï¼ˆlaunch.jsonï¼‰{    \"version\": \"0.2.0\",    \"configurations\": [        {            \"name\": \"Python: å½“å‰æ–‡ä»¶\",            \"type\": \"python\",            \"request\": \"launch\",            \"program\": \"${file}\",            \"console\": \"integratedTerminal\"        }    ]}3.6. è°ƒè¯•è¿è¡Œæµ‹è¯•éšä¾¿æ–°å»ºä¸€ä¸ª python æ–‡ä»¶ï¼Œå¦‚ printtest.py è¿›è¡Œæµ‹è¯•ï¼Œä¸‹å›¾å¯ä»¥çœ‹å‡ºå…·å¤‡ä»£ç æ™ºèƒ½è¡¥å…¨åŠŸèƒ½ã€‚æŒ‰ F5 è¿è¡Œç»“æœå¦‚ä¸‹4. å¸¸è§é”™è¯¯4.1. æ— æ³•å°†condaé¡¹è¯†åˆ«ä¸ºcmdetâ€¦VSCode è§£é‡Š .py æ—¶ï¼Œç»ˆç«¯è‡ªåŠ¨è¿è¡Œå‘½ä»¤ conda activate Pytorch(ç¯å¢ƒå) æ—¶æç¤ºæ— æ³•å°†â€œcondaâ€é¡¹è¯†åˆ«ä¸º cmdletã€å‡½æ•°ã€è„šæœ¬æ–‡ä»¶æˆ–å¯è¿è¡Œç¨‹åºçš„åç§°ã€‚è§£å†³æ–¹æ³•å¦‚ä¸‹ã€‚ã€æ¨èã€‘è¦ä¹ˆå°†Anacondaå®‰è£…è·¯å¾„çš„ä¸‰ä¸ªè·¯å¾„å˜é‡å†™å…¥ç³»ç»Ÿ Path ä¸­ï¼Œç„¶åé‡å¯ç”µè„‘ã€‚X:\\XXX\\Anaconda3X:\\XXX\\Anaconda3\\ScriptsX:\\XXX\\Anaconda3\\Library\\binè¦ä¹ˆæ‰“å¼€VSCodeçš„è®¾ç½®ï¼ˆctrl+,ï¼‰ï¼Œè®¾ç½®Pythonæ’ä»¶ä¸­çš„condaçš„è·¯å¾„ç„¶åé‡å¯ç”µè„‘ã€‚4.2. æ— æ³•åŠ è½½æ–‡ä»¶ \\WindowsPowerShell\\profile.ps1ä»¥ç®¡ç†å‘˜èº«ä»½æ‰“å¼€ PowerShell è¾“å…¥set-executionpolicy remotesigned4.3. æç¤ºCommandNotFoundErrorVSCode è§£é‡Š .py æ—¶ï¼Œç»ˆç«¯è‡ªåŠ¨è¿è¡Œå‘½ä»¤ conda activate xxx(ç¯å¢ƒå) æ—¶æç¤ºCommandNotFoundError: Your shell has not been properly configured to use 'conda activate'.If using 'conda activate' from a batch script, change yourinvocation to 'CALL conda.bat activate'.è§£å†³æ–¹æ³•å¦‚ä¸‹ã€‚é¦–å…ˆåœ¨VSCode çš„ç»ˆç«¯ä¸­è¾“å…¥ conda initï¼Œç„¶åé‡å¯VSCodeï¼ŒæŸ¥çœ‹é—®é¢˜æ˜¯å¦è§£å†³ã€‚è‹¥å‡ºç°é”™è¯¯æ— æ³•åŠ è½½æ–‡ä»¶ ******.ps1ï¼Œå› ä¸ºåœ¨æ­¤ç³»ç»Ÿä¸­ç¦æ­¢æ‰§è¡Œè„šæœ¬ã€‚å…³é—­VSCodeï¼Œç„¶åä½¿ç”¨ç®¡ç†å‘˜æƒé™æ‰“å¼€ cmdï¼Œæ¯”å¦‚æŒ‰ Win+Xï¼Œé€‰æ‹© Windows PowerShellï¼ˆç®¡ç†å‘˜ï¼‰ æ‰“å¼€ï¼Œè¾“å…¥å‘½ä»¤set-ExecutionPolicy RemoteSignedå›è½¦æ‰§è¡Œç­–ç•¥æ›´æ”¹ æ‰§è¡Œç­–ç•¥å¯ä»¥é˜²æ­¢æ‚¨æ‰§è¡Œä¸ä¿¡ä»»çš„è„šæœ¬ã€‚æ›´æ”¹æ‰§è¡Œç­–ç•¥å¯èƒ½ä¼šä½¿æ‚¨é¢ä¸´ about_Execution_Policies å¸®åŠ©ä¸»é¢˜ä¸­æ‰€è¿°çš„å®‰å…¨é£é™©ã€‚æ˜¯å¦è¦æ›´æ”¹æ‰§è¡Œç­–ç•¥? [Y] æ˜¯(Y)  [N] å¦(N)  [S] æŒ‚èµ·(S)  [?] å¸®åŠ© (é»˜è®¤å€¼ä¸ºâ€œYâ€): yç„¶åè¾“å…¥ y å›è½¦ã€‚ä¹‹åé‡å¯VSCodeï¼ŒF5 æ‰§è¡ŒPythonæ–‡ä»¶åº”è¯¥å°±ä¸ä¼šæç¤ºé”™è¯¯äº†ã€‚4.4. OMP: Error #15: Initializing xxxOMP: Error #15: Initializing libiomp5md.dll, but found libiomp5md.dll already initializedå…è®¸å‰¯æœ¬å­˜åœ¨ï¼Œç¨‹åºä¸­æ·»åŠ import osos.environ[â€˜KMP_DUPLICATE_LIB_OKâ€™]=â€˜Trueâ€™4.5. Refactor failedâ€¦å½“æ‰“å¼€ä¸€ä¸ª .py æ–‡ä»¶ï¼Œè¯•å›¾é€šè¿‡ F2 å¿«æ·é”®æ¥ä¿®æ”¹å˜é‡åç§°æ—¶ï¼Œä¼šå¼¹å‡º Refactor failed....... ä¸€å¤§ä¸²é”™è¯¯ã€‚è¿™æ˜¯å› ä¸ºå¦‚æœè¯¥æ–‡ä»¶æ²¡æœ‰è¿è¡Œè¿‡ï¼ŒVSCode é»˜è®¤çš„ Python è‡ªåŠ¨è¡¥é½å’Œé™æ€åˆ†æå·¥å…· Jedi å¿…é¡»è¦æ±‚å…ˆè¿è¡Œä¸€æ¬¡ .py æ–‡ä»¶æ‰èƒ½è¿›è¡Œæ”¹åã€‚å› æ­¤å¯ä»¥é€‰æ‹©æ›´åŠ æ–°çš„è‡ªåŠ¨è¡¥é½å’Œé™æ€åˆ†æå·¥å…· Pylance ï¼ˆç”±å¾®è½¯å¼€å‘ï¼‰è§£å†³ä¸è¿è¡Œæ–‡ä»¶è€Œéœ€è¦æ”¹åçš„æ“ä½œã€‚å·¦ä¸‹è§’é½¿è½®æ‰“å¼€è®¾ç½®ï¼Œè¾“å…¥ jedi ï¼Œå®šä½åˆ° Python: Language Serverï¼Œç„¶åå°†é€‰é¡¹æ”¹æˆ Pylance ï¼Œæç¤ºéœ€è¦å®‰è£… Pylance æ’ä»¶ï¼Œå®‰è£…åé‡å¯ VSCode å³å¯ã€‚5. å‚è€ƒæ–‡çŒ®[1] æŒ–æ˜æœºå°ç‹å­. VSCode+Anacondaæ‰“é€ èˆ’é€‚çš„Pythonç¯å¢ƒ.[2] Eric-Young. pythonä¹‹VSCodeå®‰è£…."
  },
  
  {
    "title": "VSCodeéƒ¨ç½²C/C++å¼€å‘ç¯å¢ƒ",
    "url": "/posts/vscode-c/",
    "categories": "Tutorial, Coding",
    "tags": "vscode, c/c++",
    "date": "2020-03-18 12:21:49 +0800",
    





    
    "snippet": "æœ¬æ–‡ä»‹ç»äº†åŸºäº VSCode çš„ C/C++ å¼€å‘ç¯å¢ƒçš„æ­å»ºæ–¹æ³•ã€‚  1. VSCodeç®€ä»‹  2. VSCodeä¸‹è½½ä¸å®‰è£…  3. é…ç½®C/C++å¼€å‘ç¯å¢ƒ          3.1. MinGW-W64 ç¼–è¯‘å™¨                  3.1.1. å®‰è£…ç¼–è¯‘å™¨          3.1.2. é…ç½® â€œç¼–è¯‘-è°ƒè¯•-è¿è¡Œâ€ é“¾                          3.1...",
    "content": "æœ¬æ–‡ä»‹ç»äº†åŸºäº VSCode çš„ C/C++ å¼€å‘ç¯å¢ƒçš„æ­å»ºæ–¹æ³•ã€‚  1. VSCodeç®€ä»‹  2. VSCodeä¸‹è½½ä¸å®‰è£…  3. é…ç½®C/C++å¼€å‘ç¯å¢ƒ          3.1. MinGW-W64 ç¼–è¯‘å™¨                  3.1.1. å®‰è£…ç¼–è¯‘å™¨          3.1.2. é…ç½® â€œç¼–è¯‘-è°ƒè¯•-è¿è¡Œâ€ é“¾                          3.1.2.1. VSCode é…ç½®              3.1.2.2. CMake é…ç½®                                          3.2. MSVC ç¼–è¯‘å™¨                  3.2.1. å®‰è£…ç¼–è¯‘å™¨          3.2.2. é…ç½® â€œç¼–è¯‘-è°ƒè¯•-è¿è¡Œâ€ é“¾                          3.2.2.1. VSCode é…ç½®              3.2.2.2. CMake é…ç½®                                            5. VSCode å¿«æ·é”®  6. å‚è€ƒæ–‡çŒ®1. VSCodeç®€ä»‹VSCodeæ˜¯å¾®è½¯æ¨å‡ºçš„ä¸€æ¬¾è·¨å¹³å°å¼€æºç¼–è¾‘å™¨ï¼Œå‡­å€Ÿå¼ºå¤§çš„ç¬¬ä¸‰æ–¹æ’ä»¶æ”¯æŒC/C++ã€Pythonã€Javaç­‰ä¼—å¤šè¯­è¨€ï¼Œä½“ç§¯å°å·§åŠŸèƒ½ä¸°å¯Œï¼Œé€‚åˆå°å‹å·¥ç¨‹é¡¹ç›®çš„å¼€å‘è°ƒè¯•ã€‚ä¸‹é¢ç®€å•ä»‹ç»VSCodeå¼€å‘ç¯å¢ƒçš„éƒ¨ç½²ã€‚æ³¨æ„ï¼ŒVSCodeä»…ä»…æ˜¯ä¸€ä¸ªå‰ç«¯æ–‡æœ¬ç¼–è¾‘å™¨ï¼Œæœ¬è´¨ä¸Šä¸è®°äº‹æœ¬å¹¶æ— ä¸åŒï¼Œåœ¨æ²¡æœ‰æ’ä»¶å’Œç¼–è¯‘å™¨çš„æƒ…å†µä¸‹åªèƒ½è¿›è¡Œæ–‡ä»¶çš„è¯»å†™ï¼Œå¹¶ä¸èƒ½è¿›è¡Œæºç¨‹åºç¼–è¯‘è°ƒè¯•ã€‚ä¸ä¹‹ç›¸å¯¹ï¼Œå¾®è½¯è‡ªå®¶çš„Visual Studioæ˜¯ä¸€ä¸ªé›†æˆå¼€å‘ç¯å¢ƒï¼ˆIDEï¼‰ï¼Œä¸‹è½½å®‰è£…åå¯ä»¥ç›´æ¥è¿›è¡Œæºç¨‹åºçš„ç¼–è¯‘è°ƒè¯•ã€‚ä»æºä»£ç è½¬æ¢ä¸ºå¯æ‰§è¡Œç¨‹åºçš„å®Œæ•´è¿‡ç¨‹ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬ä¿—ç§°çš„ç¼–è¯‘è¿‡ç¨‹ã€‚ç»è¿‡å‡ åå¹´çš„å‘å±•ï¼Œå¦‚ä»Šæ ‡å‡†çš„ç¼–è¯‘è¿‡ç¨‹å¦‚ä¸‹ï¼š  æºä»£ç  (source code) =&gt;  é¢„å¤„ç†å™¨ (preprocessor) =&gt;  ç¼–è¯‘å™¨ (compiler) =&gt;  æ±‡ç¼–ç¨‹åº (assembler) =&gt;  ç›®æ ‡ä»£ç  (object code) =&gt;  é“¾æ¥å™¨ (Linker) =&gt;  å¯æ‰§è¡Œæ–‡ä»¶ (executables)VSCode æœ¬èº«ä»…ä»…æ˜¯ä¸€ä¸ªæºä»£ç ç¼–è¾‘å™¨ã€‚ä¸è¿‡ï¼Œå½“é…åˆæ’ä»¶å’Œç¼–è¯‘å™¨åï¼ŒVSCodeä¹Ÿèƒ½å¤Ÿå®Œæˆç»å¤§éƒ¨åˆ†çš„æºä»£ç ç¼–è¯‘è°ƒè¯•å·¥ä½œã€‚2. VSCodeä¸‹è½½ä¸å®‰è£…å‰å¾€å®˜ç½‘ï¼ˆhttps://code.visualstudio.comï¼‰ä¸‹è½½å®‰è£…ï¼Œæ”¯æŒWindowsã€Linuxå’ŒMacç³»ç»Ÿã€‚å¯ä»¥ä¸‹è½½å®‰è£…ç‰ˆï¼Œä¹Ÿå¯ä»¥é€‰æ‹©è§£å‹å³ç”¨çš„ç»¿è‰²ç‰ˆã€‚åŒºåˆ«åœ¨äºå®‰è£…æ¿ä¼šå‘ç³»ç»Ÿè·¯å¾„å†™å…¥é…ç½®ä¿¡æ¯ï¼Œç»¿è‰²ç‰ˆæ‰€æœ‰çš„ä¾èµ–ä¿¡æ¯å’Œé…ç½®ä¿¡æ¯å‡å­˜æ”¾äºä¸€ä¸ªç›®å½•ä¸­ã€‚å®‰è£…ç‰ˆå¯ä»¥åœ¨çº¿ä¸‹è½½æ›´æ–°å’Œå®‰è£…æ›´æ–°ï¼Œç»¿è‰²ç‰ˆåªèƒ½ä¸‹è½½æ–°ç‰ˆæœ¬çš„ç»¿è‰²å®‰è£…åŒ…è§£å‹åè¦†ç›–æ¥æ›´æ–°ã€‚å®‰è£…å®Œæˆåï¼Œç‚¹å‡»å·¦ä¾§çš„æ‰©å±•å•†åº—ï¼Œæœç´¢chineseï¼Œä¸‹è½½ä¸­æ–‡ç®€ä½“æ±‰åŒ–åŒ…ï¼ˆå¯èƒ½éœ€è¦ç¿»å¢™ï¼‰ã€‚å®‰è£…å®Œæˆåé‡å¯VSCodeï¼Œå³å¯å‘ç°æ‰€æœ‰ç•Œé¢å‡å·²æ±‰åŒ–ã€‚æ³¨æ„ï¼š      VSCodeåŸºäºæ–‡ä»¶å¤¹è¿›è¡Œç¼–è¯‘å’Œè°ƒè¯•ï¼Œæ¯ä¸ªé¡¹ç›®å¿…é¡»å¯¹åº”ä¸€ä¸ªæ–‡ä»¶å¤¹ä½œä¸ºå·¥ä½œè·¯å¾„ï¼ˆæ ¹ç›®å½•ï¼‰ï¼Œæ ¹ç›®å½•å†…åŒ…å«ä¸€ä¸ª.vscodeæ–‡ä»¶å¤¹å­˜æ”¾é…ç½®æ–‡ä»¶ï¼ˆjsonæ ¼å¼ï¼‰ï¼›        VSCodeé»˜è®¤ç¼–ç ä¸ºUTF8ï¼Œå¯¹ä¸­æ–‡æ”¯æŒå¹¶ä¸å®Œç¾ï¼Œç‰¹åˆ«æ˜¯æ‰“å¼€å·²æœ‰çš„åŒ…å«ä¸­æ–‡æ³¨é‡Šçš„æºä»£ç æ–‡ä»¶æ—¶è¦ç‰¹åˆ«æ³¨æ„ï¼Œå¯èƒ½å¯¼è‡´ä¸­æ–‡ä¹±ç ï¼Œä¸”åœ¨ä¿å­˜æ–‡ä»¶æ—¶å¼¹å‡ºè­¦å‘Šã€‚å› æ­¤ï¼Œå¯¹äºåŒ…å«ä¸­æ–‡æ³¨é‡Šçš„å·²æœ‰æ–‡ä»¶ï¼Œä¸€èˆ¬éœ€è¦æ–°å»ºä¸€ä¸ªç©ºç™½æ–‡ä»¶ï¼Œä¿å­˜ä¸ºUTF8ç¼–ç æ ¼å¼ï¼Œç„¶åé‡æ–°è¾“å…¥ä¸­æ–‡æ³¨é‡Šéƒ¨åˆ†å†è¿›è¡Œä¿å­˜ã€‚  3. é…ç½®C/C++å¼€å‘ç¯å¢ƒåŸºäº VSCode è¿›è¡Œ C/C++ é¡¹ç›®å¼€å‘ï¼Œé¦–å…ˆéœ€è¦å®‰è£…C/C++çš„VSCodeæ‰©å±•ã€‚æ‰©å±•å•†åº—æœç´¢â€œCâ€ï¼Œå®‰è£…å¾®è½¯å®˜æ–¹å‡ºå“çš„C/C++æ‰©å±•ã€‚ç„¶åé‡å¯VSCodeã€‚å®‰è£…æ‰©å±•å®Œæ¯•åï¼Œéœ€è¦å®‰è£…ä¸€æ¬¾ C/C++ ç¼–è¯‘å™¨è¿›è¡Œé¡¹ç›®ç¼–è¯‘ã€‚C/C++ ç¼–è¯‘å™¨ç§ç±»ä¼—å¤šï¼Œä¸»è¦åŒ…æ‹¬ GCC å®¶æ—ï¼ŒMSC å®¶æ—ï¼ŒClang å’Œå…¶ä»–ç¼–è¯‘å™¨ï¼š  GCC å®¶æ—ï¼ˆGNU Compiler Collectionï¼‰          GNU C++ï¼šGCCå®¶æ—çš„æ ¹æœ¬ï¼Œå…¶ä»–ç¼–è¯‘å™¨å‡ä»æ­¤å¯¼å‡º      Cygwinï¼šWIN32å¹³å°ä¸‹çš„ç±»UNIXç¯å¢ƒï¼ŒåŒ…å«ç¼–è¯‘å™¨      Mingw32ï¼šWIN32å¹³å°çš„GCCç¼–è¯‘å™¨ï¼Œä»…32ä½ï¼Œåœæ­¢æ›´æ–°      Mingw32-w64ï¼šWIN32å¹³å°çš„GCCç¼–è¯‘å™¨ï¼Œä»£æ›¿Mingw32        MSVC å®¶æ—ï¼ˆMicrosoft C/C++ï¼‰          MSVCï¼šå¾®è½¯ VS IDE çš„ç¼–è¯‘å™¨        LLVM-Clang å®¶æ—          Clangï¼šåŸºäºLLVMçš„C/C++ç¼–è¯‘å™¨ï¼Œä¸»è¦é¢å‘è‹¹æœå¼€å‘        Borland å®¶æ—          TC/TC++      BC        å…¶ä»–          Intel C/C++      Watcom C/C++      â€¦      åœ¨Windowsç¯å¢ƒä¸‹ï¼ŒVSCode æ¨èä½¿ç”¨ MinGW-w64 ç¼–è¯‘å™¨æˆ– MSVC ç¼–è¯‘å™¨ã€‚3.1. MinGW-W64 ç¼–è¯‘å™¨3.1.1. å®‰è£…ç¼–è¯‘å™¨å‰å¾€ MinGW-w64 å®˜æ–¹ GitHubï¼ˆhttps://github.com/niXman/mingw-builds-binaries/releases ï¼‰é€‰æ‹©ä¸‹è½½å¹¶å®‰è£…ç¼–è¯‘å™¨ã€‚å¯¹äº Windows ç¯å¢ƒï¼Œä¸‹è½½ MingW-W64-builds ç‰ˆæœ¬ï¼Œå»ºè®®é€‰æ‹© x86_64-xx.x.0-release-posix-seh-ucrt-rt_v10-rev2.7z ç‰ˆæœ¬ã€‚å®‰è£…æ—¶è·¯å¾„å¿…é¡»ä¸ºå…¨è‹±æ–‡ã€‚å¯¹äºè·¨å¹³å°ç¨‹åºï¼ŒMinGW-W64ç¼–è¯‘å™¨æä¾›æœ€æ¥è¿‘åŸç”Ÿ Linux çš„ç¼–è¯‘ç¯å¢ƒã€‚  å…³äº MinGW-W64 å„ç‰ˆæœ¬çš„é¢å¤–ä»‹ç»ï¼š      çº¿ç¨‹æ¨¡å‹ï¼šè·¨å¹³å°ç¨‹åºé€‰æ‹©posixï¼Œwinç¨‹åºï¼ˆè¦ä½¿ç”¨WinAPIï¼‰é€‰æ‹©win32              [ posix ]ï¼šçº¿ç¨‹ä½¿ç”¨ pthread çš„ Windows ç‰ˆæœ¬ã€‚posix æ˜¯æ“ä½œç³»ç»Ÿç»Ÿä¸€æ¥å£æ ‡å‡†ï¼Œä¸åŒæ“ä½œç³»ç»Ÿéœ€è¦æä¾›ç›¸åŒçš„æ¥å£ä»¥æ–¹ä¾¿åº”ç”¨ç§»æ¤ï¼Œé™ä½ç§»æ¤æˆæœ¬ï¼Œä½†æ˜¯åªæ”¯æŒ POSIX çº¿ç¨‹æ¨¡å‹ã€‚pthread æ˜¯åœ¨ Linux ä¸‹å¸¸ç”¨çš„çº¿ç¨‹åº“ï¼Œä½¿ç”¨ posix æ¥å£æ„å‘³ç€åº”ç”¨çš„å¤šçº¿ç¨‹æ¨¡å‹ç§»æ¤æ›´æ–¹ä¾¿ï¼Œå“ªæ€•ä» Linux ä¸‹æ‹‰è¿‡æ¥ä¸€ä¸ªåº”ç”¨æ¡†æ¶ä¹Ÿå¯ä»¥è¾ƒå°ä»£ä»·ä¿®æ”¹ä»£ç ã€‚ä½†åœ¨æŸäº›æƒ…å†µä¸‹ä¼šå¼•èµ·æ€§èƒ½ä¸‹é™ï¼Œæ¯•ç«Ÿä¸æ˜¯ Windows åŸç”Ÿçš„çº¿ç¨‹åº“ï¼ŒC æ ‡å‡†å¯èƒ½åˆ° C11 ä»¥ä¸Šï¼Œå¹¶ä¸”æ”¯æŒ C11ï¼ˆC è¯­è¨€ç¼–ç æ ‡å‡†ï¼‰çš„ç‰¹æ€§ï¼›        [ win32 ]ï¼šä½¿ç”¨ Windows åŸç”Ÿçº¿ç¨‹åº“ï¼Œæ€§èƒ½ç­‰æ–¹é¢è¡¨ç°æ›´å‡ºè‰²ï¼Œå…¼å®¹æ€§æ›´å¥½ï¼Œæ²¡æœ‰ C11 é‚£äº›çœ¼èŠ±ç¼­ä¹±çš„ç‰¹æ€§ï¼Œå°±çœ‹ä½ æ˜¯å¦ç†Ÿæ‚‰ Windows ç›¸å…³æ¥å£ã€‚              å¼‚å¸¸æ¨¡å‹ï¼šé€‰æ‹©seh              [ seh ]ï¼šï¼ˆStructured Exception Handlingï¼‰æ˜¯ä¸€ç§åœ¨Windowsä¸‹ç‰¹æœ‰çš„å¼‚å¸¸å¤„ç†æœºåˆ¶ã€‚SEHå®ç°äº†ä¸€ç§ç»“æ„åŒ–çš„å¼‚å¸¸å¤„ç†æœºåˆ¶ï¼Œå¯ä»¥åœ¨ç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­æ•è·å¹¶å¤„ç†ç¨‹åºé”™è¯¯å’Œå¼‚å¸¸ã€‚ SEHé‡‡ç”¨äº†ä¸€ç§åŸºäºè¡¨æ ¼çš„ç¼–ç æ–¹å¼ï¼Œåœ¨ç¨‹åºè¿è¡Œæ—¶ä¼šæ ¹æ®è¡¨æ ¼å†…çš„ä¿¡æ¯æ¥å¤„ç†å¼‚å¸¸ã€‚        [ dwarf ]ï¼šdwarfï¼ˆDW2ï¼Œdwarf-2ï¼‰æ˜¯ä¸€ç§è·¨å¹³å°çš„è°ƒè¯•ä¿¡æ¯æ ‡å‡†ï¼Œä¸»è¦ç”¨äºUNIX/Linuxå¹³å°çš„è°ƒè¯•ï¼Œå¯ä»¥æä¾›æ›´åŠ è¯¦ç»†å’Œå‡†ç¡®çš„è°ƒè¯•ä¿¡æ¯ï¼Œæ–¹ä¾¿ç¨‹åºè°ƒè¯•å’Œåˆ†æã€‚DWARFåˆ™æ˜¯é‡‡ç”¨äº†ä¸€ç§åŸºäºç¼–è¯‘å™¨è¾“å‡ºçš„è°ƒè¯•ä¿¡æ¯æ ¼å¼ï¼Œéœ€è¦ç¼–è¯‘å™¨åœ¨ç¼–è¯‘æ—¶ç”Ÿæˆç›¸åº”çš„è°ƒè¯•ä¿¡æ¯ã€‚        [ sjlj ]ï¼šã€20230517è¡¥å……ã€‘æœ€æ–°ç‰ˆæœ¬çš„ mingw-w64 å·²ç»ä¸å†æ”¯æŒ sjlj å¼‚å¸¸å¤„ç†ï¼Œå–è€Œä»£ä¹‹çš„æ˜¯ dwarf2 å’Œ seh ä¸¤ç§å¤„ç†æœºåˆ¶ã€‚å¦‚æœæ‚¨çš„ç¨‹åºä¾èµ–äº sjlj å¼‚å¸¸å¤„ç†æœºåˆ¶ï¼Œé‚£ä¹ˆæ‚¨éœ€è¦è€ƒè™‘å‡çº§æˆ–ä¿®æ”¹ä»£ç ä»¥é€‚åº” mingw-w64 çš„æœ€æ–°ç‰ˆæœ¬ã€‚å¦‚æœæ‚¨ä»ç„¶æƒ³ä½¿ç”¨ sjlj å¼‚å¸¸å¤„ç†æœºåˆ¶ï¼Œé‚£ä¹ˆæ‚¨å¯ä»¥è€ƒè™‘ä½¿ç”¨æ—©æœŸç‰ˆæœ¬çš„ mingw-w64 æˆ–è€…å°è¯•å…¶ä»–ç¼–è¯‘å™¨ã€‚              Cè¿è¡Œæ—¶ï¼šé€‰æ‹©ucrt              [ucrt]ï¼šæœ€æ–°çš„ MinGW å®‰è£…åŒ…æ–°å¼•å…¥å¹¶é‡‡ç”¨äº† Universal C Runtime ï¼ˆUCRTï¼‰ï¼Œæ¯” Microsoft Visual C Runtime ï¼ˆMSVCRTï¼‰æ›´æ–°ã€‚MSVCRTæ˜¯é€æ¸è¢«UCRTå–ä»£çš„ï¼Œå› ä¸ºUCRTæä¾›äº†ä¸€è‡´çš„APIï¼ˆåº”ç”¨ç¨‹åºæ¥å£ï¼‰å’Œè¡Œä¸ºï¼Œèƒ½å¤Ÿè®©å¼€å‘äººå‘˜ä½¿ç”¨ç»Ÿä¸€çš„ä»£ç æ¥å¤„ç†ç›¸åŒçš„ä»»åŠ¡ï¼Œä¸ç®¡æ˜¯å“ªä¸ªWindowså¹³å°ç”šè‡³æ˜¯é€šè¿‡ä¸åŒç‰ˆæœ¬ç¼–è¯‘å™¨ç¼–è¯‘ã€‚ä½† UCRT åªæ”¯æŒ Windows 10 åŠå…¶ä»¥ä¸Šçš„æ“ä½œç³»ç»Ÿã€‚        [msvcrt]ï¼šMSVCRTï¼ˆMicrosoft Visual C++ Runtimeï¼‰å’ŒUCRTï¼ˆUniversal C Runtimeï¼‰æ˜¯Microsoft Windowsä¸Šçš„ä¸¤ç§Cæ ‡å‡†åº“å˜ä½“ã€‚MSVCRTåœ¨æ‰€æœ‰Microsoft Windowsç‰ˆæœ¬ä¸­éƒ½é»˜è®¤å¯ç”¨ï¼Œä½†ç”±äºå‘åå…¼å®¹æ€§é—®é¢˜ï¼Œå®ƒå·²ç»è¿‡æ—¶ï¼Œä¸å…¼å®¹C99å¹¶ä¸”ç¼ºå°‘ä¸€äº›åŠŸèƒ½ã€‚            3.1.2. é…ç½® â€œç¼–è¯‘-è°ƒè¯•-è¿è¡Œâ€ é“¾å®‰è£…å®Œç¼–è¯‘å™¨åï¼Œéœ€è¦é…ç½®â€œç¼–è¯‘-è°ƒè¯•-è¿è¡Œâ€é“¾ï¼Œå‘Šè¯‰ VSCode å¦‚ä½•ä½¿ç”¨ç¼–è¯‘å™¨è¿›è¡Œç¼–è¯‘è°ƒè¯•è¿è¡Œæ“ä½œã€‚æœ‰ä¸¤ç§é…ç½®æ–¹å¼ï¼Œä¸€ç§æ˜¯ä½¿ç”¨ VSCode åŸç”Ÿçš„é…ç½®ï¼Œå¦ä¸€ç§æ˜¯ä½¿ç”¨ CMake ã€‚äºŒè€…çš„å·®å¼‚åœ¨äºï¼š  VSCode é…ç½®ï¼šåŸºäºä¸€ç³»åˆ— ./vscode/.json æ–‡ä»¶å®Œæˆé…ç½®ï¼Œæ–‡ä»¶å†…å®¹éšå¹³å°å’Œç¼–è¯‘å™¨ä¸åŒè€Œä¸åŒï¼›  CMake é…ç½®ï¼šåŸºäº CMakeLists.txt æ–‡ä»¶å®Œæˆé…ç½®ï¼Œç›´æ¥éšé¡¹ç›®è¿ç§»ï¼Œå¯å®ç°ä¸å¹³å°å’Œç¼–è¯‘å™¨æ— å…³çš„é¡¹ç›®ç¼–è¯‘è°ƒè¯•è¿è¡Œï¼Œæ›´æœ‰åˆ©äºè·¨å¹³å°é¡¹ç›®å¼€å‘ã€‚å› æ­¤ï¼Œæ¨èä½¿ç”¨ CMake è¿›è¡Œ â€œç¼–è¯‘-è°ƒè¯•-è¿è¡Œâ€ é“¾é…ç½®ã€‚3.1.2.1. VSCode é…ç½®VSCode æä¾›äº†ä¸€ç³»åˆ—åŸºäº .json æ–‡ä»¶çš„é…ç½®æ–¹å¼ã€‚è¿™äº›æ–‡ä»¶å­˜æ”¾åœ¨å¾…å¼€å‘é¡¹ç›®çš„ .vscode æ–‡ä»¶å¤¹å†…ã€‚å¯¹äº C/C++ é¡¹ç›®ï¼Œæ–‡ä»¶ä¸»è¦åŒ…æ‹¬c_cpp_properties.json //è¯­è¨€é…ç½®task.json             //ç¼–è¯‘é…ç½®launch.json           //è°ƒè¯•/è¿è¡Œé…ç½®      è¯­è¨€é…ç½®ï¼ˆc_cpp_properties.jsonï¼‰    å¯¹äº C/C++ è¯­è¨€ï¼ŒVSCode ä¸“é—¨æä¾›äº† c_cpp_properties.json é…ç½®æ–‡ä»¶è¿›è¡Œé…ç½®ï¼Œä¸€ä¸ªä½¿ç”¨ MinGW-W64 ç¼–è¯‘å™¨çš„å…¸å‹çš„é…ç½®å¦‚ä¸‹æ‰€ç¤ºï¼š          \"configurations\": [          {              \"name\": \"Win32\",              \"includePath\": [                  \"${default}\",                  \"${workspaceFolder}/**\"              ],              \"defines\": [                  \"_DEBUG\",                  \"UNICODE\",                  \"_UNICODE\"              ],              \"windowsSdkVersion\": \"10.0.17763.0\",              \"compilerPath\": \"X:/your/compile/path/g++.exe\", // &lt;--modify              \"cStandard\": \"c11\",              \"cppStandard\": \"c++17\",              \"intelliSenseMode\": \"windows-gcc-x64\"          }      ],      \"version\": 4  }        æ³¨æ„ï¼Œå…¶ä¸­ä¸ç¼–è¯‘å™¨æœ‰å…³çš„è·¯å¾„é…ç½®é¡¹éœ€è¦æ ¹æ®è‡ªèº«æƒ…å†µæ›´æ”¹ã€‚        ç¼–è¯‘é…ç½®ï¼ˆtask.jsonï¼‰      {      \"version\": \"2.0.0\",      \"tasks\": [          {              \"type\": \"cppbuild\",              \"label\": \"C/C++: g++.exe build\",              \"command\": \"g++.exe\",              \"args\": [                  \"-fdiagnostics-color=always\",                  \"-std=c++11\", // &lt;-- user defined according to project                  \"-g\",                  \"${workspaceFolder}/*.c\", // &lt;-- source files                  \"${workspaceFolder}/xx/*.c\",                  \"${workspaceFolder}/*.cpp\",                  \"${workspaceFolder}/xx/*.cpp\",                  \"-I${workspaceFolder}/xx\", // &lt;-- include header files using \"-Ixxxx\"                  \"-I${workspaceFolder}/xx/xx\",                  \"-I${workspaceFolder}/bbb/bb\",                  \"-o\",                  \"${workspaceFolder}/XXXX.exe\", // comipled exe name                  \"-lws2_32\" // &lt;-- link lib when using windows socket              ],              \"options\": {                  \"cwd\": \"${fileDirname}\"              },              \"problemMatcher\": [                  \"$gcc\"              ],              \"group\": \"build\",              \"detail\": \"C/C++: g++.exe build\" // user defined          }      ]  }        å…¶ä¸­          std=c++11 è¡¨æ˜é¡¹ç›®é‡‡ç”¨ C++11 è§„èŒƒç¼–è¯‘ï¼Œéœ€è¦æ ¹æ®é¡¹ç›®æƒ…å†µè‡ªè¡Œä¿®æ”¹ï¼›      -g è¡¨ç¤ºåç»­å†…å®¹æ˜¯å¾…ç¼–è¯‘çš„æ‰€æœ‰æ–‡ä»¶ï¼›      ${workspaceFolder} æ˜¯é¡¹ç›®çš„æ ¹ç›®å½•ï¼Œé¡¹ç›®æºæ–‡ä»¶å¯åœ¨å…¶åŸºç¡€ä¸Šåˆ—å†™ï¼›      -I ç”¨æ¥ include å¤´æ–‡ä»¶è·¯å¾„ï¼›      *.cpp å¯ä»¥ä½¿ç”¨é€šé…ç¬¦æ¥è¡¨ç¤ºæŸè·¯å¾„ä¸‹æ‰€æœ‰åç¼€åç›¸åŒçš„æŸæ–‡ä»¶ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥é€ä¸€å†™å‡ºé¡¹ç›®æ‰€æœ‰æ–‡ä»¶ï¼›      detail å®šä¹‰äº†ç¼–è¯‘é…ç½®çš„åç§°ï¼Œç”¨äºç•Œé¢æ˜¾ç¤ºå’Œåç»­è°ƒè¯•è¿è¡Œé…ç½®ä½¿ç”¨ï¼›        ä¸Šè¿°é…ç½®ç­‰ä»·äºå‘½ä»¤è¡Œ      g++.exe -std=c++11 -g xx/x.c xxx.c  xxx.cpp -IX:/xx/xx -IX:/bbb/bb -lws2_32 -o XXXX.exe            è°ƒè¯•/è¿è¡Œé…ç½®ï¼ˆlaunch.jsonï¼‰    è°ƒè¯•é…ç½®æ˜¯åœ¨ç¼–è¯‘æˆåŠŸåï¼Œå¯¹ç¼–è¯‘å¾—åˆ°çš„å¯æ‰§è¡Œç¨‹åº .exe æ–‡ä»¶è¿›è¡Œè°ƒè¯•/è¿è¡Œçš„è¿‡ç¨‹é…ç½®ï¼Œä¸€ä¸ªå…¸å‹çš„é…ç½®å¦‚ä¸‹ï¼š      {      \"version\": \"0.2.0\",      \"configurations\": [          {              \"name\": \"GCC:è°ƒè¯•è¿è¡Œ\",              \"type\": \"cppvsdbg\",              \"request\": \"launch\",              \"program\": \"${workspaceFolder}/XXXX.exe\", // æ³¨æ„ä¸ç¼–è¯‘é…ç½®å¾—åˆ°çš„å¯æ‰§è¡Œæ–‡ä»¶åŒå              \"args\": [],              \"stopAtEntry\": false,              \"cwd\": \"${workspaceFolder}\",              \"environment\": [],              \"externalConsole\": true,              \"preLaunchTask\": \"C/C++: g++.exe build\" //åœ¨å¯åŠ¨è°ƒè¯•ä¹‹å‰é»˜è®¤å…ˆç¼–è¯‘ï¼Œä»¥ä¾¿ç”Ÿæˆç›®æ ‡ç¨‹åºï¼Œæ³¨æ„ä¸ç¼–è¯‘ä»»åŠ¡çš„åç§°ç›¸åŒ          },          { // used for python, can be deleted              \"name\": \"Python: å½“å‰æ–‡ä»¶\",              \"type\": \"python\",              \"request\": \"launch\",              \"program\": \"${file}\",              \"console\": \"integratedTerminal\"          }      ]  }        å…¶ä¸­          programï¼šæ˜¯ç¼–è¯‘å¾—åˆ°çš„å¯æ‰§è¡Œç¨‹åºçš„åç§°ï¼Œæ³¨æ„ä¸ç¼–è¯‘é…ç½®ä¸­çš„ -o å‘½ä»¤åçš„ç¨‹åºåç§°ä¿æŒä¸€è‡´ï¼›      preLaunchTaskï¼šç”¨æ¥ç¡®å®šè¿›è¡Œè°ƒè¯•/è¿è¡Œå‰éœ€è¦æ‰§è¡Œçš„ä»»åŠ¡ï¼Œå¦‚æœè®¾ç½®æ­¤é¡¹ä¸ºç¼–è¯‘ä»»åŠ¡ï¼ˆæ¯”å¦‚æœ¬ä¾‹ä¸­çš„ C/C++: g++.exe build ä»»åŠ¡ï¼‰ï¼Œå¯ä»¥åœ¨æ¯æ¬¡è°ƒè¯•/è¿è¡Œå‰è‡ªåŠ¨å®Œæˆç¼–è¯‘ï¼Œè€Œæ— éœ€æ‰‹åŠ¨ç¼–è¯‘ï¼›        æ³¨æ„ï¼Œlaunch.json æ˜¯ä¸€ä¸ªè·¨è¯­è¨€é€šç”¨çš„é…ç½®æ–‡ä»¶ï¼Œæ„å‘³ç€ä¸ä»…ä»… C/C++ ä½¿ç”¨è¯¥æ–‡ä»¶ï¼Œå…¶ä»–è¯­è¨€å¦‚ Python ä¹Ÿä½¿ç”¨è¯¥é…ç½®æ–‡ä»¶è¿›è¡Œä»£ç è§£é‡Šé…ç½®ã€‚ä¸åŒè¯­è¨€çš„é…ç½®é€šè¿‡å¤§æ‹¬å·åˆ†éš”å¼€ï¼Œå¹¶æ ¹æ®ç”¨æˆ·è‡ªå®šä¹‰çš„é…ç½®åç§° \"name\": \"xxxx\" æ¥è¿›è¡ŒåŒºåˆ†ã€‚        ç¼–è¯‘è°ƒè¯•è¿è¡Œ    æ‰“å¼€ä»»æ„å·¥ç¨‹é¡¹ç›®æºæ–‡ä»¶ï¼Œå¦‚ hello.cppï¼ŒåŒæ—¶æŒ‰ä¸‹å¿«æ·é”® Ctrl + Shift + Bã€‚VSCodeä¼šå¯åŠ¨ç”Ÿæˆä»»åŠ¡å¹¶åœ¨ç»ˆç«¯ä¸­æ˜¾ç¤ºå…¶ç”Ÿæˆè¿‡ç¨‹ã€‚ç”Ÿæˆå®Œæ¯•åï¼ŒæŒ‰ F5 è¿›è¡Œè°ƒè¯•è¿è¡Œï¼Œå¯åœ¨ç»ˆç«¯ä¸­æŸ¥çœ‹è¿è¡Œç»“æœã€‚        è‡³æ­¤ï¼Œæˆ‘ä»¬å®Œæˆäº†å…¨éƒ¨çš„C/C++å¼€å‘ç¯å¢ƒéƒ¨ç½²ã€‚  3.1.2.2. CMake é…ç½®CMakeï¼ˆå®˜ç½‘ï¼šhttps://cmake.orgï¼‰æ˜¯ä¸€ä¸ªè·¨å¹³å°çš„å®‰è£…ï¼ˆç¼–è¯‘ï¼‰å·¥å…·ï¼Œå¯ä»¥ç”¨ç®€å•çš„è¯­å¥æ¥æè¿°æ‰€æœ‰å¹³å°çš„å®‰è£…(ç¼–è¯‘è¿‡ç¨‹)ã€‚ä»–èƒ½å¤Ÿè¾“å‡ºå„ç§å„æ ·çš„makefileæˆ–è€…projectæ–‡ä»¶ï¼Œèƒ½æµ‹è¯•ç¼–è¯‘å™¨æ‰€æ”¯æŒçš„C++ç‰¹æ€§ã€‚CMake å…è®¸å¼€å‘è€…ç¼–å†™ä¸€ç§å¹³å°æ— å…³çš„ CMakeLists.txt æ–‡ä»¶æ¥å®šåˆ¶æ•´ä¸ªç¼–è¯‘æµç¨‹ï¼Œç„¶åå†æ ¹æ®ç›®æ ‡ç”¨æˆ·çš„å¹³å°è¿›ä¸€æ­¥ç”Ÿæˆæ‰€éœ€çš„æœ¬åœ°åŒ– Makefile å’Œå·¥ç¨‹æ–‡ä»¶ï¼Œå¦‚ Unix çš„ Makefile æˆ– Windows çš„ Visual Studio å·¥ç¨‹ã€‚ä»è€Œåšåˆ° â€œWrite once, run everywhereâ€ã€‚      å®‰è£… CMake    åœ¨ Windows ç¯å¢ƒä¸‹ï¼Œç›´æ¥å‰å¾€å®˜ç½‘ä¸‹è½½æœ€æ–°çš„å®‰è£…åŒ…å®‰è£…ã€‚å¯ä»¥é€šè¿‡ cmake --version æŸ¥çœ‹ç‰ˆæœ¬æ¥ç¡®è®¤å®‰è£…æ˜¯å¦æˆåŠŸã€‚    åœ¨ VScode ä¸­ï¼Œå®‰è£…ä»¥ä¸‹ä¸¤ä¸ªæ’ä»¶ï¼š          CMake      CMake Tools        åœ¨ Cmake Tools æ’ä»¶è®¾ç½®ä¸­å°† Cmake çš„ make.exe å¯æ‰§è¡Œç¨‹åºå®Œæ•´è·¯å¾„è®¾ç½®åˆ° cmake.cmakePathã€‚åŒæ—¶å°† make.exe æ‰€åœ¨çš„è·¯å¾„æ·»åŠ åˆ°ç³»ç»Ÿçš„ç¯å¢ƒå˜é‡ä¸­ã€‚    é…ç½® CMakeLists.txt          è‹¥åªéœ€è¦å¯¹ä»–äººé¡¹ç›®è¿›è¡Œç¼–è¯‘ï¼Œåˆ™å¯è·³è¿‡æ­¤æ­¥éª¤ã€‚è‹¥éœ€è¦å¯¹è‡ªå·±çš„é¡¹ç›®è¿›è¡Œ CMake é…ç½®ï¼Œè¯·ç»§ç»­é˜…è¯»æœ¬æ¡å†…å®¹ã€‚        ä½¿ç”¨ CMake æ’ä»¶åˆ›å»º CMakeLists.txt æ–‡ä»¶ï¼ˆæ–‡ä»¶åä¸€ä¸ªå­—éƒ½ä¸èƒ½é”™ï¼‰ã€‚ä¸¤ç§åˆ›å»ºæ–¹å¼ï¼Œæ¨èåè€…ï¼š                  æ‰‹åŠ¨åˆ›å»ºï¼Œç›´æ¥åœ¨å·¥ç¨‹é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ª CMakeLists.txt æ–‡ä»¶ï¼›                    è‡ªåŠ¨åˆ›å»ºï¼Œåœ¨ VSCode ä¸­æ‰“å¼€å·¥ç¨‹é¡¹ç›®æ–‡ä»¶å¤¹ï¼Œè¾“å…¥å¿«æ·é”®ç»„åˆ Ctrl + Shift + P ç„¶åè¾“å…¥ cmake quick start è¿›è¡Œå¿«é€Ÿè®¾ç½®ã€‚é¦–æ¬¡è®¾ç½®ä¼šå¼¹å‡º Select a Kit éœ€è¦é€‰æ‹©ä¸€ä¸ªç¼–è¯‘å™¨ï¼Œè‹¥æ­£ç¡®å®‰è£… MinGW-W64 å¹¶æ·»åŠ äº†ç¯å¢ƒå˜é‡ï¼Œä¸€èˆ¬ä¼šè‡ªåŠ¨æ£€ç´¢åˆ°ç±»ä¼¼ GCC XX.X.X x86-64-w64-mingw32 çš„ç¼–è¯‘å™¨ï¼Œæ³¨æ„æ£€æŸ¥åé¢çš„è·¯å¾„æ˜¯å¦æ­£ç¡®ï¼Œç„¶åé€‰æ‹©å³å¯ã€‚é€‰æ‹©åå³ä¼šåœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹è‡ªåŠ¨åˆ›å»ºCMakeLists.txt æ–‡ä»¶ã€‚                é…ç½®å³ç¼–å†™ CMakeLists.txt æ–‡ä»¶ï¼Œé€šå¸¸ä¸€ä¸ª CMakeLists.txt æ–‡ä»¶éœ€è¦åŒ…å«ï¼š          project(xxx)ï¼šé¡¹ç›®åç§°      add_subdirectory(path)ï¼šå·¥ç¨‹å¯ç”±å¤šä¸ªå­ç›®å½•ç»„æˆï¼Œæ¯ä¸ªå­ç›®å½•å¯ä»¥è®¾ç½®è‡ªå·±çš„ CMakeLists.txt å¹¶ä¸”é€šè¿‡è¯¥æ ¹ç›®å½•çš„ CMakeLists.txt é€šè¿‡æœ¬å‘½ä»¤åŒ…å«      add_executable(XXX)ï¼šç¼–è¯‘å¾—åˆ°çš„å¯æ‰§è¡Œç¨‹åºå      target_include_directories(path)ï¼šå¤´æ–‡ä»¶è·¯å¾„      target_link_libraries(path)ï¼šå¯æ‰§è¡Œç¨‹åºä¾èµ–çš„åº“æ–‡ä»¶åï¼Œå¦‚å„ç±»åŠ¨æ€é“¾æ¥åº“        æ„å»ºé¡¹ç›®CMakeé»˜è®¤é‡‡ç”¨ out-of-source æ„å»ºæ–¹å¼ï¼Œå³ä¼šåœ¨ CMakeLists.txt æ‰€åœ¨çš„ç›®å½•ä¸‹ï¼ˆä¸€èˆ¬ä¹Ÿå°±æ˜¯å·¥ç¨‹é¡¹ç›®çš„æ ¹ç›®å½•ï¼‰æ–°å»ºä¸€ä¸ª build æ–‡ä»¶å¤¹ï¼Œç”¨äºå­˜å‚¨ CMake æ„å»ºçš„ä¸­é—´æ–‡ä»¶å’Œç”Ÿæˆçš„ç›®æ ‡æ–‡ä»¶ã€‚è¿™ç§æ–¹æ³•å¯ä»¥ä¿è¯ç”Ÿæˆä¸­é—´äº§ç‰©ä¸æºä»£ç åˆ†ç¦»ï¼ˆå³ç”Ÿæˆçš„æ‰€æœ‰ç›®æ ‡æ–‡ä»¶éƒ½å­˜å‚¨åœ¨ build æ–‡ä»¶å¤¹ä¸­ï¼Œå› æ­¤ä¸ä¼šå¹²æ‰°æºä»£ç ä¸­çš„ä»»ä½•æ–‡ä»¶ï¼‰ã€‚          æ‰‹åŠ¨æ„å»º  é‡‡ç”¨å‘½ä»¤è¡Œçš„æ–¹å¼å¯æ“ä½œå¦‚ä¸‹          mkdir build  cd build  cmake ..                    è‡ªåŠ¨æ„å»º  è‹¥ä½¿ç”¨ CMake Tools å¹¶è®¾ç½®ä¿å­˜æ—¶è‡ªåŠ¨æ„å»ºï¼Œé‚£ä¹ˆåœ¨ä½¿ç”¨å¿«æ·é”® Ctrl+S ä¿å­˜ CMakeLists.txt æ—¶ï¼Œä¼šè‡ªåŠ¨ç”Ÿæˆé¡¹ç›®æ„å»ºçš„ä¸­é—´æ–‡ä»¶ã€‚              æ„å»ºç»“æœ  æ„å»ºè¿‡ç¨‹å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚          æ„å»ºå®Œæ¯•å¾—åˆ°çš„ä¸­é—´æ–‡ä»¶å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚                          ç¼–è¯‘è°ƒè¯•è¿è¡Œ                  ç¼–è¯‘  æ‰“å¼€å‘½ä»¤æ¿ï¼ˆCtrl+Shift+Pï¼‰å¹¶è¿è¡Œ CMakeï¼šBuildï¼›æˆ–ä»åº•éƒ¨çŠ¶æ€æ ä¸­ç‚¹å‡»â€buildâ€æŒ‰é’®ï¼›  ä¸‹å›¾æ˜¯ç¼–è¯‘çš„ç¤ºæ„å›¾ï¼Œç¼–è¯‘åå¾—åˆ°åä¸º exer çš„å¯æ‰§è¡Œæ–‡ä»¶ï¼ˆæ–‡ä»¶ä½äº build æ–‡ä»¶å¤¹å†…ï¼‰ã€‚                            è°ƒè¯•/è¿è¡Œ  è°ƒè¯•ï¼šæ‰“å¼€æŸä¸ªæºä»£ç æ–‡ä»¶ï¼Œå¹¶è®¾ç½®ä¸€ä¸ªæ–­ç‚¹ã€‚ç„¶åç‚¹å‡» VSCode ä¸‹æ–¹çš„ ã€è™«å­ã€‘ å›¾æ ‡è¿›è¡Œ DEBUG è°ƒè¯•ã€‚  è¿è¡Œï¼šç‚¹å‡»ä¸‹æ–¹çš„ ã€ä¸‰è§’ã€‘ å›¾æ ‡è¿›è¡Œè¿è¡Œã€‚            3.2. MSVC ç¼–è¯‘å™¨3.2.1. å®‰è£…ç¼–è¯‘å™¨MSVC ç¼–è¯‘å™¨å³ MicroSoft Visual C/C++ ç¼–è¯‘å™¨ï¼ˆæ ¸å¿ƒæ–‡ä»¶ä¸º cl.exeï¼‰ï¼Œå¦‚æœä¸‹è½½å®‰è£…äº† Visual Studio é›†æˆå¼€å‘ç¯å¢ƒï¼ˆå¦‚VS2022ï¼‰ï¼Œåˆ™è¯¥ç¼–è¯‘å™¨å·²ç»è‡ªåŠ¨éƒ¨ç½²åˆ°äº†è®¡ç®—æœºä¸­ã€‚é‡‡ç”¨ VSCode ä½œä¸ºç¼–è¾‘å™¨æ—¶ï¼Œå¯ä»¥åªå•ç‹¬å®‰è£…ç¼–è¯‘å™¨è€Œæ— éœ€å®‰è£…å®Œæ•´çš„ Visual Studio IDEã€‚å‰å¾€ Visual Studio å®˜ç½‘ï¼ˆhttps://visualstudio.microsoft.com/zh-hans/downloads/ï¼‰ ï¼Œå¾€ä¸‹æ‹‰ï¼Œæ‰¾åˆ°å¹¶å±•å¼€ â€œVisual Studio 20xx å·¥å…·â€ï¼Œé€‰æ‹© â€œVisual Studio 20xx ç”Ÿæˆå·¥å…·â€ï¼Œä¸‹è½½å¹¶æŒ‰ç…§æç¤ºè¿›è¡Œå®‰è£…ã€‚ä»…å®‰è£… MSVC ç¼–è¯‘å™¨å ç”¨çš„ç©ºé—´è¿œå°äºå®Œæ•´å®‰è£… VS IDEã€‚3.2.2. é…ç½® â€œç¼–è¯‘-è°ƒè¯•-è¿è¡Œâ€ é“¾VSCodeè¿›è¡Œç¼–è¯‘è¿æ¥ç­‰æ“ä½œä¾èµ–ä¸€ç³»åˆ—.jsonæ ¼å¼çš„é…ç½®æ–‡ä»¶ï¼Œè¿™äº›é…ç½®æ–‡ä»¶éƒ½ä½äºå·¥ä½œè·¯å¾„ä¸‹çš„.vscodeæ–‡ä»¶å¤¹å†…ã€‚3.2.2.1. VSCode é…ç½®      è¯­è¨€é…ç½®ï¼ˆc_cpp_properties.jsonï¼‰    æ‰“å¼€VSCodeï¼Œæ‰“å¼€ä¸€ä¸ªå·¥ä½œæ–‡ä»¶å¤¹ï¼Œå†™ä¸€ä¸ªhello worldçš„.cppç¨‹åºã€‚åœ¨å·¥ä½œè·¯å¾„çš„æ ¹æ–‡ä»¶å¤¹ä¸­ï¼Œç„¶åæŒ‰å¿«æ·é”®ctrl+shift+Pï¼Œæœç´¢â€œc/câ€ï¼Œé€‰æ‹© â€œç¼–è¾‘é…ç½®(JSON)â€ ã€‚VSCodeå°†è‡ªåŠ¨åˆ›å»º.vscode/c_cpp_properties.jsoné…ç½®æ–‡ä»¶ã€‚æˆ–è€…ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥æ‰‹åŠ¨åˆ›å»ºè¯¥é…ç½®æ–‡ä»¶å¹¶å¡«å……å†…å®¹ã€‚        æ ¹æ®ä¸ªäººå®‰è£…MSVCç¼–è¯‘å™¨çš„ä½ç½®ä¸åŒï¼Œé…ç½®compilerPathè·¯å¾„ï¼ˆå³cl.exeçš„è·¯å¾„ï¼‰ã€‚ä»¥ä¸‹å›¾ä¸ºä¾‹ï¼Œé™¤compilerPathå¤–ï¼Œå…¶å®ƒé…ç½®é¡¹ä¿æŒä¸å›¾ä¸­ä¸€è‡´ã€‚        æ³¨æ„ï¼Œè¯¥è·¯å¾„ä¹Ÿéœ€è¦ä¿å­˜åœ¨ç³»ç»Ÿçš„ç¯å¢ƒå˜é‡ Path ä¸­ã€‚å¦åˆ™ä¼šå¯¼è‡´ cl å‘½ä»¤ä¸å¯ç”¨ã€‚        ç¼–è¯‘é…ç½®ï¼ˆtask.jsonï¼‰    å†æ¬¡ctrl+shift+Pï¼Œæœç´¢ â€œtaskâ€ï¼Œé€‰æ‹© â€œé…ç½®é»˜è®¤æµ‹è¯•ä»»åŠ¡â€ â†’ â€œä½¿ç”¨æ¨¡æ¿åˆ›å»ºâ€¦â€ â†’ â€œOthers è¿è¡Œä»»æ„å¤–éƒ¨å‘½ä»¤çš„ç¤ºä¾‹â€ã€‚VSCodeå°†ä¼šè‡ªåŠ¨åˆ›å»º.vscode/task.jsoné…ç½®æ–‡ä»¶ï¼Œæˆ‘ä»¬åŒæ ·ä¹Ÿå¯ä»¥æ‰‹åŠ¨åˆ›å»ºè¯¥æ–‡ä»¶ã€‚ç„¶åï¼Œç”¨ä»¥ä¸‹ä»£ç æ›¿æ¢æ–‡ä»¶çš„æ‰€æœ‰å†…å®¹ï¼š      {      \"version\": \"2.0.0\",      \"tasks\": [          {              \"label\": \"msvc build\",              \"type\": \"shell\",              \"command\": \"cl.exe\",              \"args\": [                  \"/I'E:\\\\ProgramFiles\\\\Microsoft Visual Studio\\\\2019\\\\BuildTools\\\\VC\\\\Tools\\\\MSVC\\\\14.25.28610\\\\include'\",                  \"/I'C:\\\\Program Files (x86)\\\\Windows Kits\\\\10\\\\Include\\\\10.0.18362.0\\\\shared'\",                  \"/I'C:\\\\Program Files (x86)\\\\Windows Kits\\\\10\\\\Include\\\\10.0.18362.0\\\\ucrt'\",                  \"/I'C:\\\\Program Files (x86)\\\\Windows Kits\\\\10\\\\Include\\\\10.0.18362.0\\\\um'\",                  \"/I'C:\\\\Program Files (x86)\\\\Windows Kits\\\\10\\\\Include\\\\10.0.18362.0\\\\winrt'\",                  \"/I'${workspaceFolder}\\\\AAA\\\\AAAA\\\\'\",                  \"/I'${workspaceFolder}\\\\BBB\\\\'\",                  \"/I'${workspaceFolder}\\\\'\",                  \"/nologo\",                  \"${workspaceFolder}\\\\CCC\\\\CCCC\\\\*.c\",                  \"${workspaceFolder}\\\\DDD\\\\*.c\",                  \"${workspaceFolder}\\\\EEE\\\\*.cpp\",                  \"${workspaceFolder}\\\\*.cpp\",                  \"${workspaceFolder}\\\\*.c\",                  \"/Zi\",                  \"/EHsc\",                  \"/Fo:${workspaceFolder}\\\\build\\\\\",                  \"/Fe:winFFF.exe\",                  \"/link\",                  \"/libpath:'E:\\\\ProgramFiles\\\\Microsoft Visual Studio\\\\2019\\\\BuildTools\\\\VC\\\\Tools\\\\MSVC\\\\14.25.28610\\\\lib\\\\x64'\",                  \"/libpath:'C:\\\\Program Files (x86)\\\\Windows Kits\\\\10\\\\Lib\\\\10.0.18362.0\\\\ucrt\\\\x64'\",                  \"/libpath:'C:\\\\Program Files (x86)\\\\Windows Kits\\\\10\\\\Lib\\\\10.0.18362.0\\\\um\\\\x64'\"              ],              \"group\": {                  \"kind\": \"build\",                  \"isDefault\": true              },              \"presentation\": {                  \"reveal\": \"always\"              },              \"problemMatcher\": \"$msCompile\"          }      ]  }        ä¸‹é¢å¯¹è¯¥æ–‡ä»¶ä¸­çš„ \"args\" è¿›è¡Œè¯¦ç»†è§£è¯»ï¼š          \"/I'includepath'\" ä¸ºç¨‹åºä¾èµ–çš„å¤´æ–‡ä»¶å­˜æ”¾è·¯å¾„ï¼Œ/I å³includeã€‚ç¬¬ä¸€æ¡è·¯å¾„ä¸ºMSVCç¼–è¯‘å™¨çš„å¤´æ–‡ä»¶è·¯å¾„ï¼Œåå››æ¡è·¯å¾„ä¸ºWindows 10åŒ…å«çš„å¤´æ–‡ä»¶è·¯å¾„ã€‚å…·ä½“è·¯å¾„æ ¹æ®ä¸ªäººçš„ç³»ç»Ÿå’Œç¼–è¯‘å™¨è€Œå¼‚ã€‚è¿™äº”æ¡è·¯å¾„ä¸ºå¿…å¤‡çš„åŒ…å«è·¯å¾„ï¼›      \"/I'${workspaceFolder}\\\\AAA\\\\AAAA\\\\'\" ç­‰ç­‰ä¸ºå·¥ç¨‹é¡¹ç›®æºä»£ç æ‰€ä¾èµ–çš„å¤´æ–‡ä»¶çš„å­˜æ”¾è·¯å¾„ï¼Œå…¶ä¸­${workspaceFolder} ä¸ºé¡¹ç›®çš„å·¥ä½œè·¯å¾„æ ¹ç›®å½•ï¼ŒAAAå’ŒAAAAä¸ºé¡¹ç›®è‡ªå®šä¹‰çš„æ–‡ä»¶å¤¹åï¼Œæ ¹æ®ä¸ªäººé¡¹ç›®çš„å…·ä½“æƒ…å†µè®¾ç½®ã€‚åé¢çš„BBBã€CCCç­‰ç±»ä¼¼ï¼›      \"/nologo\" è¡¨ç¤ºå–æ¶ˆæ˜¾ç¤ºç‰ˆæƒæ ‡å¿—åœ¨ç¼–è¯‘å™¨å¯åŠ¨æ—¶å’Œåœ¨ç¼–è¯‘æœŸé—´æ˜¾ç¤ºä¿¡æ¯æ€§æ¶ˆæ¯ï¼›      \"${workspaceFolder}\\\\CCC\\\\CCCC\\\\*.c\", ç­‰ç­‰è¡¨ç¤ºé¡¹ç›®åŒ…å«çš„éœ€è¦ç¼–è¯‘çš„æºä»£ç æ–‡ä»¶ï¼ˆ.cï¼Œ.cppï¼‰ï¼›      \"/Zi\" é€‰æ‹©ä¸ºç¨‹åºåˆ›å»ºçš„è°ƒè¯•ä¿¡æ¯çš„ç±»å‹ï¼Œæ­¤å¤„å°†æ­¤ä¿¡æ¯ä¿å­˜åœ¨ç¨‹åºæ•°æ®åº“(PDB)ä¸­ï¼›      \"/EHsc\" é€‰æ‹©å¼‚å¸¸å¤„ç†æ¨¡å‹ï¼Œæ­¤å¤„ä¸ºåŒæ­¥å¼‚å¸¸å¤„ç†æ¨¡å‹ï¼›      \"/Fo:${workspaceFolder}\\\\build\\\\\", è®¾ç½®åˆ›å»ºçš„ .object æ–‡ä»¶çš„å­˜æ”¾è·¯å¾„ï¼Œæ­¤å¤„ä¸ºå·¥ä½œè·¯å¾„ä¸‹çš„buildæ–‡ä»¶å¤¹ï¼›      \"/Fe:winFFF.exe\" è®¾ç½®ç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶.exe çš„åç§°ï¼Œæ­¤å¤„ä¸º winFFF.exeï¼›      \"/link\" ä¼ è¾“æŒ‡å®šçš„å‚æ•°ç»™linkï¼Œæ­¤å¤„è¡¨ç¤ºå°†åé¢çš„è·¯å¾„ä¼ é€’ç»™è¿æ¥å™¨ç”¨äºè¿æ¥ï¼›      \"/libpath:'winlibpath'\" ä¸º Window 10 çš„åº“æ–‡ä»¶å­˜æ”¾è·¯å¾„ï¼Œæ ¹æ®Windowsç¯å¢ƒè€Œå¼‚ã€‚è¿™ä¸‰æ¡è·¯å¾„ä¸ºå¿…å¤‡çš„åº“æ–‡ä»¶è·¯å¾„ï¼›        ä»¥ä¸€ä¸ªæœ€ç®€å•çš„ä¸€ä¸ªhello worldç¨‹åºä¸ºä¾‹ï¼Œæºä»£ç æ–‡ä»¶åä¸ºhello.cppï¼Œç›¸åº”çš„ task.json æ–‡ä»¶ä¸­çš„ \"args\" å¦‚ä¸‹ï¼š      \"args\": [      \"/I'D:\\\\Programs\\\\Microsoft Visual Studio\\\\2019\\\\Community\\\\VC\\\\Tools\\\\MSVC\\\\14.24.28314\\\\include'\",      \"/I'C:\\\\Program Files (x86)\\\\Windows Kits\\\\10\\\\Include\\\\10.0.18362.0\\\\shared'\",      \"/I'C:\\\\Program Files (x86)\\\\Windows Kits\\\\10\\\\Include\\\\10.0.18362.0\\\\ucrt'\",      \"/I'C:\\\\Program Files (x86)\\\\Windows Kits\\\\10\\\\Include\\\\10.0.18362.0\\\\um'\",      \"${workspaceFolder}\\\\hello.cpp\",      \"/Zi\",      \"/EHsc\",      \"/Fo:${workspaceFolder}\\\\hello.obj\",      \"/Fe:${workspaceFolder}\\\\hello.exe\",      \"/link\",      \"/libpath:'D:\\\\Programs\\\\Microsoft Visual Studio\\\\2019\\\\Community\\\\VC\\\\Tools\\\\MSVC\\\\14.24.28314\\\\lib\\\\x64'\",      \"/libpath:'C:\\\\Program Files (x86)\\\\Windows Kits\\\\10\\\\Lib\\\\10.0.18362.0\\\\ucrt\\\\x64'\",      \"/libpath:'C:\\\\Program Files (x86)\\\\Windows Kits\\\\10\\\\Lib\\\\10.0.18362.0\\\\um\\\\x64'\"  ],        å…¶ä¸­ï¼Œhello.cpp  ä¹Ÿå¯ä»¥é‡‡ç”¨é€šé…ç¬¦çš„å½¢å¼å†™ä¸º *.cppï¼Œæ–¹ä¾¿åç»­æ‰©å±•ã€‚        è°ƒè¯•é…ç½®ï¼ˆlaunch.jsonï¼‰    ç‚¹å‡» â€œè°ƒè¯•â€ å›¾æ ‡èœå•ï¼Œé€‰æ‹© â€œæ·»åŠ é…ç½®â€ =&gt; â€œC++ï¼ˆWindowsï¼‰â€ =&gt; â€œDefault Configurationâ€ï¼ŒVSCodeå°†è‡ªåŠ¨åˆ›å»º launch.json æ–‡ä»¶ï¼ŒåŒæ ·ä¹Ÿå¯ä»¥æ‰‹åŠ¨åˆ›å»ºè¯¥é…ç½®æ–‡ä»¶ã€‚        ç”¨ä»¥ä¸‹å†…å®¹æ›¿æ¢è¯¥æ–‡ä»¶çš„å…¨éƒ¨é»˜è®¤å†…å®¹ã€‚      {      \"version\": \"0.2.0\",      \"configurations\": [          {              \"name\": \"MSVC: è¿è¡Œ\",              \"type\": \"cppvsdbg\",              \"request\": \"launch\",              \"program\": \"${workspaceFolder}/winFFF.exe\",              \"args\": [],              \"stopAtEntry\": false,              \"cwd\": \"${workspaceFolder}\",              \"environment\": [],              \"externalConsole\": true          }      ]  }        æ³¨æ„ï¼Œprogram å­—æ®µä¸­çš„å¯æ‰§è¡Œæ–‡ä»¶åï¼Œå¿…é¡»ä¸å‰é¢ tasks.json ä¸­ args å­—æ®µçš„ \"/Fe:\" å‚æ•°å®Œå…¨ä¸€è‡´ï¼ˆæ­¤å¤„å‡ä¸º winFFF.exeï¼‰ã€‚    è‡³æ­¤ï¼Œå®Œæˆæ‰€æœ‰é…ç½®æ–‡ä»¶çš„ç”Ÿæˆã€‚éœ€è¦æé†’çš„æ˜¯ï¼ŒVSCodeæ˜¯åŸºäºå·¥ä½œè·¯å¾„è¿›è¡Œç¼–è¯‘è°ƒè¯•çš„ï¼Œè‹¥éœ€è¦åœ¨å…¶ä»–æ–‡ä»¶å¤¹ï¼ˆé¡¹ç›®ï¼‰ä¸­ä½¿ç”¨å·²æœ‰çš„é…ç½®æ—¶ï¼Œåªéœ€è¦å°†å½“å‰çš„ .vscode å­æ–‡ä»¶å¤¹å¤åˆ¶åˆ°è¯¥é¡¹ç›®çš„å·¥ä½œè·¯å¾„ä¸‹ï¼Œç„¶åä¿®æ”¹å…¶ä¸­ç›¸åº”çš„å‚æ•°é¡¹ï¼ˆå¦‚C/C++æ–‡ä»¶è·¯å¾„ã€å¯æ‰§è¡Œæ–‡ä»¶åç§°ç­‰ï¼‰å³å¯ã€‚        ç¼–è¯‘è°ƒè¯•è¿è¡Œ ä¸å‰é¢ MinGW ç¼–è¯‘å™¨ç±»ä¼¼ã€‚å®˜æ–¹åŒæ ·ç»™å‡ºäº†è¯¦ç»†çš„åŸºäºMSVCç¼–è¯‘å™¨çš„å¼€å‘ç¯å¢ƒéƒ¨ç½²æ–¹æ³•ï¼Œè§å‚è€ƒæ–‡çŒ®[1]ã€‚  3.2.2.2. CMake é…ç½®Working in Progress.5. VSCode å¿«æ·é”®Ctrl + Shift + N æ–°å»ºä¸€ä¸ª VSCode çª—ä½“Alt + left/right å›åˆ°ä¸Š/ä¸‹ä¸€ä¸ªå…‰æ ‡åœç•™çš„ä½ç½®Ctrl + Shift + P è°ƒå‡ºæ‰§è¡Œå‘½ä»¤çš„è¾“å…¥é¢æ¿Ctrl + , è°ƒå‡ºè®¾ç½®é¢æ¿Ctrl + K, Ctrl + 0 æŠ˜å æ‰€æœ‰ä»£ç å—Ctrl + K, Ctrl + J å±•å¼€æ‰€æœ‰ä»£ç å—6. å‚è€ƒæ–‡çŒ®[1] Micsosoft. Configure VS Code for Microsoft C++."
  },
  
  {
    "title": "æ¬¢è¿ä½¿ç”¨Jekyll!",
    "url": "/posts/welcome-to-jekyll/",
    "categories": "Tutorial, Writing",
    "tags": "html",
    "date": "2015-03-08 22:21:49 +0800",
    





    
    "snippet": "æœ¬æ–‡ä»‹ç»äº†åŸºäº Chirpy Jekyll Theme çš„ä¸ªäººåšå®¢ç¯å¢ƒçš„æ­å»ºæ–¹æ³•ï¼Œå¹¶ä»‹ç»äº†éƒ¨ç½²åˆ° github pages çš„æ–¹æ³•ã€‚  1. å‰è¨€  2. å›¾ç‰‡  3. å…¬å¼  4. å…³äºé¡µé¢1. å‰è¨€åšå®¢ä¸»é¢˜ä½äºï¼šhttps://github.com/cotes2020/jekyll-theme-chirpy  æ³¨æ„ï¼Œæœ¬æ–‡å†…å®¹å¯èƒ½éšç€æ—¶é—´çš„æ¨ç§»å˜å¾—è¿‡æ—¶ã€‚2. å›¾ç‰‡æ¨èåœ¨ assets/ ä¸‹...",
    "content": "æœ¬æ–‡ä»‹ç»äº†åŸºäº Chirpy Jekyll Theme çš„ä¸ªäººåšå®¢ç¯å¢ƒçš„æ­å»ºæ–¹æ³•ï¼Œå¹¶ä»‹ç»äº†éƒ¨ç½²åˆ° github pages çš„æ–¹æ³•ã€‚  1. å‰è¨€  2. å›¾ç‰‡  3. å…¬å¼  4. å…³äºé¡µé¢1. å‰è¨€åšå®¢ä¸»é¢˜ä½äºï¼šhttps://github.com/cotes2020/jekyll-theme-chirpy  æ³¨æ„ï¼Œæœ¬æ–‡å†…å®¹å¯èƒ½éšç€æ—¶é—´çš„æ¨ç§»å˜å¾—è¿‡æ—¶ã€‚2. å›¾ç‰‡æ¨èåœ¨ assets/ ä¸‹é¢æ–°å»ºæ–‡ä»¶å¤¹å­˜æ”¾å¸–å­å›¾ç‰‡ï¼Œå¦‚ assets/postsimg/ã€‚åœ¨ md æ–‡ä»¶ä¸­ç›´æ¥ä½¿ç”¨è·¯å¾„ï¼Œå¦‚ ![img description](/assets/img/postsimg/20200505/1.jpg) å³å¯ã€‚å¸–å­çš„å›¾ç‰‡æ— è®ºæ˜¯åœ¨æœ¬åœ°ï¼ˆå¦‚VSCodeæ‰“å¼€xxx.github.ioæ–‡ä»¶å¤¹ä½œä¸ºæ ¹ç›®å½•ï¼‰è¿˜æ˜¯åœ¨çº¿ä¸Šï¼ˆå¦‚ https://xxx.github.ioï¼‰å‡èƒ½æ­£å¸¸æ˜¾ç¤ºã€‚3. å…¬å¼Jekyllæ”¯æŒMarkdownçš„å…¬å¼ã€‚åœ¨æ¯ä¸ªå¸–å­å¼€å¤´å¢åŠ  math: true å³å¯ã€‚ä»–é€šè¿‡è°ƒç”¨åœ¨çº¿çš„ mathjax æ¥æ¸²æŸ“ã€‚---title: xxxxdate: 20xx-xx-xx xx:xx:xx +0x00categories: [xxx, aaa]tags: [xxa]math: true # &lt;-- add this---4. å…³äºé¡µé¢è‡ªè¡Œç¼–è¾‘ _tabs/about.md æ–‡ä»¶ã€‚"
  }
  
]

